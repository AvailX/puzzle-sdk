(function(re,Ii){typeof exports=="object"&&typeof module<"u"?Ii(exports):typeof define=="function"&&define.amd?define(["exports"],Ii):(re=typeof globalThis<"u"?globalThis:re||self,Ii(re["@puzzlehq/sdk-core"]={}))})(this,function(re){"use strict";const Ii=Symbol(),bl=Object.getPrototypeOf,Go=new WeakMap,p0=t=>t&&(Go.has(t)?Go.get(t):bl(t)===Object.prototype||bl(t)===Array.prototype),g0=t=>p0(t)&&t[Ii]||null,_l=(t,e=!0)=>{Go.set(t,e)};var Ds={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Yo=t=>typeof t=="object"&&t!==null,Br=new WeakMap,Os=new WeakSet,m0=(t=Object.is,e=(l,h)=>new Proxy(l,h),r=l=>Yo(l)&&!Os.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),n=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},i=new WeakMap,s=(l,h,f=n)=>{const p=i.get(l);if((p==null?void 0:p[0])===h)return p[1];const y=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return _l(y,!0),i.set(l,[h,y]),Reflect.ownKeys(l).forEach(v=>{if(Object.getOwnPropertyDescriptor(y,v))return;const x=Reflect.get(l,v),O={value:x,enumerable:!0,configurable:!0};if(Os.has(x))_l(x,!1);else if(x instanceof Promise)delete O.value,O.get=()=>f(x);else if(Br.has(x)){const[I,_]=Br.get(x);O.value=s(I,_(),f)}Object.defineProperty(y,v,O)}),Object.preventExtensions(y)},o=new WeakMap,a=[1,1],c=l=>{if(!Yo(l))throw new Error("object required");const h=o.get(l);if(h)return h;let f=a[0];const p=new Set,y=($,N=++a[0])=>{f!==N&&(f=N,p.forEach(M=>M($,N)))};let v=a[1];const x=($=++a[1])=>(v!==$&&!p.size&&(v=$,I.forEach(([N])=>{const M=N[1]($);M>f&&(f=M)})),f),O=$=>(N,M)=>{const B=[...N];B[1]=[$,...B[1]],y(B,M)},I=new Map,_=($,N)=>{if((Ds?"production":void 0)!=="production"&&I.has($))throw new Error("prop listener already exists");if(p.size){const M=N[3](O($));I.set($,[N,M])}else I.set($,[N])},S=$=>{var N;const M=I.get($);M&&(I.delete($),(N=M[1])==null||N.call(M))},w=$=>(p.add($),p.size===1&&I.forEach(([M,B],q)=>{if((Ds?"production":void 0)!=="production"&&B)throw new Error("remove already exists");const D=M[3](O(q));I.set(q,[M,D])}),()=>{p.delete($),p.size===0&&I.forEach(([M,B],q)=>{B&&(B(),I.set(q,[M]))})}),E=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),u=e(E,{deleteProperty($,N){const M=Reflect.get($,N);S(N);const B=Reflect.deleteProperty($,N);return B&&y(["delete",[N],M]),B},set($,N,M,B){const q=Reflect.has($,N),D=Reflect.get($,N,B);if(q&&(t(D,M)||o.has(M)&&t(D,o.get(M))))return!0;S(N),Yo(M)&&(M=g0(M)||M);let L=M;if(M instanceof Promise)M.then(G=>{M.status="fulfilled",M.value=G,y(["resolve",[N],G])}).catch(G=>{M.status="rejected",M.reason=G,y(["reject",[N],G])});else{!Br.has(M)&&r(M)&&(L=c(M));const G=!Os.has(L)&&Br.get(L);G&&_(N,G)}return Reflect.set($,N,L,B),y(["set",[N],M,D]),!0}});o.set(l,u);const m=[E,x,s,w];return Br.set(u,m),Reflect.ownKeys(l).forEach($=>{const N=Object.getOwnPropertyDescriptor(l,$);"value"in N&&(u[$]=l[$],delete N.value,delete N.writable),Object.defineProperty(E,$,N)}),u})=>[c,Br,Os,t,e,r,n,i,s,o,a],[y0]=m0();function zr(t={}){return y0(t)}function hn(t,e,r){const n=Br.get(t);(Ds?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");let i;const s=[],o=n[3];let a=!1;const l=o(h=>{if(s.push(h),r){e(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,l()}}function w0(t,e){const r=Br.get(t);(Ds?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");const[n,i,s]=r;return s(n,i(),e)}const pt=zr({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),Ge={state:pt,subscribe(t){return hn(pt,()=>t(pt))},push(t,e){t!==pt.view&&(pt.view=t,e&&(pt.data=e),pt.history.push(t))},reset(t){pt.view=t,pt.history=[t]},replace(t){pt.history.length>1&&(pt.history[pt.history.length-1]=t,pt.view=t)},goBack(){if(pt.history.length>1){pt.history.pop();const[t]=pt.history.slice(-1);pt.view=t}},setData(t){pt.data=t}},ie={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return ie.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const t=navigator.userAgent.toLowerCase();return ie.isMobile()&&(t.includes("iphone")||t.includes("ipad"))},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},isArray(t){return Array.isArray(t)&&t.length>0},formatNativeUrl(t,e,r){if(ie.isHttpUrl(t))return this.formatUniversalUrl(t,e,r);let n=t;n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},formatUniversalUrl(t,e,r){if(!ie.isHttpUrl(t))return this.formatNativeUrl(t,e,r);let n=t;n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},async wait(t){return new Promise(e=>{setTimeout(e,t)})},openHref(t,e){window.open(t,e,"noreferrer noopener")},setWalletConnectDeepLink(t,e){try{localStorage.setItem(ie.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(t){try{const[e]=t.split("?");localStorage.setItem(ie.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(ie.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(ie.WCM_VERSION,"2.6.2")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var t;const e=(t=Ge.state.data)==null?void 0:t.Wallet;if(!e)throw new Error('Missing "Wallet" view data');return e}},v0=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),$t=zr({enabled:v0,userSessionId:"",events:[],connectedWalletId:void 0}),El={state:$t,subscribe(t){return hn($t.events,()=>t(w0($t.events[$t.events.length-1])))},initialize(){$t.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&($t.userSessionId=crypto.randomUUID())},setConnectedWalletId(t){$t.connectedWalletId=t},click(t){if($t.enabled){const e={type:"CLICK",name:t.name,userSessionId:$t.userSessionId,timestamp:Date.now(),data:t};$t.events.push(e)}},track(t){if($t.enabled){const e={type:"TRACK",name:t.name,userSessionId:$t.userSessionId,timestamp:Date.now(),data:t};$t.events.push(e)}},view(t){if($t.enabled){const e={type:"VIEW",name:t.name,userSessionId:$t.userSessionId,timestamp:Date.now(),data:t};$t.events.push(e)}}},yr=zr({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),it={state:yr,subscribe(t){return hn(yr,()=>t(yr))},setChains(t){yr.chains=t},setWalletConnectUri(t){yr.walletConnectUri=t},setIsCustomDesktop(t){yr.isCustomDesktop=t},setIsCustomMobile(t){yr.isCustomMobile=t},setIsDataLoaded(t){yr.isDataLoaded=t},setIsUiLoaded(t){yr.isUiLoaded=t},setIsAuth(t){yr.isAuth=t}},$s=zr({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),Gt={state:$s,subscribe(t){return hn($s,()=>t($s))},setConfig(t){var e,r;El.initialize(),it.setChains(t.chains),it.setIsAuth(!!t.enableAuthMode),it.setIsCustomMobile(!!((e=t.mobileWallets)!=null&&e.length)),it.setIsCustomDesktop(!!((r=t.desktopWallets)!=null&&r.length)),ie.setModalVersionInStorage(),Object.assign($s,t)}};var b0=Object.defineProperty,xl=Object.getOwnPropertySymbols,_0=Object.prototype.hasOwnProperty,E0=Object.prototype.propertyIsEnumerable,Sl=(t,e,r)=>e in t?b0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,x0=(t,e)=>{for(var r in e||(e={}))_0.call(e,r)&&Sl(t,r,e[r]);if(xl)for(var r of xl(e))E0.call(e,r)&&Sl(t,r,e[r]);return t};const Jo="https://explorer-api.walletconnect.com",Qo="wcm",Xo="js-2.6.2";async function As(t,e){const r=x0({sdkType:Qo,sdkVersion:Xo},e),n=new URL(t,Jo);return n.searchParams.append("projectId",Gt.state.projectId),Object.entries(r).forEach(([i,s])=>{s&&n.searchParams.append(i,String(s))}),(await fetch(n)).json()}const dn={async getDesktopListings(t){return As("/w3m/v1/getDesktopListings",t)},async getMobileListings(t){return As("/w3m/v1/getMobileListings",t)},async getInjectedListings(t){return As("/w3m/v1/getInjectedListings",t)},async getAllListings(t){return As("/w3m/v1/getAllListings",t)},getWalletImageUrl(t){return`${Jo}/w3m/v1/getWalletImage/${t}?projectId=${Gt.state.projectId}&sdkType=${Qo}&sdkVersion=${Xo}`},getAssetImageUrl(t){return`${Jo}/w3m/v1/getAssetImage/${t}?projectId=${Gt.state.projectId}&sdkType=${Qo}&sdkVersion=${Xo}`}};var S0=Object.defineProperty,Cl=Object.getOwnPropertySymbols,C0=Object.prototype.hasOwnProperty,I0=Object.prototype.propertyIsEnumerable,Il=(t,e,r)=>e in t?S0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,D0=(t,e)=>{for(var r in e||(e={}))C0.call(e,r)&&Il(t,r,e[r]);if(Cl)for(var r of Cl(e))I0.call(e,r)&&Il(t,r,e[r]);return t};const Dl=ie.isMobile(),wr=zr({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),Wt={state:wr,async getRecomendedWallets(){const{explorerRecommendedWalletIds:t,explorerExcludedWalletIds:e}=Gt.state;if(t==="NONE"||e==="ALL"&&!t)return wr.recomendedWallets;if(ie.isArray(t)){const r={recommendedIds:t.join(",")},{listings:n}=await dn.getAllListings(r),i=Object.values(n);i.sort((s,o)=>{const a=t.indexOf(s.id),c=t.indexOf(o.id);return a-c}),wr.recomendedWallets=i}else{const{chains:r,isAuth:n}=it.state,i=r==null?void 0:r.join(","),s=ie.isArray(e),o={page:1,sdks:n?"auth_v1":void 0,entries:ie.RECOMMENDED_WALLET_AMOUNT,chains:i,version:2,excludedIds:s?e.join(","):void 0},{listings:a}=Dl?await dn.getMobileListings(o):await dn.getDesktopListings(o);wr.recomendedWallets=Object.values(a)}return wr.recomendedWallets},async getWallets(t){const e=D0({},t),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:n}=Gt.state,{recomendedWallets:i}=wr;if(n==="ALL")return wr.wallets;i.length?e.excludedIds=i.map(f=>f.id).join(","):ie.isArray(r)&&(e.excludedIds=r.join(",")),ie.isArray(n)&&(e.excludedIds=[e.excludedIds,n].filter(Boolean).join(",")),it.state.isAuth&&(e.sdks="auth_v1");const{page:s,search:o}=t,{listings:a,total:c}=Dl?await dn.getMobileListings(e):await dn.getDesktopListings(e),l=Object.values(a),h=o?"search":"wallets";return wr[h]={listings:[...wr[h].listings,...l],total:c,page:s??1},{listings:l,total:c}},getWalletImageUrl(t){return dn.getWalletImageUrl(t)},getAssetImageUrl(t){return dn.getAssetImageUrl(t)},resetSearch(){wr.search={listings:[],total:0,page:1}}},zn=zr({open:!1}),fn={state:zn,subscribe(t){return hn(zn,()=>t(zn))},async open(t){return new Promise(e=>{const{isUiLoaded:r,isDataLoaded:n}=it.state;if(ie.removeWalletConnectDeepLink(),it.setWalletConnectUri(t==null?void 0:t.uri),it.setChains(t==null?void 0:t.chains),Ge.reset("ConnectWallet"),r&&n)zn.open=!0,e();else{const i=setInterval(()=>{const s=it.state;s.isUiLoaded&&s.isDataLoaded&&(clearInterval(i),zn.open=!0,e())},200)}})},close(){zn.open=!1}};var O0=Object.defineProperty,Ol=Object.getOwnPropertySymbols,$0=Object.prototype.hasOwnProperty,A0=Object.prototype.propertyIsEnumerable,$l=(t,e,r)=>e in t?O0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,T0=(t,e)=>{for(var r in e||(e={}))$0.call(e,r)&&$l(t,r,e[r]);if(Ol)for(var r of Ol(e))A0.call(e,r)&&$l(t,r,e[r]);return t};function N0(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const Di=zr({themeMode:N0()?"dark":"light"}),qr={state:Di,subscribe(t){return hn(Di,()=>t(Di))},setThemeConfig(t){const{themeMode:e,themeVariables:r}=t;e&&(Di.themeMode=e),r&&(Di.themeVariables=T0({},r))}},pn=zr({open:!1,message:"",variant:"success"}),Wr={state:pn,subscribe(t){return hn(pn,()=>t(pn))},openToast(t,e){pn.open=!0,pn.message=t,pn.variant=e},closeToast(){pn.open=!1}};let P0=class{constructor(e){this.openModal=fn.open,this.closeModal=fn.close,this.subscribeModal=fn.subscribe,this.setTheme=qr.setThemeConfig,qr.setThemeConfig(e),Gt.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.resolve().then(()=>r4);const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),it.setIsUiLoaded(!0)}}};var vr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ts(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ns(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var ea={exports:{}},qn=typeof Reflect=="object"?Reflect:null,Al=qn&&typeof qn.apply=="function"?qn.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Ps;qn&&typeof qn.ownKeys=="function"?Ps=qn.ownKeys:Object.getOwnPropertySymbols?Ps=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ps=function(e){return Object.getOwnPropertyNames(e)};function R0(t){console&&console.warn&&console.warn(t)}var Tl=Number.isNaN||function(e){return e!==e};function We(){We.init.call(this)}ea.exports=We,ea.exports.once=U0,We.EventEmitter=We,We.prototype._events=void 0,We.prototype._eventsCount=0,We.prototype._maxListeners=void 0;var Nl=10;function Rs(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(We,"defaultMaxListeners",{enumerable:!0,get:function(){return Nl},set:function(t){if(typeof t!="number"||t<0||Tl(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Nl=t}}),We.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},We.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Tl(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Pl(t){return t._maxListeners===void 0?We.defaultMaxListeners:t._maxListeners}We.prototype.getMaxListeners=function(){return Pl(this)},We.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")Al(c,this,r);else for(var l=c.length,h=Ul(c,l),n=0;n<l;++n)Al(h[n],this,r);return!0};function Rl(t,e,r,n){var i,s,o;if(Rs(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=Pl(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,R0(a)}return t}We.prototype.addListener=function(e,r){return Rl(this,e,r,!1)},We.prototype.on=We.prototype.addListener,We.prototype.prependListener=function(e,r){return Rl(this,e,r,!0)};function L0(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ll(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=L0.bind(n);return i.listener=r,n.wrapFn=i,i}We.prototype.once=function(e,r){return Rs(r),this.on(e,Ll(this,e,r)),this},We.prototype.prependOnceListener=function(e,r){return Rs(r),this.prependListener(e,Ll(this,e,r)),this},We.prototype.removeListener=function(e,r){var n,i,s,o,a;if(Rs(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():M0(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this},We.prototype.off=We.prototype.removeListener,We.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Ml(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?k0(i):Ul(i,i.length)}We.prototype.listeners=function(e){return Ml(this,e,!0)},We.prototype.rawListeners=function(e){return Ml(this,e,!1)},We.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):kl.call(t,e)},We.prototype.listenerCount=kl;function kl(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}We.prototype.eventNames=function(){return this._eventsCount>0?Ps(this._events):[]};function Ul(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function M0(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function k0(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function U0(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Fl(t,e,s,{once:!0}),e!=="error"&&F0(t,i,{once:!0})})}function F0(t,e,r){typeof t.on=="function"&&Fl(t,"error",e,r)}function Fl(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var ar=ea.exports;const ta=Ts(ar),j0=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,B0=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,z0=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function q0(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){W0(t);return}return e}function W0(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Ls(t,e={}){if(typeof t!="string")return t;const r=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return r.slice(1,-1);if(r.length<=9){const n=r.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!z0.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(j0.test(t)||B0.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,q0)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function V0(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function gt(t,...e){try{return V0(t(...e))}catch(r){return Promise.reject(r)}}function H0(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function K0(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Ms(t){if(H0(t))return String(t);if(K0(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Ms(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function jl(){if(typeof Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const ra="base64:";function Z0(t){if(typeof t=="string")return t;jl();const e=Buffer.from(t).toString("base64");return ra+e}function G0(t){return typeof t!="string"||!t.startsWith(ra)?t:(jl(),Buffer.from(t.slice(ra.length),"base64"))}function Vt(t){return t?t.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function Y0(...t){return Vt(t.join(":"))}function ks(t){return t=Vt(t),t?t+":":""}function W4(t){return t}const J0="memory",Q0=()=>{const t=new Map;return{name:J0,options:{},hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return Array.from(t.keys())},clear(){t.clear()},dispose(){t.clear()}}};function X0(t={}){const e={mounts:{"":t.driver||Q0()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=l=>{for(const h of e.mountpoints)if(l.startsWith(h))return{base:h,relativeKey:l.slice(h.length),driver:e.mounts[h]};return{base:"",relativeKey:l,driver:e.mounts[""]}},n=(l,h)=>e.mountpoints.filter(f=>f.startsWith(l)||h&&l.startsWith(f)).map(f=>({relativeBase:l.length>f.length?l.slice(f.length):void 0,mountpoint:f,driver:e.mounts[f]})),i=(l,h)=>{if(e.watching){h=Vt(h);for(const f of e.watchListeners)f(l,h)}},s=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await Bl(e.mounts[l],i,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,h,f)=>{const p=new Map,y=v=>{let x=p.get(v.base);return x||(x={driver:v.driver,base:v.base,items:[]},p.set(v.base,x)),x};for(const v of l){const x=typeof v=="string",O=Vt(x?v:v.key),I=x?void 0:v.value,_=x||!v.options?h:{...h,...v.options},S=r(O);y(S).items.push({key:O,value:I,relativeKey:S.relativeKey,options:_})}return Promise.all([...p.values()].map(v=>f(v))).then(v=>v.flat())},c={hasItem(l,h={}){l=Vt(l);const{relativeKey:f,driver:p}=r(l);return gt(p.hasItem,f,h)},getItem(l,h={}){l=Vt(l);const{relativeKey:f,driver:p}=r(l);return gt(p.getItem,f,h).then(y=>Ls(y))},getItems(l,h){return a(l,h,f=>f.driver.getItems?gt(f.driver.getItems,f.items.map(p=>({key:p.relativeKey,options:p.options})),h).then(p=>p.map(y=>({key:Y0(f.base,y.key),value:Ls(y.value)}))):Promise.all(f.items.map(p=>gt(f.driver.getItem,p.relativeKey,p.options).then(y=>({key:p.key,value:Ls(y)})))))},getItemRaw(l,h={}){l=Vt(l);const{relativeKey:f,driver:p}=r(l);return p.getItemRaw?gt(p.getItemRaw,f,h):gt(p.getItem,f,h).then(y=>G0(y))},async setItem(l,h,f={}){if(h===void 0)return c.removeItem(l);l=Vt(l);const{relativeKey:p,driver:y}=r(l);y.setItem&&(await gt(y.setItem,p,Ms(h),f),y.watch||i("update",l))},async setItems(l,h){await a(l,h,async f=>{f.driver.setItems&&await gt(f.driver.setItems,f.items.map(p=>({key:p.relativeKey,value:Ms(p.value),options:p.options})),h),f.driver.setItem&&await Promise.all(f.items.map(p=>gt(f.driver.setItem,p.relativeKey,Ms(p.value),p.options)))})},async setItemRaw(l,h,f={}){if(h===void 0)return c.removeItem(l,f);l=Vt(l);const{relativeKey:p,driver:y}=r(l);if(y.setItemRaw)await gt(y.setItemRaw,p,h,f);else if(y.setItem)await gt(y.setItem,p,Z0(h),f);else return;y.watch||i("update",l)},async removeItem(l,h={}){typeof h=="boolean"&&(h={removeMeta:h}),l=Vt(l);const{relativeKey:f,driver:p}=r(l);p.removeItem&&(await gt(p.removeItem,f,h),(h.removeMeta||h.removeMata)&&await gt(p.removeItem,f+"$",h),p.watch||i("remove",l))},async getMeta(l,h={}){typeof h=="boolean"&&(h={nativeOnly:h}),l=Vt(l);const{relativeKey:f,driver:p}=r(l),y=Object.create(null);if(p.getMeta&&Object.assign(y,await gt(p.getMeta,f,h)),!h.nativeOnly){const v=await gt(p.getItem,f+"$",h).then(x=>Ls(x));v&&typeof v=="object"&&(typeof v.atime=="string"&&(v.atime=new Date(v.atime)),typeof v.mtime=="string"&&(v.mtime=new Date(v.mtime)),Object.assign(y,v))}return y},setMeta(l,h,f={}){return this.setItem(l+"$",h,f)},removeMeta(l,h={}){return this.removeItem(l+"$",h)},async getKeys(l,h={}){l=ks(l);const f=n(l,!0);let p=[];const y=[];for(const v of f){const O=(await gt(v.driver.getKeys,v.relativeBase,h)).map(I=>v.mountpoint+Vt(I)).filter(I=>!p.some(_=>I.startsWith(_)));y.push(...O),p=[v.mountpoint,...p.filter(I=>!I.startsWith(v.mountpoint))]}return l?y.filter(v=>v.startsWith(l)&&!v.endsWith("$")):y.filter(v=>!v.endsWith("$"))},async clear(l,h={}){l=ks(l),await Promise.all(n(l,!1).map(async f=>{if(f.driver.clear)return gt(f.driver.clear,f.relativeBase,h);if(f.driver.removeItem){const p=await f.driver.getKeys(f.relativeBase||"",h);return Promise.all(p.map(y=>f.driver.removeItem(y,h)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>zl(l)))},async watch(l){return await s(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(h=>h!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,h){if(l=ks(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((f,p)=>p.length-f.length)),e.mounts[l]=h,e.watching&&Promise.resolve(Bl(h,i,l)).then(f=>{e.unwatch[l]=f}).catch(console.error),c},async unmount(l,h=!0){l=ks(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&(e.unwatch[l](),delete e.unwatch[l]),h&&await zl(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Vt(l)+":";const h=r(l);return{driver:h.driver,base:h.base}},getMounts(l="",h={}){return l=Vt(l),n(l,h.parents).map(p=>({driver:p.driver,base:p.mountpoint}))}};return c}function Bl(t,e,r){return t.watch?t.watch((n,i)=>e(n,r+i)):()=>{}}async function zl(t){typeof t.dispose=="function"&&await gt(t.dispose)}function gn(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function ql(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const n=gn(r);return(i,s)=>n.then(o=>s(o.transaction(e,i).objectStore(e)))}let na;function Oi(){return na||(na=ql("keyval-store","keyval")),na}function Wl(t,e=Oi()){return e("readonly",r=>gn(r.get(t)))}function ep(t,e,r=Oi()){return r("readwrite",n=>(n.put(e,t),gn(n.transaction)))}function tp(t,e=Oi()){return e("readwrite",r=>(r.delete(t),gn(r.transaction)))}function rp(t=Oi()){return t("readwrite",e=>(e.clear(),gn(e.transaction)))}function np(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},gn(t.transaction)}function ip(t=Oi()){return t("readonly",e=>{if(e.getAllKeys)return gn(e.getAllKeys());const r=[];return np(e,n=>r.push(n.key)).then(()=>r)})}const sp=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),op=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Us(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return op(t)}catch{return t}}function $i(t){return typeof t=="string"?t:sp(t)||""}const ap="idb-keyval";var cp=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=i=>e+i;let n;return t.dbName&&t.storeName&&(n=ql(t.dbName,t.storeName)),{name:ap,options:t,async hasItem(i){return!(typeof await Wl(r(i),n)>"u")},async getItem(i){return await Wl(r(i),n)??null},setItem(i,s){return ep(r(i),s,n)},removeItem(i){return tp(r(i),n)},getKeys(){return ip(n)},clear(){return rp(n)}}};const lp="WALLET_CONNECT_V2_INDEXED_DB",up="keyvaluestorage";let hp=class{constructor(){this.indexedDb=X0({driver:cp({dbName:lp,storeName:up})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,$i(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var ia=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fs={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof ia<"u"&&ia.localStorage?Fs.exports=ia.localStorage:typeof window<"u"&&window.localStorage?Fs.exports=window.localStorage:Fs.exports=new e})();function dp(t){var e;return[t[0],Us((e=t[1])!=null?e:"")]}let fp=class{constructor(){this.localStorage=Fs.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(dp)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return Us(r)}async setItem(e,r){this.localStorage.setItem(e,$i(r))}async removeItem(e){this.localStorage.removeItem(e)}};const pp="wc_storage_version",Vl=1,gp=async(t,e,r)=>{const n=pp,i=await e.getItem(n);if(i&&i>=Vl){r(e);return}const s=await t.getKeys();if(!s.length){r(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(n,Vl),r(e),mp(t,o)},mp=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let yp=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new fp;this.storage=e;try{const r=new hp;gp(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};var Wn={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var sa=function(t,e){return sa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},sa(t,e)};function wp(t,e){sa(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var oa=function(){return oa=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},oa.apply(this,arguments)};function vp(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function bp(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function _p(t,e){return function(r,n){e(r,n,t)}}function Ep(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function xp(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(h){try{l(n.next(h))}catch(f){o(f)}}function c(h){try{l(n.throw(h))}catch(f){o(f)}}function l(h){h.done?s(h.value):i(h.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}function Sp(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(h){return c([l,h])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(h){l=[6,h],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Cp(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Ip(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function aa(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hl(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function Dp(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Hl(arguments[e]));return t}function Op(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function Ai(t){return this instanceof Ai?(this.v=t,this):new Ai(t)}function $p(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(p){n[p]&&(i[p]=function(y){return new Promise(function(v,x){s.push([p,y,v,x])>1||a(p,y)})})}function a(p,y){try{c(n[p](y))}catch(v){f(s[0][3],v)}}function c(p){p.value instanceof Ai?Promise.resolve(p.value.v).then(l,h):f(s[0][2],p)}function l(p){a("next",p)}function h(p){a("throw",p)}function f(p,y){p(y),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Ap(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:Ai(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function Tp(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof aa=="function"?aa(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function Np(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Pp(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Rp(t){return t&&t.__esModule?t:{default:t}}function Lp(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Mp(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const br=Ns(Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return oa},__asyncDelegator:Ap,__asyncGenerator:$p,__asyncValues:Tp,__await:Ai,__awaiter:xp,__classPrivateFieldGet:Lp,__classPrivateFieldSet:Mp,__createBinding:Cp,__decorate:bp,__exportStar:Ip,__extends:wp,__generator:Sp,__importDefault:Rp,__importStar:Pp,__makeTemplateObject:Np,__metadata:Ep,__param:_p,__read:Hl,__rest:vp,__spread:Dp,__spreadArrays:Op,__values:aa},Symbol.toStringTag,{value:"Module"})));var Ti={},ne={},ca={},Ni={},Kl;function kp(){if(Kl)return Ni;Kl=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Ni.delay=t,Ni}var mn={},la={},yn={},Zl;function Up(){return Zl||(Zl=1,Object.defineProperty(yn,"__esModule",{value:!0}),yn.ONE_THOUSAND=yn.ONE_HUNDRED=void 0,yn.ONE_HUNDRED=100,yn.ONE_THOUSAND=1e3),yn}var ua={},Gl;function Fp(){return Gl||(Gl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(ua)),ua}var Yl;function Jl(){return Yl||(Yl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=br;e.__exportStar(Up(),t),e.__exportStar(Fp(),t)}(la)),la}var Ql;function jp(){if(Ql)return mn;Ql=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.fromMiliseconds=mn.toMiliseconds=void 0;const t=Jl();function e(n){return n*t.ONE_THOUSAND}mn.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return mn.fromMiliseconds=r,mn}var Xl;function Bp(){return Xl||(Xl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=br;e.__exportStar(kp(),t),e.__exportStar(jp(),t)}(ca)),ca}var Vn={},eu;function zp(){if(eu)return Vn;eu=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Vn.Watch=t,Vn.default=t,Vn}var ha={},Pi={},tu;function qp(){if(tu)return Pi;tu=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.IWatch=void 0;class t{}return Pi.IWatch=t,Pi}var ru;function Wp(){return ru||(ru=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),br.__exportStar(qp(),t)}(ha)),ha}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=br;e.__exportStar(Bp(),t),e.__exportStar(zp(),t),e.__exportStar(Wp(),t),e.__exportStar(Jl(),t)})(ne);var da={},Ri={};let wn=class{};const Vp=Ns(Object.freeze(Object.defineProperty({__proto__:null,IEvents:wn},Symbol.toStringTag,{value:"Module"})));var nu;function Hp(){if(nu)return Ri;nu=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.IHeartBeat=void 0;const t=Vp;class e extends t.IEvents{constructor(n){super()}}return Ri.IHeartBeat=e,Ri}var iu;function su(){return iu||(iu=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),br.__exportStar(Hp(),t)}(da)),da}var fa={},vn={},ou;function Kp(){if(ou)return vn;ou=1,Object.defineProperty(vn,"__esModule",{value:!0}),vn.HEARTBEAT_EVENTS=vn.HEARTBEAT_INTERVAL=void 0;const t=ne;return vn.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,vn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},vn}var au;function cu(){return au||(au=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),br.__exportStar(Kp(),t)}(fa)),fa}var lu;function Zp(){if(lu)return Ti;lu=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.HeartBeat=void 0;const t=br,e=ar,r=ne,n=su(),i=cu();class s extends n.IHeartBeat{constructor(a){super(a),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=(a==null?void 0:a.interval)||i.HEARTBEAT_INTERVAL}static init(a){return t.__awaiter(this,void 0,void 0,function*(){const c=new s(a);return yield c.init(),c})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(a,c){this.events.on(a,c)}once(a,c){this.events.once(a,c)}off(a,c){this.events.off(a,c)}removeListener(a,c){this.events.removeListener(a,c)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return Ti.HeartBeat=s,Ti}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=br;e.__exportStar(Zp(),t),e.__exportStar(su(),t),e.__exportStar(cu(),t)})(Wn);var Te={},pa,uu;function Gp(){if(uu)return pa;uu=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}pa=e;function e(r,n,i){var s=i&&i.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var c=new Array(a);c[0]=s(r);for(var l=1;l<a;l++)c[l]=s(n[l]);return c.join(" ")}if(typeof r!="string")return r;var h=n.length;if(h===0)return r;for(var f="",p=1-o,y=-1,v=r&&r.length||0,x=0;x<v;){if(r.charCodeAt(x)===37&&x+1<v){switch(y=y>-1?y:0,r.charCodeAt(x+1)){case 100:case 102:if(p>=h||n[p]==null)break;y<x&&(f+=r.slice(y,x)),f+=Number(n[p]),y=x+2,x++;break;case 105:if(p>=h||n[p]==null)break;y<x&&(f+=r.slice(y,x)),f+=Math.floor(Number(n[p])),y=x+2,x++;break;case 79:case 111:case 106:if(p>=h||n[p]===void 0)break;y<x&&(f+=r.slice(y,x));var O=typeof n[p];if(O==="string"){f+="'"+n[p]+"'",y=x+2,x++;break}if(O==="function"){f+=n[p].name||"<anonymous>",y=x+2,x++;break}f+=s(n[p]),y=x+2,x++;break;case 115:if(p>=h)break;y<x&&(f+=r.slice(y,x)),f+=String(n[p]),y=x+2,x++;break;case 37:y<x&&(f+=r.slice(y,x)),f+="%",y=x+2,x++,p--;break}++p}++x}return y===-1?r:(y<v&&(f+=r.slice(y)),f)}return pa}var ga,hu;function Yp(){if(hu)return ga;hu=1;const t=Gp();ga=i;const e=E().console||{},r={mapHttpRequest:v,mapHttpResponse:v,wrapRequestSerializer:x,wrapResponseSerializer:x,wrapErrorSerializer:x,req:v,res:v,err:p};function n(g,u){return Array.isArray(g)?g.filter(function($){return $!=="!stdSerializers.err"}):g===!0?Object.keys(u):!1}function i(g){g=g||{},g.browser=g.browser||{};const u=g.browser.transmit;if(u&&typeof u.send!="function")throw Error("pino: transmit option must have a send function");const m=g.browser.write||e;g.browser.write&&(g.browser.asObject=!0);const $=g.serializers||{},N=n(g.browser.serialize,$);let M=g.browser.serialize;Array.isArray(g.browser.serialize)&&g.browser.serialize.indexOf("!stdSerializers.err")>-1&&(M=!1);const B=["error","fatal","warn","info","debug","trace"];typeof m=="function"&&(m.error=m.fatal=m.warn=m.info=m.debug=m.trace=m),g.enabled===!1&&(g.level="silent");const q=g.level||"info",D=Object.create(m);D.log||(D.log=O),Object.defineProperty(D,"levelVal",{get:G}),Object.defineProperty(D,"level",{get:z,set:U});const L={transmit:u,serialize:N,asObject:g.browser.asObject,levels:B,timestamp:y(g)};D.levels=i.levels,D.level=q,D.setMaxListeners=D.getMaxListeners=D.emit=D.addListener=D.on=D.prependListener=D.once=D.prependOnceListener=D.removeListener=D.removeAllListeners=D.listeners=D.listenerCount=D.eventNames=D.write=D.flush=O,D.serializers=$,D._serialize=N,D._stdErrSerialize=M,D.child=j,u&&(D._logEvent=f());function G(){return this.level==="silent"?1/0:this.levels.values[this.level]}function z(){return this._level}function U(k){if(k!=="silent"&&!this.levels.values[k])throw Error("unknown level "+k);this._level=k,s(L,D,"error","log"),s(L,D,"fatal","error"),s(L,D,"warn","error"),s(L,D,"info","log"),s(L,D,"debug","log"),s(L,D,"trace","log")}function j(k,W){if(!k)throw new Error("missing bindings for child Pino");W=W||{},N&&k.serializers&&(W.serializers=k.serializers);const he=W.serializers;if(N&&he){var H=Object.assign({},$,he),ae=g.browser.serialize===!0?Object.keys(H):N;delete k.serializers,c([k],ae,H,this._stdErrSerialize)}function ee(ce){this._childLevel=(ce._childLevel|0)+1,this.error=l(ce,k,"error"),this.fatal=l(ce,k,"fatal"),this.warn=l(ce,k,"warn"),this.info=l(ce,k,"info"),this.debug=l(ce,k,"debug"),this.trace=l(ce,k,"trace"),H&&(this.serializers=H,this._serialize=ae),u&&(this._logEvent=f([].concat(ce._logEvent.bindings,k)))}return ee.prototype=this,new ee(this)}return D}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=r,i.stdTimeFunctions=Object.assign({},{nullTime:I,epochTime:_,unixTime:S,isoTime:w});function s(g,u,m,$){const N=Object.getPrototypeOf(u);u[m]=u.levelVal>u.levels.values[m]?O:N[m]?N[m]:e[m]||e[$]||O,o(g,u,m)}function o(g,u,m){!g.transmit&&u[m]===O||(u[m]=function($){return function(){const M=g.timestamp(),B=new Array(arguments.length),q=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var D=0;D<B.length;D++)B[D]=arguments[D];if(g.serialize&&!g.asObject&&c(B,this._serialize,this.serializers,this._stdErrSerialize),g.asObject?$.call(q,a(this,m,B,M)):$.apply(q,B),g.transmit){const L=g.transmit.level||u.level,G=i.levels.values[L],z=i.levels.values[m];if(z<G)return;h(this,{ts:M,methodLevel:m,methodValue:z,transmitLevel:L,transmitValue:i.levels.values[g.transmit.level||u.level],send:g.transmit.send,val:u.levelVal},B)}}}(u[m]))}function a(g,u,m,$){g._serialize&&c(m,g._serialize,g.serializers,g._stdErrSerialize);const N=m.slice();let M=N[0];const B={};$&&(B.time=$),B.level=i.levels.values[u];let q=(g._childLevel|0)+1;if(q<1&&(q=1),M!==null&&typeof M=="object"){for(;q--&&typeof N[0]=="object";)Object.assign(B,N.shift());M=N.length?t(N.shift(),N):void 0}else typeof M=="string"&&(M=t(N.shift(),N));return M!==void 0&&(B.msg=M),B}function c(g,u,m,$){for(const N in g)if($&&g[N]instanceof Error)g[N]=i.stdSerializers.err(g[N]);else if(typeof g[N]=="object"&&!Array.isArray(g[N]))for(const M in g[N])u&&u.indexOf(M)>-1&&M in m&&(g[N][M]=m[M](g[N][M]))}function l(g,u,m){return function(){const $=new Array(1+arguments.length);$[0]=u;for(var N=1;N<$.length;N++)$[N]=arguments[N-1];return g[m].apply(this,$)}}function h(g,u,m){const $=u.send,N=u.ts,M=u.methodLevel,B=u.methodValue,q=u.val,D=g._logEvent.bindings;c(m,g._serialize||Object.keys(g.serializers),g.serializers,g._stdErrSerialize===void 0?!0:g._stdErrSerialize),g._logEvent.ts=N,g._logEvent.messages=m.filter(function(L){return D.indexOf(L)===-1}),g._logEvent.level.label=M,g._logEvent.level.value=B,$(M,g._logEvent,q),g._logEvent=f(D)}function f(g){return{ts:0,messages:[],bindings:g||[],level:{label:"",value:0}}}function p(g){const u={type:g.constructor.name,msg:g.message,stack:g.stack};for(const m in g)u[m]===void 0&&(u[m]=g[m]);return u}function y(g){return typeof g.timestamp=="function"?g.timestamp:g.timestamp===!1?I:_}function v(){return{}}function x(g){return g}function O(){}function I(){return!1}function _(){return Date.now()}function S(){return Math.round(Date.now()/1e3)}function w(){return new Date(Date.now()).toISOString()}function E(){function g(u){return typeof u<"u"&&u}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return g(self)||g(window)||g(this)||{}}}return ga}var bn={},du;function fu(){return du||(du=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.PINO_CUSTOM_CONTEXT_KEY=bn.PINO_LOGGER_DEFAULTS=void 0,bn.PINO_LOGGER_DEFAULTS={level:"info"},bn.PINO_CUSTOM_CONTEXT_KEY="custom_context"),bn}var Mt={},pu;function Jp(){if(pu)return Mt;pu=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.generateChildLogger=Mt.formatChildLoggerContext=Mt.getLoggerContext=Mt.setBrowserLoggerContext=Mt.getBrowserLoggerContext=Mt.getDefaultLoggerOptions=void 0;const t=fu();function e(a){return Object.assign(Object.assign({},a),{level:(a==null?void 0:a.level)||t.PINO_LOGGER_DEFAULTS.level})}Mt.getDefaultLoggerOptions=e;function r(a,c=t.PINO_CUSTOM_CONTEXT_KEY){return a[c]||""}Mt.getBrowserLoggerContext=r;function n(a,c,l=t.PINO_CUSTOM_CONTEXT_KEY){return a[l]=c,a}Mt.setBrowserLoggerContext=n;function i(a,c=t.PINO_CUSTOM_CONTEXT_KEY){let l="";return typeof a.bindings>"u"?l=r(a,c):l=a.bindings().context||"",l}Mt.getLoggerContext=i;function s(a,c,l=t.PINO_CUSTOM_CONTEXT_KEY){const h=i(a,l);return h.trim()?`${h}/${c}`:c}Mt.formatChildLoggerContext=s;function o(a,c,l=t.PINO_CUSTOM_CONTEXT_KEY){const h=s(a,c,l),f=a.child({context:h});return n(f,h,l)}return Mt.generateChildLogger=o,Mt}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=br,r=e.__importDefault(Yp());Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(fu(),t),e.__exportStar(Jp(),t)})(Te);let Qp=class extends wn{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},Xp=class extends wn{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},eg=class{constructor(e,r){this.logger=e,this.core=r}},tg=class extends wn{constructor(e,r){super(),this.relayer=e,this.logger=r}},rg=class extends wn{constructor(e){super()}},ng=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},ig=class extends wn{constructor(e,r){super(),this.relayer=e,this.logger=r}},sg=class extends wn{constructor(e,r){super(),this.core=e,this.logger=r}},og=class{constructor(e,r){this.projectId=e,this.logger=r}},ag=class{constructor(e,r){this.projectId=e,this.logger=r}},cg=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},lg=class{constructor(e){this.client=e}};var ma={},Hn={},js={},Bs={};Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.BrowserRandomSource=void 0;const gu=65536;class ug{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=gu)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,gu)));return r}}Bs.BrowserRandomSource=ug;function hg(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var zs={},Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});function dg(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Yt.wipe=dg;const fg=Ns(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(zs,"__esModule",{value:!0}),zs.NodeRandomSource=void 0;const pg=Yt;class gg{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof hg<"u"){const e=fg;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,pg.wipe)(r),n}}zs.NodeRandomSource=gg,Object.defineProperty(js,"__esModule",{value:!0}),js.SystemRandomSource=void 0;const mg=Bs,yg=zs;class wg{constructor(){if(this.isAvailable=!1,this.name="",this._source=new mg.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new yg.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}js.SystemRandomSource=wg;var fe={},mu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,c){var l=a>>>16&65535,h=a&65535,f=c>>>16&65535,p=c&65535;return h*p+(l*p+h*f<<16>>>0)|0}t.mul=Math.imul||e;function r(a,c){return a+c|0}t.add=r;function n(a,c){return a-c|0}t.sub=n;function i(a,c){return a<<c|a>>>32-c}t.rotl=i;function s(a,c){return a<<32-c|a>>>c}t.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||o,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(mu),Object.defineProperty(fe,"__esModule",{value:!0});var yu=mu;function vg(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}fe.readInt16BE=vg;function bg(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}fe.readUint16BE=bg;function _g(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}fe.readInt16LE=_g;function Eg(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}fe.readUint16LE=Eg;function wu(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}fe.writeUint16BE=wu,fe.writeInt16BE=wu;function vu(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}fe.writeUint16LE=vu,fe.writeInt16LE=vu;function ya(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}fe.readInt32BE=ya;function wa(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}fe.readUint32BE=wa;function va(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}fe.readInt32LE=va;function ba(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}fe.readUint32LE=ba;function qs(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}fe.writeUint32BE=qs,fe.writeInt32BE=qs;function Ws(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}fe.writeUint32LE=Ws,fe.writeInt32LE=Ws;function xg(t,e){e===void 0&&(e=0);var r=ya(t,e),n=ya(t,e+4);return r*4294967296+n-(n>>31)*4294967296}fe.readInt64BE=xg;function Sg(t,e){e===void 0&&(e=0);var r=wa(t,e),n=wa(t,e+4);return r*4294967296+n}fe.readUint64BE=Sg;function Cg(t,e){e===void 0&&(e=0);var r=va(t,e),n=va(t,e+4);return n*4294967296+r-(r>>31)*4294967296}fe.readInt64LE=Cg;function Ig(t,e){e===void 0&&(e=0);var r=ba(t,e),n=ba(t,e+4);return n*4294967296+r}fe.readUint64LE=Ig;function bu(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),qs(t/4294967296>>>0,e,r),qs(t>>>0,e,r+4),e}fe.writeUint64BE=bu,fe.writeInt64BE=bu;function _u(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Ws(t>>>0,e,r),Ws(t/4294967296>>>0,e,r+4),e}fe.writeUint64LE=_u,fe.writeInt64LE=_u;function Dg(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}fe.readUintBE=Dg;function Og(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}fe.readUintLE=Og;function $g(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!yu.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}fe.writeUintBE=$g;function Ag(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!yu.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}fe.writeUintLE=Ag;function Tg(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}fe.readFloat32BE=Tg;function Ng(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}fe.readFloat32LE=Ng;function Pg(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}fe.readFloat64BE=Pg;function Rg(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}fe.readFloat64LE=Rg;function Lg(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}fe.writeFloat32BE=Lg;function Mg(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}fe.writeFloat32LE=Mg;function kg(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}fe.writeFloat64BE=kg;function Ug(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}fe.writeFloat64LE=Ug,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=js,r=fe,n=Yt;t.defaultRandomSource=new e.SystemRandomSource;function i(l,h=t.defaultRandomSource){return h.randomBytes(l)}t.randomBytes=i;function s(l=t.defaultRandomSource){const h=i(4,l),f=(0,r.readUint32LE)(h);return(0,n.wipe)(h),f}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(l,h=o,f=t.defaultRandomSource){if(h.length<2)throw new Error("randomString charset is too short");if(h.length>256)throw new Error("randomString charset is too long");let p="";const y=h.length,v=256-256%y;for(;l>0;){const x=i(Math.ceil(l*256/v),f);for(let O=0;O<x.length&&l>0;O++){const I=x[O];I<v&&(p+=h.charAt(I%y),l--)}(0,n.wipe)(x)}return p}t.randomString=a;function c(l,h=o,f=t.defaultRandomSource){const p=Math.ceil(l/(Math.log(h.length)/Math.LN2));return a(p,h,f)}t.randomStringForEntropy=c}(Hn);var Eu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=fe,r=Yt;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(c,l){if(l===void 0&&(l=c.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var h=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&l>0;)this._buffer[this._bufferLength++]=c[h++],l--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(h=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,c,h,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=c[h++],l--;return this},a.prototype.finish=function(c){if(!this._finished){var l=this._bytesHashed,h=this._bufferLength,f=l/536870912|0,p=l<<3,y=l%128<112?128:256;this._buffer[h]=128;for(var v=h+1;v<y-8;v++)this._buffer[v]=0;e.writeUint32BE(f,this._buffer,y-8),e.writeUint32BE(p,this._buffer,y-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,y),this._finished=!0}for(var v=0;v<this.digestLength/8;v++)e.writeUint32BE(this._stateHi[v],c,v*8),e.writeUint32BE(this._stateLo[v],c,v*8+4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._stateHi.set(c.stateHi),this._stateLo.set(c.stateLo),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.stateHi),r.wipe(c.stateLo),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,c,l,h,f,p,y){for(var v=l[0],x=l[1],O=l[2],I=l[3],_=l[4],S=l[5],w=l[6],E=l[7],g=h[0],u=h[1],m=h[2],$=h[3],N=h[4],M=h[5],B=h[6],q=h[7],D,L,G,z,U,j,k,W;y>=128;){for(var he=0;he<16;he++){var H=8*he+p;a[he]=e.readUint32BE(f,H),c[he]=e.readUint32BE(f,H+4)}for(var he=0;he<80;he++){var ae=v,ee=x,ce=O,R=I,P=_,A=S,d=w,C=E,K=g,Q=u,Ce=m,Re=$,Oe=N,Fe=M,ot=B,et=q;if(D=E,L=q,U=L&65535,j=L>>>16,k=D&65535,W=D>>>16,D=(_>>>14|N<<18)^(_>>>18|N<<14)^(N>>>9|_<<23),L=(N>>>14|_<<18)^(N>>>18|_<<14)^(_>>>9|N<<23),U+=L&65535,j+=L>>>16,k+=D&65535,W+=D>>>16,D=_&S^~_&w,L=N&M^~N&B,U+=L&65535,j+=L>>>16,k+=D&65535,W+=D>>>16,D=i[he*2],L=i[he*2+1],U+=L&65535,j+=L>>>16,k+=D&65535,W+=D>>>16,D=a[he%16],L=c[he%16],U+=L&65535,j+=L>>>16,k+=D&65535,W+=D>>>16,j+=U>>>16,k+=j>>>16,W+=k>>>16,G=k&65535|W<<16,z=U&65535|j<<16,D=G,L=z,U=L&65535,j=L>>>16,k=D&65535,W=D>>>16,D=(v>>>28|g<<4)^(g>>>2|v<<30)^(g>>>7|v<<25),L=(g>>>28|v<<4)^(v>>>2|g<<30)^(v>>>7|g<<25),U+=L&65535,j+=L>>>16,k+=D&65535,W+=D>>>16,D=v&x^v&O^x&O,L=g&u^g&m^u&m,U+=L&65535,j+=L>>>16,k+=D&65535,W+=D>>>16,j+=U>>>16,k+=j>>>16,W+=k>>>16,C=k&65535|W<<16,et=U&65535|j<<16,D=R,L=Re,U=L&65535,j=L>>>16,k=D&65535,W=D>>>16,D=G,L=z,U+=L&65535,j+=L>>>16,k+=D&65535,W+=D>>>16,j+=U>>>16,k+=j>>>16,W+=k>>>16,R=k&65535|W<<16,Re=U&65535|j<<16,x=ae,O=ee,I=ce,_=R,S=P,w=A,E=d,v=C,u=K,m=Q,$=Ce,N=Re,M=Oe,B=Fe,q=ot,g=et,he%16===15)for(var H=0;H<16;H++)D=a[H],L=c[H],U=L&65535,j=L>>>16,k=D&65535,W=D>>>16,D=a[(H+9)%16],L=c[(H+9)%16],U+=L&65535,j+=L>>>16,k+=D&65535,W+=D>>>16,G=a[(H+1)%16],z=c[(H+1)%16],D=(G>>>1|z<<31)^(G>>>8|z<<24)^G>>>7,L=(z>>>1|G<<31)^(z>>>8|G<<24)^(z>>>7|G<<25),U+=L&65535,j+=L>>>16,k+=D&65535,W+=D>>>16,G=a[(H+14)%16],z=c[(H+14)%16],D=(G>>>19|z<<13)^(z>>>29|G<<3)^G>>>6,L=(z>>>19|G<<13)^(G>>>29|z<<3)^(z>>>6|G<<26),U+=L&65535,j+=L>>>16,k+=D&65535,W+=D>>>16,j+=U>>>16,k+=j>>>16,W+=k>>>16,a[H]=k&65535|W<<16,c[H]=U&65535|j<<16}D=v,L=g,U=L&65535,j=L>>>16,k=D&65535,W=D>>>16,D=l[0],L=h[0],U+=L&65535,j+=L>>>16,k+=D&65535,W+=D>>>16,j+=U>>>16,k+=j>>>16,W+=k>>>16,l[0]=v=k&65535|W<<16,h[0]=g=U&65535|j<<16,D=x,L=u,U=L&65535,j=L>>>16,k=D&65535,W=D>>>16,D=l[1],L=h[1],U+=L&65535,j+=L>>>16,k+=D&65535,W+=D>>>16,j+=U>>>16,k+=j>>>16,W+=k>>>16,l[1]=x=k&65535|W<<16,h[1]=u=U&65535|j<<16,D=O,L=m,U=L&65535,j=L>>>16,k=D&65535,W=D>>>16,D=l[2],L=h[2],U+=L&65535,j+=L>>>16,k+=D&65535,W+=D>>>16,j+=U>>>16,k+=j>>>16,W+=k>>>16,l[2]=O=k&65535|W<<16,h[2]=m=U&65535|j<<16,D=I,L=$,U=L&65535,j=L>>>16,k=D&65535,W=D>>>16,D=l[3],L=h[3],U+=L&65535,j+=L>>>16,k+=D&65535,W+=D>>>16,j+=U>>>16,k+=j>>>16,W+=k>>>16,l[3]=I=k&65535|W<<16,h[3]=$=U&65535|j<<16,D=_,L=N,U=L&65535,j=L>>>16,k=D&65535,W=D>>>16,D=l[4],L=h[4],U+=L&65535,j+=L>>>16,k+=D&65535,W+=D>>>16,j+=U>>>16,k+=j>>>16,W+=k>>>16,l[4]=_=k&65535|W<<16,h[4]=N=U&65535|j<<16,D=S,L=M,U=L&65535,j=L>>>16,k=D&65535,W=D>>>16,D=l[5],L=h[5],U+=L&65535,j+=L>>>16,k+=D&65535,W+=D>>>16,j+=U>>>16,k+=j>>>16,W+=k>>>16,l[5]=S=k&65535|W<<16,h[5]=M=U&65535|j<<16,D=w,L=B,U=L&65535,j=L>>>16,k=D&65535,W=D>>>16,D=l[6],L=h[6],U+=L&65535,j+=L>>>16,k+=D&65535,W+=D>>>16,j+=U>>>16,k+=j>>>16,W+=k>>>16,l[6]=w=k&65535|W<<16,h[6]=B=U&65535|j<<16,D=E,L=q,U=L&65535,j=L>>>16,k=D&65535,W=D>>>16,D=l[7],L=h[7],U+=L&65535,j+=L>>>16,k+=D&65535,W+=D>>>16,j+=U>>>16,k+=j>>>16,W+=k>>>16,l[7]=E=k&65535|W<<16,h[7]=q=U&65535|j<<16,p+=128,y-=128}return p}function o(a){var c=new n;c.update(a);var l=c.digest();return c.clean(),l}t.hash=o})(Eu),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=Hn,r=Eu,n=Yt;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(R){const P=new Float64Array(16);if(R)for(let A=0;A<R.length;A++)P[A]=R[A];return P}const s=new Uint8Array(32);s[0]=9;const o=i(),a=i([1]),c=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),h=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function y(R,P){for(let A=0;A<16;A++)R[A]=P[A]|0}function v(R){let P=1;for(let A=0;A<16;A++){let d=R[A]+P+65535;P=Math.floor(d/65536),R[A]=d-P*65536}R[0]+=P-1+37*(P-1)}function x(R,P,A){const d=~(A-1);for(let C=0;C<16;C++){const K=d&(R[C]^P[C]);R[C]^=K,P[C]^=K}}function O(R,P){const A=i(),d=i();for(let C=0;C<16;C++)d[C]=P[C];v(d),v(d),v(d);for(let C=0;C<2;C++){A[0]=d[0]-65517;for(let Q=1;Q<15;Q++)A[Q]=d[Q]-65535-(A[Q-1]>>16&1),A[Q-1]&=65535;A[15]=d[15]-32767-(A[14]>>16&1);const K=A[15]>>16&1;A[14]&=65535,x(d,A,1-K)}for(let C=0;C<16;C++)R[2*C]=d[C]&255,R[2*C+1]=d[C]>>8}function I(R,P){let A=0;for(let d=0;d<32;d++)A|=R[d]^P[d];return(1&A-1>>>8)-1}function _(R,P){const A=new Uint8Array(32),d=new Uint8Array(32);return O(A,R),O(d,P),I(A,d)}function S(R){const P=new Uint8Array(32);return O(P,R),P[0]&1}function w(R,P){for(let A=0;A<16;A++)R[A]=P[2*A]+(P[2*A+1]<<8);R[15]&=32767}function E(R,P,A){for(let d=0;d<16;d++)R[d]=P[d]+A[d]}function g(R,P,A){for(let d=0;d<16;d++)R[d]=P[d]-A[d]}function u(R,P,A){let d,C,K=0,Q=0,Ce=0,Re=0,Oe=0,Fe=0,ot=0,et=0,Pe=0,$e=0,Ie=0,xe=0,Ee=0,be=0,we=0,de=0,Se=0,Ae=0,pe=0,Le=0,ke=0,ze=0,qe=0,je=0,gr=0,Dr=0,an=0,tr=0,Un=0,Ss=0,zo=0,at=A[0],tt=A[1],ct=A[2],lt=A[3],ut=A[4],rt=A[5],wt=A[6],vt=A[7],bt=A[8],_t=A[9],Et=A[10],ft=A[11],ht=A[12],Ze=A[13],xt=A[14],St=A[15];d=P[0],K+=d*at,Q+=d*tt,Ce+=d*ct,Re+=d*lt,Oe+=d*ut,Fe+=d*rt,ot+=d*wt,et+=d*vt,Pe+=d*bt,$e+=d*_t,Ie+=d*Et,xe+=d*ft,Ee+=d*ht,be+=d*Ze,we+=d*xt,de+=d*St,d=P[1],Q+=d*at,Ce+=d*tt,Re+=d*ct,Oe+=d*lt,Fe+=d*ut,ot+=d*rt,et+=d*wt,Pe+=d*vt,$e+=d*bt,Ie+=d*_t,xe+=d*Et,Ee+=d*ft,be+=d*ht,we+=d*Ze,de+=d*xt,Se+=d*St,d=P[2],Ce+=d*at,Re+=d*tt,Oe+=d*ct,Fe+=d*lt,ot+=d*ut,et+=d*rt,Pe+=d*wt,$e+=d*vt,Ie+=d*bt,xe+=d*_t,Ee+=d*Et,be+=d*ft,we+=d*ht,de+=d*Ze,Se+=d*xt,Ae+=d*St,d=P[3],Re+=d*at,Oe+=d*tt,Fe+=d*ct,ot+=d*lt,et+=d*ut,Pe+=d*rt,$e+=d*wt,Ie+=d*vt,xe+=d*bt,Ee+=d*_t,be+=d*Et,we+=d*ft,de+=d*ht,Se+=d*Ze,Ae+=d*xt,pe+=d*St,d=P[4],Oe+=d*at,Fe+=d*tt,ot+=d*ct,et+=d*lt,Pe+=d*ut,$e+=d*rt,Ie+=d*wt,xe+=d*vt,Ee+=d*bt,be+=d*_t,we+=d*Et,de+=d*ft,Se+=d*ht,Ae+=d*Ze,pe+=d*xt,Le+=d*St,d=P[5],Fe+=d*at,ot+=d*tt,et+=d*ct,Pe+=d*lt,$e+=d*ut,Ie+=d*rt,xe+=d*wt,Ee+=d*vt,be+=d*bt,we+=d*_t,de+=d*Et,Se+=d*ft,Ae+=d*ht,pe+=d*Ze,Le+=d*xt,ke+=d*St,d=P[6],ot+=d*at,et+=d*tt,Pe+=d*ct,$e+=d*lt,Ie+=d*ut,xe+=d*rt,Ee+=d*wt,be+=d*vt,we+=d*bt,de+=d*_t,Se+=d*Et,Ae+=d*ft,pe+=d*ht,Le+=d*Ze,ke+=d*xt,ze+=d*St,d=P[7],et+=d*at,Pe+=d*tt,$e+=d*ct,Ie+=d*lt,xe+=d*ut,Ee+=d*rt,be+=d*wt,we+=d*vt,de+=d*bt,Se+=d*_t,Ae+=d*Et,pe+=d*ft,Le+=d*ht,ke+=d*Ze,ze+=d*xt,qe+=d*St,d=P[8],Pe+=d*at,$e+=d*tt,Ie+=d*ct,xe+=d*lt,Ee+=d*ut,be+=d*rt,we+=d*wt,de+=d*vt,Se+=d*bt,Ae+=d*_t,pe+=d*Et,Le+=d*ft,ke+=d*ht,ze+=d*Ze,qe+=d*xt,je+=d*St,d=P[9],$e+=d*at,Ie+=d*tt,xe+=d*ct,Ee+=d*lt,be+=d*ut,we+=d*rt,de+=d*wt,Se+=d*vt,Ae+=d*bt,pe+=d*_t,Le+=d*Et,ke+=d*ft,ze+=d*ht,qe+=d*Ze,je+=d*xt,gr+=d*St,d=P[10],Ie+=d*at,xe+=d*tt,Ee+=d*ct,be+=d*lt,we+=d*ut,de+=d*rt,Se+=d*wt,Ae+=d*vt,pe+=d*bt,Le+=d*_t,ke+=d*Et,ze+=d*ft,qe+=d*ht,je+=d*Ze,gr+=d*xt,Dr+=d*St,d=P[11],xe+=d*at,Ee+=d*tt,be+=d*ct,we+=d*lt,de+=d*ut,Se+=d*rt,Ae+=d*wt,pe+=d*vt,Le+=d*bt,ke+=d*_t,ze+=d*Et,qe+=d*ft,je+=d*ht,gr+=d*Ze,Dr+=d*xt,an+=d*St,d=P[12],Ee+=d*at,be+=d*tt,we+=d*ct,de+=d*lt,Se+=d*ut,Ae+=d*rt,pe+=d*wt,Le+=d*vt,ke+=d*bt,ze+=d*_t,qe+=d*Et,je+=d*ft,gr+=d*ht,Dr+=d*Ze,an+=d*xt,tr+=d*St,d=P[13],be+=d*at,we+=d*tt,de+=d*ct,Se+=d*lt,Ae+=d*ut,pe+=d*rt,Le+=d*wt,ke+=d*vt,ze+=d*bt,qe+=d*_t,je+=d*Et,gr+=d*ft,Dr+=d*ht,an+=d*Ze,tr+=d*xt,Un+=d*St,d=P[14],we+=d*at,de+=d*tt,Se+=d*ct,Ae+=d*lt,pe+=d*ut,Le+=d*rt,ke+=d*wt,ze+=d*vt,qe+=d*bt,je+=d*_t,gr+=d*Et,Dr+=d*ft,an+=d*ht,tr+=d*Ze,Un+=d*xt,Ss+=d*St,d=P[15],de+=d*at,Se+=d*tt,Ae+=d*ct,pe+=d*lt,Le+=d*ut,ke+=d*rt,ze+=d*wt,qe+=d*vt,je+=d*bt,gr+=d*_t,Dr+=d*Et,an+=d*ft,tr+=d*ht,Un+=d*Ze,Ss+=d*xt,zo+=d*St,K+=38*Se,Q+=38*Ae,Ce+=38*pe,Re+=38*Le,Oe+=38*ke,Fe+=38*ze,ot+=38*qe,et+=38*je,Pe+=38*gr,$e+=38*Dr,Ie+=38*an,xe+=38*tr,Ee+=38*Un,be+=38*Ss,we+=38*zo,C=1,d=K+C+65535,C=Math.floor(d/65536),K=d-C*65536,d=Q+C+65535,C=Math.floor(d/65536),Q=d-C*65536,d=Ce+C+65535,C=Math.floor(d/65536),Ce=d-C*65536,d=Re+C+65535,C=Math.floor(d/65536),Re=d-C*65536,d=Oe+C+65535,C=Math.floor(d/65536),Oe=d-C*65536,d=Fe+C+65535,C=Math.floor(d/65536),Fe=d-C*65536,d=ot+C+65535,C=Math.floor(d/65536),ot=d-C*65536,d=et+C+65535,C=Math.floor(d/65536),et=d-C*65536,d=Pe+C+65535,C=Math.floor(d/65536),Pe=d-C*65536,d=$e+C+65535,C=Math.floor(d/65536),$e=d-C*65536,d=Ie+C+65535,C=Math.floor(d/65536),Ie=d-C*65536,d=xe+C+65535,C=Math.floor(d/65536),xe=d-C*65536,d=Ee+C+65535,C=Math.floor(d/65536),Ee=d-C*65536,d=be+C+65535,C=Math.floor(d/65536),be=d-C*65536,d=we+C+65535,C=Math.floor(d/65536),we=d-C*65536,d=de+C+65535,C=Math.floor(d/65536),de=d-C*65536,K+=C-1+37*(C-1),C=1,d=K+C+65535,C=Math.floor(d/65536),K=d-C*65536,d=Q+C+65535,C=Math.floor(d/65536),Q=d-C*65536,d=Ce+C+65535,C=Math.floor(d/65536),Ce=d-C*65536,d=Re+C+65535,C=Math.floor(d/65536),Re=d-C*65536,d=Oe+C+65535,C=Math.floor(d/65536),Oe=d-C*65536,d=Fe+C+65535,C=Math.floor(d/65536),Fe=d-C*65536,d=ot+C+65535,C=Math.floor(d/65536),ot=d-C*65536,d=et+C+65535,C=Math.floor(d/65536),et=d-C*65536,d=Pe+C+65535,C=Math.floor(d/65536),Pe=d-C*65536,d=$e+C+65535,C=Math.floor(d/65536),$e=d-C*65536,d=Ie+C+65535,C=Math.floor(d/65536),Ie=d-C*65536,d=xe+C+65535,C=Math.floor(d/65536),xe=d-C*65536,d=Ee+C+65535,C=Math.floor(d/65536),Ee=d-C*65536,d=be+C+65535,C=Math.floor(d/65536),be=d-C*65536,d=we+C+65535,C=Math.floor(d/65536),we=d-C*65536,d=de+C+65535,C=Math.floor(d/65536),de=d-C*65536,K+=C-1+37*(C-1),R[0]=K,R[1]=Q,R[2]=Ce,R[3]=Re,R[4]=Oe,R[5]=Fe,R[6]=ot,R[7]=et,R[8]=Pe,R[9]=$e,R[10]=Ie,R[11]=xe,R[12]=Ee,R[13]=be,R[14]=we,R[15]=de}function m(R,P){u(R,P,P)}function $(R,P){const A=i();let d;for(d=0;d<16;d++)A[d]=P[d];for(d=253;d>=0;d--)m(A,A),d!==2&&d!==4&&u(A,A,P);for(d=0;d<16;d++)R[d]=A[d]}function N(R,P){const A=i();let d;for(d=0;d<16;d++)A[d]=P[d];for(d=250;d>=0;d--)m(A,A),d!==1&&u(A,A,P);for(d=0;d<16;d++)R[d]=A[d]}function M(R,P){const A=i(),d=i(),C=i(),K=i(),Q=i(),Ce=i(),Re=i(),Oe=i(),Fe=i();g(A,R[1],R[0]),g(Fe,P[1],P[0]),u(A,A,Fe),E(d,R[0],R[1]),E(Fe,P[0],P[1]),u(d,d,Fe),u(C,R[3],P[3]),u(C,C,l),u(K,R[2],P[2]),E(K,K,K),g(Q,d,A),g(Ce,K,C),E(Re,K,C),E(Oe,d,A),u(R[0],Q,Ce),u(R[1],Oe,Re),u(R[2],Re,Ce),u(R[3],Q,Oe)}function B(R,P,A){for(let d=0;d<4;d++)x(R[d],P[d],A)}function q(R,P){const A=i(),d=i(),C=i();$(C,P[2]),u(A,P[0],C),u(d,P[1],C),O(R,d),R[31]^=S(A)<<7}function D(R,P,A){y(R[0],o),y(R[1],a),y(R[2],a),y(R[3],o);for(let d=255;d>=0;--d){const C=A[d/8|0]>>(d&7)&1;B(R,P,C),M(P,R),M(R,R),B(R,P,C)}}function L(R,P){const A=[i(),i(),i(),i()];y(A[0],h),y(A[1],f),y(A[2],a),u(A[3],h,f),D(R,A,P)}function G(R){if(R.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const P=(0,r.hash)(R);P[0]&=248,P[31]&=127,P[31]|=64;const A=new Uint8Array(32),d=[i(),i(),i(),i()];L(d,P),q(A,d);const C=new Uint8Array(64);return C.set(R),C.set(A,32),{publicKey:A,secretKey:C}}t.generateKeyPairFromSeed=G;function z(R){const P=(0,e.randomBytes)(32,R),A=G(P);return(0,n.wipe)(P),A}t.generateKeyPair=z;function U(R){if(R.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(R.subarray(32))}t.extractPublicKeyFromSecretKey=U;const j=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function k(R,P){let A,d,C,K;for(d=63;d>=32;--d){for(A=0,C=d-32,K=d-12;C<K;++C)P[C]+=A-16*P[d]*j[C-(d-32)],A=Math.floor((P[C]+128)/256),P[C]-=A*256;P[C]+=A,P[d]=0}for(A=0,C=0;C<32;C++)P[C]+=A-(P[31]>>4)*j[C],A=P[C]>>8,P[C]&=255;for(C=0;C<32;C++)P[C]-=A*j[C];for(d=0;d<32;d++)P[d+1]+=P[d]>>8,R[d]=P[d]&255}function W(R){const P=new Float64Array(64);for(let A=0;A<64;A++)P[A]=R[A];for(let A=0;A<64;A++)R[A]=0;k(R,P)}function he(R,P){const A=new Float64Array(64),d=[i(),i(),i(),i()],C=(0,r.hash)(R.subarray(0,32));C[0]&=248,C[31]&=127,C[31]|=64;const K=new Uint8Array(64);K.set(C.subarray(32),32);const Q=new r.SHA512;Q.update(K.subarray(32)),Q.update(P);const Ce=Q.digest();Q.clean(),W(Ce),L(d,Ce),q(K,d),Q.reset(),Q.update(K.subarray(0,32)),Q.update(R.subarray(32)),Q.update(P);const Re=Q.digest();W(Re);for(let Oe=0;Oe<32;Oe++)A[Oe]=Ce[Oe];for(let Oe=0;Oe<32;Oe++)for(let Fe=0;Fe<32;Fe++)A[Oe+Fe]+=Re[Oe]*C[Fe];return k(K.subarray(32),A),K}t.sign=he;function H(R,P){const A=i(),d=i(),C=i(),K=i(),Q=i(),Ce=i(),Re=i();return y(R[2],a),w(R[1],P),m(C,R[1]),u(K,C,c),g(C,C,R[2]),E(K,R[2],K),m(Q,K),m(Ce,Q),u(Re,Ce,Q),u(A,Re,C),u(A,A,K),N(A,A),u(A,A,C),u(A,A,K),u(A,A,K),u(R[0],A,K),m(d,R[0]),u(d,d,K),_(d,C)&&u(R[0],R[0],p),m(d,R[0]),u(d,d,K),_(d,C)?-1:(S(R[0])===P[31]>>7&&g(R[0],o,R[0]),u(R[3],R[0],R[1]),0)}function ae(R,P,A){const d=new Uint8Array(32),C=[i(),i(),i(),i()],K=[i(),i(),i(),i()];if(A.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(H(K,R))return!1;const Q=new r.SHA512;Q.update(A.subarray(0,32)),Q.update(R),Q.update(P);const Ce=Q.digest();return W(Ce),D(C,K,Ce),L(K,A.subarray(32)),M(C,K),q(d,C),!I(A,d)}t.verify=ae;function ee(R){let P=[i(),i(),i(),i()];if(H(P,R))throw new Error("Ed25519: invalid public key");let A=i(),d=i(),C=P[1];E(A,a,C),g(d,a,C),$(d,d),u(A,A,d);let K=new Uint8Array(32);return O(K,A),K}t.convertPublicKeyToX25519=ee;function ce(R){const P=(0,r.hash)(R.subarray(0,32));P[0]&=248,P[31]&=127,P[31]|=64;const A=new Uint8Array(P.subarray(0,32));return(0,n.wipe)(P),A}t.convertSecretKeyToX25519=ce}(ma);const Fg="EdDSA",jg="JWT",xu=".",Su="base64url",Bg="utf8",zg="utf8",qg=":",Wg="did",Vg="key",Cu="base58btc",Hg="z",Kg="K36",Zg=32;function _a(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Iu(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?_a(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Ea(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=Iu(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return _a(r)}function Gg(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function f(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var x=0,O=0,I=0,_=v.length;I!==_&&v[I]===0;)I++,x++;for(var S=(_-I)*h+1>>>0,w=new Uint8Array(S);I!==_;){for(var E=v[I],g=0,u=S-1;(E!==0||g<O)&&u!==-1;u--,g++)E+=256*w[u]>>>0,w[u]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");O=g,I++}for(var m=S-O;m!==S&&w[m]===0;)m++;for(var $=c.repeat(x);m<S;++m)$+=t.charAt(w[m]);return $}function p(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var x=0;if(v[x]!==" "){for(var O=0,I=0;v[x]===c;)O++,x++;for(var _=(v.length-x)*l+1>>>0,S=new Uint8Array(_);v[x];){var w=r[v.charCodeAt(x)];if(w===255)return;for(var E=0,g=_-1;(w!==0||E<I)&&g!==-1;g--,E++)w+=a*S[g]>>>0,S[g]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");I=E,x++}if(v[x]!==" "){for(var u=_-I;u!==_&&S[u]===0;)u++;for(var m=new Uint8Array(O+(_-u)),$=O;u!==_;)m[$++]=S[u++];return m}}}function y(v){var x=p(v);if(x)return x;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:p,decode:y}}var Yg=Gg,Jg=Yg;const Qg=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Xg=t=>new TextEncoder().encode(t),e1=t=>new TextDecoder().decode(t);class t1{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class r1{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Du(this,e)}}class n1{constructor(e){this.decoders=e}or(e){return Du(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Du=(t,e)=>new n1({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class i1{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new t1(e,r,n),this.decoder=new r1(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Vs=({name:t,prefix:e,encode:r,decode:n})=>new i1(t,e,r,n),Li=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Jg(r,e);return Vs({prefix:t,name:e,encode:n,decode:s=>Qg(i(s))})},s1=(t,e,r,n)=>{const i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let h=0;h<s;++h){const f=i[t[h]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},o1=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},It=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Vs({prefix:e,name:t,encode(i){return o1(i,n,r)},decode(i){return s1(i,n,r,t)}}),a1=Vs({prefix:"\0",name:"identity",encode:t=>e1(t),decode:t=>Xg(t)}),c1=Object.freeze(Object.defineProperty({__proto__:null,identity:a1},Symbol.toStringTag,{value:"Module"})),l1=It({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),u1=Object.freeze(Object.defineProperty({__proto__:null,base2:l1},Symbol.toStringTag,{value:"Module"})),h1=It({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),d1=Object.freeze(Object.defineProperty({__proto__:null,base8:h1},Symbol.toStringTag,{value:"Module"})),f1=Li({prefix:"9",name:"base10",alphabet:"0123456789"}),p1=Object.freeze(Object.defineProperty({__proto__:null,base10:f1},Symbol.toStringTag,{value:"Module"})),g1=It({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),m1=It({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),y1=Object.freeze(Object.defineProperty({__proto__:null,base16:g1,base16upper:m1},Symbol.toStringTag,{value:"Module"})),w1=It({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),v1=It({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),b1=It({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),_1=It({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),E1=It({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),x1=It({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),S1=It({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),C1=It({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),I1=It({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),D1=Object.freeze(Object.defineProperty({__proto__:null,base32:w1,base32hex:E1,base32hexpad:S1,base32hexpadupper:C1,base32hexupper:x1,base32pad:b1,base32padupper:_1,base32upper:v1,base32z:I1},Symbol.toStringTag,{value:"Module"})),O1=Li({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),$1=Li({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),A1=Object.freeze(Object.defineProperty({__proto__:null,base36:O1,base36upper:$1},Symbol.toStringTag,{value:"Module"})),T1=Li({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),N1=Li({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),P1=Object.freeze(Object.defineProperty({__proto__:null,base58btc:T1,base58flickr:N1},Symbol.toStringTag,{value:"Module"})),R1=It({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),L1=It({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),M1=It({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),k1=It({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),U1=Object.freeze(Object.defineProperty({__proto__:null,base64:R1,base64pad:L1,base64url:M1,base64urlpad:k1},Symbol.toStringTag,{value:"Module"})),Ou=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),F1=Ou.reduce((t,e,r)=>(t[r]=e,t),[]),j1=Ou.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function B1(t){return t.reduce((e,r)=>(e+=F1[r],e),"")}function z1(t){const e=[];for(const r of t){const n=j1[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const q1=Vs({prefix:"🚀",name:"base256emoji",encode:B1,decode:z1}),W1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:q1},Symbol.toStringTag,{value:"Module"}));new TextEncoder,new TextDecoder;const $u={...c1,...u1,...d1,...p1,...y1,...D1,...A1,...P1,...U1,...W1};function Au(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Tu=Au("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),xa=Au("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Iu(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Nu={utf8:Tu,"utf-8":Tu,hex:$u.base16,latin1:xa,ascii:xa,binary:xa,...$u};function kt(t,e="utf8"){const r=Nu[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Ht(t,e="utf8"){const r=Nu[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?_a(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function Hs(t){return kt(Ht($i(t),Bg),Su)}function Pu(t){const e=Ht(Kg,Cu),r=Hg+kt(Ea([e,t]),Cu);return[Wg,Vg,r].join(qg)}function V1(t){return kt(t,Su)}function H1(t){return Ht([Hs(t.header),Hs(t.payload)].join(xu),zg)}function K1(t){return[Hs(t.header),Hs(t.payload),V1(t.signature)].join(xu)}function Ru(t=Hn.randomBytes(Zg)){return ma.generateKeyPairFromSeed(t)}async function Z1(t,e,r,n,i=ne.fromMiliseconds(Date.now())){const s={alg:Fg,typ:jg},o=Pu(n.publicKey),a=i+r,c={iss:o,sub:t,aud:e,iat:i,exp:a},l=H1({header:s,payload:c}),h=ma.sign(n.secretKey,l);return K1({header:s,payload:c,signature:h})}var Sa={},Ks={};Object.defineProperty(Ks,"__esModule",{value:!0});var At=fe,Ca=Yt,G1=20;function Y1(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],l=r[11]<<24|r[10]<<16|r[9]<<8|r[8],h=r[15]<<24|r[14]<<16|r[13]<<8|r[12],f=r[19]<<24|r[18]<<16|r[17]<<8|r[16],p=r[23]<<24|r[22]<<16|r[21]<<8|r[20],y=r[27]<<24|r[26]<<16|r[25]<<8|r[24],v=r[31]<<24|r[30]<<16|r[29]<<8|r[28],x=e[3]<<24|e[2]<<16|e[1]<<8|e[0],O=e[7]<<24|e[6]<<16|e[5]<<8|e[4],I=e[11]<<24|e[10]<<16|e[9]<<8|e[8],_=e[15]<<24|e[14]<<16|e[13]<<8|e[12],S=n,w=i,E=s,g=o,u=a,m=c,$=l,N=h,M=f,B=p,q=y,D=v,L=x,G=O,z=I,U=_,j=0;j<G1;j+=2)S=S+u|0,L^=S,L=L>>>16|L<<16,M=M+L|0,u^=M,u=u>>>20|u<<12,w=w+m|0,G^=w,G=G>>>16|G<<16,B=B+G|0,m^=B,m=m>>>20|m<<12,E=E+$|0,z^=E,z=z>>>16|z<<16,q=q+z|0,$^=q,$=$>>>20|$<<12,g=g+N|0,U^=g,U=U>>>16|U<<16,D=D+U|0,N^=D,N=N>>>20|N<<12,E=E+$|0,z^=E,z=z>>>24|z<<8,q=q+z|0,$^=q,$=$>>>25|$<<7,g=g+N|0,U^=g,U=U>>>24|U<<8,D=D+U|0,N^=D,N=N>>>25|N<<7,w=w+m|0,G^=w,G=G>>>24|G<<8,B=B+G|0,m^=B,m=m>>>25|m<<7,S=S+u|0,L^=S,L=L>>>24|L<<8,M=M+L|0,u^=M,u=u>>>25|u<<7,S=S+m|0,U^=S,U=U>>>16|U<<16,q=q+U|0,m^=q,m=m>>>20|m<<12,w=w+$|0,L^=w,L=L>>>16|L<<16,D=D+L|0,$^=D,$=$>>>20|$<<12,E=E+N|0,G^=E,G=G>>>16|G<<16,M=M+G|0,N^=M,N=N>>>20|N<<12,g=g+u|0,z^=g,z=z>>>16|z<<16,B=B+z|0,u^=B,u=u>>>20|u<<12,E=E+N|0,G^=E,G=G>>>24|G<<8,M=M+G|0,N^=M,N=N>>>25|N<<7,g=g+u|0,z^=g,z=z>>>24|z<<8,B=B+z|0,u^=B,u=u>>>25|u<<7,w=w+$|0,L^=w,L=L>>>24|L<<8,D=D+L|0,$^=D,$=$>>>25|$<<7,S=S+m|0,U^=S,U=U>>>24|U<<8,q=q+U|0,m^=q,m=m>>>25|m<<7;At.writeUint32LE(S+n|0,t,0),At.writeUint32LE(w+i|0,t,4),At.writeUint32LE(E+s|0,t,8),At.writeUint32LE(g+o|0,t,12),At.writeUint32LE(u+a|0,t,16),At.writeUint32LE(m+c|0,t,20),At.writeUint32LE($+l|0,t,24),At.writeUint32LE(N+h|0,t,28),At.writeUint32LE(M+f|0,t,32),At.writeUint32LE(B+p|0,t,36),At.writeUint32LE(q+y|0,t,40),At.writeUint32LE(D+v|0,t,44),At.writeUint32LE(L+x|0,t,48),At.writeUint32LE(G+O|0,t,52),At.writeUint32LE(z+I|0,t,56),At.writeUint32LE(U+_|0,t,60)}function Lu(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=i}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){Y1(a,s,t);for(var l=c;l<c+64&&l<r.length;l++)n[l]=r[l]^a[l-c];Q1(s,0,o)}return Ca.wipe(a),i===0&&Ca.wipe(s),n}Ks.streamXOR=Lu;function J1(t,e,r,n){return n===void 0&&(n=0),Ca.wipe(r),Lu(t,e,r,r,n)}Ks.stream=J1;function Q1(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var Mu={},Vr={};Object.defineProperty(Vr,"__esModule",{value:!0});function X1(t,e,r){return~(t-1)&e|t-1&r}Vr.select=X1;function em(t,e){return(t|0)-(e|0)-1>>>31&1}Vr.lessOrEqual=em;function ku(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}Vr.compare=ku;function tm(t,e){return t.length===0||e.length===0?!1:ku(t,e)!==0}Vr.equal=tm,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Vr,r=Yt;t.DIGEST_LENGTH=16;var n=function(){function o(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=a[0]|a[1]<<8;this._r[0]=c&8191;var l=a[2]|a[3]<<8;this._r[1]=(c>>>13|l<<3)&8191;var h=a[4]|a[5]<<8;this._r[2]=(l>>>10|h<<6)&7939;var f=a[6]|a[7]<<8;this._r[3]=(h>>>7|f<<9)&8191;var p=a[8]|a[9]<<8;this._r[4]=(f>>>4|p<<12)&255,this._r[5]=p>>>1&8190;var y=a[10]|a[11]<<8;this._r[6]=(p>>>14|y<<2)&8191;var v=a[12]|a[13]<<8;this._r[7]=(y>>>11|v<<5)&8065;var x=a[14]|a[15]<<8;this._r[8]=(v>>>8|x<<8)&8191,this._r[9]=x>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return o.prototype._blocks=function(a,c,l){for(var h=this._fin?0:2048,f=this._h[0],p=this._h[1],y=this._h[2],v=this._h[3],x=this._h[4],O=this._h[5],I=this._h[6],_=this._h[7],S=this._h[8],w=this._h[9],E=this._r[0],g=this._r[1],u=this._r[2],m=this._r[3],$=this._r[4],N=this._r[5],M=this._r[6],B=this._r[7],q=this._r[8],D=this._r[9];l>=16;){var L=a[c+0]|a[c+1]<<8;f+=L&8191;var G=a[c+2]|a[c+3]<<8;p+=(L>>>13|G<<3)&8191;var z=a[c+4]|a[c+5]<<8;y+=(G>>>10|z<<6)&8191;var U=a[c+6]|a[c+7]<<8;v+=(z>>>7|U<<9)&8191;var j=a[c+8]|a[c+9]<<8;x+=(U>>>4|j<<12)&8191,O+=j>>>1&8191;var k=a[c+10]|a[c+11]<<8;I+=(j>>>14|k<<2)&8191;var W=a[c+12]|a[c+13]<<8;_+=(k>>>11|W<<5)&8191;var he=a[c+14]|a[c+15]<<8;S+=(W>>>8|he<<8)&8191,w+=he>>>5|h;var H=0,ae=H;ae+=f*E,ae+=p*(5*D),ae+=y*(5*q),ae+=v*(5*B),ae+=x*(5*M),H=ae>>>13,ae&=8191,ae+=O*(5*N),ae+=I*(5*$),ae+=_*(5*m),ae+=S*(5*u),ae+=w*(5*g),H+=ae>>>13,ae&=8191;var ee=H;ee+=f*g,ee+=p*E,ee+=y*(5*D),ee+=v*(5*q),ee+=x*(5*B),H=ee>>>13,ee&=8191,ee+=O*(5*M),ee+=I*(5*N),ee+=_*(5*$),ee+=S*(5*m),ee+=w*(5*u),H+=ee>>>13,ee&=8191;var ce=H;ce+=f*u,ce+=p*g,ce+=y*E,ce+=v*(5*D),ce+=x*(5*q),H=ce>>>13,ce&=8191,ce+=O*(5*B),ce+=I*(5*M),ce+=_*(5*N),ce+=S*(5*$),ce+=w*(5*m),H+=ce>>>13,ce&=8191;var R=H;R+=f*m,R+=p*u,R+=y*g,R+=v*E,R+=x*(5*D),H=R>>>13,R&=8191,R+=O*(5*q),R+=I*(5*B),R+=_*(5*M),R+=S*(5*N),R+=w*(5*$),H+=R>>>13,R&=8191;var P=H;P+=f*$,P+=p*m,P+=y*u,P+=v*g,P+=x*E,H=P>>>13,P&=8191,P+=O*(5*D),P+=I*(5*q),P+=_*(5*B),P+=S*(5*M),P+=w*(5*N),H+=P>>>13,P&=8191;var A=H;A+=f*N,A+=p*$,A+=y*m,A+=v*u,A+=x*g,H=A>>>13,A&=8191,A+=O*E,A+=I*(5*D),A+=_*(5*q),A+=S*(5*B),A+=w*(5*M),H+=A>>>13,A&=8191;var d=H;d+=f*M,d+=p*N,d+=y*$,d+=v*m,d+=x*u,H=d>>>13,d&=8191,d+=O*g,d+=I*E,d+=_*(5*D),d+=S*(5*q),d+=w*(5*B),H+=d>>>13,d&=8191;var C=H;C+=f*B,C+=p*M,C+=y*N,C+=v*$,C+=x*m,H=C>>>13,C&=8191,C+=O*u,C+=I*g,C+=_*E,C+=S*(5*D),C+=w*(5*q),H+=C>>>13,C&=8191;var K=H;K+=f*q,K+=p*B,K+=y*M,K+=v*N,K+=x*$,H=K>>>13,K&=8191,K+=O*m,K+=I*u,K+=_*g,K+=S*E,K+=w*(5*D),H+=K>>>13,K&=8191;var Q=H;Q+=f*D,Q+=p*q,Q+=y*B,Q+=v*M,Q+=x*N,H=Q>>>13,Q&=8191,Q+=O*$,Q+=I*m,Q+=_*u,Q+=S*g,Q+=w*E,H+=Q>>>13,Q&=8191,H=(H<<2)+H|0,H=H+ae|0,ae=H&8191,H=H>>>13,ee+=H,f=ae,p=ee,y=ce,v=R,x=P,O=A,I=d,_=C,S=K,w=Q,c+=16,l-=16}this._h[0]=f,this._h[1]=p,this._h[2]=y,this._h[3]=v,this._h[4]=x,this._h[5]=O,this._h[6]=I,this._h[7]=_,this._h[8]=S,this._h[9]=w},o.prototype.finish=function(a,c){c===void 0&&(c=0);var l=new Uint16Array(10),h,f,p,y;if(this._leftover){for(y=this._leftover,this._buffer[y++]=1;y<16;y++)this._buffer[y]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(h=this._h[1]>>>13,this._h[1]&=8191,y=2;y<10;y++)this._h[y]+=h,h=this._h[y]>>>13,this._h[y]&=8191;for(this._h[0]+=h*5,h=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=h,h=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=h,l[0]=this._h[0]+5,h=l[0]>>>13,l[0]&=8191,y=1;y<10;y++)l[y]=this._h[y]+h,h=l[y]>>>13,l[y]&=8191;for(l[9]-=8192,f=(h^1)-1,y=0;y<10;y++)l[y]&=f;for(f=~f,y=0;y<10;y++)this._h[y]=this._h[y]&f|l[y];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,p=this._h[0]+this._pad[0],this._h[0]=p&65535,y=1;y<8;y++)p=(this._h[y]+this._pad[y]|0)+(p>>>16)|0,this._h[y]=p&65535;return a[c+0]=this._h[0]>>>0,a[c+1]=this._h[0]>>>8,a[c+2]=this._h[1]>>>0,a[c+3]=this._h[1]>>>8,a[c+4]=this._h[2]>>>0,a[c+5]=this._h[2]>>>8,a[c+6]=this._h[3]>>>0,a[c+7]=this._h[3]>>>8,a[c+8]=this._h[4]>>>0,a[c+9]=this._h[4]>>>8,a[c+10]=this._h[5]>>>0,a[c+11]=this._h[5]>>>8,a[c+12]=this._h[6]>>>0,a[c+13]=this._h[6]>>>8,a[c+14]=this._h[7]>>>0,a[c+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(a){var c=0,l=a.length,h;if(this._leftover){h=16-this._leftover,h>l&&(h=l);for(var f=0;f<h;f++)this._buffer[this._leftover+f]=a[c+f];if(l-=h,c+=h,this._leftover+=h,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(l>=16&&(h=l-l%16,this._blocks(a,c,h),c+=h,l-=h),l){for(var f=0;f<l;f++)this._buffer[this._leftover+f]=a[c+f];this._leftover+=l}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},o.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o}();t.Poly1305=n;function i(o,a){var c=new n(o);c.update(a);var l=c.digest();return c.clean(),l}t.oneTimeAuth=i;function s(o,a){return o.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(o,a)}t.equal=s}(Mu),function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Ks,r=Mu,n=Yt,i=fe,s=Vr;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var o=new Uint8Array(16),a=function(){function c(l){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,l.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(l)}return c.prototype.seal=function(l,h,f,p){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var y=new Uint8Array(16);y.set(l,y.length-l.length);var v=new Uint8Array(32);e.stream(this._key,y,v,4);var x=h.length+this.tagLength,O;if(p){if(p.length!==x)throw new Error("ChaCha20Poly1305: incorrect destination length");O=p}else O=new Uint8Array(x);return e.streamXOR(this._key,y,h,O,4),this._authenticate(O.subarray(O.length-this.tagLength,O.length),v,O.subarray(0,O.length-this.tagLength),f),n.wipe(y),O},c.prototype.open=function(l,h,f,p){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(h.length<this.tagLength)return null;var y=new Uint8Array(16);y.set(l,y.length-l.length);var v=new Uint8Array(32);e.stream(this._key,y,v,4);var x=new Uint8Array(this.tagLength);if(this._authenticate(x,v,h.subarray(0,h.length-this.tagLength),f),!s.equal(x,h.subarray(h.length-this.tagLength,h.length)))return null;var O=h.length-this.tagLength,I;if(p){if(p.length!==O)throw new Error("ChaCha20Poly1305: incorrect destination length");I=p}else I=new Uint8Array(O);return e.streamXOR(this._key,y,h.subarray(0,h.length-this.tagLength),I,4),n.wipe(y),I},c.prototype.clean=function(){return n.wipe(this._key),this},c.prototype._authenticate=function(l,h,f,p){var y=new r.Poly1305(h);p&&(y.update(p),p.length%16>0&&y.update(o.subarray(p.length%16))),y.update(f),f.length%16>0&&y.update(o.subarray(f.length%16));var v=new Uint8Array(8);p&&i.writeUint64LE(p.length,v),y.update(v),i.writeUint64LE(f.length,v),y.update(v);for(var x=y.digest(),O=0;O<x.length;O++)l[O]=x[O];y.clean(),n.wipe(x),n.wipe(v)},c}();t.ChaCha20Poly1305=a}(Sa);var Uu={},Mi={},Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});function rm(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}Ia.isSerializableHash=rm,Object.defineProperty(Mi,"__esModule",{value:!0});var _r=Ia,nm=Vr,im=Yt,Fu=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),_r.isSerializableHash(this._inner)&&_r.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),im.wipe(n)}return t.prototype.reset=function(){if(!_r.isSerializableHash(this._inner)||!_r.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){_r.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),_r.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!_r.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!_r.isSerializableHash(this._inner)||!_r.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!_r.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();Mi.HMAC=Fu;function sm(t,e,r){var n=new Fu(t,e);n.update(r);var i=n.digest();return n.clean(),i}Mi.hmac=sm,Mi.equal=nm.equal,Object.defineProperty(Uu,"__esModule",{value:!0});var ju=Mi,Bu=Yt,om=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=ju.hmac(this._hash,n,r);this._hmac=new ju.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),Bu.wipe(this._buffer),Bu.wipe(this._counter),this._bufpos=0},t}(),am=Uu.HKDF=om,Zs={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=fe,r=Yt;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},a.prototype.update=function(c,l){if(l===void 0&&(l=c.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var h=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&l>0;)this._buffer[this._bufferLength++]=c[h++],l--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(h=s(this._temp,this._state,c,h,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=c[h++],l--;return this},a.prototype.finish=function(c){if(!this._finished){var l=this._bytesHashed,h=this._bufferLength,f=l/536870912|0,p=l<<3,y=l%64<56?64:128;this._buffer[h]=128;for(var v=h+1;v<y-8;v++)this._buffer[v]=0;e.writeUint32BE(f,this._buffer,y-8),e.writeUint32BE(p,this._buffer,y-4),s(this._temp,this._state,this._buffer,0,y),this._finished=!0}for(var v=0;v<this.digestLength/4;v++)e.writeUint32BE(this._state[v],c,v*4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._state.set(c.state),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.state),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(a,c,l,h,f){for(;f>=64;){for(var p=c[0],y=c[1],v=c[2],x=c[3],O=c[4],I=c[5],_=c[6],S=c[7],w=0;w<16;w++){var E=h+w*4;a[w]=e.readUint32BE(l,E)}for(var w=16;w<64;w++){var g=a[w-2],u=(g>>>17|g<<15)^(g>>>19|g<<13)^g>>>10;g=a[w-15];var m=(g>>>7|g<<25)^(g>>>18|g<<14)^g>>>3;a[w]=(u+a[w-7]|0)+(m+a[w-16]|0)}for(var w=0;w<64;w++){var u=(((O>>>6|O<<26)^(O>>>11|O<<21)^(O>>>25|O<<7))+(O&I^~O&_)|0)+(S+(i[w]+a[w]|0)|0)|0,m=((p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10))+(p&y^p&v^y&v)|0;S=_,_=I,I=O,O=x+u|0,x=v,v=y,y=p,p=u+m|0}c[0]+=p,c[1]+=y,c[2]+=v,c[3]+=x,c[4]+=O,c[5]+=I,c[6]+=_,c[7]+=S,h+=64,f-=64}return h}function o(a){var c=new n;c.update(a);var l=c.digest();return c.clean(),l}t.hash=o})(Zs);var Da={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=Hn,r=Yt;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(w){const E=new Float64Array(16);if(w)for(let g=0;g<w.length;g++)E[g]=w[g];return E}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function o(w){let E=1;for(let g=0;g<16;g++){let u=w[g]+E+65535;E=Math.floor(u/65536),w[g]=u-E*65536}w[0]+=E-1+37*(E-1)}function a(w,E,g){const u=~(g-1);for(let m=0;m<16;m++){const $=u&(w[m]^E[m]);w[m]^=$,E[m]^=$}}function c(w,E){const g=n(),u=n();for(let m=0;m<16;m++)u[m]=E[m];o(u),o(u),o(u);for(let m=0;m<2;m++){g[0]=u[0]-65517;for(let N=1;N<15;N++)g[N]=u[N]-65535-(g[N-1]>>16&1),g[N-1]&=65535;g[15]=u[15]-32767-(g[14]>>16&1);const $=g[15]>>16&1;g[14]&=65535,a(u,g,1-$)}for(let m=0;m<16;m++)w[2*m]=u[m]&255,w[2*m+1]=u[m]>>8}function l(w,E){for(let g=0;g<16;g++)w[g]=E[2*g]+(E[2*g+1]<<8);w[15]&=32767}function h(w,E,g){for(let u=0;u<16;u++)w[u]=E[u]+g[u]}function f(w,E,g){for(let u=0;u<16;u++)w[u]=E[u]-g[u]}function p(w,E,g){let u,m,$=0,N=0,M=0,B=0,q=0,D=0,L=0,G=0,z=0,U=0,j=0,k=0,W=0,he=0,H=0,ae=0,ee=0,ce=0,R=0,P=0,A=0,d=0,C=0,K=0,Q=0,Ce=0,Re=0,Oe=0,Fe=0,ot=0,et=0,Pe=g[0],$e=g[1],Ie=g[2],xe=g[3],Ee=g[4],be=g[5],we=g[6],de=g[7],Se=g[8],Ae=g[9],pe=g[10],Le=g[11],ke=g[12],ze=g[13],qe=g[14],je=g[15];u=E[0],$+=u*Pe,N+=u*$e,M+=u*Ie,B+=u*xe,q+=u*Ee,D+=u*be,L+=u*we,G+=u*de,z+=u*Se,U+=u*Ae,j+=u*pe,k+=u*Le,W+=u*ke,he+=u*ze,H+=u*qe,ae+=u*je,u=E[1],N+=u*Pe,M+=u*$e,B+=u*Ie,q+=u*xe,D+=u*Ee,L+=u*be,G+=u*we,z+=u*de,U+=u*Se,j+=u*Ae,k+=u*pe,W+=u*Le,he+=u*ke,H+=u*ze,ae+=u*qe,ee+=u*je,u=E[2],M+=u*Pe,B+=u*$e,q+=u*Ie,D+=u*xe,L+=u*Ee,G+=u*be,z+=u*we,U+=u*de,j+=u*Se,k+=u*Ae,W+=u*pe,he+=u*Le,H+=u*ke,ae+=u*ze,ee+=u*qe,ce+=u*je,u=E[3],B+=u*Pe,q+=u*$e,D+=u*Ie,L+=u*xe,G+=u*Ee,z+=u*be,U+=u*we,j+=u*de,k+=u*Se,W+=u*Ae,he+=u*pe,H+=u*Le,ae+=u*ke,ee+=u*ze,ce+=u*qe,R+=u*je,u=E[4],q+=u*Pe,D+=u*$e,L+=u*Ie,G+=u*xe,z+=u*Ee,U+=u*be,j+=u*we,k+=u*de,W+=u*Se,he+=u*Ae,H+=u*pe,ae+=u*Le,ee+=u*ke,ce+=u*ze,R+=u*qe,P+=u*je,u=E[5],D+=u*Pe,L+=u*$e,G+=u*Ie,z+=u*xe,U+=u*Ee,j+=u*be,k+=u*we,W+=u*de,he+=u*Se,H+=u*Ae,ae+=u*pe,ee+=u*Le,ce+=u*ke,R+=u*ze,P+=u*qe,A+=u*je,u=E[6],L+=u*Pe,G+=u*$e,z+=u*Ie,U+=u*xe,j+=u*Ee,k+=u*be,W+=u*we,he+=u*de,H+=u*Se,ae+=u*Ae,ee+=u*pe,ce+=u*Le,R+=u*ke,P+=u*ze,A+=u*qe,d+=u*je,u=E[7],G+=u*Pe,z+=u*$e,U+=u*Ie,j+=u*xe,k+=u*Ee,W+=u*be,he+=u*we,H+=u*de,ae+=u*Se,ee+=u*Ae,ce+=u*pe,R+=u*Le,P+=u*ke,A+=u*ze,d+=u*qe,C+=u*je,u=E[8],z+=u*Pe,U+=u*$e,j+=u*Ie,k+=u*xe,W+=u*Ee,he+=u*be,H+=u*we,ae+=u*de,ee+=u*Se,ce+=u*Ae,R+=u*pe,P+=u*Le,A+=u*ke,d+=u*ze,C+=u*qe,K+=u*je,u=E[9],U+=u*Pe,j+=u*$e,k+=u*Ie,W+=u*xe,he+=u*Ee,H+=u*be,ae+=u*we,ee+=u*de,ce+=u*Se,R+=u*Ae,P+=u*pe,A+=u*Le,d+=u*ke,C+=u*ze,K+=u*qe,Q+=u*je,u=E[10],j+=u*Pe,k+=u*$e,W+=u*Ie,he+=u*xe,H+=u*Ee,ae+=u*be,ee+=u*we,ce+=u*de,R+=u*Se,P+=u*Ae,A+=u*pe,d+=u*Le,C+=u*ke,K+=u*ze,Q+=u*qe,Ce+=u*je,u=E[11],k+=u*Pe,W+=u*$e,he+=u*Ie,H+=u*xe,ae+=u*Ee,ee+=u*be,ce+=u*we,R+=u*de,P+=u*Se,A+=u*Ae,d+=u*pe,C+=u*Le,K+=u*ke,Q+=u*ze,Ce+=u*qe,Re+=u*je,u=E[12],W+=u*Pe,he+=u*$e,H+=u*Ie,ae+=u*xe,ee+=u*Ee,ce+=u*be,R+=u*we,P+=u*de,A+=u*Se,d+=u*Ae,C+=u*pe,K+=u*Le,Q+=u*ke,Ce+=u*ze,Re+=u*qe,Oe+=u*je,u=E[13],he+=u*Pe,H+=u*$e,ae+=u*Ie,ee+=u*xe,ce+=u*Ee,R+=u*be,P+=u*we,A+=u*de,d+=u*Se,C+=u*Ae,K+=u*pe,Q+=u*Le,Ce+=u*ke,Re+=u*ze,Oe+=u*qe,Fe+=u*je,u=E[14],H+=u*Pe,ae+=u*$e,ee+=u*Ie,ce+=u*xe,R+=u*Ee,P+=u*be,A+=u*we,d+=u*de,C+=u*Se,K+=u*Ae,Q+=u*pe,Ce+=u*Le,Re+=u*ke,Oe+=u*ze,Fe+=u*qe,ot+=u*je,u=E[15],ae+=u*Pe,ee+=u*$e,ce+=u*Ie,R+=u*xe,P+=u*Ee,A+=u*be,d+=u*we,C+=u*de,K+=u*Se,Q+=u*Ae,Ce+=u*pe,Re+=u*Le,Oe+=u*ke,Fe+=u*ze,ot+=u*qe,et+=u*je,$+=38*ee,N+=38*ce,M+=38*R,B+=38*P,q+=38*A,D+=38*d,L+=38*C,G+=38*K,z+=38*Q,U+=38*Ce,j+=38*Re,k+=38*Oe,W+=38*Fe,he+=38*ot,H+=38*et,m=1,u=$+m+65535,m=Math.floor(u/65536),$=u-m*65536,u=N+m+65535,m=Math.floor(u/65536),N=u-m*65536,u=M+m+65535,m=Math.floor(u/65536),M=u-m*65536,u=B+m+65535,m=Math.floor(u/65536),B=u-m*65536,u=q+m+65535,m=Math.floor(u/65536),q=u-m*65536,u=D+m+65535,m=Math.floor(u/65536),D=u-m*65536,u=L+m+65535,m=Math.floor(u/65536),L=u-m*65536,u=G+m+65535,m=Math.floor(u/65536),G=u-m*65536,u=z+m+65535,m=Math.floor(u/65536),z=u-m*65536,u=U+m+65535,m=Math.floor(u/65536),U=u-m*65536,u=j+m+65535,m=Math.floor(u/65536),j=u-m*65536,u=k+m+65535,m=Math.floor(u/65536),k=u-m*65536,u=W+m+65535,m=Math.floor(u/65536),W=u-m*65536,u=he+m+65535,m=Math.floor(u/65536),he=u-m*65536,u=H+m+65535,m=Math.floor(u/65536),H=u-m*65536,u=ae+m+65535,m=Math.floor(u/65536),ae=u-m*65536,$+=m-1+37*(m-1),m=1,u=$+m+65535,m=Math.floor(u/65536),$=u-m*65536,u=N+m+65535,m=Math.floor(u/65536),N=u-m*65536,u=M+m+65535,m=Math.floor(u/65536),M=u-m*65536,u=B+m+65535,m=Math.floor(u/65536),B=u-m*65536,u=q+m+65535,m=Math.floor(u/65536),q=u-m*65536,u=D+m+65535,m=Math.floor(u/65536),D=u-m*65536,u=L+m+65535,m=Math.floor(u/65536),L=u-m*65536,u=G+m+65535,m=Math.floor(u/65536),G=u-m*65536,u=z+m+65535,m=Math.floor(u/65536),z=u-m*65536,u=U+m+65535,m=Math.floor(u/65536),U=u-m*65536,u=j+m+65535,m=Math.floor(u/65536),j=u-m*65536,u=k+m+65535,m=Math.floor(u/65536),k=u-m*65536,u=W+m+65535,m=Math.floor(u/65536),W=u-m*65536,u=he+m+65535,m=Math.floor(u/65536),he=u-m*65536,u=H+m+65535,m=Math.floor(u/65536),H=u-m*65536,u=ae+m+65535,m=Math.floor(u/65536),ae=u-m*65536,$+=m-1+37*(m-1),w[0]=$,w[1]=N,w[2]=M,w[3]=B,w[4]=q,w[5]=D,w[6]=L,w[7]=G,w[8]=z,w[9]=U,w[10]=j,w[11]=k,w[12]=W,w[13]=he,w[14]=H,w[15]=ae}function y(w,E){p(w,E,E)}function v(w,E){const g=n();for(let u=0;u<16;u++)g[u]=E[u];for(let u=253;u>=0;u--)y(g,g),u!==2&&u!==4&&p(g,g,E);for(let u=0;u<16;u++)w[u]=g[u]}function x(w,E){const g=new Uint8Array(32),u=new Float64Array(80),m=n(),$=n(),N=n(),M=n(),B=n(),q=n();for(let z=0;z<31;z++)g[z]=w[z];g[31]=w[31]&127|64,g[0]&=248,l(u,E);for(let z=0;z<16;z++)$[z]=u[z];m[0]=M[0]=1;for(let z=254;z>=0;--z){const U=g[z>>>3]>>>(z&7)&1;a(m,$,U),a(N,M,U),h(B,m,N),f(m,m,N),h(N,$,M),f($,$,M),y(M,B),y(q,m),p(m,N,m),p(N,$,B),h(B,m,N),f(m,m,N),y($,m),f(N,M,q),p(m,N,s),h(m,m,M),p(N,N,m),p(m,M,q),p(M,$,u),y($,B),a(m,$,U),a(N,M,U)}for(let z=0;z<16;z++)u[z+16]=m[z],u[z+32]=N[z],u[z+48]=$[z],u[z+64]=M[z];const D=u.subarray(32),L=u.subarray(16);v(D,D),p(L,L,D);const G=new Uint8Array(32);return c(G,L),G}t.scalarMult=x;function O(w){return x(w,i)}t.scalarMultBase=O;function I(w){if(w.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const E=new Uint8Array(w);return{publicKey:O(E),secretKey:E}}t.generateKeyPairFromSeed=I;function _(w){const E=(0,e.randomBytes)(32,w),g=I(E);return(0,r.wipe)(E),g}t.generateKeyPair=_;function S(w,E,g=!1){if(w.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(E.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const u=x(w,E);if(g){let m=0;for(let $=0;$<u.length;$++)m|=u[$];if(m===0)throw new Error("X25519: invalid shared key")}return u}t.sharedKey=S})(Da);var zu=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},cm=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),lm=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),um=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),hm=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),dm=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),fm=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,pm=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,qu=3,gm=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",fm]],Wu=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function mm(t){return t?Vu(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new dm:typeof navigator<"u"?Vu(navigator.userAgent):vm()}function ym(t){return t!==""&&gm.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function Vu(t){var e=ym(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new hm;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<qu&&(i=zu(zu([],i,!0),bm(qu-i.length),!0)):i=[];var s=i.join("."),o=wm(t),a=pm.exec(t);return a&&a[1]?new um(r,s,o,a[1]):new cm(r,s,o)}function wm(t){for(var e=0,r=Wu.length;e<r;e++){var n=Wu[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function vm(){var t=typeof process<"u"&&process.version;return t?new lm(process.version.slice(1)):null}function bm(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.getLocalStorage=Ve.getLocalStorageOrThrow=Ve.getCrypto=Ve.getCryptoOrThrow=Hu=Ve.getLocation=Ve.getLocationOrThrow=$a=Ve.getNavigator=Ve.getNavigatorOrThrow=Oa=Ve.getDocument=Ve.getDocumentOrThrow=Ve.getFromWindowOrThrow=Ve.getFromWindow=void 0;function _n(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Ve.getFromWindow=_n;function Kn(t){const e=_n(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Ve.getFromWindowOrThrow=Kn;function _m(){return Kn("document")}Ve.getDocumentOrThrow=_m;function Em(){return _n("document")}var Oa=Ve.getDocument=Em;function xm(){return Kn("navigator")}Ve.getNavigatorOrThrow=xm;function Sm(){return _n("navigator")}var $a=Ve.getNavigator=Sm;function Cm(){return Kn("location")}Ve.getLocationOrThrow=Cm;function Im(){return _n("location")}var Hu=Ve.getLocation=Im;function Dm(){return Kn("crypto")}Ve.getCryptoOrThrow=Dm;function Om(){return _n("crypto")}Ve.getCrypto=Om;function $m(){return Kn("localStorage")}Ve.getLocalStorageOrThrow=$m;function Am(){return _n("localStorage")}Ve.getLocalStorage=Am;var Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});var Ku=Aa.getWindowMetadata=void 0;const Zu=Ve;function Tm(){let t,e;try{t=Zu.getDocumentOrThrow(),e=Zu.getLocationOrThrow()}catch{return null}function r(){const f=t.getElementsByTagName("link"),p=[];for(let y=0;y<f.length;y++){const v=f[y],x=v.getAttribute("rel");if(x&&x.toLowerCase().indexOf("icon")>-1){const O=v.getAttribute("href");if(O)if(O.toLowerCase().indexOf("https:")===-1&&O.toLowerCase().indexOf("http:")===-1&&O.indexOf("//")!==0){let I=e.protocol+"//"+e.host;if(O.indexOf("/")===0)I+=O;else{const _=e.pathname.split("/");_.pop();const S=_.join("/");I+=S+"/"+O}p.push(I)}else if(O.indexOf("//")===0){const I=e.protocol+O;p.push(I)}else p.push(O)}}return p}function n(...f){const p=t.getElementsByTagName("meta");for(let y=0;y<p.length;y++){const v=p[y],x=["itemprop","property","name"].map(O=>v.getAttribute(O)).filter(O=>O?f.includes(O):!1);if(x.length&&x){const O=v.getAttribute("content");if(O)return O}}return""}function i(){let f=n("name","og:site_name","og:title","twitter:title");return f||(f=t.title),f}function s(){return n("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=e.origin,l=r();return{description:a,url:c,icons:l,name:o}}Ku=Aa.getWindowMetadata=Tm;var ki={},Nm=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Gu="%[a-f0-9]{2}",Yu=new RegExp("("+Gu+")|([^%]+?)","gi"),Ju=new RegExp("("+Gu+")+","gi");function Ta(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],Ta(r),Ta(n))}function Pm(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(Yu)||[],r=1;r<e.length;r++)t=Ta(e,r).join(""),e=t.match(Yu)||[];return t}}function Rm(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=Ju.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=Pm(r[0]);n!==r[0]&&(e[r[0]]=n)}r=Ju.exec(t)}e["%C2"]="�";for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];t=t.replace(new RegExp(o,"g"),e[o])}return t}var Lm=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return Rm(t)}},Mm=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},km=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var o=n[s],a=t[o];(i?e.indexOf(o)!==-1:e(o,a,t))&&(r[o]=a)}return r};(function(t){const e=Nm,r=Lm,n=Mm,i=km,s=_=>_==null,o=Symbol("encodeFragmentIdentifier");function a(_){switch(_.arrayFormat){case"index":return S=>(w,E)=>{const g=w.length;return E===void 0||_.skipNull&&E===null||_.skipEmptyString&&E===""?w:E===null?[...w,[h(S,_),"[",g,"]"].join("")]:[...w,[h(S,_),"[",h(g,_),"]=",h(E,_)].join("")]};case"bracket":return S=>(w,E)=>E===void 0||_.skipNull&&E===null||_.skipEmptyString&&E===""?w:E===null?[...w,[h(S,_),"[]"].join("")]:[...w,[h(S,_),"[]=",h(E,_)].join("")];case"colon-list-separator":return S=>(w,E)=>E===void 0||_.skipNull&&E===null||_.skipEmptyString&&E===""?w:E===null?[...w,[h(S,_),":list="].join("")]:[...w,[h(S,_),":list=",h(E,_)].join("")];case"comma":case"separator":case"bracket-separator":{const S=_.arrayFormat==="bracket-separator"?"[]=":"=";return w=>(E,g)=>g===void 0||_.skipNull&&g===null||_.skipEmptyString&&g===""?E:(g=g===null?"":g,E.length===0?[[h(w,_),S,h(g,_)].join("")]:[[E,h(g,_)].join(_.arrayFormatSeparator)])}default:return S=>(w,E)=>E===void 0||_.skipNull&&E===null||_.skipEmptyString&&E===""?w:E===null?[...w,h(S,_)]:[...w,[h(S,_),"=",h(E,_)].join("")]}}function c(_){let S;switch(_.arrayFormat){case"index":return(w,E,g)=>{if(S=/\[(\d*)\]$/.exec(w),w=w.replace(/\[\d*\]$/,""),!S){g[w]=E;return}g[w]===void 0&&(g[w]={}),g[w][S[1]]=E};case"bracket":return(w,E,g)=>{if(S=/(\[\])$/.exec(w),w=w.replace(/\[\]$/,""),!S){g[w]=E;return}if(g[w]===void 0){g[w]=[E];return}g[w]=[].concat(g[w],E)};case"colon-list-separator":return(w,E,g)=>{if(S=/(:list)$/.exec(w),w=w.replace(/:list$/,""),!S){g[w]=E;return}if(g[w]===void 0){g[w]=[E];return}g[w]=[].concat(g[w],E)};case"comma":case"separator":return(w,E,g)=>{const u=typeof E=="string"&&E.includes(_.arrayFormatSeparator),m=typeof E=="string"&&!u&&f(E,_).includes(_.arrayFormatSeparator);E=m?f(E,_):E;const $=u||m?E.split(_.arrayFormatSeparator).map(N=>f(N,_)):E===null?E:f(E,_);g[w]=$};case"bracket-separator":return(w,E,g)=>{const u=/(\[\])$/.test(w);if(w=w.replace(/\[\]$/,""),!u){g[w]=E&&f(E,_);return}const m=E===null?[]:E.split(_.arrayFormatSeparator).map($=>f($,_));if(g[w]===void 0){g[w]=m;return}g[w]=[].concat(g[w],m)};default:return(w,E,g)=>{if(g[w]===void 0){g[w]=E;return}g[w]=[].concat(g[w],E)}}}function l(_){if(typeof _!="string"||_.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function h(_,S){return S.encode?S.strict?e(_):encodeURIComponent(_):_}function f(_,S){return S.decode?r(_):_}function p(_){return Array.isArray(_)?_.sort():typeof _=="object"?p(Object.keys(_)).sort((S,w)=>Number(S)-Number(w)).map(S=>_[S]):_}function y(_){const S=_.indexOf("#");return S!==-1&&(_=_.slice(0,S)),_}function v(_){let S="";const w=_.indexOf("#");return w!==-1&&(S=_.slice(w)),S}function x(_){_=y(_);const S=_.indexOf("?");return S===-1?"":_.slice(S+1)}function O(_,S){return S.parseNumbers&&!Number.isNaN(Number(_))&&typeof _=="string"&&_.trim()!==""?_=Number(_):S.parseBooleans&&_!==null&&(_.toLowerCase()==="true"||_.toLowerCase()==="false")&&(_=_.toLowerCase()==="true"),_}function I(_,S){S=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},S),l(S.arrayFormatSeparator);const w=c(S),E=Object.create(null);if(typeof _!="string"||(_=_.trim().replace(/^[?#&]/,""),!_))return E;for(const g of _.split("&")){if(g==="")continue;let[u,m]=n(S.decode?g.replace(/\+/g," "):g,"=");m=m===void 0?null:["comma","separator","bracket-separator"].includes(S.arrayFormat)?m:f(m,S),w(f(u,S),m,E)}for(const g of Object.keys(E)){const u=E[g];if(typeof u=="object"&&u!==null)for(const m of Object.keys(u))u[m]=O(u[m],S);else E[g]=O(u,S)}return S.sort===!1?E:(S.sort===!0?Object.keys(E).sort():Object.keys(E).sort(S.sort)).reduce((g,u)=>{const m=E[u];return m&&typeof m=="object"&&!Array.isArray(m)?g[u]=p(m):g[u]=m,g},Object.create(null))}t.extract=x,t.parse=I,t.stringify=(_,S)=>{if(!_)return"";S=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},S),l(S.arrayFormatSeparator);const w=m=>S.skipNull&&s(_[m])||S.skipEmptyString&&_[m]==="",E=a(S),g={};for(const m of Object.keys(_))w(m)||(g[m]=_[m]);const u=Object.keys(g);return S.sort!==!1&&u.sort(S.sort),u.map(m=>{const $=_[m];return $===void 0?"":$===null?h(m,S):Array.isArray($)?$.length===0&&S.arrayFormat==="bracket-separator"?h(m,S)+"[]":$.reduce(E(m),[]).join("&"):h(m,S)+"="+h($,S)}).filter(m=>m.length>0).join("&")},t.parseUrl=(_,S)=>{S=Object.assign({decode:!0},S);const[w,E]=n(_,"#");return Object.assign({url:w.split("?")[0]||"",query:I(x(_),S)},S&&S.parseFragmentIdentifier&&E?{fragmentIdentifier:f(E,S)}:{})},t.stringifyUrl=(_,S)=>{S=Object.assign({encode:!0,strict:!0,[o]:!0},S);const w=y(_.url).split("?")[0]||"",E=t.extract(_.url),g=t.parse(E,{sort:!1}),u=Object.assign(g,_.query);let m=t.stringify(u,S);m&&(m=`?${m}`);let $=v(_.url);return _.fragmentIdentifier&&($=`#${S[o]?h(_.fragmentIdentifier,S):_.fragmentIdentifier}`),`${w}${m}${$}`},t.pick=(_,S,w)=>{w=Object.assign({parseFragmentIdentifier:!0,[o]:!1},w);const{url:E,query:g,fragmentIdentifier:u}=t.parseUrl(_,w);return t.stringifyUrl({url:E,query:i(g,S),fragmentIdentifier:u},w)},t.exclude=(_,S,w)=>{const E=Array.isArray(S)?g=>!S.includes(g):(g,u)=>!S(g,u);return t.pick(_,E,w)}})(ki);const Um={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function Qu(t,e){return t.includes(":")?[t]:e.chains||[]}const Xu="base10",Ut="base16",Na="base64pad",Pa="utf8",eh=0,En=1,Fm=0,th=1,Ra=12,La=32;function jm(){const t=Da.generateKeyPair();return{privateKey:kt(t.secretKey,Ut),publicKey:kt(t.publicKey,Ut)}}function Ma(){const t=Hn.randomBytes(La);return kt(t,Ut)}function Bm(t,e){const r=Da.sharedKey(Ht(t,Ut),Ht(e,Ut),!0),n=new am(Zs.SHA256,r).expand(La);return kt(n,Ut)}function zm(t){const e=Zs.hash(Ht(t,Ut));return kt(e,Ut)}function Zn(t){const e=Zs.hash(Ht(t,Pa));return kt(e,Ut)}function qm(t){return Ht(`${t}`,Xu)}function Ui(t){return Number(kt(t,Xu))}function Wm(t){const e=qm(typeof t.type<"u"?t.type:eh);if(Ui(e)===En&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Ht(t.senderPublicKey,Ut):void 0,n=typeof t.iv<"u"?Ht(t.iv,Ut):Hn.randomBytes(Ra),i=new Sa.ChaCha20Poly1305(Ht(t.symKey,Ut)).seal(n,Ht(t.message,Pa));return Hm({type:e,sealed:i,iv:n,senderPublicKey:r})}function Vm(t){const e=new Sa.ChaCha20Poly1305(Ht(t.symKey,Ut)),{sealed:r,iv:n}=Gs(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return kt(i,Pa)}function Hm(t){if(Ui(t.type)===En){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return kt(Ea([t.type,t.senderPublicKey,t.iv,t.sealed]),Na)}return kt(Ea([t.type,t.iv,t.sealed]),Na)}function Gs(t){const e=Ht(t,Na),r=e.slice(Fm,th),n=th;if(Ui(r)===En){const a=n+La,c=a+Ra,l=e.slice(n,a),h=e.slice(a,c),f=e.slice(c);return{type:r,sealed:f,iv:h,senderPublicKey:l}}const i=n+Ra,s=e.slice(n,i),o=e.slice(i);return{type:r,sealed:o,iv:s}}function Km(t,e){const r=Gs(t);return rh({type:Ui(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?kt(r.senderPublicKey,Ut):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function rh(t){const e=(t==null?void 0:t.type)||eh;if(e===En){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function nh(t){return t.type===En&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var Zm=Object.defineProperty,ih=Object.getOwnPropertySymbols,Gm=Object.prototype.hasOwnProperty,Ym=Object.prototype.propertyIsEnumerable,sh=(t,e,r)=>e in t?Zm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,oh=(t,e)=>{for(var r in e||(e={}))Gm.call(e,r)&&sh(t,r,e[r]);if(ih)for(var r of ih(e))Ym.call(e,r)&&sh(t,r,e[r]);return t};const Jm="ReactNative",Jt={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Qm="js";function ka(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Gn(){return!Oa()&&!!$a()&&navigator.product===Jm}function Yn(){return!ka()&&!!$a()&&!!Oa()}function Fi(){return Gn()?Jt.reactNative:ka()?Jt.node:Yn()?Jt.browser:Jt.unknown}function Xm(){var t;try{return Gn()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function ey(t,e){let r=ki.parse(t);return r=oh(oh({},r),e),t=ki.stringify(r),t}function ty(){return Ku()||{name:"",description:"",url:"",icons:[""]}}function ry(){if(Fi()===Jt.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=mm();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function ny(){var t;const e=Fi();return e===Jt.browser?[e,((t=Hu())==null?void 0:t.host)||"unknown"].join(":"):e}function iy(t,e,r){const n=ry(),i=ny();return[[t,e].join("-"),[Qm,r].join("-"),n,i].join("/")}function sy({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a}){const c=r.split("?"),l=iy(t,e,n),h={auth:i,ua:l,projectId:s,useOnCloseEvent:o||void 0,origin:a||void 0},f=ey(c[1]||"",h);return c[0]+"?"+f}function xn(t,e){return t.filter(r=>e.includes(r)).length===t.length}function ah(t){return Object.fromEntries(t.entries())}function ch(t){return new Map(Object.entries(t))}function Jn(t=ne.FIVE_MINUTES,e){const r=ne.toMiliseconds(t||ne.FIVE_MINUTES);let n,i,s;return{resolve:o=>{s&&n&&(clearTimeout(s),n(o))},reject:o=>{s&&i&&(clearTimeout(s),i(o))},done:()=>new Promise((o,a)=>{s=setTimeout(()=>{a(new Error(e))},r),n=o,i=a})}}function ji(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function lh(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function oy(t){return lh("topic",t)}function ay(t){return lh("id",t)}function uh(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Qt(t,e){return ne.fromMiliseconds((e||Date.now())+ne.toMiliseconds(t))}function Hr(t){return Date.now()>=ne.toMiliseconds(t)}function st(t,e){return`${t}${e?`:${e}`:""}`}async function cy({id:t,topic:e,wcDeepLink:r}){try{if(!r)return;const n=typeof r=="string"?JSON.parse(r):r;let i=n==null?void 0:n.href;if(typeof i!="string")return;i.endsWith("/")&&(i=i.slice(0,-1));const s=`${i}/wc?requestId=${t}&sessionTopic=${e}`,o=Fi();o===Jt.browser?s.startsWith("https://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):o===Jt.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(n){console.error(n)}}async function ly(t,e){try{return await t.getItem(e)||(Yn()?localStorage.getItem(e):void 0)}catch(r){console.error(r)}}const uy="irn";function Ua(t){return(t==null?void 0:t.relay)||{protocol:uy}}function Ys(t){const e=Um[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var hy=Object.defineProperty,dy=Object.defineProperties,fy=Object.getOwnPropertyDescriptors,hh=Object.getOwnPropertySymbols,py=Object.prototype.hasOwnProperty,gy=Object.prototype.propertyIsEnumerable,dh=(t,e,r)=>e in t?hy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,my=(t,e)=>{for(var r in e||(e={}))py.call(e,r)&&dh(t,r,e[r]);if(hh)for(var r of hh(e))gy.call(e,r)&&dh(t,r,e[r]);return t},yy=(t,e)=>dy(t,fy(e));function wy(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function fh(t){t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=ki.parse(s);return{protocol:n,topic:vy(i[0]),version:parseInt(i[1],10),symKey:o.symKey,relay:wy(o),expiryTimestamp:o.expiryTimestamp?parseInt(o.expiryTimestamp,10):void 0}}function vy(t){return t.startsWith("//")?t.substring(2):t}function by(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=r+e+i;t[i]&&(n[s]=t[i])}),n}function _y(t){return`${t.protocol}:${t.topic}@${t.version}?`+ki.stringify(yy(my({symKey:t.symKey},by(t.relay)),{expiryTimestamp:t.expiryTimestamp}))}function Qn(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function Ey(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Qn(r.accounts))}),e}function xy(t,e){const r=[];return Object.values(t).forEach(n=>{Qn(n.accounts).includes(e)&&r.push(...n.methods)}),r}function Sy(t,e){const r=[];return Object.values(t).forEach(n=>{Qn(n.accounts).includes(e)&&r.push(...n.events)}),r}const Cy={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Iy={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Z(t,e){const{message:r,code:n}=Iy[t];return{message:e?`${r} ${e}`:r,code:n}}function Ye(t,e){const{message:r,code:n}=Cy[t];return{message:e?`${r} ${e}`:r,code:n}}function Bi(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Js(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Ft(t){return typeof t>"u"}function mt(t,e){return e&&Ft(t)?!0:typeof t=="string"&&!!t.trim().length}function Fa(t,e){return e&&Ft(t)?!0:typeof t=="number"&&!isNaN(t)}function Dy(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return xn(i,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],h=Qn(a),f=r[o];(!xn(Qu(o,f),h)||!xn(f.methods,c)||!xn(f.events,l))&&(s=!1)}),s):!1}function Qs(t){return mt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Oy(t){if(mt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Qs(r)}}return!1}function $y(t){if(mt(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function Ay(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function Ty(t){return t==null?void 0:t.topic}function Ny(t,e){let r=null;return mt(t==null?void 0:t.publicKey,!1)||(r=Z("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function ph(t){let e=!0;return Bi(t)?t.length&&(e=t.every(r=>mt(r,!1))):e=!1,e}function Py(t,e,r){let n=null;return Bi(e)&&e.length?e.forEach(i=>{n||Qs(i)||(n=Ye("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Qs(t)||(n=Ye("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function Ry(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=Py(i,Qu(i,s),`${e} ${r}`);o&&(n=o)}),n}function Ly(t,e){let r=null;return Bi(t)?t.forEach(n=>{r||Oy(n)||(r=Ye("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=Ye("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function My(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Ly(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function ky(t,e){let r=null;return ph(t==null?void 0:t.methods)?ph(t==null?void 0:t.events)||(r=Ye("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Ye("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function gh(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=ky(n,`${e}, namespace`);i&&(r=i)}),r}function Uy(t,e,r){let n=null;if(t&&Js(t)){const i=gh(t,e);i&&(n=i);const s=Ry(t,e,r);s&&(n=s)}else n=Z("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function ja(t,e){let r=null;if(t&&Js(t)){const n=gh(t,e);n&&(r=n);const i=My(t,e);i&&(r=i)}else r=Z("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function mh(t){return mt(t.protocol,!0)}function Fy(t,e){let r=!1;return e&&!t?r=!0:t&&Bi(t)&&t.length&&t.forEach(n=>{r=mh(n)}),r}function jy(t){return typeof t=="number"}function Kt(t){return typeof t<"u"&&typeof t!==null}function By(t){return!(!t||typeof t!="object"||!t.code||!Fa(t.code,!1)||!t.message||!mt(t.message,!1))}function zy(t){return!(Ft(t)||!mt(t.method,!1))}function qy(t){return!(Ft(t)||Ft(t.result)&&Ft(t.error)||!Fa(t.id,!1)||!mt(t.jsonrpc,!1))}function Wy(t){return!(Ft(t)||!mt(t.name,!1))}function yh(t,e){return!(!Qs(e)||!Ey(t).includes(e))}function Vy(t,e,r){return mt(r,!1)?xy(t,e).includes(r):!1}function Hy(t,e,r){return mt(r,!1)?Sy(t,e).includes(r):!1}function wh(t,e,r){let n=null;const i=Ky(t),s=Zy(e),o=Object.keys(i),a=Object.keys(s),c=vh(Object.keys(t)),l=vh(Object.keys(e)),h=c.filter(f=>!l.includes(f));return h.length&&(n=Z("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${h.toString()}
      Received: ${Object.keys(e).toString()}`)),xn(o,a)||(n=Z("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(f=>{if(!f.includes(":")||n)return;const p=Qn(e[f].accounts);p.includes(f)||(n=Z("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${f}
        Required: ${f}
        Approved: ${p.toString()}`))}),o.forEach(f=>{n||(xn(i[f].methods,s[f].methods)?xn(i[f].events,s[f].events)||(n=Z("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${f}`)):n=Z("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${f}`))}),n}function Ky(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function vh(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Zy(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=Qn(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function Gy(t,e){return Fa(t,!1)&&t<=e.max&&t>=e.min}function bh(){const t=Fi();return new Promise(e=>{switch(t){case Jt.browser:e(Yy());break;case Jt.reactNative:e(Jy());break;case Jt.node:e(Qy());break;default:e(!0)}})}function Yy(){return Yn()&&(navigator==null?void 0:navigator.onLine)}async function Jy(){if(Gn()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function Qy(){return!0}function Xy(t){switch(Fi()){case Jt.browser:ew(t);break;case Jt.reactNative:tw(t);break}}function ew(t){!Gn()&&Yn()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function tw(t){Gn()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const Ba={};let Xs=class{static get(e){return Ba[e]}static set(e,r){Ba[e]=r}static delete(e){delete Ba[e]}};const rw="PARSE_ERROR",nw="INVALID_REQUEST",iw="METHOD_NOT_FOUND",sw="INVALID_PARAMS",_h="INTERNAL_ERROR",za="SERVER_ERROR",ow=[-32700,-32600,-32601,-32602,-32603],zi={[rw]:{code:-32700,message:"Parse error"},[nw]:{code:-32600,message:"Invalid Request"},[iw]:{code:-32601,message:"Method not found"},[sw]:{code:-32602,message:"Invalid params"},[_h]:{code:-32603,message:"Internal error"},[za]:{code:-32e3,message:"Server error"}},Eh=za;function aw(t){return ow.includes(t)}function xh(t){return Object.keys(zi).includes(t)?zi[t]:zi[Eh]}function cw(t){const e=Object.values(zi).find(r=>r.code===t);return e||zi[Eh]}function lw(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var Sh={},Or={},Ch;function uw(){if(Ch)return Or;Ch=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.isBrowserCryptoAvailable=Or.getSubtleCrypto=Or.getBrowerCrypto=void 0;function t(){return(vr==null?void 0:vr.crypto)||(vr==null?void 0:vr.msCrypto)||{}}Or.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}Or.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return Or.isBrowserCryptoAvailable=r,Or}var $r={},Ih;function hw(){if(Ih)return $r;Ih=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.isBrowser=$r.isNode=$r.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}$r.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}$r.isNode=e;function r(){return!t()&&!e()}return $r.isBrowser=r,$r}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=br;e.__exportStar(uw(),t),e.__exportStar(hw(),t)})(Sh);function qa(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Dh(t=6){return BigInt(qa(t))}function Xn(t,e,r){return{id:r||qa(),jsonrpc:"2.0",method:t,params:e}}function Wa(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Va(t,e,r){return{id:t,jsonrpc:"2.0",error:dw(e,r)}}function dw(t,e){return typeof t>"u"?xh(_h):(typeof t=="string"&&(t=Object.assign(Object.assign({},xh(za)),{message:t})),typeof e<"u"&&(t.data=e),aw(t.code)&&(t=cw(t.code)),t)}class fw{}class pw extends fw{constructor(){super()}}class gw extends pw{constructor(e){super()}}const mw="^wss?:";function yw(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function ww(t,e){const r=yw(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function Oh(t){return ww(t,mw)}function vw(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function $h(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Ha(t){return $h(t)&&"method"in t}function eo(t){return $h(t)&&(Ar(t)||cr(t))}function Ar(t){return"result"in t}function cr(t){return"error"in t}class bw extends gw{constructor(e){super(e),this.events=new ar.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Xn(e.method,e.params||[],e.id||Dh().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{cr(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),eo(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const _w=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Ew=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Ah=t=>t.split("?")[0],Th=10,xw=_w();let Sw=class{constructor(e){if(this.url=e,this.events=new ar.EventEmitter,this.registering=!1,!Oh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send($i(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!Oh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=new URLSearchParams(e).get("origin"),s=Sh.isReactNative()?{headers:{origin:i}}:{rejectUnauthorized:!vw(e)},o=new xw(e,[],s);Ew()?o.onerror=a=>{const c=a;n(this.emitError(c.error))}:o.on("error",a=>{n(this.emitError(a))}),o.onopen=()=>{this.onOpen(o),r(o)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Us(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=Va(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return lw(e,Ah(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Th&&this.events.setMaxListeners(Th)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Ah(this.url)}`));return this.events.emit("register_error",r),r}};var to={exports:{}};to.exports,function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",h="[object Boolean]",f="[object Date]",p="[object Error]",y="[object Function]",v="[object GeneratorFunction]",x="[object Map]",O="[object Number]",I="[object Null]",_="[object Object]",S="[object Promise]",w="[object Proxy]",E="[object RegExp]",g="[object Set]",u="[object String]",m="[object Symbol]",$="[object Undefined]",N="[object WeakMap]",M="[object ArrayBuffer]",B="[object DataView]",q="[object Float32Array]",D="[object Float64Array]",L="[object Int8Array]",G="[object Int16Array]",z="[object Int32Array]",U="[object Uint8Array]",j="[object Uint8ClampedArray]",k="[object Uint16Array]",W="[object Uint32Array]",he=/[\\^$.*+?()[\]{}|]/g,H=/^\[object .+?Constructor\]$/,ae=/^(?:0|[1-9]\d*)$/,ee={};ee[q]=ee[D]=ee[L]=ee[G]=ee[z]=ee[U]=ee[j]=ee[k]=ee[W]=!0,ee[a]=ee[c]=ee[M]=ee[h]=ee[B]=ee[f]=ee[p]=ee[y]=ee[x]=ee[O]=ee[_]=ee[E]=ee[g]=ee[u]=ee[N]=!1;var ce=typeof vr=="object"&&vr&&vr.Object===Object&&vr,R=typeof self=="object"&&self&&self.Object===Object&&self,P=ce||R||Function("return this")(),A=e&&!e.nodeType&&e,d=A&&!0&&t&&!t.nodeType&&t,C=d&&d.exports===A,K=C&&ce.process,Q=function(){try{return K&&K.binding&&K.binding("util")}catch{}}(),Ce=Q&&Q.isTypedArray;function Re(b,T){for(var F=-1,te=b==null?0:b.length,He=0,ye=[];++F<te;){var nt=b[F];T(nt,F,b)&&(ye[He++]=nt)}return ye}function Oe(b,T){for(var F=-1,te=T.length,He=b.length;++F<te;)b[He+F]=T[F];return b}function Fe(b,T){for(var F=-1,te=b==null?0:b.length;++F<te;)if(T(b[F],F,b))return!0;return!1}function ot(b,T){for(var F=-1,te=Array(b);++F<b;)te[F]=T(F);return te}function et(b){return function(T){return b(T)}}function Pe(b,T){return b.has(T)}function $e(b,T){return b==null?void 0:b[T]}function Ie(b){var T=-1,F=Array(b.size);return b.forEach(function(te,He){F[++T]=[He,te]}),F}function xe(b,T){return function(F){return b(T(F))}}function Ee(b){var T=-1,F=Array(b.size);return b.forEach(function(te){F[++T]=te}),F}var be=Array.prototype,we=Function.prototype,de=Object.prototype,Se=P["__core-js_shared__"],Ae=we.toString,pe=de.hasOwnProperty,Le=function(){var b=/[^.]+$/.exec(Se&&Se.keys&&Se.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}(),ke=de.toString,ze=RegExp("^"+Ae.call(pe).replace(he,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qe=C?P.Buffer:void 0,je=P.Symbol,gr=P.Uint8Array,Dr=de.propertyIsEnumerable,an=be.splice,tr=je?je.toStringTag:void 0,Un=Object.getOwnPropertySymbols,Ss=qe?qe.isBuffer:void 0,zo=xe(Object.keys,Object),at=Ci(P,"DataView"),tt=Ci(P,"Map"),ct=Ci(P,"Promise"),lt=Ci(P,"Set"),ut=Ci(P,"WeakMap"),rt=Ci(Object,"create"),wt=jn(at),vt=jn(tt),bt=jn(ct),_t=jn(lt),Et=jn(ut),ft=je?je.prototype:void 0,ht=ft?ft.valueOf:void 0;function Ze(b){var T=-1,F=b==null?0:b.length;for(this.clear();++T<F;){var te=b[T];this.set(te[0],te[1])}}function xt(){this.__data__=rt?rt(null):{},this.size=0}function St(b){var T=this.has(b)&&delete this.__data__[b];return this.size-=T?1:0,T}function n4(b){var T=this.__data__;if(rt){var F=T[b];return F===n?void 0:F}return pe.call(T,b)?T[b]:void 0}function i4(b){var T=this.__data__;return rt?T[b]!==void 0:pe.call(T,b)}function s4(b,T){var F=this.__data__;return this.size+=this.has(b)?0:1,F[b]=rt&&T===void 0?n:T,this}Ze.prototype.clear=xt,Ze.prototype.delete=St,Ze.prototype.get=n4,Ze.prototype.has=i4,Ze.prototype.set=s4;function Fr(b){var T=-1,F=b==null?0:b.length;for(this.clear();++T<F;){var te=b[T];this.set(te[0],te[1])}}function o4(){this.__data__=[],this.size=0}function a4(b){var T=this.__data__,F=Wo(T,b);if(F<0)return!1;var te=T.length-1;return F==te?T.pop():an.call(T,F,1),--this.size,!0}function c4(b){var T=this.__data__,F=Wo(T,b);return F<0?void 0:T[F][1]}function l4(b){return Wo(this.__data__,b)>-1}function u4(b,T){var F=this.__data__,te=Wo(F,b);return te<0?(++this.size,F.push([b,T])):F[te][1]=T,this}Fr.prototype.clear=o4,Fr.prototype.delete=a4,Fr.prototype.get=c4,Fr.prototype.has=l4,Fr.prototype.set=u4;function Fn(b){var T=-1,F=b==null?0:b.length;for(this.clear();++T<F;){var te=b[T];this.set(te[0],te[1])}}function h4(){this.size=0,this.__data__={hash:new Ze,map:new(tt||Fr),string:new Ze}}function d4(b){var T=Vo(this,b).delete(b);return this.size-=T?1:0,T}function f4(b){return Vo(this,b).get(b)}function p4(b){return Vo(this,b).has(b)}function g4(b,T){var F=Vo(this,b),te=F.size;return F.set(b,T),this.size+=F.size==te?0:1,this}Fn.prototype.clear=h4,Fn.prototype.delete=d4,Fn.prototype.get=f4,Fn.prototype.has=p4,Fn.prototype.set=g4;function qo(b){var T=-1,F=b==null?0:b.length;for(this.__data__=new Fn;++T<F;)this.add(b[T])}function m4(b){return this.__data__.set(b,n),this}function y4(b){return this.__data__.has(b)}qo.prototype.add=qo.prototype.push=m4,qo.prototype.has=y4;function cn(b){var T=this.__data__=new Fr(b);this.size=T.size}function w4(){this.__data__=new Fr,this.size=0}function v4(b){var T=this.__data__,F=T.delete(b);return this.size=T.size,F}function b4(b){return this.__data__.get(b)}function _4(b){return this.__data__.has(b)}function E4(b,T){var F=this.__data__;if(F instanceof Fr){var te=F.__data__;if(!tt||te.length<r-1)return te.push([b,T]),this.size=++F.size,this;F=this.__data__=new Fn(te)}return F.set(b,T),this.size=F.size,this}cn.prototype.clear=w4,cn.prototype.delete=v4,cn.prototype.get=b4,cn.prototype.has=_4,cn.prototype.set=E4;function x4(b,T){var F=Ho(b),te=!F&&U4(b),He=!F&&!te&&vl(b),ye=!F&&!te&&!He&&u0(b),nt=F||te||He||ye,Ct=nt?ot(b.length,String):[],Ot=Ct.length;for(var Qe in b)(T||pe.call(b,Qe))&&!(nt&&(Qe=="length"||He&&(Qe=="offset"||Qe=="parent")||ye&&(Qe=="buffer"||Qe=="byteLength"||Qe=="byteOffset")||P4(Qe,Ot)))&&Ct.push(Qe);return Ct}function Wo(b,T){for(var F=b.length;F--;)if(o0(b[F][0],T))return F;return-1}function S4(b,T,F){var te=T(b);return Ho(b)?te:Oe(te,F(b))}function Cs(b){return b==null?b===void 0?$:I:tr&&tr in Object(b)?T4(b):k4(b)}function r0(b){return Is(b)&&Cs(b)==a}function n0(b,T,F,te,He){return b===T?!0:b==null||T==null||!Is(b)&&!Is(T)?b!==b&&T!==T:C4(b,T,F,te,n0,He)}function C4(b,T,F,te,He,ye){var nt=Ho(b),Ct=Ho(T),Ot=nt?c:ln(b),Qe=Ct?c:ln(T);Ot=Ot==a?_:Ot,Qe=Qe==a?_:Qe;var rr=Ot==_,mr=Qe==_,Lt=Ot==Qe;if(Lt&&vl(b)){if(!vl(T))return!1;nt=!0,rr=!1}if(Lt&&!rr)return ye||(ye=new cn),nt||u0(b)?i0(b,T,F,te,He,ye):$4(b,T,Ot,F,te,He,ye);if(!(F&i)){var sr=rr&&pe.call(b,"__wrapped__"),or=mr&&pe.call(T,"__wrapped__");if(sr||or){var un=sr?b.value():b,jr=or?T.value():T;return ye||(ye=new cn),He(un,jr,F,te,ye)}}return Lt?(ye||(ye=new cn),A4(b,T,F,te,He,ye)):!1}function I4(b){if(!l0(b)||L4(b))return!1;var T=a0(b)?ze:H;return T.test(jn(b))}function D4(b){return Is(b)&&c0(b.length)&&!!ee[Cs(b)]}function O4(b){if(!M4(b))return zo(b);var T=[];for(var F in Object(b))pe.call(b,F)&&F!="constructor"&&T.push(F);return T}function i0(b,T,F,te,He,ye){var nt=F&i,Ct=b.length,Ot=T.length;if(Ct!=Ot&&!(nt&&Ot>Ct))return!1;var Qe=ye.get(b);if(Qe&&ye.get(T))return Qe==T;var rr=-1,mr=!0,Lt=F&s?new qo:void 0;for(ye.set(b,T),ye.set(T,b);++rr<Ct;){var sr=b[rr],or=T[rr];if(te)var un=nt?te(or,sr,rr,T,b,ye):te(sr,or,rr,b,T,ye);if(un!==void 0){if(un)continue;mr=!1;break}if(Lt){if(!Fe(T,function(jr,Bn){if(!Pe(Lt,Bn)&&(sr===jr||He(sr,jr,F,te,ye)))return Lt.push(Bn)})){mr=!1;break}}else if(!(sr===or||He(sr,or,F,te,ye))){mr=!1;break}}return ye.delete(b),ye.delete(T),mr}function $4(b,T,F,te,He,ye,nt){switch(F){case B:if(b.byteLength!=T.byteLength||b.byteOffset!=T.byteOffset)return!1;b=b.buffer,T=T.buffer;case M:return!(b.byteLength!=T.byteLength||!ye(new gr(b),new gr(T)));case h:case f:case O:return o0(+b,+T);case p:return b.name==T.name&&b.message==T.message;case E:case u:return b==T+"";case x:var Ct=Ie;case g:var Ot=te&i;if(Ct||(Ct=Ee),b.size!=T.size&&!Ot)return!1;var Qe=nt.get(b);if(Qe)return Qe==T;te|=s,nt.set(b,T);var rr=i0(Ct(b),Ct(T),te,He,ye,nt);return nt.delete(b),rr;case m:if(ht)return ht.call(b)==ht.call(T)}return!1}function A4(b,T,F,te,He,ye){var nt=F&i,Ct=s0(b),Ot=Ct.length,Qe=s0(T),rr=Qe.length;if(Ot!=rr&&!nt)return!1;for(var mr=Ot;mr--;){var Lt=Ct[mr];if(!(nt?Lt in T:pe.call(T,Lt)))return!1}var sr=ye.get(b);if(sr&&ye.get(T))return sr==T;var or=!0;ye.set(b,T),ye.set(T,b);for(var un=nt;++mr<Ot;){Lt=Ct[mr];var jr=b[Lt],Bn=T[Lt];if(te)var h0=nt?te(Bn,jr,Lt,T,b,ye):te(jr,Bn,Lt,b,T,ye);if(!(h0===void 0?jr===Bn||He(jr,Bn,F,te,ye):h0)){or=!1;break}un||(un=Lt=="constructor")}if(or&&!un){var Ko=b.constructor,Zo=T.constructor;Ko!=Zo&&"constructor"in b&&"constructor"in T&&!(typeof Ko=="function"&&Ko instanceof Ko&&typeof Zo=="function"&&Zo instanceof Zo)&&(or=!1)}return ye.delete(b),ye.delete(T),or}function s0(b){return S4(b,B4,N4)}function Vo(b,T){var F=b.__data__;return R4(T)?F[typeof T=="string"?"string":"hash"]:F.map}function Ci(b,T){var F=$e(b,T);return I4(F)?F:void 0}function T4(b){var T=pe.call(b,tr),F=b[tr];try{b[tr]=void 0;var te=!0}catch{}var He=ke.call(b);return te&&(T?b[tr]=F:delete b[tr]),He}var N4=Un?function(b){return b==null?[]:(b=Object(b),Re(Un(b),function(T){return Dr.call(b,T)}))}:z4,ln=Cs;(at&&ln(new at(new ArrayBuffer(1)))!=B||tt&&ln(new tt)!=x||ct&&ln(ct.resolve())!=S||lt&&ln(new lt)!=g||ut&&ln(new ut)!=N)&&(ln=function(b){var T=Cs(b),F=T==_?b.constructor:void 0,te=F?jn(F):"";if(te)switch(te){case wt:return B;case vt:return x;case bt:return S;case _t:return g;case Et:return N}return T});function P4(b,T){return T=T??o,!!T&&(typeof b=="number"||ae.test(b))&&b>-1&&b%1==0&&b<T}function R4(b){var T=typeof b;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?b!=="__proto__":b===null}function L4(b){return!!Le&&Le in b}function M4(b){var T=b&&b.constructor,F=typeof T=="function"&&T.prototype||de;return b===F}function k4(b){return ke.call(b)}function jn(b){if(b!=null){try{return Ae.call(b)}catch{}try{return b+""}catch{}}return""}function o0(b,T){return b===T||b!==b&&T!==T}var U4=r0(function(){return arguments}())?r0:function(b){return Is(b)&&pe.call(b,"callee")&&!Dr.call(b,"callee")},Ho=Array.isArray;function F4(b){return b!=null&&c0(b.length)&&!a0(b)}var vl=Ss||q4;function j4(b,T){return n0(b,T)}function a0(b){if(!l0(b))return!1;var T=Cs(b);return T==y||T==v||T==l||T==w}function c0(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=o}function l0(b){var T=typeof b;return b!=null&&(T=="object"||T=="function")}function Is(b){return b!=null&&typeof b=="object"}var u0=Ce?et(Ce):D4;function B4(b){return F4(b)?x4(b):O4(b)}function z4(){return[]}function q4(){return!1}t.exports=j4}(to,to.exports);var Cw=to.exports;const Iw=Ts(Cw);function Dw(t,e){return e=e||{},new Promise(function(r,n){var i=new XMLHttpRequest,s=[],o=[],a={},c=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:c,headers:{keys:function(){return s},entries:function(){return o},get:function(h){return a[h.toLowerCase()]},has:function(h){return h.toLowerCase()in a}}}};for(var l in i.open(e.method||"get",t,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(h,f,p){s.push(f=f.toLowerCase()),o.push([f,p]),a[f]=a[f]?a[f]+","+p:p}),r(c())},i.onerror=n,i.withCredentials=e.credentials=="include",e.headers)i.setRequestHeader(l,e.headers[l]);i.send(e.body||null)})}const Nh=Ns(Object.freeze(Object.defineProperty({__proto__:null,default:Dw},Symbol.toStringTag,{value:"Module"})));var Ow=fetch ||(self.fetch=Nh.default||Nh);const $w=Ts(Ow);function Aw(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function f(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var x=0,O=0,I=0,_=v.length;I!==_&&v[I]===0;)I++,x++;for(var S=(_-I)*h+1>>>0,w=new Uint8Array(S);I!==_;){for(var E=v[I],g=0,u=S-1;(E!==0||g<O)&&u!==-1;u--,g++)E+=256*w[u]>>>0,w[u]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");O=g,I++}for(var m=S-O;m!==S&&w[m]===0;)m++;for(var $=c.repeat(x);m<S;++m)$+=t.charAt(w[m]);return $}function p(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var x=0;if(v[x]!==" "){for(var O=0,I=0;v[x]===c;)O++,x++;for(var _=(v.length-x)*l+1>>>0,S=new Uint8Array(_);v[x];){var w=r[v.charCodeAt(x)];if(w===255)return;for(var E=0,g=_-1;(w!==0||E<I)&&g!==-1;g--,E++)w+=a*S[g]>>>0,S[g]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");I=E,x++}if(v[x]!==" "){for(var u=_-I;u!==_&&S[u]===0;)u++;for(var m=new Uint8Array(O+(_-u)),$=O;u!==_;)m[$++]=S[u++];return m}}}function y(v){var x=p(v);if(x)return x;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:p,decode:y}}var Tw=Aw,Nw=Tw;const Ph=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Pw=t=>new TextEncoder().encode(t),Rw=t=>new TextDecoder().decode(t);class Lw{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Mw{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Rh(this,e)}}class kw{constructor(e){this.decoders=e}or(e){return Rh(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Rh=(t,e)=>new kw({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Uw{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Lw(e,r,n),this.decoder=new Mw(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ro=({name:t,prefix:e,encode:r,decode:n})=>new Uw(t,e,r,n),qi=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Nw(r,e);return ro({prefix:t,name:e,encode:n,decode:s=>Ph(i(s))})},Fw=(t,e,r,n)=>{const i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let h=0;h<s;++h){const f=i[t[h]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},jw=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Dt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>ro({prefix:e,name:t,encode(i){return jw(i,n,r)},decode(i){return Fw(i,n,r,t)}}),Bw=ro({prefix:"\0",name:"identity",encode:t=>Rw(t),decode:t=>Pw(t)});var zw=Object.freeze({__proto__:null,identity:Bw});const qw=Dt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Ww=Object.freeze({__proto__:null,base2:qw});const Vw=Dt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Hw=Object.freeze({__proto__:null,base8:Vw});const Kw=qi({prefix:"9",name:"base10",alphabet:"0123456789"});var Zw=Object.freeze({__proto__:null,base10:Kw});const Gw=Dt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Yw=Dt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Jw=Object.freeze({__proto__:null,base16:Gw,base16upper:Yw});const Qw=Dt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Xw=Dt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ev=Dt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),tv=Dt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),rv=Dt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),nv=Dt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),iv=Dt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),sv=Dt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ov=Dt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var av=Object.freeze({__proto__:null,base32:Qw,base32upper:Xw,base32pad:ev,base32padupper:tv,base32hex:rv,base32hexupper:nv,base32hexpad:iv,base32hexpadupper:sv,base32z:ov});const cv=qi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),lv=qi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var uv=Object.freeze({__proto__:null,base36:cv,base36upper:lv});const hv=qi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),dv=qi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var fv=Object.freeze({__proto__:null,base58btc:hv,base58flickr:dv});const pv=Dt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),gv=Dt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),mv=Dt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),yv=Dt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var wv=Object.freeze({__proto__:null,base64:pv,base64pad:gv,base64url:mv,base64urlpad:yv});const Lh=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),vv=Lh.reduce((t,e,r)=>(t[r]=e,t),[]),bv=Lh.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function _v(t){return t.reduce((e,r)=>(e+=vv[r],e),"")}function Ev(t){const e=[];for(const r of t){const n=bv[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const xv=ro({prefix:"🚀",name:"base256emoji",encode:_v,decode:Ev});var Sv=Object.freeze({__proto__:null,base256emoji:xv}),Cv=kh,Mh=128,Iv=127,Dv=~Iv,Ov=Math.pow(2,31);function kh(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Ov;)e[r++]=t&255|Mh,t/=128;for(;t&Dv;)e[r++]=t&255|Mh,t>>>=7;return e[r]=t|0,kh.bytes=r-n+1,e}var $v=Ka,Av=128,Uh=127;function Ka(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Ka.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&Uh)<<i:(o&Uh)*Math.pow(2,i),i+=7}while(o>=Av);return Ka.bytes=s-n,r}var Tv=Math.pow(2,7),Nv=Math.pow(2,14),Pv=Math.pow(2,21),Rv=Math.pow(2,28),Lv=Math.pow(2,35),Mv=Math.pow(2,42),kv=Math.pow(2,49),Uv=Math.pow(2,56),Fv=Math.pow(2,63),jv=function(t){return t<Tv?1:t<Nv?2:t<Pv?3:t<Rv?4:t<Lv?5:t<Mv?6:t<kv?7:t<Uv?8:t<Fv?9:10},Bv={encode:Cv,decode:$v,encodingLength:jv},Fh=Bv;const jh=(t,e,r=0)=>(Fh.encode(t,e,r),e),Bh=t=>Fh.encodingLength(t),Za=(t,e)=>{const r=e.byteLength,n=Bh(t),i=n+Bh(r),s=new Uint8Array(i+r);return jh(t,s,0),jh(r,s,n),s.set(e,i),new zv(t,r,e,s)};let zv=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};const zh=({name:t,code:e,encode:r})=>new qv(t,e,r);let qv=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Za(this.code,r):r.then(n=>Za(this.code,n))}else throw Error("Unknown type, must be binary type")}};const qh=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Wv=zh({name:"sha2-256",code:18,encode:qh("SHA-256")}),Vv=zh({name:"sha2-512",code:19,encode:qh("SHA-512")});var Hv=Object.freeze({__proto__:null,sha256:Wv,sha512:Vv});const Wh=0,Kv="identity",Vh=Ph;var Zv=Object.freeze({__proto__:null,identity:{code:Wh,name:Kv,encode:Vh,digest:t=>Za(Wh,Vh(t))}});new TextEncoder,new TextDecoder;const Hh={...zw,...Ww,...Hw,...Zw,...Jw,...av,...uv,...fv,...wv,...Sv};({...Hv,...Zv});function Kh(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Gv(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Kh(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Zh(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Gh=Zh("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Ga=Zh("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Gv(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Yv={utf8:Gh,"utf-8":Gh,hex:Hh.base16,latin1:Ga,ascii:Ga,binary:Ga,...Hh};function Jv(t,e="utf8"){const r=Yv[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Kh(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const Yh="wc",Qv=2,Ya="core",Kr=`${Yh}@2:${Ya}:`,Xv={name:Ya,logger:"error"},eb={database:":memory:"},tb="crypto",Jh="client_ed25519_seed",rb=ne.ONE_DAY,nb="keychain",ib="0.3",sb="messages",ob="0.3",ab=ne.SIX_HOURS,cb="publisher",Qh="irn",lb="error",Xh="wss://relay.walletconnect.com",ed="wss://relay.walletconnect.org",ub="relayer",Tt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},hb="_subscription",Tr={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},db=ne.ONE_SECOND,fb="2.11.2",pb=1e4,gb="0.3",mb="WALLETCONNECT_CLIENT_ID",lr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},yb="subscription",wb="0.3",vb=ne.FIVE_SECONDS*1e3,bb="pairing",_b="0.3",Wi={wc_pairingDelete:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ne.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ne.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:0},res:{ttl:ne.ONE_DAY,prompt:!1,tag:0}}},Vi={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Er={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Eb="history",xb="0.3",Sb="expirer",nr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Cb="0.3",Ja="verify-api",ei="https://verify.walletconnect.com",Qa="https://verify.walletconnect.org",Ib=[ei,Qa],Db="echo",Ob="https://echo.walletconnect.com";let $b=class{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=nb,this.version=ib,this.initialized=!1,this.storagePrefix=Kr,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=Z("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=Te.generateChildLogger(r,this.name)}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,ah(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ch(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Z("NOT_INITIALIZED",this.name);throw new Error(e)}}},Ab=class{constructor(e,r,n){this.core=e,this.logger=r,this.name=tb,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=Ru(i);return Pu(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=jm();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),o=Ru(s),a=Ma();return await Z1(a,i,rb,o)},this.generateSharedKey=(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=Bm(a,s);return this.setSymKey(c,o)},this.setSymKey=async(i,s)=>{this.isInitialized();const o=s||zm(i);return await this.keychain.set(o,i),o},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,o)=>{this.isInitialized();const a=rh(o),c=$i(s);if(nh(a)){const p=a.senderPublicKey,y=a.receiverPublicKey;i=await this.generateSharedKey(p,y)}const l=this.getSymKey(i),{type:h,senderPublicKey:f}=a;return Wm({type:h,symKey:l,message:c,senderPublicKey:f})},this.decode=async(i,s,o)=>{this.isInitialized();const a=Km(s,o);if(nh(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(i),l=Vm({symKey:c,encoded:s});return Us(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}},this.getPayloadType=i=>{const s=Gs(i);return Ui(s.type)},this.getPayloadSenderPublicKey=i=>{const s=Gs(i);return s.senderPublicKey?kt(s.senderPublicKey,Ut):void 0},this.core=e,this.logger=Te.generateChildLogger(r,this.name),this.keychain=n||new $b(this.core,this.logger)}get context(){return Te.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Jh)}catch{e=Ma(),await this.keychain.set(Jh,e)}return Jv(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Z("NOT_INITIALIZED",this.name);throw new Error(e)}}},Tb=class extends eg{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=sb,this.version=ob,this.initialized=!1,this.storagePrefix=Kr,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=Zn(i);let o=this.messages.get(n);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(n,o),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),o=Zn(i);return typeof s[o]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Te.generateChildLogger(e,this.name),this.core=r}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,ah(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ch(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=Z("NOT_INITIALIZED",this.name);throw new Error(e)}}};class Nb extends tg{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new ar.EventEmitter,this.name=cb,this.queue=new Map,this.publishTimeout=ne.toMiliseconds(ne.TEN_SECONDS*2),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{const a=(s==null?void 0:s.ttl)||ab,c=Ua(s),l=(s==null?void 0:s.prompt)||!1,h=(s==null?void 0:s.tag)||0,f=(s==null?void 0:s.id)||Dh().toString(),p={topic:n,message:i,opts:{ttl:a,relay:c,prompt:l,tag:h,id:f}},y=setTimeout(()=>this.queue.set(f,p),this.publishTimeout);try{await await ji(this.rpcPublish(n,i,a,c,l,h,f),this.publishTimeout,`Failed to publish payload, please try again. id:${f} tag:${h}`),this.removeRequestFromQueue(f),this.relayer.events.emit(Tt.publish,p)}catch(v){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw this.removeRequestFromQueue(f),v;return}finally{clearTimeout(y)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(a){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(a),a}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=Te.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Te.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,s,o,a){var c,l,h,f;const p={method:Ys(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:o},id:a};return Ft((c=p.params)==null?void 0:c.prompt)&&((l=p.params)==null||delete l.prompt),Ft((h=p.params)==null?void 0:h.tag)&&((f=p.params)==null||delete f.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p}),this.relayer.request(p)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(Wn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Tt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Tt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class Pb{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Rb=Object.defineProperty,Lb=Object.defineProperties,Mb=Object.getOwnPropertyDescriptors,td=Object.getOwnPropertySymbols,kb=Object.prototype.hasOwnProperty,Ub=Object.prototype.propertyIsEnumerable,rd=(t,e,r)=>e in t?Rb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Hi=(t,e)=>{for(var r in e||(e={}))kb.call(e,r)&&rd(t,r,e[r]);if(td)for(var r of td(e))Ub.call(e,r)&&rd(t,r,e[r]);return t},Xa=(t,e)=>Lb(t,Mb(e));let Fb=class extends ig{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new Pb,this.events=new ar.EventEmitter,this.name=yb,this.version=wb,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Kr,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=Ua(i),o={topic:n,relay:s};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s);return this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>{if(this.topics.includes(n))return!0;const i=`${this.pendingSubscriptionWatchLabel}_${n}`;return await new Promise((s,o)=>{const a=new ne.Watch;a.start(i);const c=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(c),a.stop(i),s(!0)),a.elapsed(i)>=vb&&(clearInterval(c),a.stop(i),o(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Te.generateChildLogger(r,this.name),this.clientId=""}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=Ua(n);await this.rpcUnsubscribe(e,r,i);const s=Ye("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){const n={method:Ys(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await ji(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Tt.connection_stalled)}return Zn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:Ys(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await ji(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Tt.connection_stalled)}}rpcUnsubscribe(e,r,n){const i={method:Ys(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,Xa(Hi({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Hi({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,Hi({},r)),this.topicMap.set(r.topic,e),this.events.emit(lr.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=Z("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(lr.deleted,Xa(Hi({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(lr.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(lr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=Z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);Bi(r)&&this.onBatchSubscribe(r.map((n,i)=>Xa(Hi({},e[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Wn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Tt.connect,async()=>{await this.onConnect()}),this.relayer.on(Tt.disconnect,()=>{this.onDisconnect()}),this.events.on(lr.created,async e=>{const r=lr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(lr.deleted,async e=>{const r=lr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Z("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}};var jb=Object.defineProperty,nd=Object.getOwnPropertySymbols,Bb=Object.prototype.hasOwnProperty,zb=Object.prototype.propertyIsEnumerable,id=(t,e,r)=>e in t?jb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qb=(t,e)=>{for(var r in e||(e={}))Bb.call(e,r)&&id(t,r,e[r]);if(nd)for(var r of nd(e))zb.call(e,r)&&id(t,r,e[r]);return t};let Wb=class extends rg{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new ar.EventEmitter,this.name=ub,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.request=async r=>{this.logger.debug("Publishing Request Payload");const n=r.id;try{await this.toEstablishConnection();const i=this.provider.request(r);return this.requestsInFlight.set(n,{promise:i,request:r}),await i}catch(i){throw this.logger.debug("Failed to Publish Request"),this.logger.error(i),i}finally{this.requestsInFlight.delete(n)}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(Tt.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(Tt.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Tr.payload,this.onPayloadHandler),this.provider.on(Tr.connect,this.onConnectHandler),this.provider.on(Tr.disconnect,this.onDisconnectHandler),this.provider.on(Tr.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Te.generateChildLogger(e.logger,this.name):Te.pino(Te.getDefaultLoggerOptions({level:e.logger||lb})),this.messages=new Tb(this.logger,e.core),this.subscriber=new Fb(this,this.logger),this.publisher=new Nb(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Xh,this.projectId=e.projectId,this.bundleId=Xm(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${ed}...`),await this.restartTransport(ed)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},pb)}get context(){return Te.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"";if(i)return i;let s;const o=a=>{a.topic===e&&(this.subscriber.off(lr.created,o),s())};return await Promise.all([new Promise(a=>{s=a,this.subscriber.on(lr.created,o)}),new Promise(async a=>{i=await this.subscriber.subscribe(e,r),a()})]),i}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.requestsInFlight.size>0&&(this.logger.debug("Waiting for all in-flight requests to finish before closing transport..."),this.requestsInFlight.forEach(async e=>{await e.promise})),this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await ji(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(lr.resubscribed,()=>{r()})}),new Promise(async(r,n)=>{try{await ji(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(i){n(i);return}r()})])}catch(r){this.logger.error(r);const n=r;if(!this.isConnectionStalled(n.message))throw r;this.provider.events.emit(Tr.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await bh())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new bw(new Sw(sy({sdkVersion:fb,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Ha(e)){if(!e.method.endsWith(hb))return;const r=e.params,{topic:n,message:i,publishedAt:s}=r.data,o={topic:n,message:i,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(qb({type:"event",event:r.id},o)),this.events.emit(r.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else eo(e)&&this.events.emit(Tt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Tt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Wa(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Tr.payload,this.onPayloadHandler),this.provider.off(Tr.connect,this.onConnectHandler),this.provider.off(Tr.disconnect,this.onDisconnectHandler),this.provider.off(Tr.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Tt.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let e=await bh();Xy(async r=>{this.initialized&&e!==r&&(e=r,r?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(n=>this.logger.error(n))))})}onProviderDisconnect(){this.events.emit(Tt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},ne.toMiliseconds(db)))}isInitialized(){if(!this.initialized){const{message:e}=Z("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var Vb=Object.defineProperty,sd=Object.getOwnPropertySymbols,Hb=Object.prototype.hasOwnProperty,Kb=Object.prototype.propertyIsEnumerable,od=(t,e,r)=>e in t?Vb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ad=(t,e)=>{for(var r in e||(e={}))Hb.call(e,r)&&od(t,r,e[r]);if(sd)for(var r of sd(e))Kb.call(e,r)&&od(t,r,e[r]);return t};let no=class extends ng{constructor(e,r,n,i=Kr,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=gb,this.cached=[],this.initialized=!1,this.storagePrefix=Kr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Ft(o)?this.map.set(this.getKey(o),o):Ay(o)?this.map.set(o.id,o):Ty(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>Iw(a[c],o[c]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=ad(ad({},this.getData(o)),a);this.map.set(o,c),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),await this.persist())},this.logger=Te.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=Z("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=Z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Z("NOT_INITIALIZED",this.name);throw new Error(e)}}},Zb=class{constructor(e,r){this.core=e,this.logger=r,this.name=bb,this.version=_b,this.events=new ta,this.initialized=!1,this.storagePrefix=Kr,this.ignoredPayloadTypes=[En],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=Ma(),i=await this.core.crypto.setSymKey(n),s=Qt(ne.FIVE_MINUTES),o={protocol:Qh},a={topic:i,expiry:s,relay:o,active:!1},c=_y({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:o,expiryTimestamp:s});return await this.pairings.set(i,a),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:c}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:s,relay:o,expiryTimestamp:a}=fh(n.uri);let c;if(this.pairings.keys.includes(i)&&(c=this.pairings.get(i),c.active))throw new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);const l=a||Qt(ne.FIVE_MINUTES),h={topic:i,relay:o,expiry:l,active:!1};return await this.pairings.set(i,h),this.core.expirer.set(i,l),n.activatePairing&&await this.activate({topic:i}),this.events.emit(Vi.create,h),this.core.crypto.keychain.has(i)||(await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:o})),h},this.activate=async({topic:n})=>{this.isInitialized();const i=Qt(ne.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Jn();this.events.once(st("pairing_ping",s),({error:l})=>{l?c(l):a()}),await o()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Ye("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{const o=Xn(i,s),a=await this.core.crypto.encode(n,o),c=Wi[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id},this.sendResult=async(n,i,s)=>{const o=Wa(n,s),a=await this.core.crypto.encode(i,o),c=await this.core.history.get(i,n),l=Wi[c.request.method].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)},this.sendError=async(n,i,s)=>{const o=Va(n,s),a=await this.core.crypto.encode(i,o),c=await this.core.history.get(i,n),l=Wi[c.request.method]?Wi[c.request.method].res:Wi.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Ye("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>Hr(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(Vi.ping,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{Ar(i)?this.events.emit(st("pairing_ping",s),{}):cr(i)&&this.events.emit(st("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(Vi.delete,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=Ye("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(Ye("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{var i;if(!Kt(n)){const{message:o}=Z("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(o)}if(!$y(n.uri)){const{message:o}=Z("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(o)}const s=fh(n.uri);if(!((i=s==null?void 0:s.relay)!=null&&i.protocol)){const{message:o}=Z("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(o)}if(!(s!=null&&s.symKey)){const{message:o}=Z("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(o)}if(s!=null&&s.expiryTimestamp&&ne.toMiliseconds(s==null?void 0:s.expiryTimestamp)<Date.now()){const{message:o}=Z("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(o)}},this.isValidPing=async n=>{if(!Kt(n)){const{message:s}=Z("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!Kt(n)){const{message:s}=Z("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!mt(n,!1)){const{message:i}=Z("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=Z("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(Hr(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=Z("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=Te.generateChildLogger(r,this.name),this.pairings=new no(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Te.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Z("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Tt.message,async e=>{const{topic:r,message:n}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);try{Ha(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):eo(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id))}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(nr.expired,async e=>{const{topic:r}=uh(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Vi.expire,{topic:r}))})}},Gb=class extends Xp{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new ar.EventEmitter,this.name=Eb,this.version=xb,this.cached=[],this.initialized=!1,this.storagePrefix=Kr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:Qt(ne.THIRTY_DAYS)};this.records.set(o.id,o),this.events.emit(Er.created,o)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=cr(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(Er.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(Er.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Te.generateChildLogger(r,this.name)}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:Xn(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=Z("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Er.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=Z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Er.created,e=>{const r=Er.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Er.updated,e=>{const r=Er.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Er.deleted,e=>{const r=Er.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(Wn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{ne.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Z("NOT_INITIALIZED",this.name);throw new Error(e)}}},Yb=class extends sg{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new ar.EventEmitter,this.name=Sb,this.version=Cb,this.cached=[],this.initialized=!1,this.storagePrefix=Kr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(nr.created,{target:s,expiration:o})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(nr.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Te.generateChildLogger(r,this.name)}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return oy(e);if(typeof e=="number")return ay(e);const{message:r}=Z("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(nr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=Z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=Z("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;ne.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(nr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Wn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(nr.created,e=>{const r=nr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(nr.expired,e=>{const r=nr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(nr.deleted,e=>{const r=nr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Z("NOT_INITIALIZED",this.name);throw new Error(e)}}},Jb=class extends og{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=Ja,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async n=>{if(this.verifyDisabled||Gn()||!Yn())return;const i=this.getVerifyUrl(n==null?void 0:n.verifyUrl);this.verifyUrl!==i&&this.removeIframe(),this.verifyUrl=i;try{await this.createIframe()}catch(s){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(s)}if(!this.initialized){this.removeIframe(),this.verifyUrl=Qa;try{await this.createIframe()}catch(s){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(s),this.verifyDisabled=!0}}},this.register=async n=>{this.initialized?this.sendPost(n.attestationId):(this.addToQueue(n.attestationId),await this.init())},this.resolve=async n=>{if(this.isDevEnv)return"";const i=this.getVerifyUrl(n==null?void 0:n.verifyUrl);let s;try{s=await this.fetchAttestation(n.attestationId,i)}catch(o){this.logger.info(`failed to resolve attestation: ${n.attestationId} from url: ${i}`),this.logger.info(o),s=await this.fetchAttestation(n.attestationId,Qa)}return s},this.fetchAttestation=async(n,i)=>{this.logger.info(`resolving attestation: ${n} from url: ${i}`);const s=this.startAbortTimer(ne.ONE_SECOND*2),o=await fetch(`${i}/attestation/${n}`,{signal:this.abortController.signal});return clearTimeout(s),o.status===200?await o.json():void 0},this.addToQueue=n=>{this.queue.push(n)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(n=>this.sendPost(n)),this.queue=[])},this.sendPost=n=>{var i;try{if(!this.iframe)return;(i=this.iframe.contentWindow)==null||i.postMessage(n,"*"),this.logger.info(`postMessage sent: ${n} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let n;const i=s=>{s.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",i),n())};await Promise.race([new Promise(s=>{if(document.getElementById(Ja))return s();window.addEventListener("message",i);const o=document.createElement("iframe");o.id=Ja,o.src=`${this.verifyUrl}/${this.projectId}`,o.style.display="none",document.body.append(o),this.iframe=o,n=s}),new Promise((s,o)=>setTimeout(()=>{window.removeEventListener("message",i),o("verify iframe load timeout")},ne.toMiliseconds(ne.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=n=>{let i=n||ei;return Ib.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${ei}`),i=ei),i},this.logger=Te.generateChildLogger(r,this.name),this.verifyUrl=ei,this.abortController=new AbortController,this.isDevEnv=ka()&&process.env.IS_VITEST}get context(){return Te.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ne.toMiliseconds(e))}},Qb=class extends ag{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.context=Db,this.registerDeviceToken=async n=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=n,c=`${Ob}/${this.projectId}/clients`;await $w(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})},this.logger=Te.generateChildLogger(r,this.context)}};var Xb=Object.defineProperty,cd=Object.getOwnPropertySymbols,e2=Object.prototype.hasOwnProperty,t2=Object.prototype.propertyIsEnumerable,ld=(t,e,r)=>e in t?Xb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ud=(t,e)=>{for(var r in e||(e={}))e2.call(e,r)&&ld(t,r,e[r]);if(cd)for(var r of cd(e))t2.call(e,r)&&ld(t,r,e[r]);return t};const r2=class d0 extends Qp{constructor(e){super(e),this.protocol=Yh,this.version=Qv,this.name=Ya,this.events=new ar.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Xh,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Te.pino(Te.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Xv.logger}));this.logger=Te.generateChildLogger(r,this.name),this.heartbeat=new Wn.HeartBeat,this.crypto=new Ab(this,this.logger,e==null?void 0:e.keychain),this.history=new Gb(this,this.logger),this.expirer=new Yb(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new yp(ud(ud({},eb),e==null?void 0:e.storageOptions)),this.relayer=new Wb({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Zb(this,this.logger),this.verify=new Jb(this.projectId||"",this.logger),this.echoClient=new Qb(this.projectId||"",this.logger)}static async init(e){const r=new d0(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(mb,n),r}get context(){return Te.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}},hd="wc",dd=2,fd="client",ec=`${hd}@${dd}:${fd}:`,tc={name:fd,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},pd="WALLETCONNECT_DEEPLINK_CHOICE",n2="proposal",i2="Proposal expired",s2="session",io=ne.SEVEN_DAYS,o2="engine",Nr={wc_sessionPropose:{req:{ttl:ne.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ne.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ne.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ne.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ne.THIRTY_SECONDS,prompt:!1,tag:1115}}},rc={min:ne.FIVE_MINUTES,max:ne.SEVEN_DAYS},Pr={idle:"IDLE",active:"ACTIVE"},a2="request",c2=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var l2=Object.defineProperty,u2=Object.defineProperties,h2=Object.getOwnPropertyDescriptors,gd=Object.getOwnPropertySymbols,d2=Object.prototype.hasOwnProperty,f2=Object.prototype.propertyIsEnumerable,md=(t,e,r)=>e in t?l2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,jt=(t,e)=>{for(var r in e||(e={}))d2.call(e,r)&&md(t,r,e[r]);if(gd)for(var r of gd(e))f2.call(e,r)&&md(t,r,e[r]);return t},ti=(t,e)=>u2(t,h2(e));class p2 extends lg{constructor(e){super(e),this.name=o2,this.events=new ta,this.initialized=!1,this.ignoredPayloadTypes=[En],this.requestQueue={state:Pr.idle,queue:[]},this.sessionRequestQueue={state:Pr.idle,queue:[]},this.requestQueueDelay=ne.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(Nr)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ne.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const n=ti(jt({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:c}=n;let l=i,h,f=!1;if(l&&(f=this.client.core.pairing.pairings.get(l).active),!l||!f){const{topic:w,uri:E}=await this.client.core.pairing.create();l=w,h=E}const p=await this.client.core.crypto.generateKeyPair(),y=Nr.wc_sessionPropose.req.ttl||ne.FIVE_MINUTES,v=Qt(y),x=jt({requiredNamespaces:s,optionalNamespaces:o,relays:c??[{protocol:Qh}],proposer:{publicKey:p,metadata:this.client.metadata},expiryTimestamp:v},a&&{sessionProperties:a}),{reject:O,resolve:I,done:_}=Jn(y,i2);if(this.events.once(st("session_connect"),async({error:w,session:E})=>{if(w)O(w);else if(E){E.self.publicKey=p;const g=ti(jt({},E),{requiredNamespaces:x.requiredNamespaces,optionalNamespaces:x.optionalNamespaces});await this.client.session.set(E.topic,g),await this.setExpiry(E.topic,E.expiry),l&&await this.client.core.pairing.updateMetadata({topic:l,metadata:E.peer.metadata}),I(g)}}),!l){const{message:w}=Z("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(w)}const S=await this.sendRequest({topic:l,method:"wc_sessionPropose",params:x,throwOnFailedPublish:!0});return await this.setProposal(S,jt({id:S},x)),{uri:h,approval:_}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:i,namespaces:s,sessionProperties:o}=r,a=this.client.proposal.get(n);let{pairingTopic:c,proposer:l,requiredNamespaces:h,optionalNamespaces:f}=a;c=c||"";const p=await this.client.core.crypto.generateKeyPair(),y=l.publicKey,v=await this.client.core.crypto.generateSharedKey(p,y);c&&n&&(await this.client.core.pairing.updateMetadata({topic:c,metadata:l.metadata}),await this.sendResult({id:n,topic:c,result:{relay:{protocol:i??"irn"},responderPublicKey:p}}),await this.client.proposal.delete(n,Ye("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:c}));const x=jt({relay:{protocol:i??"irn"},namespaces:s,pairingTopic:c,controller:{publicKey:p,metadata:this.client.metadata},expiry:Qt(io)},o&&{sessionProperties:o});await this.client.core.relayer.subscribe(v);const O=ti(jt({},x),{topic:v,requiredNamespaces:h,optionalNamespaces:f,pairingTopic:c,acknowledged:!1,self:x.controller,peer:{publicKey:l.publicKey,metadata:l.metadata},controller:p});await this.client.session.set(v,O);try{await this.sendRequest({topic:v,method:"wc_sessionSettle",params:x,throwOnFailedPublish:!0})}catch(I){throw this.client.logger.error(I),this.client.session.delete(v,Ye("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(v),I}return await this.setExpiry(v,Qt(io)),{topic:v,acknowledged:()=>new Promise(I=>setTimeout(()=>I(this.client.session.get(v)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:n,reason:i}=r,{pairingTopic:s}=this.client.proposal.get(n);s&&(await this.sendError(n,s,i),await this.client.proposal.delete(n,Ye("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:i}=r,s=await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i}}),{done:o,resolve:a,reject:c}=Jn();return this.events.once(st("session_update",s),({error:l})=>{l?c(l):a()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:o}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,i=await this.sendRequest({topic:n,method:"wc_sessionExtend",params:{}}),{done:s,resolve:o,reject:a}=Jn();return this.events.once(st("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,Qt(io)),{acknowledged:s}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:i,topic:s,expiry:o=Nr.wc_sessionRequest.req.ttl}=r,a=qa(),{done:c,resolve:l,reject:h}=Jn(o,"Request expired. Please try again.");return this.events.once(st("session_request",a),({error:f,result:p})=>{f?h(f):l(p)}),await Promise.all([new Promise(async f=>{await this.sendRequest({clientRpcId:a,topic:s,method:"wc_sessionRequest",params:{request:ti(jt({},i),{expiryTimestamp:Qt(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0}).catch(p=>h(p)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:a}),f()}),new Promise(async f=>{const p=await ly(this.client.core.storage,pd);cy({id:a,topic:s,wcDeepLink:p}),f()}),c()]).then(f=>f[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i;Ar(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0}):cr(i)&&await this.sendError(s,n,i.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=await this.sendRequest({topic:n,method:"wc_sessionPing",params:{}}),{done:s,resolve:o,reject:a}=Jn();this.events.once(st("session_ping",i),({error:c})=>{c?a(c):o()}),await s()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r;await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:Ye("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:i}=Z("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>Dy(n,r))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async r=>{const{topic:n,expirerHasDeleted:i=!1,emitEvent:s=!0,id:o=0}=r,{self:a}=this.client.session.get(n);await this.client.core.relayer.unsubscribe(n),await this.client.session.delete(n,Ye("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(a.publicKey)&&await this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.keychain.has(n)&&await this.client.core.crypto.deleteSymKey(n),i||this.client.core.expirer.del(n),this.client.core.storage.removeItem(pd).catch(c=>this.client.logger.warn(c)),this.getPendingSessionRequests().forEach(c=>{c.topic===n&&this.deletePendingSessionRequest(c.id,Ye("USER_DISCONNECTED"))}),s&&this.client.events.emit("session_delete",{id:o,topic:n})},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,Ye("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=Pr.idle,this.client.events.emit("session_request_expire",{id:r}))},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,Qt(Nr.wc_sessionPropose.req.ttl))},this.setPendingSessionRequest=async r=>{const{id:n,topic:i,params:s,verifyContext:o}=r,a=s.request.expiryTimestamp||Qt(Nr.wc_sessionRequest.req.ttl);await this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:o}),a&&this.client.core.expirer.set(n,a)},this.sendRequest=async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l}=r,h=Xn(i,s,c);if(Yn()&&c2.includes(i)){const y=Zn(JSON.stringify(h));this.client.core.verify.register({attestationId:y})}const f=await this.client.core.crypto.encode(n,h),p=Nr[i].req;return o&&(p.ttl=o),a&&(p.id=a),this.client.core.history.set(n,h),l?(p.internal=ti(jt({},p.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,f,p)):this.client.core.relayer.publish(n,f,p).catch(y=>this.client.logger.error(y)),h.id},this.sendResult=async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o}=r,a=Wa(n,s),c=await this.client.core.crypto.encode(i,a),l=await this.client.core.history.get(i,n),h=Nr[l.request.method].res;o?(h.internal=ti(jt({},h.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,c,h)):this.client.core.relayer.publish(i,c,h).catch(f=>this.client.logger.error(f)),await this.client.core.history.resolve(a)},this.sendError=async(r,n,i)=>{const s=Va(r,i),o=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,r),c=Nr[a.request.method].res;this.client.core.relayer.publish(n,o,c),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;Hr(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Hr(i.expiryTimestamp)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Pr.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Pr.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(n=>setTimeout(n,300))}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=Pr.idle},this.processRequest=r=>{const{topic:n,payload:i}=r,s=i.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i}=r,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:i}=Z("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.onSessionProposeRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidConnect(jt({},n.params));const o=i.expiryTimestamp||Qt(Nr.wc_sessionPropose.req.ttl),a=jt({id:s,pairingTopic:r,expiryTimestamp:o},i);await this.setProposal(s,a);const c=Zn(JSON.stringify(n)),l=await this.getVerifyContext(c,a.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:a,verifyContext:l})}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.onSessionProposeResponse=async(r,n)=>{const{id:i}=n;if(Ar(n)){const{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const o=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const a=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});const c=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:c});const l=await this.client.core.crypto.generateSharedKey(a,c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:l});const h=await this.client.core.relayer.subscribe(l);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:r})}else cr(n)&&(await this.client.proposal.delete(i,Ye("USER_DISCONNECTED")),this.events.emit(st("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:h,pairingTopic:f}=n.params,p=jt({topic:r,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f,requiredNamespaces:{},optionalNamespaces:{},controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},h&&{sessionProperties:h});await this.sendResult({id:n.id,topic:r,result:!0}),this.events.emit(st("session_connect"),{session:p}),this.cleanupDuplicatePairings(p)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;Ar(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(st("session_approve",i),{})):cr(n)&&(await this.client.session.delete(r,Ye("USER_DISCONNECTED")),this.events.emit(st("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=Xs.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidUpdate(jt({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0}),this.client.events.emit("session_update",{id:s,topic:r,params:i}),Xs.set(o,s)}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.isRequestOutOfSync=(r,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n;Ar(n)?this.events.emit(st("session_update",i),{}):cr(n)&&this.events.emit(st("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Qt(io)),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n;Ar(n)?this.events.emit(st("session_extend",i),{}):cr(n)&&this.events.emit(st("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n;setTimeout(()=>{Ar(n)?this.events.emit(st("session_ping",i),{}):cr(n)&&this.events.emit(st("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(Tt.publish,async()=>{s(await this.deleteSession({topic:r,id:i}))})}),this.sendResult({id:i,topic:r,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:Ye("USER_DISCONNECTED")})])}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidRequest(jt({topic:r},s));const o=Zn(JSON.stringify(Xn("wc_sessionRequest",s,i))),a=this.client.session.get(r),c=await this.getVerifyContext(o,a.peer.metadata),l={id:i,topic:r,params:s,verifyContext:c};await this.setPendingSessionRequest(l),this.addSessionRequestToSessionRequestQueue(l),this.processSessionRequestQueue()}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n;Ar(n)?this.events.emit(st("session_request",i),{result:n.result}):cr(n)&&this.events.emit(st("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=Xs.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(jt({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),Xs.set(o,i)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Pr.idle,this.processSessionRequestQueue()},ne.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:r,error:n})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{this.events.emit(st("session_request",s.request.id),{error:n})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Pr.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Pr.active,this.client.events.emit("session_request",r)}catch(n){this.client.logger.error(n)}},this.onPairingCreated=r=>{if(r.active)return;const n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest(r.topic,Xn("wc_sessionPropose",{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties},n.id))},this.isValidConnect=async r=>{if(!Kt(r)){const{message:c}=Z("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(c)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(Ft(n)||await this.isValidPairingTopic(n),!Fy(a,!0)){const{message:c}=Z("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(c)}!Ft(i)&&Js(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!Ft(s)&&Js(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),Ft(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=Uy(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!Kt(r))throw new Error(Z("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o}=r;await this.isValidProposalId(n);const a=this.client.proposal.get(n),c=ja(i,"approve()");if(c)throw new Error(c.message);const l=wh(a.requiredNamespaces,i,"approve()");if(l)throw new Error(l.message);if(!mt(s,!0)){const{message:h}=Z("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(h)}Ft(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!Kt(r)){const{message:s}=Z("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(await this.isValidProposalId(n),!By(i)){const{message:s}=Z("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!Kt(r)){const{message:l}=Z("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(l)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!mh(n)){const{message:l}=Z("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=Ny(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=ja(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Hr(o)){const{message:l}=Z("EXPIRED","onSessionSettleRequest()");throw new Error(l)}},this.isValidUpdate=async r=>{if(!Kt(r)){const{message:c}=Z("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=ja(i,"update()");if(o)throw new Error(o.message);const a=wh(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!Kt(r)){const{message:i}=Z("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!Kt(r)){const{message:c}=Z("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:i,chainId:s,expiry:o}=r;await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!yh(a,s)){const{message:c}=Z("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!zy(i)){const{message:c}=Z("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!Vy(a,s,i.method)){const{message:c}=Z("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!Gy(o,rc)){const{message:c}=Z("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${rc.min} and ${rc.max}`);throw new Error(c)}},this.isValidRespond=async r=>{var n;if(!Kt(r)){const{message:o}=Z("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:i,response:s}=r;try{await this.isValidSessionTopic(i)}catch(o){throw(n=r==null?void 0:r.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!qy(s)){const{message:o}=Z("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}},this.isValidPing=async r=>{if(!Kt(r)){const{message:i}=Z("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!Kt(r)){const{message:a}=Z("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!yh(o,s)){const{message:a}=Z("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!Wy(i)){const{message:a}=Z("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!Hy(o,s,i.name)){const{message:a}=Z("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!Kt(r)){const{message:i}=Z("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(r,n)=>{const i={verified:{verifyUrl:n.verifyUrl||ei,validation:"UNKNOWN",origin:n.url||""}};try{const s=await this.client.core.verify.resolve({attestationId:r,verifyUrl:n.verifyUrl});s&&(i.verified.origin=s.origin,i.verified.isScam=s.isScam,i.verified.validation=s.origin===new URL(n.url).origin?"VALID":"INVALID")}catch(s){this.client.logger.info(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!mt(i,!1)){const{message:s}=Z("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}}async isInitialized(){if(!this.initialized){const{message:e}=Z("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Tt.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(r,n);try{Ha(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):eo(i)?(await this.client.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.client.core.history.delete(r,i.id)):this.onRelayEventUnknownPayload({topic:r,payload:i})}catch(s){this.client.logger.error(s)}})}registerExpirerEvents(){this.client.core.expirer.on(nr.expired,async e=>{const{topic:r,id:n}=uh(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,Z("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(Vi.create,e=>this.onPairingCreated(e))}isValidPairingTopic(e){if(!mt(e,!1)){const{message:r}=Z("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=Z("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Hr(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=Z("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!mt(e,!1)){const{message:r}=Z("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=Z("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Hr(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=Z("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=Z("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(mt(e,!1)){const{message:r}=Z("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=Z("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!jy(e)){const{message:r}=Z("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=Z("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Hr(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=Z("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class g2 extends no{constructor(e,r){super(e,r,n2,ec),this.core=e,this.logger=r}}class m2 extends no{constructor(e,r){super(e,r,s2,ec),this.core=e,this.logger=r}}class y2 extends no{constructor(e,r){super(e,r,a2,ec,n=>n.id),this.core=e,this.logger=r}}let w2=class f0 extends cg{constructor(e){super(e),this.protocol=hd,this.version=dd,this.name=tc.name,this.events=new ar.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(e==null?void 0:e.name)||tc.name,this.metadata=(e==null?void 0:e.metadata)||ty();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Te.pino(Te.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||tc.logger}));this.core=(e==null?void 0:e.core)||new r2(e),this.logger=Te.generateChildLogger(r,this.name),this.session=new m2(this.core,this.logger),this.proposal=new g2(this.core,this.logger),this.pendingRequest=new y2(this.core,this.logger),this.engine=new p2(this)}static async init(e){const r=new f0(e);return await r.initialize(),r}get context(){return Te.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var v2=Object.defineProperty,b2=Object.defineProperties,_2=Object.getOwnPropertyDescriptors,yd=Object.getOwnPropertySymbols,E2=Object.prototype.hasOwnProperty,x2=Object.prototype.propertyIsEnumerable,wd=(t,e,r)=>e in t?v2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,S2=(t,e)=>{for(var r in e||(e={}))E2.call(e,r)&&wd(t,r,e[r]);if(yd)for(var r of yd(e))x2.call(e,r)&&wd(t,r,e[r]);return t},C2=(t,e)=>b2(t,_2(e)),nc=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Ke=(t,e,r)=>(nc(t,e,"read from private field"),r?r.call(t):e.get(t)),Sn=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},so=(t,e,r,n)=>(nc(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Nt=(t,e,r)=>(nc(t,e,"access private method"),r),Cn,ri,Ki,yt,ic,vd,Pt,Bt,sc,bd;let I2=class{constructor(e){Sn(this,ic),Sn(this,Pt),Sn(this,sc),Sn(this,Cn,void 0),Sn(this,ri,void 0),Sn(this,Ki,void 0),Sn(this,yt,void 0),so(this,Cn,e),so(this,ri,Nt(this,ic,vd).call(this)),Nt(this,Pt,Bt).call(this)}async connect(e){const{requiredNamespaces:r,optionalNamespaces:n}=e;return new Promise(async(i,s)=>{await Nt(this,Pt,Bt).call(this);const o=Ke(this,ri).subscribeModal(l=>{l.open||(o(),s(new Error("Modal closed")))}),{uri:a,approval:c}=await Ke(this,yt).connect(e);if(a){const l=new Set;r&&Object.values(r).forEach(({chains:h})=>{h&&h.forEach(f=>l.add(f))}),n&&Object.values(n).forEach(({chains:h})=>{h&&h.forEach(f=>l.add(f))}),await Ke(this,ri).openModal({uri:a,chains:Array.from(l)})}try{const l=await c();i(l)}catch(l){s(l)}finally{o(),Ke(this,ri).closeModal()}})}async disconnect(e){await Nt(this,Pt,Bt).call(this),await Ke(this,yt).disconnect(e)}async request(e){return await Nt(this,Pt,Bt).call(this),await Ke(this,yt).request(e)}async getSessions(){return await Nt(this,Pt,Bt).call(this),Ke(this,yt).session.getAll()}async getSession(){return await Nt(this,Pt,Bt).call(this),Ke(this,yt).session.getAll().at(-1)}async onSessionEvent(e){await Nt(this,Pt,Bt).call(this),Ke(this,yt).on("session_event",e)}async offSessionEvent(e){await Nt(this,Pt,Bt).call(this),Ke(this,yt).off("session_event",e)}async onSessionUpdate(e){await Nt(this,Pt,Bt).call(this),Ke(this,yt).on("session_update",e)}async offSessionUpdate(e){await Nt(this,Pt,Bt).call(this),Ke(this,yt).off("session_update",e)}async onSessionDelete(e){await Nt(this,Pt,Bt).call(this),Ke(this,yt).on("session_delete",e)}async offSessionDelete(e){await Nt(this,Pt,Bt).call(this),Ke(this,yt).off("session_delete",e)}async onSessionExpire(e){await Nt(this,Pt,Bt).call(this),Ke(this,yt).on("session_expire",e)}async offSessionExpire(e){await Nt(this,Pt,Bt).call(this),Ke(this,yt).off("session_expire",e)}};Cn=new WeakMap,ri=new WeakMap,Ki=new WeakMap,yt=new WeakMap,ic=new WeakSet,vd=function(){const{modalOptions:t,projectId:e}=Ke(this,Cn);return new P0(C2(S2({},t),{projectId:e}))},Pt=new WeakSet,Bt=async function(){return Ke(this,yt)?!0:(!Ke(this,Ki)&&typeof window<"u"&&so(this,Ki,Nt(this,sc,bd).call(this)),Ke(this,Ki))},sc=new WeakSet,bd=async function(){so(this,yt,await w2.init({metadata:Ke(this,Cn).metadata,projectId:Ke(this,Cn).projectId,relayUrl:Ke(this,Cn).relayUrl}));const t=await Ke(this,yt).core.crypto.getClientId();try{localStorage.setItem("WCM_WALLETCONNECT_CLIENT_ID",t)}catch{console.info("Unable to set client id")}};const oc=["decrypt","disconnect","getSelectedAccount","getBalance","getRecords","requestCreateEvent","getEvent","getEvents","createSharedState","importSharedState","requestSignature"],oo=["aleo:1"],ac=["chainChanged","accountSelected","selectedAccountSynced","sharedAccountSynced"],_d="f0aaeffe71b636da453fce042d79d723",Ed={standaloneChains:oo,enableExplorer:!1,enableAccountView:!0,enableNetworkView:!0,enableStandaloneMode:!0,mobileWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"puzzleapp://",universal:""}}],desktopWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"",universal:"https://walletconnect.puzzle.online/"}},{id:"avail",name:"Avail Wallet",links:{native:"avail://",universal:"https://avail.global"}}],walletImages:{puzzle:"https://i.imgur.com/p9tHaFC.png",avail:"https://i.imgur.com/GxNn8BO.png"}},D2={requiredNamespaces:{aleo:{methods:oc,chains:oo,events:ac}}},xd={name:"@puzzlehq/sdk-core",displayName:"Puzzle SDK",version:"0.2.18",description:"Your portal to privacy",main:"./dist/puzzle.cjs.js",module:"./dist/puzzle.es.js",browser:"./dist/puzzle.umd.js",types:"./dist/types/index.d.ts",private:!1,exports:{".":{import:"./dist/puzzle.es.js",require:"./dist/puzzle.cjs.js",browser:"./dist/puzzle.umd.js",types:"./dist/types/index.d.ts"}},type:"module",scripts:{"fetch-fix":"find dist -type f \\( -name '*.js' -o -name '*.cjs' \\) -exec sed -i '' 's/self.fetch[[:space:]]*||/fetch ||/g' {} \\;","ws-fix":`find ./dist -type f -name 'index*' -exec sed -i '' -e 's/require(\\"ws\\")/(() => {try { return require(\\"ws\\") } catch (e) { } })()/g' {} +;`,build:"vite build && tsc --declaration --emitDeclarationOnly --outDir dist/types && pnpm fetch-fix && pnpm ws-fix","type-check":"tsc --noEmit"},repository:{type:"git",url:"git+https://github.com/puzzlehq/puzzle-sdk.git"},dependencies:{"@puzzlehq/types":"1.0.11","@walletconnect/modal-sign-html":"^2.6.2","@walletconnect/types":"^2.11.2","@walletconnect/utils":"^2.11.2",debug:"^4.3.4",events:"^3.3.0"},peerDependencies:{buffer:"^6.0.3"},keywords:["puzzle","html","aleo","web3","crypto"],author:"Puzzle",license:"ISC",bugs:{url:"https://github.com/puzzlehq/puzzle-sdk/issues"},homepage:"https://github.com/puzzlehq/puzzle-sdk#readme"},cc=new ta;let ni;async function O2(t){let e=!1;const r=xd.version,n=localStorage.getItem("puzzle_sdk_version");if(r!==n&&(console.log(`${xd.name}: Updated from `+n+" to "+r+"!"),localStorage.setItem("puzzle_sdk_version",r),e=!0),ni=new I2({projectId:_d,metadata:{name:t.dAppName,description:t.dAppDescription,url:t.dAppUrl,icons:[t.dAppIconURL]},modalOptions:{...Ed}}),e)try{$2(ni,t.onDisconnect)}catch(i){console.error(i)}window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")}async function $2(t,e){const r=await(t==null?void 0:t.getSession());r&&(console.log("Disconnecting session",r),e&&e(),t.disconnect({topic:r.topic,reason:Ye("USER_DISCONNECTED")}))}async function Xt(){return new Promise(t=>{if(ni)t(ni);else{const e=setInterval(()=>{ni&&(clearInterval(e),t(ni))},200)}window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")})}const A2=async()=>{const t=await Xt(),e=await t.getSession();if(!e||!t)return{error:"no session or connection"};try{return await t.request({topic:e.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getSelectedAccount"}})}catch(r){const n=r.message;return console.error("getAccount error",n),{error:n}}},T2=async({address:t})=>{const e=await Xt(),r=await e.getSession();if(!r||!e)return{error:"no session or connection"};try{return await e.request({topic:r.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getBalance",params:{assetId:void 0,address:t}}})}catch(n){const i=n.message;return console.error("getBalance error",i),{error:i}}},N2=async()=>{const t=await Xt();if(!t)throw new Error("call setConnection() first!");const e=await t.getSession();if(e)return console.log("Already connected!",e),e;try{const r=await t.connect({requiredNamespaces:{aleo:{methods:oc,chains:oo,events:ac}}});return cc.emit("session_change"),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE"),r}catch(r){console.error("connect error",r.message)}},P2=async t=>{const e=await Xt(),r=await(e==null?void 0:e.getSession());if(!r||!e)return{error:"no session or connection"};const n=t==null?void 0:t.inputs.map(i=>typeof i=="string"?i:i.plaintext);try{return await e.request({topic:r.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"requestCreateEvent",params:{...t,inputs:n}}})}catch(i){const s=i.message;return console.error("createEvent error",s),{error:s}}},R2=async()=>{const t=await Xt(),e=await(t==null?void 0:t.getSession());if(!e||!t)return{error:"no session or connection"};try{return await t.request({topic:e.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"createSharedState",params:{}}})}catch(r){const n=r.message;return console.error("createSharedState error",n),{error:n}}},L2=async t=>{const e=await Xt(),r=await(e==null?void 0:e.getSession());if(!r||!e)return{error:"no session or connection"};try{return await e.request({topic:r.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"decrypt",params:{ciphertexts:t}}})}catch(n){return console.error("decrypt error",n.message),{error:n.message}}},M2=async()=>{const t=await Xt(),e=await(t==null?void 0:t.getSession());if(!e||!t)return{error:"no session or connection"};try{try{await t.disconnect({reason:Ye("USER_DISCONNECTED"),topic:e.topic}),cc.emit("session_change")}catch(r){console.warn(r)}return{}}catch(r){const n=r.message;return console.error("error disconnecting",n),{error:n}}},k2=async({id:t,address:e})=>{const r=await Xt(),n=await(r==null?void 0:r.getSession());if(!n||!r)return{event:void 0,error:"no session or connection"};const i=async()=>await r.request({topic:n.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getEvent",params:{id:t,address:e}}});try{return await i()}catch(s){const o=s.message;return console.error("getEvents error",o),{error:o}}},U2=async t=>{const e=await Xt(),r=await(e==null?void 0:e.getSession());if(!r||!e)return{events:void 0,error:"no session or connection"};(t==null?void 0:t.programId)===""&&(t.programId=void 0);const n=async(i=0)=>await e.request({topic:r.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getEvents",params:{filter:t,page:i}}});try{return await n()}catch(i){const s=i.message;return console.error("getEvents error",s),{error:s}}},F2=async t=>{const e=await Xt(),r=await(e==null?void 0:e.getSession());if(!r||!e)return{error:"no session or connection"};try{return await e.request({topic:r.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"importSharedState",params:{seed:t}}})}catch(n){const i=n.message;return console.error("importSharedState error",i),{error:i}}},j2=async({address:t,filter:e,page:r=0})=>{const n=await Xt(),i=await(n==null?void 0:n.getSession());if(!i||!n)return{error:"no session or connection"};const s=async(o=0)=>await n.request({topic:i.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getRecords",params:{address:t,filter:e,page:o}}});try{return await s()}catch(o){const a=o.message;return console.error("getRecords error",a),{error:a}}};var Me;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=n,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Me||(Me={}));var lc;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(lc||(lc={}));const J=Me.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Zr=t=>{switch(typeof t){case"undefined":return J.undefined;case"string":return J.string;case"number":return isNaN(t)?J.nan:J.number;case"boolean":return J.boolean;case"function":return J.function;case"bigint":return J.bigint;case"symbol":return J.symbol;case"object":return Array.isArray(t)?J.array:t===null?J.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?J.promise:typeof Map<"u"&&t instanceof Map?J.map:typeof Set<"u"&&t instanceof Set?J.set:typeof Date<"u"&&t instanceof Date?J.date:J.object;default:return J.unknown}},V=Me.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),B2=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ur extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(s){return s.message},n={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(r(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Me.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}ur.create=t=>new ur(t);const Zi=(t,e)=>{let r;switch(t.code){case V.invalid_type:t.received===J.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case V.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Me.jsonStringifyReplacer)}`;break;case V.unrecognized_keys:r=`Unrecognized key(s) in object: ${Me.joinValues(t.keys,", ")}`;break;case V.invalid_union:r="Invalid input";break;case V.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Me.joinValues(t.options)}`;break;case V.invalid_enum_value:r=`Invalid enum value. Expected ${Me.joinValues(t.options)}, received '${t.received}'`;break;case V.invalid_arguments:r="Invalid function arguments";break;case V.invalid_return_type:r="Invalid function return type";break;case V.invalid_date:r="Invalid date";break;case V.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Me.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case V.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case V.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case V.custom:r="Invalid input";break;case V.invalid_intersection_types:r="Intersection results could not be merged";break;case V.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case V.not_finite:r="Number must be finite";break;default:r=e.defaultError,Me.assertNever(t)}return{message:r}};let Sd=Zi;function z2(t){Sd=t}function ao(){return Sd}const co=t=>{const{data:e,path:r,errorMaps:n,issueData:i}=t,s=[...r,...i.path||[]],o={...i,path:s};let a="";const c=n.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...i,path:s,message:i.message||a}},q2=[];function X(t,e){const r=co({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ao(),Zi].filter(n=>!!n)});t.common.issues.push(r)}class Rt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if(i.status==="aborted")return le;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const i of r)n.push({key:await i.key,value:await i.value});return Rt.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return le;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),(typeof o.value<"u"||i.alwaysSet)&&(n[s.value]=o.value)}return{status:e.value,value:n}}}const le=Object.freeze({status:"aborted"}),Cd=t=>({status:"dirty",value:t}),zt=t=>({status:"valid",value:t}),uc=t=>t.status==="aborted",hc=t=>t.status==="dirty",lo=t=>t.status==="valid",uo=t=>typeof Promise<"u"&&t instanceof Promise;var se;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(se||(se={}));class xr{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Id=(t,e)=>{if(lo(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new ur(t.common.issues);return this._error=r,this._error}}};function ge(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:i}}class ve{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Zr(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Zr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Rt,ctx:{common:e.parent.common,data:e.data,parsedType:Zr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(uo(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zr(e)},s=this._parseSync({data:e,path:i.path,parent:i});return Id(i,s)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zr(e)},i=this._parse({data:e,path:n.path,parent:n}),s=await(uo(i)?i:Promise.resolve(i));return Id(n,s)}refine(e,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:V.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new fr({schema:this,typeName:oe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Lr.create(this,this._def)}nullable(){return $n.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return dr.create(this,this._def)}promise(){return ai.create(this,this._def)}or(e){return Qi.create([this,e],this._def)}and(e){return Xi.create(this,e,this._def)}transform(e){return new fr({...ge(this._def),schema:this,typeName:oe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new is({...ge(this._def),innerType:this,defaultValue:r,typeName:oe.ZodDefault})}brand(){return new Od({typeName:oe.ZodBranded,type:this,...ge(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new yo({...ge(this._def),innerType:this,catchValue:r,typeName:oe.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return ss.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const W2=/^c[^\s-]{8,}$/i,V2=/^[a-z][a-z0-9]*$/,H2=/[0-9A-HJKMNP-TV-Z]{26}/,K2=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Z2=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,G2=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u"),Y2=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,J2=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Q2=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function X2(t,e){return!!((e==="v4"||!e)&&Y2.test(t)||(e==="v6"||!e)&&J2.test(t))}class hr extends ve{constructor(){super(...arguments),this._regex=(e,r,n)=>this.refinement(i=>e.test(i),{validation:r,code:V.invalid_string,...se.errToObj(n)}),this.nonempty=e=>this.min(1,se.errToObj(e)),this.trim=()=>new hr({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new hr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new hr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==J.string){const s=this._getOrReturnCtx(e);return X(s,{code:V.invalid_type,expected:J.string,received:s.parsedType}),le}const n=new Rt;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:V.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:V.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?X(i,{code:V.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&X(i,{code:V.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")Z2.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"email",code:V.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")G2.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"emoji",code:V.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")K2.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"uuid",code:V.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")W2.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid",code:V.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")V2.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid2",code:V.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")H2.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ulid",code:V.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),X(i,{validation:"url",code:V.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"regex",code:V.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),X(i,{code:V.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:V.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:V.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?Q2(s).test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:V.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="ip"?X2(e.data,s.version)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ip",code:V.invalid_string,message:s.message}),n.dirty()):Me.assertNever(s);return{status:n.value,value:e.data}}_addCheck(e){return new hr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...se.errToObj(e)})}url(e){return this._addCheck({kind:"url",...se.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...se.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...se.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...se.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...se.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...se.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...se.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,...se.errToObj(e==null?void 0:e.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...se.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...se.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...se.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...se.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...se.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...se.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...se.errToObj(r)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}hr.create=t=>{var e;return new hr({checks:[],typeName:oe.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ge(t)})};function e3(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class Gr extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==J.number){const s=this._getOrReturnCtx(e);return X(s,{code:V.invalid_type,expected:J.number,received:s.parsedType}),le}let n;const i=new Rt;for(const s of this._def.checks)s.kind==="int"?Me.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),X(n,{code:V.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:V.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:V.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?e3(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),X(n,{code:V.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),X(n,{code:V.not_finite,message:s.message}),i.dirty()):Me.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,se.toString(r))}gt(e,r){return this.setLimit("min",e,!1,se.toString(r))}lte(e,r){return this.setLimit("max",e,!0,se.toString(r))}lt(e,r){return this.setLimit("max",e,!1,se.toString(r))}setLimit(e,r,n,i){return new Gr({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:se.toString(i)}]})}_addCheck(e){return new Gr({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:se.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:se.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:se.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:se.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:se.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:se.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Me.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}Gr.create=t=>new Gr({checks:[],typeName:oe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...ge(t)});class Yr extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==J.bigint){const s=this._getOrReturnCtx(e);return X(s,{code:V.invalid_type,expected:J.bigint,received:s.parsedType}),le}let n;const i=new Rt;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:V.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:V.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),X(n,{code:V.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Me.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,se.toString(r))}gt(e,r){return this.setLimit("min",e,!1,se.toString(r))}lte(e,r){return this.setLimit("max",e,!0,se.toString(r))}lt(e,r){return this.setLimit("max",e,!1,se.toString(r))}setLimit(e,r,n,i){return new Yr({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:se.toString(i)}]})}_addCheck(e){return new Yr({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:se.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:se.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Yr.create=t=>{var e;return new Yr({checks:[],typeName:oe.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ge(t)})};class Gi extends ve{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==J.boolean){const n=this._getOrReturnCtx(e);return X(n,{code:V.invalid_type,expected:J.boolean,received:n.parsedType}),le}return zt(e.data)}}Gi.create=t=>new Gi({typeName:oe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...ge(t)});class In extends ve{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==J.date){const s=this._getOrReturnCtx(e);return X(s,{code:V.invalid_type,expected:J.date,received:s.parsedType}),le}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return X(s,{code:V.invalid_date}),le}const n=new Rt;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:V.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:V.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):Me.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new In({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:se.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:se.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}In.create=t=>new In({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:oe.ZodDate,...ge(t)});class ho extends ve{_parse(e){if(this._getType(e)!==J.symbol){const n=this._getOrReturnCtx(e);return X(n,{code:V.invalid_type,expected:J.symbol,received:n.parsedType}),le}return zt(e.data)}}ho.create=t=>new ho({typeName:oe.ZodSymbol,...ge(t)});class Yi extends ve{_parse(e){if(this._getType(e)!==J.undefined){const n=this._getOrReturnCtx(e);return X(n,{code:V.invalid_type,expected:J.undefined,received:n.parsedType}),le}return zt(e.data)}}Yi.create=t=>new Yi({typeName:oe.ZodUndefined,...ge(t)});class Ji extends ve{_parse(e){if(this._getType(e)!==J.null){const n=this._getOrReturnCtx(e);return X(n,{code:V.invalid_type,expected:J.null,received:n.parsedType}),le}return zt(e.data)}}Ji.create=t=>new Ji({typeName:oe.ZodNull,...ge(t)});class ii extends ve{constructor(){super(...arguments),this._any=!0}_parse(e){return zt(e.data)}}ii.create=t=>new ii({typeName:oe.ZodAny,...ge(t)});class Dn extends ve{constructor(){super(...arguments),this._unknown=!0}_parse(e){return zt(e.data)}}Dn.create=t=>new Dn({typeName:oe.ZodUnknown,...ge(t)});class Rr extends ve{_parse(e){const r=this._getOrReturnCtx(e);return X(r,{code:V.invalid_type,expected:J.never,received:r.parsedType}),le}}Rr.create=t=>new Rr({typeName:oe.ZodNever,...ge(t)});class fo extends ve{_parse(e){if(this._getType(e)!==J.undefined){const n=this._getOrReturnCtx(e);return X(n,{code:V.invalid_type,expected:J.void,received:n.parsedType}),le}return zt(e.data)}}fo.create=t=>new fo({typeName:oe.ZodVoid,...ge(t)});class dr extends ve{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==J.array)return X(r,{code:V.invalid_type,expected:J.array,received:r.parsedType}),le;if(i.exactLength!==null){const o=r.data.length>i.exactLength.value,a=r.data.length<i.exactLength.value;(o||a)&&(X(r,{code:o?V.too_big:V.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(X(r,{code:V.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(X(r,{code:V.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>i.type._parseAsync(new xr(r,o,r.path,a)))).then(o=>Rt.mergeArray(n,o));const s=[...r.data].map((o,a)=>i.type._parseSync(new xr(r,o,r.path,a)));return Rt.mergeArray(n,s)}get element(){return this._def.type}min(e,r){return new dr({...this._def,minLength:{value:e,message:se.toString(r)}})}max(e,r){return new dr({...this._def,maxLength:{value:e,message:se.toString(r)}})}length(e,r){return new dr({...this._def,exactLength:{value:e,message:se.toString(r)}})}nonempty(e){return this.min(1,e)}}dr.create=(t,e)=>new dr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:oe.ZodArray,...ge(e)});function si(t){if(t instanceof Je){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=Lr.create(si(n))}return new Je({...t._def,shape:()=>e})}else return t instanceof dr?new dr({...t._def,type:si(t.element)}):t instanceof Lr?Lr.create(si(t.unwrap())):t instanceof $n?$n.create(si(t.unwrap())):t instanceof Sr?Sr.create(t.items.map(e=>si(e))):t}class Je extends ve{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=Me.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==J.object){const l=this._getOrReturnCtx(e);return X(l,{code:V.invalid_type,expected:J.object,received:l.parsedType}),le}const{status:n,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Rr&&this._def.unknownKeys==="strip"))for(const l in i.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const h=s[l],f=i.data[l];c.push({key:{status:"valid",value:l},value:h._parse(new xr(i,f,i.path,l)),alwaysSet:l in i.data})}if(this._def.catchall instanceof Rr){const l=this._def.unknownKeys;if(l==="passthrough")for(const h of a)c.push({key:{status:"valid",value:h},value:{status:"valid",value:i.data[h]}});else if(l==="strict")a.length>0&&(X(i,{code:V.unrecognized_keys,keys:a}),n.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const h of a){const f=i.data[h];c.push({key:{status:"valid",value:h},value:l._parse(new xr(i,f,i.path,h)),alwaysSet:h in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const l=[];for(const h of c){const f=await h.key;l.push({key:f,value:await h.value,alwaysSet:h.alwaysSet})}return l}).then(l=>Rt.mergeObjectSync(n,l)):Rt.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return se.errToObj,new Je({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,s,o,a;const c=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=se.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Je({...this._def,unknownKeys:"strip"})}passthrough(){return new Je({...this._def,unknownKeys:"passthrough"})}extend(e){return new Je({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Je({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:oe.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Je({...this._def,catchall:e})}pick(e){const r={};return Me.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new Je({...this._def,shape:()=>r})}omit(e){const r={};return Me.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new Je({...this._def,shape:()=>r})}deepPartial(){return si(this)}partial(e){const r={};return Me.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new Je({...this._def,shape:()=>r})}required(e){const r={};return Me.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof Lr;)s=s._def.innerType;r[n]=s}}),new Je({...this._def,shape:()=>r})}keyof(){return Dd(Me.objectKeys(this.shape))}}Je.create=(t,e)=>new Je({shape:()=>t,unknownKeys:"strip",catchall:Rr.create(),typeName:oe.ZodObject,...ge(e)}),Je.strictCreate=(t,e)=>new Je({shape:()=>t,unknownKeys:"strict",catchall:Rr.create(),typeName:oe.ZodObject,...ge(e)}),Je.lazycreate=(t,e)=>new Je({shape:t,unknownKeys:"strip",catchall:Rr.create(),typeName:oe.ZodObject,...ge(e)});class Qi extends ve{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new ur(a.ctx.common.issues));return X(r,{code:V.invalid_union,unionErrors:o}),le}if(r.common.async)return Promise.all(n.map(async s=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of n){const l={...r,common:{...r.common,issues:[]},parent:null},h=c._parseSync({data:r.data,path:r.path,parent:l});if(h.status==="valid")return h;h.status==="dirty"&&!s&&(s={result:h,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(c=>new ur(c));return X(r,{code:V.invalid_union,unionErrors:a}),le}}get options(){return this._def.options}}Qi.create=(t,e)=>new Qi({options:t,typeName:oe.ZodUnion,...ge(e)});const po=t=>t instanceof ts?po(t.schema):t instanceof fr?po(t.innerType()):t instanceof rs?[t.value]:t instanceof Jr?t.options:t instanceof ns?Object.keys(t.enum):t instanceof is?po(t._def.innerType):t instanceof Yi?[void 0]:t instanceof Ji?[null]:null;class go extends ve{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.object)return X(r,{code:V.invalid_type,expected:J.object,received:r.parsedType}),le;const n=this.discriminator,i=r.data[n],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(X(r,{code:V.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),le)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const i=new Map;for(const s of r){const o=po(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new go({typeName:oe.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...ge(n)})}}function dc(t,e){const r=Zr(t),n=Zr(e);if(t===e)return{valid:!0,data:t};if(r===J.object&&n===J.object){const i=Me.objectKeys(e),s=Me.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const c=dc(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===J.array&&n===J.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],c=dc(o,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return r===J.date&&n===J.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Xi extends ve{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=(s,o)=>{if(uc(s)||uc(o))return le;const a=dc(s.value,o.value);return a.valid?((hc(s)||hc(o))&&r.dirty(),{status:r.value,value:a.data}):(X(n,{code:V.invalid_intersection_types}),le)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Xi.create=(t,e,r)=>new Xi({left:t,right:e,typeName:oe.ZodIntersection,...ge(r)});class Sr extends ve{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.array)return X(n,{code:V.invalid_type,expected:J.array,received:n.parsedType}),le;if(n.data.length<this._def.items.length)return X(n,{code:V.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),le;!this._def.rest&&n.data.length>this._def.items.length&&(X(n,{code:V.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new xr(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(s).then(o=>Rt.mergeArray(r,o)):Rt.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new Sr({...this._def,rest:e})}}Sr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Sr({items:t,typeName:oe.ZodTuple,rest:null,...ge(e)})};class es extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.object)return X(n,{code:V.invalid_type,expected:J.object,received:n.parsedType}),le;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in n.data)i.push({key:s._parse(new xr(n,a,n.path,a)),value:o._parse(new xr(n,n.data[a],n.path,a))});return n.common.async?Rt.mergeObjectAsync(r,i):Rt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ve?new es({keyType:e,valueType:r,typeName:oe.ZodRecord,...ge(n)}):new es({keyType:hr.create(),valueType:e,typeName:oe.ZodRecord,...ge(r)})}}class mo extends ve{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.map)return X(n,{code:V.invalid_type,expected:J.map,received:n.parsedType}),le;const i=this._def.keyType,s=this._def.valueType,o=[...n.data.entries()].map(([a,c],l)=>({key:i._parse(new xr(n,a,n.path,[l,"key"])),value:s._parse(new xr(n,c,n.path,[l,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,h=await c.value;if(l.status==="aborted"||h.status==="aborted")return le;(l.status==="dirty"||h.status==="dirty")&&r.dirty(),a.set(l.value,h.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,h=c.value;if(l.status==="aborted"||h.status==="aborted")return le;(l.status==="dirty"||h.status==="dirty")&&r.dirty(),a.set(l.value,h.value)}return{status:r.value,value:a}}}}mo.create=(t,e,r)=>new mo({valueType:e,keyType:t,typeName:oe.ZodMap,...ge(r)});class On extends ve{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.set)return X(n,{code:V.invalid_type,expected:J.set,received:n.parsedType}),le;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(X(n,{code:V.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(X(n,{code:V.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const s=this._def.valueType;function o(c){const l=new Set;for(const h of c){if(h.status==="aborted")return le;h.status==="dirty"&&r.dirty(),l.add(h.value)}return{status:r.value,value:l}}const a=[...n.data.values()].map((c,l)=>s._parse(new xr(n,c,n.path,l)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new On({...this._def,minSize:{value:e,message:se.toString(r)}})}max(e,r){return new On({...this._def,maxSize:{value:e,message:se.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}On.create=(t,e)=>new On({valueType:t,minSize:null,maxSize:null,typeName:oe.ZodSet,...ge(e)});class oi extends ve{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.function)return X(r,{code:V.invalid_type,expected:J.function,received:r.parsedType}),le;function n(a,c){return co({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ao(),Zi].filter(l=>!!l),issueData:{code:V.invalid_arguments,argumentsError:c}})}function i(a,c){return co({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ao(),Zi].filter(l=>!!l),issueData:{code:V.invalid_return_type,returnTypeError:c}})}const s={errorMap:r.common.contextualErrorMap},o=r.data;return this._def.returns instanceof ai?zt(async(...a)=>{const c=new ur([]),l=await this._def.args.parseAsync(a,s).catch(p=>{throw c.addIssue(n(a,p)),c}),h=await o(...l);return await this._def.returns._def.type.parseAsync(h,s).catch(p=>{throw c.addIssue(i(h,p)),c})}):zt((...a)=>{const c=this._def.args.safeParse(a,s);if(!c.success)throw new ur([n(a,c.error)]);const l=o(...c.data),h=this._def.returns.safeParse(l,s);if(!h.success)throw new ur([i(l,h.error)]);return h.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new oi({...this._def,args:Sr.create(e).rest(Dn.create())})}returns(e){return new oi({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new oi({args:e||Sr.create([]).rest(Dn.create()),returns:r||Dn.create(),typeName:oe.ZodFunction,...ge(n)})}}class ts extends ve{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}ts.create=(t,e)=>new ts({getter:t,typeName:oe.ZodLazy,...ge(e)});class rs extends ve{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return X(r,{received:r.data,code:V.invalid_literal,expected:this._def.value}),le}return{status:"valid",value:e.data}}get value(){return this._def.value}}rs.create=(t,e)=>new rs({value:t,typeName:oe.ZodLiteral,...ge(e)});function Dd(t,e){return new Jr({values:t,typeName:oe.ZodEnum,...ge(e)})}class Jr extends ve{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return X(r,{expected:Me.joinValues(n),received:r.parsedType,code:V.invalid_type}),le}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return X(r,{received:r.data,code:V.invalid_enum_value,options:n}),le}return zt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return Jr.create(e)}exclude(e){return Jr.create(this.options.filter(r=>!e.includes(r)))}}Jr.create=Dd;class ns extends ve{_parse(e){const r=Me.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==J.string&&n.parsedType!==J.number){const i=Me.objectValues(r);return X(n,{expected:Me.joinValues(i),received:n.parsedType,code:V.invalid_type}),le}if(r.indexOf(e.data)===-1){const i=Me.objectValues(r);return X(n,{received:n.data,code:V.invalid_enum_value,options:i}),le}return zt(e.data)}get enum(){return this._def.values}}ns.create=(t,e)=>new ns({values:t,typeName:oe.ZodNativeEnum,...ge(e)});class ai extends ve{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.promise&&r.common.async===!1)return X(r,{code:V.invalid_type,expected:J.promise,received:r.parsedType}),le;const n=r.parsedType===J.promise?r.data:Promise.resolve(r.data);return zt(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}ai.create=(t,e)=>new ai({type:t,typeName:oe.ZodPromise,...ge(e)});class fr extends ve{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===oe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null;if(i.type==="preprocess"){const o=i.transform(n.data);return n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}const s={addIssue:o=>{X(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="refinement"){const o=a=>{const c=i.refinement(a,s);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?le:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?le:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(i.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!lo(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>lo(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:r.value,value:a})):o);Me.assertNever(i)}}fr.create=(t,e,r)=>new fr({schema:t,typeName:oe.ZodEffects,effect:e,...ge(r)}),fr.createWithPreprocess=(t,e,r)=>new fr({schema:e,effect:{type:"preprocess",transform:t},typeName:oe.ZodEffects,...ge(r)});class Lr extends ve{_parse(e){return this._getType(e)===J.undefined?zt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Lr.create=(t,e)=>new Lr({innerType:t,typeName:oe.ZodOptional,...ge(e)});class $n extends ve{_parse(e){return this._getType(e)===J.null?zt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$n.create=(t,e)=>new $n({innerType:t,typeName:oe.ZodNullable,...ge(e)});class is extends ve{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===J.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}is.create=(t,e)=>new is({innerType:t,typeName:oe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ge(e)});class yo extends ve{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return uo(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ur(n.common.issues)}})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ur(n.common.issues)}})}}removeCatch(){return this._def.innerType}}yo.create=(t,e)=>new yo({innerType:t,typeName:oe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ge(e)});class wo extends ve{_parse(e){if(this._getType(e)!==J.nan){const n=this._getOrReturnCtx(e);return X(n,{code:V.invalid_type,expected:J.nan,received:n.parsedType}),le}return{status:"valid",value:e.data}}}wo.create=t=>new wo({typeName:oe.ZodNaN,...ge(t)});const t3=Symbol("zod_brand");class Od extends ve{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class ss extends ve{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?le:s.status==="dirty"?(r.dirty(),Cd(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?le:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new ss({in:e,out:r,typeName:oe.ZodPipeline})}}const $d=(t,e={},r)=>t?ii.create().superRefine((n,i)=>{var s,o;if(!t(n)){const a=typeof e=="function"?e(n):e,c=(o=(s=a.fatal)!==null&&s!==void 0?s:r)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...l,fatal:c})}}):ii.create(),r3={object:Je.lazycreate};var oe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(oe||(oe={}));const n3=(t,e={message:`Input not instance of ${t.name}`})=>$d(r=>r instanceof t,e),Ad=hr.create,Td=Gr.create,i3=wo.create,s3=Yr.create,Nd=Gi.create,o3=In.create,a3=ho.create,c3=Yi.create,l3=Ji.create,u3=ii.create,h3=Dn.create,d3=Rr.create,f3=fo.create,p3=dr.create,g3=Je.create,m3=Je.strictCreate,y3=Qi.create,w3=go.create,v3=Xi.create,b3=Sr.create,_3=es.create,E3=mo.create,x3=On.create,S3=oi.create,C3=ts.create,I3=rs.create,D3=Jr.create,O3=ns.create,$3=ai.create,Pd=fr.create,A3=Lr.create,T3=$n.create,N3=fr.createWithPreprocess,P3=ss.create;var pr=Object.freeze({__proto__:null,defaultErrorMap:Zi,setErrorMap:z2,getErrorMap:ao,makeIssue:co,EMPTY_PATH:q2,addIssueToContext:X,ParseStatus:Rt,INVALID:le,DIRTY:Cd,OK:zt,isAborted:uc,isDirty:hc,isValid:lo,isAsync:uo,get util(){return Me},get objectUtil(){return lc},ZodParsedType:J,getParsedType:Zr,ZodType:ve,ZodString:hr,ZodNumber:Gr,ZodBigInt:Yr,ZodBoolean:Gi,ZodDate:In,ZodSymbol:ho,ZodUndefined:Yi,ZodNull:Ji,ZodAny:ii,ZodUnknown:Dn,ZodNever:Rr,ZodVoid:fo,ZodArray:dr,ZodObject:Je,ZodUnion:Qi,ZodDiscriminatedUnion:go,ZodIntersection:Xi,ZodTuple:Sr,ZodRecord:es,ZodMap:mo,ZodSet:On,ZodFunction:oi,ZodLazy:ts,ZodLiteral:rs,ZodEnum:Jr,ZodNativeEnum:ns,ZodPromise:ai,ZodEffects:fr,ZodTransformer:fr,ZodOptional:Lr,ZodNullable:$n,ZodDefault:is,ZodCatch:yo,ZodNaN:wo,BRAND:t3,ZodBranded:Od,ZodPipeline:ss,custom:$d,Schema:ve,ZodSchema:ve,late:r3,get ZodFirstPartyTypeKind(){return oe},coerce:{string:t=>hr.create({...t,coerce:!0}),number:t=>Gr.create({...t,coerce:!0}),boolean:t=>Gi.create({...t,coerce:!0}),bigint:t=>Yr.create({...t,coerce:!0}),date:t=>In.create({...t,coerce:!0})},any:u3,array:p3,bigint:s3,boolean:Nd,date:o3,discriminatedUnion:w3,effect:Pd,enum:D3,function:S3,instanceof:n3,intersection:v3,lazy:C3,literal:I3,map:E3,nan:i3,nativeEnum:O3,never:d3,null:l3,nullable:T3,number:Td,object:g3,oboolean:()=>Nd().optional(),onumber:()=>Td().optional(),optional:A3,ostring:()=>Ad().optional(),pipeline:P3,preprocess:N3,promise:$3,record:_3,set:x3,strictObject:m3,string:Ad,symbol:a3,transformer:Pd,tuple:b3,undefined:c3,union:y3,unknown:h3,void:f3,NEVER:le,ZodIssueCode:V,quotelessJson:B2,ZodError:ur});const fc=/^aleo1[a-z0-9]{58}$/i,Rd=/^AViewKey1[a-z0-9]{44}$/i,Ld=/^APrivateKey1[a-z0-9]{47}$/i,Md=/^at1[a-z0-9]{58}$/i,kd=/^\d+field$/,Ud=/^\d+u32$/,Fd=/^\d+u64$/,R3=pr.string().regex(fc),L3=pr.string().regex(Rd),M3=pr.string().regex(Ld),k3=pr.string().regex(Md),U3=pr.string().regex(kd),F3=pr.string().regex(Ud),j3=pr.string().regex(Fd);var jd;(function(t){t.Record="record",t.OutputRecord="outputRecord",t.Public="public",t.Private="private",t.Constant="constant",t.Future="future",t.ExternalRecord="external_record"})(jd||(jd={})),re.EventType=void 0,function(t){t.Deploy="Deploy",t.Execute="Execute",t.Send="Send",t.Receive="Receive",t.Join="Join",t.Split="Split",t.Shield="Shield",t.Unshield="Unshield"}(re.EventType||(re.EventType={})),re.EventStatus=void 0,function(t){t.Creating="Creating",t.Pending="Pending",t.Settled="Settled",t.Failed="Failed"}(re.EventStatus||(re.EventStatus={})),re.Visibility=void 0,function(t){t.Private="Private",t.Public="Public"}(re.Visibility||(re.Visibility={})),re.Network=void 0,function(t){t.AleoTestnet="AleoTestnet",t.AleoMainnet="AleoMainnet"}(re.Network||(re.Network={})),re.AssetType=void 0,function(t){t[t.ALEO=0]="ALEO"}(re.AssetType||(re.AssetType={}));const B3=pr.nativeEnum(re.EventType),z3=pr.nativeEnum(re.EventStatus),q3=pr.nativeEnum(re.Network),W3=pr.nativeEnum(re.Visibility),V3=async({message:t,address:e})=>{const r=await Xt(),n=await(r==null?void 0:r.getSession());if(!n||!r)return{error:"no session or connection"};try{return await r.request({topic:n.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"requestSignature",params:{message:t,address:fc.test(e??"")?e:void 0}}})}catch(i){const s=i.message;return console.error("signature error",s),{error:s}}},H3=20;var pc={exports:{}},gc,Bd;function K3(){if(Bd)return gc;Bd=1;var t=1e3,e=t*60,r=e*60,n=r*24,i=n*7,s=n*365.25;gc=function(h,f){f=f||{};var p=typeof h;if(p==="string"&&h.length>0)return o(h);if(p==="number"&&isFinite(h))return f.long?c(h):a(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))};function o(h){if(h=String(h),!(h.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(f){var p=parseFloat(f[1]),y=(f[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return p*s;case"weeks":case"week":case"w":return p*i;case"days":case"day":case"d":return p*n;case"hours":case"hour":case"hrs":case"hr":case"h":return p*r;case"minutes":case"minute":case"mins":case"min":case"m":return p*e;case"seconds":case"second":case"secs":case"sec":case"s":return p*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function a(h){var f=Math.abs(h);return f>=n?Math.round(h/n)+"d":f>=r?Math.round(h/r)+"h":f>=e?Math.round(h/e)+"m":f>=t?Math.round(h/t)+"s":h+"ms"}function c(h){var f=Math.abs(h);return f>=n?l(h,f,n,"day"):f>=r?l(h,f,r,"hour"):f>=e?l(h,f,e,"minute"):f>=t?l(h,f,t,"second"):h+" ms"}function l(h,f,p,y){var v=f>=p*1.5;return Math.round(h/p)+" "+y+(v?"s":"")}return gc}function Z3(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=K3(),r.destroy=l,Object.keys(t).forEach(h=>{r[h]=t[h]}),r.names=[],r.skips=[],r.formatters={};function e(h){let f=0;for(let p=0;p<h.length;p++)f=(f<<5)-f+h.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(h){let f,p=null,y,v;function x(...O){if(!x.enabled)return;const I=x,_=Number(new Date),S=_-(f||_);I.diff=S,I.prev=f,I.curr=_,f=_,O[0]=r.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");let w=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,(g,u)=>{if(g==="%%")return"%";w++;const m=r.formatters[u];if(typeof m=="function"){const $=O[w];g=m.call(I,$),O.splice(w,1),w--}return g}),r.formatArgs.call(I,O),(I.log||r.log).apply(I,O)}return x.namespace=h,x.useColors=r.useColors(),x.color=r.selectColor(h),x.extend=n,x.destroy=r.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(y!==r.namespaces&&(y=r.namespaces,v=r.enabled(h)),v),set:O=>{p=O}}),typeof r.init=="function"&&r.init(x),x}function n(h,f){const p=r(this.namespace+(typeof f>"u"?":":f)+h);return p.log=this.log,p}function i(h){r.save(h),r.namespaces=h,r.names=[],r.skips=[];let f;const p=(typeof h=="string"?h:"").split(/[\s,]+/),y=p.length;for(f=0;f<y;f++)p[f]&&(h=p[f].replace(/\*/g,".*?"),h[0]==="-"?r.skips.push(new RegExp("^"+h.slice(1)+"$")):r.names.push(new RegExp("^"+h+"$")))}function s(){const h=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),h}function o(h){if(h[h.length-1]==="*")return!0;let f,p;for(f=0,p=r.skips.length;f<p;f++)if(r.skips[f].test(h))return!1;for(f=0,p=r.names.length;f<p;f++)if(r.names[f].test(h))return!0;return!1}function a(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}function c(h){return h instanceof Error?h.stack||h.message:h}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var G3=Z3;(function(t,e){e.formatArgs=n,e.save=i,e.load=s,e.useColors=r,e.storage=o(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;c.splice(1,0,l,"color: inherit");let h=0,f=0;c[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(h++,p==="%c"&&(f=h))}),c.splice(f,0,l)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function s(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function o(){try{return localStorage}catch{}}t.exports=G3(e);const{formatters:a}=t.exports;a.j=function(c){try{return JSON.stringify(c)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(pc,pc.exports);var Y3=pc.exports;const zd=Ts(Y3)("wallet:sdk");zd.enabled=!0;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const vo=window,mc=vo.ShadowRoot&&(vo.ShadyCSS===void 0||vo.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,yc=Symbol(),qd=new WeakMap;let Wd=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==yc)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(mc&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=qd.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&qd.set(r,e))}return e}toString(){return this.cssText}};const J3=t=>new Wd(typeof t=="string"?t:t+"",void 0,yc),Ue=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,i,s)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new Wd(r,t,yc)},Q3=(t,e)=>{mc?t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet):e.forEach(r=>{const n=document.createElement("style"),i=vo.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)})},Vd=mc?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return J3(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var wc;const bo=window,Hd=bo.trustedTypes,X3=Hd?Hd.emptyScript:"",Kd=bo.reactiveElementPolyfillSupport,vc={toAttribute(t,e){switch(e){case Boolean:t=t?X3:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},Zd=(t,e)=>e!==t&&(e==e||t==t),bc={attribute:!0,type:String,converter:vc,reflect:!1,hasChanged:Zd},_c="finalized";let ci=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var r;this.finalize(),((r=this.h)!==null&&r!==void 0?r:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((r,n)=>{const i=this._$Ep(n,r);i!==void 0&&(this._$Ev.set(i,n),e.push(i))}),e}static createProperty(e,r=bc){if(r.state&&(r.attribute=!1),this.finalize(),this.elementProperties.set(e,r),!r.noAccessor&&!this.prototype.hasOwnProperty(e)){const n=typeof e=="symbol"?Symbol():"__"+e,i=this.getPropertyDescriptor(e,n,r);i!==void 0&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){return{get(){return this[r]},set(i){const s=this[e];this[r]=i,this.requestUpdate(e,s,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||bc}static finalize(){if(this.hasOwnProperty(_c))return!1;this[_c]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const r=this.properties,n=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(const i of n)this.createProperty(i,r[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const i of n)r.unshift(Vd(i))}else e!==void 0&&r.push(Vd(e));return r}static _$Ep(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(r=>r(this))}addController(e){var r,n;((r=this._$ES)!==null&&r!==void 0?r:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)===null||n===void 0||n.call(e))}removeController(e){var r;(r=this._$ES)===null||r===void 0||r.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,r)=>{this.hasOwnProperty(r)&&(this._$Ei.set(r,this[r]),delete this[r])})}createRenderRoot(){var e;const r=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return Q3(r,this.constructor.elementStyles),r}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostConnected)===null||n===void 0?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostDisconnected)===null||n===void 0?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$EO(e,r,n=bc){var i;const s=this.constructor._$Ep(e,n);if(s!==void 0&&n.reflect===!0){const o=(((i=n.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?n.converter:vc).toAttribute(r,n.type);this._$El=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$El=null}}_$AK(e,r){var n;const i=this.constructor,s=i._$Ev.get(e);if(s!==void 0&&this._$El!==s){const o=i.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((n=o.converter)===null||n===void 0?void 0:n.fromAttribute)!==void 0?o.converter:vc;this._$El=s,this[s]=a.fromAttribute(r,o.type),this._$El=null}}requestUpdate(e,r,n){let i=!0;e!==void 0&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||Zd)(this[e],r)?(this._$AL.has(e)||this._$AL.set(e,r),n.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,s)=>this[s]=i),this._$Ei=void 0);let r=!1;const n=this._$AL;try{r=this.shouldUpdate(n),r?(this.willUpdate(n),(e=this._$ES)===null||e===void 0||e.forEach(i=>{var s;return(s=i.hostUpdate)===null||s===void 0?void 0:s.call(i)}),this.update(n)):this._$Ek()}catch(i){throw r=!1,this._$Ek(),i}r&&this._$AE(n)}willUpdate(e){}_$AE(e){var r;(r=this._$ES)===null||r===void 0||r.forEach(n=>{var i;return(i=n.hostUpdated)===null||i===void 0?void 0:i.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((r,n)=>this._$EO(n,this[n],r)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};ci[_c]=!0,ci.elementProperties=new Map,ci.elementStyles=[],ci.shadowRootOptions={mode:"open"},Kd==null||Kd({ReactiveElement:ci}),((wc=bo.reactiveElementVersions)!==null&&wc!==void 0?wc:bo.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Ec;const _o=window,li=_o.trustedTypes,Gd=li?li.createPolicy("lit-html",{createHTML:t=>t}):void 0,xc="$lit$",Qr=`lit$${(Math.random()+"").slice(9)}$`,Yd="?"+Qr,e5=`<${Yd}>`,An=document,os=()=>An.createComment(""),as=t=>t===null||typeof t!="object"&&typeof t!="function",Jd=Array.isArray,t5=t=>Jd(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Sc=`[ 	
\f\r]`,cs=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Qd=/-->/g,Xd=/>/g,Tn=RegExp(`>|${Sc}(?:([^\\s"'>=/]+)(${Sc}*=${Sc}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),ef=/'/g,tf=/"/g,rf=/^(?:script|style|textarea|title)$/i,nf=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),Y=nf(1),Xe=nf(2),Nn=Symbol.for("lit-noChange"),dt=Symbol.for("lit-nothing"),sf=new WeakMap,Pn=An.createTreeWalker(An,129,null,!1);function of(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Gd!==void 0?Gd.createHTML(e):e}const r5=(t,e)=>{const r=t.length-1,n=[];let i,s=e===2?"<svg>":"",o=cs;for(let a=0;a<r;a++){const c=t[a];let l,h,f=-1,p=0;for(;p<c.length&&(o.lastIndex=p,h=o.exec(c),h!==null);)p=o.lastIndex,o===cs?h[1]==="!--"?o=Qd:h[1]!==void 0?o=Xd:h[2]!==void 0?(rf.test(h[2])&&(i=RegExp("</"+h[2],"g")),o=Tn):h[3]!==void 0&&(o=Tn):o===Tn?h[0]===">"?(o=i??cs,f=-1):h[1]===void 0?f=-2:(f=o.lastIndex-h[2].length,l=h[1],o=h[3]===void 0?Tn:h[3]==='"'?tf:ef):o===tf||o===ef?o=Tn:o===Qd||o===Xd?o=cs:(o=Tn,i=void 0);const y=o===Tn&&t[a+1].startsWith("/>")?" ":"";s+=o===cs?c+e5:f>=0?(n.push(l),c.slice(0,f)+xc+c.slice(f)+Qr+y):c+Qr+(f===-2?(n.push(void 0),a):y)}return[of(t,s+(t[r]||"<?>")+(e===2?"</svg>":"")),n]};class ls{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[l,h]=r5(e,r);if(this.el=ls.createElement(l,n),Pn.currentNode=this.el.content,r===2){const f=this.el.content,p=f.firstChild;p.remove(),f.append(...p.childNodes)}for(;(i=Pn.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes()){const f=[];for(const p of i.getAttributeNames())if(p.endsWith(xc)||p.startsWith(Qr)){const y=h[o++];if(f.push(p),y!==void 0){const v=i.getAttribute(y.toLowerCase()+xc).split(Qr),x=/([.?@])?(.*)/.exec(y);c.push({type:1,index:s,name:x[2],strings:v,ctor:x[1]==="."?i5:x[1]==="?"?o5:x[1]==="@"?a5:Eo})}else c.push({type:6,index:s})}for(const p of f)i.removeAttribute(p)}if(rf.test(i.tagName)){const f=i.textContent.split(Qr),p=f.length-1;if(p>0){i.textContent=li?li.emptyScript:"";for(let y=0;y<p;y++)i.append(f[y],os()),Pn.nextNode(),c.push({type:2,index:++s});i.append(f[p],os())}}}else if(i.nodeType===8)if(i.data===Yd)c.push({type:2,index:s});else{let f=-1;for(;(f=i.data.indexOf(Qr,f+1))!==-1;)c.push({type:7,index:s}),f+=Qr.length-1}s++}}static createElement(e,r){const n=An.createElement("template");return n.innerHTML=e,n}}function ui(t,e,r=t,n){var i,s,o,a;if(e===Nn)return e;let c=n!==void 0?(i=r._$Co)===null||i===void 0?void 0:i[n]:r._$Cl;const l=as(e)?void 0:e._$litDirective$;return(c==null?void 0:c.constructor)!==l&&((s=c==null?void 0:c._$AO)===null||s===void 0||s.call(c,!1),l===void 0?c=void 0:(c=new l(t),c._$AT(t,r,n)),n!==void 0?((o=(a=r)._$Co)!==null&&o!==void 0?o:a._$Co=[])[n]=c:r._$Cl=c),c!==void 0&&(e=ui(t,c._$AS(t,e.values),c,n)),e}class n5{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var r;const{el:{content:n},parts:i}=this._$AD,s=((r=e==null?void 0:e.creationScope)!==null&&r!==void 0?r:An).importNode(n,!0);Pn.currentNode=s;let o=Pn.nextNode(),a=0,c=0,l=i[0];for(;l!==void 0;){if(a===l.index){let h;l.type===2?h=new us(o,o.nextSibling,this,e):l.type===1?h=new l.ctor(o,l.name,l.strings,this,e):l.type===6&&(h=new c5(o,this,e)),this._$AV.push(h),l=i[++c]}a!==(l==null?void 0:l.index)&&(o=Pn.nextNode(),a++)}return Pn.currentNode=An,s}v(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class us{constructor(e,r,n,i){var s;this.type=2,this._$AH=dt,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cp=(s=i==null?void 0:i.isConnected)===null||s===void 0||s}get _$AU(){var e,r;return(r=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&r!==void 0?r:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=ui(this,e,r),as(e)?e===dt||e==null||e===""?(this._$AH!==dt&&this._$AR(),this._$AH=dt):e!==this._$AH&&e!==Nn&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):t5(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==dt&&as(this._$AH)?this._$AA.nextSibling.data=e:this.$(An.createTextNode(e)),this._$AH=e}g(e){var r;const{values:n,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=ls.createElement(of(i.h,i.h[0]),this.options)),i);if(((r=this._$AH)===null||r===void 0?void 0:r._$AD)===s)this._$AH.v(n);else{const o=new n5(s,this),a=o.u(this.options);o.v(n),this.$(a),this._$AH=o}}_$AC(e){let r=sf.get(e.strings);return r===void 0&&sf.set(e.strings,r=new ls(e)),r}T(e){Jd(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const s of e)i===r.length?r.push(n=new us(this.k(os()),this.k(os()),this,this.options)):n=r[i],n._$AI(s),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,r);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var r;this._$AM===void 0&&(this._$Cp=e,(r=this._$AP)===null||r===void 0||r.call(this,e))}}class Eo{constructor(e,r,n,i,s){this.type=1,this._$AH=dt,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=dt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,r=this,n,i){const s=this.strings;let o=!1;if(s===void 0)e=ui(this,e,r,0),o=!as(e)||e!==this._$AH&&e!==Nn,o&&(this._$AH=e);else{const a=e;let c,l;for(e=s[0],c=0;c<s.length-1;c++)l=ui(this,a[n+c],r,c),l===Nn&&(l=this._$AH[c]),o||(o=!as(l)||l!==this._$AH[c]),l===dt?e=dt:e!==dt&&(e+=(l??"")+s[c+1]),this._$AH[c]=l}o&&!i&&this.j(e)}j(e){e===dt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class i5 extends Eo{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===dt?void 0:e}}const s5=li?li.emptyScript:"";let o5=class extends Eo{constructor(){super(...arguments),this.type=4}j(e){e&&e!==dt?this.element.setAttribute(this.name,s5):this.element.removeAttribute(this.name)}};class a5 extends Eo{constructor(e,r,n,i,s){super(e,r,n,i,s),this.type=5}_$AI(e,r=this){var n;if((e=(n=ui(this,e,r,0))!==null&&n!==void 0?n:dt)===Nn)return;const i=this._$AH,s=e===dt&&i!==dt||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,o=e!==dt&&(i===dt||s);s&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,n;typeof this._$AH=="function"?this._$AH.call((n=(r=this.options)===null||r===void 0?void 0:r.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}let c5=class{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){ui(this,e)}};const af=_o.litHtmlPolyfillSupport;af==null||af(ls,us),((Ec=_o.litHtmlVersions)!==null&&Ec!==void 0?Ec:_o.litHtmlVersions=[]).push("2.8.0");const l5=(t,e,r)=>{var n,i;const s=(n=r==null?void 0:r.renderBefore)!==null&&n!==void 0?n:e;let o=s._$litPart$;if(o===void 0){const a=(i=r==null?void 0:r.renderBefore)!==null&&i!==void 0?i:null;s._$litPart$=o=new us(e.insertBefore(os(),a),a,void 0,r??{})}return o._$AI(t),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Cc,Ic;class _e extends ci{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,r;const n=super.createRenderRoot();return(e=(r=this.renderOptions).renderBefore)!==null&&e!==void 0||(r.renderBefore=n.firstChild),n}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=l5(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return Nn}}_e.finalized=!0,_e._$litElement$=!0,(Cc=globalThis.litElementHydrateSupport)===null||Cc===void 0||Cc.call(globalThis,{LitElement:_e});const cf=globalThis.litElementPolyfillSupport;cf==null||cf({LitElement:_e}),((Ic=globalThis.litElementVersions)!==null&&Ic!==void 0?Ic:globalThis.litElementVersions=[]).push("3.3.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ne=t=>e=>typeof e=="function"?((r,n)=>(customElements.define(r,n),n))(t,e):((r,n)=>{const{kind:i,elements:s}=n;return{kind:i,elements:s,finisher(o){customElements.define(r,o)}}})(t,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const u5=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(r){r.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}},h5=(t,e,r)=>{e.constructor.createProperty(r,t)};function me(t){return(e,r)=>r!==void 0?h5(t,e,r):u5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Zt(t){return me({...t,state:!0})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Dc;((Dc=window.HTMLSlotElement)===null||Dc===void 0?void 0:Dc.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const d5={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},f5=t=>(...e)=>({_$litDirective$:t,values:e});class p5{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,n){this._$Ct=e,this._$AM=r,this._$Ci=n}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Mr=f5(class extends p5{constructor(t){var e;if(super(t),t.type!==d5.ATTRIBUTE||t.name!=="class"||((e=t.strings)===null||e===void 0?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,n;if(this.it===void 0){this.it=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!(!((r=this.nt)===null||r===void 0)&&r.has(s))&&this.it.add(s);return this.render(e)}const i=t.element.classList;this.it.forEach(s=>{s in e||(i.remove(s),this.it.delete(s))});for(const s in e){const o=!!e[s];o===this.it.has(s)||!((n=this.nt)===null||n===void 0)&&n.has(s)||(o?(i.add(s),this.it.add(s)):(i.remove(s),this.it.delete(s)))}return Nn}});function g5(t,e){t.indexOf(e)===-1&&t.push(e)}const lf=(t,e,r)=>Math.min(Math.max(r,t),e),ir={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},xo=t=>typeof t=="number",hi=t=>Array.isArray(t)&&!xo(t[0]),m5=(t,e,r)=>{const n=e-t;return((r-t)%n+n)%n+t};function y5(t,e){return hi(t)?t[m5(0,t.length,e)]:t}const uf=(t,e,r)=>-r*t+r*e+t,hf=()=>{},Xr=t=>t,Oc=(t,e,r)=>e-t===0?1:(r-t)/(e-t);function df(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=Oc(0,e,n);t.push(uf(r,1,i))}}function w5(t){const e=[0];return df(e,t-1),e}function v5(t,e=w5(t.length),r=Xr){const n=t.length,i=n-e.length;return i>0&&df(e,i),s=>{let o=0;for(;o<n-2&&!(s<e[o+1]);o++);let a=lf(0,1,Oc(e[o],e[o+1],s));return a=y5(r,o)(a),uf(t[o],t[o+1],a)}}const ff=t=>Array.isArray(t)&&xo(t[0]),$c=t=>typeof t=="object"&&!!t.createAnimation,di=t=>typeof t=="function",b5=t=>typeof t=="string",hs={ms:t=>t*1e3,s:t=>t/1e3},pf=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,_5=1e-7,E5=12;function x5(t,e,r,n,i){let s,o,a=0;do o=e+(r-e)/2,s=pf(o,n,i)-t,s>0?r=o:e=o;while(Math.abs(s)>_5&&++a<E5);return o}function ds(t,e,r,n){if(t===e&&r===n)return Xr;const i=s=>x5(s,0,1,t,r);return s=>s===0||s===1?s:pf(i(s),e,n)}const S5=(t,e="end")=>r=>{r=e==="end"?Math.min(r,.999):Math.max(r,.001);const n=r*t,i=e==="end"?Math.floor(n):Math.ceil(n);return lf(0,1,i/t)},gf={ease:ds(.25,.1,.25,1),"ease-in":ds(.42,0,1,1),"ease-in-out":ds(.42,0,.58,1),"ease-out":ds(0,0,.58,1)},C5=/\((.*?)\)/;function mf(t){if(di(t))return t;if(ff(t))return ds(...t);if(gf[t])return gf[t];if(t.startsWith("steps")){const e=C5.exec(t);if(e){const r=e[1].split(",");return S5(parseFloat(r[0]),r[1].trim())}}return Xr}class yf{constructor(e,r=[0,1],{easing:n,duration:i=ir.duration,delay:s=ir.delay,endDelay:o=ir.endDelay,repeat:a=ir.repeat,offset:c,direction:l="normal",autoplay:h=!0}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=Xr,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((p,y)=>{this.resolve=p,this.reject=y}),n=n||ir.easing,$c(n)){const p=n.createAnimation(r);n=p.easing,r=p.keyframes||r,i=p.duration||i}this.repeat=a,this.easing=hi(n)?Xr:mf(n),this.updateDuration(i);const f=v5(r,c,hi(n)?n.map(mf):Xr);this.tick=p=>{var y;s=s;let v=0;this.pauseTime!==void 0?v=this.pauseTime:v=(p-this.startTime)*this.rate,this.t=v,v/=1e3,v=Math.max(v-s,0),this.playState==="finished"&&this.pauseTime===void 0&&(v=this.totalDuration);const x=v/this.duration;let O=Math.floor(x),I=x%1;!I&&x>=1&&(I=1),I===1&&O--;const _=O%2;(l==="reverse"||l==="alternate"&&_||l==="alternate-reverse"&&!_)&&(I=1-I);const S=v>=this.totalDuration?1:Math.min(I,1),w=f(this.easing(S));e(w),this.pauseTime===void 0&&(this.playState==="finished"||v>=this.totalDuration+o)?(this.playState="finished",(y=this.resolve)===null||y===void 0||y.call(this,w)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},h&&this.play()}play(){const e=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(e=this.reject)===null||e===void 0||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){this.pauseTime!==void 0||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}var Ac=function(){};process.env.NODE_ENV!=="production"&&(Ac=function(t,e){if(!t)throw new Error(e)});class I5{setAnimation(e){this.animation=e,e==null||e.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const Tc=new WeakMap;function wf(t){return Tc.has(t)||Tc.set(t,{transforms:[],values:new Map}),Tc.get(t)}function D5(t,e){return t.has(e)||t.set(e,new I5),t.get(e)}const O5=["","X","Y","Z"],$5=["translate","scale","rotate","skew"],So={x:"translateX",y:"translateY",z:"translateZ"},vf={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},A5={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:vf,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:Xr},skew:vf},fs=new Map,Nc=t=>`--motion-${t}`,Co=["x","y","z"];$5.forEach(t=>{O5.forEach(e=>{Co.push(t+e),fs.set(Nc(t+e),A5[t])})});const T5=(t,e)=>Co.indexOf(t)-Co.indexOf(e),N5=new Set(Co),bf=t=>N5.has(t),P5=(t,e)=>{So[e]&&(e=So[e]);const{transforms:r}=wf(t);g5(r,e),t.style.transform=R5(r)},R5=t=>t.sort(T5).reduce(L5,"").trim(),L5=(t,e)=>`${t} ${e}(var(${Nc(e)}))`,Pc=t=>t.startsWith("--"),_f=new Set;function M5(t){if(!_f.has(t)){_f.add(t);try{const{syntax:e,initialValue:r}=fs.has(t)?fs.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:r})}catch{}}}const Rc=(t,e)=>document.createElement("div").animate(t,e),Ef={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{Rc({opacity:[1]})}catch{return!1}return!0},finished:()=>!!Rc({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{Rc({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},Lc={},fi={};for(const t in Ef)fi[t]=()=>(Lc[t]===void 0&&(Lc[t]=Ef[t]()),Lc[t]);const k5=.015,U5=(t,e)=>{let r="";const n=Math.round(e/k5);for(let i=0;i<n;i++)r+=t(Oc(0,n-1,i))+", ";return r.substring(0,r.length-2)},xf=(t,e)=>di(t)?fi.linearEasing()?`linear(${U5(t,e)})`:ir.easing:ff(t)?F5(t):t,F5=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`;function j5(t,e){for(let r=0;r<t.length;r++)t[r]===null&&(t[r]=r?t[r-1]:e());return t}const B5=t=>Array.isArray(t)?t:[t];function Mc(t){return So[t]&&(t=So[t]),bf(t)?Nc(t):t}const Io={get:(t,e)=>{e=Mc(e);let r=Pc(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!r&&r!==0){const n=fs.get(e);n&&(r=n.initialValue)}return r},set:(t,e,r)=>{e=Mc(e),Pc(e)?t.style.setProperty(e,r):t.style[e]=r}};function Sf(t,e=!0){if(!(!t||t.playState==="finished"))try{t.stop?t.stop():(e&&t.commitStyles(),t.cancel())}catch{}}function z5(t,e){var r;let n=(e==null?void 0:e.toDefaultUnit)||Xr;const i=t[t.length-1];if(b5(i)){const s=((r=i.match(/(-?[\d.]+)([a-z%]*)/))===null||r===void 0?void 0:r[2])||"";s&&(n=o=>o+s)}return n}function q5(){return window.__MOTION_DEV_TOOLS_RECORD}function W5(t,e,r,n={},i){const s=q5(),o=n.record!==!1&&s;let a,{duration:c=ir.duration,delay:l=ir.delay,endDelay:h=ir.endDelay,repeat:f=ir.repeat,easing:p=ir.easing,persist:y=!1,direction:v,offset:x,allowWebkitAcceleration:O=!1,autoplay:I=!0}=n;const _=wf(t),S=bf(e);let w=fi.waapi();S&&P5(t,e);const E=Mc(e),g=D5(_.values,E),u=fs.get(E);return Sf(g.animation,!($c(p)&&g.generator)&&n.record!==!1),()=>{const m=()=>{var M,B;return(B=(M=Io.get(t,E))!==null&&M!==void 0?M:u==null?void 0:u.initialValue)!==null&&B!==void 0?B:0};let $=j5(B5(r),m);const N=z5($,u);if($c(p)){const M=p.createAnimation($,e!=="opacity",m,E,g);p=M.easing,$=M.keyframes||$,c=M.duration||c}if(Pc(E)&&(fi.cssRegisterProperty()?M5(E):w=!1),S&&!fi.linearEasing()&&(di(p)||hi(p)&&p.some(di))&&(w=!1),w){u&&($=$.map(q=>xo(q)?u.toDefaultUnit(q):q)),$.length===1&&(!fi.partialKeyframes()||o)&&$.unshift(m());const M={delay:hs.ms(l),duration:hs.ms(c),endDelay:hs.ms(h),easing:hi(p)?void 0:xf(p,c),direction:v,iterations:f+1,fill:"both"};a=t.animate({[E]:$,offset:x,easing:hi(p)?p.map(q=>xf(q,c)):void 0},M),a.finished||(a.finished=new Promise((q,D)=>{a.onfinish=q,a.oncancel=D}));const B=$[$.length-1];a.finished.then(()=>{y||(Io.set(t,E,B),a.cancel())}).catch(hf),O||(a.playbackRate=1.000001)}else if(i&&S)$=$.map(M=>typeof M=="string"?parseFloat(M):M),$.length===1&&$.unshift(parseFloat(m())),a=new i(M=>{Io.set(t,E,N?N(M):M)},$,Object.assign(Object.assign({},n),{duration:c,easing:p}));else{const M=$[$.length-1];Io.set(t,E,u&&xo(M)?u.toDefaultUnit(M):M)}return o&&s(t,e,$,{duration:c,delay:l,easing:p,repeat:f,offset:x},"motion-one"),g.setAnimation(a),a&&!I&&a.pause(),a}}const V5=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);function H5(t,e){var r;return typeof t=="string"?e?((r=e[t])!==null&&r!==void 0||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t||[])}const K5=t=>t(),Cf=(t,e,r=ir.duration)=>new Proxy({animations:t.map(K5).filter(Boolean),duration:r,options:e},G5),Z5=t=>t.animations[0],G5={get:(t,e)=>{const r=Z5(t);switch(e){case"duration":return t.duration;case"currentTime":return hs.s((r==null?void 0:r[e])||0);case"playbackRate":case"playState":return r==null?void 0:r[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(Y5)).catch(hf)),t.finished;case"stop":return()=>{t.animations.forEach(n=>Sf(n))};case"forEachNative":return n=>{t.animations.forEach(i=>n(i,t))};default:return typeof(r==null?void 0:r[e])>"u"?void 0:()=>t.animations.forEach(n=>n[e]())}},set:(t,e,r)=>{switch(e){case"currentTime":r=hs.ms(r);case"playbackRate":for(let n=0;n<t.animations.length;n++)t.animations[n][e]=r;return!0}return!1}},Y5=t=>t.finished;function J5(t,e,r){return di(t)?t(e,r):t}function Q5(t){return function(r,n,i={}){r=H5(r);const s=r.length;Ac(!!s,"No valid element provided."),Ac(!!n,"No keyframes defined.");const o=[];for(let a=0;a<s;a++){const c=r[a];for(const l in n){const h=V5(i,l);h.delay=J5(h.delay,a,s);const f=W5(c,l,n[l],h,t);o.push(f)}}return Cf(o,i,i.duration)}}const X5=Q5(yf);function e_(t,e={}){return Cf([()=>{const r=new yf(t,[0,1],e);return r.finished.catch(()=>{}),r}],e,e.duration)}function Rn(t,e,r){return(di(t)?e_:X5)(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const qt=t=>t??dt;var ps={},t_=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},If={},er={};let kc;const r_=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];er.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},er.getSymbolTotalCodewords=function(e){return r_[e]},er.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e},er.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');kc=e},er.isKanjiModeEnabled=function(){return typeof kc<"u"},er.toSJIS=function(e){return kc(e)};var Do={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(Do);function Df(){this.buffer=[],this.length=0}Df.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var n_=Df;function gs(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}gs.prototype.set=function(t,e,r,n){const i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)},gs.prototype.get=function(t,e){return this.data[t*this.size+e]},gs.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r},gs.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var i_=gs,Of={};(function(t){const e=er.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(n){const i=[],s=t.getRowColCoords(n),o=s.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||i.push([s[a],s[c]]);return i}})(Of);var $f={};const s_=er.getSymbolSize,Af=7;$f.getPositions=function(e){const r=s_(e);return[[0,0],[r-Af,0],[0,r-Af]]};var Tf={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,c=0,l=null,h=null;for(let f=0;f<s;f++){a=c=0,l=h=null;for(let p=0;p<s;p++){let y=i.get(f,p);y===l?a++:(a>=5&&(o+=e.N1+(a-5)),l=y,a=1),y=i.get(p,f),y===h?c++:(c>=5&&(o+=e.N1+(c-5)),h=y,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let c=0;c<s-1;c++){const l=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(l===4||l===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,c=0;for(let l=0;l<s;l++){a=c=0;for(let h=0;h<s;h++)a=a<<1&2047|i.get(l,h),h>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|i.get(h,l),h>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(n,i,s){switch(n){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)s.isReserved(c,a)||s.xor(c,a,r(i,c,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let l=0;l<o;l++){s(l),t.applyMask(l,i);const h=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(l,i),h<c&&(c=h,a=l)}return a}})(Tf);var Oo={};const en=Do,$o=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ao=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Oo.getBlocksCount=function(e,r){switch(r){case en.L:return $o[(e-1)*4+0];case en.M:return $o[(e-1)*4+1];case en.Q:return $o[(e-1)*4+2];case en.H:return $o[(e-1)*4+3];default:return}},Oo.getTotalCodewordsCount=function(e,r){switch(r){case en.L:return Ao[(e-1)*4+0];case en.M:return Ao[(e-1)*4+1];case en.Q:return Ao[(e-1)*4+2];case en.H:return Ao[(e-1)*4+3];default:return}};var Nf={},To={};const ms=new Uint8Array(512),No=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)ms[r]=e,No[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)ms[r]=ms[r-255]})(),To.log=function(e){if(e<1)throw new Error("log("+e+")");return No[e]},To.exp=function(e){return ms[e]},To.mul=function(e,r){return e===0||r===0?0:ms[No[e]+No[r]]},function(t){const e=To;t.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(n[o],i[a]);return s},t.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}}(Nf);const Pf=Nf;function Uc(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Uc.prototype.initialize=function(e){this.degree=e,this.genPoly=Pf.generateECPolynomial(this.degree)},Uc.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=Pf.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(n,i),s}return n};var o_=Uc,Rf={},tn={},Fc={};Fc.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Cr={};const Lf="[0-9]+",a_="[A-Z $%*+\\-./:]+";let ys="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ys=ys.replace(/u/g,"\\u");const c_="(?:(?![A-Z0-9 $%*+\\-./:]|"+ys+`)(?:.|[\r
]))+`;Cr.KANJI=new RegExp(ys,"g"),Cr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Cr.BYTE=new RegExp(c_,"g"),Cr.NUMERIC=new RegExp(Lf,"g"),Cr.ALPHANUMERIC=new RegExp(a_,"g");const l_=new RegExp("^"+ys+"$"),u_=new RegExp("^"+Lf+"$"),h_=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Cr.testKanji=function(e){return l_.test(e)},Cr.testNumeric=function(e){return u_.test(e)},Cr.testAlphanumeric=function(e){return h_.test(e)},function(t){const e=Fc,r=Cr;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return n(s)}catch{return o}}}(tn),function(t){const e=er,r=Oo,n=Do,i=tn,s=Fc,o=7973,a=e.getBCHDigit(o);function c(p,y,v){for(let x=1;x<=40;x++)if(y<=t.getCapacity(x,v,p))return x}function l(p,y){return i.getCharCountIndicator(p,y)+4}function h(p,y){let v=0;return p.forEach(function(x){const O=l(x.mode,y);v+=O+x.getBitsLength()}),v}function f(p,y){for(let v=1;v<=40;v++)if(h(p,v)<=t.getCapacity(v,y,i.MIXED))return v}t.from=function(y,v){return s.isValid(y)?parseInt(y,10):v},t.getCapacity=function(y,v,x){if(!s.isValid(y))throw new Error("Invalid QR Code version");typeof x>"u"&&(x=i.BYTE);const O=e.getSymbolTotalCodewords(y),I=r.getTotalCodewordsCount(y,v),_=(O-I)*8;if(x===i.MIXED)return _;const S=_-l(x,y);switch(x){case i.NUMERIC:return Math.floor(S/10*3);case i.ALPHANUMERIC:return Math.floor(S/11*2);case i.KANJI:return Math.floor(S/13);case i.BYTE:default:return Math.floor(S/8)}},t.getBestVersionForData=function(y,v){let x;const O=n.from(v,n.M);if(Array.isArray(y)){if(y.length>1)return f(y,O);if(y.length===0)return 1;x=y[0]}else x=y;return c(x.mode,x.getLength(),O)},t.getEncodedBits=function(y){if(!s.isValid(y)||y<7)throw new Error("Invalid QR Code version");let v=y<<12;for(;e.getBCHDigit(v)-a>=0;)v^=o<<e.getBCHDigit(v)-a;return y<<12|v}}(Rf);var Mf={};const jc=er,kf=1335,d_=21522,Uf=jc.getBCHDigit(kf);Mf.getEncodedBits=function(e,r){const n=e.bit<<3|r;let i=n<<10;for(;jc.getBCHDigit(i)-Uf>=0;)i^=kf<<jc.getBCHDigit(i)-Uf;return(n<<10|i)^d_};var Ff={};const f_=tn;function pi(t){this.mode=f_.NUMERIC,this.data=t.toString()}pi.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},pi.prototype.getLength=function(){return this.data.length},pi.prototype.getBitsLength=function(){return pi.getBitsLength(this.data.length)},pi.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);const s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};var p_=pi;const g_=tn,Bc=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function gi(t){this.mode=g_.ALPHANUMERIC,this.data=t}gi.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},gi.prototype.getLength=function(){return this.data.length},gi.prototype.getBitsLength=function(){return gi.getBitsLength(this.data.length)},gi.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=Bc.indexOf(this.data[r])*45;n+=Bc.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(Bc.indexOf(this.data[r]),6)};var m_=gi,y_=function(e){for(var r=[],n=e.length,i=0;i<n;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&n>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){r.push(s);continue}if(s<2048){r.push(s>>6|192),r.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128);continue}if(s>=65536&&s<=1114111){r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const w_=y_,v_=tn;function mi(t){this.mode=v_.BYTE,typeof t=="string"&&(t=w_(t)),this.data=new Uint8Array(t)}mi.getBitsLength=function(e){return e*8},mi.prototype.getLength=function(){return this.data.length},mi.prototype.getBitsLength=function(){return mi.getBitsLength(this.data.length)},mi.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var b_=mi;const __=tn,E_=er;function yi(t){this.mode=__.KANJI,this.data=t}yi.getBitsLength=function(e){return e*13},yi.prototype.getLength=function(){return this.data.length},yi.prototype.getBitsLength=function(){return yi.getBitsLength(this.data.length)},yi.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=E_.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var x_=yi,jf={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,i){var s={},o={};o[n]=0;var a=e.PriorityQueue.make();a.push(n,0);for(var c,l,h,f,p,y,v,x,O;!a.empty();){c=a.pop(),l=c.value,f=c.cost,p=r[l]||{};for(h in p)p.hasOwnProperty(h)&&(y=p[h],v=f+y,x=o[h],O=typeof o[h]>"u",(O||x>v)&&(o[h]=v,a.push(h,v),s[h]=l))}if(typeof i<"u"&&typeof o[i]>"u"){var I=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(I)}return s},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],s=n;s;)i.push(s),r[s],s=r[s];return i.reverse(),i},find_path:function(r,n,i){var s=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},s;r=r||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(jf);var S_=jf.exports;(function(t){const e=tn,r=p_,n=m_,i=b_,s=x_,o=Cr,a=er,c=S_;function l(I){return unescape(encodeURIComponent(I)).length}function h(I,_,S){const w=[];let E;for(;(E=I.exec(S))!==null;)w.push({data:E[0],index:E.index,mode:_,length:E[0].length});return w}function f(I){const _=h(o.NUMERIC,e.NUMERIC,I),S=h(o.ALPHANUMERIC,e.ALPHANUMERIC,I);let w,E;return a.isKanjiModeEnabled()?(w=h(o.BYTE,e.BYTE,I),E=h(o.KANJI,e.KANJI,I)):(w=h(o.BYTE_KANJI,e.BYTE,I),E=[]),_.concat(S,w,E).sort(function(u,m){return u.index-m.index}).map(function(u){return{data:u.data,mode:u.mode,length:u.length}})}function p(I,_){switch(_){case e.NUMERIC:return r.getBitsLength(I);case e.ALPHANUMERIC:return n.getBitsLength(I);case e.KANJI:return s.getBitsLength(I);case e.BYTE:return i.getBitsLength(I)}}function y(I){return I.reduce(function(_,S){const w=_.length-1>=0?_[_.length-1]:null;return w&&w.mode===S.mode?(_[_.length-1].data+=S.data,_):(_.push(S),_)},[])}function v(I){const _=[];for(let S=0;S<I.length;S++){const w=I[S];switch(w.mode){case e.NUMERIC:_.push([w,{data:w.data,mode:e.ALPHANUMERIC,length:w.length},{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.ALPHANUMERIC:_.push([w,{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.KANJI:_.push([w,{data:w.data,mode:e.BYTE,length:l(w.data)}]);break;case e.BYTE:_.push([{data:w.data,mode:e.BYTE,length:l(w.data)}])}}return _}function x(I,_){const S={},w={start:{}};let E=["start"];for(let g=0;g<I.length;g++){const u=I[g],m=[];for(let $=0;$<u.length;$++){const N=u[$],M=""+g+$;m.push(M),S[M]={node:N,lastCount:0},w[M]={};for(let B=0;B<E.length;B++){const q=E[B];S[q]&&S[q].node.mode===N.mode?(w[q][M]=p(S[q].lastCount+N.length,N.mode)-p(S[q].lastCount,N.mode),S[q].lastCount+=N.length):(S[q]&&(S[q].lastCount=N.length),w[q][M]=p(N.length,N.mode)+4+e.getCharCountIndicator(N.mode,_))}}E=m}for(let g=0;g<E.length;g++)w[E[g]].end=0;return{map:w,table:S}}function O(I,_){let S;const w=e.getBestModeForData(I);if(S=e.from(_,w),S!==e.BYTE&&S.bit<w.bit)throw new Error('"'+I+'" cannot be encoded with mode '+e.toString(S)+`.
 Suggested mode is: `+e.toString(w));switch(S===e.KANJI&&!a.isKanjiModeEnabled()&&(S=e.BYTE),S){case e.NUMERIC:return new r(I);case e.ALPHANUMERIC:return new n(I);case e.KANJI:return new s(I);case e.BYTE:return new i(I)}}t.fromArray=function(_){return _.reduce(function(S,w){return typeof w=="string"?S.push(O(w,null)):w.data&&S.push(O(w.data,w.mode)),S},[])},t.fromString=function(_,S){const w=f(_,a.isKanjiModeEnabled()),E=v(w),g=x(E,S),u=c.find_path(g.map,"start","end"),m=[];for(let $=1;$<u.length-1;$++)m.push(g.table[u[$]].node);return t.fromArray(y(m))},t.rawSplit=function(_){return t.fromArray(f(_,a.isKanjiModeEnabled()))}})(Ff);const Po=er,zc=Do,C_=n_,I_=i_,D_=Of,O_=$f,qc=Tf,Wc=Oo,$_=o_,Ro=Rf,A_=Mf,T_=tn,Vc=Ff;function N_(t,e){const r=t.size,n=O_.getPositions(e);for(let i=0;i<n.length;i++){const s=n[i][0],o=n[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||r<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(s+a,o+c,!0,!0):t.set(s+a,o+c,!1,!0))}}function P_(t){const e=t.size;for(let r=8;r<e-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function R_(t,e){const r=D_.getPositions(e);for(let n=0;n<r.length;n++){const i=r[n][0],s=r[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function L_(t,e){const r=t.size,n=Ro.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+r-8-3,o=(n>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function Hc(t,e,r){const n=t.size,i=A_.getEncodedBits(e,r);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(n-15+s,8,o,!0),s<8?t.set(8,n-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(n-8,8,1,!0)}function M_(t,e){const r=t.size;let n=-1,i=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,a-c)){let l=!1;o<e.length&&(l=(e[o]>>>s&1)===1),t.set(i,a-c,l),s--,s===-1&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function k_(t,e,r){const n=new C_;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),T_.getCharCountIndicator(c.mode,t)),c.write(n)});const i=Po.getSymbolTotalCodewords(t),s=Wc.getTotalCodewordsCount(t,e),o=(i-s)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let c=0;c<a;c++)n.put(c%2?17:236,8);return U_(n,t,e)}function U_(t,e,r){const n=Po.getSymbolTotalCodewords(e),i=Wc.getTotalCodewordsCount(e,r),s=n-i,o=Wc.getBlocksCount(e,r),a=n%o,c=o-a,l=Math.floor(n/o),h=Math.floor(s/o),f=h+1,p=l-h,y=new $_(p);let v=0;const x=new Array(o),O=new Array(o);let I=0;const _=new Uint8Array(t.buffer);for(let u=0;u<o;u++){const m=u<c?h:f;x[u]=_.slice(v,v+m),O[u]=y.encode(x[u]),v+=m,I=Math.max(I,m)}const S=new Uint8Array(n);let w=0,E,g;for(E=0;E<I;E++)for(g=0;g<o;g++)E<x[g].length&&(S[w++]=x[g][E]);for(E=0;E<p;E++)for(g=0;g<o;g++)S[w++]=O[g][E];return S}function F_(t,e,r,n){let i;if(Array.isArray(t))i=Vc.fromArray(t);else if(typeof t=="string"){let l=e;if(!l){const h=Vc.rawSplit(t);l=Ro.getBestVersionForData(h,r)}i=Vc.fromString(t,l||40)}else throw new Error("Invalid data");const s=Ro.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=k_(e,r,i),a=Po.getSymbolSize(e),c=new I_(a);return N_(c,e),P_(c),R_(c,e),Hc(c,r,0),e>=7&&L_(c,e),M_(c,o),isNaN(n)&&(n=qc.getBestMask(c,Hc.bind(null,c,r))),qc.applyMask(n,c),Hc(c,r,n),{modules:c,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}If.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=zc.M,i,s;return typeof r<"u"&&(n=zc.from(r.errorCorrectionLevel,zc.M),i=Ro.from(r.version),s=qc.from(r.maskPattern),r.toSJISFunc&&Po.setToSJISFunction(r.toSJISFunc)),F_(e,i,n,s)};var Bf={},Kc={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const s=t.getScale(n,i);return Math.floor((n+i.margin*2)*s)},t.qrToImageData=function(n,i,s){const o=i.modules.size,a=i.modules.data,c=t.getScale(o,s),l=Math.floor((o+s.margin*2)*c),h=s.margin*c,f=[s.color.light,s.color.dark];for(let p=0;p<l;p++)for(let y=0;y<l;y++){let v=(p*l+y)*4,x=s.color.light;if(p>=h&&y>=h&&p<l-h&&y<l-h){const O=Math.floor((p-h)/c),I=Math.floor((y-h)/c);x=f[a[O*o+I]?1:0]}n[v++]=x.r,n[v++]=x.g,n[v++]=x.b,n[v]=x.a}}})(Kc),function(t){const e=Kc;function r(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let c=a,l=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(l=n()),c=e.getOptions(c);const h=e.getImageWidth(s.modules.size,c),f=l.getContext("2d"),p=f.createImageData(h,h);return e.qrToImageData(p.data,s,c),r(f,l,h),f.putImageData(p,0,0),l},t.renderToDataURL=function(s,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const l=t.render(s,o,c),h=c.type||"image/png",f=c.rendererOpts||{};return l.toDataURL(h,f.quality)}}(Bf);var zf={};const j_=Kc;function qf(t,e){const r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function Zc(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function B_(t,e,r){let n="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),l=Math.floor(a/e);!c&&!s&&(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(n+=s?Zc("M",c+r,.5+l+r):Zc("m",i,0),i=0,s=!1),c+1<e&&t[a+1]||(n+=Zc("h",o),o=0)):i++}return n}zf.render=function(e,r,n){const i=j_.getOptions(r),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,c=i.color.light.a?"<path "+qf(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+qf(i.color.dark,"stroke")+' d="'+B_(o,s,i.margin)+'"/>',h='viewBox="0 0 '+a+" "+a+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+h+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof n=="function"&&n(null,p),p};const z_=t_,Gc=If,Wf=Bf,q_=zf;function Yc(t,e,r,n,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!z_())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(c,l){try{const h=Gc.create(r,n);c(t(h,e,n))}catch(h){l(h)}})}try{const c=Gc.create(r,n);i(null,t(c,e,n))}catch(c){i(c)}}ps.create=Gc.create,ps.toCanvas=Yc.bind(null,Wf.render),ps.toDataURL=Yc.bind(null,Wf.renderToDataURL),ps.toString=Yc.bind(null,function(t,e,r){return q_.render(t,r)});var W_=Object.defineProperty,Vf=Object.getOwnPropertySymbols,V_=Object.prototype.hasOwnProperty,H_=Object.prototype.propertyIsEnumerable,Hf=(t,e,r)=>e in t?W_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Jc=(t,e)=>{for(var r in e||(e={}))V_.call(e,r)&&Hf(t,r,e[r]);if(Vf)for(var r of Vf(e))H_.call(e,r)&&Hf(t,r,e[r]);return t};function K_(){var t;const e=(t=qr.state.themeMode)!=null?t:"dark",r={light:{foreground:{1:"rgb(20,20,20)",2:"rgb(121,134,134)",3:"rgb(158,169,169)"},background:{1:"rgb(255,255,255)",2:"rgb(241,243,243)",3:"rgb(228,231,231)"},overlay:"rgba(0,0,0,0.1)"},dark:{foreground:{1:"rgb(228,231,231)",2:"rgb(148,158,158)",3:"rgb(110,119,119)"},background:{1:"rgb(20,20,20)",2:"rgb(39,42,42)",3:"rgb(59,64,64)"},overlay:"rgba(255,255,255,0.1)"}}[e];return{"--wcm-color-fg-1":r.foreground[1],"--wcm-color-fg-2":r.foreground[2],"--wcm-color-fg-3":r.foreground[3],"--wcm-color-bg-1":r.background[1],"--wcm-color-bg-2":r.background[2],"--wcm-color-bg-3":r.background[3],"--wcm-color-overlay":r.overlay}}function Kf(){return{"--wcm-accent-color":"#3396FF","--wcm-accent-fill-color":"#FFFFFF","--wcm-z-index":"89","--wcm-background-color":"#3396FF","--wcm-background-border-radius":"8px","--wcm-container-border-radius":"30px","--wcm-wallet-icon-border-radius":"15px","--wcm-wallet-icon-large-border-radius":"30px","--wcm-wallet-icon-small-border-radius":"7px","--wcm-input-border-radius":"28px","--wcm-button-border-radius":"10px","--wcm-notification-border-radius":"36px","--wcm-secondary-button-border-radius":"28px","--wcm-icon-button-border-radius":"50%","--wcm-button-hover-highlight-border-radius":"10px","--wcm-text-big-bold-size":"20px","--wcm-text-big-bold-weight":"600","--wcm-text-big-bold-line-height":"24px","--wcm-text-big-bold-letter-spacing":"-0.03em","--wcm-text-big-bold-text-transform":"none","--wcm-text-xsmall-bold-size":"10px","--wcm-text-xsmall-bold-weight":"700","--wcm-text-xsmall-bold-line-height":"12px","--wcm-text-xsmall-bold-letter-spacing":"0.02em","--wcm-text-xsmall-bold-text-transform":"uppercase","--wcm-text-xsmall-regular-size":"12px","--wcm-text-xsmall-regular-weight":"600","--wcm-text-xsmall-regular-line-height":"14px","--wcm-text-xsmall-regular-letter-spacing":"-0.03em","--wcm-text-xsmall-regular-text-transform":"none","--wcm-text-small-thin-size":"14px","--wcm-text-small-thin-weight":"500","--wcm-text-small-thin-line-height":"16px","--wcm-text-small-thin-letter-spacing":"-0.03em","--wcm-text-small-thin-text-transform":"none","--wcm-text-small-regular-size":"14px","--wcm-text-small-regular-weight":"600","--wcm-text-small-regular-line-height":"16px","--wcm-text-small-regular-letter-spacing":"-0.03em","--wcm-text-small-regular-text-transform":"none","--wcm-text-medium-regular-size":"16px","--wcm-text-medium-regular-weight":"600","--wcm-text-medium-regular-line-height":"20px","--wcm-text-medium-regular-letter-spacing":"-0.03em","--wcm-text-medium-regular-text-transform":"none","--wcm-font-family":"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', sans-serif","--wcm-font-feature-settings":"'tnum' on, 'lnum' on, 'case' on","--wcm-success-color":"rgb(38,181,98)","--wcm-error-color":"rgb(242, 90, 103)","--wcm-overlay-background-color":"rgba(0, 0, 0, 0.3)","--wcm-overlay-backdrop-filter":"none"}}const De={getPreset(t){return Kf()[t]},setTheme(){const t=document.querySelector(":root"),{themeVariables:e}=qr.state;if(t){const r=Jc(Jc(Jc({},K_()),Kf()),e);Object.entries(r).forEach(([n,i])=>t.style.setProperty(n,i))}},globalCss:Ue`*,::after,::before{margin:0;padding:0;box-sizing:border-box;font-style:normal;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;backface-visibility:hidden}button{cursor:pointer;display:flex;justify-content:center;align-items:center;position:relative;border:none;background-color:transparent;transition:all .2s ease}@media (hover:hover) and (pointer:fine){button:active{transition:all .1s ease;transform:scale(.93)}}button::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;transition:background-color,.2s ease}button:disabled{cursor:not-allowed}button svg,button wcm-text{position:relative;z-index:1}input{border:none;outline:0;appearance:none}img{display:block}::selection{color:var(--wcm-accent-fill-color);background:var(--wcm-accent-color)}`},Z_=Ue`button{border-radius:var(--wcm-secondary-button-border-radius);height:28px;padding:0 10px;background-color:var(--wcm-accent-color)}button path{fill:var(--wcm-accent-fill-color)}button::after{border-radius:inherit;border:1px solid var(--wcm-color-overlay)}button:disabled::after{background-color:transparent}.wcm-icon-left svg{margin-right:5px}.wcm-icon-right svg{margin-left:5px}button:active::after{background-color:var(--wcm-color-overlay)}.wcm-ghost,.wcm-ghost:active::after,.wcm-outline{background-color:transparent}.wcm-ghost:active{opacity:.5}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}.wcm-ghost:hover::after{background-color:transparent}.wcm-ghost:hover{opacity:.5}}button:disabled{background-color:var(--wcm-color-bg-3);pointer-events:none}.wcm-ghost::after{border-color:transparent}.wcm-ghost path{fill:var(--wcm-color-fg-2)}.wcm-outline path{fill:var(--wcm-accent-color)}.wcm-outline:disabled{background-color:transparent;opacity:.5}`;var G_=Object.defineProperty,Y_=Object.getOwnPropertyDescriptor,wi=(t,e,r,n)=>{for(var i=n>1?void 0:n?Y_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&G_(e,r,i),i};let rn=class extends _e{constructor(){super(...arguments),this.disabled=!1,this.iconLeft=void 0,this.iconRight=void 0,this.onClick=()=>null,this.variant="default"}render(){const t={"wcm-icon-left":this.iconLeft!==void 0,"wcm-icon-right":this.iconRight!==void 0,"wcm-ghost":this.variant==="ghost","wcm-outline":this.variant==="outline"};let e="inverse";return this.variant==="ghost"&&(e="secondary"),this.variant==="outline"&&(e="accent"),Y`<button class="${Mr(t)}" ?disabled="${this.disabled}" @click="${this.onClick}">${this.iconLeft}<wcm-text variant="small-regular" color="${e}"><slot></slot></wcm-text>${this.iconRight}</button>`}};rn.styles=[De.globalCss,Z_],wi([me({type:Boolean})],rn.prototype,"disabled",2),wi([me()],rn.prototype,"iconLeft",2),wi([me()],rn.prototype,"iconRight",2),wi([me()],rn.prototype,"onClick",2),wi([me()],rn.prototype,"variant",2),rn=wi([Ne("wcm-button")],rn);const J_=Ue`:host{display:inline-block}button{padding:0 15px 1px;height:40px;border-radius:var(--wcm-button-border-radius);color:var(--wcm-accent-fill-color);background-color:var(--wcm-accent-color)}button::after{content:'';top:0;bottom:0;left:0;right:0;position:absolute;background-color:transparent;border-radius:inherit;transition:background-color .2s ease;border:1px solid var(--wcm-color-overlay)}button:active::after{background-color:var(--wcm-color-overlay)}button:disabled{padding-bottom:0;background-color:var(--wcm-color-bg-3);color:var(--wcm-color-fg-3)}.wcm-secondary{color:var(--wcm-accent-color);background-color:transparent}.wcm-secondary::after{display:none}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}}`;var Q_=Object.defineProperty,X_=Object.getOwnPropertyDescriptor,Qc=(t,e,r,n)=>{for(var i=n>1?void 0:n?X_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Q_(e,r,i),i};let ws=class extends _e{constructor(){super(...arguments),this.disabled=!1,this.variant="primary"}render(){const t={"wcm-secondary":this.variant==="secondary"};return Y`<button ?disabled="${this.disabled}" class="${Mr(t)}"><slot></slot></button>`}};ws.styles=[De.globalCss,J_],Qc([me({type:Boolean})],ws.prototype,"disabled",2),Qc([me()],ws.prototype,"variant",2),ws=Qc([Ne("wcm-button-big")],ws);const e6=Ue`:host{background-color:var(--wcm-color-bg-2);border-top:1px solid var(--wcm-color-bg-3)}div{padding:10px 20px;display:inherit;flex-direction:inherit;align-items:inherit;width:inherit;justify-content:inherit}`;var t6=Object.defineProperty,r6=Object.getOwnPropertyDescriptor,n6=(t,e,r,n)=>{for(var i=n>1?void 0:n?r6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&t6(e,r,i),i};let Xc=class extends _e{render(){return Y`<div><slot></slot></div>`}};Xc.styles=[De.globalCss,e6],Xc=n6([Ne("wcm-info-footer")],Xc);const Be={CROSS_ICON:Xe`<svg width="12" height="12" viewBox="0 0 12 12"><path d="M9.94 11A.75.75 0 1 0 11 9.94L7.414 6.353a.5.5 0 0 1 0-.708L11 2.061A.75.75 0 1 0 9.94 1L6.353 4.586a.5.5 0 0 1-.708 0L2.061 1A.75.75 0 0 0 1 2.06l3.586 3.586a.5.5 0 0 1 0 .708L1 9.939A.75.75 0 1 0 2.06 11l3.586-3.586a.5.5 0 0 1 .708 0L9.939 11Z" fill="#fff"/></svg>`,WALLET_CONNECT_LOGO:Xe`<svg width="178" height="29" viewBox="0 0 178 29" id="wcm-wc-logo"><path d="M10.683 7.926c5.284-5.17 13.85-5.17 19.134 0l.636.623a.652.652 0 0 1 0 .936l-2.176 2.129a.343.343 0 0 1-.478 0l-.875-.857c-3.686-3.607-9.662-3.607-13.348 0l-.937.918a.343.343 0 0 1-.479 0l-2.175-2.13a.652.652 0 0 1 0-.936l.698-.683Zm23.633 4.403 1.935 1.895a.652.652 0 0 1 0 .936l-8.73 8.543a.687.687 0 0 1-.956 0L20.37 17.64a.172.172 0 0 0-.239 0l-6.195 6.063a.687.687 0 0 1-.957 0l-8.73-8.543a.652.652 0 0 1 0-.936l1.936-1.895a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .239 0l6.195-6.064a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .24 0l6.195-6.064a.687.687 0 0 1 .956 0ZM48.093 20.948l2.338-9.355c.139-.515.258-1.07.416-1.942.12.872.258 1.427.357 1.942l2.022 9.355h4.181l3.528-13.874h-3.21l-1.943 8.523a24.825 24.825 0 0 0-.456 2.457c-.158-.931-.317-1.625-.495-2.438l-1.883-8.542h-4.201l-2.042 8.542a41.204 41.204 0 0 0-.475 2.438 41.208 41.208 0 0 0-.476-2.438l-1.903-8.542h-3.349l3.508 13.874h4.083ZM63.33 21.304c1.585 0 2.596-.654 3.11-1.605-.059.297-.078.595-.078.892v.357h2.655V15.22c0-2.735-1.248-4.32-4.3-4.32-2.636 0-4.36 1.466-4.52 3.487h2.914c.1-.891.734-1.426 1.705-1.426.911 0 1.407.515 1.407 1.11 0 .435-.258.693-1.03.792l-1.388.159c-2.061.257-3.825 1.01-3.825 3.19 0 1.982 1.645 3.092 3.35 3.092Zm.891-2.041c-.773 0-1.348-.436-1.348-1.19 0-.733.655-1.09 1.645-1.268l.674-.119c.575-.118.892-.218 1.09-.396v.912c0 1.228-.892 2.06-2.06 2.06ZM70.398 7.074v13.874h2.874V7.074h-2.874ZM74.934 7.074v13.874h2.874V7.074h-2.874ZM84.08 21.304c2.735 0 4.5-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922H81.92ZM94.92 21.146c.633 0 1.248-.1 1.525-.179v-2.18c-.218.04-.475.06-.693.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.338v-2.24h-2.338V7.788H91.47v3.448H89.37v2.24h2.1v4.201c0 2.3 1.15 3.469 3.45 3.469ZM104.62 21.304c3.924 0 6.302-2.299 6.599-5.608h-3.111c-.238 1.803-1.506 3.032-3.369 3.032-2.2 0-3.746-1.784-3.746-4.796 0-2.953 1.605-4.638 3.805-4.638 1.883 0 2.953 1.15 3.171 2.834h3.191c-.317-3.448-2.854-5.41-6.342-5.41-3.984 0-7.036 2.695-7.036 7.214 0 4.677 2.676 7.372 6.838 7.372ZM117.449 21.304c2.993 0 5.114-1.882 5.114-5.172 0-3.23-2.121-5.233-5.114-5.233-2.972 0-5.093 2.002-5.093 5.233 0 3.29 2.101 5.172 5.093 5.172Zm0-2.22c-1.327 0-2.18-1.09-2.18-2.952 0-1.903.892-2.973 2.18-2.973 1.308 0 2.2 1.07 2.2 2.973 0 1.862-.872 2.953-2.2 2.953ZM126.569 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.229-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM137.464 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.228-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM149.949 21.304c2.735 0 4.499-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922h-3.984ZM160.876 21.304c3.013 0 4.658-1.645 4.975-4.201h-2.874c-.099 1.07-.713 1.982-2.001 1.982-1.309 0-2.2-1.21-2.2-2.993 0-1.942 1.03-2.933 2.259-2.933 1.209 0 1.803.872 1.883 1.882h2.873c-.218-2.358-1.823-4.142-4.776-4.142-2.874 0-5.153 1.903-5.153 5.193 0 3.25 1.923 5.212 5.014 5.212ZM172.067 21.146c.634 0 1.248-.1 1.526-.179v-2.18c-.218.04-.476.06-.694.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.339v-2.24h-2.339V7.788h-2.854v3.448h-2.1v2.24h2.1v4.201c0 2.3 1.15 3.469 3.449 3.469Z" fill="#fff"/></svg>`,WALLET_CONNECT_ICON:Xe`<svg width="28" height="20" viewBox="0 0 28 20"><g clip-path="url(#a)"><path d="M7.386 6.482c3.653-3.576 9.575-3.576 13.228 0l.44.43a.451.451 0 0 1 0 .648L19.55 9.033a.237.237 0 0 1-.33 0l-.606-.592c-2.548-2.496-6.68-2.496-9.228 0l-.648.634a.237.237 0 0 1-.33 0L6.902 7.602a.451.451 0 0 1 0-.647l.483-.473Zm16.338 3.046 1.339 1.31a.451.451 0 0 1 0 .648l-6.035 5.909a.475.475 0 0 1-.662 0L14.083 13.2a.119.119 0 0 0-.166 0l-4.283 4.194a.475.475 0 0 1-.662 0l-6.035-5.91a.451.451 0 0 1 0-.647l1.338-1.31a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0Z" fill="#000000"/></g><defs><clipPath id="a"><path fill="#ffffff" d="M0 0h28v20H0z"/></clipPath></defs></svg>`,WALLET_CONNECT_ICON_COLORED:Xe`<svg width="96" height="96" fill="none"><path fill="#fff" d="M25.322 33.597c12.525-12.263 32.83-12.263 45.355 0l1.507 1.476a1.547 1.547 0 0 1 0 2.22l-5.156 5.048a.814.814 0 0 1-1.134 0l-2.074-2.03c-8.737-8.555-22.903-8.555-31.64 0l-2.222 2.175a.814.814 0 0 1-1.134 0l-5.156-5.049a1.547 1.547 0 0 1 0-2.22l1.654-1.62Zm56.019 10.44 4.589 4.494a1.547 1.547 0 0 1 0 2.22l-20.693 20.26a1.628 1.628 0 0 1-2.267 0L48.283 56.632a.407.407 0 0 0-.567 0L33.03 71.012a1.628 1.628 0 0 1-2.268 0L10.07 50.75a1.547 1.547 0 0 1 0-2.22l4.59-4.494a1.628 1.628 0 0 1 2.267 0l14.687 14.38c.156.153.41.153.567 0l14.685-14.38a1.628 1.628 0 0 1 2.268 0l14.687 14.38c.156.153.41.153.567 0l14.686-14.38a1.628 1.628 0 0 1 2.268 0Z"/><path stroke="#000" d="M25.672 33.954c12.33-12.072 32.325-12.072 44.655 0l1.508 1.476a1.047 1.047 0 0 1 0 1.506l-5.157 5.048a.314.314 0 0 1-.434 0l-2.074-2.03c-8.932-8.746-23.409-8.746-32.34 0l-2.222 2.174a.314.314 0 0 1-.434 0l-5.157-5.048a1.047 1.047 0 0 1 0-1.506l1.655-1.62Zm55.319 10.44 4.59 4.494a1.047 1.047 0 0 1 0 1.506l-20.694 20.26a1.128 1.128 0 0 1-1.568 0l-14.686-14.38a.907.907 0 0 0-1.267 0L32.68 70.655a1.128 1.128 0 0 1-1.568 0L10.42 50.394a1.047 1.047 0 0 1 0-1.506l4.59-4.493a1.128 1.128 0 0 1 1.567 0l14.687 14.379a.907.907 0 0 0 1.266 0l-.35-.357.35.357 14.686-14.38a1.128 1.128 0 0 1 1.568 0l14.687 14.38a.907.907 0 0 0 1.267 0l14.686-14.38a1.128 1.128 0 0 1 1.568 0Z"/></svg>`,BACK_ICON:Xe`<svg width="10" height="18" viewBox="0 0 10 18"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.735.179a.75.75 0 0 1 .087 1.057L2.92 8.192a1.25 1.25 0 0 0 0 1.617l5.902 6.956a.75.75 0 1 1-1.144.97L1.776 10.78a2.75 2.75 0 0 1 0-3.559L7.678.265A.75.75 0 0 1 8.735.18Z" fill="#fff"/></svg>`,COPY_ICON:Xe`<svg width="24" height="24" fill="none"><path fill="#fff" fill-rule="evenodd" d="M7.01 7.01c.03-1.545.138-2.5.535-3.28A5 5 0 0 1 9.73 1.545C10.8 1 12.2 1 15 1c2.8 0 4.2 0 5.27.545a5 5 0 0 1 2.185 2.185C23 4.8 23 6.2 23 9c0 2.8 0 4.2-.545 5.27a5 5 0 0 1-2.185 2.185c-.78.397-1.735.505-3.28.534l-.001.01c-.03 1.54-.138 2.493-.534 3.27a5 5 0 0 1-2.185 2.186C13.2 23 11.8 23 9 23c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C1 19.2 1 17.8 1 15c0-2.8 0-4.2.545-5.27A5 5 0 0 1 3.73 7.545C4.508 7.149 5.46 7.04 7 7.01h.01ZM15 15.5c-1.425 0-2.403-.001-3.162-.063-.74-.06-1.139-.172-1.427-.319a3.5 3.5 0 0 1-1.53-1.529c-.146-.288-.257-.686-.318-1.427C8.501 11.403 8.5 10.425 8.5 9c0-1.425.001-2.403.063-3.162.06-.74.172-1.139.318-1.427a3.5 3.5 0 0 1 1.53-1.53c.288-.146.686-.257 1.427-.318.759-.062 1.737-.063 3.162-.063 1.425 0 2.403.001 3.162.063.74.06 1.139.172 1.427.318a3.5 3.5 0 0 1 1.53 1.53c.146.288.257.686.318 1.427.062.759.063 1.737.063 3.162 0 1.425-.001 2.403-.063 3.162-.06.74-.172 1.139-.319 1.427a3.5 3.5 0 0 1-1.529 1.53c-.288.146-.686.257-1.427.318-.759.062-1.737.063-3.162.063ZM7 8.511c-.444.009-.825.025-1.162.052-.74.06-1.139.172-1.427.318a3.5 3.5 0 0 0-1.53 1.53c-.146.288-.257.686-.318 1.427-.062.759-.063 1.737-.063 3.162 0 1.425.001 2.403.063 3.162.06.74.172 1.139.318 1.427a3.5 3.5 0 0 0 1.53 1.53c.288.146.686.257 1.427.318.759.062 1.737.063 3.162.063 1.425 0 2.403-.001 3.162-.063.74-.06 1.139-.172 1.427-.319a3.5 3.5 0 0 0 1.53-1.53c.146-.287.257-.685.318-1.426.027-.337.043-.718.052-1.162H15c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C7 13.2 7 11.8 7 9v-.489Z" clip-rule="evenodd"/></svg>`,RETRY_ICON:Xe`<svg width="15" height="16" viewBox="0 0 15 16"><path d="M6.464 2.03A.75.75 0 0 0 5.403.97L2.08 4.293a1 1 0 0 0 0 1.414L5.403 9.03a.75.75 0 0 0 1.06-1.06L4.672 6.177a.25.25 0 0 1 .177-.427h2.085a4 4 0 1 1-3.93 4.746c-.077-.407-.405-.746-.82-.746-.414 0-.755.338-.7.748a5.501 5.501 0 1 0 5.45-6.248H4.848a.25.25 0 0 1-.177-.427L6.464 2.03Z" fill="#fff"/></svg>`,DESKTOP_ICON:Xe`<svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C2.204 1 3.13 1 4.98 1h6.04c1.85 0 2.775 0 3.466.394a3 3 0 0 1 1.12 1.12C16 3.204 16 4.13 16 5.98v1.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C13.796 12 12.87 12 11.02 12H4.98c-1.85 0-2.775 0-3.466-.394a3 3 0 0 1-1.12-1.12C0 9.796 0 8.87 0 7.02V5.98ZM4.98 2.5h6.04c.953 0 1.568.001 2.034.043.446.04.608.108.69.154a1.5 1.5 0 0 1 .559.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033v1.04c0 .952-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.046-.243.114-.69.154-.466.042-1.08.043-2.033.043H4.98c-.952 0-1.568-.001-2.034-.043-.446-.04-.608-.108-.69-.154a1.5 1.5 0 0 1-.559-.56c-.046-.08-.114-.243-.154-.69-.042-.465-.043-1.08-.043-2.033V5.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.046.243-.114.69-.154.465-.042 1.08-.043 2.033-.043Z" fill="#fff"/><path d="M4 14.25a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,MOBILE_ICON:Xe`<svg width="16" height="16" viewBox="0 0 16 16"><path d="M6.75 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C5.204 0 6.136 0 8 0s2.795 0 3.486.394a3 3 0 0 1 1.12 1.12C13 2.204 13 3.13 13 4.98v6.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C10.796 16 9.864 16 8 16s-2.795 0-3.486-.394a3 3 0 0 1-1.12-1.12C3 13.796 3 12.87 3 11.02V4.98Zm8.5 0v6.04c0 .953-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.045-.242.113-.693.154-.47.042-1.091.043-2.05.043-.959 0-1.58-.001-2.05-.043-.45-.04-.613-.109-.693-.154a1.5 1.5 0 0 1-.56-.56c-.046-.08-.114-.243-.154-.69-.042-.466-.043-1.08-.043-2.033V4.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.045.243-.113.693-.154C6.42 1.501 7.041 1.5 8 1.5c.959 0 1.58.001 2.05.043.45.04.613.109.693.154a1.5 1.5 0 0 1 .56.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033Z" fill="#fff"/></svg>`,ARROW_DOWN_ICON:Xe`<svg width="14" height="14" viewBox="0 0 14 14"><path d="M2.28 7.47a.75.75 0 0 0-1.06 1.06l5.25 5.25a.75.75 0 0 0 1.06 0l5.25-5.25a.75.75 0 0 0-1.06-1.06l-3.544 3.543a.25.25 0 0 1-.426-.177V.75a.75.75 0 0 0-1.5 0v10.086a.25.25 0 0 1-.427.176L2.28 7.47Z" fill="#fff"/></svg>`,ARROW_UP_RIGHT_ICON:Xe`<svg width="15" height="14" fill="none"><path d="M4.5 1.75A.75.75 0 0 1 5.25 1H12a1.5 1.5 0 0 1 1.5 1.5v6.75a.75.75 0 0 1-1.5 0V4.164a.25.25 0 0 0-.427-.176L4.061 11.5A.75.75 0 0 1 3 10.44l7.513-7.513a.25.25 0 0 0-.177-.427H5.25a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,ARROW_RIGHT_ICON:Xe`<svg width="6" height="14" viewBox="0 0 6 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.181 1.099a.75.75 0 0 1 1.024.279l2.433 4.258a2.75 2.75 0 0 1 0 2.729l-2.433 4.257a.75.75 0 1 1-1.303-.744L4.335 7.62a1.25 1.25 0 0 0 0-1.24L1.902 2.122a.75.75 0 0 1 .28-1.023Z" fill="#fff"/></svg>`,QRCODE_ICON:Xe`<svg width="25" height="24" viewBox="0 0 25 24"><path d="M23.748 9a.748.748 0 0 0 .748-.752c-.018-2.596-.128-4.07-.784-5.22a6 6 0 0 0-2.24-2.24c-1.15-.656-2.624-.766-5.22-.784a.748.748 0 0 0-.752.748c0 .414.335.749.748.752 1.015.007 1.82.028 2.494.088.995.09 1.561.256 1.988.5.7.398 1.28.978 1.679 1.678.243.427.41.993.498 1.988.061.675.082 1.479.09 2.493a.753.753 0 0 0 .75.749ZM3.527.788C4.677.132 6.152.022 8.747.004A.748.748 0 0 1 9.5.752a.753.753 0 0 1-.749.752c-1.014.007-1.818.028-2.493.088-.995.09-1.561.256-1.988.5-.7.398-1.28.978-1.679 1.678-.243.427-.41.993-.499 1.988-.06.675-.081 1.479-.088 2.493A.753.753 0 0 1 1.252 9a.748.748 0 0 1-.748-.752c.018-2.596.128-4.07.784-5.22a6 6 0 0 1 2.24-2.24ZM1.252 15a.748.748 0 0 0-.748.752c.018 2.596.128 4.07.784 5.22a6 6 0 0 0 2.24 2.24c1.15.656 2.624.766 5.22.784a.748.748 0 0 0 .752-.748.753.753 0 0 0-.749-.752c-1.014-.007-1.818-.028-2.493-.089-.995-.089-1.561-.255-1.988-.498a4.5 4.5 0 0 1-1.679-1.68c-.243-.426-.41-.992-.499-1.987-.06-.675-.081-1.479-.088-2.493A.753.753 0 0 0 1.252 15ZM22.996 15.749a.753.753 0 0 1 .752-.749c.415 0 .751.338.748.752-.018 2.596-.128 4.07-.784 5.22a6 6 0 0 1-2.24 2.24c-1.15.656-2.624.766-5.22.784a.748.748 0 0 1-.752-.748c0-.414.335-.749.748-.752 1.015-.007 1.82-.028 2.494-.089.995-.089 1.561-.255 1.988-.498a4.5 4.5 0 0 0 1.679-1.68c.243-.426.41-.992.498-1.987.061-.675.082-1.479.09-2.493Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 4a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 11h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 4H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM13.5 6.5A2.5 2.5 0 0 1 16 4h2a2.5 2.5 0 0 1 2.5 2.5v2A2.5 2.5 0 0 1 18 11h-2a2.5 2.5 0 0 1-2.5-2.5v-2Zm2.5-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1ZM7 13a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 20h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 13H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Z" fill="#fff"/><path d="M13.5 15.5c0-.465 0-.697.038-.89a2 2 0 0 1 1.572-1.572C15.303 13 15.535 13 16 13v2.5h-2.5ZM18 13c.465 0 .697 0 .89.038a2 2 0 0 1 1.572 1.572c.038.193.038.425.038.89H18V13ZM18 17.5h2.5c0 .465 0 .697-.038.89a2 2 0 0 1-1.572 1.572C18.697 20 18.465 20 18 20v-2.5ZM13.5 17.5H16V20c-.465 0-.697 0-.89-.038a2 2 0 0 1-1.572-1.572c-.038-.193-.038-.425-.038-.89Z" fill="#fff"/></svg>`,SCAN_ICON:Xe`<svg width="16" height="16" fill="none"><path fill="#fff" d="M10 15.216c0 .422.347.763.768.74 1.202-.064 2.025-.222 2.71-.613a5.001 5.001 0 0 0 1.865-1.866c.39-.684.549-1.507.613-2.709a.735.735 0 0 0-.74-.768.768.768 0 0 0-.76.732c-.009.157-.02.306-.032.447-.073.812-.206 1.244-.384 1.555-.31.545-.761.996-1.306 1.306-.311.178-.743.311-1.555.384-.141.013-.29.023-.447.032a.768.768 0 0 0-.732.76ZM10 .784c0 .407.325.737.732.76.157.009.306.02.447.032.812.073 1.244.206 1.555.384a3.5 3.5 0 0 1 1.306 1.306c.178.311.311.743.384 1.555.013.142.023.29.032.447a.768.768 0 0 0 .76.732.734.734 0 0 0 .74-.768c-.064-1.202-.222-2.025-.613-2.71A5 5 0 0 0 13.477.658c-.684-.39-1.507-.549-2.709-.613a.735.735 0 0 0-.768.74ZM5.232.044A.735.735 0 0 1 6 .784a.768.768 0 0 1-.732.76c-.157.009-.305.02-.447.032-.812.073-1.244.206-1.555.384A3.5 3.5 0 0 0 1.96 3.266c-.178.311-.311.743-.384 1.555-.013.142-.023.29-.032.447A.768.768 0 0 1 .784 6a.735.735 0 0 1-.74-.768c.064-1.202.222-2.025.613-2.71A5 5 0 0 1 2.523.658C3.207.267 4.03.108 5.233.044ZM5.268 14.456a.768.768 0 0 1 .732.76.734.734 0 0 1-.768.74c-1.202-.064-2.025-.222-2.71-.613a5 5 0 0 1-1.865-1.866c-.39-.684-.549-1.507-.613-2.709A.735.735 0 0 1 .784 10c.407 0 .737.325.76.732.009.157.02.306.032.447.073.812.206 1.244.384 1.555a3.5 3.5 0 0 0 1.306 1.306c.311.178.743.311 1.555.384.142.013.29.023.447.032Z"/></svg>`,CHECKMARK_ICON:Xe`<svg width="13" height="12" viewBox="0 0 13 12"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.155.132a.75.75 0 0 1 .232 1.035L5.821 11.535a1 1 0 0 1-1.626.09L.665 7.21a.75.75 0 1 1 1.17-.937L4.71 9.867a.25.25 0 0 0 .406-.023L11.12.364a.75.75 0 0 1 1.035-.232Z" fill="#fff"/></svg>`,SEARCH_ICON:Xe`<svg width="20" height="21"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.432 13.992c-.354-.353-.91-.382-1.35-.146a5.5 5.5 0 1 1 2.265-2.265c-.237.441-.208.997.145 1.35l3.296 3.296a.75.75 0 1 1-1.06 1.061l-3.296-3.296Zm.06-5a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z" fill="#949E9E"/></svg>`,WALLET_PLACEHOLDER:Xe`<svg width="60" height="60" fill="none" viewBox="0 0 60 60"><g clip-path="url(#q)"><path id="wallet-placeholder-fill" fill="#fff" d="M0 24.9c0-9.251 0-13.877 1.97-17.332a15 15 0 0 1 5.598-5.597C11.023 0 15.648 0 24.9 0h10.2c9.252 0 13.877 0 17.332 1.97a15 15 0 0 1 5.597 5.598C60 11.023 60 15.648 60 24.9v10.2c0 9.252 0 13.877-1.97 17.332a15.001 15.001 0 0 1-5.598 5.597C48.977 60 44.352 60 35.1 60H24.9c-9.251 0-13.877 0-17.332-1.97a15 15 0 0 1-5.597-5.598C0 48.977 0 44.352 0 35.1V24.9Z"/><path id="wallet-placeholder-dash" stroke="#000" stroke-dasharray="4 4" stroke-width="1.5" d="M.04 41.708a231.598 231.598 0 0 1-.039-4.403l.75-.001L.75 35.1v-2.55H0v-5.1h.75V24.9l.001-2.204h-.75c.003-1.617.011-3.077.039-4.404l.75.016c.034-1.65.099-3.08.218-4.343l-.746-.07c.158-1.678.412-3.083.82-4.316l.713.236c.224-.679.497-1.296.827-1.875a14.25 14.25 0 0 1 1.05-1.585L3.076 5.9A15 15 0 0 1 5.9 3.076l.455.596a14.25 14.25 0 0 1 1.585-1.05c.579-.33 1.196-.603 1.875-.827l-.236-.712C10.812.674 12.217.42 13.895.262l.07.746C15.23.89 16.66.824 18.308.79l-.016-.75C19.62.012 21.08.004 22.695.001l.001.75L24.9.75h2.55V0h5.1v.75h2.55l2.204.001v-.75c1.617.003 3.077.011 4.404.039l-.016.75c1.65.034 3.08.099 4.343.218l.07-.746c1.678.158 3.083.412 4.316.82l-.236.713c.679.224 1.296.497 1.875.827a14.24 14.24 0 0 1 1.585 1.05l.455-.596A14.999 14.999 0 0 1 56.924 5.9l-.596.455c.384.502.735 1.032 1.05 1.585.33.579.602 1.196.827 1.875l.712-.236c.409 1.233.663 2.638.822 4.316l-.747.07c.119 1.264.184 2.694.218 4.343l.75-.016c.028 1.327.036 2.787.039 4.403l-.75.001.001 2.204v2.55H60v5.1h-.75v2.55l-.001 2.204h.75a231.431 231.431 0 0 1-.039 4.404l-.75-.016c-.034 1.65-.099 3.08-.218 4.343l.747.07c-.159 1.678-.413 3.083-.822 4.316l-.712-.236a10.255 10.255 0 0 1-.827 1.875 14.242 14.242 0 0 1-1.05 1.585l.596.455a14.997 14.997 0 0 1-2.824 2.824l-.455-.596c-.502.384-1.032.735-1.585 1.05-.579.33-1.196.602-1.875.827l.236.712c-1.233.409-2.638.663-4.316.822l-.07-.747c-1.264.119-2.694.184-4.343.218l.016.75c-1.327.028-2.787.036-4.403.039l-.001-.75-2.204.001h-2.55V60h-5.1v-.75H24.9l-2.204-.001v.75a231.431 231.431 0 0 1-4.404-.039l.016-.75c-1.65-.034-3.08-.099-4.343-.218l-.07.747c-1.678-.159-3.083-.413-4.316-.822l.236-.712a10.258 10.258 0 0 1-1.875-.827 14.252 14.252 0 0 1-1.585-1.05l-.455.596A14.999 14.999 0 0 1 3.076 54.1l.596-.455a14.24 14.24 0 0 1-1.05-1.585 10.259 10.259 0 0 1-.827-1.875l-.712.236C.674 49.188.42 47.783.262 46.105l.746-.07C.89 44.77.824 43.34.79 41.692l-.75.016Z"/><path fill="#fff" fill-rule="evenodd" d="M35.643 32.145c-.297-.743-.445-1.114-.401-1.275a.42.42 0 0 1 .182-.27c.134-.1.463-.1 1.123-.1.742 0 1.499.046 2.236-.05a6 6 0 0 0 5.166-5.166c.051-.39.051-.855.051-1.784 0-.928 0-1.393-.051-1.783a6 6 0 0 0-5.166-5.165c-.39-.052-.854-.052-1.783-.052h-7.72c-4.934 0-7.401 0-9.244 1.051a8 8 0 0 0-2.985 2.986C16.057 22.28 16.003 24.58 16 29 15.998 31.075 16 33.15 16 35.224A7.778 7.778 0 0 0 23.778 43H28.5c1.394 0 2.09 0 2.67-.116a6 6 0 0 0 4.715-4.714c.115-.58.115-1.301.115-2.744 0-1.31 0-1.964-.114-2.49a4.998 4.998 0 0 0-.243-.792Z" clip-rule="evenodd"/><path fill="#9EA9A9" fill-rule="evenodd" d="M37 18h-7.72c-2.494 0-4.266.002-5.647.126-1.361.122-2.197.354-2.854.728a6.5 6.5 0 0 0-2.425 2.426c-.375.657-.607 1.492-.729 2.853-.11 1.233-.123 2.777-.125 4.867 0 .7 0 1.05.097 1.181.096.13.182.181.343.2.163.02.518-.18 1.229-.581a6.195 6.195 0 0 1 3.053-.8H37c.977 0 1.32-.003 1.587-.038a4.5 4.5 0 0 0 3.874-3.874c.036-.268.039-.611.039-1.588 0-.976-.003-1.319-.038-1.587a4.5 4.5 0 0 0-3.875-3.874C38.32 18.004 37.977 18 37 18Zm-7.364 12.5h-7.414a4.722 4.722 0 0 0-4.722 4.723 6.278 6.278 0 0 0 6.278 6.278H28.5c1.466 0 1.98-.008 2.378-.087a4.5 4.5 0 0 0 3.535-3.536c.08-.397.087-.933.087-2.451 0-1.391-.009-1.843-.08-2.17a3.5 3.5 0 0 0-2.676-2.676c-.328-.072-.762-.08-2.108-.08Z" clip-rule="evenodd"/></g><defs><clipPath id="q"><path fill="#fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>`,GLOBE_ICON:Xe`<svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="#fff" fill-rule="evenodd" d="M15.5 8a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0Zm-2.113.75c.301 0 .535.264.47.558a6.01 6.01 0 0 1-2.867 3.896c-.203.116-.42-.103-.334-.32.409-1.018.691-2.274.797-3.657a.512.512 0 0 1 .507-.477h1.427Zm.47-2.058c.065.294-.169.558-.47.558H11.96a.512.512 0 0 1-.507-.477c-.106-1.383-.389-2.638-.797-3.656-.087-.217.13-.437.333-.32a6.01 6.01 0 0 1 2.868 3.895Zm-4.402.558c.286 0 .515-.24.49-.525-.121-1.361-.429-2.534-.83-3.393-.279-.6-.549-.93-.753-1.112a.535.535 0 0 0-.724 0c-.204.182-.474.513-.754 1.112-.4.859-.708 2.032-.828 3.393a.486.486 0 0 0 .49.525h2.909Zm-5.415 0c.267 0 .486-.21.507-.477.106-1.383.389-2.638.797-3.656.087-.217-.13-.437-.333-.32a6.01 6.01 0 0 0-2.868 3.895c-.065.294.169.558.47.558H4.04ZM2.143 9.308c-.065-.294.169-.558.47-.558H4.04c.267 0 .486.21.507.477.106 1.383.389 2.639.797 3.657.087.217-.13.436-.333.32a6.01 6.01 0 0 1-2.868-3.896Zm3.913-.033a.486.486 0 0 1 .49-.525h2.909c.286 0 .515.24.49.525-.121 1.361-.428 2.535-.83 3.394-.279.6-.549.93-.753 1.112a.535.535 0 0 1-.724 0c-.204-.182-.474-.513-.754-1.112-.4-.859-.708-2.033-.828-3.394Z" clip-rule="evenodd"/></svg>`},i6=Ue`.wcm-toolbar-placeholder{top:0;bottom:0;left:0;right:0;width:100%;position:absolute;display:block;pointer-events:none;height:100px;border-radius:calc(var(--wcm-background-border-radius) * .9);background-color:var(--wcm-background-color);background-position:center;background-size:cover}.wcm-toolbar{height:38px;display:flex;position:relative;margin:5px 15px 5px 5px;justify-content:space-between;align-items:center}.wcm-toolbar img,.wcm-toolbar svg{height:28px;object-position:left center;object-fit:contain}#wcm-wc-logo path{fill:var(--wcm-accent-fill-color)}button{width:28px;height:28px;border-radius:var(--wcm-icon-button-border-radius);border:0;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:var(--wcm-color-bg-1);box-shadow:0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-bg-2)}button svg{display:block;object-position:center}button path{fill:var(--wcm-color-fg-1)}.wcm-toolbar div{display:flex}@media(hover:hover){button:hover{background-color:var(--wcm-color-bg-2)}}`;var s6=Object.defineProperty,o6=Object.getOwnPropertyDescriptor,a6=(t,e,r,n)=>{for(var i=n>1?void 0:n?o6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&s6(e,r,i),i};let el=class extends _e{render(){return Y`<div class="wcm-toolbar-placeholder"></div><div class="wcm-toolbar">${Be.WALLET_CONNECT_LOGO} <button @click="${fn.close}">${Be.CROSS_ICON}</button></div>`}};el.styles=[De.globalCss,i6],el=a6([Ne("wcm-modal-backcard")],el);const c6=Ue`main{padding:20px;padding-top:0;width:100%}`;var l6=Object.defineProperty,u6=Object.getOwnPropertyDescriptor,h6=(t,e,r,n)=>{for(var i=n>1?void 0:n?u6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&l6(e,r,i),i};let tl=class extends _e{render(){return Y`<main><slot></slot></main>`}};tl.styles=[De.globalCss,c6],tl=h6([Ne("wcm-modal-content")],tl);const d6=Ue`footer{padding:10px;display:flex;flex-direction:column;align-items:inherit;justify-content:inherit;border-top:1px solid var(--wcm-color-bg-2)}`;var f6=Object.defineProperty,p6=Object.getOwnPropertyDescriptor,g6=(t,e,r,n)=>{for(var i=n>1?void 0:n?p6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&f6(e,r,i),i};let rl=class extends _e{render(){return Y`<footer><slot></slot></footer>`}};rl.styles=[De.globalCss,d6],rl=g6([Ne("wcm-modal-footer")],rl);const m6=Ue`header{display:flex;justify-content:center;align-items:center;padding:20px;position:relative}.wcm-border{border-bottom:1px solid var(--wcm-color-bg-2);margin-bottom:20px}header button{padding:15px 20px}header button:active{opacity:.5}@media(hover:hover){header button:hover{opacity:.5}}.wcm-back-btn{position:absolute;left:0}.wcm-action-btn{position:absolute;right:0}path{fill:var(--wcm-accent-color)}`;var y6=Object.defineProperty,w6=Object.getOwnPropertyDescriptor,vs=(t,e,r,n)=>{for(var i=n>1?void 0:n?w6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&y6(e,r,i),i};let Ln=class extends _e{constructor(){super(...arguments),this.title="",this.onAction=void 0,this.actionIcon=void 0,this.border=!1}backBtnTemplate(){return Y`<button class="wcm-back-btn" @click="${Ge.goBack}">${Be.BACK_ICON}</button>`}actionBtnTemplate(){return Y`<button class="wcm-action-btn" @click="${this.onAction}">${this.actionIcon}</button>`}render(){const t={"wcm-border":this.border},e=Ge.state.history.length>1,r=this.title?Y`<wcm-text variant="big-bold">${this.title}</wcm-text>`:Y`<slot></slot>`;return Y`<header class="${Mr(t)}">${e?this.backBtnTemplate():null} ${r} ${this.onAction?this.actionBtnTemplate():null}</header>`}};Ln.styles=[De.globalCss,m6],vs([me()],Ln.prototype,"title",2),vs([me()],Ln.prototype,"onAction",2),vs([me()],Ln.prototype,"actionIcon",2),vs([me({type:Boolean})],Ln.prototype,"border",2),Ln=vs([Ne("wcm-modal-header")],Ln);const ue={MOBILE_BREAKPOINT:600,WCM_RECENT_WALLET_DATA:"WCM_RECENT_WALLET_DATA",EXPLORER_WALLET_URL:"https://explorer.walletconnect.com/?type=wallet",getShadowRootElement(t,e){const r=t.renderRoot.querySelector(e);if(!r)throw new Error(`${e} not found`);return r},getWalletIcon({id:t,image_id:e}){const{walletImages:r}=Gt.state;return r!=null&&r[t]?r[t]:e?Wt.getWalletImageUrl(e):""},getWalletName(t,e=!1){return e&&t.length>8?`${t.substring(0,8)}..`:t},isMobileAnimation(){return window.innerWidth<=ue.MOBILE_BREAKPOINT},async preloadImage(t){const e=new Promise((r,n)=>{const i=new Image;i.onload=r,i.onerror=n,i.crossOrigin="anonymous",i.src=t});return Promise.race([e,ie.wait(3e3)])},getErrorMessage(t){return t instanceof Error?t.message:"Unknown Error"},debounce(t,e=500){let r;return(...n)=>{function i(){t(...n)}r&&clearTimeout(r),r=setTimeout(i,e)}},handleMobileLinking(t){const{walletConnectUri:e}=it.state,{mobile:r,name:n}=t,i=r==null?void 0:r.native,s=r==null?void 0:r.universal;ue.setRecentWallet(t);function o(a){let c="";i?c=ie.formatUniversalUrl(i,a,n):s&&(c=ie.formatNativeUrl(s,a,n)),ie.openHref(c,"_self")}e&&o(e)},handleAndroidLinking(){const{walletConnectUri:t}=it.state;t&&(ie.setWalletConnectAndroidDeepLink(t),ie.openHref(t,"_self"))},async handleUriCopy(){const{walletConnectUri:t}=it.state;if(t)try{await navigator.clipboard.writeText(t),Wr.openToast("Link copied","success")}catch{Wr.openToast("Failed to copy","error")}},getCustomImageUrls(){const{walletImages:t}=Gt.state,e=Object.values(t??{});return Object.values(e)},truncate(t,e=8){return t.length<=e?t:`${t.substring(0,4)}...${t.substring(t.length-4)}`},setRecentWallet(t){try{localStorage.setItem(ue.WCM_RECENT_WALLET_DATA,JSON.stringify(t))}catch{console.info("Unable to set recent wallet")}},getRecentWallet(){try{const t=localStorage.getItem(ue.WCM_RECENT_WALLET_DATA);return t?JSON.parse(t):void 0}catch{console.info("Unable to get recent wallet")}},caseSafeIncludes(t,e){return t.toUpperCase().includes(e.toUpperCase())},openWalletExplorerUrl(){ie.openHref(ue.EXPLORER_WALLET_URL,"_blank")},getCachedRouterWalletPlatforms(){const{desktop:t,mobile:e}=ie.getWalletRouterData(),r=!!(t!=null&&t.native),n=!!(t!=null&&t.universal),i=!!(e!=null&&e.native)||!!(e!=null&&e.universal);return{isDesktop:r,isMobile:i,isWeb:n}},goToConnectingView(t){Ge.setData({Wallet:t});const e=ie.isMobile(),{isDesktop:r,isWeb:n,isMobile:i}=ue.getCachedRouterWalletPlatforms();e?i?Ge.push("MobileConnecting"):n?Ge.push("WebConnecting"):Ge.push("InstallWallet"):r?Ge.push("DesktopConnecting"):n?Ge.push("WebConnecting"):i?Ge.push("MobileQrcodeConnecting"):Ge.push("InstallWallet")}},v6=Ue`.wcm-router{overflow:hidden;will-change:transform}.wcm-content{display:flex;flex-direction:column}`;var b6=Object.defineProperty,_6=Object.getOwnPropertyDescriptor,nl=(t,e,r,n)=>{for(var i=n>1?void 0:n?_6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&b6(e,r,i),i};let bs=class extends _e{constructor(){super(),this.view=Ge.state.view,this.prevView=Ge.state.view,this.unsubscribe=void 0,this.oldHeight="0px",this.resizeObserver=void 0,this.unsubscribe=Ge.subscribe(t=>{this.view!==t.view&&this.onChangeRoute()})}firstUpdated(){this.resizeObserver=new ResizeObserver(([t])=>{const e=`${t.contentRect.height}px`;this.oldHeight!=="0px"&&Rn(this.routerEl,{height:[this.oldHeight,e]},{duration:.2}),this.oldHeight=e}),this.resizeObserver.observe(this.contentEl)}disconnectedCallback(){var t,e;(t=this.unsubscribe)==null||t.call(this),(e=this.resizeObserver)==null||e.disconnect()}get routerEl(){return ue.getShadowRootElement(this,".wcm-router")}get contentEl(){return ue.getShadowRootElement(this,".wcm-content")}viewTemplate(){switch(this.view){case"ConnectWallet":return Y`<wcm-connect-wallet-view></wcm-connect-wallet-view>`;case"DesktopConnecting":return Y`<wcm-desktop-connecting-view></wcm-desktop-connecting-view>`;case"MobileConnecting":return Y`<wcm-mobile-connecting-view></wcm-mobile-connecting-view>`;case"WebConnecting":return Y`<wcm-web-connecting-view></wcm-web-connecting-view>`;case"MobileQrcodeConnecting":return Y`<wcm-mobile-qr-connecting-view></wcm-mobile-qr-connecting-view>`;case"WalletExplorer":return Y`<wcm-wallet-explorer-view></wcm-wallet-explorer-view>`;case"Qrcode":return Y`<wcm-qrcode-view></wcm-qrcode-view>`;case"InstallWallet":return Y`<wcm-install-wallet-view></wcm-install-wallet-view>`;default:return Y`<div>Not Found</div>`}}async onChangeRoute(){await Rn(this.routerEl,{opacity:[1,0],scale:[1,1.02]},{duration:.15,delay:.1}).finished,this.view=Ge.state.view,Rn(this.routerEl,{opacity:[0,1],scale:[.99,1]},{duration:.37,delay:.05})}render(){return Y`<div class="wcm-router"><div class="wcm-content">${this.viewTemplate()}</div></div>`}};bs.styles=[De.globalCss,v6],nl([Zt()],bs.prototype,"view",2),nl([Zt()],bs.prototype,"prevView",2),bs=nl([Ne("wcm-modal-router")],bs);const E6=Ue`div{height:36px;width:max-content;display:flex;justify-content:center;align-items:center;padding:9px 15px 11px;position:absolute;top:12px;box-shadow:0 6px 14px -6px rgba(10,16,31,.3),0 10px 32px -4px rgba(10,16,31,.15);z-index:2;left:50%;transform:translateX(-50%);pointer-events:none;backdrop-filter:blur(20px) saturate(1.8);-webkit-backdrop-filter:blur(20px) saturate(1.8);border-radius:var(--wcm-notification-border-radius);border:1px solid var(--wcm-color-overlay);background-color:var(--wcm-color-overlay)}svg{margin-right:5px}@-moz-document url-prefix(){div{background-color:var(--wcm-color-bg-3)}}.wcm-success path{fill:var(--wcm-accent-color)}.wcm-error path{fill:var(--wcm-error-color)}`;var x6=Object.defineProperty,S6=Object.getOwnPropertyDescriptor,Zf=(t,e,r,n)=>{for(var i=n>1?void 0:n?S6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&x6(e,r,i),i};let Lo=class extends _e{constructor(){super(),this.open=!1,this.unsubscribe=void 0,this.timeout=void 0,this.unsubscribe=Wr.subscribe(t=>{t.open?(this.open=!0,this.timeout=setTimeout(()=>Wr.closeToast(),2200)):(this.open=!1,clearTimeout(this.timeout))})}disconnectedCallback(){var t;(t=this.unsubscribe)==null||t.call(this),clearTimeout(this.timeout),Wr.closeToast()}render(){const{message:t,variant:e}=Wr.state,r={"wcm-success":e==="success","wcm-error":e==="error"};return this.open?Y`<div class="${Mr(r)}">${e==="success"?Be.CHECKMARK_ICON:null} ${e==="error"?Be.CROSS_ICON:null}<wcm-text variant="small-regular">${t}</wcm-text></div>`:null}};Lo.styles=[De.globalCss,E6],Zf([Zt()],Lo.prototype,"open",2),Lo=Zf([Ne("wcm-modal-toast")],Lo);const C6=.1,Gf=2.5,kr=7;function il(t,e,r){return t===e?!1:(t-e<0?e-t:t-e)<=r+C6}function I6(t,e){const r=Array.prototype.slice.call(ps.create(t,{errorCorrectionLevel:e}).modules.data,0),n=Math.sqrt(r.length);return r.reduce((i,s,o)=>(o%n===0?i.push([s]):i[i.length-1].push(s))&&i,[])}const D6={generate(t,e,r){const n="#141414",i="#ffffff",s=[],o=I6(t,"Q"),a=e/o.length,c=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];c.forEach(({x:v,y:x})=>{const O=(o.length-kr)*a*v,I=(o.length-kr)*a*x,_=.45;for(let S=0;S<c.length;S+=1){const w=a*(kr-S*2);s.push(Xe`<rect fill="${S%2===0?n:i}" height="${w}" rx="${w*_}" ry="${w*_}" width="${w}" x="${O+a*S}" y="${I+a*S}">`)}});const l=Math.floor((r+25)/a),h=o.length/2-l/2,f=o.length/2+l/2-1,p=[];o.forEach((v,x)=>{v.forEach((O,I)=>{if(o[x][I]&&!(x<kr&&I<kr||x>o.length-(kr+1)&&I<kr||x<kr&&I>o.length-(kr+1))&&!(x>h&&x<f&&I>h&&I<f)){const _=x*a+a/2,S=I*a+a/2;p.push([_,S])}})});const y={};return p.forEach(([v,x])=>{y[v]?y[v].push(x):y[v]=[x]}),Object.entries(y).map(([v,x])=>{const O=x.filter(I=>x.every(_=>!il(I,_,a)));return[Number(v),O]}).forEach(([v,x])=>{x.forEach(O=>{s.push(Xe`<circle cx="${v}" cy="${O}" fill="${n}" r="${a/Gf}">`)})}),Object.entries(y).filter(([v,x])=>x.length>1).map(([v,x])=>{const O=x.filter(I=>x.some(_=>il(I,_,a)));return[Number(v),O]}).map(([v,x])=>{x.sort((I,_)=>I<_?-1:1);const O=[];for(const I of x){const _=O.find(S=>S.some(w=>il(I,w,a)));_?_.push(I):O.push([I])}return[v,O.map(I=>[I[0],I[I.length-1]])]}).forEach(([v,x])=>{x.forEach(([O,I])=>{s.push(Xe`<line x1="${v}" x2="${v}" y1="${O}" y2="${I}" stroke="${n}" stroke-width="${a/(Gf/2)}" stroke-linecap="round">`)})}),s}},O6=Ue`@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}div{position:relative;user-select:none;display:block;overflow:hidden;aspect-ratio:1/1;animation:fadeIn ease .2s}.wcm-dark{background-color:#fff;border-radius:var(--wcm-container-border-radius);padding:18px;box-shadow:0 2px 5px #000}svg:first-child,wcm-wallet-image{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{width:25%;height:25%;border-radius:var(--wcm-wallet-icon-border-radius)}svg:first-child{transform:translateY(-50%) translateX(-50%) scale(.9)}svg:first-child path:first-child{fill:var(--wcm-accent-color)}svg:first-child path:last-child{stroke:var(--wcm-color-overlay)}`;var $6=Object.defineProperty,A6=Object.getOwnPropertyDescriptor,vi=(t,e,r,n)=>{for(var i=n>1?void 0:n?A6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&$6(e,r,i),i};let Ur=class extends _e{constructor(){super(...arguments),this.uri="",this.size=0,this.imageId=void 0,this.walletId=void 0,this.imageUrl=void 0}svgTemplate(){const t=qr.state.themeMode==="light"?this.size:this.size-36;return Xe`<svg height="${t}" width="${t}">${D6.generate(this.uri,t,t/4)}</svg>`}render(){const t={"wcm-dark":qr.state.themeMode==="dark"};return Y`<div style="${`width: ${this.size}px`}" class="${Mr(t)}">${this.walletId||this.imageUrl?Y`<wcm-wallet-image walletId="${qt(this.walletId)}" imageId="${qt(this.imageId)}" imageUrl="${qt(this.imageUrl)}"></wcm-wallet-image>`:Be.WALLET_CONNECT_ICON_COLORED} ${this.svgTemplate()}</div>`}};Ur.styles=[De.globalCss,O6],vi([me()],Ur.prototype,"uri",2),vi([me({type:Number})],Ur.prototype,"size",2),vi([me()],Ur.prototype,"imageId",2),vi([me()],Ur.prototype,"walletId",2),vi([me()],Ur.prototype,"imageUrl",2),Ur=vi([Ne("wcm-qrcode")],Ur);const T6=Ue`:host{position:relative;height:28px;width:80%}input{width:100%;height:100%;line-height:28px!important;border-radius:var(--wcm-input-border-radius);font-style:normal;font-family:-apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,'Helvetica Neue',sans-serif;font-feature-settings:'case' on;font-weight:500;font-size:16px;letter-spacing:-.03em;padding:0 10px 0 34px;transition:.2s all ease;color:var(--wcm-color-fg-1);background-color:var(--wcm-color-bg-3);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay);caret-color:var(--wcm-accent-color)}input::placeholder{color:var(--wcm-color-fg-2)}svg{left:10px;top:4px;pointer-events:none;position:absolute;width:20px;height:20px}input:focus-within{box-shadow:inset 0 0 0 1px var(--wcm-accent-color)}path{fill:var(--wcm-color-fg-2)}`;var N6=Object.defineProperty,P6=Object.getOwnPropertyDescriptor,Yf=(t,e,r,n)=>{for(var i=n>1?void 0:n?P6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&N6(e,r,i),i};let Mo=class extends _e{constructor(){super(...arguments),this.onChange=()=>null}render(){return Y`<input type="text" @input="${this.onChange}" placeholder="Search wallets"> ${Be.SEARCH_ICON}`}};Mo.styles=[De.globalCss,T6],Yf([me()],Mo.prototype,"onChange",2),Mo=Yf([Ne("wcm-search-input")],Mo);const R6=Ue`@keyframes rotate{100%{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}svg{animation:rotate 2s linear infinite;display:flex;justify-content:center;align-items:center}svg circle{stroke-linecap:round;animation:dash 1.5s ease infinite;stroke:var(--wcm-accent-color)}`;var L6=Object.defineProperty,M6=Object.getOwnPropertyDescriptor,k6=(t,e,r,n)=>{for(var i=n>1?void 0:n?M6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&L6(e,r,i),i};let sl=class extends _e{render(){return Y`<svg viewBox="0 0 50 50" width="24" height="24"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4" stroke="#fff"/></svg>`}};sl.styles=[De.globalCss,R6],sl=k6([Ne("wcm-spinner")],sl);const U6=Ue`span{font-style:normal;font-family:var(--wcm-font-family);font-feature-settings:var(--wcm-font-feature-settings)}.wcm-xsmall-bold{font-family:var(--wcm-text-xsmall-bold-font-family);font-weight:var(--wcm-text-xsmall-bold-weight);font-size:var(--wcm-text-xsmall-bold-size);line-height:var(--wcm-text-xsmall-bold-line-height);letter-spacing:var(--wcm-text-xsmall-bold-letter-spacing);text-transform:var(--wcm-text-xsmall-bold-text-transform)}.wcm-xsmall-regular{font-family:var(--wcm-text-xsmall-regular-font-family);font-weight:var(--wcm-text-xsmall-regular-weight);font-size:var(--wcm-text-xsmall-regular-size);line-height:var(--wcm-text-xsmall-regular-line-height);letter-spacing:var(--wcm-text-xsmall-regular-letter-spacing);text-transform:var(--wcm-text-xsmall-regular-text-transform)}.wcm-small-thin{font-family:var(--wcm-text-small-thin-font-family);font-weight:var(--wcm-text-small-thin-weight);font-size:var(--wcm-text-small-thin-size);line-height:var(--wcm-text-small-thin-line-height);letter-spacing:var(--wcm-text-small-thin-letter-spacing);text-transform:var(--wcm-text-small-thin-text-transform)}.wcm-small-regular{font-family:var(--wcm-text-small-regular-font-family);font-weight:var(--wcm-text-small-regular-weight);font-size:var(--wcm-text-small-regular-size);line-height:var(--wcm-text-small-regular-line-height);letter-spacing:var(--wcm-text-small-regular-letter-spacing);text-transform:var(--wcm-text-small-regular-text-transform)}.wcm-medium-regular{font-family:var(--wcm-text-medium-regular-font-family);font-weight:var(--wcm-text-medium-regular-weight);font-size:var(--wcm-text-medium-regular-size);line-height:var(--wcm-text-medium-regular-line-height);letter-spacing:var(--wcm-text-medium-regular-letter-spacing);text-transform:var(--wcm-text-medium-regular-text-transform)}.wcm-big-bold{font-family:var(--wcm-text-big-bold-font-family);font-weight:var(--wcm-text-big-bold-weight);font-size:var(--wcm-text-big-bold-size);line-height:var(--wcm-text-big-bold-line-height);letter-spacing:var(--wcm-text-big-bold-letter-spacing);text-transform:var(--wcm-text-big-bold-text-transform)}:host(*){color:var(--wcm-color-fg-1)}.wcm-color-primary{color:var(--wcm-color-fg-1)}.wcm-color-secondary{color:var(--wcm-color-fg-2)}.wcm-color-tertiary{color:var(--wcm-color-fg-3)}.wcm-color-inverse{color:var(--wcm-accent-fill-color)}.wcm-color-accnt{color:var(--wcm-accent-color)}.wcm-color-error{color:var(--wcm-error-color)}`;var F6=Object.defineProperty,j6=Object.getOwnPropertyDescriptor,ol=(t,e,r,n)=>{for(var i=n>1?void 0:n?j6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&F6(e,r,i),i};let _s=class extends _e{constructor(){super(...arguments),this.variant="medium-regular",this.color="primary"}render(){const t={"wcm-big-bold":this.variant==="big-bold","wcm-medium-regular":this.variant==="medium-regular","wcm-small-regular":this.variant==="small-regular","wcm-small-thin":this.variant==="small-thin","wcm-xsmall-regular":this.variant==="xsmall-regular","wcm-xsmall-bold":this.variant==="xsmall-bold","wcm-color-primary":this.color==="primary","wcm-color-secondary":this.color==="secondary","wcm-color-tertiary":this.color==="tertiary","wcm-color-inverse":this.color==="inverse","wcm-color-accnt":this.color==="accent","wcm-color-error":this.color==="error"};return Y`<span><slot class="${Mr(t)}"></slot></span>`}};_s.styles=[De.globalCss,U6],ol([me()],_s.prototype,"variant",2),ol([me()],_s.prototype,"color",2),_s=ol([Ne("wcm-text")],_s);const B6=Ue`button{width:100%;height:100%;border-radius:var(--wcm-button-hover-highlight-border-radius);display:flex;align-items:flex-start}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}button>div{width:80px;padding:5px 0;display:flex;flex-direction:column;align-items:center}wcm-text{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}wcm-wallet-image{height:60px;width:60px;transition:all .2s ease;border-radius:var(--wcm-wallet-icon-border-radius);margin-bottom:5px}.wcm-sublabel{margin-top:2px}`;var z6=Object.defineProperty,q6=Object.getOwnPropertyDescriptor,nn=(t,e,r,n)=>{for(var i=n>1?void 0:n?q6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&z6(e,r,i),i};let Ir=class extends _e{constructor(){super(...arguments),this.onClick=()=>null,this.name="",this.walletId="",this.label=void 0,this.imageId=void 0,this.installed=!1,this.recent=!1}sublabelTemplate(){return this.recent?Y`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">RECENT</wcm-text>`:this.installed?Y`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">INSTALLED</wcm-text>`:null}handleClick(){El.click({name:"WALLET_BUTTON",walletId:this.walletId}),this.onClick()}render(){var t;return Y`<button @click="${this.handleClick.bind(this)}"><div><wcm-wallet-image walletId="${this.walletId}" imageId="${qt(this.imageId)}"></wcm-wallet-image><wcm-text variant="xsmall-regular">${(t=this.label)!=null?t:ue.getWalletName(this.name,!0)}</wcm-text>${this.sublabelTemplate()}</div></button>`}};Ir.styles=[De.globalCss,B6],nn([me()],Ir.prototype,"onClick",2),nn([me()],Ir.prototype,"name",2),nn([me()],Ir.prototype,"walletId",2),nn([me()],Ir.prototype,"label",2),nn([me()],Ir.prototype,"imageId",2),nn([me({type:Boolean})],Ir.prototype,"installed",2),nn([me({type:Boolean})],Ir.prototype,"recent",2),Ir=nn([Ne("wcm-wallet-button")],Ir);const W6=Ue`:host{display:block}div{overflow:hidden;position:relative;border-radius:inherit;width:100%;height:100%;background-color:var(--wcm-color-overlay)}svg{position:relative;width:100%;height:100%}div::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;border-radius:inherit;border:1px solid var(--wcm-color-overlay)}div img{width:100%;height:100%;object-fit:cover;object-position:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var V6=Object.defineProperty,H6=Object.getOwnPropertyDescriptor,ko=(t,e,r,n)=>{for(var i=n>1?void 0:n?H6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&V6(e,r,i),i};let bi=class extends _e{constructor(){super(...arguments),this.walletId="",this.imageId=void 0,this.imageUrl=void 0}render(){var t;const e=(t=this.imageUrl)!=null&&t.length?this.imageUrl:ue.getWalletIcon({id:this.walletId,image_id:this.imageId});return Y`${e.length?Y`<div><img crossorigin="anonymous" src="${e}" alt="${this.id}"></div>`:Be.WALLET_PLACEHOLDER}`}};bi.styles=[De.globalCss,W6],ko([me()],bi.prototype,"walletId",2),ko([me()],bi.prototype,"imageId",2),ko([me()],bi.prototype,"imageUrl",2),bi=ko([Ne("wcm-wallet-image")],bi);var K6=Object.defineProperty,Z6=Object.getOwnPropertyDescriptor,Jf=(t,e,r,n)=>{for(var i=n>1?void 0:n?Z6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&K6(e,r,i),i};let al=class extends _e{constructor(){super(),this.preload=!0,this.preloadData()}async loadImages(t){try{t!=null&&t.length&&await Promise.all(t.map(async e=>ue.preloadImage(e)))}catch{console.info("Unsuccessful attempt at preloading some images",t)}}async preloadListings(){if(Gt.state.enableExplorer){await Wt.getRecomendedWallets(),it.setIsDataLoaded(!0);const{recomendedWallets:t}=Wt.state,e=t.map(r=>ue.getWalletIcon(r));await this.loadImages(e)}else it.setIsDataLoaded(!0)}async preloadCustomImages(){const t=ue.getCustomImageUrls();await this.loadImages(t)}async preloadData(){try{this.preload&&(this.preload=!1,await Promise.all([this.preloadListings(),this.preloadCustomImages()]))}catch(t){console.error(t),Wr.openToast("Failed preloading","error")}}};Jf([Zt()],al.prototype,"preload",2),al=Jf([Ne("wcm-explorer-context")],al);var G6=Object.defineProperty,Y6=Object.getOwnPropertyDescriptor,J6=(t,e,r,n)=>{for(var i=n>1?void 0:n?Y6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&G6(e,r,i),i};let Qf=class extends _e{constructor(){super(),this.unsubscribeTheme=void 0,De.setTheme(),this.unsubscribeTheme=qr.subscribe(De.setTheme)}disconnectedCallback(){var t;(t=this.unsubscribeTheme)==null||t.call(this)}};Qf=J6([Ne("wcm-theme-context")],Qf);const Q6=Ue`@keyframes scroll{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(calc(-70px * 9),0,0)}}.wcm-slider{position:relative;overflow-x:hidden;padding:10px 0;margin:0 -20px;width:calc(100% + 40px)}.wcm-track{display:flex;width:calc(70px * 18);animation:scroll 20s linear infinite;opacity:.7}.wcm-track svg{margin:0 5px}wcm-wallet-image{width:60px;height:60px;margin:0 5px;border-radius:var(--wcm-wallet-icon-border-radius)}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-title{display:flex;align-items:center;margin-bottom:10px}.wcm-title svg{margin-right:6px}.wcm-title path{fill:var(--wcm-accent-color)}wcm-modal-footer .wcm-title{padding:0 10px}wcm-button-big{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);filter:drop-shadow(0 0 17px var(--wcm-color-bg-1))}wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-info-footer wcm-text{text-align:center;margin-bottom:15px}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var X6=Object.defineProperty,eE=Object.getOwnPropertyDescriptor,tE=(t,e,r,n)=>{for(var i=n>1?void 0:n?eE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&X6(e,r,i),i};let cl=class extends _e{onGoToQrcode(){Ge.push("Qrcode")}render(){const{recomendedWallets:t}=Wt.state,e=[...t,...t],r=ie.RECOMMENDED_WALLET_AMOUNT*2;return Y`<wcm-modal-header title="Connect your wallet" .onAction="${this.onGoToQrcode}" .actionIcon="${Be.QRCODE_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-title">${Be.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">WalletConnect</wcm-text></div><div class="wcm-slider"><div class="wcm-track">${[...Array(r)].map((n,i)=>{const s=e[i%e.length];return s?Y`<wcm-wallet-image walletId="${s.id}" imageId="${s.image_id}"></wcm-wallet-image>`:Be.WALLET_PLACEHOLDER})}</div><wcm-button-big @click="${ue.handleAndroidLinking}"><wcm-text variant="medium-regular" color="inverse">Select Wallet</wcm-text></wcm-button-big></div></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">Choose WalletConnect to see supported apps on your device</wcm-text></wcm-info-footer>`}};cl.styles=[De.globalCss,Q6],cl=tE([Ne("wcm-android-wallet-selection")],cl);const rE=Ue`@keyframes loading{to{stroke-dashoffset:0}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(1px,0,0)}30%,50%,70%{transform:translate3d(-2px,0,0)}40%,60%{transform:translate3d(2px,0,0)}}:host{display:flex;flex-direction:column;align-items:center}div{position:relative;width:110px;height:110px;display:flex;justify-content:center;align-items:center;margin:40px 0 20px 0;transform:translate3d(0,0,0)}svg{position:absolute;width:110px;height:110px;fill:none;stroke:transparent;stroke-linecap:round;stroke-width:2px;top:0;left:0}use{stroke:var(--wcm-accent-color);animation:loading 1s linear infinite}wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:90px;height:90px}wcm-text{margin-bottom:40px}.wcm-error svg{stroke:var(--wcm-error-color)}.wcm-error use{display:none}.wcm-error{animation:shake .4s cubic-bezier(.36,.07,.19,.97) both}.wcm-stale svg,.wcm-stale use{display:none}`;var nE=Object.defineProperty,iE=Object.getOwnPropertyDescriptor,_i=(t,e,r,n)=>{for(var i=n>1?void 0:n?iE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&nE(e,r,i),i};let sn=class extends _e{constructor(){super(...arguments),this.walletId=void 0,this.imageId=void 0,this.isError=!1,this.isStale=!1,this.label=""}svgLoaderTemplate(){var t,e;const r=(e=(t=qr.state.themeVariables)==null?void 0:t["--wcm-wallet-icon-large-border-radius"])!=null?e:De.getPreset("--wcm-wallet-icon-large-border-radius");let n=0;r.includes("%")?n=88/100*parseInt(r,10):n=parseInt(r,10),n*=1.17;const i=317-n*1.57,s=425-n*1.8;return Y`<svg viewBox="0 0 110 110" width="110" height="110"><rect id="wcm-loader" x="2" y="2" width="106" height="106" rx="${n}"/><use xlink:href="#wcm-loader" stroke-dasharray="106 ${i}" stroke-dashoffset="${s}"></use></svg>`}render(){const t={"wcm-error":this.isError,"wcm-stale":this.isStale};return Y`<div class="${Mr(t)}">${this.svgLoaderTemplate()}<wcm-wallet-image walletId="${qt(this.walletId)}" imageId="${qt(this.imageId)}"></wcm-wallet-image></div><wcm-text variant="medium-regular" color="${this.isError?"error":"primary"}">${this.isError?"Connection declined":this.label}</wcm-text>`}};sn.styles=[De.globalCss,rE],_i([me()],sn.prototype,"walletId",2),_i([me()],sn.prototype,"imageId",2),_i([me({type:Boolean})],sn.prototype,"isError",2),_i([me({type:Boolean})],sn.prototype,"isStale",2),_i([me()],sn.prototype,"label",2),sn=_i([Ne("wcm-connector-waiting")],sn);const Ei={manualWallets(){var t,e;const{mobileWallets:r,desktopWallets:n}=Gt.state,i=(t=Ei.recentWallet())==null?void 0:t.id,s=ie.isMobile()?r:n,o=s==null?void 0:s.filter(a=>i!==a.id);return(e=ie.isMobile()?o==null?void 0:o.map(({id:a,name:c,links:l})=>({id:a,name:c,mobile:l,links:l})):o==null?void 0:o.map(({id:a,name:c,links:l})=>({id:a,name:c,desktop:l,links:l})))!=null?e:[]},recentWallet(){return ue.getRecentWallet()},recomendedWallets(t=!1){var e;const r=t||(e=Ei.recentWallet())==null?void 0:e.id,{recomendedWallets:n}=Wt.state;return n.filter(i=>r!==i.id)}},on={onConnecting(t){ue.goToConnectingView(t)},manualWalletsTemplate(){return Ei.manualWallets().map(t=>Y`<wcm-wallet-button walletId="${t.id}" name="${t.name}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`)},recomendedWalletsTemplate(t=!1){return Ei.recomendedWallets(t).map(e=>Y`<wcm-wallet-button name="${e.name}" walletId="${e.id}" imageId="${e.image_id}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`)},recentWalletTemplate(){const t=Ei.recentWallet();if(t)return Y`<wcm-wallet-button name="${t.name}" walletId="${t.id}" imageId="${qt(t.image_id)}" .recent="${!0}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`}},sE=Ue`.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-desktop-title,.wcm-mobile-title{display:flex;align-items:center}.wcm-mobile-title{justify-content:space-between;margin-bottom:20px;margin-top:-10px}.wcm-desktop-title{margin-bottom:10px;padding:0 10px}.wcm-subtitle{display:flex;align-items:center}.wcm-subtitle:last-child path{fill:var(--wcm-color-fg-3)}.wcm-desktop-title svg,.wcm-mobile-title svg{margin-right:6px}.wcm-desktop-title path,.wcm-mobile-title path{fill:var(--wcm-accent-color)}`;var oE=Object.defineProperty,aE=Object.getOwnPropertyDescriptor,cE=(t,e,r,n)=>{for(var i=n>1?void 0:n?aE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&oE(e,r,i),i};let ll=class extends _e{render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Gt.state,r=t!=="ALL"&&e,n=on.manualWalletsTemplate(),i=on.recomendedWalletsTemplate();let s=[on.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>4||r;let a=[];o?a=s.slice(0,3):a=s;const c=!!a.length;return Y`<wcm-modal-header .border="${!0}" title="Connect your wallet" .onAction="${ue.handleUriCopy}" .actionIcon="${Be.COPY_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-mobile-title"><div class="wcm-subtitle">${Be.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">Mobile</wcm-text></div><div class="wcm-subtitle">${Be.SCAN_ICON}<wcm-text variant="small-regular" color="secondary">Scan with your wallet</wcm-text></div></div><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>${c?Y`<wcm-modal-footer><div class="wcm-desktop-title">${Be.DESKTOP_ICON}<wcm-text variant="small-regular" color="accent">Desktop</wcm-text></div><div class="wcm-grid">${a} ${o?Y`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-footer>`:null}`}};ll.styles=[De.globalCss,sE],ll=cE([Ne("wcm-desktop-wallet-selection")],ll);const lE=Ue`div{background-color:var(--wcm-color-bg-2);padding:10px 20px 15px 20px;border-top:1px solid var(--wcm-color-bg-3);text-align:center}a{color:var(--wcm-accent-color);text-decoration:none;transition:opacity .2s ease-in-out;display:inline}a:active{opacity:.8}@media(hover:hover){a:hover{opacity:.8}}`;var uE=Object.defineProperty,hE=Object.getOwnPropertyDescriptor,dE=(t,e,r,n)=>{for(var i=n>1?void 0:n?hE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&uE(e,r,i),i};let ul=class extends _e{render(){const{termsOfServiceUrl:t,privacyPolicyUrl:e}=Gt.state;return t??e?Y`<div><wcm-text variant="small-regular" color="secondary">By connecting your wallet to this app, you agree to the app's ${t?Y`<a href="${t}" target="_blank" rel="noopener noreferrer">Terms of Service</a>`:null} ${t&&e?"and":null} ${e?Y`<a href="${e}" target="_blank" rel="noopener noreferrer">Privacy Policy</a>`:null}</wcm-text></div>`:null}};ul.styles=[De.globalCss,lE],ul=dE([Ne("wcm-legal-notice")],ul);const fE=Ue`div{display:grid;grid-template-columns:repeat(4,80px);margin:0 -10px;justify-content:space-between;row-gap:10px}`;var pE=Object.defineProperty,gE=Object.getOwnPropertyDescriptor,mE=(t,e,r,n)=>{for(var i=n>1?void 0:n?gE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&pE(e,r,i),i};let hl=class extends _e{onQrcode(){Ge.push("Qrcode")}render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Gt.state,r=t!=="ALL"&&e,n=on.manualWalletsTemplate(),i=on.recomendedWalletsTemplate();let s=[on.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>8||r;let a=[];o?a=s.slice(0,7):a=s;const c=!!a.length;return Y`<wcm-modal-header title="Connect your wallet" .onAction="${this.onQrcode}" .actionIcon="${Be.QRCODE_ICON}"></wcm-modal-header>${c?Y`<wcm-modal-content><div>${a} ${o?Y`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-content>`:null}`}};hl.styles=[De.globalCss,fE],hl=mE([Ne("wcm-mobile-wallet-selection")],hl);const yE=Ue`:host{all:initial}.wcm-overlay{top:0;bottom:0;left:0;right:0;position:fixed;z-index:var(--wcm-z-index);overflow:hidden;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;background-color:var(--wcm-overlay-background-color);backdrop-filter:var(--wcm-overlay-backdrop-filter)}@media(max-height:720px) and (orientation:landscape){.wcm-overlay{overflow:scroll;align-items:flex-start;padding:20px 0}}.wcm-active{pointer-events:auto}.wcm-container{position:relative;max-width:360px;width:100%;outline:0;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) var(--wcm-container-border-radius) var(--wcm-container-border-radius);border:1px solid var(--wcm-color-overlay);overflow:hidden}.wcm-card{width:100%;position:relative;border-radius:var(--wcm-container-border-radius);overflow:hidden;box-shadow:0 6px 14px -6px rgba(10,16,31,.12),0 10px 32px -4px rgba(10,16,31,.1),0 0 0 1px var(--wcm-color-overlay);background-color:var(--wcm-color-bg-1);color:var(--wcm-color-fg-1)}@media(max-width:600px){.wcm-container{max-width:440px;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) 0 0}.wcm-card{border-radius:var(--wcm-container-border-radius) var(--wcm-container-border-radius) 0 0}.wcm-overlay{align-items:flex-end}}@media(max-width:440px){.wcm-container{border:0}}`;var wE=Object.defineProperty,vE=Object.getOwnPropertyDescriptor,dl=(t,e,r,n)=>{for(var i=n>1?void 0:n?vE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&wE(e,r,i),i};let xi=class extends _e{constructor(){super(),this.open=!1,this.active=!1,this.unsubscribeModal=void 0,this.abortController=void 0,this.unsubscribeModal=fn.subscribe(t=>{t.open?this.onOpenModalEvent():this.onCloseModalEvent()})}disconnectedCallback(){var t;(t=this.unsubscribeModal)==null||t.call(this)}get overlayEl(){return ue.getShadowRootElement(this,".wcm-overlay")}get containerEl(){return ue.getShadowRootElement(this,".wcm-container")}toggleBodyScroll(t){if(document.querySelector("body"))if(t){const e=document.getElementById("wcm-styles");e==null||e.remove()}else document.head.insertAdjacentHTML("beforeend",'<style id="wcm-styles">html,body{touch-action:none;overflow:hidden;overscroll-behavior:contain;}</style>')}onCloseModal(t){t.target===t.currentTarget&&fn.close()}onOpenModalEvent(){this.toggleBodyScroll(!1),this.addKeyboardEvents(),this.open=!0,setTimeout(async()=>{const t=ue.isMobileAnimation()?{y:["50vh","0vh"]}:{scale:[.98,1]},e=.1,r=.2;await Promise.all([Rn(this.overlayEl,{opacity:[0,1]},{delay:e,duration:r}).finished,Rn(this.containerEl,t,{delay:e,duration:r}).finished]),this.active=!0},0)}async onCloseModalEvent(){this.toggleBodyScroll(!0),this.removeKeyboardEvents();const t=ue.isMobileAnimation()?{y:["0vh","50vh"]}:{scale:[1,.98]},e=.2;await Promise.all([Rn(this.overlayEl,{opacity:[1,0]},{duration:e}).finished,Rn(this.containerEl,t,{duration:e}).finished]),this.containerEl.removeAttribute("style"),this.active=!1,this.open=!1}addKeyboardEvents(){this.abortController=new AbortController,window.addEventListener("keydown",t=>{var e;t.key==="Escape"?fn.close():t.key==="Tab"&&((e=t.target)!=null&&e.tagName.includes("wcm-")||this.containerEl.focus())},this.abortController),this.containerEl.focus()}removeKeyboardEvents(){var t;(t=this.abortController)==null||t.abort(),this.abortController=void 0}render(){const t={"wcm-overlay":!0,"wcm-active":this.active};return Y`<wcm-explorer-context></wcm-explorer-context><wcm-theme-context></wcm-theme-context><div id="wcm-modal" class="${Mr(t)}" @click="${this.onCloseModal}" role="alertdialog" aria-modal="true"><div class="wcm-container" tabindex="0">${this.open?Y`<wcm-modal-backcard></wcm-modal-backcard><div class="wcm-card"><wcm-modal-router></wcm-modal-router><wcm-modal-toast></wcm-modal-toast></div>`:null}</div></div>`}};xi.styles=[De.globalCss,yE],dl([Zt()],xi.prototype,"open",2),dl([Zt()],xi.prototype,"active",2),xi=dl([Ne("wcm-modal")],xi);const bE=Ue`div{display:flex;margin-top:15px}slot{display:inline-block;margin:0 5px}wcm-button{margin:0 5px}`;var _E=Object.defineProperty,EE=Object.getOwnPropertyDescriptor,Es=(t,e,r,n)=>{for(var i=n>1?void 0:n?EE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&_E(e,r,i),i};let Mn=class extends _e{constructor(){super(...arguments),this.isMobile=!1,this.isDesktop=!1,this.isWeb=!1,this.isRetry=!1}onMobile(){ie.isMobile()?Ge.replace("MobileConnecting"):Ge.replace("MobileQrcodeConnecting")}onDesktop(){Ge.replace("DesktopConnecting")}onWeb(){Ge.replace("WebConnecting")}render(){return Y`<div>${this.isRetry?Y`<slot></slot>`:null} ${this.isMobile?Y`<wcm-button .onClick="${this.onMobile}" .iconLeft="${Be.MOBILE_ICON}" variant="outline">Mobile</wcm-button>`:null} ${this.isDesktop?Y`<wcm-button .onClick="${this.onDesktop}" .iconLeft="${Be.DESKTOP_ICON}" variant="outline">Desktop</wcm-button>`:null} ${this.isWeb?Y`<wcm-button .onClick="${this.onWeb}" .iconLeft="${Be.GLOBE_ICON}" variant="outline">Web</wcm-button>`:null}</div>`}};Mn.styles=[De.globalCss,bE],Es([me({type:Boolean})],Mn.prototype,"isMobile",2),Es([me({type:Boolean})],Mn.prototype,"isDesktop",2),Es([me({type:Boolean})],Mn.prototype,"isWeb",2),Es([me({type:Boolean})],Mn.prototype,"isRetry",2),Mn=Es([Ne("wcm-platform-selection")],Mn);const xE=Ue`button{display:flex;flex-direction:column;padding:5px 10px;border-radius:var(--wcm-button-hover-highlight-border-radius);height:100%;justify-content:flex-start}.wcm-icons{width:60px;height:60px;display:flex;flex-wrap:wrap;padding:7px;border-radius:var(--wcm-wallet-icon-border-radius);justify-content:space-between;align-items:center;margin-bottom:5px;background-color:var(--wcm-color-bg-2);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}.wcm-icons img{width:21px;height:21px;object-fit:cover;object-position:center;border-radius:calc(var(--wcm-wallet-icon-border-radius)/ 2);border:1px solid var(--wcm-color-overlay)}.wcm-icons svg{width:21px;height:21px}.wcm-icons img:nth-child(1),.wcm-icons img:nth-child(2),.wcm-icons svg:nth-child(1),.wcm-icons svg:nth-child(2){margin-bottom:4px}wcm-text{width:100%;text-align:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var SE=Object.defineProperty,CE=Object.getOwnPropertyDescriptor,IE=(t,e,r,n)=>{for(var i=n>1?void 0:n?CE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&SE(e,r,i),i};let fl=class extends _e{onClick(){Ge.push("WalletExplorer")}render(){const{recomendedWallets:t}=Wt.state,e=Ei.manualWallets(),r=[...t,...e].reverse().slice(0,4);return Y`<button @click="${this.onClick}"><div class="wcm-icons">${r.map(n=>{const i=ue.getWalletIcon(n);if(i)return Y`<img crossorigin="anonymous" src="${i}">`;const s=ue.getWalletIcon({id:n.id});return s?Y`<img crossorigin="anonymous" src="${s}">`:Be.WALLET_PLACEHOLDER})} ${[...Array(4-r.length)].map(()=>Be.WALLET_PLACEHOLDER)}</div><wcm-text variant="xsmall-regular">View All</wcm-text></button>`}};fl.styles=[De.globalCss,xE],fl=IE([Ne("wcm-view-all-wallets-button")],fl);const DE=Ue`.wcm-qr-container{width:100%;display:flex;justify-content:center;align-items:center;aspect-ratio:1/1}`;var OE=Object.defineProperty,$E=Object.getOwnPropertyDescriptor,Uo=(t,e,r,n)=>{for(var i=n>1?void 0:n?$E(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&OE(e,r,i),i};let Si=class extends _e{constructor(){super(),this.walletId="",this.imageId="",this.uri="",setTimeout(()=>{const{walletConnectUri:t}=it.state;this.uri=t},0)}get overlayEl(){return ue.getShadowRootElement(this,".wcm-qr-container")}render(){return Y`<div class="wcm-qr-container">${this.uri?Y`<wcm-qrcode size="${this.overlayEl.offsetWidth}" uri="${this.uri}" walletId="${qt(this.walletId)}" imageId="${qt(this.imageId)}"></wcm-qrcode>`:Y`<wcm-spinner></wcm-spinner>`}</div>`}};Si.styles=[De.globalCss,DE],Uo([me()],Si.prototype,"walletId",2),Uo([me()],Si.prototype,"imageId",2),Uo([Zt()],Si.prototype,"uri",2),Si=Uo([Ne("wcm-walletconnect-qr")],Si);var AE=Object.defineProperty,TE=Object.getOwnPropertyDescriptor,NE=(t,e,r,n)=>{for(var i=n>1?void 0:n?TE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&AE(e,r,i),i};let pl=class extends _e{viewTemplate(){return ie.isAndroid()?Y`<wcm-android-wallet-selection></wcm-android-wallet-selection>`:ie.isMobile()?Y`<wcm-mobile-wallet-selection></wcm-mobile-wallet-selection>`:Y`<wcm-desktop-wallet-selection></wcm-desktop-wallet-selection>`}render(){return Y`${this.viewTemplate()}<wcm-legal-notice></wcm-legal-notice>`}};pl.styles=[De.globalCss],pl=NE([Ne("wcm-connect-wallet-view")],pl);const PE=Ue`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var RE=Object.defineProperty,LE=Object.getOwnPropertyDescriptor,Xf=(t,e,r,n)=>{for(var i=n>1?void 0:n?LE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&RE(e,r,i),i};let Fo=class extends _e{constructor(){super(),this.isError=!1,this.openDesktopApp()}onFormatAndRedirect(t){const{desktop:e,name:r}=ie.getWalletRouterData(),n=e==null?void 0:e.native;if(n){const i=ie.formatNativeUrl(n,t,r);ie.openHref(i,"_self")}}openDesktopApp(){const{walletConnectUri:t}=it.state,e=ie.getWalletRouterData();ue.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=ie.getWalletRouterData(),{isMobile:n,isWeb:i}=ue.getCachedRouterWalletPlatforms();return Y`<wcm-modal-header title="${t}" .onAction="${ue.handleUriCopy}" .actionIcon="${Be.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${qt(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Connection can continue loading if ${t} is not installed on your device`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isWeb="${i}" .isRetry="${!0}"><wcm-button .onClick="${this.openDesktopApp.bind(this)}" .iconRight="${Be.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Fo.styles=[De.globalCss,PE],Xf([Zt()],Fo.prototype,"isError",2),Fo=Xf([Ne("wcm-desktop-connecting-view")],Fo);const ME=Ue`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}wcm-button{margin-top:15px}`;var kE=Object.defineProperty,UE=Object.getOwnPropertyDescriptor,FE=(t,e,r,n)=>{for(var i=n>1?void 0:n?UE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&kE(e,r,i),i};let gl=class extends _e{onInstall(t){t&&ie.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,homepage:n}=ie.getWalletRouterData();return Y`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${qt(r)}" label="Not Detected" .isStale="${!0}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Download ${t} to continue. If multiple browser extensions are installed, disable non ${t} ones and try again`}</wcm-text><wcm-button .onClick="${()=>this.onInstall(n)}" .iconLeft="${Be.ARROW_DOWN_ICON}">Download</wcm-button></wcm-info-footer>`}};gl.styles=[De.globalCss,ME],gl=FE([Ne("wcm-install-wallet-view")],gl);const jE=Ue`wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:96px;height:96px;margin-bottom:20px}wcm-info-footer{display:flex;width:100%}.wcm-app-store{justify-content:space-between}.wcm-app-store wcm-wallet-image{margin-right:10px;margin-bottom:0;width:28px;height:28px;border-radius:var(--wcm-wallet-icon-small-border-radius)}.wcm-app-store div{display:flex;align-items:center}.wcm-app-store wcm-button{margin-right:-10px}.wcm-note{flex-direction:column;align-items:center;padding:5px 0}.wcm-note wcm-text{text-align:center}wcm-platform-selection{margin-top:-15px}.wcm-note wcm-text{margin-top:15px}.wcm-note wcm-text span{color:var(--wcm-accent-color)}`;var BE=Object.defineProperty,zE=Object.getOwnPropertyDescriptor,e0=(t,e,r,n)=>{for(var i=n>1?void 0:n?zE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&BE(e,r,i),i};let jo=class extends _e{constructor(){super(),this.isError=!1,this.openMobileApp()}onFormatAndRedirect(t,e=!1){const{mobile:r,name:n}=ie.getWalletRouterData(),i=r==null?void 0:r.native,s=r==null?void 0:r.universal;if(i&&!e){const o=ie.formatNativeUrl(i,t,n);ie.openHref(o,"_self")}else if(s){const o=ie.formatUniversalUrl(s,t,n);ie.openHref(o,"_self")}}openMobileApp(t=!1){const{walletConnectUri:e}=it.state,r=ie.getWalletRouterData();ue.setRecentWallet(r),e&&this.onFormatAndRedirect(e,t)}onGoToAppStore(t){t&&ie.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,app:n,mobile:i}=ie.getWalletRouterData(),{isWeb:s}=ue.getCachedRouterWalletPlatforms(),o=n==null?void 0:n.ios,a=i==null?void 0:i.universal;return Y`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${qt(r)}" label="Tap 'Open' to continue…" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer class="wcm-note"><wcm-platform-selection .isWeb="${s}" .isRetry="${!0}"><wcm-button .onClick="${()=>this.openMobileApp(!1)}" .iconRight="${Be.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection>${a?Y`<wcm-text color="secondary" variant="small-thin">Still doesn't work? <span tabindex="0" @click="${()=>this.openMobileApp(!0)}">Try this alternate link</span></wcm-text>`:null}</wcm-info-footer><wcm-info-footer class="wcm-app-store"><div><wcm-wallet-image walletId="${e}" imageId="${qt(r)}"></wcm-wallet-image><wcm-text>${`Get ${t}`}</wcm-text></div><wcm-button .iconRight="${Be.ARROW_RIGHT_ICON}" .onClick="${()=>this.onGoToAppStore(o)}" variant="ghost">App Store</wcm-button></wcm-info-footer>`}};jo.styles=[De.globalCss,jE],e0([Zt()],jo.prototype,"isError",2),jo=e0([Ne("wcm-mobile-connecting-view")],jo);const qE=Ue`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var WE=Object.defineProperty,VE=Object.getOwnPropertyDescriptor,HE=(t,e,r,n)=>{for(var i=n>1?void 0:n?VE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&WE(e,r,i),i};let ml=class extends _e{render(){const{name:t,id:e,image_id:r}=ie.getWalletRouterData(),{isDesktop:n,isWeb:i}=ue.getCachedRouterWalletPlatforms();return Y`<wcm-modal-header title="${t}" .onAction="${ue.handleUriCopy}" .actionIcon="${Be.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr walletId="${e}" imageId="${qt(r)}"></wcm-walletconnect-qr></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Scan this QR Code with your phone's camera or inside ${t} app`}</wcm-text><wcm-platform-selection .isDesktop="${n}" .isWeb="${i}"></wcm-platform-selection></wcm-info-footer>`}};ml.styles=[De.globalCss,qE],ml=HE([Ne("wcm-mobile-qr-connecting-view")],ml);var KE=Object.defineProperty,ZE=Object.getOwnPropertyDescriptor,GE=(t,e,r,n)=>{for(var i=n>1?void 0:n?ZE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&KE(e,r,i),i};let yl=class extends _e{render(){return Y`<wcm-modal-header title="Scan the code" .onAction="${ue.handleUriCopy}" .actionIcon="${Be.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>`}};yl.styles=[De.globalCss],yl=GE([Ne("wcm-qrcode-view")],yl);const YE=Ue`wcm-modal-content{height:clamp(200px,60vh,600px);display:block;overflow:scroll;scrollbar-width:none;position:relative;margin-top:1px}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between;margin:-15px -10px;padding-top:20px}wcm-modal-content::after,wcm-modal-content::before{content:'';position:fixed;pointer-events:none;z-index:1;width:100%;height:20px;opacity:1}wcm-modal-content::before{box-shadow:0 -1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(var(--wcm-color-bg-1),rgba(255,255,255,0))}wcm-modal-content::after{box-shadow:0 1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(rgba(255,255,255,0),var(--wcm-color-bg-1));top:calc(100% - 20px)}wcm-modal-content::-webkit-scrollbar{display:none}.wcm-placeholder-block{display:flex;justify-content:center;align-items:center;height:100px;overflow:hidden}.wcm-empty,.wcm-loading{display:flex}.wcm-loading .wcm-placeholder-block{height:100%}.wcm-end-reached .wcm-placeholder-block{height:0;opacity:0}.wcm-empty .wcm-placeholder-block{opacity:1;height:100%}wcm-wallet-button{margin:calc((100% - 60px)/ 3) 0}`;var JE=Object.defineProperty,QE=Object.getOwnPropertyDescriptor,xs=(t,e,r,n)=>{for(var i=n>1?void 0:n?QE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&JE(e,r,i),i};const wl=40;let kn=class extends _e{constructor(){super(...arguments),this.loading=!Wt.state.wallets.listings.length,this.firstFetch=!Wt.state.wallets.listings.length,this.search="",this.endReached=!1,this.intersectionObserver=void 0,this.searchDebounce=ue.debounce(t=>{t.length>=1?(this.firstFetch=!0,this.endReached=!1,this.search=t,Wt.resetSearch(),this.fetchWallets()):this.search&&(this.search="",this.endReached=this.isLastPage(),Wt.resetSearch())})}firstUpdated(){this.createPaginationObserver()}disconnectedCallback(){var t;(t=this.intersectionObserver)==null||t.disconnect()}get placeholderEl(){return ue.getShadowRootElement(this,".wcm-placeholder-block")}createPaginationObserver(){this.intersectionObserver=new IntersectionObserver(([t])=>{t.isIntersecting&&!(this.search&&this.firstFetch)&&this.fetchWallets()}),this.intersectionObserver.observe(this.placeholderEl)}isLastPage(){const{wallets:t,search:e}=Wt.state,{listings:r,total:n}=this.search?e:t;return n<=wl||r.length>=n}async fetchWallets(){var t;const{wallets:e,search:r}=Wt.state,{listings:n,total:i,page:s}=this.search?r:e;if(!this.endReached&&(this.firstFetch||i>wl&&n.length<i))try{this.loading=!0;const o=(t=it.state.chains)==null?void 0:t.join(","),{listings:a}=await Wt.getWallets({page:this.firstFetch?1:s+1,entries:wl,search:this.search,version:2,chains:o}),c=a.map(l=>ue.getWalletIcon(l));await Promise.all([...c.map(async l=>ue.preloadImage(l)),ie.wait(300)]),this.endReached=this.isLastPage()}catch(o){console.error(o),Wr.openToast(ue.getErrorMessage(o),"error")}finally{this.loading=!1,this.firstFetch=!1}}onConnect(t){ie.isAndroid()?ue.handleMobileLinking(t):ue.goToConnectingView(t)}onSearchChange(t){const{value:e}=t.target;this.searchDebounce(e)}render(){const{wallets:t,search:e}=Wt.state,{listings:r}=this.search?e:t,n=this.loading&&!r.length,i=this.search.length>=3;let s=on.manualWalletsTemplate(),o=on.recomendedWalletsTemplate(!0);i&&(s=s.filter(({values:l})=>ue.caseSafeIncludes(l[0],this.search)),o=o.filter(({values:l})=>ue.caseSafeIncludes(l[0],this.search)));const a=!this.loading&&!r.length&&!o.length,c={"wcm-loading":n,"wcm-end-reached":this.endReached||!this.loading,"wcm-empty":a};return Y`<wcm-modal-header><wcm-search-input .onChange="${this.onSearchChange.bind(this)}"></wcm-search-input></wcm-modal-header><wcm-modal-content class="${Mr(c)}"><div class="wcm-grid">${n?null:s} ${n?null:o} ${n?null:r.map(l=>Y`${l?Y`<wcm-wallet-button imageId="${l.image_id}" name="${l.name}" walletId="${l.id}" .onClick="${()=>this.onConnect(l)}"></wcm-wallet-button>`:null}`)}</div><div class="wcm-placeholder-block">${a?Y`<wcm-text variant="big-bold" color="secondary">No results found</wcm-text>`:null} ${!a&&this.loading?Y`<wcm-spinner></wcm-spinner>`:null}</div></wcm-modal-content>`}};kn.styles=[De.globalCss,YE],xs([Zt()],kn.prototype,"loading",2),xs([Zt()],kn.prototype,"firstFetch",2),xs([Zt()],kn.prototype,"search",2),xs([Zt()],kn.prototype,"endReached",2),kn=xs([Ne("wcm-wallet-explorer-view")],kn);const XE=Ue`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var e4=Object.defineProperty,t4=Object.getOwnPropertyDescriptor,t0=(t,e,r,n)=>{for(var i=n>1?void 0:n?t4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&e4(e,r,i),i};let Bo=class extends _e{constructor(){super(),this.isError=!1,this.openWebWallet()}onFormatAndRedirect(t){const{desktop:e,name:r}=ie.getWalletRouterData(),n=e==null?void 0:e.universal;if(n){const i=ie.formatUniversalUrl(n,t,r);ie.openHref(i,"_blank")}}openWebWallet(){const{walletConnectUri:t}=it.state,e=ie.getWalletRouterData();ue.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=ie.getWalletRouterData(),{isMobile:n,isDesktop:i}=ue.getCachedRouterWalletPlatforms(),s=ie.isMobile();return Y`<wcm-modal-header title="${t}" .onAction="${ue.handleUriCopy}" .actionIcon="${Be.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${qt(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`${t} web app has opened in a new tab. Go there, accept the connection, and come back`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isDesktop="${s?!1:i}" .isRetry="${!0}"><wcm-button .onClick="${this.openWebWallet.bind(this)}" .iconRight="${Be.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Bo.styles=[De.globalCss,XE],t0([Zt()],Bo.prototype,"isError",2),Bo=t0([Ne("wcm-web-connecting-view")],Bo);const r4=Object.freeze(Object.defineProperty({__proto__:null,get WcmModal(){return xi},get WcmQrCode(){return Ur}},Symbol.toStringTag,{value:"Module"}));re.PAGE_SIZE=H3,re.aleoAddressRegex=fc,re.aleoFieldRegex=kd,re.aleoPrivateKeyRegex=Ld,re.aleoTransactionIdRegex=Md,re.aleoU32=Ud,re.aleoU64=Fd,re.aleoViewKeyRegex=Rd,re.configureConnection=O2,re.connect=N2,re.createSharedState=R2,re.decrypt=L2,re.disconnect=M2,re.emitter=cc,re.getAccount=A2,re.getBalance=T2,re.getEvent=k2,re.getEvents=U2,re.getRecords=j2,re.getWalletConnectModalSignClient=Xt,re.importSharedState=F2,re.log_sdk=zd,re.projectId=_d,re.requestCreateEvent=P2,re.requestSignature=V3,re.signClient_puzzleProps=D2,re.wc_aleo_chains=oo,re.wc_aleo_methods=oc,re.wc_events=ac,re.web3modal_puzzle_props=Ed,re.zodAddress=R3,re.zodEventStatus=z3,re.zodEventType=B3,re.zodField=U3,re.zodNetwork=q3,re.zodPrivateKey=M3,re.zodTransactionId=k3,re.zodU32=F3,re.zodU64=j3,re.zodViewKey=L3,re.zodVisibility=W3,Object.defineProperty(re,Symbol.toStringTag,{value:"Module"})});
