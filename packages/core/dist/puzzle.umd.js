(function(re,bi){typeof exports=="object"&&typeof module<"u"?bi(exports):typeof define=="function"&&define.amd?define(["exports"],bi):(re=typeof globalThis<"u"?globalThis:re||self,bi(re["@puzzlehq/sdk-core"]={}))})(this,function(re){"use strict";const bi=Symbol(),yl=Object.getPrototypeOf,Ko=new WeakMap,d0=t=>t&&(Ko.has(t)?Ko.get(t):yl(t)===Object.prototype||yl(t)===Array.prototype),f0=t=>d0(t)&&t[bi]||null,wl=(t,e=!0)=>{Ko.set(t,e)};var Cs={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Zo=t=>typeof t=="object"&&t!==null,jr=new WeakMap,Ds=new WeakSet,p0=(t=Object.is,e=(l,d)=>new Proxy(l,d),r=l=>Zo(l)&&!Ds.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),n=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},i=new WeakMap,s=(l,d,f=n)=>{const p=i.get(l);if((p==null?void 0:p[0])===d)return p[1];const y=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return wl(y,!0),i.set(l,[d,y]),Reflect.ownKeys(l).forEach(v=>{if(Object.getOwnPropertyDescriptor(y,v))return;const x=Reflect.get(l,v),O={value:x,enumerable:!0,configurable:!0};if(Ds.has(x))wl(x,!1);else if(x instanceof Promise)delete O.value,O.get=()=>f(x);else if(jr.has(x)){const[D,_]=jr.get(x);O.value=s(D,_(),f)}Object.defineProperty(y,v,O)}),Object.preventExtensions(y)},o=new WeakMap,a=[1,1],c=l=>{if(!Zo(l))throw new Error("object required");const d=o.get(l);if(d)return d;let f=a[0];const p=new Set,y=(A,N=++a[0])=>{f!==N&&(f=N,p.forEach(M=>M(A,N)))};let v=a[1];const x=(A=++a[1])=>(v!==A&&!p.size&&(v=A,D.forEach(([N])=>{const M=N[1](A);M>f&&(f=M)})),f),O=A=>(N,M)=>{const B=[...N];B[1]=[A,...B[1]],y(B,M)},D=new Map,_=(A,N)=>{if((Cs?"production":void 0)!=="production"&&D.has(A))throw new Error("prop listener already exists");if(p.size){const M=N[3](O(A));D.set(A,[N,M])}else D.set(A,[N])},S=A=>{var N;const M=D.get(A);M&&(D.delete(A),(N=M[1])==null||N.call(M))},w=A=>(p.add(A),p.size===1&&D.forEach(([M,B],q)=>{if((Cs?"production":void 0)!=="production"&&B)throw new Error("remove already exists");const I=M[3](O(q));D.set(q,[M,I])}),()=>{p.delete(A),p.size===0&&D.forEach(([M,B],q)=>{B&&(B(),D.set(q,[M]))})}),E=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),u=e(E,{deleteProperty(A,N){const M=Reflect.get(A,N);S(N);const B=Reflect.deleteProperty(A,N);return B&&y(["delete",[N],M]),B},set(A,N,M,B){const q=Reflect.has(A,N),I=Reflect.get(A,N,B);if(q&&(t(I,M)||o.has(M)&&t(I,o.get(M))))return!0;S(N),Zo(M)&&(M=f0(M)||M);let L=M;if(M instanceof Promise)M.then(Z=>{M.status="fulfilled",M.value=Z,y(["resolve",[N],Z])}).catch(Z=>{M.status="rejected",M.reason=Z,y(["reject",[N],Z])});else{!jr.has(M)&&r(M)&&(L=c(M));const Z=!Ds.has(L)&&jr.get(L);Z&&_(N,Z)}return Reflect.set(A,N,L,B),y(["set",[N],M,I]),!0}});o.set(l,u);const m=[E,x,s,w];return jr.set(u,m),Reflect.ownKeys(l).forEach(A=>{const N=Object.getOwnPropertyDescriptor(l,A);"value"in N&&(u[A]=l[A],delete N.value,delete N.writable),Object.defineProperty(E,A,N)}),u})=>[c,jr,Ds,t,e,r,n,i,s,o,a],[g0]=p0();function Br(t={}){return g0(t)}function un(t,e,r){const n=jr.get(t);(Cs?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");let i;const s=[],o=n[3];let a=!1;const l=o(d=>{if(s.push(d),r){e(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,l()}}function m0(t,e){const r=jr.get(t);(Cs?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");const[n,i,s]=r;return s(n,i(),e)}const ft=Br({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),Ge={state:ft,subscribe(t){return un(ft,()=>t(ft))},push(t,e){t!==ft.view&&(ft.view=t,e&&(ft.data=e),ft.history.push(t))},reset(t){ft.view=t,ft.history=[t]},replace(t){ft.history.length>1&&(ft.history[ft.history.length-1]=t,ft.view=t)},goBack(){if(ft.history.length>1){ft.history.pop();const[t]=ft.history.slice(-1);ft.view=t}},setData(t){ft.data=t}},ie={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return ie.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const t=navigator.userAgent.toLowerCase();return ie.isMobile()&&(t.includes("iphone")||t.includes("ipad"))},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},isArray(t){return Array.isArray(t)&&t.length>0},formatNativeUrl(t,e,r){if(ie.isHttpUrl(t))return this.formatUniversalUrl(t,e,r);let n=t;n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},formatUniversalUrl(t,e,r){if(!ie.isHttpUrl(t))return this.formatNativeUrl(t,e,r);let n=t;n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},async wait(t){return new Promise(e=>{setTimeout(e,t)})},openHref(t,e){window.open(t,e,"noreferrer noopener")},setWalletConnectDeepLink(t,e){try{localStorage.setItem(ie.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(t){try{const[e]=t.split("?");localStorage.setItem(ie.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(ie.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(ie.WCM_VERSION,"2.6.2")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var t;const e=(t=Ge.state.data)==null?void 0:t.Wallet;if(!e)throw new Error('Missing "Wallet" view data');return e}},y0=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),At=Br({enabled:y0,userSessionId:"",events:[],connectedWalletId:void 0}),vl={state:At,subscribe(t){return un(At.events,()=>t(m0(At.events[At.events.length-1])))},initialize(){At.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(At.userSessionId=crypto.randomUUID())},setConnectedWalletId(t){At.connectedWalletId=t},click(t){if(At.enabled){const e={type:"CLICK",name:t.name,userSessionId:At.userSessionId,timestamp:Date.now(),data:t};At.events.push(e)}},track(t){if(At.enabled){const e={type:"TRACK",name:t.name,userSessionId:At.userSessionId,timestamp:Date.now(),data:t};At.events.push(e)}},view(t){if(At.enabled){const e={type:"VIEW",name:t.name,userSessionId:At.userSessionId,timestamp:Date.now(),data:t};At.events.push(e)}}},mr=Br({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),nt={state:mr,subscribe(t){return un(mr,()=>t(mr))},setChains(t){mr.chains=t},setWalletConnectUri(t){mr.walletConnectUri=t},setIsCustomDesktop(t){mr.isCustomDesktop=t},setIsCustomMobile(t){mr.isCustomMobile=t},setIsDataLoaded(t){mr.isDataLoaded=t},setIsUiLoaded(t){mr.isUiLoaded=t},setIsAuth(t){mr.isAuth=t}},Is=Br({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),Gt={state:Is,subscribe(t){return un(Is,()=>t(Is))},setConfig(t){var e,r;vl.initialize(),nt.setChains(t.chains),nt.setIsAuth(!!t.enableAuthMode),nt.setIsCustomMobile(!!((e=t.mobileWallets)!=null&&e.length)),nt.setIsCustomDesktop(!!((r=t.desktopWallets)!=null&&r.length)),ie.setModalVersionInStorage(),Object.assign(Is,t)}};var w0=Object.defineProperty,bl=Object.getOwnPropertySymbols,v0=Object.prototype.hasOwnProperty,b0=Object.prototype.propertyIsEnumerable,_l=(t,e,r)=>e in t?w0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_0=(t,e)=>{for(var r in e||(e={}))v0.call(e,r)&&_l(t,r,e[r]);if(bl)for(var r of bl(e))b0.call(e,r)&&_l(t,r,e[r]);return t};const Go="https://explorer-api.walletconnect.com",Yo="wcm",Jo="js-2.6.2";async function Os(t,e){const r=_0({sdkType:Yo,sdkVersion:Jo},e),n=new URL(t,Go);return n.searchParams.append("projectId",Gt.state.projectId),Object.entries(r).forEach(([i,s])=>{s&&n.searchParams.append(i,String(s))}),(await fetch(n)).json()}const hn={async getDesktopListings(t){return Os("/w3m/v1/getDesktopListings",t)},async getMobileListings(t){return Os("/w3m/v1/getMobileListings",t)},async getInjectedListings(t){return Os("/w3m/v1/getInjectedListings",t)},async getAllListings(t){return Os("/w3m/v1/getAllListings",t)},getWalletImageUrl(t){return`${Go}/w3m/v1/getWalletImage/${t}?projectId=${Gt.state.projectId}&sdkType=${Yo}&sdkVersion=${Jo}`},getAssetImageUrl(t){return`${Go}/w3m/v1/getAssetImage/${t}?projectId=${Gt.state.projectId}&sdkType=${Yo}&sdkVersion=${Jo}`}};var E0=Object.defineProperty,El=Object.getOwnPropertySymbols,x0=Object.prototype.hasOwnProperty,S0=Object.prototype.propertyIsEnumerable,xl=(t,e,r)=>e in t?E0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,C0=(t,e)=>{for(var r in e||(e={}))x0.call(e,r)&&xl(t,r,e[r]);if(El)for(var r of El(e))S0.call(e,r)&&xl(t,r,e[r]);return t};const Sl=ie.isMobile(),yr=Br({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),qt={state:yr,async getRecomendedWallets(){const{explorerRecommendedWalletIds:t,explorerExcludedWalletIds:e}=Gt.state;if(t==="NONE"||e==="ALL"&&!t)return yr.recomendedWallets;if(ie.isArray(t)){const r={recommendedIds:t.join(",")},{listings:n}=await hn.getAllListings(r),i=Object.values(n);i.sort((s,o)=>{const a=t.indexOf(s.id),c=t.indexOf(o.id);return a-c}),yr.recomendedWallets=i}else{const{chains:r,isAuth:n}=nt.state,i=r==null?void 0:r.join(","),s=ie.isArray(e),o={page:1,sdks:n?"auth_v1":void 0,entries:ie.RECOMMENDED_WALLET_AMOUNT,chains:i,version:2,excludedIds:s?e.join(","):void 0},{listings:a}=Sl?await hn.getMobileListings(o):await hn.getDesktopListings(o);yr.recomendedWallets=Object.values(a)}return yr.recomendedWallets},async getWallets(t){const e=C0({},t),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:n}=Gt.state,{recomendedWallets:i}=yr;if(n==="ALL")return yr.wallets;i.length?e.excludedIds=i.map(f=>f.id).join(","):ie.isArray(r)&&(e.excludedIds=r.join(",")),ie.isArray(n)&&(e.excludedIds=[e.excludedIds,n].filter(Boolean).join(",")),nt.state.isAuth&&(e.sdks="auth_v1");const{page:s,search:o}=t,{listings:a,total:c}=Sl?await hn.getMobileListings(e):await hn.getDesktopListings(e),l=Object.values(a),d=o?"search":"wallets";return yr[d]={listings:[...yr[d].listings,...l],total:c,page:s??1},{listings:l,total:c}},getWalletImageUrl(t){return hn.getWalletImageUrl(t)},getAssetImageUrl(t){return hn.getAssetImageUrl(t)},resetSearch(){yr.search={listings:[],total:0,page:1}}},Bn=Br({open:!1}),dn={state:Bn,subscribe(t){return un(Bn,()=>t(Bn))},async open(t){return new Promise(e=>{const{isUiLoaded:r,isDataLoaded:n}=nt.state;if(ie.removeWalletConnectDeepLink(),nt.setWalletConnectUri(t==null?void 0:t.uri),nt.setChains(t==null?void 0:t.chains),Ge.reset("ConnectWallet"),r&&n)Bn.open=!0,e();else{const i=setInterval(()=>{const s=nt.state;s.isUiLoaded&&s.isDataLoaded&&(clearInterval(i),Bn.open=!0,e())},200)}})},close(){Bn.open=!1}};var D0=Object.defineProperty,Cl=Object.getOwnPropertySymbols,I0=Object.prototype.hasOwnProperty,O0=Object.prototype.propertyIsEnumerable,Dl=(t,e,r)=>e in t?D0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,A0=(t,e)=>{for(var r in e||(e={}))I0.call(e,r)&&Dl(t,r,e[r]);if(Cl)for(var r of Cl(e))O0.call(e,r)&&Dl(t,r,e[r]);return t};function $0(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const _i=Br({themeMode:$0()?"dark":"light"}),zr={state:_i,subscribe(t){return un(_i,()=>t(_i))},setThemeConfig(t){const{themeMode:e,themeVariables:r}=t;e&&(_i.themeMode=e),r&&(_i.themeVariables=A0({},r))}},fn=Br({open:!1,message:"",variant:"success"}),qr={state:fn,subscribe(t){return un(fn,()=>t(fn))},openToast(t,e){fn.open=!0,fn.message=t,fn.variant=e},closeToast(){fn.open=!1}};let T0=class{constructor(e){this.openModal=dn.open,this.closeModal=dn.close,this.subscribeModal=dn.subscribe,this.setTheme=zr.setThemeConfig,zr.setThemeConfig(e),Gt.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.resolve().then(()=>WE);const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),nt.setIsUiLoaded(!0)}}};var wr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Xo(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var ea={exports:{}},zn=typeof Reflect=="object"?Reflect:null,Il=zn&&typeof zn.apply=="function"?zn.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},As;zn&&typeof zn.ownKeys=="function"?As=zn.ownKeys:Object.getOwnPropertySymbols?As=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:As=function(e){return Object.getOwnPropertyNames(e)};function N0(t){console&&console.warn&&console.warn(t)}var Ol=Number.isNaN||function(e){return e!==e};function We(){We.init.call(this)}ea.exports=We,ea.exports.once=M0,We.EventEmitter=We,We.prototype._events=void 0,We.prototype._eventsCount=0,We.prototype._maxListeners=void 0;var Al=10;function $s(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(We,"defaultMaxListeners",{enumerable:!0,get:function(){return Al},set:function(t){if(typeof t!="number"||t<0||Ol(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Al=t}}),We.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},We.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Ol(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function $l(t){return t._maxListeners===void 0?We.defaultMaxListeners:t._maxListeners}We.prototype.getMaxListeners=function(){return $l(this)},We.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")Il(c,this,r);else for(var l=c.length,d=Ll(c,l),n=0;n<l;++n)Il(d[n],this,r);return!0};function Tl(t,e,r,n){var i,s,o;if($s(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=$l(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,N0(a)}return t}We.prototype.addListener=function(e,r){return Tl(this,e,r,!1)},We.prototype.on=We.prototype.addListener,We.prototype.prependListener=function(e,r){return Tl(this,e,r,!0)};function R0(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Nl(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=R0.bind(n);return i.listener=r,n.wrapFn=i,i}We.prototype.once=function(e,r){return $s(r),this.on(e,Nl(this,e,r)),this},We.prototype.prependOnceListener=function(e,r){return $s(r),this.prependListener(e,Nl(this,e,r)),this},We.prototype.removeListener=function(e,r){var n,i,s,o,a;if($s(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():P0(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this},We.prototype.off=We.prototype.removeListener,We.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Rl(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?L0(i):Ll(i,i.length)}We.prototype.listeners=function(e){return Rl(this,e,!0)},We.prototype.rawListeners=function(e){return Rl(this,e,!1)},We.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Pl.call(t,e)},We.prototype.listenerCount=Pl;function Pl(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}We.prototype.eventNames=function(){return this._eventsCount>0?As(this._events):[]};function Ll(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function P0(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function L0(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function M0(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Ml(t,e,s,{once:!0}),e!=="error"&&U0(t,i,{once:!0})})}function U0(t,e,r){typeof t.on=="function"&&Ml(t,"error",e,r)}function Ml(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var or=ea.exports;const ta=Qo(or),k0=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,F0=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,j0=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function B0(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){z0(t);return}return e}function z0(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Ts(t,e={}){if(typeof t!="string")return t;const r=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return r.slice(1,-1);if(r.length<=9){const n=r.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!j0.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(k0.test(t)||F0.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,B0)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function q0(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function pt(t,...e){try{return q0(t(...e))}catch(r){return Promise.reject(r)}}function W0(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function V0(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Ns(t){if(W0(t))return String(t);if(V0(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Ns(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function Ul(){if(typeof Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const ra="base64:";function H0(t){if(typeof t=="string")return t;Ul();const e=Buffer.from(t).toString("base64");return ra+e}function K0(t){return typeof t!="string"||!t.startsWith(ra)?t:(Ul(),Buffer.from(t.slice(ra.length),"base64"))}function Wt(t){return t?t.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function Z0(...t){return Wt(t.join(":"))}function Rs(t){return t=Wt(t),t?t+":":""}function N4(t){return t}const G0="memory",Y0=()=>{const t=new Map;return{name:G0,options:{},hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return Array.from(t.keys())},clear(){t.clear()},dispose(){t.clear()}}};function J0(t={}){const e={mounts:{"":t.driver||Y0()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=l=>{for(const d of e.mountpoints)if(l.startsWith(d))return{base:d,relativeKey:l.slice(d.length),driver:e.mounts[d]};return{base:"",relativeKey:l,driver:e.mounts[""]}},n=(l,d)=>e.mountpoints.filter(f=>f.startsWith(l)||d&&l.startsWith(f)).map(f=>({relativeBase:l.length>f.length?l.slice(f.length):void 0,mountpoint:f,driver:e.mounts[f]})),i=(l,d)=>{if(e.watching){d=Wt(d);for(const f of e.watchListeners)f(l,d)}},s=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await kl(e.mounts[l],i,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,d,f)=>{const p=new Map,y=v=>{let x=p.get(v.base);return x||(x={driver:v.driver,base:v.base,items:[]},p.set(v.base,x)),x};for(const v of l){const x=typeof v=="string",O=Wt(x?v:v.key),D=x?void 0:v.value,_=x||!v.options?d:{...d,...v.options},S=r(O);y(S).items.push({key:O,value:D,relativeKey:S.relativeKey,options:_})}return Promise.all([...p.values()].map(v=>f(v))).then(v=>v.flat())},c={hasItem(l,d={}){l=Wt(l);const{relativeKey:f,driver:p}=r(l);return pt(p.hasItem,f,d)},getItem(l,d={}){l=Wt(l);const{relativeKey:f,driver:p}=r(l);return pt(p.getItem,f,d).then(y=>Ts(y))},getItems(l,d){return a(l,d,f=>f.driver.getItems?pt(f.driver.getItems,f.items.map(p=>({key:p.relativeKey,options:p.options})),d).then(p=>p.map(y=>({key:Z0(f.base,y.key),value:Ts(y.value)}))):Promise.all(f.items.map(p=>pt(f.driver.getItem,p.relativeKey,p.options).then(y=>({key:p.key,value:Ts(y)})))))},getItemRaw(l,d={}){l=Wt(l);const{relativeKey:f,driver:p}=r(l);return p.getItemRaw?pt(p.getItemRaw,f,d):pt(p.getItem,f,d).then(y=>K0(y))},async setItem(l,d,f={}){if(d===void 0)return c.removeItem(l);l=Wt(l);const{relativeKey:p,driver:y}=r(l);y.setItem&&(await pt(y.setItem,p,Ns(d),f),y.watch||i("update",l))},async setItems(l,d){await a(l,d,async f=>{f.driver.setItems&&await pt(f.driver.setItems,f.items.map(p=>({key:p.relativeKey,value:Ns(p.value),options:p.options})),d),f.driver.setItem&&await Promise.all(f.items.map(p=>pt(f.driver.setItem,p.relativeKey,Ns(p.value),p.options)))})},async setItemRaw(l,d,f={}){if(d===void 0)return c.removeItem(l,f);l=Wt(l);const{relativeKey:p,driver:y}=r(l);if(y.setItemRaw)await pt(y.setItemRaw,p,d,f);else if(y.setItem)await pt(y.setItem,p,H0(d),f);else return;y.watch||i("update",l)},async removeItem(l,d={}){typeof d=="boolean"&&(d={removeMeta:d}),l=Wt(l);const{relativeKey:f,driver:p}=r(l);p.removeItem&&(await pt(p.removeItem,f,d),(d.removeMeta||d.removeMata)&&await pt(p.removeItem,f+"$",d),p.watch||i("remove",l))},async getMeta(l,d={}){typeof d=="boolean"&&(d={nativeOnly:d}),l=Wt(l);const{relativeKey:f,driver:p}=r(l),y=Object.create(null);if(p.getMeta&&Object.assign(y,await pt(p.getMeta,f,d)),!d.nativeOnly){const v=await pt(p.getItem,f+"$",d).then(x=>Ts(x));v&&typeof v=="object"&&(typeof v.atime=="string"&&(v.atime=new Date(v.atime)),typeof v.mtime=="string"&&(v.mtime=new Date(v.mtime)),Object.assign(y,v))}return y},setMeta(l,d,f={}){return this.setItem(l+"$",d,f)},removeMeta(l,d={}){return this.removeItem(l+"$",d)},async getKeys(l,d={}){l=Rs(l);const f=n(l,!0);let p=[];const y=[];for(const v of f){const O=(await pt(v.driver.getKeys,v.relativeBase,d)).map(D=>v.mountpoint+Wt(D)).filter(D=>!p.some(_=>D.startsWith(_)));y.push(...O),p=[v.mountpoint,...p.filter(D=>!D.startsWith(v.mountpoint))]}return l?y.filter(v=>v.startsWith(l)&&!v.endsWith("$")):y.filter(v=>!v.endsWith("$"))},async clear(l,d={}){l=Rs(l),await Promise.all(n(l,!1).map(async f=>{if(f.driver.clear)return pt(f.driver.clear,f.relativeBase,d);if(f.driver.removeItem){const p=await f.driver.getKeys(f.relativeBase||"",d);return Promise.all(p.map(y=>f.driver.removeItem(y,d)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>Fl(l)))},async watch(l){return await s(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(d=>d!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,d){if(l=Rs(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((f,p)=>p.length-f.length)),e.mounts[l]=d,e.watching&&Promise.resolve(kl(d,i,l)).then(f=>{e.unwatch[l]=f}).catch(console.error),c},async unmount(l,d=!0){l=Rs(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&(e.unwatch[l](),delete e.unwatch[l]),d&&await Fl(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Wt(l)+":";const d=r(l);return{driver:d.driver,base:d.base}},getMounts(l="",d={}){return l=Wt(l),n(l,d.parents).map(p=>({driver:p.driver,base:p.mountpoint}))}};return c}function kl(t,e,r){return t.watch?t.watch((n,i)=>e(n,r+i)):()=>{}}async function Fl(t){typeof t.dispose=="function"&&await pt(t.dispose)}function pn(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function jl(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const n=pn(r);return(i,s)=>n.then(o=>s(o.transaction(e,i).objectStore(e)))}let na;function Ei(){return na||(na=jl("keyval-store","keyval")),na}function Bl(t,e=Ei()){return e("readonly",r=>pn(r.get(t)))}function Q0(t,e,r=Ei()){return r("readwrite",n=>(n.put(e,t),pn(n.transaction)))}function X0(t,e=Ei()){return e("readwrite",r=>(r.delete(t),pn(r.transaction)))}function ep(t=Ei()){return t("readwrite",e=>(e.clear(),pn(e.transaction)))}function tp(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},pn(t.transaction)}function rp(t=Ei()){return t("readonly",e=>{if(e.getAllKeys)return pn(e.getAllKeys());const r=[];return tp(e,n=>r.push(n.key)).then(()=>r)})}const np=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),ip=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Ps(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return ip(t)}catch{return t}}function xi(t){return typeof t=="string"?t:np(t)||""}const sp="idb-keyval";var op=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=i=>e+i;let n;return t.dbName&&t.storeName&&(n=jl(t.dbName,t.storeName)),{name:sp,options:t,async hasItem(i){return!(typeof await Bl(r(i),n)>"u")},async getItem(i){return await Bl(r(i),n)??null},setItem(i,s){return Q0(r(i),s,n)},removeItem(i){return X0(r(i),n)},getKeys(){return rp(n)},clear(){return ep(n)}}};const ap="WALLET_CONNECT_V2_INDEXED_DB",cp="keyvaluestorage";let lp=class{constructor(){this.indexedDb=J0({driver:op({dbName:ap,storeName:cp})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,xi(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var ia=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ls={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof ia<"u"&&ia.localStorage?Ls.exports=ia.localStorage:typeof window<"u"&&window.localStorage?Ls.exports=window.localStorage:Ls.exports=new e})();function up(t){var e;return[t[0],Ps((e=t[1])!=null?e:"")]}let hp=class{constructor(){this.localStorage=Ls.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(up)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return Ps(r)}async setItem(e,r){this.localStorage.setItem(e,xi(r))}async removeItem(e){this.localStorage.removeItem(e)}};const dp="wc_storage_version",zl=1,fp=async(t,e,r)=>{const n=dp,i=await e.getItem(n);if(i&&i>=zl){r(e);return}const s=await t.getKeys();if(!s.length){r(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(n,zl),r(e),pp(t,o)},pp=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let gp=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new hp;this.storage=e;try{const r=new lp;fp(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};var qn={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var sa=function(t,e){return sa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},sa(t,e)};function mp(t,e){sa(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var oa=function(){return oa=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},oa.apply(this,arguments)};function yp(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function wp(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function vp(t,e){return function(r,n){e(r,n,t)}}function bp(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function _p(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(d){try{l(n.next(d))}catch(f){o(f)}}function c(d){try{l(n.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}function Ep(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(d){return c([l,d])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function xp(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Sp(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function aa(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ql(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function Cp(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ql(arguments[e]));return t}function Dp(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function Si(t){return this instanceof Si?(this.v=t,this):new Si(t)}function Ip(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(p){n[p]&&(i[p]=function(y){return new Promise(function(v,x){s.push([p,y,v,x])>1||a(p,y)})})}function a(p,y){try{c(n[p](y))}catch(v){f(s[0][3],v)}}function c(p){p.value instanceof Si?Promise.resolve(p.value.v).then(l,d):f(s[0][2],p)}function l(p){a("next",p)}function d(p){a("throw",p)}function f(p,y){p(y),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Op(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:Si(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function Ap(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof aa=="function"?aa(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function $p(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Tp(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Np(t){return t&&t.__esModule?t:{default:t}}function Rp(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Pp(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const vr=Xo(Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return oa},__asyncDelegator:Op,__asyncGenerator:Ip,__asyncValues:Ap,__await:Si,__awaiter:_p,__classPrivateFieldGet:Rp,__classPrivateFieldSet:Pp,__createBinding:xp,__decorate:wp,__exportStar:Sp,__extends:mp,__generator:Ep,__importDefault:Np,__importStar:Tp,__makeTemplateObject:$p,__metadata:bp,__param:vp,__read:ql,__rest:yp,__spread:Cp,__spreadArrays:Dp,__values:aa},Symbol.toStringTag,{value:"Module"})));var Ci={},ne={},ca={},Di={},Wl;function Lp(){if(Wl)return Di;Wl=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Di.delay=t,Di}var gn={},la={},mn={},Vl;function Mp(){return Vl||(Vl=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.ONE_THOUSAND=mn.ONE_HUNDRED=void 0,mn.ONE_HUNDRED=100,mn.ONE_THOUSAND=1e3),mn}var ua={},Hl;function Up(){return Hl||(Hl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(ua)),ua}var Kl;function Zl(){return Kl||(Kl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=vr;e.__exportStar(Mp(),t),e.__exportStar(Up(),t)}(la)),la}var Gl;function kp(){if(Gl)return gn;Gl=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.fromMiliseconds=gn.toMiliseconds=void 0;const t=Zl();function e(n){return n*t.ONE_THOUSAND}gn.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return gn.fromMiliseconds=r,gn}var Yl;function Fp(){return Yl||(Yl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=vr;e.__exportStar(Lp(),t),e.__exportStar(kp(),t)}(ca)),ca}var Wn={},Jl;function jp(){if(Jl)return Wn;Jl=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Wn.Watch=t,Wn.default=t,Wn}var ha={},Ii={},Ql;function Bp(){if(Ql)return Ii;Ql=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.IWatch=void 0;class t{}return Ii.IWatch=t,Ii}var Xl;function zp(){return Xl||(Xl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),vr.__exportStar(Bp(),t)}(ha)),ha}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=vr;e.__exportStar(Fp(),t),e.__exportStar(jp(),t),e.__exportStar(zp(),t),e.__exportStar(Zl(),t)})(ne);var da={},Oi={};let yn=class{};const qp=Xo(Object.freeze(Object.defineProperty({__proto__:null,IEvents:yn},Symbol.toStringTag,{value:"Module"})));var eu;function Wp(){if(eu)return Oi;eu=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.IHeartBeat=void 0;const t=qp;class e extends t.IEvents{constructor(n){super()}}return Oi.IHeartBeat=e,Oi}var tu;function ru(){return tu||(tu=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),vr.__exportStar(Wp(),t)}(da)),da}var fa={},wn={},nu;function Vp(){if(nu)return wn;nu=1,Object.defineProperty(wn,"__esModule",{value:!0}),wn.HEARTBEAT_EVENTS=wn.HEARTBEAT_INTERVAL=void 0;const t=ne;return wn.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,wn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},wn}var iu;function su(){return iu||(iu=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),vr.__exportStar(Vp(),t)}(fa)),fa}var ou;function Hp(){if(ou)return Ci;ou=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.HeartBeat=void 0;const t=vr,e=or,r=ne,n=ru(),i=su();class s extends n.IHeartBeat{constructor(a){super(a),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=(a==null?void 0:a.interval)||i.HEARTBEAT_INTERVAL}static init(a){return t.__awaiter(this,void 0,void 0,function*(){const c=new s(a);return yield c.init(),c})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(a,c){this.events.on(a,c)}once(a,c){this.events.once(a,c)}off(a,c){this.events.off(a,c)}removeListener(a,c){this.events.removeListener(a,c)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return Ci.HeartBeat=s,Ci}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=vr;e.__exportStar(Hp(),t),e.__exportStar(ru(),t),e.__exportStar(su(),t)})(qn);var Re={},pa,au;function Kp(){if(au)return pa;au=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}pa=e;function e(r,n,i){var s=i&&i.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var c=new Array(a);c[0]=s(r);for(var l=1;l<a;l++)c[l]=s(n[l]);return c.join(" ")}if(typeof r!="string")return r;var d=n.length;if(d===0)return r;for(var f="",p=1-o,y=-1,v=r&&r.length||0,x=0;x<v;){if(r.charCodeAt(x)===37&&x+1<v){switch(y=y>-1?y:0,r.charCodeAt(x+1)){case 100:case 102:if(p>=d||n[p]==null)break;y<x&&(f+=r.slice(y,x)),f+=Number(n[p]),y=x+2,x++;break;case 105:if(p>=d||n[p]==null)break;y<x&&(f+=r.slice(y,x)),f+=Math.floor(Number(n[p])),y=x+2,x++;break;case 79:case 111:case 106:if(p>=d||n[p]===void 0)break;y<x&&(f+=r.slice(y,x));var O=typeof n[p];if(O==="string"){f+="'"+n[p]+"'",y=x+2,x++;break}if(O==="function"){f+=n[p].name||"<anonymous>",y=x+2,x++;break}f+=s(n[p]),y=x+2,x++;break;case 115:if(p>=d)break;y<x&&(f+=r.slice(y,x)),f+=String(n[p]),y=x+2,x++;break;case 37:y<x&&(f+=r.slice(y,x)),f+="%",y=x+2,x++,p--;break}++p}++x}return y===-1?r:(y<v&&(f+=r.slice(y)),f)}return pa}var ga,cu;function Zp(){if(cu)return ga;cu=1;const t=Kp();ga=i;const e=E().console||{},r={mapHttpRequest:v,mapHttpResponse:v,wrapRequestSerializer:x,wrapResponseSerializer:x,wrapErrorSerializer:x,req:v,res:v,err:p};function n(g,u){return Array.isArray(g)?g.filter(function(A){return A!=="!stdSerializers.err"}):g===!0?Object.keys(u):!1}function i(g){g=g||{},g.browser=g.browser||{};const u=g.browser.transmit;if(u&&typeof u.send!="function")throw Error("pino: transmit option must have a send function");const m=g.browser.write||e;g.browser.write&&(g.browser.asObject=!0);const A=g.serializers||{},N=n(g.browser.serialize,A);let M=g.browser.serialize;Array.isArray(g.browser.serialize)&&g.browser.serialize.indexOf("!stdSerializers.err")>-1&&(M=!1);const B=["error","fatal","warn","info","debug","trace"];typeof m=="function"&&(m.error=m.fatal=m.warn=m.info=m.debug=m.trace=m),g.enabled===!1&&(g.level="silent");const q=g.level||"info",I=Object.create(m);I.log||(I.log=O),Object.defineProperty(I,"levelVal",{get:Z}),Object.defineProperty(I,"level",{get:z,set:k});const L={transmit:u,serialize:N,asObject:g.browser.asObject,levels:B,timestamp:y(g)};I.levels=i.levels,I.level=q,I.setMaxListeners=I.getMaxListeners=I.emit=I.addListener=I.on=I.prependListener=I.once=I.prependOnceListener=I.removeListener=I.removeAllListeners=I.listeners=I.listenerCount=I.eventNames=I.write=I.flush=O,I.serializers=A,I._serialize=N,I._stdErrSerialize=M,I.child=j,u&&(I._logEvent=f());function Z(){return this.level==="silent"?1/0:this.levels.values[this.level]}function z(){return this._level}function k(U){if(U!=="silent"&&!this.levels.values[U])throw Error("unknown level "+U);this._level=U,s(L,I,"error","log"),s(L,I,"fatal","error"),s(L,I,"warn","error"),s(L,I,"info","log"),s(L,I,"debug","log"),s(L,I,"trace","log")}function j(U,W){if(!U)throw new Error("missing bindings for child Pino");W=W||{},N&&U.serializers&&(W.serializers=U.serializers);const he=W.serializers;if(N&&he){var H=Object.assign({},A,he),ae=g.browser.serialize===!0?Object.keys(H):N;delete U.serializers,c([U],ae,H,this._stdErrSerialize)}function ee(ce){this._childLevel=(ce._childLevel|0)+1,this.error=l(ce,U,"error"),this.fatal=l(ce,U,"fatal"),this.warn=l(ce,U,"warn"),this.info=l(ce,U,"info"),this.debug=l(ce,U,"debug"),this.trace=l(ce,U,"trace"),H&&(this.serializers=H,this._serialize=ae),u&&(this._logEvent=f([].concat(ce._logEvent.bindings,U)))}return ee.prototype=this,new ee(this)}return I}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=r,i.stdTimeFunctions=Object.assign({},{nullTime:D,epochTime:_,unixTime:S,isoTime:w});function s(g,u,m,A){const N=Object.getPrototypeOf(u);u[m]=u.levelVal>u.levels.values[m]?O:N[m]?N[m]:e[m]||e[A]||O,o(g,u,m)}function o(g,u,m){!g.transmit&&u[m]===O||(u[m]=function(A){return function(){const M=g.timestamp(),B=new Array(arguments.length),q=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var I=0;I<B.length;I++)B[I]=arguments[I];if(g.serialize&&!g.asObject&&c(B,this._serialize,this.serializers,this._stdErrSerialize),g.asObject?A.call(q,a(this,m,B,M)):A.apply(q,B),g.transmit){const L=g.transmit.level||u.level,Z=i.levels.values[L],z=i.levels.values[m];if(z<Z)return;d(this,{ts:M,methodLevel:m,methodValue:z,transmitLevel:L,transmitValue:i.levels.values[g.transmit.level||u.level],send:g.transmit.send,val:u.levelVal},B)}}}(u[m]))}function a(g,u,m,A){g._serialize&&c(m,g._serialize,g.serializers,g._stdErrSerialize);const N=m.slice();let M=N[0];const B={};A&&(B.time=A),B.level=i.levels.values[u];let q=(g._childLevel|0)+1;if(q<1&&(q=1),M!==null&&typeof M=="object"){for(;q--&&typeof N[0]=="object";)Object.assign(B,N.shift());M=N.length?t(N.shift(),N):void 0}else typeof M=="string"&&(M=t(N.shift(),N));return M!==void 0&&(B.msg=M),B}function c(g,u,m,A){for(const N in g)if(A&&g[N]instanceof Error)g[N]=i.stdSerializers.err(g[N]);else if(typeof g[N]=="object"&&!Array.isArray(g[N]))for(const M in g[N])u&&u.indexOf(M)>-1&&M in m&&(g[N][M]=m[M](g[N][M]))}function l(g,u,m){return function(){const A=new Array(1+arguments.length);A[0]=u;for(var N=1;N<A.length;N++)A[N]=arguments[N-1];return g[m].apply(this,A)}}function d(g,u,m){const A=u.send,N=u.ts,M=u.methodLevel,B=u.methodValue,q=u.val,I=g._logEvent.bindings;c(m,g._serialize||Object.keys(g.serializers),g.serializers,g._stdErrSerialize===void 0?!0:g._stdErrSerialize),g._logEvent.ts=N,g._logEvent.messages=m.filter(function(L){return I.indexOf(L)===-1}),g._logEvent.level.label=M,g._logEvent.level.value=B,A(M,g._logEvent,q),g._logEvent=f(I)}function f(g){return{ts:0,messages:[],bindings:g||[],level:{label:"",value:0}}}function p(g){const u={type:g.constructor.name,msg:g.message,stack:g.stack};for(const m in g)u[m]===void 0&&(u[m]=g[m]);return u}function y(g){return typeof g.timestamp=="function"?g.timestamp:g.timestamp===!1?D:_}function v(){return{}}function x(g){return g}function O(){}function D(){return!1}function _(){return Date.now()}function S(){return Math.round(Date.now()/1e3)}function w(){return new Date(Date.now()).toISOString()}function E(){function g(u){return typeof u<"u"&&u}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return g(self)||g(window)||g(this)||{}}}return ga}var vn={},lu;function uu(){return lu||(lu=1,Object.defineProperty(vn,"__esModule",{value:!0}),vn.PINO_CUSTOM_CONTEXT_KEY=vn.PINO_LOGGER_DEFAULTS=void 0,vn.PINO_LOGGER_DEFAULTS={level:"info"},vn.PINO_CUSTOM_CONTEXT_KEY="custom_context"),vn}var Mt={},hu;function Gp(){if(hu)return Mt;hu=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.generateChildLogger=Mt.formatChildLoggerContext=Mt.getLoggerContext=Mt.setBrowserLoggerContext=Mt.getBrowserLoggerContext=Mt.getDefaultLoggerOptions=void 0;const t=uu();function e(a){return Object.assign(Object.assign({},a),{level:(a==null?void 0:a.level)||t.PINO_LOGGER_DEFAULTS.level})}Mt.getDefaultLoggerOptions=e;function r(a,c=t.PINO_CUSTOM_CONTEXT_KEY){return a[c]||""}Mt.getBrowserLoggerContext=r;function n(a,c,l=t.PINO_CUSTOM_CONTEXT_KEY){return a[l]=c,a}Mt.setBrowserLoggerContext=n;function i(a,c=t.PINO_CUSTOM_CONTEXT_KEY){let l="";return typeof a.bindings>"u"?l=r(a,c):l=a.bindings().context||"",l}Mt.getLoggerContext=i;function s(a,c,l=t.PINO_CUSTOM_CONTEXT_KEY){const d=i(a,l);return d.trim()?`${d}/${c}`:c}Mt.formatChildLoggerContext=s;function o(a,c,l=t.PINO_CUSTOM_CONTEXT_KEY){const d=s(a,c,l),f=a.child({context:d});return n(f,d,l)}return Mt.generateChildLogger=o,Mt}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=vr,r=e.__importDefault(Zp());Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(uu(),t),e.__exportStar(Gp(),t)})(Re);let Yp=class extends yn{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},Jp=class extends yn{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},Qp=class{constructor(e,r){this.logger=e,this.core=r}},Xp=class extends yn{constructor(e,r){super(),this.relayer=e,this.logger=r}},eg=class extends yn{constructor(e){super()}},tg=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},rg=class extends yn{constructor(e,r){super(),this.relayer=e,this.logger=r}},ng=class extends yn{constructor(e,r){super(),this.core=e,this.logger=r}},ig=class{constructor(e,r){this.projectId=e,this.logger=r}},sg=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},og=class{constructor(e){this.client=e}};var ma={},Vn={},Ms={},Us={};Object.defineProperty(Us,"__esModule",{value:!0}),Us.BrowserRandomSource=void 0;const du=65536;class ag{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=du)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,du)));return r}}Us.BrowserRandomSource=ag;function cg(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ks={},Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});function lg(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Yt.wipe=lg;const ug=Xo(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(ks,"__esModule",{value:!0}),ks.NodeRandomSource=void 0;const hg=Yt;class dg{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof cg<"u"){const e=ug;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,hg.wipe)(r),n}}ks.NodeRandomSource=dg,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.SystemRandomSource=void 0;const fg=Us,pg=ks;class gg{constructor(){if(this.isAvailable=!1,this.name="",this._source=new fg.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new pg.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Ms.SystemRandomSource=gg;var fe={},fu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,c){var l=a>>>16&65535,d=a&65535,f=c>>>16&65535,p=c&65535;return d*p+(l*p+d*f<<16>>>0)|0}t.mul=Math.imul||e;function r(a,c){return a+c|0}t.add=r;function n(a,c){return a-c|0}t.sub=n;function i(a,c){return a<<c|a>>>32-c}t.rotl=i;function s(a,c){return a<<32-c|a>>>c}t.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||o,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(fu),Object.defineProperty(fe,"__esModule",{value:!0});var pu=fu;function mg(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}fe.readInt16BE=mg;function yg(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}fe.readUint16BE=yg;function wg(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}fe.readInt16LE=wg;function vg(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}fe.readUint16LE=vg;function gu(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}fe.writeUint16BE=gu,fe.writeInt16BE=gu;function mu(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}fe.writeUint16LE=mu,fe.writeInt16LE=mu;function ya(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}fe.readInt32BE=ya;function wa(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}fe.readUint32BE=wa;function va(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}fe.readInt32LE=va;function ba(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}fe.readUint32LE=ba;function Fs(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}fe.writeUint32BE=Fs,fe.writeInt32BE=Fs;function js(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}fe.writeUint32LE=js,fe.writeInt32LE=js;function bg(t,e){e===void 0&&(e=0);var r=ya(t,e),n=ya(t,e+4);return r*4294967296+n-(n>>31)*4294967296}fe.readInt64BE=bg;function _g(t,e){e===void 0&&(e=0);var r=wa(t,e),n=wa(t,e+4);return r*4294967296+n}fe.readUint64BE=_g;function Eg(t,e){e===void 0&&(e=0);var r=va(t,e),n=va(t,e+4);return n*4294967296+r-(r>>31)*4294967296}fe.readInt64LE=Eg;function xg(t,e){e===void 0&&(e=0);var r=ba(t,e),n=ba(t,e+4);return n*4294967296+r}fe.readUint64LE=xg;function yu(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Fs(t/4294967296>>>0,e,r),Fs(t>>>0,e,r+4),e}fe.writeUint64BE=yu,fe.writeInt64BE=yu;function wu(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),js(t>>>0,e,r),js(t/4294967296>>>0,e,r+4),e}fe.writeUint64LE=wu,fe.writeInt64LE=wu;function Sg(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}fe.readUintBE=Sg;function Cg(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}fe.readUintLE=Cg;function Dg(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!pu.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}fe.writeUintBE=Dg;function Ig(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!pu.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}fe.writeUintLE=Ig;function Og(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}fe.readFloat32BE=Og;function Ag(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}fe.readFloat32LE=Ag;function $g(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}fe.readFloat64BE=$g;function Tg(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}fe.readFloat64LE=Tg;function Ng(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}fe.writeFloat32BE=Ng;function Rg(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}fe.writeFloat32LE=Rg;function Pg(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}fe.writeFloat64BE=Pg;function Lg(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}fe.writeFloat64LE=Lg,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=Ms,r=fe,n=Yt;t.defaultRandomSource=new e.SystemRandomSource;function i(l,d=t.defaultRandomSource){return d.randomBytes(l)}t.randomBytes=i;function s(l=t.defaultRandomSource){const d=i(4,l),f=(0,r.readUint32LE)(d);return(0,n.wipe)(d),f}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(l,d=o,f=t.defaultRandomSource){if(d.length<2)throw new Error("randomString charset is too short");if(d.length>256)throw new Error("randomString charset is too long");let p="";const y=d.length,v=256-256%y;for(;l>0;){const x=i(Math.ceil(l*256/v),f);for(let O=0;O<x.length&&l>0;O++){const D=x[O];D<v&&(p+=d.charAt(D%y),l--)}(0,n.wipe)(x)}return p}t.randomString=a;function c(l,d=o,f=t.defaultRandomSource){const p=Math.ceil(l/(Math.log(d.length)/Math.LN2));return a(p,d,f)}t.randomStringForEntropy=c}(Vn);var vu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=fe,r=Yt;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(c,l){if(l===void 0&&(l=c.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var d=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&l>0;)this._buffer[this._bufferLength++]=c[d++],l--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(d=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,c,d,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=c[d++],l--;return this},a.prototype.finish=function(c){if(!this._finished){var l=this._bytesHashed,d=this._bufferLength,f=l/536870912|0,p=l<<3,y=l%128<112?128:256;this._buffer[d]=128;for(var v=d+1;v<y-8;v++)this._buffer[v]=0;e.writeUint32BE(f,this._buffer,y-8),e.writeUint32BE(p,this._buffer,y-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,y),this._finished=!0}for(var v=0;v<this.digestLength/8;v++)e.writeUint32BE(this._stateHi[v],c,v*8),e.writeUint32BE(this._stateLo[v],c,v*8+4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._stateHi.set(c.stateHi),this._stateLo.set(c.stateLo),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.stateHi),r.wipe(c.stateLo),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,c,l,d,f,p,y){for(var v=l[0],x=l[1],O=l[2],D=l[3],_=l[4],S=l[5],w=l[6],E=l[7],g=d[0],u=d[1],m=d[2],A=d[3],N=d[4],M=d[5],B=d[6],q=d[7],I,L,Z,z,k,j,U,W;y>=128;){for(var he=0;he<16;he++){var H=8*he+p;a[he]=e.readUint32BE(f,H),c[he]=e.readUint32BE(f,H+4)}for(var he=0;he<80;he++){var ae=v,ee=x,ce=O,P=D,R=_,$=S,h=w,C=E,K=g,Q=u,Ce=m,Pe=A,Oe=N,Fe=M,it=B,Xe=q;if(I=E,L=q,k=L&65535,j=L>>>16,U=I&65535,W=I>>>16,I=(_>>>14|N<<18)^(_>>>18|N<<14)^(N>>>9|_<<23),L=(N>>>14|_<<18)^(N>>>18|_<<14)^(_>>>9|N<<23),k+=L&65535,j+=L>>>16,U+=I&65535,W+=I>>>16,I=_&S^~_&w,L=N&M^~N&B,k+=L&65535,j+=L>>>16,U+=I&65535,W+=I>>>16,I=i[he*2],L=i[he*2+1],k+=L&65535,j+=L>>>16,U+=I&65535,W+=I>>>16,I=a[he%16],L=c[he%16],k+=L&65535,j+=L>>>16,U+=I&65535,W+=I>>>16,j+=k>>>16,U+=j>>>16,W+=U>>>16,Z=U&65535|W<<16,z=k&65535|j<<16,I=Z,L=z,k=L&65535,j=L>>>16,U=I&65535,W=I>>>16,I=(v>>>28|g<<4)^(g>>>2|v<<30)^(g>>>7|v<<25),L=(g>>>28|v<<4)^(v>>>2|g<<30)^(v>>>7|g<<25),k+=L&65535,j+=L>>>16,U+=I&65535,W+=I>>>16,I=v&x^v&O^x&O,L=g&u^g&m^u&m,k+=L&65535,j+=L>>>16,U+=I&65535,W+=I>>>16,j+=k>>>16,U+=j>>>16,W+=U>>>16,C=U&65535|W<<16,Xe=k&65535|j<<16,I=P,L=Pe,k=L&65535,j=L>>>16,U=I&65535,W=I>>>16,I=Z,L=z,k+=L&65535,j+=L>>>16,U+=I&65535,W+=I>>>16,j+=k>>>16,U+=j>>>16,W+=U>>>16,P=U&65535|W<<16,Pe=k&65535|j<<16,x=ae,O=ee,D=ce,_=P,S=R,w=$,E=h,v=C,u=K,m=Q,A=Ce,N=Pe,M=Oe,B=Fe,q=it,g=Xe,he%16===15)for(var H=0;H<16;H++)I=a[H],L=c[H],k=L&65535,j=L>>>16,U=I&65535,W=I>>>16,I=a[(H+9)%16],L=c[(H+9)%16],k+=L&65535,j+=L>>>16,U+=I&65535,W+=I>>>16,Z=a[(H+1)%16],z=c[(H+1)%16],I=(Z>>>1|z<<31)^(Z>>>8|z<<24)^Z>>>7,L=(z>>>1|Z<<31)^(z>>>8|Z<<24)^(z>>>7|Z<<25),k+=L&65535,j+=L>>>16,U+=I&65535,W+=I>>>16,Z=a[(H+14)%16],z=c[(H+14)%16],I=(Z>>>19|z<<13)^(z>>>29|Z<<3)^Z>>>6,L=(z>>>19|Z<<13)^(Z>>>29|z<<3)^(z>>>6|Z<<26),k+=L&65535,j+=L>>>16,U+=I&65535,W+=I>>>16,j+=k>>>16,U+=j>>>16,W+=U>>>16,a[H]=U&65535|W<<16,c[H]=k&65535|j<<16}I=v,L=g,k=L&65535,j=L>>>16,U=I&65535,W=I>>>16,I=l[0],L=d[0],k+=L&65535,j+=L>>>16,U+=I&65535,W+=I>>>16,j+=k>>>16,U+=j>>>16,W+=U>>>16,l[0]=v=U&65535|W<<16,d[0]=g=k&65535|j<<16,I=x,L=u,k=L&65535,j=L>>>16,U=I&65535,W=I>>>16,I=l[1],L=d[1],k+=L&65535,j+=L>>>16,U+=I&65535,W+=I>>>16,j+=k>>>16,U+=j>>>16,W+=U>>>16,l[1]=x=U&65535|W<<16,d[1]=u=k&65535|j<<16,I=O,L=m,k=L&65535,j=L>>>16,U=I&65535,W=I>>>16,I=l[2],L=d[2],k+=L&65535,j+=L>>>16,U+=I&65535,W+=I>>>16,j+=k>>>16,U+=j>>>16,W+=U>>>16,l[2]=O=U&65535|W<<16,d[2]=m=k&65535|j<<16,I=D,L=A,k=L&65535,j=L>>>16,U=I&65535,W=I>>>16,I=l[3],L=d[3],k+=L&65535,j+=L>>>16,U+=I&65535,W+=I>>>16,j+=k>>>16,U+=j>>>16,W+=U>>>16,l[3]=D=U&65535|W<<16,d[3]=A=k&65535|j<<16,I=_,L=N,k=L&65535,j=L>>>16,U=I&65535,W=I>>>16,I=l[4],L=d[4],k+=L&65535,j+=L>>>16,U+=I&65535,W+=I>>>16,j+=k>>>16,U+=j>>>16,W+=U>>>16,l[4]=_=U&65535|W<<16,d[4]=N=k&65535|j<<16,I=S,L=M,k=L&65535,j=L>>>16,U=I&65535,W=I>>>16,I=l[5],L=d[5],k+=L&65535,j+=L>>>16,U+=I&65535,W+=I>>>16,j+=k>>>16,U+=j>>>16,W+=U>>>16,l[5]=S=U&65535|W<<16,d[5]=M=k&65535|j<<16,I=w,L=B,k=L&65535,j=L>>>16,U=I&65535,W=I>>>16,I=l[6],L=d[6],k+=L&65535,j+=L>>>16,U+=I&65535,W+=I>>>16,j+=k>>>16,U+=j>>>16,W+=U>>>16,l[6]=w=U&65535|W<<16,d[6]=B=k&65535|j<<16,I=E,L=q,k=L&65535,j=L>>>16,U=I&65535,W=I>>>16,I=l[7],L=d[7],k+=L&65535,j+=L>>>16,U+=I&65535,W+=I>>>16,j+=k>>>16,U+=j>>>16,W+=U>>>16,l[7]=E=U&65535|W<<16,d[7]=q=k&65535|j<<16,p+=128,y-=128}return p}function o(a){var c=new n;c.update(a);var l=c.digest();return c.clean(),l}t.hash=o})(vu),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=Vn,r=vu,n=Yt;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(P){const R=new Float64Array(16);if(P)for(let $=0;$<P.length;$++)R[$]=P[$];return R}const s=new Uint8Array(32);s[0]=9;const o=i(),a=i([1]),c=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function y(P,R){for(let $=0;$<16;$++)P[$]=R[$]|0}function v(P){let R=1;for(let $=0;$<16;$++){let h=P[$]+R+65535;R=Math.floor(h/65536),P[$]=h-R*65536}P[0]+=R-1+37*(R-1)}function x(P,R,$){const h=~($-1);for(let C=0;C<16;C++){const K=h&(P[C]^R[C]);P[C]^=K,R[C]^=K}}function O(P,R){const $=i(),h=i();for(let C=0;C<16;C++)h[C]=R[C];v(h),v(h),v(h);for(let C=0;C<2;C++){$[0]=h[0]-65517;for(let Q=1;Q<15;Q++)$[Q]=h[Q]-65535-($[Q-1]>>16&1),$[Q-1]&=65535;$[15]=h[15]-32767-($[14]>>16&1);const K=$[15]>>16&1;$[14]&=65535,x(h,$,1-K)}for(let C=0;C<16;C++)P[2*C]=h[C]&255,P[2*C+1]=h[C]>>8}function D(P,R){let $=0;for(let h=0;h<32;h++)$|=P[h]^R[h];return(1&$-1>>>8)-1}function _(P,R){const $=new Uint8Array(32),h=new Uint8Array(32);return O($,P),O(h,R),D($,h)}function S(P){const R=new Uint8Array(32);return O(R,P),R[0]&1}function w(P,R){for(let $=0;$<16;$++)P[$]=R[2*$]+(R[2*$+1]<<8);P[15]&=32767}function E(P,R,$){for(let h=0;h<16;h++)P[h]=R[h]+$[h]}function g(P,R,$){for(let h=0;h<16;h++)P[h]=R[h]-$[h]}function u(P,R,$){let h,C,K=0,Q=0,Ce=0,Pe=0,Oe=0,Fe=0,it=0,Xe=0,Ne=0,Ae=0,De=0,xe=0,Ee=0,be=0,we=0,de=0,Se=0,$e=0,pe=0,Le=0,Ue=0,ze=0,qe=0,je=0,pr=0,Ir=0,on=0,er=0,Un=0,Es=0,jo=0,ot=$[0],et=$[1],at=$[2],ct=$[3],lt=$[4],tt=$[5],wt=$[6],vt=$[7],bt=$[8],_t=$[9],Et=$[10],dt=$[11],ut=$[12],Ze=$[13],xt=$[14],St=$[15];h=R[0],K+=h*ot,Q+=h*et,Ce+=h*at,Pe+=h*ct,Oe+=h*lt,Fe+=h*tt,it+=h*wt,Xe+=h*vt,Ne+=h*bt,Ae+=h*_t,De+=h*Et,xe+=h*dt,Ee+=h*ut,be+=h*Ze,we+=h*xt,de+=h*St,h=R[1],Q+=h*ot,Ce+=h*et,Pe+=h*at,Oe+=h*ct,Fe+=h*lt,it+=h*tt,Xe+=h*wt,Ne+=h*vt,Ae+=h*bt,De+=h*_t,xe+=h*Et,Ee+=h*dt,be+=h*ut,we+=h*Ze,de+=h*xt,Se+=h*St,h=R[2],Ce+=h*ot,Pe+=h*et,Oe+=h*at,Fe+=h*ct,it+=h*lt,Xe+=h*tt,Ne+=h*wt,Ae+=h*vt,De+=h*bt,xe+=h*_t,Ee+=h*Et,be+=h*dt,we+=h*ut,de+=h*Ze,Se+=h*xt,$e+=h*St,h=R[3],Pe+=h*ot,Oe+=h*et,Fe+=h*at,it+=h*ct,Xe+=h*lt,Ne+=h*tt,Ae+=h*wt,De+=h*vt,xe+=h*bt,Ee+=h*_t,be+=h*Et,we+=h*dt,de+=h*ut,Se+=h*Ze,$e+=h*xt,pe+=h*St,h=R[4],Oe+=h*ot,Fe+=h*et,it+=h*at,Xe+=h*ct,Ne+=h*lt,Ae+=h*tt,De+=h*wt,xe+=h*vt,Ee+=h*bt,be+=h*_t,we+=h*Et,de+=h*dt,Se+=h*ut,$e+=h*Ze,pe+=h*xt,Le+=h*St,h=R[5],Fe+=h*ot,it+=h*et,Xe+=h*at,Ne+=h*ct,Ae+=h*lt,De+=h*tt,xe+=h*wt,Ee+=h*vt,be+=h*bt,we+=h*_t,de+=h*Et,Se+=h*dt,$e+=h*ut,pe+=h*Ze,Le+=h*xt,Ue+=h*St,h=R[6],it+=h*ot,Xe+=h*et,Ne+=h*at,Ae+=h*ct,De+=h*lt,xe+=h*tt,Ee+=h*wt,be+=h*vt,we+=h*bt,de+=h*_t,Se+=h*Et,$e+=h*dt,pe+=h*ut,Le+=h*Ze,Ue+=h*xt,ze+=h*St,h=R[7],Xe+=h*ot,Ne+=h*et,Ae+=h*at,De+=h*ct,xe+=h*lt,Ee+=h*tt,be+=h*wt,we+=h*vt,de+=h*bt,Se+=h*_t,$e+=h*Et,pe+=h*dt,Le+=h*ut,Ue+=h*Ze,ze+=h*xt,qe+=h*St,h=R[8],Ne+=h*ot,Ae+=h*et,De+=h*at,xe+=h*ct,Ee+=h*lt,be+=h*tt,we+=h*wt,de+=h*vt,Se+=h*bt,$e+=h*_t,pe+=h*Et,Le+=h*dt,Ue+=h*ut,ze+=h*Ze,qe+=h*xt,je+=h*St,h=R[9],Ae+=h*ot,De+=h*et,xe+=h*at,Ee+=h*ct,be+=h*lt,we+=h*tt,de+=h*wt,Se+=h*vt,$e+=h*bt,pe+=h*_t,Le+=h*Et,Ue+=h*dt,ze+=h*ut,qe+=h*Ze,je+=h*xt,pr+=h*St,h=R[10],De+=h*ot,xe+=h*et,Ee+=h*at,be+=h*ct,we+=h*lt,de+=h*tt,Se+=h*wt,$e+=h*vt,pe+=h*bt,Le+=h*_t,Ue+=h*Et,ze+=h*dt,qe+=h*ut,je+=h*Ze,pr+=h*xt,Ir+=h*St,h=R[11],xe+=h*ot,Ee+=h*et,be+=h*at,we+=h*ct,de+=h*lt,Se+=h*tt,$e+=h*wt,pe+=h*vt,Le+=h*bt,Ue+=h*_t,ze+=h*Et,qe+=h*dt,je+=h*ut,pr+=h*Ze,Ir+=h*xt,on+=h*St,h=R[12],Ee+=h*ot,be+=h*et,we+=h*at,de+=h*ct,Se+=h*lt,$e+=h*tt,pe+=h*wt,Le+=h*vt,Ue+=h*bt,ze+=h*_t,qe+=h*Et,je+=h*dt,pr+=h*ut,Ir+=h*Ze,on+=h*xt,er+=h*St,h=R[13],be+=h*ot,we+=h*et,de+=h*at,Se+=h*ct,$e+=h*lt,pe+=h*tt,Le+=h*wt,Ue+=h*vt,ze+=h*bt,qe+=h*_t,je+=h*Et,pr+=h*dt,Ir+=h*ut,on+=h*Ze,er+=h*xt,Un+=h*St,h=R[14],we+=h*ot,de+=h*et,Se+=h*at,$e+=h*ct,pe+=h*lt,Le+=h*tt,Ue+=h*wt,ze+=h*vt,qe+=h*bt,je+=h*_t,pr+=h*Et,Ir+=h*dt,on+=h*ut,er+=h*Ze,Un+=h*xt,Es+=h*St,h=R[15],de+=h*ot,Se+=h*et,$e+=h*at,pe+=h*ct,Le+=h*lt,Ue+=h*tt,ze+=h*wt,qe+=h*vt,je+=h*bt,pr+=h*_t,Ir+=h*Et,on+=h*dt,er+=h*ut,Un+=h*Ze,Es+=h*xt,jo+=h*St,K+=38*Se,Q+=38*$e,Ce+=38*pe,Pe+=38*Le,Oe+=38*Ue,Fe+=38*ze,it+=38*qe,Xe+=38*je,Ne+=38*pr,Ae+=38*Ir,De+=38*on,xe+=38*er,Ee+=38*Un,be+=38*Es,we+=38*jo,C=1,h=K+C+65535,C=Math.floor(h/65536),K=h-C*65536,h=Q+C+65535,C=Math.floor(h/65536),Q=h-C*65536,h=Ce+C+65535,C=Math.floor(h/65536),Ce=h-C*65536,h=Pe+C+65535,C=Math.floor(h/65536),Pe=h-C*65536,h=Oe+C+65535,C=Math.floor(h/65536),Oe=h-C*65536,h=Fe+C+65535,C=Math.floor(h/65536),Fe=h-C*65536,h=it+C+65535,C=Math.floor(h/65536),it=h-C*65536,h=Xe+C+65535,C=Math.floor(h/65536),Xe=h-C*65536,h=Ne+C+65535,C=Math.floor(h/65536),Ne=h-C*65536,h=Ae+C+65535,C=Math.floor(h/65536),Ae=h-C*65536,h=De+C+65535,C=Math.floor(h/65536),De=h-C*65536,h=xe+C+65535,C=Math.floor(h/65536),xe=h-C*65536,h=Ee+C+65535,C=Math.floor(h/65536),Ee=h-C*65536,h=be+C+65535,C=Math.floor(h/65536),be=h-C*65536,h=we+C+65535,C=Math.floor(h/65536),we=h-C*65536,h=de+C+65535,C=Math.floor(h/65536),de=h-C*65536,K+=C-1+37*(C-1),C=1,h=K+C+65535,C=Math.floor(h/65536),K=h-C*65536,h=Q+C+65535,C=Math.floor(h/65536),Q=h-C*65536,h=Ce+C+65535,C=Math.floor(h/65536),Ce=h-C*65536,h=Pe+C+65535,C=Math.floor(h/65536),Pe=h-C*65536,h=Oe+C+65535,C=Math.floor(h/65536),Oe=h-C*65536,h=Fe+C+65535,C=Math.floor(h/65536),Fe=h-C*65536,h=it+C+65535,C=Math.floor(h/65536),it=h-C*65536,h=Xe+C+65535,C=Math.floor(h/65536),Xe=h-C*65536,h=Ne+C+65535,C=Math.floor(h/65536),Ne=h-C*65536,h=Ae+C+65535,C=Math.floor(h/65536),Ae=h-C*65536,h=De+C+65535,C=Math.floor(h/65536),De=h-C*65536,h=xe+C+65535,C=Math.floor(h/65536),xe=h-C*65536,h=Ee+C+65535,C=Math.floor(h/65536),Ee=h-C*65536,h=be+C+65535,C=Math.floor(h/65536),be=h-C*65536,h=we+C+65535,C=Math.floor(h/65536),we=h-C*65536,h=de+C+65535,C=Math.floor(h/65536),de=h-C*65536,K+=C-1+37*(C-1),P[0]=K,P[1]=Q,P[2]=Ce,P[3]=Pe,P[4]=Oe,P[5]=Fe,P[6]=it,P[7]=Xe,P[8]=Ne,P[9]=Ae,P[10]=De,P[11]=xe,P[12]=Ee,P[13]=be,P[14]=we,P[15]=de}function m(P,R){u(P,R,R)}function A(P,R){const $=i();let h;for(h=0;h<16;h++)$[h]=R[h];for(h=253;h>=0;h--)m($,$),h!==2&&h!==4&&u($,$,R);for(h=0;h<16;h++)P[h]=$[h]}function N(P,R){const $=i();let h;for(h=0;h<16;h++)$[h]=R[h];for(h=250;h>=0;h--)m($,$),h!==1&&u($,$,R);for(h=0;h<16;h++)P[h]=$[h]}function M(P,R){const $=i(),h=i(),C=i(),K=i(),Q=i(),Ce=i(),Pe=i(),Oe=i(),Fe=i();g($,P[1],P[0]),g(Fe,R[1],R[0]),u($,$,Fe),E(h,P[0],P[1]),E(Fe,R[0],R[1]),u(h,h,Fe),u(C,P[3],R[3]),u(C,C,l),u(K,P[2],R[2]),E(K,K,K),g(Q,h,$),g(Ce,K,C),E(Pe,K,C),E(Oe,h,$),u(P[0],Q,Ce),u(P[1],Oe,Pe),u(P[2],Pe,Ce),u(P[3],Q,Oe)}function B(P,R,$){for(let h=0;h<4;h++)x(P[h],R[h],$)}function q(P,R){const $=i(),h=i(),C=i();A(C,R[2]),u($,R[0],C),u(h,R[1],C),O(P,h),P[31]^=S($)<<7}function I(P,R,$){y(P[0],o),y(P[1],a),y(P[2],a),y(P[3],o);for(let h=255;h>=0;--h){const C=$[h/8|0]>>(h&7)&1;B(P,R,C),M(R,P),M(P,P),B(P,R,C)}}function L(P,R){const $=[i(),i(),i(),i()];y($[0],d),y($[1],f),y($[2],a),u($[3],d,f),I(P,$,R)}function Z(P){if(P.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const R=(0,r.hash)(P);R[0]&=248,R[31]&=127,R[31]|=64;const $=new Uint8Array(32),h=[i(),i(),i(),i()];L(h,R),q($,h);const C=new Uint8Array(64);return C.set(P),C.set($,32),{publicKey:$,secretKey:C}}t.generateKeyPairFromSeed=Z;function z(P){const R=(0,e.randomBytes)(32,P),$=Z(R);return(0,n.wipe)(R),$}t.generateKeyPair=z;function k(P){if(P.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(P.subarray(32))}t.extractPublicKeyFromSecretKey=k;const j=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function U(P,R){let $,h,C,K;for(h=63;h>=32;--h){for($=0,C=h-32,K=h-12;C<K;++C)R[C]+=$-16*R[h]*j[C-(h-32)],$=Math.floor((R[C]+128)/256),R[C]-=$*256;R[C]+=$,R[h]=0}for($=0,C=0;C<32;C++)R[C]+=$-(R[31]>>4)*j[C],$=R[C]>>8,R[C]&=255;for(C=0;C<32;C++)R[C]-=$*j[C];for(h=0;h<32;h++)R[h+1]+=R[h]>>8,P[h]=R[h]&255}function W(P){const R=new Float64Array(64);for(let $=0;$<64;$++)R[$]=P[$];for(let $=0;$<64;$++)P[$]=0;U(P,R)}function he(P,R){const $=new Float64Array(64),h=[i(),i(),i(),i()],C=(0,r.hash)(P.subarray(0,32));C[0]&=248,C[31]&=127,C[31]|=64;const K=new Uint8Array(64);K.set(C.subarray(32),32);const Q=new r.SHA512;Q.update(K.subarray(32)),Q.update(R);const Ce=Q.digest();Q.clean(),W(Ce),L(h,Ce),q(K,h),Q.reset(),Q.update(K.subarray(0,32)),Q.update(P.subarray(32)),Q.update(R);const Pe=Q.digest();W(Pe);for(let Oe=0;Oe<32;Oe++)$[Oe]=Ce[Oe];for(let Oe=0;Oe<32;Oe++)for(let Fe=0;Fe<32;Fe++)$[Oe+Fe]+=Pe[Oe]*C[Fe];return U(K.subarray(32),$),K}t.sign=he;function H(P,R){const $=i(),h=i(),C=i(),K=i(),Q=i(),Ce=i(),Pe=i();return y(P[2],a),w(P[1],R),m(C,P[1]),u(K,C,c),g(C,C,P[2]),E(K,P[2],K),m(Q,K),m(Ce,Q),u(Pe,Ce,Q),u($,Pe,C),u($,$,K),N($,$),u($,$,C),u($,$,K),u($,$,K),u(P[0],$,K),m(h,P[0]),u(h,h,K),_(h,C)&&u(P[0],P[0],p),m(h,P[0]),u(h,h,K),_(h,C)?-1:(S(P[0])===R[31]>>7&&g(P[0],o,P[0]),u(P[3],P[0],P[1]),0)}function ae(P,R,$){const h=new Uint8Array(32),C=[i(),i(),i(),i()],K=[i(),i(),i(),i()];if($.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(H(K,P))return!1;const Q=new r.SHA512;Q.update($.subarray(0,32)),Q.update(P),Q.update(R);const Ce=Q.digest();return W(Ce),I(C,K,Ce),L(K,$.subarray(32)),M(C,K),q(h,C),!D($,h)}t.verify=ae;function ee(P){let R=[i(),i(),i(),i()];if(H(R,P))throw new Error("Ed25519: invalid public key");let $=i(),h=i(),C=R[1];E($,a,C),g(h,a,C),A(h,h),u($,$,h);let K=new Uint8Array(32);return O(K,$),K}t.convertPublicKeyToX25519=ee;function ce(P){const R=(0,r.hash)(P.subarray(0,32));R[0]&=248,R[31]&=127,R[31]|=64;const $=new Uint8Array(R.subarray(0,32));return(0,n.wipe)(R),$}t.convertSecretKeyToX25519=ce}(ma);const Mg="EdDSA",Ug="JWT",bu=".",_u="base64url",kg="utf8",Fg="utf8",jg=":",Bg="did",zg="key",Eu="base58btc",qg="z",Wg="K36",Vg=32;function _a(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function xu(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?_a(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Ea(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=xu(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return _a(r)}function Hg(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function f(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var x=0,O=0,D=0,_=v.length;D!==_&&v[D]===0;)D++,x++;for(var S=(_-D)*d+1>>>0,w=new Uint8Array(S);D!==_;){for(var E=v[D],g=0,u=S-1;(E!==0||g<O)&&u!==-1;u--,g++)E+=256*w[u]>>>0,w[u]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");O=g,D++}for(var m=S-O;m!==S&&w[m]===0;)m++;for(var A=c.repeat(x);m<S;++m)A+=t.charAt(w[m]);return A}function p(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var x=0;if(v[x]!==" "){for(var O=0,D=0;v[x]===c;)O++,x++;for(var _=(v.length-x)*l+1>>>0,S=new Uint8Array(_);v[x];){var w=r[v.charCodeAt(x)];if(w===255)return;for(var E=0,g=_-1;(w!==0||E<D)&&g!==-1;g--,E++)w+=a*S[g]>>>0,S[g]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");D=E,x++}if(v[x]!==" "){for(var u=_-D;u!==_&&S[u]===0;)u++;for(var m=new Uint8Array(O+(_-u)),A=O;u!==_;)m[A++]=S[u++];return m}}}function y(v){var x=p(v);if(x)return x;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:p,decode:y}}var Kg=Hg,Zg=Kg;const Gg=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Yg=t=>new TextEncoder().encode(t),Jg=t=>new TextDecoder().decode(t);class Qg{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Xg{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Su(this,e)}}class e1{constructor(e){this.decoders=e}or(e){return Su(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Su=(t,e)=>new e1({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class t1{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Qg(e,r,n),this.decoder=new Xg(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Bs=({name:t,prefix:e,encode:r,decode:n})=>new t1(t,e,r,n),Ai=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Zg(r,e);return Bs({prefix:t,name:e,encode:n,decode:s=>Gg(i(s))})},r1=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let d=0;d<s;++d){const f=i[t[d]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},n1=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Dt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Bs({prefix:e,name:t,encode(i){return n1(i,n,r)},decode(i){return r1(i,n,r,t)}}),i1=Bs({prefix:"\0",name:"identity",encode:t=>Jg(t),decode:t=>Yg(t)}),s1=Object.freeze(Object.defineProperty({__proto__:null,identity:i1},Symbol.toStringTag,{value:"Module"})),o1=Dt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),a1=Object.freeze(Object.defineProperty({__proto__:null,base2:o1},Symbol.toStringTag,{value:"Module"})),c1=Dt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),l1=Object.freeze(Object.defineProperty({__proto__:null,base8:c1},Symbol.toStringTag,{value:"Module"})),u1=Ai({prefix:"9",name:"base10",alphabet:"0123456789"}),h1=Object.freeze(Object.defineProperty({__proto__:null,base10:u1},Symbol.toStringTag,{value:"Module"})),d1=Dt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),f1=Dt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),p1=Object.freeze(Object.defineProperty({__proto__:null,base16:d1,base16upper:f1},Symbol.toStringTag,{value:"Module"})),g1=Dt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),m1=Dt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),y1=Dt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),w1=Dt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),v1=Dt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),b1=Dt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),_1=Dt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),E1=Dt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),x1=Dt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),S1=Object.freeze(Object.defineProperty({__proto__:null,base32:g1,base32hex:v1,base32hexpad:_1,base32hexpadupper:E1,base32hexupper:b1,base32pad:y1,base32padupper:w1,base32upper:m1,base32z:x1},Symbol.toStringTag,{value:"Module"})),C1=Ai({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),D1=Ai({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),I1=Object.freeze(Object.defineProperty({__proto__:null,base36:C1,base36upper:D1},Symbol.toStringTag,{value:"Module"})),O1=Ai({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),A1=Ai({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),$1=Object.freeze(Object.defineProperty({__proto__:null,base58btc:O1,base58flickr:A1},Symbol.toStringTag,{value:"Module"})),T1=Dt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),N1=Dt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),R1=Dt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),P1=Dt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),L1=Object.freeze(Object.defineProperty({__proto__:null,base64:T1,base64pad:N1,base64url:R1,base64urlpad:P1},Symbol.toStringTag,{value:"Module"})),Cu=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),M1=Cu.reduce((t,e,r)=>(t[r]=e,t),[]),U1=Cu.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function k1(t){return t.reduce((e,r)=>(e+=M1[r],e),"")}function F1(t){const e=[];for(const r of t){const n=U1[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const j1=Bs({prefix:"🚀",name:"base256emoji",encode:k1,decode:F1}),B1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:j1},Symbol.toStringTag,{value:"Module"}));new TextEncoder,new TextDecoder;const Du={...s1,...a1,...l1,...h1,...p1,...S1,...I1,...$1,...L1,...B1};function Iu(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Ou=Iu("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),xa=Iu("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=xu(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Au={utf8:Ou,"utf-8":Ou,hex:Du.base16,latin1:xa,ascii:xa,binary:xa,...Du};function Ut(t,e="utf8"){const r=Au[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Vt(t,e="utf8"){const r=Au[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?_a(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function zs(t){return Ut(Vt(xi(t),kg),_u)}function $u(t){const e=Vt(Wg,Eu),r=qg+Ut(Ea([e,t]),Eu);return[Bg,zg,r].join(jg)}function z1(t){return Ut(t,_u)}function q1(t){return Vt([zs(t.header),zs(t.payload)].join(bu),Fg)}function W1(t){return[zs(t.header),zs(t.payload),z1(t.signature)].join(bu)}function Tu(t=Vn.randomBytes(Vg)){return ma.generateKeyPairFromSeed(t)}async function V1(t,e,r,n,i=ne.fromMiliseconds(Date.now())){const s={alg:Mg,typ:Ug},o=$u(n.publicKey),a=i+r,c={iss:o,sub:t,aud:e,iat:i,exp:a},l=q1({header:s,payload:c}),d=ma.sign(n.secretKey,l);return W1({header:s,payload:c,signature:d})}var Sa={},qs={};Object.defineProperty(qs,"__esModule",{value:!0});var $t=fe,Ca=Yt,H1=20;function K1(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],l=r[11]<<24|r[10]<<16|r[9]<<8|r[8],d=r[15]<<24|r[14]<<16|r[13]<<8|r[12],f=r[19]<<24|r[18]<<16|r[17]<<8|r[16],p=r[23]<<24|r[22]<<16|r[21]<<8|r[20],y=r[27]<<24|r[26]<<16|r[25]<<8|r[24],v=r[31]<<24|r[30]<<16|r[29]<<8|r[28],x=e[3]<<24|e[2]<<16|e[1]<<8|e[0],O=e[7]<<24|e[6]<<16|e[5]<<8|e[4],D=e[11]<<24|e[10]<<16|e[9]<<8|e[8],_=e[15]<<24|e[14]<<16|e[13]<<8|e[12],S=n,w=i,E=s,g=o,u=a,m=c,A=l,N=d,M=f,B=p,q=y,I=v,L=x,Z=O,z=D,k=_,j=0;j<H1;j+=2)S=S+u|0,L^=S,L=L>>>16|L<<16,M=M+L|0,u^=M,u=u>>>20|u<<12,w=w+m|0,Z^=w,Z=Z>>>16|Z<<16,B=B+Z|0,m^=B,m=m>>>20|m<<12,E=E+A|0,z^=E,z=z>>>16|z<<16,q=q+z|0,A^=q,A=A>>>20|A<<12,g=g+N|0,k^=g,k=k>>>16|k<<16,I=I+k|0,N^=I,N=N>>>20|N<<12,E=E+A|0,z^=E,z=z>>>24|z<<8,q=q+z|0,A^=q,A=A>>>25|A<<7,g=g+N|0,k^=g,k=k>>>24|k<<8,I=I+k|0,N^=I,N=N>>>25|N<<7,w=w+m|0,Z^=w,Z=Z>>>24|Z<<8,B=B+Z|0,m^=B,m=m>>>25|m<<7,S=S+u|0,L^=S,L=L>>>24|L<<8,M=M+L|0,u^=M,u=u>>>25|u<<7,S=S+m|0,k^=S,k=k>>>16|k<<16,q=q+k|0,m^=q,m=m>>>20|m<<12,w=w+A|0,L^=w,L=L>>>16|L<<16,I=I+L|0,A^=I,A=A>>>20|A<<12,E=E+N|0,Z^=E,Z=Z>>>16|Z<<16,M=M+Z|0,N^=M,N=N>>>20|N<<12,g=g+u|0,z^=g,z=z>>>16|z<<16,B=B+z|0,u^=B,u=u>>>20|u<<12,E=E+N|0,Z^=E,Z=Z>>>24|Z<<8,M=M+Z|0,N^=M,N=N>>>25|N<<7,g=g+u|0,z^=g,z=z>>>24|z<<8,B=B+z|0,u^=B,u=u>>>25|u<<7,w=w+A|0,L^=w,L=L>>>24|L<<8,I=I+L|0,A^=I,A=A>>>25|A<<7,S=S+m|0,k^=S,k=k>>>24|k<<8,q=q+k|0,m^=q,m=m>>>25|m<<7;$t.writeUint32LE(S+n|0,t,0),$t.writeUint32LE(w+i|0,t,4),$t.writeUint32LE(E+s|0,t,8),$t.writeUint32LE(g+o|0,t,12),$t.writeUint32LE(u+a|0,t,16),$t.writeUint32LE(m+c|0,t,20),$t.writeUint32LE(A+l|0,t,24),$t.writeUint32LE(N+d|0,t,28),$t.writeUint32LE(M+f|0,t,32),$t.writeUint32LE(B+p|0,t,36),$t.writeUint32LE(q+y|0,t,40),$t.writeUint32LE(I+v|0,t,44),$t.writeUint32LE(L+x|0,t,48),$t.writeUint32LE(Z+O|0,t,52),$t.writeUint32LE(z+D|0,t,56),$t.writeUint32LE(k+_|0,t,60)}function Nu(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=i}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){K1(a,s,t);for(var l=c;l<c+64&&l<r.length;l++)n[l]=r[l]^a[l-c];G1(s,0,o)}return Ca.wipe(a),i===0&&Ca.wipe(s),n}qs.streamXOR=Nu;function Z1(t,e,r,n){return n===void 0&&(n=0),Ca.wipe(r),Nu(t,e,r,r,n)}qs.stream=Z1;function G1(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var Ru={},Wr={};Object.defineProperty(Wr,"__esModule",{value:!0});function Y1(t,e,r){return~(t-1)&e|t-1&r}Wr.select=Y1;function J1(t,e){return(t|0)-(e|0)-1>>>31&1}Wr.lessOrEqual=J1;function Pu(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}Wr.compare=Pu;function Q1(t,e){return t.length===0||e.length===0?!1:Pu(t,e)!==0}Wr.equal=Q1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Wr,r=Yt;t.DIGEST_LENGTH=16;var n=function(){function o(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=a[0]|a[1]<<8;this._r[0]=c&8191;var l=a[2]|a[3]<<8;this._r[1]=(c>>>13|l<<3)&8191;var d=a[4]|a[5]<<8;this._r[2]=(l>>>10|d<<6)&7939;var f=a[6]|a[7]<<8;this._r[3]=(d>>>7|f<<9)&8191;var p=a[8]|a[9]<<8;this._r[4]=(f>>>4|p<<12)&255,this._r[5]=p>>>1&8190;var y=a[10]|a[11]<<8;this._r[6]=(p>>>14|y<<2)&8191;var v=a[12]|a[13]<<8;this._r[7]=(y>>>11|v<<5)&8065;var x=a[14]|a[15]<<8;this._r[8]=(v>>>8|x<<8)&8191,this._r[9]=x>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return o.prototype._blocks=function(a,c,l){for(var d=this._fin?0:2048,f=this._h[0],p=this._h[1],y=this._h[2],v=this._h[3],x=this._h[4],O=this._h[5],D=this._h[6],_=this._h[7],S=this._h[8],w=this._h[9],E=this._r[0],g=this._r[1],u=this._r[2],m=this._r[3],A=this._r[4],N=this._r[5],M=this._r[6],B=this._r[7],q=this._r[8],I=this._r[9];l>=16;){var L=a[c+0]|a[c+1]<<8;f+=L&8191;var Z=a[c+2]|a[c+3]<<8;p+=(L>>>13|Z<<3)&8191;var z=a[c+4]|a[c+5]<<8;y+=(Z>>>10|z<<6)&8191;var k=a[c+6]|a[c+7]<<8;v+=(z>>>7|k<<9)&8191;var j=a[c+8]|a[c+9]<<8;x+=(k>>>4|j<<12)&8191,O+=j>>>1&8191;var U=a[c+10]|a[c+11]<<8;D+=(j>>>14|U<<2)&8191;var W=a[c+12]|a[c+13]<<8;_+=(U>>>11|W<<5)&8191;var he=a[c+14]|a[c+15]<<8;S+=(W>>>8|he<<8)&8191,w+=he>>>5|d;var H=0,ae=H;ae+=f*E,ae+=p*(5*I),ae+=y*(5*q),ae+=v*(5*B),ae+=x*(5*M),H=ae>>>13,ae&=8191,ae+=O*(5*N),ae+=D*(5*A),ae+=_*(5*m),ae+=S*(5*u),ae+=w*(5*g),H+=ae>>>13,ae&=8191;var ee=H;ee+=f*g,ee+=p*E,ee+=y*(5*I),ee+=v*(5*q),ee+=x*(5*B),H=ee>>>13,ee&=8191,ee+=O*(5*M),ee+=D*(5*N),ee+=_*(5*A),ee+=S*(5*m),ee+=w*(5*u),H+=ee>>>13,ee&=8191;var ce=H;ce+=f*u,ce+=p*g,ce+=y*E,ce+=v*(5*I),ce+=x*(5*q),H=ce>>>13,ce&=8191,ce+=O*(5*B),ce+=D*(5*M),ce+=_*(5*N),ce+=S*(5*A),ce+=w*(5*m),H+=ce>>>13,ce&=8191;var P=H;P+=f*m,P+=p*u,P+=y*g,P+=v*E,P+=x*(5*I),H=P>>>13,P&=8191,P+=O*(5*q),P+=D*(5*B),P+=_*(5*M),P+=S*(5*N),P+=w*(5*A),H+=P>>>13,P&=8191;var R=H;R+=f*A,R+=p*m,R+=y*u,R+=v*g,R+=x*E,H=R>>>13,R&=8191,R+=O*(5*I),R+=D*(5*q),R+=_*(5*B),R+=S*(5*M),R+=w*(5*N),H+=R>>>13,R&=8191;var $=H;$+=f*N,$+=p*A,$+=y*m,$+=v*u,$+=x*g,H=$>>>13,$&=8191,$+=O*E,$+=D*(5*I),$+=_*(5*q),$+=S*(5*B),$+=w*(5*M),H+=$>>>13,$&=8191;var h=H;h+=f*M,h+=p*N,h+=y*A,h+=v*m,h+=x*u,H=h>>>13,h&=8191,h+=O*g,h+=D*E,h+=_*(5*I),h+=S*(5*q),h+=w*(5*B),H+=h>>>13,h&=8191;var C=H;C+=f*B,C+=p*M,C+=y*N,C+=v*A,C+=x*m,H=C>>>13,C&=8191,C+=O*u,C+=D*g,C+=_*E,C+=S*(5*I),C+=w*(5*q),H+=C>>>13,C&=8191;var K=H;K+=f*q,K+=p*B,K+=y*M,K+=v*N,K+=x*A,H=K>>>13,K&=8191,K+=O*m,K+=D*u,K+=_*g,K+=S*E,K+=w*(5*I),H+=K>>>13,K&=8191;var Q=H;Q+=f*I,Q+=p*q,Q+=y*B,Q+=v*M,Q+=x*N,H=Q>>>13,Q&=8191,Q+=O*A,Q+=D*m,Q+=_*u,Q+=S*g,Q+=w*E,H+=Q>>>13,Q&=8191,H=(H<<2)+H|0,H=H+ae|0,ae=H&8191,H=H>>>13,ee+=H,f=ae,p=ee,y=ce,v=P,x=R,O=$,D=h,_=C,S=K,w=Q,c+=16,l-=16}this._h[0]=f,this._h[1]=p,this._h[2]=y,this._h[3]=v,this._h[4]=x,this._h[5]=O,this._h[6]=D,this._h[7]=_,this._h[8]=S,this._h[9]=w},o.prototype.finish=function(a,c){c===void 0&&(c=0);var l=new Uint16Array(10),d,f,p,y;if(this._leftover){for(y=this._leftover,this._buffer[y++]=1;y<16;y++)this._buffer[y]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(d=this._h[1]>>>13,this._h[1]&=8191,y=2;y<10;y++)this._h[y]+=d,d=this._h[y]>>>13,this._h[y]&=8191;for(this._h[0]+=d*5,d=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=d,d=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=d,l[0]=this._h[0]+5,d=l[0]>>>13,l[0]&=8191,y=1;y<10;y++)l[y]=this._h[y]+d,d=l[y]>>>13,l[y]&=8191;for(l[9]-=8192,f=(d^1)-1,y=0;y<10;y++)l[y]&=f;for(f=~f,y=0;y<10;y++)this._h[y]=this._h[y]&f|l[y];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,p=this._h[0]+this._pad[0],this._h[0]=p&65535,y=1;y<8;y++)p=(this._h[y]+this._pad[y]|0)+(p>>>16)|0,this._h[y]=p&65535;return a[c+0]=this._h[0]>>>0,a[c+1]=this._h[0]>>>8,a[c+2]=this._h[1]>>>0,a[c+3]=this._h[1]>>>8,a[c+4]=this._h[2]>>>0,a[c+5]=this._h[2]>>>8,a[c+6]=this._h[3]>>>0,a[c+7]=this._h[3]>>>8,a[c+8]=this._h[4]>>>0,a[c+9]=this._h[4]>>>8,a[c+10]=this._h[5]>>>0,a[c+11]=this._h[5]>>>8,a[c+12]=this._h[6]>>>0,a[c+13]=this._h[6]>>>8,a[c+14]=this._h[7]>>>0,a[c+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(a){var c=0,l=a.length,d;if(this._leftover){d=16-this._leftover,d>l&&(d=l);for(var f=0;f<d;f++)this._buffer[this._leftover+f]=a[c+f];if(l-=d,c+=d,this._leftover+=d,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(l>=16&&(d=l-l%16,this._blocks(a,c,d),c+=d,l-=d),l){for(var f=0;f<l;f++)this._buffer[this._leftover+f]=a[c+f];this._leftover+=l}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},o.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o}();t.Poly1305=n;function i(o,a){var c=new n(o);c.update(a);var l=c.digest();return c.clean(),l}t.oneTimeAuth=i;function s(o,a){return o.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(o,a)}t.equal=s}(Ru),function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=qs,r=Ru,n=Yt,i=fe,s=Wr;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var o=new Uint8Array(16),a=function(){function c(l){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,l.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(l)}return c.prototype.seal=function(l,d,f,p){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var y=new Uint8Array(16);y.set(l,y.length-l.length);var v=new Uint8Array(32);e.stream(this._key,y,v,4);var x=d.length+this.tagLength,O;if(p){if(p.length!==x)throw new Error("ChaCha20Poly1305: incorrect destination length");O=p}else O=new Uint8Array(x);return e.streamXOR(this._key,y,d,O,4),this._authenticate(O.subarray(O.length-this.tagLength,O.length),v,O.subarray(0,O.length-this.tagLength),f),n.wipe(y),O},c.prototype.open=function(l,d,f,p){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(d.length<this.tagLength)return null;var y=new Uint8Array(16);y.set(l,y.length-l.length);var v=new Uint8Array(32);e.stream(this._key,y,v,4);var x=new Uint8Array(this.tagLength);if(this._authenticate(x,v,d.subarray(0,d.length-this.tagLength),f),!s.equal(x,d.subarray(d.length-this.tagLength,d.length)))return null;var O=d.length-this.tagLength,D;if(p){if(p.length!==O)throw new Error("ChaCha20Poly1305: incorrect destination length");D=p}else D=new Uint8Array(O);return e.streamXOR(this._key,y,d.subarray(0,d.length-this.tagLength),D,4),n.wipe(y),D},c.prototype.clean=function(){return n.wipe(this._key),this},c.prototype._authenticate=function(l,d,f,p){var y=new r.Poly1305(d);p&&(y.update(p),p.length%16>0&&y.update(o.subarray(p.length%16))),y.update(f),f.length%16>0&&y.update(o.subarray(f.length%16));var v=new Uint8Array(8);p&&i.writeUint64LE(p.length,v),y.update(v),i.writeUint64LE(f.length,v),y.update(v);for(var x=y.digest(),O=0;O<x.length;O++)l[O]=x[O];y.clean(),n.wipe(x),n.wipe(v)},c}();t.ChaCha20Poly1305=a}(Sa);var Lu={},$i={},Da={};Object.defineProperty(Da,"__esModule",{value:!0});function X1(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}Da.isSerializableHash=X1,Object.defineProperty($i,"__esModule",{value:!0});var br=Da,em=Wr,tm=Yt,Mu=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),br.isSerializableHash(this._inner)&&br.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),tm.wipe(n)}return t.prototype.reset=function(){if(!br.isSerializableHash(this._inner)||!br.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){br.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),br.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!br.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!br.isSerializableHash(this._inner)||!br.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!br.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();$i.HMAC=Mu;function rm(t,e,r){var n=new Mu(t,e);n.update(r);var i=n.digest();return n.clean(),i}$i.hmac=rm,$i.equal=em.equal,Object.defineProperty(Lu,"__esModule",{value:!0});var Uu=$i,ku=Yt,nm=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=Uu.hmac(this._hash,n,r);this._hmac=new Uu.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),ku.wipe(this._buffer),ku.wipe(this._counter),this._bufpos=0},t}(),im=Lu.HKDF=nm,Ws={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=fe,r=Yt;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},a.prototype.update=function(c,l){if(l===void 0&&(l=c.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var d=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&l>0;)this._buffer[this._bufferLength++]=c[d++],l--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(d=s(this._temp,this._state,c,d,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=c[d++],l--;return this},a.prototype.finish=function(c){if(!this._finished){var l=this._bytesHashed,d=this._bufferLength,f=l/536870912|0,p=l<<3,y=l%64<56?64:128;this._buffer[d]=128;for(var v=d+1;v<y-8;v++)this._buffer[v]=0;e.writeUint32BE(f,this._buffer,y-8),e.writeUint32BE(p,this._buffer,y-4),s(this._temp,this._state,this._buffer,0,y),this._finished=!0}for(var v=0;v<this.digestLength/4;v++)e.writeUint32BE(this._state[v],c,v*4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._state.set(c.state),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.state),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(a,c,l,d,f){for(;f>=64;){for(var p=c[0],y=c[1],v=c[2],x=c[3],O=c[4],D=c[5],_=c[6],S=c[7],w=0;w<16;w++){var E=d+w*4;a[w]=e.readUint32BE(l,E)}for(var w=16;w<64;w++){var g=a[w-2],u=(g>>>17|g<<15)^(g>>>19|g<<13)^g>>>10;g=a[w-15];var m=(g>>>7|g<<25)^(g>>>18|g<<14)^g>>>3;a[w]=(u+a[w-7]|0)+(m+a[w-16]|0)}for(var w=0;w<64;w++){var u=(((O>>>6|O<<26)^(O>>>11|O<<21)^(O>>>25|O<<7))+(O&D^~O&_)|0)+(S+(i[w]+a[w]|0)|0)|0,m=((p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10))+(p&y^p&v^y&v)|0;S=_,_=D,D=O,O=x+u|0,x=v,v=y,y=p,p=u+m|0}c[0]+=p,c[1]+=y,c[2]+=v,c[3]+=x,c[4]+=O,c[5]+=D,c[6]+=_,c[7]+=S,d+=64,f-=64}return d}function o(a){var c=new n;c.update(a);var l=c.digest();return c.clean(),l}t.hash=o})(Ws);var Ia={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=Vn,r=Yt;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(w){const E=new Float64Array(16);if(w)for(let g=0;g<w.length;g++)E[g]=w[g];return E}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function o(w){let E=1;for(let g=0;g<16;g++){let u=w[g]+E+65535;E=Math.floor(u/65536),w[g]=u-E*65536}w[0]+=E-1+37*(E-1)}function a(w,E,g){const u=~(g-1);for(let m=0;m<16;m++){const A=u&(w[m]^E[m]);w[m]^=A,E[m]^=A}}function c(w,E){const g=n(),u=n();for(let m=0;m<16;m++)u[m]=E[m];o(u),o(u),o(u);for(let m=0;m<2;m++){g[0]=u[0]-65517;for(let N=1;N<15;N++)g[N]=u[N]-65535-(g[N-1]>>16&1),g[N-1]&=65535;g[15]=u[15]-32767-(g[14]>>16&1);const A=g[15]>>16&1;g[14]&=65535,a(u,g,1-A)}for(let m=0;m<16;m++)w[2*m]=u[m]&255,w[2*m+1]=u[m]>>8}function l(w,E){for(let g=0;g<16;g++)w[g]=E[2*g]+(E[2*g+1]<<8);w[15]&=32767}function d(w,E,g){for(let u=0;u<16;u++)w[u]=E[u]+g[u]}function f(w,E,g){for(let u=0;u<16;u++)w[u]=E[u]-g[u]}function p(w,E,g){let u,m,A=0,N=0,M=0,B=0,q=0,I=0,L=0,Z=0,z=0,k=0,j=0,U=0,W=0,he=0,H=0,ae=0,ee=0,ce=0,P=0,R=0,$=0,h=0,C=0,K=0,Q=0,Ce=0,Pe=0,Oe=0,Fe=0,it=0,Xe=0,Ne=g[0],Ae=g[1],De=g[2],xe=g[3],Ee=g[4],be=g[5],we=g[6],de=g[7],Se=g[8],$e=g[9],pe=g[10],Le=g[11],Ue=g[12],ze=g[13],qe=g[14],je=g[15];u=E[0],A+=u*Ne,N+=u*Ae,M+=u*De,B+=u*xe,q+=u*Ee,I+=u*be,L+=u*we,Z+=u*de,z+=u*Se,k+=u*$e,j+=u*pe,U+=u*Le,W+=u*Ue,he+=u*ze,H+=u*qe,ae+=u*je,u=E[1],N+=u*Ne,M+=u*Ae,B+=u*De,q+=u*xe,I+=u*Ee,L+=u*be,Z+=u*we,z+=u*de,k+=u*Se,j+=u*$e,U+=u*pe,W+=u*Le,he+=u*Ue,H+=u*ze,ae+=u*qe,ee+=u*je,u=E[2],M+=u*Ne,B+=u*Ae,q+=u*De,I+=u*xe,L+=u*Ee,Z+=u*be,z+=u*we,k+=u*de,j+=u*Se,U+=u*$e,W+=u*pe,he+=u*Le,H+=u*Ue,ae+=u*ze,ee+=u*qe,ce+=u*je,u=E[3],B+=u*Ne,q+=u*Ae,I+=u*De,L+=u*xe,Z+=u*Ee,z+=u*be,k+=u*we,j+=u*de,U+=u*Se,W+=u*$e,he+=u*pe,H+=u*Le,ae+=u*Ue,ee+=u*ze,ce+=u*qe,P+=u*je,u=E[4],q+=u*Ne,I+=u*Ae,L+=u*De,Z+=u*xe,z+=u*Ee,k+=u*be,j+=u*we,U+=u*de,W+=u*Se,he+=u*$e,H+=u*pe,ae+=u*Le,ee+=u*Ue,ce+=u*ze,P+=u*qe,R+=u*je,u=E[5],I+=u*Ne,L+=u*Ae,Z+=u*De,z+=u*xe,k+=u*Ee,j+=u*be,U+=u*we,W+=u*de,he+=u*Se,H+=u*$e,ae+=u*pe,ee+=u*Le,ce+=u*Ue,P+=u*ze,R+=u*qe,$+=u*je,u=E[6],L+=u*Ne,Z+=u*Ae,z+=u*De,k+=u*xe,j+=u*Ee,U+=u*be,W+=u*we,he+=u*de,H+=u*Se,ae+=u*$e,ee+=u*pe,ce+=u*Le,P+=u*Ue,R+=u*ze,$+=u*qe,h+=u*je,u=E[7],Z+=u*Ne,z+=u*Ae,k+=u*De,j+=u*xe,U+=u*Ee,W+=u*be,he+=u*we,H+=u*de,ae+=u*Se,ee+=u*$e,ce+=u*pe,P+=u*Le,R+=u*Ue,$+=u*ze,h+=u*qe,C+=u*je,u=E[8],z+=u*Ne,k+=u*Ae,j+=u*De,U+=u*xe,W+=u*Ee,he+=u*be,H+=u*we,ae+=u*de,ee+=u*Se,ce+=u*$e,P+=u*pe,R+=u*Le,$+=u*Ue,h+=u*ze,C+=u*qe,K+=u*je,u=E[9],k+=u*Ne,j+=u*Ae,U+=u*De,W+=u*xe,he+=u*Ee,H+=u*be,ae+=u*we,ee+=u*de,ce+=u*Se,P+=u*$e,R+=u*pe,$+=u*Le,h+=u*Ue,C+=u*ze,K+=u*qe,Q+=u*je,u=E[10],j+=u*Ne,U+=u*Ae,W+=u*De,he+=u*xe,H+=u*Ee,ae+=u*be,ee+=u*we,ce+=u*de,P+=u*Se,R+=u*$e,$+=u*pe,h+=u*Le,C+=u*Ue,K+=u*ze,Q+=u*qe,Ce+=u*je,u=E[11],U+=u*Ne,W+=u*Ae,he+=u*De,H+=u*xe,ae+=u*Ee,ee+=u*be,ce+=u*we,P+=u*de,R+=u*Se,$+=u*$e,h+=u*pe,C+=u*Le,K+=u*Ue,Q+=u*ze,Ce+=u*qe,Pe+=u*je,u=E[12],W+=u*Ne,he+=u*Ae,H+=u*De,ae+=u*xe,ee+=u*Ee,ce+=u*be,P+=u*we,R+=u*de,$+=u*Se,h+=u*$e,C+=u*pe,K+=u*Le,Q+=u*Ue,Ce+=u*ze,Pe+=u*qe,Oe+=u*je,u=E[13],he+=u*Ne,H+=u*Ae,ae+=u*De,ee+=u*xe,ce+=u*Ee,P+=u*be,R+=u*we,$+=u*de,h+=u*Se,C+=u*$e,K+=u*pe,Q+=u*Le,Ce+=u*Ue,Pe+=u*ze,Oe+=u*qe,Fe+=u*je,u=E[14],H+=u*Ne,ae+=u*Ae,ee+=u*De,ce+=u*xe,P+=u*Ee,R+=u*be,$+=u*we,h+=u*de,C+=u*Se,K+=u*$e,Q+=u*pe,Ce+=u*Le,Pe+=u*Ue,Oe+=u*ze,Fe+=u*qe,it+=u*je,u=E[15],ae+=u*Ne,ee+=u*Ae,ce+=u*De,P+=u*xe,R+=u*Ee,$+=u*be,h+=u*we,C+=u*de,K+=u*Se,Q+=u*$e,Ce+=u*pe,Pe+=u*Le,Oe+=u*Ue,Fe+=u*ze,it+=u*qe,Xe+=u*je,A+=38*ee,N+=38*ce,M+=38*P,B+=38*R,q+=38*$,I+=38*h,L+=38*C,Z+=38*K,z+=38*Q,k+=38*Ce,j+=38*Pe,U+=38*Oe,W+=38*Fe,he+=38*it,H+=38*Xe,m=1,u=A+m+65535,m=Math.floor(u/65536),A=u-m*65536,u=N+m+65535,m=Math.floor(u/65536),N=u-m*65536,u=M+m+65535,m=Math.floor(u/65536),M=u-m*65536,u=B+m+65535,m=Math.floor(u/65536),B=u-m*65536,u=q+m+65535,m=Math.floor(u/65536),q=u-m*65536,u=I+m+65535,m=Math.floor(u/65536),I=u-m*65536,u=L+m+65535,m=Math.floor(u/65536),L=u-m*65536,u=Z+m+65535,m=Math.floor(u/65536),Z=u-m*65536,u=z+m+65535,m=Math.floor(u/65536),z=u-m*65536,u=k+m+65535,m=Math.floor(u/65536),k=u-m*65536,u=j+m+65535,m=Math.floor(u/65536),j=u-m*65536,u=U+m+65535,m=Math.floor(u/65536),U=u-m*65536,u=W+m+65535,m=Math.floor(u/65536),W=u-m*65536,u=he+m+65535,m=Math.floor(u/65536),he=u-m*65536,u=H+m+65535,m=Math.floor(u/65536),H=u-m*65536,u=ae+m+65535,m=Math.floor(u/65536),ae=u-m*65536,A+=m-1+37*(m-1),m=1,u=A+m+65535,m=Math.floor(u/65536),A=u-m*65536,u=N+m+65535,m=Math.floor(u/65536),N=u-m*65536,u=M+m+65535,m=Math.floor(u/65536),M=u-m*65536,u=B+m+65535,m=Math.floor(u/65536),B=u-m*65536,u=q+m+65535,m=Math.floor(u/65536),q=u-m*65536,u=I+m+65535,m=Math.floor(u/65536),I=u-m*65536,u=L+m+65535,m=Math.floor(u/65536),L=u-m*65536,u=Z+m+65535,m=Math.floor(u/65536),Z=u-m*65536,u=z+m+65535,m=Math.floor(u/65536),z=u-m*65536,u=k+m+65535,m=Math.floor(u/65536),k=u-m*65536,u=j+m+65535,m=Math.floor(u/65536),j=u-m*65536,u=U+m+65535,m=Math.floor(u/65536),U=u-m*65536,u=W+m+65535,m=Math.floor(u/65536),W=u-m*65536,u=he+m+65535,m=Math.floor(u/65536),he=u-m*65536,u=H+m+65535,m=Math.floor(u/65536),H=u-m*65536,u=ae+m+65535,m=Math.floor(u/65536),ae=u-m*65536,A+=m-1+37*(m-1),w[0]=A,w[1]=N,w[2]=M,w[3]=B,w[4]=q,w[5]=I,w[6]=L,w[7]=Z,w[8]=z,w[9]=k,w[10]=j,w[11]=U,w[12]=W,w[13]=he,w[14]=H,w[15]=ae}function y(w,E){p(w,E,E)}function v(w,E){const g=n();for(let u=0;u<16;u++)g[u]=E[u];for(let u=253;u>=0;u--)y(g,g),u!==2&&u!==4&&p(g,g,E);for(let u=0;u<16;u++)w[u]=g[u]}function x(w,E){const g=new Uint8Array(32),u=new Float64Array(80),m=n(),A=n(),N=n(),M=n(),B=n(),q=n();for(let z=0;z<31;z++)g[z]=w[z];g[31]=w[31]&127|64,g[0]&=248,l(u,E);for(let z=0;z<16;z++)A[z]=u[z];m[0]=M[0]=1;for(let z=254;z>=0;--z){const k=g[z>>>3]>>>(z&7)&1;a(m,A,k),a(N,M,k),d(B,m,N),f(m,m,N),d(N,A,M),f(A,A,M),y(M,B),y(q,m),p(m,N,m),p(N,A,B),d(B,m,N),f(m,m,N),y(A,m),f(N,M,q),p(m,N,s),d(m,m,M),p(N,N,m),p(m,M,q),p(M,A,u),y(A,B),a(m,A,k),a(N,M,k)}for(let z=0;z<16;z++)u[z+16]=m[z],u[z+32]=N[z],u[z+48]=A[z],u[z+64]=M[z];const I=u.subarray(32),L=u.subarray(16);v(I,I),p(L,L,I);const Z=new Uint8Array(32);return c(Z,L),Z}t.scalarMult=x;function O(w){return x(w,i)}t.scalarMultBase=O;function D(w){if(w.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const E=new Uint8Array(w);return{publicKey:O(E),secretKey:E}}t.generateKeyPairFromSeed=D;function _(w){const E=(0,e.randomBytes)(32,w),g=D(E);return(0,r.wipe)(E),g}t.generateKeyPair=_;function S(w,E,g=!1){if(w.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(E.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const u=x(w,E);if(g){let m=0;for(let A=0;A<u.length;A++)m|=u[A];if(m===0)throw new Error("X25519: invalid shared key")}return u}t.sharedKey=S})(Ia);var Fu=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},sm=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),om=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),am=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),cm=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),lm=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),um=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,hm=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ju=3,dm=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",um]],Bu=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function fm(t){return t?zu(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new lm:typeof navigator<"u"?zu(navigator.userAgent):mm()}function pm(t){return t!==""&&dm.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function zu(t){var e=pm(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new cm;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<ju&&(i=Fu(Fu([],i,!0),ym(ju-i.length),!0)):i=[];var s=i.join("."),o=gm(t),a=hm.exec(t);return a&&a[1]?new am(r,s,o,a[1]):new sm(r,s,o)}function gm(t){for(var e=0,r=Bu.length;e<r;e++){var n=Bu[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function mm(){var t=typeof process<"u"&&process.version;return t?new om(process.version.slice(1)):null}function ym(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.getLocalStorage=Ve.getLocalStorageOrThrow=Ve.getCrypto=Ve.getCryptoOrThrow=Wu=Ve.getLocation=Ve.getLocationOrThrow=Oa=Ve.getNavigator=Ve.getNavigatorOrThrow=qu=Ve.getDocument=Ve.getDocumentOrThrow=Ve.getFromWindowOrThrow=Ve.getFromWindow=void 0;function bn(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Ve.getFromWindow=bn;function Hn(t){const e=bn(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Ve.getFromWindowOrThrow=Hn;function wm(){return Hn("document")}Ve.getDocumentOrThrow=wm;function vm(){return bn("document")}var qu=Ve.getDocument=vm;function bm(){return Hn("navigator")}Ve.getNavigatorOrThrow=bm;function _m(){return bn("navigator")}var Oa=Ve.getNavigator=_m;function Em(){return Hn("location")}Ve.getLocationOrThrow=Em;function xm(){return bn("location")}var Wu=Ve.getLocation=xm;function Sm(){return Hn("crypto")}Ve.getCryptoOrThrow=Sm;function Cm(){return bn("crypto")}Ve.getCrypto=Cm;function Dm(){return Hn("localStorage")}Ve.getLocalStorageOrThrow=Dm;function Im(){return bn("localStorage")}Ve.getLocalStorage=Im;var Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});var Vu=Aa.getWindowMetadata=void 0;const Hu=Ve;function Om(){let t,e;try{t=Hu.getDocumentOrThrow(),e=Hu.getLocationOrThrow()}catch{return null}function r(){const f=t.getElementsByTagName("link"),p=[];for(let y=0;y<f.length;y++){const v=f[y],x=v.getAttribute("rel");if(x&&x.toLowerCase().indexOf("icon")>-1){const O=v.getAttribute("href");if(O)if(O.toLowerCase().indexOf("https:")===-1&&O.toLowerCase().indexOf("http:")===-1&&O.indexOf("//")!==0){let D=e.protocol+"//"+e.host;if(O.indexOf("/")===0)D+=O;else{const _=e.pathname.split("/");_.pop();const S=_.join("/");D+=S+"/"+O}p.push(D)}else if(O.indexOf("//")===0){const D=e.protocol+O;p.push(D)}else p.push(O)}}return p}function n(...f){const p=t.getElementsByTagName("meta");for(let y=0;y<p.length;y++){const v=p[y],x=["itemprop","property","name"].map(O=>v.getAttribute(O)).filter(O=>O?f.includes(O):!1);if(x.length&&x){const O=v.getAttribute("content");if(O)return O}}return""}function i(){let f=n("name","og:site_name","og:title","twitter:title");return f||(f=t.title),f}function s(){return n("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=e.origin,l=r();return{description:a,url:c,icons:l,name:o}}Vu=Aa.getWindowMetadata=Om;var Ti={},Am=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Ku="%[a-f0-9]{2}",Zu=new RegExp("("+Ku+")|([^%]+?)","gi"),Gu=new RegExp("("+Ku+")+","gi");function $a(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],$a(r),$a(n))}function $m(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(Zu)||[],r=1;r<e.length;r++)t=$a(e,r).join(""),e=t.match(Zu)||[];return t}}function Tm(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=Gu.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=$m(r[0]);n!==r[0]&&(e[r[0]]=n)}r=Gu.exec(t)}e["%C2"]="�";for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];t=t.replace(new RegExp(o,"g"),e[o])}return t}var Nm=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return Tm(t)}},Rm=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},Pm=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var o=n[s],a=t[o];(i?e.indexOf(o)!==-1:e(o,a,t))&&(r[o]=a)}return r};(function(t){const e=Am,r=Nm,n=Rm,i=Pm,s=_=>_==null,o=Symbol("encodeFragmentIdentifier");function a(_){switch(_.arrayFormat){case"index":return S=>(w,E)=>{const g=w.length;return E===void 0||_.skipNull&&E===null||_.skipEmptyString&&E===""?w:E===null?[...w,[d(S,_),"[",g,"]"].join("")]:[...w,[d(S,_),"[",d(g,_),"]=",d(E,_)].join("")]};case"bracket":return S=>(w,E)=>E===void 0||_.skipNull&&E===null||_.skipEmptyString&&E===""?w:E===null?[...w,[d(S,_),"[]"].join("")]:[...w,[d(S,_),"[]=",d(E,_)].join("")];case"colon-list-separator":return S=>(w,E)=>E===void 0||_.skipNull&&E===null||_.skipEmptyString&&E===""?w:E===null?[...w,[d(S,_),":list="].join("")]:[...w,[d(S,_),":list=",d(E,_)].join("")];case"comma":case"separator":case"bracket-separator":{const S=_.arrayFormat==="bracket-separator"?"[]=":"=";return w=>(E,g)=>g===void 0||_.skipNull&&g===null||_.skipEmptyString&&g===""?E:(g=g===null?"":g,E.length===0?[[d(w,_),S,d(g,_)].join("")]:[[E,d(g,_)].join(_.arrayFormatSeparator)])}default:return S=>(w,E)=>E===void 0||_.skipNull&&E===null||_.skipEmptyString&&E===""?w:E===null?[...w,d(S,_)]:[...w,[d(S,_),"=",d(E,_)].join("")]}}function c(_){let S;switch(_.arrayFormat){case"index":return(w,E,g)=>{if(S=/\[(\d*)\]$/.exec(w),w=w.replace(/\[\d*\]$/,""),!S){g[w]=E;return}g[w]===void 0&&(g[w]={}),g[w][S[1]]=E};case"bracket":return(w,E,g)=>{if(S=/(\[\])$/.exec(w),w=w.replace(/\[\]$/,""),!S){g[w]=E;return}if(g[w]===void 0){g[w]=[E];return}g[w]=[].concat(g[w],E)};case"colon-list-separator":return(w,E,g)=>{if(S=/(:list)$/.exec(w),w=w.replace(/:list$/,""),!S){g[w]=E;return}if(g[w]===void 0){g[w]=[E];return}g[w]=[].concat(g[w],E)};case"comma":case"separator":return(w,E,g)=>{const u=typeof E=="string"&&E.includes(_.arrayFormatSeparator),m=typeof E=="string"&&!u&&f(E,_).includes(_.arrayFormatSeparator);E=m?f(E,_):E;const A=u||m?E.split(_.arrayFormatSeparator).map(N=>f(N,_)):E===null?E:f(E,_);g[w]=A};case"bracket-separator":return(w,E,g)=>{const u=/(\[\])$/.test(w);if(w=w.replace(/\[\]$/,""),!u){g[w]=E&&f(E,_);return}const m=E===null?[]:E.split(_.arrayFormatSeparator).map(A=>f(A,_));if(g[w]===void 0){g[w]=m;return}g[w]=[].concat(g[w],m)};default:return(w,E,g)=>{if(g[w]===void 0){g[w]=E;return}g[w]=[].concat(g[w],E)}}}function l(_){if(typeof _!="string"||_.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(_,S){return S.encode?S.strict?e(_):encodeURIComponent(_):_}function f(_,S){return S.decode?r(_):_}function p(_){return Array.isArray(_)?_.sort():typeof _=="object"?p(Object.keys(_)).sort((S,w)=>Number(S)-Number(w)).map(S=>_[S]):_}function y(_){const S=_.indexOf("#");return S!==-1&&(_=_.slice(0,S)),_}function v(_){let S="";const w=_.indexOf("#");return w!==-1&&(S=_.slice(w)),S}function x(_){_=y(_);const S=_.indexOf("?");return S===-1?"":_.slice(S+1)}function O(_,S){return S.parseNumbers&&!Number.isNaN(Number(_))&&typeof _=="string"&&_.trim()!==""?_=Number(_):S.parseBooleans&&_!==null&&(_.toLowerCase()==="true"||_.toLowerCase()==="false")&&(_=_.toLowerCase()==="true"),_}function D(_,S){S=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},S),l(S.arrayFormatSeparator);const w=c(S),E=Object.create(null);if(typeof _!="string"||(_=_.trim().replace(/^[?#&]/,""),!_))return E;for(const g of _.split("&")){if(g==="")continue;let[u,m]=n(S.decode?g.replace(/\+/g," "):g,"=");m=m===void 0?null:["comma","separator","bracket-separator"].includes(S.arrayFormat)?m:f(m,S),w(f(u,S),m,E)}for(const g of Object.keys(E)){const u=E[g];if(typeof u=="object"&&u!==null)for(const m of Object.keys(u))u[m]=O(u[m],S);else E[g]=O(u,S)}return S.sort===!1?E:(S.sort===!0?Object.keys(E).sort():Object.keys(E).sort(S.sort)).reduce((g,u)=>{const m=E[u];return m&&typeof m=="object"&&!Array.isArray(m)?g[u]=p(m):g[u]=m,g},Object.create(null))}t.extract=x,t.parse=D,t.stringify=(_,S)=>{if(!_)return"";S=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},S),l(S.arrayFormatSeparator);const w=m=>S.skipNull&&s(_[m])||S.skipEmptyString&&_[m]==="",E=a(S),g={};for(const m of Object.keys(_))w(m)||(g[m]=_[m]);const u=Object.keys(g);return S.sort!==!1&&u.sort(S.sort),u.map(m=>{const A=_[m];return A===void 0?"":A===null?d(m,S):Array.isArray(A)?A.length===0&&S.arrayFormat==="bracket-separator"?d(m,S)+"[]":A.reduce(E(m),[]).join("&"):d(m,S)+"="+d(A,S)}).filter(m=>m.length>0).join("&")},t.parseUrl=(_,S)=>{S=Object.assign({decode:!0},S);const[w,E]=n(_,"#");return Object.assign({url:w.split("?")[0]||"",query:D(x(_),S)},S&&S.parseFragmentIdentifier&&E?{fragmentIdentifier:f(E,S)}:{})},t.stringifyUrl=(_,S)=>{S=Object.assign({encode:!0,strict:!0,[o]:!0},S);const w=y(_.url).split("?")[0]||"",E=t.extract(_.url),g=t.parse(E,{sort:!1}),u=Object.assign(g,_.query);let m=t.stringify(u,S);m&&(m=`?${m}`);let A=v(_.url);return _.fragmentIdentifier&&(A=`#${S[o]?d(_.fragmentIdentifier,S):_.fragmentIdentifier}`),`${w}${m}${A}`},t.pick=(_,S,w)=>{w=Object.assign({parseFragmentIdentifier:!0,[o]:!1},w);const{url:E,query:g,fragmentIdentifier:u}=t.parseUrl(_,w);return t.stringifyUrl({url:E,query:i(g,S),fragmentIdentifier:u},w)},t.exclude=(_,S,w)=>{const E=Array.isArray(S)?g=>!S.includes(g):(g,u)=>!S(g,u);return t.pick(_,E,w)}})(Ti);const Lm={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function Yu(t,e){return t.includes(":")?[t]:e.chains||[]}const Ju="base10",kt="base16",Ta="base64pad",Na="utf8",Qu=0,_n=1,Mm=0,Xu=1,Ra=12,Pa=32;function Um(){const t=Ia.generateKeyPair();return{privateKey:Ut(t.secretKey,kt),publicKey:Ut(t.publicKey,kt)}}function La(){const t=Vn.randomBytes(Pa);return Ut(t,kt)}function km(t,e){const r=Ia.sharedKey(Vt(t,kt),Vt(e,kt)),n=new im(Ws.SHA256,r).expand(Pa);return Ut(n,kt)}function Fm(t){const e=Ws.hash(Vt(t,kt));return Ut(e,kt)}function Kn(t){const e=Ws.hash(Vt(t,Na));return Ut(e,kt)}function jm(t){return Vt(`${t}`,Ju)}function Ni(t){return Number(Ut(t,Ju))}function Bm(t){const e=jm(typeof t.type<"u"?t.type:Qu);if(Ni(e)===_n&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Vt(t.senderPublicKey,kt):void 0,n=typeof t.iv<"u"?Vt(t.iv,kt):Vn.randomBytes(Ra),i=new Sa.ChaCha20Poly1305(Vt(t.symKey,kt)).seal(n,Vt(t.message,Na));return qm({type:e,sealed:i,iv:n,senderPublicKey:r})}function zm(t){const e=new Sa.ChaCha20Poly1305(Vt(t.symKey,kt)),{sealed:r,iv:n}=Vs(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return Ut(i,Na)}function qm(t){if(Ni(t.type)===_n){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ut(Ea([t.type,t.senderPublicKey,t.iv,t.sealed]),Ta)}return Ut(Ea([t.type,t.iv,t.sealed]),Ta)}function Vs(t){const e=Vt(t,Ta),r=e.slice(Mm,Xu),n=Xu;if(Ni(r)===_n){const a=n+Pa,c=a+Ra,l=e.slice(n,a),d=e.slice(a,c),f=e.slice(c);return{type:r,sealed:f,iv:d,senderPublicKey:l}}const i=n+Ra,s=e.slice(n,i),o=e.slice(i);return{type:r,sealed:o,iv:s}}function Wm(t,e){const r=Vs(t);return eh({type:Ni(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Ut(r.senderPublicKey,kt):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function eh(t){const e=(t==null?void 0:t.type)||Qu;if(e===_n){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function th(t){return t.type===_n&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var Vm=Object.defineProperty,rh=Object.getOwnPropertySymbols,Hm=Object.prototype.hasOwnProperty,Km=Object.prototype.propertyIsEnumerable,nh=(t,e,r)=>e in t?Vm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ih=(t,e)=>{for(var r in e||(e={}))Hm.call(e,r)&&nh(t,r,e[r]);if(rh)for(var r of rh(e))Km.call(e,r)&&nh(t,r,e[r]);return t};const Zm="ReactNative",Jt={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Gm="js";function Ma(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Hs(){return!qu()&&!!Oa()&&navigator.product===Zm}function Ri(){return!Ma()&&!!Oa()}function Pi(){return Hs()?Jt.reactNative:Ma()?Jt.node:Ri()?Jt.browser:Jt.unknown}function Ym(t,e){let r=Ti.parse(t);return r=ih(ih({},r),e),t=Ti.stringify(r),t}function Jm(){return Vu()||{name:"",description:"",url:"",icons:[""]}}function Qm(){if(Pi()===Jt.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=fm();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Xm(){var t;const e=Pi();return e===Jt.browser?[e,((t=Wu())==null?void 0:t.host)||"unknown"].join(":"):e}function ey(t,e,r){const n=Qm(),i=Xm();return[[t,e].join("-"),[Gm,r].join("-"),n,i].join("/")}function ty({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o}){const a=r.split("?"),c=ey(t,e,n),l={auth:i,ua:c,projectId:s,useOnCloseEvent:o||void 0},d=Ym(a[1]||"",l);return a[0]+"?"+d}function En(t,e){return t.filter(r=>e.includes(r)).length===t.length}function sh(t){return Object.fromEntries(t.entries())}function oh(t){return new Map(Object.entries(t))}function Zn(t=ne.FIVE_MINUTES,e){const r=ne.toMiliseconds(t||ne.FIVE_MINUTES);let n,i,s;return{resolve:o=>{s&&n&&(clearTimeout(s),n(o))},reject:o=>{s&&i&&(clearTimeout(s),i(o))},done:()=>new Promise((o,a)=>{s=setTimeout(()=>{a(new Error(e))},r),n=o,i=a})}}function Li(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function ah(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function ry(t){return ah("topic",t)}function ny(t){return ah("id",t)}function ch(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function ar(t,e){return ne.fromMiliseconds((e||Date.now())+ne.toMiliseconds(t))}function Vr(t){return Date.now()>=ne.toMiliseconds(t)}function st(t,e){return`${t}${e?`:${e}`:""}`}async function iy({id:t,topic:e,wcDeepLink:r}){try{if(!r)return;const n=typeof r=="string"?JSON.parse(r):r;let i=n==null?void 0:n.href;if(typeof i!="string")return;i.endsWith("/")&&(i=i.slice(0,-1));const s=`${i}/wc?requestId=${t}&sessionTopic=${e}`,o=Pi();o===Jt.browser?s.startsWith("https://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):o===Jt.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(n){console.error(n)}}const sy="irn";function Ua(t){return(t==null?void 0:t.relay)||{protocol:sy}}function Ks(t){const e=Lm[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var oy=Object.defineProperty,lh=Object.getOwnPropertySymbols,ay=Object.prototype.hasOwnProperty,cy=Object.prototype.propertyIsEnumerable,uh=(t,e,r)=>e in t?oy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ly=(t,e)=>{for(var r in e||(e={}))ay.call(e,r)&&uh(t,r,e[r]);if(lh)for(var r of lh(e))cy.call(e,r)&&uh(t,r,e[r]);return t};function uy(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function hy(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=Ti.parse(s);return{protocol:n,topic:dy(i[0]),version:parseInt(i[1],10),symKey:o.symKey,relay:uy(o)}}function dy(t){return t.startsWith("//")?t.substring(2):t}function fy(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=r+e+i;t[i]&&(n[s]=t[i])}),n}function py(t){return`${t.protocol}:${t.topic}@${t.version}?`+Ti.stringify(ly({symKey:t.symKey},fy(t.relay)))}function Gn(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function gy(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Gn(r.accounts))}),e}function my(t,e){const r=[];return Object.values(t).forEach(n=>{Gn(n.accounts).includes(e)&&r.push(...n.methods)}),r}function yy(t,e){const r=[];return Object.values(t).forEach(n=>{Gn(n.accounts).includes(e)&&r.push(...n.events)}),r}function wy(t,e){const r=Gs(t,e);if(r)throw new Error(r.message);const n={};for(const[i,s]of Object.entries(t))n[i]={methods:s.methods,events:s.events,chains:s.accounts.map(o=>`${o.split(":")[0]}:${o.split(":")[1]}`)};return n}const vy={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},by={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Y(t,e){const{message:r,code:n}=by[t];return{message:e?`${r} ${e}`:r,code:n}}function gt(t,e){const{message:r,code:n}=vy[t];return{message:e?`${r} ${e}`:r,code:n}}function Mi(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Ui(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Ft(t){return typeof t>"u"}function mt(t,e){return e&&Ft(t)?!0:typeof t=="string"&&!!t.trim().length}function ka(t,e){return e&&Ft(t)?!0:typeof t=="number"&&!isNaN(t)}function _y(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return En(i,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],d=Gn(a),f=r[o];(!En(Yu(o,f),d)||!En(f.methods,c)||!En(f.events,l))&&(s=!1)}),s):!1}function Zs(t){return mt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Ey(t){if(mt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Zs(r)}}return!1}function xy(t){if(mt(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function Sy(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function Cy(t){return t==null?void 0:t.topic}function Dy(t,e){let r=null;return mt(t==null?void 0:t.publicKey,!1)||(r=Y("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function hh(t){let e=!0;return Mi(t)?t.length&&(e=t.every(r=>mt(r,!1))):e=!1,e}function Iy(t,e,r){let n=null;return Mi(e)&&e.length?e.forEach(i=>{n||Zs(i)||(n=gt("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Zs(t)||(n=gt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function Oy(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=Iy(i,Yu(i,s),`${e} ${r}`);o&&(n=o)}),n}function Ay(t,e){let r=null;return Mi(t)?t.forEach(n=>{r||Ey(n)||(r=gt("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=gt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function $y(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Ay(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function Ty(t,e){let r=null;return hh(t==null?void 0:t.methods)?hh(t==null?void 0:t.events)||(r=gt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=gt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function dh(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Ty(n,`${e}, namespace`);i&&(r=i)}),r}function Ny(t,e,r){let n=null;if(t&&Ui(t)){const i=dh(t,e);i&&(n=i);const s=Oy(t,e,r);s&&(n=s)}else n=Y("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function Gs(t,e){let r=null;if(t&&Ui(t)){const n=dh(t,e);n&&(r=n);const i=$y(t,e);i&&(r=i)}else r=Y("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function fh(t){return mt(t.protocol,!0)}function Ry(t,e){let r=!1;return e&&!t?r=!0:t&&Mi(t)&&t.length&&t.forEach(n=>{r=fh(n)}),r}function Py(t){return typeof t=="number"}function Ht(t){return typeof t<"u"&&typeof t!==null}function Ly(t){return!(!t||typeof t!="object"||!t.code||!ka(t.code,!1)||!t.message||!mt(t.message,!1))}function My(t){return!(Ft(t)||!mt(t.method,!1))}function Uy(t){return!(Ft(t)||Ft(t.result)&&Ft(t.error)||!ka(t.id,!1)||!mt(t.jsonrpc,!1))}function ky(t){return!(Ft(t)||!mt(t.name,!1))}function ph(t,e){return!(!Zs(e)||!gy(t).includes(e))}function Fy(t,e,r){return mt(r,!1)?my(t,e).includes(r):!1}function jy(t,e,r){return mt(r,!1)?yy(t,e).includes(r):!1}function gh(t,e,r){let n=null;const i=By(t),s=zy(e),o=Object.keys(i),a=Object.keys(s),c=mh(Object.keys(t)),l=mh(Object.keys(e)),d=c.filter(f=>!l.includes(f));return d.length&&(n=Y("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${d.toString()}
      Received: ${Object.keys(e).toString()}`)),En(o,a)||(n=Y("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(f=>{if(!f.includes(":")||n)return;const p=Gn(e[f].accounts);p.includes(f)||(n=Y("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${f}
        Required: ${f}
        Approved: ${p.toString()}`))}),o.forEach(f=>{n||(En(i[f].methods,s[f].methods)?En(i[f].events,s[f].events)||(n=Y("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${f}`)):n=Y("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${f}`))}),n}function By(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function mh(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function zy(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=Gn(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function qy(t,e){return ka(t,!1)&&t<=e.max&&t>=e.min}function yh(){const t=Pi();return new Promise(e=>{switch(t){case Jt.browser:e(Wy());break;case Jt.reactNative:e(Vy());break;case Jt.node:e(Hy());break;default:e(!0)}})}function Wy(){return Ri()&&(navigator==null?void 0:navigator.onLine)}async function Vy(){if(Hs()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function Hy(){return!0}function Ky(t){switch(Pi()){case Jt.browser:Zy(t);break;case Jt.reactNative:Gy(t);break}}function Zy(t){Ri()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function Gy(t){Hs()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const Fa={};let Ys=class{static get(e){return Fa[e]}static set(e,r){Fa[e]=r}static delete(e){delete Fa[e]}};const Yy="PARSE_ERROR",Jy="INVALID_REQUEST",Qy="METHOD_NOT_FOUND",Xy="INVALID_PARAMS",wh="INTERNAL_ERROR",ja="SERVER_ERROR",ew=[-32700,-32600,-32601,-32602,-32603],ki={[Yy]:{code:-32700,message:"Parse error"},[Jy]:{code:-32600,message:"Invalid Request"},[Qy]:{code:-32601,message:"Method not found"},[Xy]:{code:-32602,message:"Invalid params"},[wh]:{code:-32603,message:"Internal error"},[ja]:{code:-32e3,message:"Server error"}},vh=ja;function tw(t){return ew.includes(t)}function bh(t){return Object.keys(ki).includes(t)?ki[t]:ki[vh]}function rw(t){const e=Object.values(ki).find(r=>r.code===t);return e||ki[vh]}function nw(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var _h={},Or={},Eh;function iw(){if(Eh)return Or;Eh=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.isBrowserCryptoAvailable=Or.getSubtleCrypto=Or.getBrowerCrypto=void 0;function t(){return(wr==null?void 0:wr.crypto)||(wr==null?void 0:wr.msCrypto)||{}}Or.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}Or.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return Or.isBrowserCryptoAvailable=r,Or}var Ar={},xh;function sw(){if(xh)return Ar;xh=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.isBrowser=Ar.isNode=Ar.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Ar.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Ar.isNode=e;function r(){return!t()&&!e()}return Ar.isBrowser=r,Ar}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=vr;e.__exportStar(iw(),t),e.__exportStar(sw(),t)})(_h);function Ba(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Sh(t=6){return BigInt(Ba(t))}function Fi(t,e,r){return{id:r||Ba(),jsonrpc:"2.0",method:t,params:e}}function za(t,e){return{id:t,jsonrpc:"2.0",result:e}}function qa(t,e,r){return{id:t,jsonrpc:"2.0",error:ow(e,r)}}function ow(t,e){return typeof t>"u"?bh(wh):(typeof t=="string"&&(t=Object.assign(Object.assign({},bh(ja)),{message:t})),typeof e<"u"&&(t.data=e),tw(t.code)&&(t=rw(t.code)),t)}class aw{}class cw extends aw{constructor(){super()}}class lw extends cw{constructor(e){super()}}const uw="^wss?:";function hw(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function dw(t,e){const r=hw(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function Ch(t){return dw(t,uw)}function fw(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Dh(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Wa(t){return Dh(t)&&"method"in t}function Js(t){return Dh(t)&&($r(t)||cr(t))}function $r(t){return"result"in t}function cr(t){return"error"in t}class pw extends lw{constructor(e){super(e),this.events=new or.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Fi(e.method,e.params||[],e.id||Sh().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{cr(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Js(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const gw=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),mw=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Ih=t=>t.split("?")[0],Oh=10,yw=gw();class ww{constructor(e){if(this.url=e,this.events=new or.EventEmitter,this.registering=!1,!Ch(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(xi(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!Ch(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=_h.isReactNative()?void 0:{rejectUnauthorized:!fw(e)},s=new yw(e,[],i);mw()?s.onerror=o=>{const a=o;n(this.emitError(a.error))}:s.on("error",o=>{n(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Ps(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=qa(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return nw(e,Ih(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Oh&&this.events.setMaxListeners(Oh)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Ih(this.url)}`));return this.events.emit("register_error",r),r}}var Qs={exports:{}};Qs.exports,function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",d="[object Boolean]",f="[object Date]",p="[object Error]",y="[object Function]",v="[object GeneratorFunction]",x="[object Map]",O="[object Number]",D="[object Null]",_="[object Object]",S="[object Promise]",w="[object Proxy]",E="[object RegExp]",g="[object Set]",u="[object String]",m="[object Symbol]",A="[object Undefined]",N="[object WeakMap]",M="[object ArrayBuffer]",B="[object DataView]",q="[object Float32Array]",I="[object Float64Array]",L="[object Int8Array]",Z="[object Int16Array]",z="[object Int32Array]",k="[object Uint8Array]",j="[object Uint8ClampedArray]",U="[object Uint16Array]",W="[object Uint32Array]",he=/[\\^$.*+?()[\]{}|]/g,H=/^\[object .+?Constructor\]$/,ae=/^(?:0|[1-9]\d*)$/,ee={};ee[q]=ee[I]=ee[L]=ee[Z]=ee[z]=ee[k]=ee[j]=ee[U]=ee[W]=!0,ee[a]=ee[c]=ee[M]=ee[d]=ee[B]=ee[f]=ee[p]=ee[y]=ee[x]=ee[O]=ee[_]=ee[E]=ee[g]=ee[u]=ee[N]=!1;var ce=typeof wr=="object"&&wr&&wr.Object===Object&&wr,P=typeof self=="object"&&self&&self.Object===Object&&self,R=ce||P||Function("return this")(),$=e&&!e.nodeType&&e,h=$&&!0&&t&&!t.nodeType&&t,C=h&&h.exports===$,K=C&&ce.process,Q=function(){try{return K&&K.binding&&K.binding("util")}catch{}}(),Ce=Q&&Q.isTypedArray;function Pe(b,T){for(var F=-1,te=b==null?0:b.length,He=0,ye=[];++F<te;){var rt=b[F];T(rt,F,b)&&(ye[He++]=rt)}return ye}function Oe(b,T){for(var F=-1,te=T.length,He=b.length;++F<te;)b[He+F]=T[F];return b}function Fe(b,T){for(var F=-1,te=b==null?0:b.length;++F<te;)if(T(b[F],F,b))return!0;return!1}function it(b,T){for(var F=-1,te=Array(b);++F<b;)te[F]=T(F);return te}function Xe(b){return function(T){return b(T)}}function Ne(b,T){return b.has(T)}function Ae(b,T){return b==null?void 0:b[T]}function De(b){var T=-1,F=Array(b.size);return b.forEach(function(te,He){F[++T]=[He,te]}),F}function xe(b,T){return function(F){return b(T(F))}}function Ee(b){var T=-1,F=Array(b.size);return b.forEach(function(te){F[++T]=te}),F}var be=Array.prototype,we=Function.prototype,de=Object.prototype,Se=R["__core-js_shared__"],$e=we.toString,pe=de.hasOwnProperty,Le=function(){var b=/[^.]+$/.exec(Se&&Se.keys&&Se.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}(),Ue=de.toString,ze=RegExp("^"+$e.call(pe).replace(he,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qe=C?R.Buffer:void 0,je=R.Symbol,pr=R.Uint8Array,Ir=de.propertyIsEnumerable,on=be.splice,er=je?je.toStringTag:void 0,Un=Object.getOwnPropertySymbols,Es=qe?qe.isBuffer:void 0,jo=xe(Object.keys,Object),ot=vi(R,"DataView"),et=vi(R,"Map"),at=vi(R,"Promise"),ct=vi(R,"Set"),lt=vi(R,"WeakMap"),tt=vi(Object,"create"),wt=Fn(ot),vt=Fn(et),bt=Fn(at),_t=Fn(ct),Et=Fn(lt),dt=je?je.prototype:void 0,ut=dt?dt.valueOf:void 0;function Ze(b){var T=-1,F=b==null?0:b.length;for(this.clear();++T<F;){var te=b[T];this.set(te[0],te[1])}}function xt(){this.__data__=tt?tt(null):{},this.size=0}function St(b){var T=this.has(b)&&delete this.__data__[b];return this.size-=T?1:0,T}function VE(b){var T=this.__data__;if(tt){var F=T[b];return F===n?void 0:F}return pe.call(T,b)?T[b]:void 0}function HE(b){var T=this.__data__;return tt?T[b]!==void 0:pe.call(T,b)}function KE(b,T){var F=this.__data__;return this.size+=this.has(b)?0:1,F[b]=tt&&T===void 0?n:T,this}Ze.prototype.clear=xt,Ze.prototype.delete=St,Ze.prototype.get=VE,Ze.prototype.has=HE,Ze.prototype.set=KE;function kr(b){var T=-1,F=b==null?0:b.length;for(this.clear();++T<F;){var te=b[T];this.set(te[0],te[1])}}function ZE(){this.__data__=[],this.size=0}function GE(b){var T=this.__data__,F=zo(T,b);if(F<0)return!1;var te=T.length-1;return F==te?T.pop():on.call(T,F,1),--this.size,!0}function YE(b){var T=this.__data__,F=zo(T,b);return F<0?void 0:T[F][1]}function JE(b){return zo(this.__data__,b)>-1}function QE(b,T){var F=this.__data__,te=zo(F,b);return te<0?(++this.size,F.push([b,T])):F[te][1]=T,this}kr.prototype.clear=ZE,kr.prototype.delete=GE,kr.prototype.get=YE,kr.prototype.has=JE,kr.prototype.set=QE;function kn(b){var T=-1,F=b==null?0:b.length;for(this.clear();++T<F;){var te=b[T];this.set(te[0],te[1])}}function XE(){this.size=0,this.__data__={hash:new Ze,map:new(et||kr),string:new Ze}}function e4(b){var T=qo(this,b).delete(b);return this.size-=T?1:0,T}function t4(b){return qo(this,b).get(b)}function r4(b){return qo(this,b).has(b)}function n4(b,T){var F=qo(this,b),te=F.size;return F.set(b,T),this.size+=F.size==te?0:1,this}kn.prototype.clear=XE,kn.prototype.delete=e4,kn.prototype.get=t4,kn.prototype.has=r4,kn.prototype.set=n4;function Bo(b){var T=-1,F=b==null?0:b.length;for(this.__data__=new kn;++T<F;)this.add(b[T])}function i4(b){return this.__data__.set(b,n),this}function s4(b){return this.__data__.has(b)}Bo.prototype.add=Bo.prototype.push=i4,Bo.prototype.has=s4;function an(b){var T=this.__data__=new kr(b);this.size=T.size}function o4(){this.__data__=new kr,this.size=0}function a4(b){var T=this.__data__,F=T.delete(b);return this.size=T.size,F}function c4(b){return this.__data__.get(b)}function l4(b){return this.__data__.has(b)}function u4(b,T){var F=this.__data__;if(F instanceof kr){var te=F.__data__;if(!et||te.length<r-1)return te.push([b,T]),this.size=++F.size,this;F=this.__data__=new kn(te)}return F.set(b,T),this.size=F.size,this}an.prototype.clear=o4,an.prototype.delete=a4,an.prototype.get=c4,an.prototype.has=l4,an.prototype.set=u4;function h4(b,T){var F=Wo(b),te=!F&&D4(b),He=!F&&!te&&ml(b),ye=!F&&!te&&!He&&c0(b),rt=F||te||He||ye,Ct=rt?it(b.length,String):[],Ot=Ct.length;for(var Je in b)(T||pe.call(b,Je))&&!(rt&&(Je=="length"||He&&(Je=="offset"||Je=="parent")||ye&&(Je=="buffer"||Je=="byteLength"||Je=="byteOffset")||_4(Je,Ot)))&&Ct.push(Je);return Ct}function zo(b,T){for(var F=b.length;F--;)if(i0(b[F][0],T))return F;return-1}function d4(b,T,F){var te=T(b);return Wo(b)?te:Oe(te,F(b))}function xs(b){return b==null?b===void 0?A:D:er&&er in Object(b)?v4(b):C4(b)}function e0(b){return Ss(b)&&xs(b)==a}function t0(b,T,F,te,He){return b===T?!0:b==null||T==null||!Ss(b)&&!Ss(T)?b!==b&&T!==T:f4(b,T,F,te,t0,He)}function f4(b,T,F,te,He,ye){var rt=Wo(b),Ct=Wo(T),Ot=rt?c:cn(b),Je=Ct?c:cn(T);Ot=Ot==a?_:Ot,Je=Je==a?_:Je;var tr=Ot==_,gr=Je==_,Lt=Ot==Je;if(Lt&&ml(b)){if(!ml(T))return!1;rt=!0,tr=!1}if(Lt&&!tr)return ye||(ye=new an),rt||c0(b)?r0(b,T,F,te,He,ye):y4(b,T,Ot,F,te,He,ye);if(!(F&i)){var ir=tr&&pe.call(b,"__wrapped__"),sr=gr&&pe.call(T,"__wrapped__");if(ir||sr){var ln=ir?b.value():b,Fr=sr?T.value():T;return ye||(ye=new an),He(ln,Fr,F,te,ye)}}return Lt?(ye||(ye=new an),w4(b,T,F,te,He,ye)):!1}function p4(b){if(!a0(b)||x4(b))return!1;var T=s0(b)?ze:H;return T.test(Fn(b))}function g4(b){return Ss(b)&&o0(b.length)&&!!ee[xs(b)]}function m4(b){if(!S4(b))return jo(b);var T=[];for(var F in Object(b))pe.call(b,F)&&F!="constructor"&&T.push(F);return T}function r0(b,T,F,te,He,ye){var rt=F&i,Ct=b.length,Ot=T.length;if(Ct!=Ot&&!(rt&&Ot>Ct))return!1;var Je=ye.get(b);if(Je&&ye.get(T))return Je==T;var tr=-1,gr=!0,Lt=F&s?new Bo:void 0;for(ye.set(b,T),ye.set(T,b);++tr<Ct;){var ir=b[tr],sr=T[tr];if(te)var ln=rt?te(sr,ir,tr,T,b,ye):te(ir,sr,tr,b,T,ye);if(ln!==void 0){if(ln)continue;gr=!1;break}if(Lt){if(!Fe(T,function(Fr,jn){if(!Ne(Lt,jn)&&(ir===Fr||He(ir,Fr,F,te,ye)))return Lt.push(jn)})){gr=!1;break}}else if(!(ir===sr||He(ir,sr,F,te,ye))){gr=!1;break}}return ye.delete(b),ye.delete(T),gr}function y4(b,T,F,te,He,ye,rt){switch(F){case B:if(b.byteLength!=T.byteLength||b.byteOffset!=T.byteOffset)return!1;b=b.buffer,T=T.buffer;case M:return!(b.byteLength!=T.byteLength||!ye(new pr(b),new pr(T)));case d:case f:case O:return i0(+b,+T);case p:return b.name==T.name&&b.message==T.message;case E:case u:return b==T+"";case x:var Ct=De;case g:var Ot=te&i;if(Ct||(Ct=Ee),b.size!=T.size&&!Ot)return!1;var Je=rt.get(b);if(Je)return Je==T;te|=s,rt.set(b,T);var tr=r0(Ct(b),Ct(T),te,He,ye,rt);return rt.delete(b),tr;case m:if(ut)return ut.call(b)==ut.call(T)}return!1}function w4(b,T,F,te,He,ye){var rt=F&i,Ct=n0(b),Ot=Ct.length,Je=n0(T),tr=Je.length;if(Ot!=tr&&!rt)return!1;for(var gr=Ot;gr--;){var Lt=Ct[gr];if(!(rt?Lt in T:pe.call(T,Lt)))return!1}var ir=ye.get(b);if(ir&&ye.get(T))return ir==T;var sr=!0;ye.set(b,T),ye.set(T,b);for(var ln=rt;++gr<Ot;){Lt=Ct[gr];var Fr=b[Lt],jn=T[Lt];if(te)var l0=rt?te(jn,Fr,Lt,T,b,ye):te(Fr,jn,Lt,b,T,ye);if(!(l0===void 0?Fr===jn||He(Fr,jn,F,te,ye):l0)){sr=!1;break}ln||(ln=Lt=="constructor")}if(sr&&!ln){var Vo=b.constructor,Ho=T.constructor;Vo!=Ho&&"constructor"in b&&"constructor"in T&&!(typeof Vo=="function"&&Vo instanceof Vo&&typeof Ho=="function"&&Ho instanceof Ho)&&(sr=!1)}return ye.delete(b),ye.delete(T),sr}function n0(b){return d4(b,A4,b4)}function qo(b,T){var F=b.__data__;return E4(T)?F[typeof T=="string"?"string":"hash"]:F.map}function vi(b,T){var F=Ae(b,T);return p4(F)?F:void 0}function v4(b){var T=pe.call(b,er),F=b[er];try{b[er]=void 0;var te=!0}catch{}var He=Ue.call(b);return te&&(T?b[er]=F:delete b[er]),He}var b4=Un?function(b){return b==null?[]:(b=Object(b),Pe(Un(b),function(T){return Ir.call(b,T)}))}:$4,cn=xs;(ot&&cn(new ot(new ArrayBuffer(1)))!=B||et&&cn(new et)!=x||at&&cn(at.resolve())!=S||ct&&cn(new ct)!=g||lt&&cn(new lt)!=N)&&(cn=function(b){var T=xs(b),F=T==_?b.constructor:void 0,te=F?Fn(F):"";if(te)switch(te){case wt:return B;case vt:return x;case bt:return S;case _t:return g;case Et:return N}return T});function _4(b,T){return T=T??o,!!T&&(typeof b=="number"||ae.test(b))&&b>-1&&b%1==0&&b<T}function E4(b){var T=typeof b;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?b!=="__proto__":b===null}function x4(b){return!!Le&&Le in b}function S4(b){var T=b&&b.constructor,F=typeof T=="function"&&T.prototype||de;return b===F}function C4(b){return Ue.call(b)}function Fn(b){if(b!=null){try{return $e.call(b)}catch{}try{return b+""}catch{}}return""}function i0(b,T){return b===T||b!==b&&T!==T}var D4=e0(function(){return arguments}())?e0:function(b){return Ss(b)&&pe.call(b,"callee")&&!Ir.call(b,"callee")},Wo=Array.isArray;function I4(b){return b!=null&&o0(b.length)&&!s0(b)}var ml=Es||T4;function O4(b,T){return t0(b,T)}function s0(b){if(!a0(b))return!1;var T=xs(b);return T==y||T==v||T==l||T==w}function o0(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=o}function a0(b){var T=typeof b;return b!=null&&(T=="object"||T=="function")}function Ss(b){return b!=null&&typeof b=="object"}var c0=Ce?Xe(Ce):g4;function A4(b){return I4(b)?h4(b):m4(b)}function $4(){return[]}function T4(){return!1}t.exports=O4}(Qs,Qs.exports);var vw=Qs.exports;const bw=Qo(vw);function _w(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function f(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var x=0,O=0,D=0,_=v.length;D!==_&&v[D]===0;)D++,x++;for(var S=(_-D)*d+1>>>0,w=new Uint8Array(S);D!==_;){for(var E=v[D],g=0,u=S-1;(E!==0||g<O)&&u!==-1;u--,g++)E+=256*w[u]>>>0,w[u]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");O=g,D++}for(var m=S-O;m!==S&&w[m]===0;)m++;for(var A=c.repeat(x);m<S;++m)A+=t.charAt(w[m]);return A}function p(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var x=0;if(v[x]!==" "){for(var O=0,D=0;v[x]===c;)O++,x++;for(var _=(v.length-x)*l+1>>>0,S=new Uint8Array(_);v[x];){var w=r[v.charCodeAt(x)];if(w===255)return;for(var E=0,g=_-1;(w!==0||E<D)&&g!==-1;g--,E++)w+=a*S[g]>>>0,S[g]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");D=E,x++}if(v[x]!==" "){for(var u=_-D;u!==_&&S[u]===0;)u++;for(var m=new Uint8Array(O+(_-u)),A=O;u!==_;)m[A++]=S[u++];return m}}}function y(v){var x=p(v);if(x)return x;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:p,decode:y}}var Ew=_w,xw=Ew;const Ah=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Sw=t=>new TextEncoder().encode(t),Cw=t=>new TextDecoder().decode(t);class Dw{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Iw{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return $h(this,e)}}class Ow{constructor(e){this.decoders=e}or(e){return $h(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const $h=(t,e)=>new Ow({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Aw{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Dw(e,r,n),this.decoder=new Iw(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Xs=({name:t,prefix:e,encode:r,decode:n})=>new Aw(t,e,r,n),ji=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=xw(r,e);return Xs({prefix:t,name:e,encode:n,decode:s=>Ah(i(s))})},$w=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let d=0;d<s;++d){const f=i[t[d]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Tw=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},It=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Xs({prefix:e,name:t,encode(i){return Tw(i,n,r)},decode(i){return $w(i,n,r,t)}}),Nw=Xs({prefix:"\0",name:"identity",encode:t=>Cw(t),decode:t=>Sw(t)});var Rw=Object.freeze({__proto__:null,identity:Nw});const Pw=It({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Lw=Object.freeze({__proto__:null,base2:Pw});const Mw=It({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Uw=Object.freeze({__proto__:null,base8:Mw});const kw=ji({prefix:"9",name:"base10",alphabet:"0123456789"});var Fw=Object.freeze({__proto__:null,base10:kw});const jw=It({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Bw=It({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var zw=Object.freeze({__proto__:null,base16:jw,base16upper:Bw});const qw=It({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ww=It({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Vw=It({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Hw=It({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Kw=It({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Zw=It({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Gw=It({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Yw=It({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Jw=It({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Qw=Object.freeze({__proto__:null,base32:qw,base32upper:Ww,base32pad:Vw,base32padupper:Hw,base32hex:Kw,base32hexupper:Zw,base32hexpad:Gw,base32hexpadupper:Yw,base32z:Jw});const Xw=ji({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ev=ji({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var tv=Object.freeze({__proto__:null,base36:Xw,base36upper:ev});const rv=ji({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),nv=ji({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var iv=Object.freeze({__proto__:null,base58btc:rv,base58flickr:nv});const sv=It({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ov=It({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),av=It({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),cv=It({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var lv=Object.freeze({__proto__:null,base64:sv,base64pad:ov,base64url:av,base64urlpad:cv});const Th=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),uv=Th.reduce((t,e,r)=>(t[r]=e,t),[]),hv=Th.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function dv(t){return t.reduce((e,r)=>(e+=uv[r],e),"")}function fv(t){const e=[];for(const r of t){const n=hv[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const pv=Xs({prefix:"🚀",name:"base256emoji",encode:dv,decode:fv});var gv=Object.freeze({__proto__:null,base256emoji:pv}),mv=Rh,Nh=128,yv=127,wv=~yv,vv=Math.pow(2,31);function Rh(t,e,r){e=e||[],r=r||0;for(var n=r;t>=vv;)e[r++]=t&255|Nh,t/=128;for(;t&wv;)e[r++]=t&255|Nh,t>>>=7;return e[r]=t|0,Rh.bytes=r-n+1,e}var bv=Va,_v=128,Ph=127;function Va(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Va.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&Ph)<<i:(o&Ph)*Math.pow(2,i),i+=7}while(o>=_v);return Va.bytes=s-n,r}var Ev=Math.pow(2,7),xv=Math.pow(2,14),Sv=Math.pow(2,21),Cv=Math.pow(2,28),Dv=Math.pow(2,35),Iv=Math.pow(2,42),Ov=Math.pow(2,49),Av=Math.pow(2,56),$v=Math.pow(2,63),Tv=function(t){return t<Ev?1:t<xv?2:t<Sv?3:t<Cv?4:t<Dv?5:t<Iv?6:t<Ov?7:t<Av?8:t<$v?9:10},Nv={encode:mv,decode:bv,encodingLength:Tv},Lh=Nv;const Mh=(t,e,r=0)=>(Lh.encode(t,e,r),e),Uh=t=>Lh.encodingLength(t),Ha=(t,e)=>{const r=e.byteLength,n=Uh(t),i=n+Uh(r),s=new Uint8Array(i+r);return Mh(t,s,0),Mh(r,s,n),s.set(e,i),new Rv(t,r,e,s)};class Rv{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const kh=({name:t,code:e,encode:r})=>new Pv(t,e,r);class Pv{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Ha(this.code,r):r.then(n=>Ha(this.code,n))}else throw Error("Unknown type, must be binary type")}}const Fh=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Lv=kh({name:"sha2-256",code:18,encode:Fh("SHA-256")}),Mv=kh({name:"sha2-512",code:19,encode:Fh("SHA-512")});var Uv=Object.freeze({__proto__:null,sha256:Lv,sha512:Mv});const jh=0,kv="identity",Bh=Ah;var Fv=Object.freeze({__proto__:null,identity:{code:jh,name:kv,encode:Bh,digest:t=>Ha(jh,Bh(t))}});new TextEncoder,new TextDecoder;const zh={...Rw,...Lw,...Uw,...Fw,...zw,...Qw,...tv,...iv,...lv,...gv};({...Uv,...Fv});function qh(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function jv(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?qh(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Wh(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Vh=Wh("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Ka=Wh("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=jv(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Bv={utf8:Vh,"utf-8":Vh,hex:zh.base16,latin1:Ka,ascii:Ka,binary:Ka,...zh};function zv(t,e="utf8"){const r=Bv[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?qh(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const Hh="wc",qv=2,Za="core",Hr=`${Hh}@2:${Za}:`,Wv={name:Za,logger:"error"},Vv={database:":memory:"},Hv="crypto",Kh="client_ed25519_seed",Kv=ne.ONE_DAY,Zv="keychain",Gv="0.3",Yv="messages",Jv="0.3",Qv=ne.SIX_HOURS,Xv="publisher",Zh="irn",eb="error",Gh="wss://relay.walletconnect.com",Yh="wss://relay.walletconnect.org",tb="relayer",Tt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},rb="_subscription",Tr={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},nb=ne.ONE_SECOND,ib="2.10.0",sb=1e4,ob="0.3",ab="WALLETCONNECT_CLIENT_ID",_r={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},cb="subscription",lb="0.3",ub=ne.FIVE_SECONDS*1e3,hb="pairing",db="0.3",Bi={wc_pairingDelete:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ne.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ne.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:0},res:{ttl:ne.ONE_DAY,prompt:!1,tag:0}}},Er={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},fb="history",pb="0.3",gb="expirer",rr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},mb="0.3",Ga="verify-api",eo="https://verify.walletconnect.com",Jh="https://verify.walletconnect.org";let yb=class{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=Zv,this.version=Gv,this.initialized=!1,this.storagePrefix=Hr,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=Y("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=Re.generateChildLogger(r,this.name)}get context(){return Re.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,sh(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?oh(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}},wb=class{constructor(e,r,n){this.core=e,this.logger=r,this.name=Hv,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=Tu(i);return $u(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=Um();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),o=Tu(s),a=La();return await V1(a,i,Kv,o)},this.generateSharedKey=(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=km(a,s);return this.setSymKey(c,o)},this.setSymKey=async(i,s)=>{this.isInitialized();const o=s||Fm(i);return await this.keychain.set(o,i),o},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,o)=>{this.isInitialized();const a=eh(o),c=xi(s);if(th(a)){const p=a.senderPublicKey,y=a.receiverPublicKey;i=await this.generateSharedKey(p,y)}const l=this.getSymKey(i),{type:d,senderPublicKey:f}=a;return Bm({type:d,symKey:l,message:c,senderPublicKey:f})},this.decode=async(i,s,o)=>{this.isInitialized();const a=Wm(s,o);if(th(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(i),l=zm({symKey:c,encoded:s});return Ps(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}},this.getPayloadType=i=>{const s=Vs(i);return Ni(s.type)},this.getPayloadSenderPublicKey=i=>{const s=Vs(i);return s.senderPublicKey?Ut(s.senderPublicKey,kt):void 0},this.core=e,this.logger=Re.generateChildLogger(r,this.name),this.keychain=n||new yb(this.core,this.logger)}get context(){return Re.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Kh)}catch{e=La(),await this.keychain.set(Kh,e)}return zv(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}},vb=class extends Qp{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=Yv,this.version=Jv,this.initialized=!1,this.storagePrefix=Hr,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=Kn(i);let o=this.messages.get(n);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(n,o),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),o=Kn(i);return typeof s[o]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Re.generateChildLogger(e,this.name),this.core=r}get context(){return Re.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,sh(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?oh(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}};class bb extends Xp{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new or.EventEmitter,this.name=Xv,this.queue=new Map,this.publishTimeout=ne.toMiliseconds(ne.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{const a=(s==null?void 0:s.ttl)||Qv,c=Ua(s),l=(s==null?void 0:s.prompt)||!1,d=(s==null?void 0:s.tag)||0,f=(s==null?void 0:s.id)||Sh().toString(),p={topic:n,message:i,opts:{ttl:a,relay:c,prompt:l,tag:d,id:f}},y=setTimeout(()=>this.queue.set(f,p),this.publishTimeout);try{await await Li(this.rpcPublish(n,i,a,c,l,d,f),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(f),this.relayer.events.emit(Tt.publish,p)}catch(v){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw this.removeRequestFromQueue(f),v;return}finally{clearTimeout(y)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(a){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(a),a}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=Re.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Re.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,s,o,a){var c,l,d,f;const p={method:Ks(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:o},id:a};return Ft((c=p.params)==null?void 0:c.prompt)&&((l=p.params)==null||delete l.prompt),Ft((d=p.params)==null?void 0:d.tag)&&((f=p.params)==null||delete f.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p}),this.relayer.request(p)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(qn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Tt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Tt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class _b{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Eb=Object.defineProperty,xb=Object.defineProperties,Sb=Object.getOwnPropertyDescriptors,Qh=Object.getOwnPropertySymbols,Cb=Object.prototype.hasOwnProperty,Db=Object.prototype.propertyIsEnumerable,Xh=(t,e,r)=>e in t?Eb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zi=(t,e)=>{for(var r in e||(e={}))Cb.call(e,r)&&Xh(t,r,e[r]);if(Qh)for(var r of Qh(e))Db.call(e,r)&&Xh(t,r,e[r]);return t},Ya=(t,e)=>xb(t,Sb(e));let Ib=class extends rg{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new _b,this.events=new or.EventEmitter,this.name=cb,this.version=lb,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Hr,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=Ua(i),o={topic:n,relay:s};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s);return this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,s)=>{const o=new ne.Watch;o.start(this.pendingSubscriptionWatchLabel);const a=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),i(!0)),o.elapsed(this.pendingSubscriptionWatchLabel)>=ub&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),s(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Re.generateChildLogger(r,this.name),this.clientId=""}get context(){return Re.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=Ua(n);await this.rpcUnsubscribe(e,r,i);const s=gt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){const n={method:Ks(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await Li(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Tt.connection_stalled)}return Kn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:Ks(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await Li(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Tt.connection_stalled)}}rpcUnsubscribe(e,r,n){const i={method:Ks(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,Ya(zi({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,zi({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,zi({},r)),this.topicMap.set(r.topic,e),this.events.emit(_r.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=Y("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(_r.deleted,Ya(zi({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(_r.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(_r.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=Y("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);Mi(r)&&this.onBatchSubscribe(r.map((n,i)=>Ya(zi({},e[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(qn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Tt.connect,async()=>{await this.onConnect()}),this.relayer.on(Tt.disconnect,()=>{this.onDisconnect()}),this.events.on(_r.created,async e=>{const r=_r.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(_r.deleted,async e=>{const r=_r.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}};var Ob=Object.defineProperty,ed=Object.getOwnPropertySymbols,Ab=Object.prototype.hasOwnProperty,$b=Object.prototype.propertyIsEnumerable,td=(t,e,r)=>e in t?Ob(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Tb=(t,e)=>{for(var r in e||(e={}))Ab.call(e,r)&&td(t,r,e[r]);if(ed)for(var r of ed(e))$b.call(e,r)&&td(t,r,e[r]);return t};let Nb=class extends eg{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new or.EventEmitter,this.name=tb,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(Tt.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(Tt.error,r)},this.registerProviderListeners=()=>{this.provider.on(Tr.payload,this.onPayloadHandler),this.provider.on(Tr.connect,this.onConnectHandler),this.provider.on(Tr.disconnect,this.onDisconnectHandler),this.provider.on(Tr.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Re.generateChildLogger(e.logger,this.name):Re.pino(Re.getDefaultLoggerOptions({level:e.logger||eb})),this.messages=new vb(this.logger,e.core),this.subscriber=new Ib(this,this.logger),this.publisher=new bb(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Gh,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Yh}...`),await this.restartTransport(Yh)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},sb)}get context(){return Re.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"";return i||(await Promise.all([new Promise(s=>{this.subscriber.once(_r.created,o=>{o.topic===e&&s()})}),new Promise(async s=>{i=await this.subscriber.subscribe(e,r),s()})]),i)}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await Li(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(_r.resubscribed,()=>{r()})}),new Promise(async(r,n)=>{try{await Li(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(i){n(i);return}r()})])}catch(r){this.logger.error(r);const n=r;if(!this.isConnectionStalled(n.message))throw r;this.provider.events.emit(Tr.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await yh())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new pw(new ww(ty({sdkVersion:ib,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Wa(e)){if(!e.method.endsWith(rb))return;const r=e.params,{topic:n,message:i,publishedAt:s}=r.data,o={topic:n,message:i,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Tb({type:"event",event:r.id},o)),this.events.emit(r.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else Js(e)&&this.events.emit(Tt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Tt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=za(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Tr.payload,this.onPayloadHandler),this.provider.off(Tr.connect,this.onConnectHandler),this.provider.off(Tr.disconnect,this.onDisconnectHandler),this.provider.off(Tr.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Tt.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let e=await yh();Ky(async r=>{this.initialized&&e!==r&&(e=r,r?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(n=>this.logger.error(n))))})}onProviderDisconnect(){this.events.emit(Tt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},ne.toMiliseconds(nb)))}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var Rb=Object.defineProperty,rd=Object.getOwnPropertySymbols,Pb=Object.prototype.hasOwnProperty,Lb=Object.prototype.propertyIsEnumerable,nd=(t,e,r)=>e in t?Rb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,id=(t,e)=>{for(var r in e||(e={}))Pb.call(e,r)&&nd(t,r,e[r]);if(rd)for(var r of rd(e))Lb.call(e,r)&&nd(t,r,e[r]);return t};let to=class extends tg{constructor(e,r,n,i=Hr,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=ob,this.cached=[],this.initialized=!1,this.storagePrefix=Hr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Ft(o)?this.map.set(this.getKey(o),o):Sy(o)?this.map.set(o.id,o):Cy(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>bw(a[c],o[c]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=id(id({},this.getData(o)),a);this.map.set(o,c),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),await this.persist())},this.logger=Re.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return Re.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=Y("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=Y("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}},Mb=class{constructor(e,r){this.core=e,this.logger=r,this.name=hb,this.version=db,this.events=new ta,this.initialized=!1,this.storagePrefix=Hr,this.ignoredPayloadTypes=[_n],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=La(),i=await this.core.crypto.setSymKey(n),s=ar(ne.FIVE_MINUTES),o={protocol:Zh},a={topic:i,expiry:s,relay:o,active:!1},c=py({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:o});return await this.pairings.set(i,a),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:c}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:s,relay:o}=hy(n.uri);if(this.pairings.keys.includes(i))throw new Error(`Pairing already exists: ${i}`);if(this.core.crypto.hasKeys(i))throw new Error(`Keychain already exists: ${i}`);const a=ar(ne.FIVE_MINUTES),c={topic:i,relay:o,expiry:a,active:!1};return await this.pairings.set(i,c),await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:o}),this.core.expirer.set(i,a),n.activatePairing&&await this.activate({topic:i}),c},this.activate=async({topic:n})=>{this.isInitialized();const i=ar(ne.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Zn();this.events.once(st("pairing_ping",s),({error:l})=>{l?c(l):a()}),await o()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",gt("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{const o=Fi(i,s),a=await this.core.crypto.encode(n,o),c=Bi[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id},this.sendResult=async(n,i,s)=>{const o=za(n,s),a=await this.core.crypto.encode(i,o),c=await this.core.history.get(i,n),l=Bi[c.request.method].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)},this.sendError=async(n,i,s)=>{const o=qa(n,s),a=await this.core.crypto.encode(i,o),c=await this.core.history.get(i,n),l=Bi[c.request.method]?Bi[c.request.method].res:Bi.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,gt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>Vr(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit("pairing_ping",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{$r(i)?this.events.emit(st("pairing_ping",s),{}):cr(i)&&this.events.emit(st("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit("pairing_delete",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=gt("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(gt("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!Ht(n)){const{message:i}=Y("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!xy(n.uri)){const{message:i}=Y("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!Ht(n)){const{message:s}=Y("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!Ht(n)){const{message:s}=Y("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!mt(n,!1)){const{message:i}=Y("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=Y("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(Vr(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=Y("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=Re.generateChildLogger(r,this.name),this.pairings=new to(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Re.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Tt.message,async e=>{const{topic:r,message:n}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);try{Wa(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):Js(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id))}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(rr.expired,async e=>{const{topic:r}=ch(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}},Ub=class extends Jp{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new or.EventEmitter,this.name=fb,this.version=pb,this.cached=[],this.initialized=!1,this.storagePrefix=Hr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:ar(ne.THIRTY_DAYS)};this.records.set(o.id,o),this.events.emit(Er.created,o)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=cr(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(Er.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(Er.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Re.generateChildLogger(r,this.name)}get context(){return Re.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:Fi(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=Y("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Er.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=Y("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Er.created,e=>{const r=Er.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Er.updated,e=>{const r=Er.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Er.deleted,e=>{const r=Er.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(qn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{ne.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}},kb=class extends ng{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new or.EventEmitter,this.name=gb,this.version=mb,this.cached=[],this.initialized=!1,this.storagePrefix=Hr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(rr.created,{target:s,expiration:o})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(rr.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Re.generateChildLogger(r,this.name)}get context(){return Re.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return ry(e);if(typeof e=="number")return ny(e);const{message:r}=Y("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(rr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=Y("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=Y("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;ne.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(rr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(qn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(rr.created,e=>{const r=rr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(rr.expired,e=>{const r=rr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(rr.deleted,e=>{const r=rr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}}},Fb=class extends ig{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=Ga,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async n=>{if(this.verifyDisabled||Hs()||!Ri())return;const i=(n==null?void 0:n.verifyUrl)||eo;this.verifyUrl!==i&&this.removeIframe(),this.verifyUrl=i;try{await this.createIframe()}catch(s){this.logger.warn(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.warn(s)}if(!this.initialized){this.removeIframe(),this.verifyUrl=Jh;try{await this.createIframe()}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s),this.verifyDisabled=!0}}},this.register=async n=>{this.initialized?this.sendPost(n.attestationId):(this.addToQueue(n.attestationId),await this.init())},this.resolve=async n=>{if(this.isDevEnv)return"";const i=(n==null?void 0:n.verifyUrl)||eo;let s="";try{s=await this.fetchAttestation(n.attestationId,i)}catch(o){this.logger.warn(`failed to resolve attestation: ${n.attestationId} from url: ${i}`),this.logger.warn(o),s=await this.fetchAttestation(n.attestationId,Jh)}return s},this.fetchAttestation=async(n,i)=>{var s;this.logger.info(`resolving attestation: ${n} from url: ${i}`);const o=this.startAbortTimer(ne.ONE_SECOND*2),a=await fetch(`${i}/attestation/${n}`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?(s=await a.json())==null?void 0:s.origin:""},this.addToQueue=n=>{this.queue.push(n)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(n=>this.sendPost(n)),this.queue=[])},this.sendPost=n=>{var i;try{if(!this.iframe)return;(i=this.iframe.contentWindow)==null||i.postMessage(n,"*"),this.logger.info(`postMessage sent: ${n} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let n;const i=s=>{s.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",i),n())};await Promise.race([new Promise(s=>{if(document.getElementById(Ga))return s();window.addEventListener("message",i);const o=document.createElement("iframe");o.id=Ga,o.src=`${this.verifyUrl}/${this.projectId}`,o.style.display="none",document.body.append(o),this.iframe=o,n=s}),new Promise((s,o)=>setTimeout(()=>{window.removeEventListener("message",i),o("verify iframe load timeout")},ne.toMiliseconds(ne.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=Re.generateChildLogger(r,this.name),this.verifyUrl=eo,this.abortController=new AbortController,this.isDevEnv=Ma()&&process.env.IS_VITEST}get context(){return Re.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ne.toMiliseconds(e))}};var jb=Object.defineProperty,sd=Object.getOwnPropertySymbols,Bb=Object.prototype.hasOwnProperty,zb=Object.prototype.propertyIsEnumerable,od=(t,e,r)=>e in t?jb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ad=(t,e)=>{for(var r in e||(e={}))Bb.call(e,r)&&od(t,r,e[r]);if(sd)for(var r of sd(e))zb.call(e,r)&&od(t,r,e[r]);return t};const qb=class u0 extends Yp{constructor(e){super(e),this.protocol=Hh,this.version=qv,this.name=Za,this.events=new or.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Gh;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Re.pino(Re.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Wv.logger}));this.logger=Re.generateChildLogger(r,this.name),this.heartbeat=new qn.HeartBeat,this.crypto=new wb(this,this.logger,e==null?void 0:e.keychain),this.history=new Ub(this,this.logger),this.expirer=new kb(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new gp(ad(ad({},Vv),e==null?void 0:e.storageOptions)),this.relayer=new Nb({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Mb(this,this.logger),this.verify=new Fb(this.projectId||"",this.logger)}static async init(e){const r=new u0(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(ab,n),r}get context(){return Re.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}},cd="wc",ld=2,ud="client",Ja=`${cd}@${ld}:${ud}:`,Qa={name:ud,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},hd="WALLETCONNECT_DEEPLINK_CHOICE",Wb="proposal",Vb="Proposal expired",Hb="session",ro=ne.SEVEN_DAYS,Kb="engine",qi={wc_sessionPropose:{req:{ttl:ne.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ne.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ne.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ne.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ne.THIRTY_SECONDS,prompt:!1,tag:1115}}},Xa={min:ne.FIVE_MINUTES,max:ne.SEVEN_DAYS},Nr={idle:"IDLE",active:"ACTIVE"},Zb="request",Gb=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var Yb=Object.defineProperty,Jb=Object.defineProperties,Qb=Object.getOwnPropertyDescriptors,dd=Object.getOwnPropertySymbols,Xb=Object.prototype.hasOwnProperty,e2=Object.prototype.propertyIsEnumerable,fd=(t,e,r)=>e in t?Yb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Kt=(t,e)=>{for(var r in e||(e={}))Xb.call(e,r)&&fd(t,r,e[r]);if(dd)for(var r of dd(e))e2.call(e,r)&&fd(t,r,e[r]);return t},Wi=(t,e)=>Jb(t,Qb(e));class t2 extends og{constructor(e){super(e),this.name=Kb,this.events=new ta,this.initialized=!1,this.ignoredPayloadTypes=[_n],this.requestQueue={state:Nr.idle,queue:[]},this.sessionRequestQueue={state:Nr.idle,queue:[]},this.requestQueueDelay=ne.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(qi)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ne.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const n=Wi(Kt({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:c}=n;let l=i,d,f=!1;if(l&&(f=this.client.core.pairing.pairings.get(l).active),!l||!f){const{topic:S,uri:w}=await this.client.core.pairing.create();l=S,d=w}const p=await this.client.core.crypto.generateKeyPair(),y=Kt({requiredNamespaces:s,optionalNamespaces:o,relays:c??[{protocol:Zh}],proposer:{publicKey:p,metadata:this.client.metadata}},a&&{sessionProperties:a}),{reject:v,resolve:x,done:O}=Zn(ne.FIVE_MINUTES,Vb);if(this.events.once(st("session_connect"),async({error:S,session:w})=>{if(S)v(S);else if(w){w.self.publicKey=p;const E=Wi(Kt({},w),{requiredNamespaces:w.requiredNamespaces,optionalNamespaces:w.optionalNamespaces});await this.client.session.set(w.topic,E),await this.setExpiry(w.topic,w.expiry),l&&await this.client.core.pairing.updateMetadata({topic:l,metadata:w.peer.metadata}),x(E)}}),!l){const{message:S}=Y("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(S)}const D=await this.sendRequest({topic:l,method:"wc_sessionPropose",params:y}),_=ar(ne.FIVE_MINUTES);return await this.setProposal(D,Kt({id:D,expiry:_},y)),{uri:d,approval:O}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:i,namespaces:s,sessionProperties:o}=r,a=this.client.proposal.get(n);let{pairingTopic:c,proposer:l,requiredNamespaces:d,optionalNamespaces:f}=a;c=c||"",Ui(d)||(d=wy(s,"approve()"));const p=await this.client.core.crypto.generateKeyPair(),y=l.publicKey,v=await this.client.core.crypto.generateSharedKey(p,y);c&&n&&(await this.client.core.pairing.updateMetadata({topic:c,metadata:l.metadata}),await this.sendResult({id:n,topic:c,result:{relay:{protocol:i??"irn"},responderPublicKey:p}}),await this.client.proposal.delete(n,gt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:c}));const x=Kt({relay:{protocol:i??"irn"},namespaces:s,requiredNamespaces:d,optionalNamespaces:f,pairingTopic:c,controller:{publicKey:p,metadata:this.client.metadata},expiry:ar(ro)},o&&{sessionProperties:o});await this.client.core.relayer.subscribe(v),await this.sendRequest({topic:v,method:"wc_sessionSettle",params:x,throwOnFailedPublish:!0});const O=Wi(Kt({},x),{topic:v,pairingTopic:c,acknowledged:!1,self:x.controller,peer:{publicKey:l.publicKey,metadata:l.metadata},controller:p});return await this.client.session.set(v,O),await this.setExpiry(v,ar(ro)),{topic:v,acknowledged:()=>new Promise(D=>setTimeout(()=>D(this.client.session.get(v)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:n,reason:i}=r,{pairingTopic:s}=this.client.proposal.get(n);s&&(await this.sendError(n,s,i),await this.client.proposal.delete(n,gt("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:i}=r,s=await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i}}),{done:o,resolve:a,reject:c}=Zn();return this.events.once(st("session_update",s),({error:l})=>{l?c(l):a()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:o}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,i=await this.sendRequest({topic:n,method:"wc_sessionExtend",params:{}}),{done:s,resolve:o,reject:a}=Zn();return this.events.once(st("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,ar(ro)),{acknowledged:s}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:i,topic:s,expiry:o}=r,a=Ba(),{done:c,resolve:l,reject:d}=Zn(o);return this.events.once(st("session_request",a),({error:f,result:p})=>{f?d(f):l(p)}),await Promise.all([new Promise(async f=>{await this.sendRequest({clientRpcId:a,topic:s,method:"wc_sessionRequest",params:{request:i,chainId:n},expiry:o,throwOnFailedPublish:!0}).catch(p=>d(p)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:a}),f()}),new Promise(async f=>{const p=await this.client.core.storage.getItem(hd);iy({id:a,topic:s,wcDeepLink:p}),f()}),c()]).then(f=>f[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i;$r(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0}):cr(i)&&await this.sendError(s,n,i.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=await this.sendRequest({topic:n,method:"wc_sessionPing",params:{}}),{done:s,resolve:o,reject:a}=Zn();this.events.once(st("session_ping",i),({error:c})=>{c?a(c):o()}),await s()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r;await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;this.client.session.keys.includes(n)?(await this.sendRequest({topic:n,method:"wc_sessionDelete",params:gt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>_y(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(r,n)=>{const{self:i}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,gt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(i.publicKey)&&await this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r),this.client.core.storage.removeItem(hd).catch(s=>this.client.logger.warn(s))},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,gt("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=Nr.idle)},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{const n=qi.wc_sessionRequest.req.ttl,{id:i,topic:s,params:o}=r;await this.client.pendingRequest.set(i,{id:i,topic:s,params:o}),n&&this.client.core.expirer.set(i,ar(n))},this.sendRequest=async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l}=r,d=Fi(i,s,c);if(Ri()&&Gb.includes(i)){const y=Kn(JSON.stringify(d));this.client.core.verify.register({attestationId:y})}const f=await this.client.core.crypto.encode(n,d),p=qi[i].req;return o&&(p.ttl=o),a&&(p.id=a),this.client.core.history.set(n,d),l?(p.internal=Wi(Kt({},p.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,f,p)):this.client.core.relayer.publish(n,f,p).catch(y=>this.client.logger.error(y)),d.id},this.sendResult=async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o}=r,a=za(n,s),c=await this.client.core.crypto.encode(i,a),l=await this.client.core.history.get(i,n),d=qi[l.request.method].res;o?(d.internal=Wi(Kt({},d.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,c,d)):this.client.core.relayer.publish(i,c,d).catch(f=>this.client.logger.error(f)),await this.client.core.history.resolve(a)},this.sendError=async(r,n,i)=>{const s=qa(r,i),o=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,r),c=qi[a.request.method].res;this.client.core.relayer.publish(n,o,c),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{Vr(i.expiry)&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Vr(i.expiry)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession(i)),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Nr.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Nr.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(n=>setTimeout(n,300))}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=Nr.idle},this.processRequest=r=>{const{topic:n,payload:i}=r,s=i.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i}=r,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:i}=Y("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.onSessionProposeRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidConnect(Kt({},n.params));const o=ar(ne.FIVE_MINUTES),a=Kt({id:s,pairingTopic:r,expiry:o},i);await this.setProposal(s,a);const c=Kn(JSON.stringify(n)),l=await this.getVerifyContext(c,a.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:a,verifyContext:l})}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.onSessionProposeResponse=async(r,n)=>{const{id:i}=n;if($r(n)){const{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const o=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const a=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});const c=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:c});const l=await this.client.core.crypto.generateSharedKey(a,c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:l});const d=await this.client.core.relayer.subscribe(l);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else cr(n)&&(await this.client.proposal.delete(i,gt("USER_DISCONNECTED")),this.events.emit(st("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:l,requiredNamespaces:d,optionalNamespaces:f,sessionProperties:p,pairingTopic:y}=n.params,v=Kt({topic:r,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:y,requiredNamespaces:d,optionalNamespaces:f,controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},p&&{sessionProperties:p});await this.sendResult({id:n.id,topic:r,result:!0}),this.events.emit(st("session_connect"),{session:v}),this.cleanupDuplicatePairings(v)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;$r(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(st("session_approve",i),{})):cr(n)&&(await this.client.session.delete(r,gt("USER_DISCONNECTED")),this.events.emit(st("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=Ys.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidUpdate(Kt({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0}),this.client.events.emit("session_update",{id:s,topic:r,params:i}),Ys.set(o,s)}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.isRequestOutOfSync=(r,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n;$r(n)?this.events.emit(st("session_update",i),{}):cr(n)&&this.events.emit(st("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,ar(ro)),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n;$r(n)?this.events.emit(st("session_extend",i),{}):cr(n)&&this.events.emit(st("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n;setTimeout(()=>{$r(n)?this.events.emit(st("session_ping",i),{}):cr(n)&&this.events.emit(st("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(Tt.publish,async()=>{s(await this.deleteSession(r))})}),this.sendResult({id:i,topic:r,result:!0})]),this.client.events.emit("session_delete",{id:i,topic:r})}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidRequest(Kt({topic:r},s)),await this.setPendingSessionRequest({id:i,topic:r,params:s}),this.addSessionRequestToSessionRequestQueue({id:i,topic:r,params:s}),await this.processSessionRequestQueue()}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n;$r(n)?this.events.emit(st("session_request",i),{result:n.result}):cr(n)&&this.events.emit(st("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=Ys.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(Kt({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),Ys.set(o,i)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Nr.idle,this.processSessionRequestQueue()},ne.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=async()=>{if(this.sessionRequestQueue.state===Nr.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{const{id:n,topic:i,params:s}=r,o=Kn(JSON.stringify(Fi("wc_sessionRequest",s,n))),a=this.client.session.get(i),c=await this.getVerifyContext(o,a.peer.metadata);this.sessionRequestQueue.state=Nr.active,this.client.events.emit("session_request",{id:n,topic:i,params:s,verifyContext:c})}catch(n){this.client.logger.error(n)}},this.isValidConnect=async r=>{if(!Ht(r)){const{message:c}=Y("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(c)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(Ft(n)||await this.isValidPairingTopic(n),!Ry(a,!0)){const{message:c}=Y("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(c)}!Ft(i)&&Ui(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!Ft(s)&&Ui(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),Ft(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=Ny(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!Ht(r))throw new Error(Y("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o}=r;await this.isValidProposalId(n);const a=this.client.proposal.get(n),c=Gs(i,"approve()");if(c)throw new Error(c.message);const l=gh(a.requiredNamespaces,i,"approve()");if(l)throw new Error(l.message);if(!mt(s,!0)){const{message:d}=Y("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}Ft(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!Ht(r)){const{message:s}=Y("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(await this.isValidProposalId(n),!Ly(i)){const{message:s}=Y("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!Ht(r)){const{message:l}=Y("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(l)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!fh(n)){const{message:l}=Y("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=Dy(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Gs(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Vr(o)){const{message:l}=Y("EXPIRED","onSessionSettleRequest()");throw new Error(l)}},this.isValidUpdate=async r=>{if(!Ht(r)){const{message:c}=Y("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=Gs(i,"update()");if(o)throw new Error(o.message);const a=gh(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!Ht(r)){const{message:i}=Y("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!Ht(r)){const{message:c}=Y("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:i,chainId:s,expiry:o}=r;await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!ph(a,s)){const{message:c}=Y("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!My(i)){const{message:c}=Y("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!Fy(a,s,i.method)){const{message:c}=Y("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!qy(o,Xa)){const{message:c}=Y("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Xa.min} and ${Xa.max}`);throw new Error(c)}},this.isValidRespond=async r=>{if(!Ht(r)){const{message:s}=Y("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(s)}const{topic:n,response:i}=r;if(await this.isValidSessionTopic(n),!Uy(i)){const{message:s}=Y("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidPing=async r=>{if(!Ht(r)){const{message:i}=Y("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!Ht(r)){const{message:a}=Y("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!ph(o,s)){const{message:a}=Y("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!ky(i)){const{message:a}=Y("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!jy(o,s,i.name)){const{message:a}=Y("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!Ht(r)){const{message:i}=Y("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(r,n)=>{const i={verified:{verifyUrl:n.verifyUrl||eo,validation:"UNKNOWN",origin:n.url||""}};try{const s=await this.client.core.verify.resolve({attestationId:r,verifyUrl:n.verifyUrl});s&&(i.verified.origin=s,i.verified.validation=s===new URL(n.url).origin?"VALID":"INVALID")}catch(s){this.client.logger.error(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!mt(i,!1)){const{message:s}=Y("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}}async isInitialized(){if(!this.initialized){const{message:e}=Y("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Tt.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(r,n);try{Wa(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):Js(i)?(await this.client.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.client.core.history.delete(r,i.id)):this.onRelayEventUnknownPayload({topic:r,payload:i})}catch(s){this.client.logger.error(s)}})}registerExpirerEvents(){this.client.core.expirer.on(rr.expired,async e=>{const{topic:r,id:n}=ch(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,Y("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(e){if(!mt(e,!1)){const{message:r}=Y("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=Y("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Vr(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=Y("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!mt(e,!1)){const{message:r}=Y("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=Y("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Vr(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=Y("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(mt(e,!1)){const{message:r}=Y("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=Y("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!Py(e)){const{message:r}=Y("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=Y("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Vr(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=Y("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class r2 extends to{constructor(e,r){super(e,r,Wb,Ja),this.core=e,this.logger=r}}class n2 extends to{constructor(e,r){super(e,r,Hb,Ja),this.core=e,this.logger=r}}class i2 extends to{constructor(e,r){super(e,r,Zb,Ja,n=>n.id),this.core=e,this.logger=r}}let s2=class h0 extends sg{constructor(e){super(e),this.protocol=cd,this.version=ld,this.name=Qa.name,this.events=new or.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(e==null?void 0:e.name)||Qa.name,this.metadata=(e==null?void 0:e.metadata)||Jm();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Re.pino(Re.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Qa.logger}));this.core=(e==null?void 0:e.core)||new qb(e),this.logger=Re.generateChildLogger(r,this.name),this.session=new n2(this.core,this.logger),this.proposal=new r2(this.core,this.logger),this.pendingRequest=new i2(this.core,this.logger),this.engine=new t2(this)}static async init(e){const r=new h0(e);return await r.initialize(),r}get context(){return Re.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var o2=Object.defineProperty,a2=Object.defineProperties,c2=Object.getOwnPropertyDescriptors,pd=Object.getOwnPropertySymbols,l2=Object.prototype.hasOwnProperty,u2=Object.prototype.propertyIsEnumerable,gd=(t,e,r)=>e in t?o2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,h2=(t,e)=>{for(var r in e||(e={}))l2.call(e,r)&&gd(t,r,e[r]);if(pd)for(var r of pd(e))u2.call(e,r)&&gd(t,r,e[r]);return t},d2=(t,e)=>a2(t,c2(e)),ec=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Ke=(t,e,r)=>(ec(t,e,"read from private field"),r?r.call(t):e.get(t)),xn=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},no=(t,e,r,n)=>(ec(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Nt=(t,e,r)=>(ec(t,e,"access private method"),r),Sn,Yn,Vi,yt,tc,md,Rt,jt,rc,yd;let f2=class{constructor(e){xn(this,tc),xn(this,Rt),xn(this,rc),xn(this,Sn,void 0),xn(this,Yn,void 0),xn(this,Vi,void 0),xn(this,yt,void 0),no(this,Sn,e),no(this,Yn,Nt(this,tc,md).call(this)),Nt(this,Rt,jt).call(this)}async connect(e){const{requiredNamespaces:r,optionalNamespaces:n}=e;return new Promise(async(i,s)=>{await Nt(this,Rt,jt).call(this);const o=Ke(this,Yn).subscribeModal(l=>{l.open||(o(),s(new Error("Modal closed")))}),{uri:a,approval:c}=await Ke(this,yt).connect(e);if(a){const l=new Set;r&&Object.values(r).forEach(({chains:d})=>{d&&d.forEach(f=>l.add(f))}),n&&Object.values(n).forEach(({chains:d})=>{d&&d.forEach(f=>l.add(f))}),await Ke(this,Yn).openModal({uri:a,chains:Array.from(l)})}try{const l=await c();i(l)}catch(l){s(l)}finally{o(),Ke(this,Yn).closeModal()}})}async disconnect(e){await Nt(this,Rt,jt).call(this),await Ke(this,yt).disconnect(e)}async request(e){return await Nt(this,Rt,jt).call(this),await Ke(this,yt).request(e)}async getSessions(){return await Nt(this,Rt,jt).call(this),Ke(this,yt).session.getAll()}async getSession(){return await Nt(this,Rt,jt).call(this),Ke(this,yt).session.getAll().at(-1)}async onSessionEvent(e){await Nt(this,Rt,jt).call(this),Ke(this,yt).on("session_event",e)}async offSessionEvent(e){await Nt(this,Rt,jt).call(this),Ke(this,yt).off("session_event",e)}async onSessionUpdate(e){await Nt(this,Rt,jt).call(this),Ke(this,yt).on("session_update",e)}async offSessionUpdate(e){await Nt(this,Rt,jt).call(this),Ke(this,yt).off("session_update",e)}async onSessionDelete(e){await Nt(this,Rt,jt).call(this),Ke(this,yt).on("session_delete",e)}async offSessionDelete(e){await Nt(this,Rt,jt).call(this),Ke(this,yt).off("session_delete",e)}async onSessionExpire(e){await Nt(this,Rt,jt).call(this),Ke(this,yt).on("session_expire",e)}async offSessionExpire(e){await Nt(this,Rt,jt).call(this),Ke(this,yt).off("session_expire",e)}};Sn=new WeakMap,Yn=new WeakMap,Vi=new WeakMap,yt=new WeakMap,tc=new WeakSet,md=function(){const{modalOptions:t,projectId:e}=Ke(this,Sn);return new T0(d2(h2({},t),{projectId:e}))},Rt=new WeakSet,jt=async function(){return Ke(this,yt)?!0:(!Ke(this,Vi)&&typeof window<"u"&&no(this,Vi,Nt(this,rc,yd).call(this)),Ke(this,Vi))},rc=new WeakSet,yd=async function(){no(this,yt,await s2.init({metadata:Ke(this,Sn).metadata,projectId:Ke(this,Sn).projectId,relayUrl:Ke(this,Sn).relayUrl}));const t=await Ke(this,yt).core.crypto.getClientId();try{localStorage.setItem("WCM_WALLETCONNECT_CLIENT_ID",t)}catch{console.info("Unable to set client id")}};const nc=["decrypt","disconnect","getSelectedAccount","getBalance","getRecords","requestCreateEvent","getEvent","getEvents","createSharedState","importSharedState","requestSignature"],io=["aleo:1"],ic=["chainChanged","accountSelected","selectedAccountSynced","sharedAccountSynced"],wd="f0aaeffe71b636da453fce042d79d723",vd={standaloneChains:io,enableExplorer:!1,enableAccountView:!0,enableNetworkView:!0,enableStandaloneMode:!0,mobileWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"puzzleapp://",universal:""}}],desktopWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"",universal:"https://walletconnect.puzzle.online/"}},{id:"avail",name:"Avail Wallet",links:{native:"avail://",universal:"https://avail.global"}}],walletImages:{puzzle:"https://i.imgur.com/p9tHaFC.png",avail:"https://i.imgur.com/GxNn8BO.png"}},p2={requiredNamespaces:{aleo:{methods:nc,chains:io,events:ic}}},bd={name:"@puzzlehq/sdk-core",displayName:"Puzzle SDK",version:"0.2.18",description:"Your portal to privacy",main:"./dist/puzzle.cjs.js",module:"./dist/puzzle.es.js",browser:"./dist/puzzle.umd.js",types:"./dist/types/index.d.ts",private:!1,exports:{".":{import:"./dist/puzzle.es.js",require:"./dist/puzzle.cjs.js",browser:"./dist/puzzle.umd.js",types:"./dist/types/index.d.ts"}},type:"module",scripts:{"fetch-fix":"find dist -type f \\( -name '*.js' -o -name '*.cjs' \\) -exec sed -i '' 's/self.fetch[[:space:]]*||/fetch ||/g' {} \\;","ws-fix":`find ./dist -type f -name 'index*' -exec sed -i '' -e 's/require(\\"ws\\")/(() => {try { return require(\\"ws\\") } catch (e) { } })()/g' {} +;`,build:"vite build && tsc --declaration --emitDeclarationOnly --outDir dist/types && pnpm fetch-fix && pnpm ws-fix","type-check":"tsc --noEmit"},repository:{type:"git",url:"git+https://github.com/puzzlehq/puzzle-sdk.git"},dependencies:{"@puzzlehq/types":"1.0.11","@walletconnect/modal-sign-html":"^2.6.2","@walletconnect/types":"^2.11.2","@walletconnect/utils":"^2.11.2",debug:"^4.3.4",events:"^3.3.0"},peerDependencies:{buffer:"^6.0.3"},keywords:["puzzle","html","aleo","web3","crypto"],author:"Puzzle",license:"ISC",bugs:{url:"https://github.com/puzzlehq/puzzle-sdk/issues"},homepage:"https://github.com/puzzlehq/puzzle-sdk#readme"},g2={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function _d(t,e){const{message:r,code:n}=g2[t];return{message:e?`${r} ${e}`:r,code:n}}const sc=new ta;let Jn;async function m2(t){let e=!1;const r=bd.version,n=localStorage.getItem("puzzle_sdk_version");if(r!==n&&(console.log(`${bd.name}: Updated from `+n+" to "+r+"!"),localStorage.setItem("puzzle_sdk_version",r),e=!0),Jn=new f2({projectId:wd,metadata:{name:t.dAppName,description:t.dAppDescription,url:t.dAppUrl,icons:[t.dAppIconURL]},modalOptions:{...vd}}),e)try{y2(Jn,t.onDisconnect)}catch(i){console.error(i)}window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")}async function y2(t,e){const r=await(t==null?void 0:t.getSession());r&&(console.log("Disconnecting session",r),e&&e(),t.disconnect({topic:r.topic,reason:_d("USER_DISCONNECTED")}))}async function Qt(){return new Promise(t=>{if(Jn)t(Jn);else{const e=setInterval(()=>{Jn&&(clearInterval(e),t(Jn))},200)}window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")})}const w2=async()=>{const t=await Qt(),e=await t.getSession();if(!e||!t)return{error:"no session or connection"};try{return await t.request({topic:e.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getSelectedAccount"}})}catch(r){const n=r.message;return console.error("getAccount error",n),{error:n}}},v2=async({address:t})=>{const e=await Qt(),r=await e.getSession();if(!r||!e)return{error:"no session or connection"};try{return await e.request({topic:r.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getBalance",params:{assetId:void 0,address:t}}})}catch(n){const i=n.message;return console.error("getBalance error",i),{error:i}}},b2=async()=>{const t=await Qt();if(!t)throw new Error("call setConnection() first!");const e=await t.getSession();if(e)return console.log("Already connected!",e),e;try{const r=await t.connect({requiredNamespaces:{aleo:{methods:nc,chains:io,events:ic}}});return sc.emit("session_change"),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE"),r}catch(r){console.error("connect error",r.message)}},_2=async t=>{const e=await Qt(),r=await(e==null?void 0:e.getSession());if(!r||!e)return{error:"no session or connection"};const n=t==null?void 0:t.inputs.map(i=>typeof i=="string"?i:i.plaintext);try{return await e.request({topic:r.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"requestCreateEvent",params:{...t,inputs:n}}})}catch(i){const s=i.message;return console.error("createEvent error",s),{error:s}}},E2=async()=>{const t=await Qt(),e=await(t==null?void 0:t.getSession());if(!e||!t)return{error:"no session or connection"};try{return await t.request({topic:e.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"createSharedState",params:{}}})}catch(r){const n=r.message;return console.error("createSharedState error",n),{error:n}}},x2=async t=>{const e=await Qt(),r=await(e==null?void 0:e.getSession());if(!r||!e)return{error:"no session or connection"};try{return await e.request({topic:r.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"decrypt",params:{ciphertexts:t}}})}catch(n){return console.error("decrypt error",n.message),{error:n.message}}},S2=async()=>{const t=await Qt(),e=await(t==null?void 0:t.getSession());if(!e||!t)return{error:"no session or connection"};try{try{await t.disconnect({reason:_d("USER_DISCONNECTED"),topic:e.topic}),sc.emit("session_change")}catch(r){console.warn(r)}return{}}catch(r){const n=r.message;return console.error("error disconnecting",n),{error:n}}},C2=async({id:t,address:e})=>{const r=await Qt(),n=await(r==null?void 0:r.getSession());if(!n||!r)return{event:void 0,error:"no session or connection"};const i=async()=>await r.request({topic:n.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getEvent",params:{id:t,address:e}}});try{return await i()}catch(s){const o=s.message;return console.error("getEvents error",o),{error:o}}},D2=async t=>{const e=await Qt(),r=await(e==null?void 0:e.getSession());if(!r||!e)return{events:void 0,error:"no session or connection"};(t==null?void 0:t.programId)===""&&(t.programId=void 0);const n=async(i=0)=>await e.request({topic:r.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getEvents",params:{filter:t,page:i}}});try{return await n()}catch(i){const s=i.message;return console.error("getEvents error",s),{error:s}}},I2=async t=>{const e=await Qt(),r=await(e==null?void 0:e.getSession());if(!r||!e)return{error:"no session or connection"};try{return await e.request({topic:r.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"importSharedState",params:{seed:t}}})}catch(n){const i=n.message;return console.error("importSharedState error",i),{error:i}}},O2=async({address:t,filter:e,page:r=0})=>{const n=await Qt(),i=await(n==null?void 0:n.getSession());if(!i||!n)return{error:"no session or connection"};const s=async(o=0)=>await n.request({topic:i.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getRecords",params:{address:t,filter:e,page:o}}});try{return await s()}catch(o){const a=o.message;return console.error("getRecords error",a),{error:a}}};var Me;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=n,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Me||(Me={}));var oc;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(oc||(oc={}));const J=Me.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Kr=t=>{switch(typeof t){case"undefined":return J.undefined;case"string":return J.string;case"number":return isNaN(t)?J.nan:J.number;case"boolean":return J.boolean;case"function":return J.function;case"bigint":return J.bigint;case"symbol":return J.symbol;case"object":return Array.isArray(t)?J.array:t===null?J.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?J.promise:typeof Map<"u"&&t instanceof Map?J.map:typeof Set<"u"&&t instanceof Set?J.set:typeof Date<"u"&&t instanceof Date?J.date:J.object;default:return J.unknown}},V=Me.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),A2=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class lr extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(s){return s.message},n={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(r(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Me.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}lr.create=t=>new lr(t);const Hi=(t,e)=>{let r;switch(t.code){case V.invalid_type:t.received===J.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case V.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Me.jsonStringifyReplacer)}`;break;case V.unrecognized_keys:r=`Unrecognized key(s) in object: ${Me.joinValues(t.keys,", ")}`;break;case V.invalid_union:r="Invalid input";break;case V.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Me.joinValues(t.options)}`;break;case V.invalid_enum_value:r=`Invalid enum value. Expected ${Me.joinValues(t.options)}, received '${t.received}'`;break;case V.invalid_arguments:r="Invalid function arguments";break;case V.invalid_return_type:r="Invalid function return type";break;case V.invalid_date:r="Invalid date";break;case V.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Me.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case V.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case V.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case V.custom:r="Invalid input";break;case V.invalid_intersection_types:r="Intersection results could not be merged";break;case V.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case V.not_finite:r="Number must be finite";break;default:r=e.defaultError,Me.assertNever(t)}return{message:r}};let Ed=Hi;function $2(t){Ed=t}function so(){return Ed}const oo=t=>{const{data:e,path:r,errorMaps:n,issueData:i}=t,s=[...r,...i.path||[]],o={...i,path:s};let a="";const c=n.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...i,path:s,message:i.message||a}},T2=[];function X(t,e){const r=oo({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,so(),Hi].filter(n=>!!n)});t.common.issues.push(r)}class Pt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if(i.status==="aborted")return le;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const i of r)n.push({key:await i.key,value:await i.value});return Pt.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return le;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),(typeof o.value<"u"||i.alwaysSet)&&(n[s.value]=o.value)}return{status:e.value,value:n}}}const le=Object.freeze({status:"aborted"}),xd=t=>({status:"dirty",value:t}),Bt=t=>({status:"valid",value:t}),ac=t=>t.status==="aborted",cc=t=>t.status==="dirty",ao=t=>t.status==="valid",co=t=>typeof Promise<"u"&&t instanceof Promise;var se;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(se||(se={}));class xr{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Sd=(t,e)=>{if(ao(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new lr(t.common.issues);return this._error=r,this._error}}};function ge(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:i}}class ve{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Kr(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Kr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Pt,ctx:{common:e.parent.common,data:e.data,parsedType:Kr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(co(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Kr(e)},s=this._parseSync({data:e,path:i.path,parent:i});return Sd(i,s)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Kr(e)},i=this._parse({data:e,path:n.path,parent:n}),s=await(co(i)?i:Promise.resolve(i));return Sd(n,s)}refine(e,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:V.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new dr({schema:this,typeName:oe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Pr.create(this,this._def)}nullable(){return On.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return hr.create(this,this._def)}promise(){return ti.create(this,this._def)}or(e){return Yi.create([this,e],this._def)}and(e){return Ji.create(this,e,this._def)}transform(e){return new dr({...ge(this._def),schema:this,typeName:oe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new rs({...ge(this._def),innerType:this,defaultValue:r,typeName:oe.ZodDefault})}brand(){return new Dd({typeName:oe.ZodBranded,type:this,...ge(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new go({...ge(this._def),innerType:this,catchValue:r,typeName:oe.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return ns.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const N2=/^c[^\s-]{8,}$/i,R2=/^[a-z][a-z0-9]*$/,P2=/[0-9A-HJKMNP-TV-Z]{26}/,L2=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,M2=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,U2=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u"),k2=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,F2=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,j2=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function B2(t,e){return!!((e==="v4"||!e)&&k2.test(t)||(e==="v6"||!e)&&F2.test(t))}class ur extends ve{constructor(){super(...arguments),this._regex=(e,r,n)=>this.refinement(i=>e.test(i),{validation:r,code:V.invalid_string,...se.errToObj(n)}),this.nonempty=e=>this.min(1,se.errToObj(e)),this.trim=()=>new ur({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new ur({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new ur({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==J.string){const s=this._getOrReturnCtx(e);return X(s,{code:V.invalid_type,expected:J.string,received:s.parsedType}),le}const n=new Pt;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:V.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:V.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?X(i,{code:V.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&X(i,{code:V.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")M2.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"email",code:V.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")U2.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"emoji",code:V.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")L2.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"uuid",code:V.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")N2.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid",code:V.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")R2.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid2",code:V.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")P2.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ulid",code:V.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),X(i,{validation:"url",code:V.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"regex",code:V.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),X(i,{code:V.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:V.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:V.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?j2(s).test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:V.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="ip"?B2(e.data,s.version)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ip",code:V.invalid_string,message:s.message}),n.dirty()):Me.assertNever(s);return{status:n.value,value:e.data}}_addCheck(e){return new ur({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...se.errToObj(e)})}url(e){return this._addCheck({kind:"url",...se.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...se.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...se.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...se.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...se.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...se.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...se.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,...se.errToObj(e==null?void 0:e.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...se.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...se.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...se.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...se.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...se.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...se.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...se.errToObj(r)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}ur.create=t=>{var e;return new ur({checks:[],typeName:oe.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ge(t)})};function z2(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class Zr extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==J.number){const s=this._getOrReturnCtx(e);return X(s,{code:V.invalid_type,expected:J.number,received:s.parsedType}),le}let n;const i=new Pt;for(const s of this._def.checks)s.kind==="int"?Me.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),X(n,{code:V.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:V.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:V.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?z2(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),X(n,{code:V.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),X(n,{code:V.not_finite,message:s.message}),i.dirty()):Me.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,se.toString(r))}gt(e,r){return this.setLimit("min",e,!1,se.toString(r))}lte(e,r){return this.setLimit("max",e,!0,se.toString(r))}lt(e,r){return this.setLimit("max",e,!1,se.toString(r))}setLimit(e,r,n,i){return new Zr({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:se.toString(i)}]})}_addCheck(e){return new Zr({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:se.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:se.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:se.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:se.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:se.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:se.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Me.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}Zr.create=t=>new Zr({checks:[],typeName:oe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...ge(t)});class Gr extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==J.bigint){const s=this._getOrReturnCtx(e);return X(s,{code:V.invalid_type,expected:J.bigint,received:s.parsedType}),le}let n;const i=new Pt;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:V.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:V.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),X(n,{code:V.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Me.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,se.toString(r))}gt(e,r){return this.setLimit("min",e,!1,se.toString(r))}lte(e,r){return this.setLimit("max",e,!0,se.toString(r))}lt(e,r){return this.setLimit("max",e,!1,se.toString(r))}setLimit(e,r,n,i){return new Gr({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:se.toString(i)}]})}_addCheck(e){return new Gr({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:se.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:se.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Gr.create=t=>{var e;return new Gr({checks:[],typeName:oe.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ge(t)})};class Ki extends ve{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==J.boolean){const n=this._getOrReturnCtx(e);return X(n,{code:V.invalid_type,expected:J.boolean,received:n.parsedType}),le}return Bt(e.data)}}Ki.create=t=>new Ki({typeName:oe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...ge(t)});class Cn extends ve{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==J.date){const s=this._getOrReturnCtx(e);return X(s,{code:V.invalid_type,expected:J.date,received:s.parsedType}),le}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return X(s,{code:V.invalid_date}),le}const n=new Pt;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:V.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:V.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):Me.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Cn({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:se.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:se.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}Cn.create=t=>new Cn({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:oe.ZodDate,...ge(t)});class lo extends ve{_parse(e){if(this._getType(e)!==J.symbol){const n=this._getOrReturnCtx(e);return X(n,{code:V.invalid_type,expected:J.symbol,received:n.parsedType}),le}return Bt(e.data)}}lo.create=t=>new lo({typeName:oe.ZodSymbol,...ge(t)});class Zi extends ve{_parse(e){if(this._getType(e)!==J.undefined){const n=this._getOrReturnCtx(e);return X(n,{code:V.invalid_type,expected:J.undefined,received:n.parsedType}),le}return Bt(e.data)}}Zi.create=t=>new Zi({typeName:oe.ZodUndefined,...ge(t)});class Gi extends ve{_parse(e){if(this._getType(e)!==J.null){const n=this._getOrReturnCtx(e);return X(n,{code:V.invalid_type,expected:J.null,received:n.parsedType}),le}return Bt(e.data)}}Gi.create=t=>new Gi({typeName:oe.ZodNull,...ge(t)});class Qn extends ve{constructor(){super(...arguments),this._any=!0}_parse(e){return Bt(e.data)}}Qn.create=t=>new Qn({typeName:oe.ZodAny,...ge(t)});class Dn extends ve{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Bt(e.data)}}Dn.create=t=>new Dn({typeName:oe.ZodUnknown,...ge(t)});class Rr extends ve{_parse(e){const r=this._getOrReturnCtx(e);return X(r,{code:V.invalid_type,expected:J.never,received:r.parsedType}),le}}Rr.create=t=>new Rr({typeName:oe.ZodNever,...ge(t)});class uo extends ve{_parse(e){if(this._getType(e)!==J.undefined){const n=this._getOrReturnCtx(e);return X(n,{code:V.invalid_type,expected:J.void,received:n.parsedType}),le}return Bt(e.data)}}uo.create=t=>new uo({typeName:oe.ZodVoid,...ge(t)});class hr extends ve{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==J.array)return X(r,{code:V.invalid_type,expected:J.array,received:r.parsedType}),le;if(i.exactLength!==null){const o=r.data.length>i.exactLength.value,a=r.data.length<i.exactLength.value;(o||a)&&(X(r,{code:o?V.too_big:V.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(X(r,{code:V.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(X(r,{code:V.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>i.type._parseAsync(new xr(r,o,r.path,a)))).then(o=>Pt.mergeArray(n,o));const s=[...r.data].map((o,a)=>i.type._parseSync(new xr(r,o,r.path,a)));return Pt.mergeArray(n,s)}get element(){return this._def.type}min(e,r){return new hr({...this._def,minLength:{value:e,message:se.toString(r)}})}max(e,r){return new hr({...this._def,maxLength:{value:e,message:se.toString(r)}})}length(e,r){return new hr({...this._def,exactLength:{value:e,message:se.toString(r)}})}nonempty(e){return this.min(1,e)}}hr.create=(t,e)=>new hr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:oe.ZodArray,...ge(e)});function Xn(t){if(t instanceof Ye){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=Pr.create(Xn(n))}return new Ye({...t._def,shape:()=>e})}else return t instanceof hr?new hr({...t._def,type:Xn(t.element)}):t instanceof Pr?Pr.create(Xn(t.unwrap())):t instanceof On?On.create(Xn(t.unwrap())):t instanceof Sr?Sr.create(t.items.map(e=>Xn(e))):t}class Ye extends ve{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=Me.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==J.object){const l=this._getOrReturnCtx(e);return X(l,{code:V.invalid_type,expected:J.object,received:l.parsedType}),le}const{status:n,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Rr&&this._def.unknownKeys==="strip"))for(const l in i.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const d=s[l],f=i.data[l];c.push({key:{status:"valid",value:l},value:d._parse(new xr(i,f,i.path,l)),alwaysSet:l in i.data})}if(this._def.catchall instanceof Rr){const l=this._def.unknownKeys;if(l==="passthrough")for(const d of a)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(l==="strict")a.length>0&&(X(i,{code:V.unrecognized_keys,keys:a}),n.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const d of a){const f=i.data[d];c.push({key:{status:"valid",value:d},value:l._parse(new xr(i,f,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const l=[];for(const d of c){const f=await d.key;l.push({key:f,value:await d.value,alwaysSet:d.alwaysSet})}return l}).then(l=>Pt.mergeObjectSync(n,l)):Pt.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return se.errToObj,new Ye({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,s,o,a;const c=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=se.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Ye({...this._def,unknownKeys:"strip"})}passthrough(){return new Ye({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ye({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ye({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:oe.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Ye({...this._def,catchall:e})}pick(e){const r={};return Me.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new Ye({...this._def,shape:()=>r})}omit(e){const r={};return Me.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new Ye({...this._def,shape:()=>r})}deepPartial(){return Xn(this)}partial(e){const r={};return Me.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new Ye({...this._def,shape:()=>r})}required(e){const r={};return Me.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof Pr;)s=s._def.innerType;r[n]=s}}),new Ye({...this._def,shape:()=>r})}keyof(){return Cd(Me.objectKeys(this.shape))}}Ye.create=(t,e)=>new Ye({shape:()=>t,unknownKeys:"strip",catchall:Rr.create(),typeName:oe.ZodObject,...ge(e)}),Ye.strictCreate=(t,e)=>new Ye({shape:()=>t,unknownKeys:"strict",catchall:Rr.create(),typeName:oe.ZodObject,...ge(e)}),Ye.lazycreate=(t,e)=>new Ye({shape:t,unknownKeys:"strip",catchall:Rr.create(),typeName:oe.ZodObject,...ge(e)});class Yi extends ve{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new lr(a.ctx.common.issues));return X(r,{code:V.invalid_union,unionErrors:o}),le}if(r.common.async)return Promise.all(n.map(async s=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of n){const l={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:l});if(d.status==="valid")return d;d.status==="dirty"&&!s&&(s={result:d,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(c=>new lr(c));return X(r,{code:V.invalid_union,unionErrors:a}),le}}get options(){return this._def.options}}Yi.create=(t,e)=>new Yi({options:t,typeName:oe.ZodUnion,...ge(e)});const ho=t=>t instanceof Xi?ho(t.schema):t instanceof dr?ho(t.innerType()):t instanceof es?[t.value]:t instanceof Yr?t.options:t instanceof ts?Object.keys(t.enum):t instanceof rs?ho(t._def.innerType):t instanceof Zi?[void 0]:t instanceof Gi?[null]:null;class fo extends ve{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.object)return X(r,{code:V.invalid_type,expected:J.object,received:r.parsedType}),le;const n=this.discriminator,i=r.data[n],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(X(r,{code:V.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),le)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const i=new Map;for(const s of r){const o=ho(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new fo({typeName:oe.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...ge(n)})}}function lc(t,e){const r=Kr(t),n=Kr(e);if(t===e)return{valid:!0,data:t};if(r===J.object&&n===J.object){const i=Me.objectKeys(e),s=Me.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const c=lc(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===J.array&&n===J.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],c=lc(o,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return r===J.date&&n===J.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Ji extends ve{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=(s,o)=>{if(ac(s)||ac(o))return le;const a=lc(s.value,o.value);return a.valid?((cc(s)||cc(o))&&r.dirty(),{status:r.value,value:a.data}):(X(n,{code:V.invalid_intersection_types}),le)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Ji.create=(t,e,r)=>new Ji({left:t,right:e,typeName:oe.ZodIntersection,...ge(r)});class Sr extends ve{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.array)return X(n,{code:V.invalid_type,expected:J.array,received:n.parsedType}),le;if(n.data.length<this._def.items.length)return X(n,{code:V.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),le;!this._def.rest&&n.data.length>this._def.items.length&&(X(n,{code:V.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new xr(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(s).then(o=>Pt.mergeArray(r,o)):Pt.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new Sr({...this._def,rest:e})}}Sr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Sr({items:t,typeName:oe.ZodTuple,rest:null,...ge(e)})};class Qi extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.object)return X(n,{code:V.invalid_type,expected:J.object,received:n.parsedType}),le;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in n.data)i.push({key:s._parse(new xr(n,a,n.path,a)),value:o._parse(new xr(n,n.data[a],n.path,a))});return n.common.async?Pt.mergeObjectAsync(r,i):Pt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ve?new Qi({keyType:e,valueType:r,typeName:oe.ZodRecord,...ge(n)}):new Qi({keyType:ur.create(),valueType:e,typeName:oe.ZodRecord,...ge(r)})}}class po extends ve{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.map)return X(n,{code:V.invalid_type,expected:J.map,received:n.parsedType}),le;const i=this._def.keyType,s=this._def.valueType,o=[...n.data.entries()].map(([a,c],l)=>({key:i._parse(new xr(n,a,n.path,[l,"key"])),value:s._parse(new xr(n,c,n.path,[l,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,d=await c.value;if(l.status==="aborted"||d.status==="aborted")return le;(l.status==="dirty"||d.status==="dirty")&&r.dirty(),a.set(l.value,d.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,d=c.value;if(l.status==="aborted"||d.status==="aborted")return le;(l.status==="dirty"||d.status==="dirty")&&r.dirty(),a.set(l.value,d.value)}return{status:r.value,value:a}}}}po.create=(t,e,r)=>new po({valueType:e,keyType:t,typeName:oe.ZodMap,...ge(r)});class In extends ve{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.set)return X(n,{code:V.invalid_type,expected:J.set,received:n.parsedType}),le;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(X(n,{code:V.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(X(n,{code:V.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const s=this._def.valueType;function o(c){const l=new Set;for(const d of c){if(d.status==="aborted")return le;d.status==="dirty"&&r.dirty(),l.add(d.value)}return{status:r.value,value:l}}const a=[...n.data.values()].map((c,l)=>s._parse(new xr(n,c,n.path,l)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new In({...this._def,minSize:{value:e,message:se.toString(r)}})}max(e,r){return new In({...this._def,maxSize:{value:e,message:se.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}In.create=(t,e)=>new In({valueType:t,minSize:null,maxSize:null,typeName:oe.ZodSet,...ge(e)});class ei extends ve{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.function)return X(r,{code:V.invalid_type,expected:J.function,received:r.parsedType}),le;function n(a,c){return oo({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,so(),Hi].filter(l=>!!l),issueData:{code:V.invalid_arguments,argumentsError:c}})}function i(a,c){return oo({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,so(),Hi].filter(l=>!!l),issueData:{code:V.invalid_return_type,returnTypeError:c}})}const s={errorMap:r.common.contextualErrorMap},o=r.data;return this._def.returns instanceof ti?Bt(async(...a)=>{const c=new lr([]),l=await this._def.args.parseAsync(a,s).catch(p=>{throw c.addIssue(n(a,p)),c}),d=await o(...l);return await this._def.returns._def.type.parseAsync(d,s).catch(p=>{throw c.addIssue(i(d,p)),c})}):Bt((...a)=>{const c=this._def.args.safeParse(a,s);if(!c.success)throw new lr([n(a,c.error)]);const l=o(...c.data),d=this._def.returns.safeParse(l,s);if(!d.success)throw new lr([i(l,d.error)]);return d.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ei({...this._def,args:Sr.create(e).rest(Dn.create())})}returns(e){return new ei({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new ei({args:e||Sr.create([]).rest(Dn.create()),returns:r||Dn.create(),typeName:oe.ZodFunction,...ge(n)})}}class Xi extends ve{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Xi.create=(t,e)=>new Xi({getter:t,typeName:oe.ZodLazy,...ge(e)});class es extends ve{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return X(r,{received:r.data,code:V.invalid_literal,expected:this._def.value}),le}return{status:"valid",value:e.data}}get value(){return this._def.value}}es.create=(t,e)=>new es({value:t,typeName:oe.ZodLiteral,...ge(e)});function Cd(t,e){return new Yr({values:t,typeName:oe.ZodEnum,...ge(e)})}class Yr extends ve{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return X(r,{expected:Me.joinValues(n),received:r.parsedType,code:V.invalid_type}),le}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return X(r,{received:r.data,code:V.invalid_enum_value,options:n}),le}return Bt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return Yr.create(e)}exclude(e){return Yr.create(this.options.filter(r=>!e.includes(r)))}}Yr.create=Cd;class ts extends ve{_parse(e){const r=Me.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==J.string&&n.parsedType!==J.number){const i=Me.objectValues(r);return X(n,{expected:Me.joinValues(i),received:n.parsedType,code:V.invalid_type}),le}if(r.indexOf(e.data)===-1){const i=Me.objectValues(r);return X(n,{received:n.data,code:V.invalid_enum_value,options:i}),le}return Bt(e.data)}get enum(){return this._def.values}}ts.create=(t,e)=>new ts({values:t,typeName:oe.ZodNativeEnum,...ge(e)});class ti extends ve{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.promise&&r.common.async===!1)return X(r,{code:V.invalid_type,expected:J.promise,received:r.parsedType}),le;const n=r.parsedType===J.promise?r.data:Promise.resolve(r.data);return Bt(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}ti.create=(t,e)=>new ti({type:t,typeName:oe.ZodPromise,...ge(e)});class dr extends ve{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===oe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null;if(i.type==="preprocess"){const o=i.transform(n.data);return n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}const s={addIssue:o=>{X(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="refinement"){const o=a=>{const c=i.refinement(a,s);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?le:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?le:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(i.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ao(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>ao(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:r.value,value:a})):o);Me.assertNever(i)}}dr.create=(t,e,r)=>new dr({schema:t,typeName:oe.ZodEffects,effect:e,...ge(r)}),dr.createWithPreprocess=(t,e,r)=>new dr({schema:e,effect:{type:"preprocess",transform:t},typeName:oe.ZodEffects,...ge(r)});class Pr extends ve{_parse(e){return this._getType(e)===J.undefined?Bt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Pr.create=(t,e)=>new Pr({innerType:t,typeName:oe.ZodOptional,...ge(e)});class On extends ve{_parse(e){return this._getType(e)===J.null?Bt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}On.create=(t,e)=>new On({innerType:t,typeName:oe.ZodNullable,...ge(e)});class rs extends ve{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===J.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}rs.create=(t,e)=>new rs({innerType:t,typeName:oe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ge(e)});class go extends ve{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return co(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new lr(n.common.issues)}})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new lr(n.common.issues)}})}}removeCatch(){return this._def.innerType}}go.create=(t,e)=>new go({innerType:t,typeName:oe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ge(e)});class mo extends ve{_parse(e){if(this._getType(e)!==J.nan){const n=this._getOrReturnCtx(e);return X(n,{code:V.invalid_type,expected:J.nan,received:n.parsedType}),le}return{status:"valid",value:e.data}}}mo.create=t=>new mo({typeName:oe.ZodNaN,...ge(t)});const q2=Symbol("zod_brand");class Dd extends ve{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class ns extends ve{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?le:s.status==="dirty"?(r.dirty(),xd(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?le:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new ns({in:e,out:r,typeName:oe.ZodPipeline})}}const Id=(t,e={},r)=>t?Qn.create().superRefine((n,i)=>{var s,o;if(!t(n)){const a=typeof e=="function"?e(n):e,c=(o=(s=a.fatal)!==null&&s!==void 0?s:r)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...l,fatal:c})}}):Qn.create(),W2={object:Ye.lazycreate};var oe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(oe||(oe={}));const V2=(t,e={message:`Input not instance of ${t.name}`})=>Id(r=>r instanceof t,e),Od=ur.create,Ad=Zr.create,H2=mo.create,K2=Gr.create,$d=Ki.create,Z2=Cn.create,G2=lo.create,Y2=Zi.create,J2=Gi.create,Q2=Qn.create,X2=Dn.create,e3=Rr.create,t3=uo.create,r3=hr.create,n3=Ye.create,i3=Ye.strictCreate,s3=Yi.create,o3=fo.create,a3=Ji.create,c3=Sr.create,l3=Qi.create,u3=po.create,h3=In.create,d3=ei.create,f3=Xi.create,p3=es.create,g3=Yr.create,m3=ts.create,y3=ti.create,Td=dr.create,w3=Pr.create,v3=On.create,b3=dr.createWithPreprocess,_3=ns.create;var fr=Object.freeze({__proto__:null,defaultErrorMap:Hi,setErrorMap:$2,getErrorMap:so,makeIssue:oo,EMPTY_PATH:T2,addIssueToContext:X,ParseStatus:Pt,INVALID:le,DIRTY:xd,OK:Bt,isAborted:ac,isDirty:cc,isValid:ao,isAsync:co,get util(){return Me},get objectUtil(){return oc},ZodParsedType:J,getParsedType:Kr,ZodType:ve,ZodString:ur,ZodNumber:Zr,ZodBigInt:Gr,ZodBoolean:Ki,ZodDate:Cn,ZodSymbol:lo,ZodUndefined:Zi,ZodNull:Gi,ZodAny:Qn,ZodUnknown:Dn,ZodNever:Rr,ZodVoid:uo,ZodArray:hr,ZodObject:Ye,ZodUnion:Yi,ZodDiscriminatedUnion:fo,ZodIntersection:Ji,ZodTuple:Sr,ZodRecord:Qi,ZodMap:po,ZodSet:In,ZodFunction:ei,ZodLazy:Xi,ZodLiteral:es,ZodEnum:Yr,ZodNativeEnum:ts,ZodPromise:ti,ZodEffects:dr,ZodTransformer:dr,ZodOptional:Pr,ZodNullable:On,ZodDefault:rs,ZodCatch:go,ZodNaN:mo,BRAND:q2,ZodBranded:Dd,ZodPipeline:ns,custom:Id,Schema:ve,ZodSchema:ve,late:W2,get ZodFirstPartyTypeKind(){return oe},coerce:{string:t=>ur.create({...t,coerce:!0}),number:t=>Zr.create({...t,coerce:!0}),boolean:t=>Ki.create({...t,coerce:!0}),bigint:t=>Gr.create({...t,coerce:!0}),date:t=>Cn.create({...t,coerce:!0})},any:Q2,array:r3,bigint:K2,boolean:$d,date:Z2,discriminatedUnion:o3,effect:Td,enum:g3,function:d3,instanceof:V2,intersection:a3,lazy:f3,literal:p3,map:u3,nan:H2,nativeEnum:m3,never:e3,null:J2,nullable:v3,number:Ad,object:n3,oboolean:()=>$d().optional(),onumber:()=>Ad().optional(),optional:w3,ostring:()=>Od().optional(),pipeline:_3,preprocess:b3,promise:y3,record:l3,set:h3,strictObject:i3,string:Od,symbol:G2,transformer:Td,tuple:c3,undefined:Y2,union:s3,unknown:X2,void:t3,NEVER:le,ZodIssueCode:V,quotelessJson:A2,ZodError:lr});const uc=/^aleo1[a-z0-9]{58}$/i,Nd=/^AViewKey1[a-z0-9]{44}$/i,Rd=/^APrivateKey1[a-z0-9]{47}$/i,Pd=/^at1[a-z0-9]{58}$/i,Ld=/^\d+field$/,Md=/^\d+u32$/,Ud=/^\d+u64$/,E3=fr.string().regex(uc),x3=fr.string().regex(Nd),S3=fr.string().regex(Rd),C3=fr.string().regex(Pd),D3=fr.string().regex(Ld),I3=fr.string().regex(Md),O3=fr.string().regex(Ud);var kd;(function(t){t.Record="record",t.OutputRecord="outputRecord",t.Public="public",t.Private="private",t.Constant="constant",t.Future="future",t.ExternalRecord="external_record"})(kd||(kd={})),re.EventType=void 0,function(t){t.Deploy="Deploy",t.Execute="Execute",t.Send="Send",t.Receive="Receive",t.Join="Join",t.Split="Split",t.Shield="Shield",t.Unshield="Unshield"}(re.EventType||(re.EventType={})),re.EventStatus=void 0,function(t){t.Creating="Creating",t.Pending="Pending",t.Settled="Settled",t.Failed="Failed"}(re.EventStatus||(re.EventStatus={})),re.Visibility=void 0,function(t){t.Private="Private",t.Public="Public"}(re.Visibility||(re.Visibility={})),re.Network=void 0,function(t){t.AleoTestnet="AleoTestnet",t.AleoMainnet="AleoMainnet"}(re.Network||(re.Network={})),re.AssetType=void 0,function(t){t[t.ALEO=0]="ALEO"}(re.AssetType||(re.AssetType={}));const A3=fr.nativeEnum(re.EventType),$3=fr.nativeEnum(re.EventStatus),T3=fr.nativeEnum(re.Network),N3=fr.nativeEnum(re.Visibility),R3=async({message:t,address:e})=>{const r=await Qt(),n=await(r==null?void 0:r.getSession());if(!n||!r)return{error:"no session or connection"};try{return await r.request({topic:n.topic,chainId:"aleo:1",request:{jsonrpc:"2.0",method:"requestSignature",params:{message:t,address:uc.test(e??"")?e:void 0}}})}catch(i){const s=i.message;return console.error("signature error",s),{error:s}}},P3=20;var hc={exports:{}},dc,Fd;function L3(){if(Fd)return dc;Fd=1;var t=1e3,e=t*60,r=e*60,n=r*24,i=n*7,s=n*365.25;dc=function(d,f){f=f||{};var p=typeof d;if(p==="string"&&d.length>0)return o(d);if(p==="number"&&isFinite(d))return f.long?c(d):a(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function o(d){if(d=String(d),!(d.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(f){var p=parseFloat(f[1]),y=(f[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return p*s;case"weeks":case"week":case"w":return p*i;case"days":case"day":case"d":return p*n;case"hours":case"hour":case"hrs":case"hr":case"h":return p*r;case"minutes":case"minute":case"mins":case"min":case"m":return p*e;case"seconds":case"second":case"secs":case"sec":case"s":return p*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function a(d){var f=Math.abs(d);return f>=n?Math.round(d/n)+"d":f>=r?Math.round(d/r)+"h":f>=e?Math.round(d/e)+"m":f>=t?Math.round(d/t)+"s":d+"ms"}function c(d){var f=Math.abs(d);return f>=n?l(d,f,n,"day"):f>=r?l(d,f,r,"hour"):f>=e?l(d,f,e,"minute"):f>=t?l(d,f,t,"second"):d+" ms"}function l(d,f,p,y){var v=f>=p*1.5;return Math.round(d/p)+" "+y+(v?"s":"")}return dc}function M3(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=L3(),r.destroy=l,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let f=0;for(let p=0;p<d.length;p++)f=(f<<5)-f+d.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(d){let f,p=null,y,v;function x(...O){if(!x.enabled)return;const D=x,_=Number(new Date),S=_-(f||_);D.diff=S,D.prev=f,D.curr=_,f=_,O[0]=r.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");let w=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,(g,u)=>{if(g==="%%")return"%";w++;const m=r.formatters[u];if(typeof m=="function"){const A=O[w];g=m.call(D,A),O.splice(w,1),w--}return g}),r.formatArgs.call(D,O),(D.log||r.log).apply(D,O)}return x.namespace=d,x.useColors=r.useColors(),x.color=r.selectColor(d),x.extend=n,x.destroy=r.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(y!==r.namespaces&&(y=r.namespaces,v=r.enabled(d)),v),set:O=>{p=O}}),typeof r.init=="function"&&r.init(x),x}function n(d,f){const p=r(this.namespace+(typeof f>"u"?":":f)+d);return p.log=this.log,p}function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let f;const p=(typeof d=="string"?d:"").split(/[\s,]+/),y=p.length;for(f=0;f<y;f++)p[f]&&(d=p[f].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function s(){const d=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),d}function o(d){if(d[d.length-1]==="*")return!0;let f,p;for(f=0,p=r.skips.length;f<p;f++)if(r.skips[f].test(d))return!1;for(f=0,p=r.names.length;f<p;f++)if(r.names[f].test(d))return!0;return!1}function a(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function c(d){return d instanceof Error?d.stack||d.message:d}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var U3=M3;(function(t,e){e.formatArgs=n,e.save=i,e.load=s,e.useColors=r,e.storage=o(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;c.splice(1,0,l,"color: inherit");let d=0,f=0;c[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(d++,p==="%c"&&(f=d))}),c.splice(f,0,l)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function s(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function o(){try{return localStorage}catch{}}t.exports=U3(e);const{formatters:a}=t.exports;a.j=function(c){try{return JSON.stringify(c)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(hc,hc.exports);var k3=hc.exports;const jd=Qo(k3)("wallet:sdk");jd.enabled=!0;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const yo=window,fc=yo.ShadowRoot&&(yo.ShadyCSS===void 0||yo.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,pc=Symbol(),Bd=new WeakMap;let zd=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==pc)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(fc&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=Bd.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&Bd.set(r,e))}return e}toString(){return this.cssText}};const F3=t=>new zd(typeof t=="string"?t:t+"",void 0,pc),ke=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,i,s)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new zd(r,t,pc)},j3=(t,e)=>{fc?t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet):e.forEach(r=>{const n=document.createElement("style"),i=yo.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)})},qd=fc?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return F3(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var gc;const wo=window,Wd=wo.trustedTypes,B3=Wd?Wd.emptyScript:"",Vd=wo.reactiveElementPolyfillSupport,mc={toAttribute(t,e){switch(e){case Boolean:t=t?B3:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},Hd=(t,e)=>e!==t&&(e==e||t==t),yc={attribute:!0,type:String,converter:mc,reflect:!1,hasChanged:Hd},wc="finalized";let ri=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var r;this.finalize(),((r=this.h)!==null&&r!==void 0?r:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((r,n)=>{const i=this._$Ep(n,r);i!==void 0&&(this._$Ev.set(i,n),e.push(i))}),e}static createProperty(e,r=yc){if(r.state&&(r.attribute=!1),this.finalize(),this.elementProperties.set(e,r),!r.noAccessor&&!this.prototype.hasOwnProperty(e)){const n=typeof e=="symbol"?Symbol():"__"+e,i=this.getPropertyDescriptor(e,n,r);i!==void 0&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){return{get(){return this[r]},set(i){const s=this[e];this[r]=i,this.requestUpdate(e,s,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||yc}static finalize(){if(this.hasOwnProperty(wc))return!1;this[wc]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const r=this.properties,n=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(const i of n)this.createProperty(i,r[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const i of n)r.unshift(qd(i))}else e!==void 0&&r.push(qd(e));return r}static _$Ep(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(r=>r(this))}addController(e){var r,n;((r=this._$ES)!==null&&r!==void 0?r:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)===null||n===void 0||n.call(e))}removeController(e){var r;(r=this._$ES)===null||r===void 0||r.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,r)=>{this.hasOwnProperty(r)&&(this._$Ei.set(r,this[r]),delete this[r])})}createRenderRoot(){var e;const r=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return j3(r,this.constructor.elementStyles),r}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostConnected)===null||n===void 0?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostDisconnected)===null||n===void 0?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$EO(e,r,n=yc){var i;const s=this.constructor._$Ep(e,n);if(s!==void 0&&n.reflect===!0){const o=(((i=n.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?n.converter:mc).toAttribute(r,n.type);this._$El=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$El=null}}_$AK(e,r){var n;const i=this.constructor,s=i._$Ev.get(e);if(s!==void 0&&this._$El!==s){const o=i.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((n=o.converter)===null||n===void 0?void 0:n.fromAttribute)!==void 0?o.converter:mc;this._$El=s,this[s]=a.fromAttribute(r,o.type),this._$El=null}}requestUpdate(e,r,n){let i=!0;e!==void 0&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||Hd)(this[e],r)?(this._$AL.has(e)||this._$AL.set(e,r),n.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,s)=>this[s]=i),this._$Ei=void 0);let r=!1;const n=this._$AL;try{r=this.shouldUpdate(n),r?(this.willUpdate(n),(e=this._$ES)===null||e===void 0||e.forEach(i=>{var s;return(s=i.hostUpdate)===null||s===void 0?void 0:s.call(i)}),this.update(n)):this._$Ek()}catch(i){throw r=!1,this._$Ek(),i}r&&this._$AE(n)}willUpdate(e){}_$AE(e){var r;(r=this._$ES)===null||r===void 0||r.forEach(n=>{var i;return(i=n.hostUpdated)===null||i===void 0?void 0:i.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((r,n)=>this._$EO(n,this[n],r)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};ri[wc]=!0,ri.elementProperties=new Map,ri.elementStyles=[],ri.shadowRootOptions={mode:"open"},Vd==null||Vd({ReactiveElement:ri}),((gc=wo.reactiveElementVersions)!==null&&gc!==void 0?gc:wo.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var vc;const vo=window,ni=vo.trustedTypes,Kd=ni?ni.createPolicy("lit-html",{createHTML:t=>t}):void 0,bc="$lit$",Jr=`lit$${(Math.random()+"").slice(9)}$`,Zd="?"+Jr,z3=`<${Zd}>`,An=document,is=()=>An.createComment(""),ss=t=>t===null||typeof t!="object"&&typeof t!="function",Gd=Array.isArray,q3=t=>Gd(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",_c=`[ 	
\f\r]`,os=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Yd=/-->/g,Jd=/>/g,$n=RegExp(`>|${_c}(?:([^\\s"'>=/]+)(${_c}*=${_c}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Qd=/'/g,Xd=/"/g,ef=/^(?:script|style|textarea|title)$/i,tf=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),G=tf(1),Qe=tf(2),Tn=Symbol.for("lit-noChange"),ht=Symbol.for("lit-nothing"),rf=new WeakMap,Nn=An.createTreeWalker(An,129,null,!1);function nf(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Kd!==void 0?Kd.createHTML(e):e}const W3=(t,e)=>{const r=t.length-1,n=[];let i,s=e===2?"<svg>":"",o=os;for(let a=0;a<r;a++){const c=t[a];let l,d,f=-1,p=0;for(;p<c.length&&(o.lastIndex=p,d=o.exec(c),d!==null);)p=o.lastIndex,o===os?d[1]==="!--"?o=Yd:d[1]!==void 0?o=Jd:d[2]!==void 0?(ef.test(d[2])&&(i=RegExp("</"+d[2],"g")),o=$n):d[3]!==void 0&&(o=$n):o===$n?d[0]===">"?(o=i??os,f=-1):d[1]===void 0?f=-2:(f=o.lastIndex-d[2].length,l=d[1],o=d[3]===void 0?$n:d[3]==='"'?Xd:Qd):o===Xd||o===Qd?o=$n:o===Yd||o===Jd?o=os:(o=$n,i=void 0);const y=o===$n&&t[a+1].startsWith("/>")?" ":"";s+=o===os?c+z3:f>=0?(n.push(l),c.slice(0,f)+bc+c.slice(f)+Jr+y):c+Jr+(f===-2?(n.push(void 0),a):y)}return[nf(t,s+(t[r]||"<?>")+(e===2?"</svg>":"")),n]};class as{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[l,d]=W3(e,r);if(this.el=as.createElement(l,n),Nn.currentNode=this.el.content,r===2){const f=this.el.content,p=f.firstChild;p.remove(),f.append(...p.childNodes)}for(;(i=Nn.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes()){const f=[];for(const p of i.getAttributeNames())if(p.endsWith(bc)||p.startsWith(Jr)){const y=d[o++];if(f.push(p),y!==void 0){const v=i.getAttribute(y.toLowerCase()+bc).split(Jr),x=/([.?@])?(.*)/.exec(y);c.push({type:1,index:s,name:x[2],strings:v,ctor:x[1]==="."?H3:x[1]==="?"?Z3:x[1]==="@"?G3:bo})}else c.push({type:6,index:s})}for(const p of f)i.removeAttribute(p)}if(ef.test(i.tagName)){const f=i.textContent.split(Jr),p=f.length-1;if(p>0){i.textContent=ni?ni.emptyScript:"";for(let y=0;y<p;y++)i.append(f[y],is()),Nn.nextNode(),c.push({type:2,index:++s});i.append(f[p],is())}}}else if(i.nodeType===8)if(i.data===Zd)c.push({type:2,index:s});else{let f=-1;for(;(f=i.data.indexOf(Jr,f+1))!==-1;)c.push({type:7,index:s}),f+=Jr.length-1}s++}}static createElement(e,r){const n=An.createElement("template");return n.innerHTML=e,n}}function ii(t,e,r=t,n){var i,s,o,a;if(e===Tn)return e;let c=n!==void 0?(i=r._$Co)===null||i===void 0?void 0:i[n]:r._$Cl;const l=ss(e)?void 0:e._$litDirective$;return(c==null?void 0:c.constructor)!==l&&((s=c==null?void 0:c._$AO)===null||s===void 0||s.call(c,!1),l===void 0?c=void 0:(c=new l(t),c._$AT(t,r,n)),n!==void 0?((o=(a=r)._$Co)!==null&&o!==void 0?o:a._$Co=[])[n]=c:r._$Cl=c),c!==void 0&&(e=ii(t,c._$AS(t,e.values),c,n)),e}class V3{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var r;const{el:{content:n},parts:i}=this._$AD,s=((r=e==null?void 0:e.creationScope)!==null&&r!==void 0?r:An).importNode(n,!0);Nn.currentNode=s;let o=Nn.nextNode(),a=0,c=0,l=i[0];for(;l!==void 0;){if(a===l.index){let d;l.type===2?d=new cs(o,o.nextSibling,this,e):l.type===1?d=new l.ctor(o,l.name,l.strings,this,e):l.type===6&&(d=new Y3(o,this,e)),this._$AV.push(d),l=i[++c]}a!==(l==null?void 0:l.index)&&(o=Nn.nextNode(),a++)}return Nn.currentNode=An,s}v(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class cs{constructor(e,r,n,i){var s;this.type=2,this._$AH=ht,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cp=(s=i==null?void 0:i.isConnected)===null||s===void 0||s}get _$AU(){var e,r;return(r=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&r!==void 0?r:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=ii(this,e,r),ss(e)?e===ht||e==null||e===""?(this._$AH!==ht&&this._$AR(),this._$AH=ht):e!==this._$AH&&e!==Tn&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):q3(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==ht&&ss(this._$AH)?this._$AA.nextSibling.data=e:this.$(An.createTextNode(e)),this._$AH=e}g(e){var r;const{values:n,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=as.createElement(nf(i.h,i.h[0]),this.options)),i);if(((r=this._$AH)===null||r===void 0?void 0:r._$AD)===s)this._$AH.v(n);else{const o=new V3(s,this),a=o.u(this.options);o.v(n),this.$(a),this._$AH=o}}_$AC(e){let r=rf.get(e.strings);return r===void 0&&rf.set(e.strings,r=new as(e)),r}T(e){Gd(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const s of e)i===r.length?r.push(n=new cs(this.k(is()),this.k(is()),this,this.options)):n=r[i],n._$AI(s),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,r);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var r;this._$AM===void 0&&(this._$Cp=e,(r=this._$AP)===null||r===void 0||r.call(this,e))}}class bo{constructor(e,r,n,i,s){this.type=1,this._$AH=ht,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=ht}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,r=this,n,i){const s=this.strings;let o=!1;if(s===void 0)e=ii(this,e,r,0),o=!ss(e)||e!==this._$AH&&e!==Tn,o&&(this._$AH=e);else{const a=e;let c,l;for(e=s[0],c=0;c<s.length-1;c++)l=ii(this,a[n+c],r,c),l===Tn&&(l=this._$AH[c]),o||(o=!ss(l)||l!==this._$AH[c]),l===ht?e=ht:e!==ht&&(e+=(l??"")+s[c+1]),this._$AH[c]=l}o&&!i&&this.j(e)}j(e){e===ht?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class H3 extends bo{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ht?void 0:e}}const K3=ni?ni.emptyScript:"";let Z3=class extends bo{constructor(){super(...arguments),this.type=4}j(e){e&&e!==ht?this.element.setAttribute(this.name,K3):this.element.removeAttribute(this.name)}};class G3 extends bo{constructor(e,r,n,i,s){super(e,r,n,i,s),this.type=5}_$AI(e,r=this){var n;if((e=(n=ii(this,e,r,0))!==null&&n!==void 0?n:ht)===Tn)return;const i=this._$AH,s=e===ht&&i!==ht||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,o=e!==ht&&(i===ht||s);s&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,n;typeof this._$AH=="function"?this._$AH.call((n=(r=this.options)===null||r===void 0?void 0:r.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}let Y3=class{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){ii(this,e)}};const sf=vo.litHtmlPolyfillSupport;sf==null||sf(as,cs),((vc=vo.litHtmlVersions)!==null&&vc!==void 0?vc:vo.litHtmlVersions=[]).push("2.8.0");const J3=(t,e,r)=>{var n,i;const s=(n=r==null?void 0:r.renderBefore)!==null&&n!==void 0?n:e;let o=s._$litPart$;if(o===void 0){const a=(i=r==null?void 0:r.renderBefore)!==null&&i!==void 0?i:null;s._$litPart$=o=new cs(e.insertBefore(is(),a),a,void 0,r??{})}return o._$AI(t),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Ec,xc;class _e extends ri{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,r;const n=super.createRenderRoot();return(e=(r=this.renderOptions).renderBefore)!==null&&e!==void 0||(r.renderBefore=n.firstChild),n}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=J3(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return Tn}}_e.finalized=!0,_e._$litElement$=!0,(Ec=globalThis.litElementHydrateSupport)===null||Ec===void 0||Ec.call(globalThis,{LitElement:_e});const of=globalThis.litElementPolyfillSupport;of==null||of({LitElement:_e}),((xc=globalThis.litElementVersions)!==null&&xc!==void 0?xc:globalThis.litElementVersions=[]).push("3.3.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Te=t=>e=>typeof e=="function"?((r,n)=>(customElements.define(r,n),n))(t,e):((r,n)=>{const{kind:i,elements:s}=n;return{kind:i,elements:s,finisher(o){customElements.define(r,o)}}})(t,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Q3=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(r){r.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}},X3=(t,e,r)=>{e.constructor.createProperty(r,t)};function me(t){return(e,r)=>r!==void 0?X3(t,e,r):Q3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Zt(t){return me({...t,state:!0})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Sc;((Sc=window.HTMLSlotElement)===null||Sc===void 0?void 0:Sc.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const e5={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},t5=t=>(...e)=>({_$litDirective$:t,values:e});class r5{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,n){this._$Ct=e,this._$AM=r,this._$Ci=n}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Lr=t5(class extends r5{constructor(t){var e;if(super(t),t.type!==e5.ATTRIBUTE||t.name!=="class"||((e=t.strings)===null||e===void 0?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,n;if(this.it===void 0){this.it=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!(!((r=this.nt)===null||r===void 0)&&r.has(s))&&this.it.add(s);return this.render(e)}const i=t.element.classList;this.it.forEach(s=>{s in e||(i.remove(s),this.it.delete(s))});for(const s in e){const o=!!e[s];o===this.it.has(s)||!((n=this.nt)===null||n===void 0)&&n.has(s)||(o?(i.add(s),this.it.add(s)):(i.remove(s),this.it.delete(s)))}return Tn}});function n5(t,e){t.indexOf(e)===-1&&t.push(e)}const af=(t,e,r)=>Math.min(Math.max(r,t),e),nr={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},_o=t=>typeof t=="number",si=t=>Array.isArray(t)&&!_o(t[0]),i5=(t,e,r)=>{const n=e-t;return((r-t)%n+n)%n+t};function s5(t,e){return si(t)?t[i5(0,t.length,e)]:t}const cf=(t,e,r)=>-r*t+r*e+t,lf=()=>{},Qr=t=>t,Cc=(t,e,r)=>e-t===0?1:(r-t)/(e-t);function uf(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=Cc(0,e,n);t.push(cf(r,1,i))}}function o5(t){const e=[0];return uf(e,t-1),e}function a5(t,e=o5(t.length),r=Qr){const n=t.length,i=n-e.length;return i>0&&uf(e,i),s=>{let o=0;for(;o<n-2&&!(s<e[o+1]);o++);let a=af(0,1,Cc(e[o],e[o+1],s));return a=s5(r,o)(a),cf(t[o],t[o+1],a)}}const hf=t=>Array.isArray(t)&&_o(t[0]),Dc=t=>typeof t=="object"&&!!t.createAnimation,oi=t=>typeof t=="function",c5=t=>typeof t=="string",ls={ms:t=>t*1e3,s:t=>t/1e3},df=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,l5=1e-7,u5=12;function h5(t,e,r,n,i){let s,o,a=0;do o=e+(r-e)/2,s=df(o,n,i)-t,s>0?r=o:e=o;while(Math.abs(s)>l5&&++a<u5);return o}function us(t,e,r,n){if(t===e&&r===n)return Qr;const i=s=>h5(s,0,1,t,r);return s=>s===0||s===1?s:df(i(s),e,n)}const d5=(t,e="end")=>r=>{r=e==="end"?Math.min(r,.999):Math.max(r,.001);const n=r*t,i=e==="end"?Math.floor(n):Math.ceil(n);return af(0,1,i/t)},ff={ease:us(.25,.1,.25,1),"ease-in":us(.42,0,1,1),"ease-in-out":us(.42,0,.58,1),"ease-out":us(0,0,.58,1)},f5=/\((.*?)\)/;function pf(t){if(oi(t))return t;if(hf(t))return us(...t);if(ff[t])return ff[t];if(t.startsWith("steps")){const e=f5.exec(t);if(e){const r=e[1].split(",");return d5(parseFloat(r[0]),r[1].trim())}}return Qr}class gf{constructor(e,r=[0,1],{easing:n,duration:i=nr.duration,delay:s=nr.delay,endDelay:o=nr.endDelay,repeat:a=nr.repeat,offset:c,direction:l="normal",autoplay:d=!0}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=Qr,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((p,y)=>{this.resolve=p,this.reject=y}),n=n||nr.easing,Dc(n)){const p=n.createAnimation(r);n=p.easing,r=p.keyframes||r,i=p.duration||i}this.repeat=a,this.easing=si(n)?Qr:pf(n),this.updateDuration(i);const f=a5(r,c,si(n)?n.map(pf):Qr);this.tick=p=>{var y;s=s;let v=0;this.pauseTime!==void 0?v=this.pauseTime:v=(p-this.startTime)*this.rate,this.t=v,v/=1e3,v=Math.max(v-s,0),this.playState==="finished"&&this.pauseTime===void 0&&(v=this.totalDuration);const x=v/this.duration;let O=Math.floor(x),D=x%1;!D&&x>=1&&(D=1),D===1&&O--;const _=O%2;(l==="reverse"||l==="alternate"&&_||l==="alternate-reverse"&&!_)&&(D=1-D);const S=v>=this.totalDuration?1:Math.min(D,1),w=f(this.easing(S));e(w),this.pauseTime===void 0&&(this.playState==="finished"||v>=this.totalDuration+o)?(this.playState="finished",(y=this.resolve)===null||y===void 0||y.call(this,w)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},d&&this.play()}play(){const e=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(e=this.reject)===null||e===void 0||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){this.pauseTime!==void 0||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}var Ic=function(){};process.env.NODE_ENV!=="production"&&(Ic=function(t,e){if(!t)throw new Error(e)});class p5{setAnimation(e){this.animation=e,e==null||e.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const Oc=new WeakMap;function mf(t){return Oc.has(t)||Oc.set(t,{transforms:[],values:new Map}),Oc.get(t)}function g5(t,e){return t.has(e)||t.set(e,new p5),t.get(e)}const m5=["","X","Y","Z"],y5=["translate","scale","rotate","skew"],Eo={x:"translateX",y:"translateY",z:"translateZ"},yf={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},w5={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:yf,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:Qr},skew:yf},hs=new Map,Ac=t=>`--motion-${t}`,xo=["x","y","z"];y5.forEach(t=>{m5.forEach(e=>{xo.push(t+e),hs.set(Ac(t+e),w5[t])})});const v5=(t,e)=>xo.indexOf(t)-xo.indexOf(e),b5=new Set(xo),wf=t=>b5.has(t),_5=(t,e)=>{Eo[e]&&(e=Eo[e]);const{transforms:r}=mf(t);n5(r,e),t.style.transform=E5(r)},E5=t=>t.sort(v5).reduce(x5,"").trim(),x5=(t,e)=>`${t} ${e}(var(${Ac(e)}))`,$c=t=>t.startsWith("--"),vf=new Set;function S5(t){if(!vf.has(t)){vf.add(t);try{const{syntax:e,initialValue:r}=hs.has(t)?hs.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:r})}catch{}}}const Tc=(t,e)=>document.createElement("div").animate(t,e),bf={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{Tc({opacity:[1]})}catch{return!1}return!0},finished:()=>!!Tc({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{Tc({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},Nc={},ai={};for(const t in bf)ai[t]=()=>(Nc[t]===void 0&&(Nc[t]=bf[t]()),Nc[t]);const C5=.015,D5=(t,e)=>{let r="";const n=Math.round(e/C5);for(let i=0;i<n;i++)r+=t(Cc(0,n-1,i))+", ";return r.substring(0,r.length-2)},_f=(t,e)=>oi(t)?ai.linearEasing()?`linear(${D5(t,e)})`:nr.easing:hf(t)?I5(t):t,I5=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`;function O5(t,e){for(let r=0;r<t.length;r++)t[r]===null&&(t[r]=r?t[r-1]:e());return t}const A5=t=>Array.isArray(t)?t:[t];function Rc(t){return Eo[t]&&(t=Eo[t]),wf(t)?Ac(t):t}const So={get:(t,e)=>{e=Rc(e);let r=$c(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!r&&r!==0){const n=hs.get(e);n&&(r=n.initialValue)}return r},set:(t,e,r)=>{e=Rc(e),$c(e)?t.style.setProperty(e,r):t.style[e]=r}};function Ef(t,e=!0){if(!(!t||t.playState==="finished"))try{t.stop?t.stop():(e&&t.commitStyles(),t.cancel())}catch{}}function $5(t,e){var r;let n=(e==null?void 0:e.toDefaultUnit)||Qr;const i=t[t.length-1];if(c5(i)){const s=((r=i.match(/(-?[\d.]+)([a-z%]*)/))===null||r===void 0?void 0:r[2])||"";s&&(n=o=>o+s)}return n}function T5(){return window.__MOTION_DEV_TOOLS_RECORD}function N5(t,e,r,n={},i){const s=T5(),o=n.record!==!1&&s;let a,{duration:c=nr.duration,delay:l=nr.delay,endDelay:d=nr.endDelay,repeat:f=nr.repeat,easing:p=nr.easing,persist:y=!1,direction:v,offset:x,allowWebkitAcceleration:O=!1,autoplay:D=!0}=n;const _=mf(t),S=wf(e);let w=ai.waapi();S&&_5(t,e);const E=Rc(e),g=g5(_.values,E),u=hs.get(E);return Ef(g.animation,!(Dc(p)&&g.generator)&&n.record!==!1),()=>{const m=()=>{var M,B;return(B=(M=So.get(t,E))!==null&&M!==void 0?M:u==null?void 0:u.initialValue)!==null&&B!==void 0?B:0};let A=O5(A5(r),m);const N=$5(A,u);if(Dc(p)){const M=p.createAnimation(A,e!=="opacity",m,E,g);p=M.easing,A=M.keyframes||A,c=M.duration||c}if($c(E)&&(ai.cssRegisterProperty()?S5(E):w=!1),S&&!ai.linearEasing()&&(oi(p)||si(p)&&p.some(oi))&&(w=!1),w){u&&(A=A.map(q=>_o(q)?u.toDefaultUnit(q):q)),A.length===1&&(!ai.partialKeyframes()||o)&&A.unshift(m());const M={delay:ls.ms(l),duration:ls.ms(c),endDelay:ls.ms(d),easing:si(p)?void 0:_f(p,c),direction:v,iterations:f+1,fill:"both"};a=t.animate({[E]:A,offset:x,easing:si(p)?p.map(q=>_f(q,c)):void 0},M),a.finished||(a.finished=new Promise((q,I)=>{a.onfinish=q,a.oncancel=I}));const B=A[A.length-1];a.finished.then(()=>{y||(So.set(t,E,B),a.cancel())}).catch(lf),O||(a.playbackRate=1.000001)}else if(i&&S)A=A.map(M=>typeof M=="string"?parseFloat(M):M),A.length===1&&A.unshift(parseFloat(m())),a=new i(M=>{So.set(t,E,N?N(M):M)},A,Object.assign(Object.assign({},n),{duration:c,easing:p}));else{const M=A[A.length-1];So.set(t,E,u&&_o(M)?u.toDefaultUnit(M):M)}return o&&s(t,e,A,{duration:c,delay:l,easing:p,repeat:f,offset:x},"motion-one"),g.setAnimation(a),a&&!D&&a.pause(),a}}const R5=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);function P5(t,e){var r;return typeof t=="string"?e?((r=e[t])!==null&&r!==void 0||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t||[])}const L5=t=>t(),xf=(t,e,r=nr.duration)=>new Proxy({animations:t.map(L5).filter(Boolean),duration:r,options:e},U5),M5=t=>t.animations[0],U5={get:(t,e)=>{const r=M5(t);switch(e){case"duration":return t.duration;case"currentTime":return ls.s((r==null?void 0:r[e])||0);case"playbackRate":case"playState":return r==null?void 0:r[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(k5)).catch(lf)),t.finished;case"stop":return()=>{t.animations.forEach(n=>Ef(n))};case"forEachNative":return n=>{t.animations.forEach(i=>n(i,t))};default:return typeof(r==null?void 0:r[e])>"u"?void 0:()=>t.animations.forEach(n=>n[e]())}},set:(t,e,r)=>{switch(e){case"currentTime":r=ls.ms(r);case"playbackRate":for(let n=0;n<t.animations.length;n++)t.animations[n][e]=r;return!0}return!1}},k5=t=>t.finished;function F5(t,e,r){return oi(t)?t(e,r):t}function j5(t){return function(r,n,i={}){r=P5(r);const s=r.length;Ic(!!s,"No valid element provided."),Ic(!!n,"No keyframes defined.");const o=[];for(let a=0;a<s;a++){const c=r[a];for(const l in n){const d=R5(i,l);d.delay=F5(d.delay,a,s);const f=N5(c,l,n[l],d,t);o.push(f)}}return xf(o,i,i.duration)}}const B5=j5(gf);function z5(t,e={}){return xf([()=>{const r=new gf(t,[0,1],e);return r.finished.catch(()=>{}),r}],e,e.duration)}function Rn(t,e,r){return(oi(t)?z5:B5)(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const zt=t=>t??ht;var ds={},q5=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Sf={},Xt={};let Pc;const W5=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Xt.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},Xt.getSymbolTotalCodewords=function(e){return W5[e]},Xt.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e},Xt.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Pc=e},Xt.isKanjiModeEnabled=function(){return typeof Pc<"u"},Xt.toSJIS=function(e){return Pc(e)};var Co={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(Co);function Cf(){this.buffer=[],this.length=0}Cf.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var V5=Cf;function fs(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}fs.prototype.set=function(t,e,r,n){const i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)},fs.prototype.get=function(t,e){return this.data[t*this.size+e]},fs.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r},fs.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var H5=fs,Df={};(function(t){const e=Xt.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(n){const i=[],s=t.getRowColCoords(n),o=s.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||i.push([s[a],s[c]]);return i}})(Df);var If={};const K5=Xt.getSymbolSize,Of=7;If.getPositions=function(e){const r=K5(e);return[[0,0],[r-Of,0],[0,r-Of]]};var Af={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,c=0,l=null,d=null;for(let f=0;f<s;f++){a=c=0,l=d=null;for(let p=0;p<s;p++){let y=i.get(f,p);y===l?a++:(a>=5&&(o+=e.N1+(a-5)),l=y,a=1),y=i.get(p,f),y===d?c++:(c>=5&&(o+=e.N1+(c-5)),d=y,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let c=0;c<s-1;c++){const l=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(l===4||l===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,c=0;for(let l=0;l<s;l++){a=c=0;for(let d=0;d<s;d++)a=a<<1&2047|i.get(l,d),d>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|i.get(d,l),d>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(n,i,s){switch(n){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)s.isReserved(c,a)||s.xor(c,a,r(i,c,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let l=0;l<o;l++){s(l),t.applyMask(l,i);const d=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(l,i),d<c&&(c=d,a=l)}return a}})(Af);var Do={};const Xr=Co,Io=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Oo=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Do.getBlocksCount=function(e,r){switch(r){case Xr.L:return Io[(e-1)*4+0];case Xr.M:return Io[(e-1)*4+1];case Xr.Q:return Io[(e-1)*4+2];case Xr.H:return Io[(e-1)*4+3];default:return}},Do.getTotalCodewordsCount=function(e,r){switch(r){case Xr.L:return Oo[(e-1)*4+0];case Xr.M:return Oo[(e-1)*4+1];case Xr.Q:return Oo[(e-1)*4+2];case Xr.H:return Oo[(e-1)*4+3];default:return}};var $f={},Ao={};const ps=new Uint8Array(512),$o=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)ps[r]=e,$o[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)ps[r]=ps[r-255]})(),Ao.log=function(e){if(e<1)throw new Error("log("+e+")");return $o[e]},Ao.exp=function(e){return ps[e]},Ao.mul=function(e,r){return e===0||r===0?0:ps[$o[e]+$o[r]]},function(t){const e=Ao;t.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(n[o],i[a]);return s},t.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}}($f);const Tf=$f;function Lc(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Lc.prototype.initialize=function(e){this.degree=e,this.genPoly=Tf.generateECPolynomial(this.degree)},Lc.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=Tf.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(n,i),s}return n};var Z5=Lc,Nf={},en={},Mc={};Mc.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Cr={};const Rf="[0-9]+",G5="[A-Z $%*+\\-./:]+";let gs="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";gs=gs.replace(/u/g,"\\u");const Y5="(?:(?![A-Z0-9 $%*+\\-./:]|"+gs+`)(?:.|[\r
]))+`;Cr.KANJI=new RegExp(gs,"g"),Cr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Cr.BYTE=new RegExp(Y5,"g"),Cr.NUMERIC=new RegExp(Rf,"g"),Cr.ALPHANUMERIC=new RegExp(G5,"g");const J5=new RegExp("^"+gs+"$"),Q5=new RegExp("^"+Rf+"$"),X5=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Cr.testKanji=function(e){return J5.test(e)},Cr.testNumeric=function(e){return Q5.test(e)},Cr.testAlphanumeric=function(e){return X5.test(e)},function(t){const e=Mc,r=Cr;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return n(s)}catch{return o}}}(en),function(t){const e=Xt,r=Do,n=Co,i=en,s=Mc,o=7973,a=e.getBCHDigit(o);function c(p,y,v){for(let x=1;x<=40;x++)if(y<=t.getCapacity(x,v,p))return x}function l(p,y){return i.getCharCountIndicator(p,y)+4}function d(p,y){let v=0;return p.forEach(function(x){const O=l(x.mode,y);v+=O+x.getBitsLength()}),v}function f(p,y){for(let v=1;v<=40;v++)if(d(p,v)<=t.getCapacity(v,y,i.MIXED))return v}t.from=function(y,v){return s.isValid(y)?parseInt(y,10):v},t.getCapacity=function(y,v,x){if(!s.isValid(y))throw new Error("Invalid QR Code version");typeof x>"u"&&(x=i.BYTE);const O=e.getSymbolTotalCodewords(y),D=r.getTotalCodewordsCount(y,v),_=(O-D)*8;if(x===i.MIXED)return _;const S=_-l(x,y);switch(x){case i.NUMERIC:return Math.floor(S/10*3);case i.ALPHANUMERIC:return Math.floor(S/11*2);case i.KANJI:return Math.floor(S/13);case i.BYTE:default:return Math.floor(S/8)}},t.getBestVersionForData=function(y,v){let x;const O=n.from(v,n.M);if(Array.isArray(y)){if(y.length>1)return f(y,O);if(y.length===0)return 1;x=y[0]}else x=y;return c(x.mode,x.getLength(),O)},t.getEncodedBits=function(y){if(!s.isValid(y)||y<7)throw new Error("Invalid QR Code version");let v=y<<12;for(;e.getBCHDigit(v)-a>=0;)v^=o<<e.getBCHDigit(v)-a;return y<<12|v}}(Nf);var Pf={};const Uc=Xt,Lf=1335,e_=21522,Mf=Uc.getBCHDigit(Lf);Pf.getEncodedBits=function(e,r){const n=e.bit<<3|r;let i=n<<10;for(;Uc.getBCHDigit(i)-Mf>=0;)i^=Lf<<Uc.getBCHDigit(i)-Mf;return(n<<10|i)^e_};var Uf={};const t_=en;function ci(t){this.mode=t_.NUMERIC,this.data=t.toString()}ci.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},ci.prototype.getLength=function(){return this.data.length},ci.prototype.getBitsLength=function(){return ci.getBitsLength(this.data.length)},ci.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);const s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};var r_=ci;const n_=en,kc=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function li(t){this.mode=n_.ALPHANUMERIC,this.data=t}li.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},li.prototype.getLength=function(){return this.data.length},li.prototype.getBitsLength=function(){return li.getBitsLength(this.data.length)},li.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=kc.indexOf(this.data[r])*45;n+=kc.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(kc.indexOf(this.data[r]),6)};var i_=li,s_=function(e){for(var r=[],n=e.length,i=0;i<n;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&n>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){r.push(s);continue}if(s<2048){r.push(s>>6|192),r.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128);continue}if(s>=65536&&s<=1114111){r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const o_=s_,a_=en;function ui(t){this.mode=a_.BYTE,typeof t=="string"&&(t=o_(t)),this.data=new Uint8Array(t)}ui.getBitsLength=function(e){return e*8},ui.prototype.getLength=function(){return this.data.length},ui.prototype.getBitsLength=function(){return ui.getBitsLength(this.data.length)},ui.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var c_=ui;const l_=en,u_=Xt;function hi(t){this.mode=l_.KANJI,this.data=t}hi.getBitsLength=function(e){return e*13},hi.prototype.getLength=function(){return this.data.length},hi.prototype.getBitsLength=function(){return hi.getBitsLength(this.data.length)},hi.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=u_.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var h_=hi,kf={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,i){var s={},o={};o[n]=0;var a=e.PriorityQueue.make();a.push(n,0);for(var c,l,d,f,p,y,v,x,O;!a.empty();){c=a.pop(),l=c.value,f=c.cost,p=r[l]||{};for(d in p)p.hasOwnProperty(d)&&(y=p[d],v=f+y,x=o[d],O=typeof o[d]>"u",(O||x>v)&&(o[d]=v,a.push(d,v),s[d]=l))}if(typeof i<"u"&&typeof o[i]>"u"){var D=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(D)}return s},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],s=n;s;)i.push(s),r[s],s=r[s];return i.reverse(),i},find_path:function(r,n,i){var s=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},s;r=r||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(kf);var d_=kf.exports;(function(t){const e=en,r=r_,n=i_,i=c_,s=h_,o=Cr,a=Xt,c=d_;function l(D){return unescape(encodeURIComponent(D)).length}function d(D,_,S){const w=[];let E;for(;(E=D.exec(S))!==null;)w.push({data:E[0],index:E.index,mode:_,length:E[0].length});return w}function f(D){const _=d(o.NUMERIC,e.NUMERIC,D),S=d(o.ALPHANUMERIC,e.ALPHANUMERIC,D);let w,E;return a.isKanjiModeEnabled()?(w=d(o.BYTE,e.BYTE,D),E=d(o.KANJI,e.KANJI,D)):(w=d(o.BYTE_KANJI,e.BYTE,D),E=[]),_.concat(S,w,E).sort(function(u,m){return u.index-m.index}).map(function(u){return{data:u.data,mode:u.mode,length:u.length}})}function p(D,_){switch(_){case e.NUMERIC:return r.getBitsLength(D);case e.ALPHANUMERIC:return n.getBitsLength(D);case e.KANJI:return s.getBitsLength(D);case e.BYTE:return i.getBitsLength(D)}}function y(D){return D.reduce(function(_,S){const w=_.length-1>=0?_[_.length-1]:null;return w&&w.mode===S.mode?(_[_.length-1].data+=S.data,_):(_.push(S),_)},[])}function v(D){const _=[];for(let S=0;S<D.length;S++){const w=D[S];switch(w.mode){case e.NUMERIC:_.push([w,{data:w.data,mode:e.ALPHANUMERIC,length:w.length},{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.ALPHANUMERIC:_.push([w,{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.KANJI:_.push([w,{data:w.data,mode:e.BYTE,length:l(w.data)}]);break;case e.BYTE:_.push([{data:w.data,mode:e.BYTE,length:l(w.data)}])}}return _}function x(D,_){const S={},w={start:{}};let E=["start"];for(let g=0;g<D.length;g++){const u=D[g],m=[];for(let A=0;A<u.length;A++){const N=u[A],M=""+g+A;m.push(M),S[M]={node:N,lastCount:0},w[M]={};for(let B=0;B<E.length;B++){const q=E[B];S[q]&&S[q].node.mode===N.mode?(w[q][M]=p(S[q].lastCount+N.length,N.mode)-p(S[q].lastCount,N.mode),S[q].lastCount+=N.length):(S[q]&&(S[q].lastCount=N.length),w[q][M]=p(N.length,N.mode)+4+e.getCharCountIndicator(N.mode,_))}}E=m}for(let g=0;g<E.length;g++)w[E[g]].end=0;return{map:w,table:S}}function O(D,_){let S;const w=e.getBestModeForData(D);if(S=e.from(_,w),S!==e.BYTE&&S.bit<w.bit)throw new Error('"'+D+'" cannot be encoded with mode '+e.toString(S)+`.
 Suggested mode is: `+e.toString(w));switch(S===e.KANJI&&!a.isKanjiModeEnabled()&&(S=e.BYTE),S){case e.NUMERIC:return new r(D);case e.ALPHANUMERIC:return new n(D);case e.KANJI:return new s(D);case e.BYTE:return new i(D)}}t.fromArray=function(_){return _.reduce(function(S,w){return typeof w=="string"?S.push(O(w,null)):w.data&&S.push(O(w.data,w.mode)),S},[])},t.fromString=function(_,S){const w=f(_,a.isKanjiModeEnabled()),E=v(w),g=x(E,S),u=c.find_path(g.map,"start","end"),m=[];for(let A=1;A<u.length-1;A++)m.push(g.table[u[A]].node);return t.fromArray(y(m))},t.rawSplit=function(_){return t.fromArray(f(_,a.isKanjiModeEnabled()))}})(Uf);const To=Xt,Fc=Co,f_=V5,p_=H5,g_=Df,m_=If,jc=Af,Bc=Do,y_=Z5,No=Nf,w_=Pf,v_=en,zc=Uf;function b_(t,e){const r=t.size,n=m_.getPositions(e);for(let i=0;i<n.length;i++){const s=n[i][0],o=n[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||r<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(s+a,o+c,!0,!0):t.set(s+a,o+c,!1,!0))}}function __(t){const e=t.size;for(let r=8;r<e-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function E_(t,e){const r=g_.getPositions(e);for(let n=0;n<r.length;n++){const i=r[n][0],s=r[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function x_(t,e){const r=t.size,n=No.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+r-8-3,o=(n>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function qc(t,e,r){const n=t.size,i=w_.getEncodedBits(e,r);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(n-15+s,8,o,!0),s<8?t.set(8,n-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(n-8,8,1,!0)}function S_(t,e){const r=t.size;let n=-1,i=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,a-c)){let l=!1;o<e.length&&(l=(e[o]>>>s&1)===1),t.set(i,a-c,l),s--,s===-1&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function C_(t,e,r){const n=new f_;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),v_.getCharCountIndicator(c.mode,t)),c.write(n)});const i=To.getSymbolTotalCodewords(t),s=Bc.getTotalCodewordsCount(t,e),o=(i-s)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let c=0;c<a;c++)n.put(c%2?17:236,8);return D_(n,t,e)}function D_(t,e,r){const n=To.getSymbolTotalCodewords(e),i=Bc.getTotalCodewordsCount(e,r),s=n-i,o=Bc.getBlocksCount(e,r),a=n%o,c=o-a,l=Math.floor(n/o),d=Math.floor(s/o),f=d+1,p=l-d,y=new y_(p);let v=0;const x=new Array(o),O=new Array(o);let D=0;const _=new Uint8Array(t.buffer);for(let u=0;u<o;u++){const m=u<c?d:f;x[u]=_.slice(v,v+m),O[u]=y.encode(x[u]),v+=m,D=Math.max(D,m)}const S=new Uint8Array(n);let w=0,E,g;for(E=0;E<D;E++)for(g=0;g<o;g++)E<x[g].length&&(S[w++]=x[g][E]);for(E=0;E<p;E++)for(g=0;g<o;g++)S[w++]=O[g][E];return S}function I_(t,e,r,n){let i;if(Array.isArray(t))i=zc.fromArray(t);else if(typeof t=="string"){let l=e;if(!l){const d=zc.rawSplit(t);l=No.getBestVersionForData(d,r)}i=zc.fromString(t,l||40)}else throw new Error("Invalid data");const s=No.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=C_(e,r,i),a=To.getSymbolSize(e),c=new p_(a);return b_(c,e),__(c),E_(c,e),qc(c,r,0),e>=7&&x_(c,e),S_(c,o),isNaN(n)&&(n=jc.getBestMask(c,qc.bind(null,c,r))),jc.applyMask(n,c),qc(c,r,n),{modules:c,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}Sf.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=Fc.M,i,s;return typeof r<"u"&&(n=Fc.from(r.errorCorrectionLevel,Fc.M),i=No.from(r.version),s=jc.from(r.maskPattern),r.toSJISFunc&&To.setToSJISFunction(r.toSJISFunc)),I_(e,i,n,s)};var Ff={},Wc={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const s=t.getScale(n,i);return Math.floor((n+i.margin*2)*s)},t.qrToImageData=function(n,i,s){const o=i.modules.size,a=i.modules.data,c=t.getScale(o,s),l=Math.floor((o+s.margin*2)*c),d=s.margin*c,f=[s.color.light,s.color.dark];for(let p=0;p<l;p++)for(let y=0;y<l;y++){let v=(p*l+y)*4,x=s.color.light;if(p>=d&&y>=d&&p<l-d&&y<l-d){const O=Math.floor((p-d)/c),D=Math.floor((y-d)/c);x=f[a[O*o+D]?1:0]}n[v++]=x.r,n[v++]=x.g,n[v++]=x.b,n[v]=x.a}}})(Wc),function(t){const e=Wc;function r(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let c=a,l=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(l=n()),c=e.getOptions(c);const d=e.getImageWidth(s.modules.size,c),f=l.getContext("2d"),p=f.createImageData(d,d);return e.qrToImageData(p.data,s,c),r(f,l,d),f.putImageData(p,0,0),l},t.renderToDataURL=function(s,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const l=t.render(s,o,c),d=c.type||"image/png",f=c.rendererOpts||{};return l.toDataURL(d,f.quality)}}(Ff);var jf={};const O_=Wc;function Bf(t,e){const r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function Vc(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function A_(t,e,r){let n="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),l=Math.floor(a/e);!c&&!s&&(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(n+=s?Vc("M",c+r,.5+l+r):Vc("m",i,0),i=0,s=!1),c+1<e&&t[a+1]||(n+=Vc("h",o),o=0)):i++}return n}jf.render=function(e,r,n){const i=O_.getOptions(r),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,c=i.color.light.a?"<path "+Bf(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+Bf(i.color.dark,"stroke")+' d="'+A_(o,s,i.margin)+'"/>',d='viewBox="0 0 '+a+" "+a+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof n=="function"&&n(null,p),p};const $_=q5,Hc=Sf,zf=Ff,T_=jf;function Kc(t,e,r,n,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!$_())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(c,l){try{const d=Hc.create(r,n);c(t(d,e,n))}catch(d){l(d)}})}try{const c=Hc.create(r,n);i(null,t(c,e,n))}catch(c){i(c)}}ds.create=Hc.create,ds.toCanvas=Kc.bind(null,zf.render),ds.toDataURL=Kc.bind(null,zf.renderToDataURL),ds.toString=Kc.bind(null,function(t,e,r){return T_.render(t,r)});var N_=Object.defineProperty,qf=Object.getOwnPropertySymbols,R_=Object.prototype.hasOwnProperty,P_=Object.prototype.propertyIsEnumerable,Wf=(t,e,r)=>e in t?N_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Zc=(t,e)=>{for(var r in e||(e={}))R_.call(e,r)&&Wf(t,r,e[r]);if(qf)for(var r of qf(e))P_.call(e,r)&&Wf(t,r,e[r]);return t};function L_(){var t;const e=(t=zr.state.themeMode)!=null?t:"dark",r={light:{foreground:{1:"rgb(20,20,20)",2:"rgb(121,134,134)",3:"rgb(158,169,169)"},background:{1:"rgb(255,255,255)",2:"rgb(241,243,243)",3:"rgb(228,231,231)"},overlay:"rgba(0,0,0,0.1)"},dark:{foreground:{1:"rgb(228,231,231)",2:"rgb(148,158,158)",3:"rgb(110,119,119)"},background:{1:"rgb(20,20,20)",2:"rgb(39,42,42)",3:"rgb(59,64,64)"},overlay:"rgba(255,255,255,0.1)"}}[e];return{"--wcm-color-fg-1":r.foreground[1],"--wcm-color-fg-2":r.foreground[2],"--wcm-color-fg-3":r.foreground[3],"--wcm-color-bg-1":r.background[1],"--wcm-color-bg-2":r.background[2],"--wcm-color-bg-3":r.background[3],"--wcm-color-overlay":r.overlay}}function Vf(){return{"--wcm-accent-color":"#3396FF","--wcm-accent-fill-color":"#FFFFFF","--wcm-z-index":"89","--wcm-background-color":"#3396FF","--wcm-background-border-radius":"8px","--wcm-container-border-radius":"30px","--wcm-wallet-icon-border-radius":"15px","--wcm-wallet-icon-large-border-radius":"30px","--wcm-wallet-icon-small-border-radius":"7px","--wcm-input-border-radius":"28px","--wcm-button-border-radius":"10px","--wcm-notification-border-radius":"36px","--wcm-secondary-button-border-radius":"28px","--wcm-icon-button-border-radius":"50%","--wcm-button-hover-highlight-border-radius":"10px","--wcm-text-big-bold-size":"20px","--wcm-text-big-bold-weight":"600","--wcm-text-big-bold-line-height":"24px","--wcm-text-big-bold-letter-spacing":"-0.03em","--wcm-text-big-bold-text-transform":"none","--wcm-text-xsmall-bold-size":"10px","--wcm-text-xsmall-bold-weight":"700","--wcm-text-xsmall-bold-line-height":"12px","--wcm-text-xsmall-bold-letter-spacing":"0.02em","--wcm-text-xsmall-bold-text-transform":"uppercase","--wcm-text-xsmall-regular-size":"12px","--wcm-text-xsmall-regular-weight":"600","--wcm-text-xsmall-regular-line-height":"14px","--wcm-text-xsmall-regular-letter-spacing":"-0.03em","--wcm-text-xsmall-regular-text-transform":"none","--wcm-text-small-thin-size":"14px","--wcm-text-small-thin-weight":"500","--wcm-text-small-thin-line-height":"16px","--wcm-text-small-thin-letter-spacing":"-0.03em","--wcm-text-small-thin-text-transform":"none","--wcm-text-small-regular-size":"14px","--wcm-text-small-regular-weight":"600","--wcm-text-small-regular-line-height":"16px","--wcm-text-small-regular-letter-spacing":"-0.03em","--wcm-text-small-regular-text-transform":"none","--wcm-text-medium-regular-size":"16px","--wcm-text-medium-regular-weight":"600","--wcm-text-medium-regular-line-height":"20px","--wcm-text-medium-regular-letter-spacing":"-0.03em","--wcm-text-medium-regular-text-transform":"none","--wcm-font-family":"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', sans-serif","--wcm-font-feature-settings":"'tnum' on, 'lnum' on, 'case' on","--wcm-success-color":"rgb(38,181,98)","--wcm-error-color":"rgb(242, 90, 103)","--wcm-overlay-background-color":"rgba(0, 0, 0, 0.3)","--wcm-overlay-backdrop-filter":"none"}}const Ie={getPreset(t){return Vf()[t]},setTheme(){const t=document.querySelector(":root"),{themeVariables:e}=zr.state;if(t){const r=Zc(Zc(Zc({},L_()),Vf()),e);Object.entries(r).forEach(([n,i])=>t.style.setProperty(n,i))}},globalCss:ke`*,::after,::before{margin:0;padding:0;box-sizing:border-box;font-style:normal;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;backface-visibility:hidden}button{cursor:pointer;display:flex;justify-content:center;align-items:center;position:relative;border:none;background-color:transparent;transition:all .2s ease}@media (hover:hover) and (pointer:fine){button:active{transition:all .1s ease;transform:scale(.93)}}button::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;transition:background-color,.2s ease}button:disabled{cursor:not-allowed}button svg,button wcm-text{position:relative;z-index:1}input{border:none;outline:0;appearance:none}img{display:block}::selection{color:var(--wcm-accent-fill-color);background:var(--wcm-accent-color)}`},M_=ke`button{border-radius:var(--wcm-secondary-button-border-radius);height:28px;padding:0 10px;background-color:var(--wcm-accent-color)}button path{fill:var(--wcm-accent-fill-color)}button::after{border-radius:inherit;border:1px solid var(--wcm-color-overlay)}button:disabled::after{background-color:transparent}.wcm-icon-left svg{margin-right:5px}.wcm-icon-right svg{margin-left:5px}button:active::after{background-color:var(--wcm-color-overlay)}.wcm-ghost,.wcm-ghost:active::after,.wcm-outline{background-color:transparent}.wcm-ghost:active{opacity:.5}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}.wcm-ghost:hover::after{background-color:transparent}.wcm-ghost:hover{opacity:.5}}button:disabled{background-color:var(--wcm-color-bg-3);pointer-events:none}.wcm-ghost::after{border-color:transparent}.wcm-ghost path{fill:var(--wcm-color-fg-2)}.wcm-outline path{fill:var(--wcm-accent-color)}.wcm-outline:disabled{background-color:transparent;opacity:.5}`;var U_=Object.defineProperty,k_=Object.getOwnPropertyDescriptor,di=(t,e,r,n)=>{for(var i=n>1?void 0:n?k_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&U_(e,r,i),i};let tn=class extends _e{constructor(){super(...arguments),this.disabled=!1,this.iconLeft=void 0,this.iconRight=void 0,this.onClick=()=>null,this.variant="default"}render(){const t={"wcm-icon-left":this.iconLeft!==void 0,"wcm-icon-right":this.iconRight!==void 0,"wcm-ghost":this.variant==="ghost","wcm-outline":this.variant==="outline"};let e="inverse";return this.variant==="ghost"&&(e="secondary"),this.variant==="outline"&&(e="accent"),G`<button class="${Lr(t)}" ?disabled="${this.disabled}" @click="${this.onClick}">${this.iconLeft}<wcm-text variant="small-regular" color="${e}"><slot></slot></wcm-text>${this.iconRight}</button>`}};tn.styles=[Ie.globalCss,M_],di([me({type:Boolean})],tn.prototype,"disabled",2),di([me()],tn.prototype,"iconLeft",2),di([me()],tn.prototype,"iconRight",2),di([me()],tn.prototype,"onClick",2),di([me()],tn.prototype,"variant",2),tn=di([Te("wcm-button")],tn);const F_=ke`:host{display:inline-block}button{padding:0 15px 1px;height:40px;border-radius:var(--wcm-button-border-radius);color:var(--wcm-accent-fill-color);background-color:var(--wcm-accent-color)}button::after{content:'';top:0;bottom:0;left:0;right:0;position:absolute;background-color:transparent;border-radius:inherit;transition:background-color .2s ease;border:1px solid var(--wcm-color-overlay)}button:active::after{background-color:var(--wcm-color-overlay)}button:disabled{padding-bottom:0;background-color:var(--wcm-color-bg-3);color:var(--wcm-color-fg-3)}.wcm-secondary{color:var(--wcm-accent-color);background-color:transparent}.wcm-secondary::after{display:none}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}}`;var j_=Object.defineProperty,B_=Object.getOwnPropertyDescriptor,Gc=(t,e,r,n)=>{for(var i=n>1?void 0:n?B_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&j_(e,r,i),i};let ms=class extends _e{constructor(){super(...arguments),this.disabled=!1,this.variant="primary"}render(){const t={"wcm-secondary":this.variant==="secondary"};return G`<button ?disabled="${this.disabled}" class="${Lr(t)}"><slot></slot></button>`}};ms.styles=[Ie.globalCss,F_],Gc([me({type:Boolean})],ms.prototype,"disabled",2),Gc([me()],ms.prototype,"variant",2),ms=Gc([Te("wcm-button-big")],ms);const z_=ke`:host{background-color:var(--wcm-color-bg-2);border-top:1px solid var(--wcm-color-bg-3)}div{padding:10px 20px;display:inherit;flex-direction:inherit;align-items:inherit;width:inherit;justify-content:inherit}`;var q_=Object.defineProperty,W_=Object.getOwnPropertyDescriptor,V_=(t,e,r,n)=>{for(var i=n>1?void 0:n?W_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&q_(e,r,i),i};let Yc=class extends _e{render(){return G`<div><slot></slot></div>`}};Yc.styles=[Ie.globalCss,z_],Yc=V_([Te("wcm-info-footer")],Yc);const Be={CROSS_ICON:Qe`<svg width="12" height="12" viewBox="0 0 12 12"><path d="M9.94 11A.75.75 0 1 0 11 9.94L7.414 6.353a.5.5 0 0 1 0-.708L11 2.061A.75.75 0 1 0 9.94 1L6.353 4.586a.5.5 0 0 1-.708 0L2.061 1A.75.75 0 0 0 1 2.06l3.586 3.586a.5.5 0 0 1 0 .708L1 9.939A.75.75 0 1 0 2.06 11l3.586-3.586a.5.5 0 0 1 .708 0L9.939 11Z" fill="#fff"/></svg>`,WALLET_CONNECT_LOGO:Qe`<svg width="178" height="29" viewBox="0 0 178 29" id="wcm-wc-logo"><path d="M10.683 7.926c5.284-5.17 13.85-5.17 19.134 0l.636.623a.652.652 0 0 1 0 .936l-2.176 2.129a.343.343 0 0 1-.478 0l-.875-.857c-3.686-3.607-9.662-3.607-13.348 0l-.937.918a.343.343 0 0 1-.479 0l-2.175-2.13a.652.652 0 0 1 0-.936l.698-.683Zm23.633 4.403 1.935 1.895a.652.652 0 0 1 0 .936l-8.73 8.543a.687.687 0 0 1-.956 0L20.37 17.64a.172.172 0 0 0-.239 0l-6.195 6.063a.687.687 0 0 1-.957 0l-8.73-8.543a.652.652 0 0 1 0-.936l1.936-1.895a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .239 0l6.195-6.064a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .24 0l6.195-6.064a.687.687 0 0 1 .956 0ZM48.093 20.948l2.338-9.355c.139-.515.258-1.07.416-1.942.12.872.258 1.427.357 1.942l2.022 9.355h4.181l3.528-13.874h-3.21l-1.943 8.523a24.825 24.825 0 0 0-.456 2.457c-.158-.931-.317-1.625-.495-2.438l-1.883-8.542h-4.201l-2.042 8.542a41.204 41.204 0 0 0-.475 2.438 41.208 41.208 0 0 0-.476-2.438l-1.903-8.542h-3.349l3.508 13.874h4.083ZM63.33 21.304c1.585 0 2.596-.654 3.11-1.605-.059.297-.078.595-.078.892v.357h2.655V15.22c0-2.735-1.248-4.32-4.3-4.32-2.636 0-4.36 1.466-4.52 3.487h2.914c.1-.891.734-1.426 1.705-1.426.911 0 1.407.515 1.407 1.11 0 .435-.258.693-1.03.792l-1.388.159c-2.061.257-3.825 1.01-3.825 3.19 0 1.982 1.645 3.092 3.35 3.092Zm.891-2.041c-.773 0-1.348-.436-1.348-1.19 0-.733.655-1.09 1.645-1.268l.674-.119c.575-.118.892-.218 1.09-.396v.912c0 1.228-.892 2.06-2.06 2.06ZM70.398 7.074v13.874h2.874V7.074h-2.874ZM74.934 7.074v13.874h2.874V7.074h-2.874ZM84.08 21.304c2.735 0 4.5-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922H81.92ZM94.92 21.146c.633 0 1.248-.1 1.525-.179v-2.18c-.218.04-.475.06-.693.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.338v-2.24h-2.338V7.788H91.47v3.448H89.37v2.24h2.1v4.201c0 2.3 1.15 3.469 3.45 3.469ZM104.62 21.304c3.924 0 6.302-2.299 6.599-5.608h-3.111c-.238 1.803-1.506 3.032-3.369 3.032-2.2 0-3.746-1.784-3.746-4.796 0-2.953 1.605-4.638 3.805-4.638 1.883 0 2.953 1.15 3.171 2.834h3.191c-.317-3.448-2.854-5.41-6.342-5.41-3.984 0-7.036 2.695-7.036 7.214 0 4.677 2.676 7.372 6.838 7.372ZM117.449 21.304c2.993 0 5.114-1.882 5.114-5.172 0-3.23-2.121-5.233-5.114-5.233-2.972 0-5.093 2.002-5.093 5.233 0 3.29 2.101 5.172 5.093 5.172Zm0-2.22c-1.327 0-2.18-1.09-2.18-2.952 0-1.903.892-2.973 2.18-2.973 1.308 0 2.2 1.07 2.2 2.973 0 1.862-.872 2.953-2.2 2.953ZM126.569 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.229-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM137.464 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.228-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM149.949 21.304c2.735 0 4.499-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922h-3.984ZM160.876 21.304c3.013 0 4.658-1.645 4.975-4.201h-2.874c-.099 1.07-.713 1.982-2.001 1.982-1.309 0-2.2-1.21-2.2-2.993 0-1.942 1.03-2.933 2.259-2.933 1.209 0 1.803.872 1.883 1.882h2.873c-.218-2.358-1.823-4.142-4.776-4.142-2.874 0-5.153 1.903-5.153 5.193 0 3.25 1.923 5.212 5.014 5.212ZM172.067 21.146c.634 0 1.248-.1 1.526-.179v-2.18c-.218.04-.476.06-.694.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.339v-2.24h-2.339V7.788h-2.854v3.448h-2.1v2.24h2.1v4.201c0 2.3 1.15 3.469 3.449 3.469Z" fill="#fff"/></svg>`,WALLET_CONNECT_ICON:Qe`<svg width="28" height="20" viewBox="0 0 28 20"><g clip-path="url(#a)"><path d="M7.386 6.482c3.653-3.576 9.575-3.576 13.228 0l.44.43a.451.451 0 0 1 0 .648L19.55 9.033a.237.237 0 0 1-.33 0l-.606-.592c-2.548-2.496-6.68-2.496-9.228 0l-.648.634a.237.237 0 0 1-.33 0L6.902 7.602a.451.451 0 0 1 0-.647l.483-.473Zm16.338 3.046 1.339 1.31a.451.451 0 0 1 0 .648l-6.035 5.909a.475.475 0 0 1-.662 0L14.083 13.2a.119.119 0 0 0-.166 0l-4.283 4.194a.475.475 0 0 1-.662 0l-6.035-5.91a.451.451 0 0 1 0-.647l1.338-1.31a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0Z" fill="#000000"/></g><defs><clipPath id="a"><path fill="#ffffff" d="M0 0h28v20H0z"/></clipPath></defs></svg>`,WALLET_CONNECT_ICON_COLORED:Qe`<svg width="96" height="96" fill="none"><path fill="#fff" d="M25.322 33.597c12.525-12.263 32.83-12.263 45.355 0l1.507 1.476a1.547 1.547 0 0 1 0 2.22l-5.156 5.048a.814.814 0 0 1-1.134 0l-2.074-2.03c-8.737-8.555-22.903-8.555-31.64 0l-2.222 2.175a.814.814 0 0 1-1.134 0l-5.156-5.049a1.547 1.547 0 0 1 0-2.22l1.654-1.62Zm56.019 10.44 4.589 4.494a1.547 1.547 0 0 1 0 2.22l-20.693 20.26a1.628 1.628 0 0 1-2.267 0L48.283 56.632a.407.407 0 0 0-.567 0L33.03 71.012a1.628 1.628 0 0 1-2.268 0L10.07 50.75a1.547 1.547 0 0 1 0-2.22l4.59-4.494a1.628 1.628 0 0 1 2.267 0l14.687 14.38c.156.153.41.153.567 0l14.685-14.38a1.628 1.628 0 0 1 2.268 0l14.687 14.38c.156.153.41.153.567 0l14.686-14.38a1.628 1.628 0 0 1 2.268 0Z"/><path stroke="#000" d="M25.672 33.954c12.33-12.072 32.325-12.072 44.655 0l1.508 1.476a1.047 1.047 0 0 1 0 1.506l-5.157 5.048a.314.314 0 0 1-.434 0l-2.074-2.03c-8.932-8.746-23.409-8.746-32.34 0l-2.222 2.174a.314.314 0 0 1-.434 0l-5.157-5.048a1.047 1.047 0 0 1 0-1.506l1.655-1.62Zm55.319 10.44 4.59 4.494a1.047 1.047 0 0 1 0 1.506l-20.694 20.26a1.128 1.128 0 0 1-1.568 0l-14.686-14.38a.907.907 0 0 0-1.267 0L32.68 70.655a1.128 1.128 0 0 1-1.568 0L10.42 50.394a1.047 1.047 0 0 1 0-1.506l4.59-4.493a1.128 1.128 0 0 1 1.567 0l14.687 14.379a.907.907 0 0 0 1.266 0l-.35-.357.35.357 14.686-14.38a1.128 1.128 0 0 1 1.568 0l14.687 14.38a.907.907 0 0 0 1.267 0l14.686-14.38a1.128 1.128 0 0 1 1.568 0Z"/></svg>`,BACK_ICON:Qe`<svg width="10" height="18" viewBox="0 0 10 18"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.735.179a.75.75 0 0 1 .087 1.057L2.92 8.192a1.25 1.25 0 0 0 0 1.617l5.902 6.956a.75.75 0 1 1-1.144.97L1.776 10.78a2.75 2.75 0 0 1 0-3.559L7.678.265A.75.75 0 0 1 8.735.18Z" fill="#fff"/></svg>`,COPY_ICON:Qe`<svg width="24" height="24" fill="none"><path fill="#fff" fill-rule="evenodd" d="M7.01 7.01c.03-1.545.138-2.5.535-3.28A5 5 0 0 1 9.73 1.545C10.8 1 12.2 1 15 1c2.8 0 4.2 0 5.27.545a5 5 0 0 1 2.185 2.185C23 4.8 23 6.2 23 9c0 2.8 0 4.2-.545 5.27a5 5 0 0 1-2.185 2.185c-.78.397-1.735.505-3.28.534l-.001.01c-.03 1.54-.138 2.493-.534 3.27a5 5 0 0 1-2.185 2.186C13.2 23 11.8 23 9 23c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C1 19.2 1 17.8 1 15c0-2.8 0-4.2.545-5.27A5 5 0 0 1 3.73 7.545C4.508 7.149 5.46 7.04 7 7.01h.01ZM15 15.5c-1.425 0-2.403-.001-3.162-.063-.74-.06-1.139-.172-1.427-.319a3.5 3.5 0 0 1-1.53-1.529c-.146-.288-.257-.686-.318-1.427C8.501 11.403 8.5 10.425 8.5 9c0-1.425.001-2.403.063-3.162.06-.74.172-1.139.318-1.427a3.5 3.5 0 0 1 1.53-1.53c.288-.146.686-.257 1.427-.318.759-.062 1.737-.063 3.162-.063 1.425 0 2.403.001 3.162.063.74.06 1.139.172 1.427.318a3.5 3.5 0 0 1 1.53 1.53c.146.288.257.686.318 1.427.062.759.063 1.737.063 3.162 0 1.425-.001 2.403-.063 3.162-.06.74-.172 1.139-.319 1.427a3.5 3.5 0 0 1-1.529 1.53c-.288.146-.686.257-1.427.318-.759.062-1.737.063-3.162.063ZM7 8.511c-.444.009-.825.025-1.162.052-.74.06-1.139.172-1.427.318a3.5 3.5 0 0 0-1.53 1.53c-.146.288-.257.686-.318 1.427-.062.759-.063 1.737-.063 3.162 0 1.425.001 2.403.063 3.162.06.74.172 1.139.318 1.427a3.5 3.5 0 0 0 1.53 1.53c.288.146.686.257 1.427.318.759.062 1.737.063 3.162.063 1.425 0 2.403-.001 3.162-.063.74-.06 1.139-.172 1.427-.319a3.5 3.5 0 0 0 1.53-1.53c.146-.287.257-.685.318-1.426.027-.337.043-.718.052-1.162H15c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C7 13.2 7 11.8 7 9v-.489Z" clip-rule="evenodd"/></svg>`,RETRY_ICON:Qe`<svg width="15" height="16" viewBox="0 0 15 16"><path d="M6.464 2.03A.75.75 0 0 0 5.403.97L2.08 4.293a1 1 0 0 0 0 1.414L5.403 9.03a.75.75 0 0 0 1.06-1.06L4.672 6.177a.25.25 0 0 1 .177-.427h2.085a4 4 0 1 1-3.93 4.746c-.077-.407-.405-.746-.82-.746-.414 0-.755.338-.7.748a5.501 5.501 0 1 0 5.45-6.248H4.848a.25.25 0 0 1-.177-.427L6.464 2.03Z" fill="#fff"/></svg>`,DESKTOP_ICON:Qe`<svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C2.204 1 3.13 1 4.98 1h6.04c1.85 0 2.775 0 3.466.394a3 3 0 0 1 1.12 1.12C16 3.204 16 4.13 16 5.98v1.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C13.796 12 12.87 12 11.02 12H4.98c-1.85 0-2.775 0-3.466-.394a3 3 0 0 1-1.12-1.12C0 9.796 0 8.87 0 7.02V5.98ZM4.98 2.5h6.04c.953 0 1.568.001 2.034.043.446.04.608.108.69.154a1.5 1.5 0 0 1 .559.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033v1.04c0 .952-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.046-.243.114-.69.154-.466.042-1.08.043-2.033.043H4.98c-.952 0-1.568-.001-2.034-.043-.446-.04-.608-.108-.69-.154a1.5 1.5 0 0 1-.559-.56c-.046-.08-.114-.243-.154-.69-.042-.465-.043-1.08-.043-2.033V5.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.046.243-.114.69-.154.465-.042 1.08-.043 2.033-.043Z" fill="#fff"/><path d="M4 14.25a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,MOBILE_ICON:Qe`<svg width="16" height="16" viewBox="0 0 16 16"><path d="M6.75 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C5.204 0 6.136 0 8 0s2.795 0 3.486.394a3 3 0 0 1 1.12 1.12C13 2.204 13 3.13 13 4.98v6.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C10.796 16 9.864 16 8 16s-2.795 0-3.486-.394a3 3 0 0 1-1.12-1.12C3 13.796 3 12.87 3 11.02V4.98Zm8.5 0v6.04c0 .953-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.045-.242.113-.693.154-.47.042-1.091.043-2.05.043-.959 0-1.58-.001-2.05-.043-.45-.04-.613-.109-.693-.154a1.5 1.5 0 0 1-.56-.56c-.046-.08-.114-.243-.154-.69-.042-.466-.043-1.08-.043-2.033V4.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.045.243-.113.693-.154C6.42 1.501 7.041 1.5 8 1.5c.959 0 1.58.001 2.05.043.45.04.613.109.693.154a1.5 1.5 0 0 1 .56.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033Z" fill="#fff"/></svg>`,ARROW_DOWN_ICON:Qe`<svg width="14" height="14" viewBox="0 0 14 14"><path d="M2.28 7.47a.75.75 0 0 0-1.06 1.06l5.25 5.25a.75.75 0 0 0 1.06 0l5.25-5.25a.75.75 0 0 0-1.06-1.06l-3.544 3.543a.25.25 0 0 1-.426-.177V.75a.75.75 0 0 0-1.5 0v10.086a.25.25 0 0 1-.427.176L2.28 7.47Z" fill="#fff"/></svg>`,ARROW_UP_RIGHT_ICON:Qe`<svg width="15" height="14" fill="none"><path d="M4.5 1.75A.75.75 0 0 1 5.25 1H12a1.5 1.5 0 0 1 1.5 1.5v6.75a.75.75 0 0 1-1.5 0V4.164a.25.25 0 0 0-.427-.176L4.061 11.5A.75.75 0 0 1 3 10.44l7.513-7.513a.25.25 0 0 0-.177-.427H5.25a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,ARROW_RIGHT_ICON:Qe`<svg width="6" height="14" viewBox="0 0 6 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.181 1.099a.75.75 0 0 1 1.024.279l2.433 4.258a2.75 2.75 0 0 1 0 2.729l-2.433 4.257a.75.75 0 1 1-1.303-.744L4.335 7.62a1.25 1.25 0 0 0 0-1.24L1.902 2.122a.75.75 0 0 1 .28-1.023Z" fill="#fff"/></svg>`,QRCODE_ICON:Qe`<svg width="25" height="24" viewBox="0 0 25 24"><path d="M23.748 9a.748.748 0 0 0 .748-.752c-.018-2.596-.128-4.07-.784-5.22a6 6 0 0 0-2.24-2.24c-1.15-.656-2.624-.766-5.22-.784a.748.748 0 0 0-.752.748c0 .414.335.749.748.752 1.015.007 1.82.028 2.494.088.995.09 1.561.256 1.988.5.7.398 1.28.978 1.679 1.678.243.427.41.993.498 1.988.061.675.082 1.479.09 2.493a.753.753 0 0 0 .75.749ZM3.527.788C4.677.132 6.152.022 8.747.004A.748.748 0 0 1 9.5.752a.753.753 0 0 1-.749.752c-1.014.007-1.818.028-2.493.088-.995.09-1.561.256-1.988.5-.7.398-1.28.978-1.679 1.678-.243.427-.41.993-.499 1.988-.06.675-.081 1.479-.088 2.493A.753.753 0 0 1 1.252 9a.748.748 0 0 1-.748-.752c.018-2.596.128-4.07.784-5.22a6 6 0 0 1 2.24-2.24ZM1.252 15a.748.748 0 0 0-.748.752c.018 2.596.128 4.07.784 5.22a6 6 0 0 0 2.24 2.24c1.15.656 2.624.766 5.22.784a.748.748 0 0 0 .752-.748.753.753 0 0 0-.749-.752c-1.014-.007-1.818-.028-2.493-.089-.995-.089-1.561-.255-1.988-.498a4.5 4.5 0 0 1-1.679-1.68c-.243-.426-.41-.992-.499-1.987-.06-.675-.081-1.479-.088-2.493A.753.753 0 0 0 1.252 15ZM22.996 15.749a.753.753 0 0 1 .752-.749c.415 0 .751.338.748.752-.018 2.596-.128 4.07-.784 5.22a6 6 0 0 1-2.24 2.24c-1.15.656-2.624.766-5.22.784a.748.748 0 0 1-.752-.748c0-.414.335-.749.748-.752 1.015-.007 1.82-.028 2.494-.089.995-.089 1.561-.255 1.988-.498a4.5 4.5 0 0 0 1.679-1.68c.243-.426.41-.992.498-1.987.061-.675.082-1.479.09-2.493Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 4a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 11h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 4H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM13.5 6.5A2.5 2.5 0 0 1 16 4h2a2.5 2.5 0 0 1 2.5 2.5v2A2.5 2.5 0 0 1 18 11h-2a2.5 2.5 0 0 1-2.5-2.5v-2Zm2.5-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1ZM7 13a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 20h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 13H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Z" fill="#fff"/><path d="M13.5 15.5c0-.465 0-.697.038-.89a2 2 0 0 1 1.572-1.572C15.303 13 15.535 13 16 13v2.5h-2.5ZM18 13c.465 0 .697 0 .89.038a2 2 0 0 1 1.572 1.572c.038.193.038.425.038.89H18V13ZM18 17.5h2.5c0 .465 0 .697-.038.89a2 2 0 0 1-1.572 1.572C18.697 20 18.465 20 18 20v-2.5ZM13.5 17.5H16V20c-.465 0-.697 0-.89-.038a2 2 0 0 1-1.572-1.572c-.038-.193-.038-.425-.038-.89Z" fill="#fff"/></svg>`,SCAN_ICON:Qe`<svg width="16" height="16" fill="none"><path fill="#fff" d="M10 15.216c0 .422.347.763.768.74 1.202-.064 2.025-.222 2.71-.613a5.001 5.001 0 0 0 1.865-1.866c.39-.684.549-1.507.613-2.709a.735.735 0 0 0-.74-.768.768.768 0 0 0-.76.732c-.009.157-.02.306-.032.447-.073.812-.206 1.244-.384 1.555-.31.545-.761.996-1.306 1.306-.311.178-.743.311-1.555.384-.141.013-.29.023-.447.032a.768.768 0 0 0-.732.76ZM10 .784c0 .407.325.737.732.76.157.009.306.02.447.032.812.073 1.244.206 1.555.384a3.5 3.5 0 0 1 1.306 1.306c.178.311.311.743.384 1.555.013.142.023.29.032.447a.768.768 0 0 0 .76.732.734.734 0 0 0 .74-.768c-.064-1.202-.222-2.025-.613-2.71A5 5 0 0 0 13.477.658c-.684-.39-1.507-.549-2.709-.613a.735.735 0 0 0-.768.74ZM5.232.044A.735.735 0 0 1 6 .784a.768.768 0 0 1-.732.76c-.157.009-.305.02-.447.032-.812.073-1.244.206-1.555.384A3.5 3.5 0 0 0 1.96 3.266c-.178.311-.311.743-.384 1.555-.013.142-.023.29-.032.447A.768.768 0 0 1 .784 6a.735.735 0 0 1-.74-.768c.064-1.202.222-2.025.613-2.71A5 5 0 0 1 2.523.658C3.207.267 4.03.108 5.233.044ZM5.268 14.456a.768.768 0 0 1 .732.76.734.734 0 0 1-.768.74c-1.202-.064-2.025-.222-2.71-.613a5 5 0 0 1-1.865-1.866c-.39-.684-.549-1.507-.613-2.709A.735.735 0 0 1 .784 10c.407 0 .737.325.76.732.009.157.02.306.032.447.073.812.206 1.244.384 1.555a3.5 3.5 0 0 0 1.306 1.306c.311.178.743.311 1.555.384.142.013.29.023.447.032Z"/></svg>`,CHECKMARK_ICON:Qe`<svg width="13" height="12" viewBox="0 0 13 12"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.155.132a.75.75 0 0 1 .232 1.035L5.821 11.535a1 1 0 0 1-1.626.09L.665 7.21a.75.75 0 1 1 1.17-.937L4.71 9.867a.25.25 0 0 0 .406-.023L11.12.364a.75.75 0 0 1 1.035-.232Z" fill="#fff"/></svg>`,SEARCH_ICON:Qe`<svg width="20" height="21"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.432 13.992c-.354-.353-.91-.382-1.35-.146a5.5 5.5 0 1 1 2.265-2.265c-.237.441-.208.997.145 1.35l3.296 3.296a.75.75 0 1 1-1.06 1.061l-3.296-3.296Zm.06-5a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z" fill="#949E9E"/></svg>`,WALLET_PLACEHOLDER:Qe`<svg width="60" height="60" fill="none" viewBox="0 0 60 60"><g clip-path="url(#q)"><path id="wallet-placeholder-fill" fill="#fff" d="M0 24.9c0-9.251 0-13.877 1.97-17.332a15 15 0 0 1 5.598-5.597C11.023 0 15.648 0 24.9 0h10.2c9.252 0 13.877 0 17.332 1.97a15 15 0 0 1 5.597 5.598C60 11.023 60 15.648 60 24.9v10.2c0 9.252 0 13.877-1.97 17.332a15.001 15.001 0 0 1-5.598 5.597C48.977 60 44.352 60 35.1 60H24.9c-9.251 0-13.877 0-17.332-1.97a15 15 0 0 1-5.597-5.598C0 48.977 0 44.352 0 35.1V24.9Z"/><path id="wallet-placeholder-dash" stroke="#000" stroke-dasharray="4 4" stroke-width="1.5" d="M.04 41.708a231.598 231.598 0 0 1-.039-4.403l.75-.001L.75 35.1v-2.55H0v-5.1h.75V24.9l.001-2.204h-.75c.003-1.617.011-3.077.039-4.404l.75.016c.034-1.65.099-3.08.218-4.343l-.746-.07c.158-1.678.412-3.083.82-4.316l.713.236c.224-.679.497-1.296.827-1.875a14.25 14.25 0 0 1 1.05-1.585L3.076 5.9A15 15 0 0 1 5.9 3.076l.455.596a14.25 14.25 0 0 1 1.585-1.05c.579-.33 1.196-.603 1.875-.827l-.236-.712C10.812.674 12.217.42 13.895.262l.07.746C15.23.89 16.66.824 18.308.79l-.016-.75C19.62.012 21.08.004 22.695.001l.001.75L24.9.75h2.55V0h5.1v.75h2.55l2.204.001v-.75c1.617.003 3.077.011 4.404.039l-.016.75c1.65.034 3.08.099 4.343.218l.07-.746c1.678.158 3.083.412 4.316.82l-.236.713c.679.224 1.296.497 1.875.827a14.24 14.24 0 0 1 1.585 1.05l.455-.596A14.999 14.999 0 0 1 56.924 5.9l-.596.455c.384.502.735 1.032 1.05 1.585.33.579.602 1.196.827 1.875l.712-.236c.409 1.233.663 2.638.822 4.316l-.747.07c.119 1.264.184 2.694.218 4.343l.75-.016c.028 1.327.036 2.787.039 4.403l-.75.001.001 2.204v2.55H60v5.1h-.75v2.55l-.001 2.204h.75a231.431 231.431 0 0 1-.039 4.404l-.75-.016c-.034 1.65-.099 3.08-.218 4.343l.747.07c-.159 1.678-.413 3.083-.822 4.316l-.712-.236a10.255 10.255 0 0 1-.827 1.875 14.242 14.242 0 0 1-1.05 1.585l.596.455a14.997 14.997 0 0 1-2.824 2.824l-.455-.596c-.502.384-1.032.735-1.585 1.05-.579.33-1.196.602-1.875.827l.236.712c-1.233.409-2.638.663-4.316.822l-.07-.747c-1.264.119-2.694.184-4.343.218l.016.75c-1.327.028-2.787.036-4.403.039l-.001-.75-2.204.001h-2.55V60h-5.1v-.75H24.9l-2.204-.001v.75a231.431 231.431 0 0 1-4.404-.039l.016-.75c-1.65-.034-3.08-.099-4.343-.218l-.07.747c-1.678-.159-3.083-.413-4.316-.822l.236-.712a10.258 10.258 0 0 1-1.875-.827 14.252 14.252 0 0 1-1.585-1.05l-.455.596A14.999 14.999 0 0 1 3.076 54.1l.596-.455a14.24 14.24 0 0 1-1.05-1.585 10.259 10.259 0 0 1-.827-1.875l-.712.236C.674 49.188.42 47.783.262 46.105l.746-.07C.89 44.77.824 43.34.79 41.692l-.75.016Z"/><path fill="#fff" fill-rule="evenodd" d="M35.643 32.145c-.297-.743-.445-1.114-.401-1.275a.42.42 0 0 1 .182-.27c.134-.1.463-.1 1.123-.1.742 0 1.499.046 2.236-.05a6 6 0 0 0 5.166-5.166c.051-.39.051-.855.051-1.784 0-.928 0-1.393-.051-1.783a6 6 0 0 0-5.166-5.165c-.39-.052-.854-.052-1.783-.052h-7.72c-4.934 0-7.401 0-9.244 1.051a8 8 0 0 0-2.985 2.986C16.057 22.28 16.003 24.58 16 29 15.998 31.075 16 33.15 16 35.224A7.778 7.778 0 0 0 23.778 43H28.5c1.394 0 2.09 0 2.67-.116a6 6 0 0 0 4.715-4.714c.115-.58.115-1.301.115-2.744 0-1.31 0-1.964-.114-2.49a4.998 4.998 0 0 0-.243-.792Z" clip-rule="evenodd"/><path fill="#9EA9A9" fill-rule="evenodd" d="M37 18h-7.72c-2.494 0-4.266.002-5.647.126-1.361.122-2.197.354-2.854.728a6.5 6.5 0 0 0-2.425 2.426c-.375.657-.607 1.492-.729 2.853-.11 1.233-.123 2.777-.125 4.867 0 .7 0 1.05.097 1.181.096.13.182.181.343.2.163.02.518-.18 1.229-.581a6.195 6.195 0 0 1 3.053-.8H37c.977 0 1.32-.003 1.587-.038a4.5 4.5 0 0 0 3.874-3.874c.036-.268.039-.611.039-1.588 0-.976-.003-1.319-.038-1.587a4.5 4.5 0 0 0-3.875-3.874C38.32 18.004 37.977 18 37 18Zm-7.364 12.5h-7.414a4.722 4.722 0 0 0-4.722 4.723 6.278 6.278 0 0 0 6.278 6.278H28.5c1.466 0 1.98-.008 2.378-.087a4.5 4.5 0 0 0 3.535-3.536c.08-.397.087-.933.087-2.451 0-1.391-.009-1.843-.08-2.17a3.5 3.5 0 0 0-2.676-2.676c-.328-.072-.762-.08-2.108-.08Z" clip-rule="evenodd"/></g><defs><clipPath id="q"><path fill="#fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>`,GLOBE_ICON:Qe`<svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="#fff" fill-rule="evenodd" d="M15.5 8a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0Zm-2.113.75c.301 0 .535.264.47.558a6.01 6.01 0 0 1-2.867 3.896c-.203.116-.42-.103-.334-.32.409-1.018.691-2.274.797-3.657a.512.512 0 0 1 .507-.477h1.427Zm.47-2.058c.065.294-.169.558-.47.558H11.96a.512.512 0 0 1-.507-.477c-.106-1.383-.389-2.638-.797-3.656-.087-.217.13-.437.333-.32a6.01 6.01 0 0 1 2.868 3.895Zm-4.402.558c.286 0 .515-.24.49-.525-.121-1.361-.429-2.534-.83-3.393-.279-.6-.549-.93-.753-1.112a.535.535 0 0 0-.724 0c-.204.182-.474.513-.754 1.112-.4.859-.708 2.032-.828 3.393a.486.486 0 0 0 .49.525h2.909Zm-5.415 0c.267 0 .486-.21.507-.477.106-1.383.389-2.638.797-3.656.087-.217-.13-.437-.333-.32a6.01 6.01 0 0 0-2.868 3.895c-.065.294.169.558.47.558H4.04ZM2.143 9.308c-.065-.294.169-.558.47-.558H4.04c.267 0 .486.21.507.477.106 1.383.389 2.639.797 3.657.087.217-.13.436-.333.32a6.01 6.01 0 0 1-2.868-3.896Zm3.913-.033a.486.486 0 0 1 .49-.525h2.909c.286 0 .515.24.49.525-.121 1.361-.428 2.535-.83 3.394-.279.6-.549.93-.753 1.112a.535.535 0 0 1-.724 0c-.204-.182-.474-.513-.754-1.112-.4-.859-.708-2.033-.828-3.394Z" clip-rule="evenodd"/></svg>`},H_=ke`.wcm-toolbar-placeholder{top:0;bottom:0;left:0;right:0;width:100%;position:absolute;display:block;pointer-events:none;height:100px;border-radius:calc(var(--wcm-background-border-radius) * .9);background-color:var(--wcm-background-color);background-position:center;background-size:cover}.wcm-toolbar{height:38px;display:flex;position:relative;margin:5px 15px 5px 5px;justify-content:space-between;align-items:center}.wcm-toolbar img,.wcm-toolbar svg{height:28px;object-position:left center;object-fit:contain}#wcm-wc-logo path{fill:var(--wcm-accent-fill-color)}button{width:28px;height:28px;border-radius:var(--wcm-icon-button-border-radius);border:0;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:var(--wcm-color-bg-1);box-shadow:0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-bg-2)}button svg{display:block;object-position:center}button path{fill:var(--wcm-color-fg-1)}.wcm-toolbar div{display:flex}@media(hover:hover){button:hover{background-color:var(--wcm-color-bg-2)}}`;var K_=Object.defineProperty,Z_=Object.getOwnPropertyDescriptor,G_=(t,e,r,n)=>{for(var i=n>1?void 0:n?Z_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&K_(e,r,i),i};let Jc=class extends _e{render(){return G`<div class="wcm-toolbar-placeholder"></div><div class="wcm-toolbar">${Be.WALLET_CONNECT_LOGO} <button @click="${dn.close}">${Be.CROSS_ICON}</button></div>`}};Jc.styles=[Ie.globalCss,H_],Jc=G_([Te("wcm-modal-backcard")],Jc);const Y_=ke`main{padding:20px;padding-top:0;width:100%}`;var J_=Object.defineProperty,Q_=Object.getOwnPropertyDescriptor,X_=(t,e,r,n)=>{for(var i=n>1?void 0:n?Q_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&J_(e,r,i),i};let Qc=class extends _e{render(){return G`<main><slot></slot></main>`}};Qc.styles=[Ie.globalCss,Y_],Qc=X_([Te("wcm-modal-content")],Qc);const e6=ke`footer{padding:10px;display:flex;flex-direction:column;align-items:inherit;justify-content:inherit;border-top:1px solid var(--wcm-color-bg-2)}`;var t6=Object.defineProperty,r6=Object.getOwnPropertyDescriptor,n6=(t,e,r,n)=>{for(var i=n>1?void 0:n?r6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&t6(e,r,i),i};let Xc=class extends _e{render(){return G`<footer><slot></slot></footer>`}};Xc.styles=[Ie.globalCss,e6],Xc=n6([Te("wcm-modal-footer")],Xc);const i6=ke`header{display:flex;justify-content:center;align-items:center;padding:20px;position:relative}.wcm-border{border-bottom:1px solid var(--wcm-color-bg-2);margin-bottom:20px}header button{padding:15px 20px}header button:active{opacity:.5}@media(hover:hover){header button:hover{opacity:.5}}.wcm-back-btn{position:absolute;left:0}.wcm-action-btn{position:absolute;right:0}path{fill:var(--wcm-accent-color)}`;var s6=Object.defineProperty,o6=Object.getOwnPropertyDescriptor,ys=(t,e,r,n)=>{for(var i=n>1?void 0:n?o6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&s6(e,r,i),i};let Pn=class extends _e{constructor(){super(...arguments),this.title="",this.onAction=void 0,this.actionIcon=void 0,this.border=!1}backBtnTemplate(){return G`<button class="wcm-back-btn" @click="${Ge.goBack}">${Be.BACK_ICON}</button>`}actionBtnTemplate(){return G`<button class="wcm-action-btn" @click="${this.onAction}">${this.actionIcon}</button>`}render(){const t={"wcm-border":this.border},e=Ge.state.history.length>1,r=this.title?G`<wcm-text variant="big-bold">${this.title}</wcm-text>`:G`<slot></slot>`;return G`<header class="${Lr(t)}">${e?this.backBtnTemplate():null} ${r} ${this.onAction?this.actionBtnTemplate():null}</header>`}};Pn.styles=[Ie.globalCss,i6],ys([me()],Pn.prototype,"title",2),ys([me()],Pn.prototype,"onAction",2),ys([me()],Pn.prototype,"actionIcon",2),ys([me({type:Boolean})],Pn.prototype,"border",2),Pn=ys([Te("wcm-modal-header")],Pn);const ue={MOBILE_BREAKPOINT:600,WCM_RECENT_WALLET_DATA:"WCM_RECENT_WALLET_DATA",EXPLORER_WALLET_URL:"https://explorer.walletconnect.com/?type=wallet",getShadowRootElement(t,e){const r=t.renderRoot.querySelector(e);if(!r)throw new Error(`${e} not found`);return r},getWalletIcon({id:t,image_id:e}){const{walletImages:r}=Gt.state;return r!=null&&r[t]?r[t]:e?qt.getWalletImageUrl(e):""},getWalletName(t,e=!1){return e&&t.length>8?`${t.substring(0,8)}..`:t},isMobileAnimation(){return window.innerWidth<=ue.MOBILE_BREAKPOINT},async preloadImage(t){const e=new Promise((r,n)=>{const i=new Image;i.onload=r,i.onerror=n,i.crossOrigin="anonymous",i.src=t});return Promise.race([e,ie.wait(3e3)])},getErrorMessage(t){return t instanceof Error?t.message:"Unknown Error"},debounce(t,e=500){let r;return(...n)=>{function i(){t(...n)}r&&clearTimeout(r),r=setTimeout(i,e)}},handleMobileLinking(t){const{walletConnectUri:e}=nt.state,{mobile:r,name:n}=t,i=r==null?void 0:r.native,s=r==null?void 0:r.universal;ue.setRecentWallet(t);function o(a){let c="";i?c=ie.formatUniversalUrl(i,a,n):s&&(c=ie.formatNativeUrl(s,a,n)),ie.openHref(c,"_self")}e&&o(e)},handleAndroidLinking(){const{walletConnectUri:t}=nt.state;t&&(ie.setWalletConnectAndroidDeepLink(t),ie.openHref(t,"_self"))},async handleUriCopy(){const{walletConnectUri:t}=nt.state;if(t)try{await navigator.clipboard.writeText(t),qr.openToast("Link copied","success")}catch{qr.openToast("Failed to copy","error")}},getCustomImageUrls(){const{walletImages:t}=Gt.state,e=Object.values(t??{});return Object.values(e)},truncate(t,e=8){return t.length<=e?t:`${t.substring(0,4)}...${t.substring(t.length-4)}`},setRecentWallet(t){try{localStorage.setItem(ue.WCM_RECENT_WALLET_DATA,JSON.stringify(t))}catch{console.info("Unable to set recent wallet")}},getRecentWallet(){try{const t=localStorage.getItem(ue.WCM_RECENT_WALLET_DATA);return t?JSON.parse(t):void 0}catch{console.info("Unable to get recent wallet")}},caseSafeIncludes(t,e){return t.toUpperCase().includes(e.toUpperCase())},openWalletExplorerUrl(){ie.openHref(ue.EXPLORER_WALLET_URL,"_blank")},getCachedRouterWalletPlatforms(){const{desktop:t,mobile:e}=ie.getWalletRouterData(),r=!!(t!=null&&t.native),n=!!(t!=null&&t.universal),i=!!(e!=null&&e.native)||!!(e!=null&&e.universal);return{isDesktop:r,isMobile:i,isWeb:n}},goToConnectingView(t){Ge.setData({Wallet:t});const e=ie.isMobile(),{isDesktop:r,isWeb:n,isMobile:i}=ue.getCachedRouterWalletPlatforms();e?i?Ge.push("MobileConnecting"):n?Ge.push("WebConnecting"):Ge.push("InstallWallet"):r?Ge.push("DesktopConnecting"):n?Ge.push("WebConnecting"):i?Ge.push("MobileQrcodeConnecting"):Ge.push("InstallWallet")}},a6=ke`.wcm-router{overflow:hidden;will-change:transform}.wcm-content{display:flex;flex-direction:column}`;var c6=Object.defineProperty,l6=Object.getOwnPropertyDescriptor,el=(t,e,r,n)=>{for(var i=n>1?void 0:n?l6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&c6(e,r,i),i};let ws=class extends _e{constructor(){super(),this.view=Ge.state.view,this.prevView=Ge.state.view,this.unsubscribe=void 0,this.oldHeight="0px",this.resizeObserver=void 0,this.unsubscribe=Ge.subscribe(t=>{this.view!==t.view&&this.onChangeRoute()})}firstUpdated(){this.resizeObserver=new ResizeObserver(([t])=>{const e=`${t.contentRect.height}px`;this.oldHeight!=="0px"&&Rn(this.routerEl,{height:[this.oldHeight,e]},{duration:.2}),this.oldHeight=e}),this.resizeObserver.observe(this.contentEl)}disconnectedCallback(){var t,e;(t=this.unsubscribe)==null||t.call(this),(e=this.resizeObserver)==null||e.disconnect()}get routerEl(){return ue.getShadowRootElement(this,".wcm-router")}get contentEl(){return ue.getShadowRootElement(this,".wcm-content")}viewTemplate(){switch(this.view){case"ConnectWallet":return G`<wcm-connect-wallet-view></wcm-connect-wallet-view>`;case"DesktopConnecting":return G`<wcm-desktop-connecting-view></wcm-desktop-connecting-view>`;case"MobileConnecting":return G`<wcm-mobile-connecting-view></wcm-mobile-connecting-view>`;case"WebConnecting":return G`<wcm-web-connecting-view></wcm-web-connecting-view>`;case"MobileQrcodeConnecting":return G`<wcm-mobile-qr-connecting-view></wcm-mobile-qr-connecting-view>`;case"WalletExplorer":return G`<wcm-wallet-explorer-view></wcm-wallet-explorer-view>`;case"Qrcode":return G`<wcm-qrcode-view></wcm-qrcode-view>`;case"InstallWallet":return G`<wcm-install-wallet-view></wcm-install-wallet-view>`;default:return G`<div>Not Found</div>`}}async onChangeRoute(){await Rn(this.routerEl,{opacity:[1,0],scale:[1,1.02]},{duration:.15,delay:.1}).finished,this.view=Ge.state.view,Rn(this.routerEl,{opacity:[0,1],scale:[.99,1]},{duration:.37,delay:.05})}render(){return G`<div class="wcm-router"><div class="wcm-content">${this.viewTemplate()}</div></div>`}};ws.styles=[Ie.globalCss,a6],el([Zt()],ws.prototype,"view",2),el([Zt()],ws.prototype,"prevView",2),ws=el([Te("wcm-modal-router")],ws);const u6=ke`div{height:36px;width:max-content;display:flex;justify-content:center;align-items:center;padding:9px 15px 11px;position:absolute;top:12px;box-shadow:0 6px 14px -6px rgba(10,16,31,.3),0 10px 32px -4px rgba(10,16,31,.15);z-index:2;left:50%;transform:translateX(-50%);pointer-events:none;backdrop-filter:blur(20px) saturate(1.8);-webkit-backdrop-filter:blur(20px) saturate(1.8);border-radius:var(--wcm-notification-border-radius);border:1px solid var(--wcm-color-overlay);background-color:var(--wcm-color-overlay)}svg{margin-right:5px}@-moz-document url-prefix(){div{background-color:var(--wcm-color-bg-3)}}.wcm-success path{fill:var(--wcm-accent-color)}.wcm-error path{fill:var(--wcm-error-color)}`;var h6=Object.defineProperty,d6=Object.getOwnPropertyDescriptor,Hf=(t,e,r,n)=>{for(var i=n>1?void 0:n?d6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&h6(e,r,i),i};let Ro=class extends _e{constructor(){super(),this.open=!1,this.unsubscribe=void 0,this.timeout=void 0,this.unsubscribe=qr.subscribe(t=>{t.open?(this.open=!0,this.timeout=setTimeout(()=>qr.closeToast(),2200)):(this.open=!1,clearTimeout(this.timeout))})}disconnectedCallback(){var t;(t=this.unsubscribe)==null||t.call(this),clearTimeout(this.timeout),qr.closeToast()}render(){const{message:t,variant:e}=qr.state,r={"wcm-success":e==="success","wcm-error":e==="error"};return this.open?G`<div class="${Lr(r)}">${e==="success"?Be.CHECKMARK_ICON:null} ${e==="error"?Be.CROSS_ICON:null}<wcm-text variant="small-regular">${t}</wcm-text></div>`:null}};Ro.styles=[Ie.globalCss,u6],Hf([Zt()],Ro.prototype,"open",2),Ro=Hf([Te("wcm-modal-toast")],Ro);const f6=.1,Kf=2.5,Mr=7;function tl(t,e,r){return t===e?!1:(t-e<0?e-t:t-e)<=r+f6}function p6(t,e){const r=Array.prototype.slice.call(ds.create(t,{errorCorrectionLevel:e}).modules.data,0),n=Math.sqrt(r.length);return r.reduce((i,s,o)=>(o%n===0?i.push([s]):i[i.length-1].push(s))&&i,[])}const g6={generate(t,e,r){const n="#141414",i="#ffffff",s=[],o=p6(t,"Q"),a=e/o.length,c=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];c.forEach(({x:v,y:x})=>{const O=(o.length-Mr)*a*v,D=(o.length-Mr)*a*x,_=.45;for(let S=0;S<c.length;S+=1){const w=a*(Mr-S*2);s.push(Qe`<rect fill="${S%2===0?n:i}" height="${w}" rx="${w*_}" ry="${w*_}" width="${w}" x="${O+a*S}" y="${D+a*S}">`)}});const l=Math.floor((r+25)/a),d=o.length/2-l/2,f=o.length/2+l/2-1,p=[];o.forEach((v,x)=>{v.forEach((O,D)=>{if(o[x][D]&&!(x<Mr&&D<Mr||x>o.length-(Mr+1)&&D<Mr||x<Mr&&D>o.length-(Mr+1))&&!(x>d&&x<f&&D>d&&D<f)){const _=x*a+a/2,S=D*a+a/2;p.push([_,S])}})});const y={};return p.forEach(([v,x])=>{y[v]?y[v].push(x):y[v]=[x]}),Object.entries(y).map(([v,x])=>{const O=x.filter(D=>x.every(_=>!tl(D,_,a)));return[Number(v),O]}).forEach(([v,x])=>{x.forEach(O=>{s.push(Qe`<circle cx="${v}" cy="${O}" fill="${n}" r="${a/Kf}">`)})}),Object.entries(y).filter(([v,x])=>x.length>1).map(([v,x])=>{const O=x.filter(D=>x.some(_=>tl(D,_,a)));return[Number(v),O]}).map(([v,x])=>{x.sort((D,_)=>D<_?-1:1);const O=[];for(const D of x){const _=O.find(S=>S.some(w=>tl(D,w,a)));_?_.push(D):O.push([D])}return[v,O.map(D=>[D[0],D[D.length-1]])]}).forEach(([v,x])=>{x.forEach(([O,D])=>{s.push(Qe`<line x1="${v}" x2="${v}" y1="${O}" y2="${D}" stroke="${n}" stroke-width="${a/(Kf/2)}" stroke-linecap="round">`)})}),s}},m6=ke`@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}div{position:relative;user-select:none;display:block;overflow:hidden;aspect-ratio:1/1;animation:fadeIn ease .2s}.wcm-dark{background-color:#fff;border-radius:var(--wcm-container-border-radius);padding:18px;box-shadow:0 2px 5px #000}svg:first-child,wcm-wallet-image{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{width:25%;height:25%;border-radius:var(--wcm-wallet-icon-border-radius)}svg:first-child{transform:translateY(-50%) translateX(-50%) scale(.9)}svg:first-child path:first-child{fill:var(--wcm-accent-color)}svg:first-child path:last-child{stroke:var(--wcm-color-overlay)}`;var y6=Object.defineProperty,w6=Object.getOwnPropertyDescriptor,fi=(t,e,r,n)=>{for(var i=n>1?void 0:n?w6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&y6(e,r,i),i};let Ur=class extends _e{constructor(){super(...arguments),this.uri="",this.size=0,this.imageId=void 0,this.walletId=void 0,this.imageUrl=void 0}svgTemplate(){const t=zr.state.themeMode==="light"?this.size:this.size-36;return Qe`<svg height="${t}" width="${t}">${g6.generate(this.uri,t,t/4)}</svg>`}render(){const t={"wcm-dark":zr.state.themeMode==="dark"};return G`<div style="${`width: ${this.size}px`}" class="${Lr(t)}">${this.walletId||this.imageUrl?G`<wcm-wallet-image walletId="${zt(this.walletId)}" imageId="${zt(this.imageId)}" imageUrl="${zt(this.imageUrl)}"></wcm-wallet-image>`:Be.WALLET_CONNECT_ICON_COLORED} ${this.svgTemplate()}</div>`}};Ur.styles=[Ie.globalCss,m6],fi([me()],Ur.prototype,"uri",2),fi([me({type:Number})],Ur.prototype,"size",2),fi([me()],Ur.prototype,"imageId",2),fi([me()],Ur.prototype,"walletId",2),fi([me()],Ur.prototype,"imageUrl",2),Ur=fi([Te("wcm-qrcode")],Ur);const v6=ke`:host{position:relative;height:28px;width:80%}input{width:100%;height:100%;line-height:28px!important;border-radius:var(--wcm-input-border-radius);font-style:normal;font-family:-apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,'Helvetica Neue',sans-serif;font-feature-settings:'case' on;font-weight:500;font-size:16px;letter-spacing:-.03em;padding:0 10px 0 34px;transition:.2s all ease;color:var(--wcm-color-fg-1);background-color:var(--wcm-color-bg-3);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay);caret-color:var(--wcm-accent-color)}input::placeholder{color:var(--wcm-color-fg-2)}svg{left:10px;top:4px;pointer-events:none;position:absolute;width:20px;height:20px}input:focus-within{box-shadow:inset 0 0 0 1px var(--wcm-accent-color)}path{fill:var(--wcm-color-fg-2)}`;var b6=Object.defineProperty,_6=Object.getOwnPropertyDescriptor,Zf=(t,e,r,n)=>{for(var i=n>1?void 0:n?_6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&b6(e,r,i),i};let Po=class extends _e{constructor(){super(...arguments),this.onChange=()=>null}render(){return G`<input type="text" @input="${this.onChange}" placeholder="Search wallets"> ${Be.SEARCH_ICON}`}};Po.styles=[Ie.globalCss,v6],Zf([me()],Po.prototype,"onChange",2),Po=Zf([Te("wcm-search-input")],Po);const E6=ke`@keyframes rotate{100%{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}svg{animation:rotate 2s linear infinite;display:flex;justify-content:center;align-items:center}svg circle{stroke-linecap:round;animation:dash 1.5s ease infinite;stroke:var(--wcm-accent-color)}`;var x6=Object.defineProperty,S6=Object.getOwnPropertyDescriptor,C6=(t,e,r,n)=>{for(var i=n>1?void 0:n?S6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&x6(e,r,i),i};let rl=class extends _e{render(){return G`<svg viewBox="0 0 50 50" width="24" height="24"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4" stroke="#fff"/></svg>`}};rl.styles=[Ie.globalCss,E6],rl=C6([Te("wcm-spinner")],rl);const D6=ke`span{font-style:normal;font-family:var(--wcm-font-family);font-feature-settings:var(--wcm-font-feature-settings)}.wcm-xsmall-bold{font-family:var(--wcm-text-xsmall-bold-font-family);font-weight:var(--wcm-text-xsmall-bold-weight);font-size:var(--wcm-text-xsmall-bold-size);line-height:var(--wcm-text-xsmall-bold-line-height);letter-spacing:var(--wcm-text-xsmall-bold-letter-spacing);text-transform:var(--wcm-text-xsmall-bold-text-transform)}.wcm-xsmall-regular{font-family:var(--wcm-text-xsmall-regular-font-family);font-weight:var(--wcm-text-xsmall-regular-weight);font-size:var(--wcm-text-xsmall-regular-size);line-height:var(--wcm-text-xsmall-regular-line-height);letter-spacing:var(--wcm-text-xsmall-regular-letter-spacing);text-transform:var(--wcm-text-xsmall-regular-text-transform)}.wcm-small-thin{font-family:var(--wcm-text-small-thin-font-family);font-weight:var(--wcm-text-small-thin-weight);font-size:var(--wcm-text-small-thin-size);line-height:var(--wcm-text-small-thin-line-height);letter-spacing:var(--wcm-text-small-thin-letter-spacing);text-transform:var(--wcm-text-small-thin-text-transform)}.wcm-small-regular{font-family:var(--wcm-text-small-regular-font-family);font-weight:var(--wcm-text-small-regular-weight);font-size:var(--wcm-text-small-regular-size);line-height:var(--wcm-text-small-regular-line-height);letter-spacing:var(--wcm-text-small-regular-letter-spacing);text-transform:var(--wcm-text-small-regular-text-transform)}.wcm-medium-regular{font-family:var(--wcm-text-medium-regular-font-family);font-weight:var(--wcm-text-medium-regular-weight);font-size:var(--wcm-text-medium-regular-size);line-height:var(--wcm-text-medium-regular-line-height);letter-spacing:var(--wcm-text-medium-regular-letter-spacing);text-transform:var(--wcm-text-medium-regular-text-transform)}.wcm-big-bold{font-family:var(--wcm-text-big-bold-font-family);font-weight:var(--wcm-text-big-bold-weight);font-size:var(--wcm-text-big-bold-size);line-height:var(--wcm-text-big-bold-line-height);letter-spacing:var(--wcm-text-big-bold-letter-spacing);text-transform:var(--wcm-text-big-bold-text-transform)}:host(*){color:var(--wcm-color-fg-1)}.wcm-color-primary{color:var(--wcm-color-fg-1)}.wcm-color-secondary{color:var(--wcm-color-fg-2)}.wcm-color-tertiary{color:var(--wcm-color-fg-3)}.wcm-color-inverse{color:var(--wcm-accent-fill-color)}.wcm-color-accnt{color:var(--wcm-accent-color)}.wcm-color-error{color:var(--wcm-error-color)}`;var I6=Object.defineProperty,O6=Object.getOwnPropertyDescriptor,nl=(t,e,r,n)=>{for(var i=n>1?void 0:n?O6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&I6(e,r,i),i};let vs=class extends _e{constructor(){super(...arguments),this.variant="medium-regular",this.color="primary"}render(){const t={"wcm-big-bold":this.variant==="big-bold","wcm-medium-regular":this.variant==="medium-regular","wcm-small-regular":this.variant==="small-regular","wcm-small-thin":this.variant==="small-thin","wcm-xsmall-regular":this.variant==="xsmall-regular","wcm-xsmall-bold":this.variant==="xsmall-bold","wcm-color-primary":this.color==="primary","wcm-color-secondary":this.color==="secondary","wcm-color-tertiary":this.color==="tertiary","wcm-color-inverse":this.color==="inverse","wcm-color-accnt":this.color==="accent","wcm-color-error":this.color==="error"};return G`<span><slot class="${Lr(t)}"></slot></span>`}};vs.styles=[Ie.globalCss,D6],nl([me()],vs.prototype,"variant",2),nl([me()],vs.prototype,"color",2),vs=nl([Te("wcm-text")],vs);const A6=ke`button{width:100%;height:100%;border-radius:var(--wcm-button-hover-highlight-border-radius);display:flex;align-items:flex-start}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}button>div{width:80px;padding:5px 0;display:flex;flex-direction:column;align-items:center}wcm-text{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}wcm-wallet-image{height:60px;width:60px;transition:all .2s ease;border-radius:var(--wcm-wallet-icon-border-radius);margin-bottom:5px}.wcm-sublabel{margin-top:2px}`;var $6=Object.defineProperty,T6=Object.getOwnPropertyDescriptor,rn=(t,e,r,n)=>{for(var i=n>1?void 0:n?T6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&$6(e,r,i),i};let Dr=class extends _e{constructor(){super(...arguments),this.onClick=()=>null,this.name="",this.walletId="",this.label=void 0,this.imageId=void 0,this.installed=!1,this.recent=!1}sublabelTemplate(){return this.recent?G`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">RECENT</wcm-text>`:this.installed?G`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">INSTALLED</wcm-text>`:null}handleClick(){vl.click({name:"WALLET_BUTTON",walletId:this.walletId}),this.onClick()}render(){var t;return G`<button @click="${this.handleClick.bind(this)}"><div><wcm-wallet-image walletId="${this.walletId}" imageId="${zt(this.imageId)}"></wcm-wallet-image><wcm-text variant="xsmall-regular">${(t=this.label)!=null?t:ue.getWalletName(this.name,!0)}</wcm-text>${this.sublabelTemplate()}</div></button>`}};Dr.styles=[Ie.globalCss,A6],rn([me()],Dr.prototype,"onClick",2),rn([me()],Dr.prototype,"name",2),rn([me()],Dr.prototype,"walletId",2),rn([me()],Dr.prototype,"label",2),rn([me()],Dr.prototype,"imageId",2),rn([me({type:Boolean})],Dr.prototype,"installed",2),rn([me({type:Boolean})],Dr.prototype,"recent",2),Dr=rn([Te("wcm-wallet-button")],Dr);const N6=ke`:host{display:block}div{overflow:hidden;position:relative;border-radius:inherit;width:100%;height:100%;background-color:var(--wcm-color-overlay)}svg{position:relative;width:100%;height:100%}div::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;border-radius:inherit;border:1px solid var(--wcm-color-overlay)}div img{width:100%;height:100%;object-fit:cover;object-position:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var R6=Object.defineProperty,P6=Object.getOwnPropertyDescriptor,Lo=(t,e,r,n)=>{for(var i=n>1?void 0:n?P6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&R6(e,r,i),i};let pi=class extends _e{constructor(){super(...arguments),this.walletId="",this.imageId=void 0,this.imageUrl=void 0}render(){var t;const e=(t=this.imageUrl)!=null&&t.length?this.imageUrl:ue.getWalletIcon({id:this.walletId,image_id:this.imageId});return G`${e.length?G`<div><img crossorigin="anonymous" src="${e}" alt="${this.id}"></div>`:Be.WALLET_PLACEHOLDER}`}};pi.styles=[Ie.globalCss,N6],Lo([me()],pi.prototype,"walletId",2),Lo([me()],pi.prototype,"imageId",2),Lo([me()],pi.prototype,"imageUrl",2),pi=Lo([Te("wcm-wallet-image")],pi);var L6=Object.defineProperty,M6=Object.getOwnPropertyDescriptor,Gf=(t,e,r,n)=>{for(var i=n>1?void 0:n?M6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&L6(e,r,i),i};let il=class extends _e{constructor(){super(),this.preload=!0,this.preloadData()}async loadImages(t){try{t!=null&&t.length&&await Promise.all(t.map(async e=>ue.preloadImage(e)))}catch{console.info("Unsuccessful attempt at preloading some images",t)}}async preloadListings(){if(Gt.state.enableExplorer){await qt.getRecomendedWallets(),nt.setIsDataLoaded(!0);const{recomendedWallets:t}=qt.state,e=t.map(r=>ue.getWalletIcon(r));await this.loadImages(e)}else nt.setIsDataLoaded(!0)}async preloadCustomImages(){const t=ue.getCustomImageUrls();await this.loadImages(t)}async preloadData(){try{this.preload&&(this.preload=!1,await Promise.all([this.preloadListings(),this.preloadCustomImages()]))}catch(t){console.error(t),qr.openToast("Failed preloading","error")}}};Gf([Zt()],il.prototype,"preload",2),il=Gf([Te("wcm-explorer-context")],il);var U6=Object.defineProperty,k6=Object.getOwnPropertyDescriptor,F6=(t,e,r,n)=>{for(var i=n>1?void 0:n?k6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&U6(e,r,i),i};let Yf=class extends _e{constructor(){super(),this.unsubscribeTheme=void 0,Ie.setTheme(),this.unsubscribeTheme=zr.subscribe(Ie.setTheme)}disconnectedCallback(){var t;(t=this.unsubscribeTheme)==null||t.call(this)}};Yf=F6([Te("wcm-theme-context")],Yf);const j6=ke`@keyframes scroll{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(calc(-70px * 9),0,0)}}.wcm-slider{position:relative;overflow-x:hidden;padding:10px 0;margin:0 -20px;width:calc(100% + 40px)}.wcm-track{display:flex;width:calc(70px * 18);animation:scroll 20s linear infinite;opacity:.7}.wcm-track svg{margin:0 5px}wcm-wallet-image{width:60px;height:60px;margin:0 5px;border-radius:var(--wcm-wallet-icon-border-radius)}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-title{display:flex;align-items:center;margin-bottom:10px}.wcm-title svg{margin-right:6px}.wcm-title path{fill:var(--wcm-accent-color)}wcm-modal-footer .wcm-title{padding:0 10px}wcm-button-big{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);filter:drop-shadow(0 0 17px var(--wcm-color-bg-1))}wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-info-footer wcm-text{text-align:center;margin-bottom:15px}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var B6=Object.defineProperty,z6=Object.getOwnPropertyDescriptor,q6=(t,e,r,n)=>{for(var i=n>1?void 0:n?z6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&B6(e,r,i),i};let sl=class extends _e{onGoToQrcode(){Ge.push("Qrcode")}render(){const{recomendedWallets:t}=qt.state,e=[...t,...t],r=ie.RECOMMENDED_WALLET_AMOUNT*2;return G`<wcm-modal-header title="Connect your wallet" .onAction="${this.onGoToQrcode}" .actionIcon="${Be.QRCODE_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-title">${Be.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">WalletConnect</wcm-text></div><div class="wcm-slider"><div class="wcm-track">${[...Array(r)].map((n,i)=>{const s=e[i%e.length];return s?G`<wcm-wallet-image walletId="${s.id}" imageId="${s.image_id}"></wcm-wallet-image>`:Be.WALLET_PLACEHOLDER})}</div><wcm-button-big @click="${ue.handleAndroidLinking}"><wcm-text variant="medium-regular" color="inverse">Select Wallet</wcm-text></wcm-button-big></div></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">Choose WalletConnect to see supported apps on your device</wcm-text></wcm-info-footer>`}};sl.styles=[Ie.globalCss,j6],sl=q6([Te("wcm-android-wallet-selection")],sl);const W6=ke`@keyframes loading{to{stroke-dashoffset:0}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(1px,0,0)}30%,50%,70%{transform:translate3d(-2px,0,0)}40%,60%{transform:translate3d(2px,0,0)}}:host{display:flex;flex-direction:column;align-items:center}div{position:relative;width:110px;height:110px;display:flex;justify-content:center;align-items:center;margin:40px 0 20px 0;transform:translate3d(0,0,0)}svg{position:absolute;width:110px;height:110px;fill:none;stroke:transparent;stroke-linecap:round;stroke-width:2px;top:0;left:0}use{stroke:var(--wcm-accent-color);animation:loading 1s linear infinite}wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:90px;height:90px}wcm-text{margin-bottom:40px}.wcm-error svg{stroke:var(--wcm-error-color)}.wcm-error use{display:none}.wcm-error{animation:shake .4s cubic-bezier(.36,.07,.19,.97) both}.wcm-stale svg,.wcm-stale use{display:none}`;var V6=Object.defineProperty,H6=Object.getOwnPropertyDescriptor,gi=(t,e,r,n)=>{for(var i=n>1?void 0:n?H6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&V6(e,r,i),i};let nn=class extends _e{constructor(){super(...arguments),this.walletId=void 0,this.imageId=void 0,this.isError=!1,this.isStale=!1,this.label=""}svgLoaderTemplate(){var t,e;const r=(e=(t=zr.state.themeVariables)==null?void 0:t["--wcm-wallet-icon-large-border-radius"])!=null?e:Ie.getPreset("--wcm-wallet-icon-large-border-radius");let n=0;r.includes("%")?n=88/100*parseInt(r,10):n=parseInt(r,10),n*=1.17;const i=317-n*1.57,s=425-n*1.8;return G`<svg viewBox="0 0 110 110" width="110" height="110"><rect id="wcm-loader" x="2" y="2" width="106" height="106" rx="${n}"/><use xlink:href="#wcm-loader" stroke-dasharray="106 ${i}" stroke-dashoffset="${s}"></use></svg>`}render(){const t={"wcm-error":this.isError,"wcm-stale":this.isStale};return G`<div class="${Lr(t)}">${this.svgLoaderTemplate()}<wcm-wallet-image walletId="${zt(this.walletId)}" imageId="${zt(this.imageId)}"></wcm-wallet-image></div><wcm-text variant="medium-regular" color="${this.isError?"error":"primary"}">${this.isError?"Connection declined":this.label}</wcm-text>`}};nn.styles=[Ie.globalCss,W6],gi([me()],nn.prototype,"walletId",2),gi([me()],nn.prototype,"imageId",2),gi([me({type:Boolean})],nn.prototype,"isError",2),gi([me({type:Boolean})],nn.prototype,"isStale",2),gi([me()],nn.prototype,"label",2),nn=gi([Te("wcm-connector-waiting")],nn);const mi={manualWallets(){var t,e;const{mobileWallets:r,desktopWallets:n}=Gt.state,i=(t=mi.recentWallet())==null?void 0:t.id,s=ie.isMobile()?r:n,o=s==null?void 0:s.filter(a=>i!==a.id);return(e=ie.isMobile()?o==null?void 0:o.map(({id:a,name:c,links:l})=>({id:a,name:c,mobile:l,links:l})):o==null?void 0:o.map(({id:a,name:c,links:l})=>({id:a,name:c,desktop:l,links:l})))!=null?e:[]},recentWallet(){return ue.getRecentWallet()},recomendedWallets(t=!1){var e;const r=t||(e=mi.recentWallet())==null?void 0:e.id,{recomendedWallets:n}=qt.state;return n.filter(i=>r!==i.id)}},sn={onConnecting(t){ue.goToConnectingView(t)},manualWalletsTemplate(){return mi.manualWallets().map(t=>G`<wcm-wallet-button walletId="${t.id}" name="${t.name}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`)},recomendedWalletsTemplate(t=!1){return mi.recomendedWallets(t).map(e=>G`<wcm-wallet-button name="${e.name}" walletId="${e.id}" imageId="${e.image_id}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`)},recentWalletTemplate(){const t=mi.recentWallet();if(t)return G`<wcm-wallet-button name="${t.name}" walletId="${t.id}" imageId="${zt(t.image_id)}" .recent="${!0}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`}},K6=ke`.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-desktop-title,.wcm-mobile-title{display:flex;align-items:center}.wcm-mobile-title{justify-content:space-between;margin-bottom:20px;margin-top:-10px}.wcm-desktop-title{margin-bottom:10px;padding:0 10px}.wcm-subtitle{display:flex;align-items:center}.wcm-subtitle:last-child path{fill:var(--wcm-color-fg-3)}.wcm-desktop-title svg,.wcm-mobile-title svg{margin-right:6px}.wcm-desktop-title path,.wcm-mobile-title path{fill:var(--wcm-accent-color)}`;var Z6=Object.defineProperty,G6=Object.getOwnPropertyDescriptor,Y6=(t,e,r,n)=>{for(var i=n>1?void 0:n?G6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Z6(e,r,i),i};let ol=class extends _e{render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Gt.state,r=t!=="ALL"&&e,n=sn.manualWalletsTemplate(),i=sn.recomendedWalletsTemplate();let s=[sn.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>4||r;let a=[];o?a=s.slice(0,3):a=s;const c=!!a.length;return G`<wcm-modal-header .border="${!0}" title="Connect your wallet" .onAction="${ue.handleUriCopy}" .actionIcon="${Be.COPY_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-mobile-title"><div class="wcm-subtitle">${Be.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">Mobile</wcm-text></div><div class="wcm-subtitle">${Be.SCAN_ICON}<wcm-text variant="small-regular" color="secondary">Scan with your wallet</wcm-text></div></div><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>${c?G`<wcm-modal-footer><div class="wcm-desktop-title">${Be.DESKTOP_ICON}<wcm-text variant="small-regular" color="accent">Desktop</wcm-text></div><div class="wcm-grid">${a} ${o?G`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-footer>`:null}`}};ol.styles=[Ie.globalCss,K6],ol=Y6([Te("wcm-desktop-wallet-selection")],ol);const J6=ke`div{background-color:var(--wcm-color-bg-2);padding:10px 20px 15px 20px;border-top:1px solid var(--wcm-color-bg-3);text-align:center}a{color:var(--wcm-accent-color);text-decoration:none;transition:opacity .2s ease-in-out;display:inline}a:active{opacity:.8}@media(hover:hover){a:hover{opacity:.8}}`;var Q6=Object.defineProperty,X6=Object.getOwnPropertyDescriptor,eE=(t,e,r,n)=>{for(var i=n>1?void 0:n?X6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Q6(e,r,i),i};let al=class extends _e{render(){const{termsOfServiceUrl:t,privacyPolicyUrl:e}=Gt.state;return t??e?G`<div><wcm-text variant="small-regular" color="secondary">By connecting your wallet to this app, you agree to the app's ${t?G`<a href="${t}" target="_blank" rel="noopener noreferrer">Terms of Service</a>`:null} ${t&&e?"and":null} ${e?G`<a href="${e}" target="_blank" rel="noopener noreferrer">Privacy Policy</a>`:null}</wcm-text></div>`:null}};al.styles=[Ie.globalCss,J6],al=eE([Te("wcm-legal-notice")],al);const tE=ke`div{display:grid;grid-template-columns:repeat(4,80px);margin:0 -10px;justify-content:space-between;row-gap:10px}`;var rE=Object.defineProperty,nE=Object.getOwnPropertyDescriptor,iE=(t,e,r,n)=>{for(var i=n>1?void 0:n?nE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&rE(e,r,i),i};let cl=class extends _e{onQrcode(){Ge.push("Qrcode")}render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Gt.state,r=t!=="ALL"&&e,n=sn.manualWalletsTemplate(),i=sn.recomendedWalletsTemplate();let s=[sn.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>8||r;let a=[];o?a=s.slice(0,7):a=s;const c=!!a.length;return G`<wcm-modal-header title="Connect your wallet" .onAction="${this.onQrcode}" .actionIcon="${Be.QRCODE_ICON}"></wcm-modal-header>${c?G`<wcm-modal-content><div>${a} ${o?G`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-content>`:null}`}};cl.styles=[Ie.globalCss,tE],cl=iE([Te("wcm-mobile-wallet-selection")],cl);const sE=ke`:host{all:initial}.wcm-overlay{top:0;bottom:0;left:0;right:0;position:fixed;z-index:var(--wcm-z-index);overflow:hidden;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;background-color:var(--wcm-overlay-background-color);backdrop-filter:var(--wcm-overlay-backdrop-filter)}@media(max-height:720px) and (orientation:landscape){.wcm-overlay{overflow:scroll;align-items:flex-start;padding:20px 0}}.wcm-active{pointer-events:auto}.wcm-container{position:relative;max-width:360px;width:100%;outline:0;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) var(--wcm-container-border-radius) var(--wcm-container-border-radius);border:1px solid var(--wcm-color-overlay);overflow:hidden}.wcm-card{width:100%;position:relative;border-radius:var(--wcm-container-border-radius);overflow:hidden;box-shadow:0 6px 14px -6px rgba(10,16,31,.12),0 10px 32px -4px rgba(10,16,31,.1),0 0 0 1px var(--wcm-color-overlay);background-color:var(--wcm-color-bg-1);color:var(--wcm-color-fg-1)}@media(max-width:600px){.wcm-container{max-width:440px;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) 0 0}.wcm-card{border-radius:var(--wcm-container-border-radius) var(--wcm-container-border-radius) 0 0}.wcm-overlay{align-items:flex-end}}@media(max-width:440px){.wcm-container{border:0}}`;var oE=Object.defineProperty,aE=Object.getOwnPropertyDescriptor,ll=(t,e,r,n)=>{for(var i=n>1?void 0:n?aE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&oE(e,r,i),i};let yi=class extends _e{constructor(){super(),this.open=!1,this.active=!1,this.unsubscribeModal=void 0,this.abortController=void 0,this.unsubscribeModal=dn.subscribe(t=>{t.open?this.onOpenModalEvent():this.onCloseModalEvent()})}disconnectedCallback(){var t;(t=this.unsubscribeModal)==null||t.call(this)}get overlayEl(){return ue.getShadowRootElement(this,".wcm-overlay")}get containerEl(){return ue.getShadowRootElement(this,".wcm-container")}toggleBodyScroll(t){if(document.querySelector("body"))if(t){const e=document.getElementById("wcm-styles");e==null||e.remove()}else document.head.insertAdjacentHTML("beforeend",'<style id="wcm-styles">html,body{touch-action:none;overflow:hidden;overscroll-behavior:contain;}</style>')}onCloseModal(t){t.target===t.currentTarget&&dn.close()}onOpenModalEvent(){this.toggleBodyScroll(!1),this.addKeyboardEvents(),this.open=!0,setTimeout(async()=>{const t=ue.isMobileAnimation()?{y:["50vh","0vh"]}:{scale:[.98,1]},e=.1,r=.2;await Promise.all([Rn(this.overlayEl,{opacity:[0,1]},{delay:e,duration:r}).finished,Rn(this.containerEl,t,{delay:e,duration:r}).finished]),this.active=!0},0)}async onCloseModalEvent(){this.toggleBodyScroll(!0),this.removeKeyboardEvents();const t=ue.isMobileAnimation()?{y:["0vh","50vh"]}:{scale:[1,.98]},e=.2;await Promise.all([Rn(this.overlayEl,{opacity:[1,0]},{duration:e}).finished,Rn(this.containerEl,t,{duration:e}).finished]),this.containerEl.removeAttribute("style"),this.active=!1,this.open=!1}addKeyboardEvents(){this.abortController=new AbortController,window.addEventListener("keydown",t=>{var e;t.key==="Escape"?dn.close():t.key==="Tab"&&((e=t.target)!=null&&e.tagName.includes("wcm-")||this.containerEl.focus())},this.abortController),this.containerEl.focus()}removeKeyboardEvents(){var t;(t=this.abortController)==null||t.abort(),this.abortController=void 0}render(){const t={"wcm-overlay":!0,"wcm-active":this.active};return G`<wcm-explorer-context></wcm-explorer-context><wcm-theme-context></wcm-theme-context><div id="wcm-modal" class="${Lr(t)}" @click="${this.onCloseModal}" role="alertdialog" aria-modal="true"><div class="wcm-container" tabindex="0">${this.open?G`<wcm-modal-backcard></wcm-modal-backcard><div class="wcm-card"><wcm-modal-router></wcm-modal-router><wcm-modal-toast></wcm-modal-toast></div>`:null}</div></div>`}};yi.styles=[Ie.globalCss,sE],ll([Zt()],yi.prototype,"open",2),ll([Zt()],yi.prototype,"active",2),yi=ll([Te("wcm-modal")],yi);const cE=ke`div{display:flex;margin-top:15px}slot{display:inline-block;margin:0 5px}wcm-button{margin:0 5px}`;var lE=Object.defineProperty,uE=Object.getOwnPropertyDescriptor,bs=(t,e,r,n)=>{for(var i=n>1?void 0:n?uE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&lE(e,r,i),i};let Ln=class extends _e{constructor(){super(...arguments),this.isMobile=!1,this.isDesktop=!1,this.isWeb=!1,this.isRetry=!1}onMobile(){ie.isMobile()?Ge.replace("MobileConnecting"):Ge.replace("MobileQrcodeConnecting")}onDesktop(){Ge.replace("DesktopConnecting")}onWeb(){Ge.replace("WebConnecting")}render(){return G`<div>${this.isRetry?G`<slot></slot>`:null} ${this.isMobile?G`<wcm-button .onClick="${this.onMobile}" .iconLeft="${Be.MOBILE_ICON}" variant="outline">Mobile</wcm-button>`:null} ${this.isDesktop?G`<wcm-button .onClick="${this.onDesktop}" .iconLeft="${Be.DESKTOP_ICON}" variant="outline">Desktop</wcm-button>`:null} ${this.isWeb?G`<wcm-button .onClick="${this.onWeb}" .iconLeft="${Be.GLOBE_ICON}" variant="outline">Web</wcm-button>`:null}</div>`}};Ln.styles=[Ie.globalCss,cE],bs([me({type:Boolean})],Ln.prototype,"isMobile",2),bs([me({type:Boolean})],Ln.prototype,"isDesktop",2),bs([me({type:Boolean})],Ln.prototype,"isWeb",2),bs([me({type:Boolean})],Ln.prototype,"isRetry",2),Ln=bs([Te("wcm-platform-selection")],Ln);const hE=ke`button{display:flex;flex-direction:column;padding:5px 10px;border-radius:var(--wcm-button-hover-highlight-border-radius);height:100%;justify-content:flex-start}.wcm-icons{width:60px;height:60px;display:flex;flex-wrap:wrap;padding:7px;border-radius:var(--wcm-wallet-icon-border-radius);justify-content:space-between;align-items:center;margin-bottom:5px;background-color:var(--wcm-color-bg-2);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}.wcm-icons img{width:21px;height:21px;object-fit:cover;object-position:center;border-radius:calc(var(--wcm-wallet-icon-border-radius)/ 2);border:1px solid var(--wcm-color-overlay)}.wcm-icons svg{width:21px;height:21px}.wcm-icons img:nth-child(1),.wcm-icons img:nth-child(2),.wcm-icons svg:nth-child(1),.wcm-icons svg:nth-child(2){margin-bottom:4px}wcm-text{width:100%;text-align:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var dE=Object.defineProperty,fE=Object.getOwnPropertyDescriptor,pE=(t,e,r,n)=>{for(var i=n>1?void 0:n?fE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&dE(e,r,i),i};let ul=class extends _e{onClick(){Ge.push("WalletExplorer")}render(){const{recomendedWallets:t}=qt.state,e=mi.manualWallets(),r=[...t,...e].reverse().slice(0,4);return G`<button @click="${this.onClick}"><div class="wcm-icons">${r.map(n=>{const i=ue.getWalletIcon(n);if(i)return G`<img crossorigin="anonymous" src="${i}">`;const s=ue.getWalletIcon({id:n.id});return s?G`<img crossorigin="anonymous" src="${s}">`:Be.WALLET_PLACEHOLDER})} ${[...Array(4-r.length)].map(()=>Be.WALLET_PLACEHOLDER)}</div><wcm-text variant="xsmall-regular">View All</wcm-text></button>`}};ul.styles=[Ie.globalCss,hE],ul=pE([Te("wcm-view-all-wallets-button")],ul);const gE=ke`.wcm-qr-container{width:100%;display:flex;justify-content:center;align-items:center;aspect-ratio:1/1}`;var mE=Object.defineProperty,yE=Object.getOwnPropertyDescriptor,Mo=(t,e,r,n)=>{for(var i=n>1?void 0:n?yE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&mE(e,r,i),i};let wi=class extends _e{constructor(){super(),this.walletId="",this.imageId="",this.uri="",setTimeout(()=>{const{walletConnectUri:t}=nt.state;this.uri=t},0)}get overlayEl(){return ue.getShadowRootElement(this,".wcm-qr-container")}render(){return G`<div class="wcm-qr-container">${this.uri?G`<wcm-qrcode size="${this.overlayEl.offsetWidth}" uri="${this.uri}" walletId="${zt(this.walletId)}" imageId="${zt(this.imageId)}"></wcm-qrcode>`:G`<wcm-spinner></wcm-spinner>`}</div>`}};wi.styles=[Ie.globalCss,gE],Mo([me()],wi.prototype,"walletId",2),Mo([me()],wi.prototype,"imageId",2),Mo([Zt()],wi.prototype,"uri",2),wi=Mo([Te("wcm-walletconnect-qr")],wi);var wE=Object.defineProperty,vE=Object.getOwnPropertyDescriptor,bE=(t,e,r,n)=>{for(var i=n>1?void 0:n?vE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&wE(e,r,i),i};let hl=class extends _e{viewTemplate(){return ie.isAndroid()?G`<wcm-android-wallet-selection></wcm-android-wallet-selection>`:ie.isMobile()?G`<wcm-mobile-wallet-selection></wcm-mobile-wallet-selection>`:G`<wcm-desktop-wallet-selection></wcm-desktop-wallet-selection>`}render(){return G`${this.viewTemplate()}<wcm-legal-notice></wcm-legal-notice>`}};hl.styles=[Ie.globalCss],hl=bE([Te("wcm-connect-wallet-view")],hl);const _E=ke`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var EE=Object.defineProperty,xE=Object.getOwnPropertyDescriptor,Jf=(t,e,r,n)=>{for(var i=n>1?void 0:n?xE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&EE(e,r,i),i};let Uo=class extends _e{constructor(){super(),this.isError=!1,this.openDesktopApp()}onFormatAndRedirect(t){const{desktop:e,name:r}=ie.getWalletRouterData(),n=e==null?void 0:e.native;if(n){const i=ie.formatNativeUrl(n,t,r);ie.openHref(i,"_self")}}openDesktopApp(){const{walletConnectUri:t}=nt.state,e=ie.getWalletRouterData();ue.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=ie.getWalletRouterData(),{isMobile:n,isWeb:i}=ue.getCachedRouterWalletPlatforms();return G`<wcm-modal-header title="${t}" .onAction="${ue.handleUriCopy}" .actionIcon="${Be.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${zt(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Connection can continue loading if ${t} is not installed on your device`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isWeb="${i}" .isRetry="${!0}"><wcm-button .onClick="${this.openDesktopApp.bind(this)}" .iconRight="${Be.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Uo.styles=[Ie.globalCss,_E],Jf([Zt()],Uo.prototype,"isError",2),Uo=Jf([Te("wcm-desktop-connecting-view")],Uo);const SE=ke`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}wcm-button{margin-top:15px}`;var CE=Object.defineProperty,DE=Object.getOwnPropertyDescriptor,IE=(t,e,r,n)=>{for(var i=n>1?void 0:n?DE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&CE(e,r,i),i};let dl=class extends _e{onInstall(t){t&&ie.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,homepage:n}=ie.getWalletRouterData();return G`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${zt(r)}" label="Not Detected" .isStale="${!0}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Download ${t} to continue. If multiple browser extensions are installed, disable non ${t} ones and try again`}</wcm-text><wcm-button .onClick="${()=>this.onInstall(n)}" .iconLeft="${Be.ARROW_DOWN_ICON}">Download</wcm-button></wcm-info-footer>`}};dl.styles=[Ie.globalCss,SE],dl=IE([Te("wcm-install-wallet-view")],dl);const OE=ke`wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:96px;height:96px;margin-bottom:20px}wcm-info-footer{display:flex;width:100%}.wcm-app-store{justify-content:space-between}.wcm-app-store wcm-wallet-image{margin-right:10px;margin-bottom:0;width:28px;height:28px;border-radius:var(--wcm-wallet-icon-small-border-radius)}.wcm-app-store div{display:flex;align-items:center}.wcm-app-store wcm-button{margin-right:-10px}.wcm-note{flex-direction:column;align-items:center;padding:5px 0}.wcm-note wcm-text{text-align:center}wcm-platform-selection{margin-top:-15px}.wcm-note wcm-text{margin-top:15px}.wcm-note wcm-text span{color:var(--wcm-accent-color)}`;var AE=Object.defineProperty,$E=Object.getOwnPropertyDescriptor,Qf=(t,e,r,n)=>{for(var i=n>1?void 0:n?$E(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&AE(e,r,i),i};let ko=class extends _e{constructor(){super(),this.isError=!1,this.openMobileApp()}onFormatAndRedirect(t,e=!1){const{mobile:r,name:n}=ie.getWalletRouterData(),i=r==null?void 0:r.native,s=r==null?void 0:r.universal;if(i&&!e){const o=ie.formatNativeUrl(i,t,n);ie.openHref(o,"_self")}else if(s){const o=ie.formatUniversalUrl(s,t,n);ie.openHref(o,"_self")}}openMobileApp(t=!1){const{walletConnectUri:e}=nt.state,r=ie.getWalletRouterData();ue.setRecentWallet(r),e&&this.onFormatAndRedirect(e,t)}onGoToAppStore(t){t&&ie.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,app:n,mobile:i}=ie.getWalletRouterData(),{isWeb:s}=ue.getCachedRouterWalletPlatforms(),o=n==null?void 0:n.ios,a=i==null?void 0:i.universal;return G`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${zt(r)}" label="Tap 'Open' to continue…" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer class="wcm-note"><wcm-platform-selection .isWeb="${s}" .isRetry="${!0}"><wcm-button .onClick="${()=>this.openMobileApp(!1)}" .iconRight="${Be.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection>${a?G`<wcm-text color="secondary" variant="small-thin">Still doesn't work? <span tabindex="0" @click="${()=>this.openMobileApp(!0)}">Try this alternate link</span></wcm-text>`:null}</wcm-info-footer><wcm-info-footer class="wcm-app-store"><div><wcm-wallet-image walletId="${e}" imageId="${zt(r)}"></wcm-wallet-image><wcm-text>${`Get ${t}`}</wcm-text></div><wcm-button .iconRight="${Be.ARROW_RIGHT_ICON}" .onClick="${()=>this.onGoToAppStore(o)}" variant="ghost">App Store</wcm-button></wcm-info-footer>`}};ko.styles=[Ie.globalCss,OE],Qf([Zt()],ko.prototype,"isError",2),ko=Qf([Te("wcm-mobile-connecting-view")],ko);const TE=ke`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var NE=Object.defineProperty,RE=Object.getOwnPropertyDescriptor,PE=(t,e,r,n)=>{for(var i=n>1?void 0:n?RE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&NE(e,r,i),i};let fl=class extends _e{render(){const{name:t,id:e,image_id:r}=ie.getWalletRouterData(),{isDesktop:n,isWeb:i}=ue.getCachedRouterWalletPlatforms();return G`<wcm-modal-header title="${t}" .onAction="${ue.handleUriCopy}" .actionIcon="${Be.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr walletId="${e}" imageId="${zt(r)}"></wcm-walletconnect-qr></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Scan this QR Code with your phone's camera or inside ${t} app`}</wcm-text><wcm-platform-selection .isDesktop="${n}" .isWeb="${i}"></wcm-platform-selection></wcm-info-footer>`}};fl.styles=[Ie.globalCss,TE],fl=PE([Te("wcm-mobile-qr-connecting-view")],fl);var LE=Object.defineProperty,ME=Object.getOwnPropertyDescriptor,UE=(t,e,r,n)=>{for(var i=n>1?void 0:n?ME(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&LE(e,r,i),i};let pl=class extends _e{render(){return G`<wcm-modal-header title="Scan the code" .onAction="${ue.handleUriCopy}" .actionIcon="${Be.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>`}};pl.styles=[Ie.globalCss],pl=UE([Te("wcm-qrcode-view")],pl);const kE=ke`wcm-modal-content{height:clamp(200px,60vh,600px);display:block;overflow:scroll;scrollbar-width:none;position:relative;margin-top:1px}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between;margin:-15px -10px;padding-top:20px}wcm-modal-content::after,wcm-modal-content::before{content:'';position:fixed;pointer-events:none;z-index:1;width:100%;height:20px;opacity:1}wcm-modal-content::before{box-shadow:0 -1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(var(--wcm-color-bg-1),rgba(255,255,255,0))}wcm-modal-content::after{box-shadow:0 1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(rgba(255,255,255,0),var(--wcm-color-bg-1));top:calc(100% - 20px)}wcm-modal-content::-webkit-scrollbar{display:none}.wcm-placeholder-block{display:flex;justify-content:center;align-items:center;height:100px;overflow:hidden}.wcm-empty,.wcm-loading{display:flex}.wcm-loading .wcm-placeholder-block{height:100%}.wcm-end-reached .wcm-placeholder-block{height:0;opacity:0}.wcm-empty .wcm-placeholder-block{opacity:1;height:100%}wcm-wallet-button{margin:calc((100% - 60px)/ 3) 0}`;var FE=Object.defineProperty,jE=Object.getOwnPropertyDescriptor,_s=(t,e,r,n)=>{for(var i=n>1?void 0:n?jE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&FE(e,r,i),i};const gl=40;let Mn=class extends _e{constructor(){super(...arguments),this.loading=!qt.state.wallets.listings.length,this.firstFetch=!qt.state.wallets.listings.length,this.search="",this.endReached=!1,this.intersectionObserver=void 0,this.searchDebounce=ue.debounce(t=>{t.length>=1?(this.firstFetch=!0,this.endReached=!1,this.search=t,qt.resetSearch(),this.fetchWallets()):this.search&&(this.search="",this.endReached=this.isLastPage(),qt.resetSearch())})}firstUpdated(){this.createPaginationObserver()}disconnectedCallback(){var t;(t=this.intersectionObserver)==null||t.disconnect()}get placeholderEl(){return ue.getShadowRootElement(this,".wcm-placeholder-block")}createPaginationObserver(){this.intersectionObserver=new IntersectionObserver(([t])=>{t.isIntersecting&&!(this.search&&this.firstFetch)&&this.fetchWallets()}),this.intersectionObserver.observe(this.placeholderEl)}isLastPage(){const{wallets:t,search:e}=qt.state,{listings:r,total:n}=this.search?e:t;return n<=gl||r.length>=n}async fetchWallets(){var t;const{wallets:e,search:r}=qt.state,{listings:n,total:i,page:s}=this.search?r:e;if(!this.endReached&&(this.firstFetch||i>gl&&n.length<i))try{this.loading=!0;const o=(t=nt.state.chains)==null?void 0:t.join(","),{listings:a}=await qt.getWallets({page:this.firstFetch?1:s+1,entries:gl,search:this.search,version:2,chains:o}),c=a.map(l=>ue.getWalletIcon(l));await Promise.all([...c.map(async l=>ue.preloadImage(l)),ie.wait(300)]),this.endReached=this.isLastPage()}catch(o){console.error(o),qr.openToast(ue.getErrorMessage(o),"error")}finally{this.loading=!1,this.firstFetch=!1}}onConnect(t){ie.isAndroid()?ue.handleMobileLinking(t):ue.goToConnectingView(t)}onSearchChange(t){const{value:e}=t.target;this.searchDebounce(e)}render(){const{wallets:t,search:e}=qt.state,{listings:r}=this.search?e:t,n=this.loading&&!r.length,i=this.search.length>=3;let s=sn.manualWalletsTemplate(),o=sn.recomendedWalletsTemplate(!0);i&&(s=s.filter(({values:l})=>ue.caseSafeIncludes(l[0],this.search)),o=o.filter(({values:l})=>ue.caseSafeIncludes(l[0],this.search)));const a=!this.loading&&!r.length&&!o.length,c={"wcm-loading":n,"wcm-end-reached":this.endReached||!this.loading,"wcm-empty":a};return G`<wcm-modal-header><wcm-search-input .onChange="${this.onSearchChange.bind(this)}"></wcm-search-input></wcm-modal-header><wcm-modal-content class="${Lr(c)}"><div class="wcm-grid">${n?null:s} ${n?null:o} ${n?null:r.map(l=>G`${l?G`<wcm-wallet-button imageId="${l.image_id}" name="${l.name}" walletId="${l.id}" .onClick="${()=>this.onConnect(l)}"></wcm-wallet-button>`:null}`)}</div><div class="wcm-placeholder-block">${a?G`<wcm-text variant="big-bold" color="secondary">No results found</wcm-text>`:null} ${!a&&this.loading?G`<wcm-spinner></wcm-spinner>`:null}</div></wcm-modal-content>`}};Mn.styles=[Ie.globalCss,kE],_s([Zt()],Mn.prototype,"loading",2),_s([Zt()],Mn.prototype,"firstFetch",2),_s([Zt()],Mn.prototype,"search",2),_s([Zt()],Mn.prototype,"endReached",2),Mn=_s([Te("wcm-wallet-explorer-view")],Mn);const BE=ke`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var zE=Object.defineProperty,qE=Object.getOwnPropertyDescriptor,Xf=(t,e,r,n)=>{for(var i=n>1?void 0:n?qE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&zE(e,r,i),i};let Fo=class extends _e{constructor(){super(),this.isError=!1,this.openWebWallet()}onFormatAndRedirect(t){const{desktop:e,name:r}=ie.getWalletRouterData(),n=e==null?void 0:e.universal;if(n){const i=ie.formatUniversalUrl(n,t,r);ie.openHref(i,"_blank")}}openWebWallet(){const{walletConnectUri:t}=nt.state,e=ie.getWalletRouterData();ue.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=ie.getWalletRouterData(),{isMobile:n,isDesktop:i}=ue.getCachedRouterWalletPlatforms(),s=ie.isMobile();return G`<wcm-modal-header title="${t}" .onAction="${ue.handleUriCopy}" .actionIcon="${Be.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${zt(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`${t} web app has opened in a new tab. Go there, accept the connection, and come back`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isDesktop="${s?!1:i}" .isRetry="${!0}"><wcm-button .onClick="${this.openWebWallet.bind(this)}" .iconRight="${Be.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Fo.styles=[Ie.globalCss,BE],Xf([Zt()],Fo.prototype,"isError",2),Fo=Xf([Te("wcm-web-connecting-view")],Fo);const WE=Object.freeze(Object.defineProperty({__proto__:null,get WcmModal(){return yi},get WcmQrCode(){return Ur}},Symbol.toStringTag,{value:"Module"}));re.PAGE_SIZE=P3,re.aleoAddressRegex=uc,re.aleoFieldRegex=Ld,re.aleoPrivateKeyRegex=Rd,re.aleoTransactionIdRegex=Pd,re.aleoU32=Md,re.aleoU64=Ud,re.aleoViewKeyRegex=Nd,re.configureConnection=m2,re.connect=b2,re.createSharedState=E2,re.decrypt=x2,re.disconnect=S2,re.emitter=sc,re.getAccount=w2,re.getBalance=v2,re.getEvent=C2,re.getEvents=D2,re.getRecords=O2,re.getWalletConnectModalSignClient=Qt,re.importSharedState=I2,re.log_sdk=jd,re.projectId=wd,re.requestCreateEvent=_2,re.requestSignature=R3,re.signClient_puzzleProps=p2,re.wc_aleo_chains=io,re.wc_aleo_methods=nc,re.wc_events=ic,re.web3modal_puzzle_props=vd,re.zodAddress=E3,re.zodEventStatus=$3,re.zodEventType=A3,re.zodField=D3,re.zodNetwork=T3,re.zodPrivateKey=S3,re.zodTransactionId=C3,re.zodU32=I3,re.zodU64=O3,re.zodViewKey=x3,re.zodVisibility=N3,Object.defineProperty(re,Symbol.toStringTag,{value:"Module"})});
