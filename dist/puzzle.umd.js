(function(Re,He){typeof exports=="object"&&typeof module<"u"?He(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],He):(Re=typeof globalThis<"u"?globalThis:Re||self,He(Re["@puzzlehq/sdk"]={},Re.React))})(this,function(Re,He){"use strict";var er=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Co(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function zs(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Ws={exports:{}},Si={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ql;function Zp(){if(ql)return Si;ql=1;var e=He,t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(a,c,u){var h,d={},p=null,m=null;u!==void 0&&(p=""+u),c.key!==void 0&&(p=""+c.key),c.ref!==void 0&&(m=c.ref);for(h in c)n.call(c,h)&&!o.hasOwnProperty(h)&&(d[h]=c[h]);if(a&&a.defaultProps)for(h in c=a.defaultProps,c)d[h]===void 0&&(d[h]=c[h]);return{$$typeof:t,type:a,key:p,ref:m,props:d,_owner:i.current}}return Si.Fragment=r,Si.jsx=s,Si.jsxs=s,Si}var Ci={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kl;function Xp(){return Kl||(Kl=1,process.env.NODE_ENV!=="production"&&function(){var e=He,t=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),b=Symbol.iterator,_="@@iterator";function A(C){if(C===null||typeof C!="object")return null;var k=b&&C[b]||C[_];return typeof k=="function"?k:null}var I=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function w(C){{for(var k=arguments.length,Z=new Array(k>1?k-1:0),ce=1;ce<k;ce++)Z[ce-1]=arguments[ce];E("error",C,Z)}}function E(C,k,Z){{var ce=I.ReactDebugCurrentFrame,je=ce.getStackAddendum();je!==""&&(k+="%s",Z=Z.concat([je]));var Ie=Z.map(function($e){return String($e)});Ie.unshift("Warning: "+k),Function.prototype.apply.call(console[C],console,Ie)}}var y=!1,S=!1,g=!1,l=!1,v=!1,M;M=Symbol.for("react.module.reference");function L(C){return!!(typeof C=="string"||typeof C=="function"||C===n||C===o||v||C===i||C===u||C===h||l||C===m||y||S||g||typeof C=="object"&&C!==null&&(C.$$typeof===p||C.$$typeof===d||C.$$typeof===s||C.$$typeof===a||C.$$typeof===c||C.$$typeof===M||C.getModuleId!==void 0))}function F(C,k,Z){var ce=C.displayName;if(ce)return ce;var je=k.displayName||k.name||"";return je!==""?Z+"("+je+")":Z}function U(C){return C.displayName||"Context"}function j(C){if(C==null)return null;if(typeof C.tag=="number"&&w("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof C=="function")return C.displayName||C.name||null;if(typeof C=="string")return C;switch(C){case n:return"Fragment";case r:return"Portal";case o:return"Profiler";case i:return"StrictMode";case u:return"Suspense";case h:return"SuspenseList"}if(typeof C=="object")switch(C.$$typeof){case a:var k=C;return U(k)+".Consumer";case s:var Z=C;return U(Z._context)+".Provider";case c:return F(C,C.render,"ForwardRef");case d:var ce=C.displayName||null;return ce!==null?ce:j(C.type)||"Memo";case p:{var je=C,Ie=je._payload,$e=je._init;try{return j($e(Ie))}catch{return null}}}return null}var D=Object.assign,R=0,G,W,z,V,B,q,le;function K(){}K.__reactDisabledLog=!0;function se(){{if(R===0){G=console.log,W=console.info,z=console.warn,V=console.error,B=console.group,q=console.groupCollapsed,le=console.groupEnd;var C={configurable:!0,enumerable:!0,value:K,writable:!0};Object.defineProperties(console,{info:C,log:C,warn:C,error:C,group:C,groupCollapsed:C,groupEnd:C})}R++}}function ee(){{if(R--,R===0){var C={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:D({},C,{value:G}),info:D({},C,{value:W}),warn:D({},C,{value:z}),error:D({},C,{value:V}),group:D({},C,{value:B}),groupCollapsed:D({},C,{value:q}),groupEnd:D({},C,{value:le})})}R<0&&w("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var oe=I.ReactCurrentDispatcher,N;function P(C,k,Z){{if(N===void 0)try{throw Error()}catch(je){var ce=je.stack.trim().match(/\n( *(at )?)/);N=ce&&ce[1]||""}return`
`+N+C}}var T=!1,f;{var O=typeof WeakMap=="function"?WeakMap:Map;f=new O}function Y(C,k){if(!C||T)return"";{var Z=f.get(C);if(Z!==void 0)return Z}var ce;T=!0;var je=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Ie;Ie=oe.current,oe.current=null,se();try{if(k){var $e=function(){throw Error()};if(Object.defineProperty($e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($e,[])}catch(br){ce=br}Reflect.construct(C,[],$e)}else{try{$e.call()}catch(br){ce=br}C.call($e.prototype)}}else{try{throw Error()}catch(br){ce=br}C()}}catch(br){if(br&&ce&&typeof br.stack=="string"){for(var Ae=br.stack.split(`
`),Nt=ce.stack.split(`
`),nt=Ae.length-1,ut=Nt.length-1;nt>=1&&ut>=0&&Ae[nt]!==Nt[ut];)ut--;for(;nt>=1&&ut>=0;nt--,ut--)if(Ae[nt]!==Nt[ut]){if(nt!==1||ut!==1)do if(nt--,ut--,ut<0||Ae[nt]!==Nt[ut]){var _t=`
`+Ae[nt].replace(" at new "," at ");return C.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",C.displayName)),typeof C=="function"&&f.set(C,_t),_t}while(nt>=1&&ut>=0);break}}}finally{T=!1,oe.current=Ie,ee(),Error.prepareStackTrace=je}var ln=C?C.displayName||C.name:"",Ls=ln?P(ln):"";return typeof C=="function"&&f.set(C,Ls),Ls}function Q(C,k,Z){return Y(C,!1)}function xe(C){var k=C.prototype;return!!(k&&k.isReactComponent)}function Se(C,k,Z){if(C==null)return"";if(typeof C=="function")return Y(C,xe(C));if(typeof C=="string")return P(C);switch(C){case u:return P("Suspense");case h:return P("SuspenseList")}if(typeof C=="object")switch(C.$$typeof){case c:return Q(C.render);case d:return Se(C.type,k,Z);case p:{var ce=C,je=ce._payload,Ie=ce._init;try{return Se(Ie(je),k,Z)}catch{}}}return""}var ve=Object.prototype.hasOwnProperty,Le={},Qe=I.ReactDebugCurrentFrame;function qe(C){if(C){var k=C._owner,Z=Se(C.type,C._source,k?k.type:null);Qe.setExtraStackFrame(Z)}else Qe.setExtraStackFrame(null)}function Te(C,k,Z,ce,je){{var Ie=Function.call.bind(ve);for(var $e in C)if(Ie(C,$e)){var Ae=void 0;try{if(typeof C[$e]!="function"){var Nt=Error((ce||"React class")+": "+Z+" type `"+$e+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof C[$e]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Nt.name="Invariant Violation",Nt}Ae=C[$e](k,$e,ce,Z,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(nt){Ae=nt}Ae&&!(Ae instanceof Error)&&(qe(je),w("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",ce||"React class",Z,$e,typeof Ae),qe(null)),Ae instanceof Error&&!(Ae.message in Le)&&(Le[Ae.message]=!0,qe(je),w("Failed %s type: %s",Z,Ae.message),qe(null))}}}var De=Array.isArray;function ye(C){return De(C)}function be(C){{var k=typeof Symbol=="function"&&Symbol.toStringTag,Z=k&&C[Symbol.toStringTag]||C.constructor.name||"Object";return Z}}function we(C){try{return pe(C),!1}catch{return!0}}function pe(C){return""+C}function fe(C){if(we(C))return w("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",be(C)),pe(C)}var ae=I.ReactCurrentOwner,_e={key:!0,ref:!0,__self:!0,__source:!0},Ce,ue,Oe;Oe={};function Me(C){if(ve.call(C,"ref")){var k=Object.getOwnPropertyDescriptor(C,"ref").get;if(k&&k.isReactWarning)return!1}return C.ref!==void 0}function ke(C){if(ve.call(C,"key")){var k=Object.getOwnPropertyDescriptor(C,"key").get;if(k&&k.isReactWarning)return!1}return C.key!==void 0}function Be(C,k){if(typeof C.ref=="string"&&ae.current&&k&&ae.current.stateNode!==k){var Z=j(ae.current.type);Oe[Z]||(w('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',j(ae.current.type),C.ref),Oe[Z]=!0)}}function Ue(C,k){{var Z=function(){Ce||(Ce=!0,w("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",k))};Z.isReactWarning=!0,Object.defineProperty(C,"key",{get:Z,configurable:!0})}}function sr(C,k){{var Z=function(){ue||(ue=!0,w("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",k))};Z.isReactWarning=!0,Object.defineProperty(C,"ref",{get:Z,configurable:!0})}}var dr=function(C,k,Z,ce,je,Ie,$e){var Ae={$$typeof:t,type:C,key:k,ref:Z,props:$e,_owner:Ie};return Ae._store={},Object.defineProperty(Ae._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Ae,"_self",{configurable:!1,enumerable:!1,writable:!1,value:ce}),Object.defineProperty(Ae,"_source",{configurable:!1,enumerable:!1,writable:!1,value:je}),Object.freeze&&(Object.freeze(Ae.props),Object.freeze(Ae)),Ae};function Rr(C,k,Z,ce,je){{var Ie,$e={},Ae=null,Nt=null;Z!==void 0&&(fe(Z),Ae=""+Z),ke(k)&&(fe(k.key),Ae=""+k.key),Me(k)&&(Nt=k.ref,Be(k,je));for(Ie in k)ve.call(k,Ie)&&!_e.hasOwnProperty(Ie)&&($e[Ie]=k[Ie]);if(C&&C.defaultProps){var nt=C.defaultProps;for(Ie in nt)$e[Ie]===void 0&&($e[Ie]=nt[Ie])}if(Ae||Nt){var ut=typeof C=="function"?C.displayName||C.name||"Unknown":C;Ae&&Ue($e,ut),Nt&&sr($e,ut)}return dr(C,Ae,Nt,je,ce,ae.current,$e)}}var Pt=I.ReactCurrentOwner,Pr=I.ReactDebugCurrentFrame;function pr(C){if(C){var k=C._owner,Z=Se(C.type,C._source,k?k.type:null);Pr.setExtraStackFrame(Z)}else Pr.setExtraStackFrame(null)}var cn;cn=!1;function et(C){return typeof C=="object"&&C!==null&&C.$$typeof===t}function Ye(){{if(Pt.current){var C=j(Pt.current.type);if(C)return`

Check the render method of \``+C+"`."}return""}}function at(C){{if(C!==void 0){var k=C.fileName.replace(/^.*[\\\/]/,""),Z=C.lineNumber;return`

Check your code at `+k+":"+Z+"."}return""}}var rt={};function ct(C){{var k=Ye();if(!k){var Z=typeof C=="string"?C:C.displayName||C.name;Z&&(k=`

Check the top-level render call using <`+Z+">.")}return k}}function Je(C,k){{if(!C._store||C._store.validated||C.key!=null)return;C._store.validated=!0;var Z=ct(k);if(rt[Z])return;rt[Z]=!0;var ce="";C&&C._owner&&C._owner!==Pt.current&&(ce=" It was passed a child from "+j(C._owner.type)+"."),pr(C),w('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Z,ce),pr(null)}}function dt(C,k){{if(typeof C!="object")return;if(ye(C))for(var Z=0;Z<C.length;Z++){var ce=C[Z];et(ce)&&Je(ce,k)}else if(et(C))C._store&&(C._store.validated=!0);else if(C){var je=A(C);if(typeof je=="function"&&je!==C.entries)for(var Ie=je.call(C),$e;!($e=Ie.next()).done;)et($e.value)&&Je($e.value,k)}}}function yt(C){{var k=C.type;if(k==null||typeof k=="string")return;var Z;if(typeof k=="function")Z=k.propTypes;else if(typeof k=="object"&&(k.$$typeof===c||k.$$typeof===d))Z=k.propTypes;else return;if(Z){var ce=j(k);Te(Z,C.props,"prop",ce,C)}else if(k.PropTypes!==void 0&&!cn){cn=!0;var je=j(k);w("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",je||"Unknown")}typeof k.getDefaultProps=="function"&&!k.getDefaultProps.isReactClassApproved&&w("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function wt(C){{for(var k=Object.keys(C.props),Z=0;Z<k.length;Z++){var ce=k[Z];if(ce!=="children"&&ce!=="key"){pr(C),w("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",ce),pr(null);break}}C.ref!==null&&(pr(C),w("Invalid attribute `ref` supplied to `React.Fragment`."),pr(null))}}function pt(C,k,Z,ce,je,Ie){{var $e=L(C);if(!$e){var Ae="";(C===void 0||typeof C=="object"&&C!==null&&Object.keys(C).length===0)&&(Ae+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Nt=at(je);Nt?Ae+=Nt:Ae+=Ye();var nt;C===null?nt="null":ye(C)?nt="array":C!==void 0&&C.$$typeof===t?(nt="<"+(j(C.type)||"Unknown")+" />",Ae=" Did you accidentally export a JSX literal instead of a component?"):nt=typeof C,w("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",nt,Ae)}var ut=Rr(C,k,Z,je,Ie);if(ut==null)return ut;if($e){var _t=k.children;if(_t!==void 0)if(ce)if(ye(_t)){for(var ln=0;ln<_t.length;ln++)dt(_t[ln],C);Object.freeze&&Object.freeze(_t)}else w("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else dt(_t,C)}return C===n?wt(ut):yt(ut),ut}}function bt(C,k,Z){return pt(C,k,Z,!0)}function gt(C,k,Z){return pt(C,k,Z,!1)}var lt=gt,Ge=bt;Ci.Fragment=n,Ci.jsx=lt,Ci.jsxs=Ge}()),Ci}process.env.NODE_ENV==="production"?Ws.exports=Zp():Ws.exports=Xp();var Hs=Ws.exports;const Qp=Symbol(),Gl=Object.getPrototypeOf,Vs=new WeakMap,e1=e=>e&&(Vs.has(e)?Vs.get(e):Gl(e)===Object.prototype||Gl(e)===Array.prototype),t1=e=>e1(e)&&e[Qp]||null,Yl=(e,t=!0)=>{Vs.set(e,t)},qs=e=>typeof e=="object"&&e!==null,Wr=new WeakMap,Ao=new WeakSet,r1=(e=Object.is,t=(h,d)=>new Proxy(h,d),r=h=>qs(h)&&!Ao.has(h)&&(Array.isArray(h)||!(Symbol.iterator in h))&&!(h instanceof WeakMap)&&!(h instanceof WeakSet)&&!(h instanceof Error)&&!(h instanceof Number)&&!(h instanceof Date)&&!(h instanceof String)&&!(h instanceof RegExp)&&!(h instanceof ArrayBuffer),n=h=>h.configurable&&h.enumerable&&h.writable,i=h=>{switch(h.status){case"fulfilled":return h.value;case"rejected":throw h.reason;default:throw h}},o=new WeakMap,s=(h,d,p=i)=>{const m=o.get(h);if((m==null?void 0:m[0])===d)return m[1];const b=Array.isArray(h)?[]:Object.create(Object.getPrototypeOf(h));return Yl(b,!0),o.set(h,[d,b]),Reflect.ownKeys(h).forEach(_=>{if(Object.getOwnPropertyDescriptor(b,_))return;const A=Reflect.get(h,_),I={value:A,enumerable:!0,configurable:!0};if(Ao.has(A))Yl(A,!1);else if(A instanceof Promise)delete I.value,I.get=()=>p(A);else if(Wr.has(A)){const[w,E]=Wr.get(A);I.value=s(w,E(),p)}Object.defineProperty(b,_,I)}),Object.preventExtensions(b)},a=new WeakMap,c=[1,1],u=h=>{if(!qs(h))throw new Error("object required");const d=a.get(h);if(d)return d;let p=c[0];const m=new Set,b=(F,U=++c[0])=>{p!==U&&(p=U,m.forEach(j=>j(F,U)))};let _=c[1];const A=(F=++c[1])=>(_!==F&&!m.size&&(_=F,w.forEach(([U])=>{const j=U[1](F);j>p&&(p=j)})),p),I=F=>(U,j)=>{const D=[...U];D[1]=[F,...D[1]],b(D,j)},w=new Map,E=(F,U)=>{if(m.size){const j=U[3](I(F));w.set(F,[U,j])}else w.set(F,[U])},y=F=>{var U;const j=w.get(F);j&&(w.delete(F),(U=j[1])==null||U.call(j))},S=F=>(m.add(F),m.size===1&&w.forEach(([j,D],R)=>{const G=j[3](I(R));w.set(R,[j,G])}),()=>{m.delete(F),m.size===0&&w.forEach(([j,D],R)=>{D&&(D(),w.set(R,[j]))})}),g=Array.isArray(h)?[]:Object.create(Object.getPrototypeOf(h)),l=(F,U,j,D,R)=>{if(F&&(e(U,D)||a.has(D)&&e(U,a.get(D))))return;y(j),qs(D)&&(D=t1(D)||D);let G=D;if(D instanceof Promise)D.then(W=>{D.status="fulfilled",D.value=W,b(["resolve",[j],W])}).catch(W=>{D.status="rejected",D.reason=W,b(["reject",[j],W])});else{!Wr.has(D)&&r(D)&&(G=u(D));const W=!Ao.has(G)&&Wr.get(G);W&&E(j,W)}R(G),b(["set",[j],D,U])},M=t(g,{deleteProperty(F,U){const j=Reflect.get(F,U);y(U);const D=Reflect.deleteProperty(F,U);return D&&b(["delete",[U],j]),D},set(F,U,j,D){const R=Reflect.has(F,U),G=Reflect.get(F,U,D);return l(R,G,U,j,W=>{Reflect.set(F,U,W,D)}),!0},defineProperty(F,U,j){if(n(j)){const D=Reflect.getOwnPropertyDescriptor(F,U);if(!D||n(D))return l(!!D&&"value"in D,D==null?void 0:D.value,U,j.value,R=>{Reflect.defineProperty(F,U,{...j,value:R})}),!0}return Reflect.defineProperty(F,U,j)}});a.set(h,M);const L=[g,A,s,S];return Wr.set(M,L),Reflect.ownKeys(h).forEach(F=>{const U=Object.getOwnPropertyDescriptor(h,F);"value"in U&&(M[F]=h[F],delete U.value,delete U.writable),Object.defineProperty(g,F,U)}),M})=>[u,Wr,Ao,e,t,r,n,i,o,s,a,c],[n1]=r1();function Hr(e={}){return n1(e)}function dn(e,t,r){const n=Wr.get(e);let i;const o=[],s=n[3];let a=!1;const u=s(h=>{if(o.push(h),r){t(o.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&t(o.splice(0))}))});return a=!0,()=>{a=!1,u()}}function i1(e,t){const r=Wr.get(e),[n,i,o]=r;return o(n,i(),t)}const Ct=Hr({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),tt={state:Ct,subscribe(e){return dn(Ct,()=>e(Ct))},push(e,t){e!==Ct.view&&(Ct.view=e,t&&(Ct.data=t),Ct.history.push(e))},reset(e){Ct.view=e,Ct.history=[e]},replace(e){Ct.history.length>1&&(Ct.history[Ct.history.length-1]=e,Ct.view=e)},goBack(){if(Ct.history.length>1){Ct.history.pop();const[e]=Ct.history.slice(-1);Ct.view=e}},setData(e){Ct.data=e}},ie={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return ie.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const e=navigator.userAgent.toLowerCase();return ie.isMobile()&&(e.includes("iphone")||e.includes("ipad"))},isHttpUrl(e){return e.startsWith("http://")||e.startsWith("https://")},isArray(e){return Array.isArray(e)&&e.length>0},formatNativeUrl(e,t,r){if(ie.isHttpUrl(e))return this.formatUniversalUrl(e,t,r);let n=e;n.includes("://")||(n=e.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(t);return`${n}wc?uri=${i}`},formatUniversalUrl(e,t,r){if(!ie.isHttpUrl(e))return this.formatNativeUrl(e,t,r);let n=e;n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(t);return`${n}wc?uri=${i}`},async wait(e){return new Promise(t=>{setTimeout(t,e)})},openHref(e,t){window.open(e,t,"noreferrer noopener")},setWalletConnectDeepLink(e,t){try{localStorage.setItem(ie.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(e){try{const[t]=e.split("?");localStorage.setItem(ie.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(ie.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(ie.WCM_VERSION,"2.6.1")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var e;const t=(e=tt.state.data)==null?void 0:e.Wallet;if(!t)throw new Error('Missing "Wallet" view data');return t}},o1=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),Mt=Hr({enabled:o1,userSessionId:"",events:[],connectedWalletId:void 0}),Jl={state:Mt,subscribe(e){return dn(Mt.events,()=>e(i1(Mt.events[Mt.events.length-1])))},initialize(){Mt.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(Mt.userSessionId=crypto.randomUUID())},setConnectedWalletId(e){Mt.connectedWalletId=e},click(e){if(Mt.enabled){const t={type:"CLICK",name:e.name,userSessionId:Mt.userSessionId,timestamp:Date.now(),data:e};Mt.events.push(t)}},track(e){if(Mt.enabled){const t={type:"TRACK",name:e.name,userSessionId:Mt.userSessionId,timestamp:Date.now(),data:e};Mt.events.push(t)}},view(e){if(Mt.enabled){const t={type:"VIEW",name:e.name,userSessionId:Mt.userSessionId,timestamp:Date.now(),data:e};Mt.events.push(t)}}},Er=Hr({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),ft={state:Er,subscribe(e){return dn(Er,()=>e(Er))},setChains(e){Er.chains=e},setWalletConnectUri(e){Er.walletConnectUri=e},setIsCustomDesktop(e){Er.isCustomDesktop=e},setIsCustomMobile(e){Er.isCustomMobile=e},setIsDataLoaded(e){Er.isDataLoaded=e},setIsUiLoaded(e){Er.isUiLoaded=e},setIsAuth(e){Er.isAuth=e}},Do=Hr({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),tr={state:Do,subscribe(e){return dn(Do,()=>e(Do))},setConfig(e){var t,r;Jl.initialize(),ft.setChains(e.chains),ft.setIsAuth(!!e.enableAuthMode),ft.setIsCustomMobile(!!((t=e.mobileWallets)!=null&&t.length)),ft.setIsCustomDesktop(!!((r=e.desktopWallets)!=null&&r.length)),ie.setModalVersionInStorage(),Object.assign(Do,e)}};var s1=Object.defineProperty,Zl=Object.getOwnPropertySymbols,a1=Object.prototype.hasOwnProperty,c1=Object.prototype.propertyIsEnumerable,Xl=(e,t,r)=>t in e?s1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l1=(e,t)=>{for(var r in t||(t={}))a1.call(t,r)&&Xl(e,r,t[r]);if(Zl)for(var r of Zl(t))c1.call(t,r)&&Xl(e,r,t[r]);return e};const Ks="https://explorer-api.walletconnect.com",Gs="wcm",Ys="js-2.6.1";async function Oo(e,t){const r=l1({sdkType:Gs,sdkVersion:Ys},t),n=new URL(e,Ks);return n.searchParams.append("projectId",tr.state.projectId),Object.entries(r).forEach(([i,o])=>{o&&n.searchParams.append(i,String(o))}),(await fetch(n)).json()}const pn={async getDesktopListings(e){return Oo("/w3m/v1/getDesktopListings",e)},async getMobileListings(e){return Oo("/w3m/v1/getMobileListings",e)},async getInjectedListings(e){return Oo("/w3m/v1/getInjectedListings",e)},async getAllListings(e){return Oo("/w3m/v1/getAllListings",e)},getWalletImageUrl(e){return`${Ks}/w3m/v1/getWalletImage/${e}?projectId=${tr.state.projectId}&sdkType=${Gs}&sdkVersion=${Ys}`},getAssetImageUrl(e){return`${Ks}/w3m/v1/getAssetImage/${e}?projectId=${tr.state.projectId}&sdkType=${Gs}&sdkVersion=${Ys}`}};var u1=Object.defineProperty,Ql=Object.getOwnPropertySymbols,h1=Object.prototype.hasOwnProperty,f1=Object.prototype.propertyIsEnumerable,eu=(e,t,r)=>t in e?u1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d1=(e,t)=>{for(var r in t||(t={}))h1.call(t,r)&&eu(e,r,t[r]);if(Ql)for(var r of Ql(t))f1.call(t,r)&&eu(e,r,t[r]);return e};const tu=ie.isMobile(),xr=Hr({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),Yt={state:xr,async getRecomendedWallets(){const{explorerRecommendedWalletIds:e,explorerExcludedWalletIds:t}=tr.state;if(e==="NONE"||t==="ALL"&&!e)return xr.recomendedWallets;if(ie.isArray(e)){const r={recommendedIds:e.join(",")},{listings:n}=await pn.getAllListings(r),i=Object.values(n);i.sort((o,s)=>{const a=e.indexOf(o.id),c=e.indexOf(s.id);return a-c}),xr.recomendedWallets=i}else{const{chains:r,isAuth:n}=ft.state,i=r==null?void 0:r.join(","),o=ie.isArray(t),s={page:1,sdks:n?"auth_v1":void 0,entries:ie.RECOMMENDED_WALLET_AMOUNT,chains:i,version:2,excludedIds:o?t.join(","):void 0},{listings:a}=tu?await pn.getMobileListings(s):await pn.getDesktopListings(s);xr.recomendedWallets=Object.values(a)}return xr.recomendedWallets},async getWallets(e){const t=d1({},e),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:n}=tr.state,{recomendedWallets:i}=xr;if(n==="ALL")return xr.wallets;i.length?t.excludedIds=i.map(d=>d.id).join(","):ie.isArray(r)&&(t.excludedIds=r.join(",")),ie.isArray(n)&&(t.excludedIds=[t.excludedIds,n].filter(Boolean).join(",")),ft.state.isAuth&&(t.sdks="auth_v1");const{page:o,search:s}=e,{listings:a,total:c}=tu?await pn.getMobileListings(t):await pn.getDesktopListings(t),u=Object.values(a),h=s?"search":"wallets";return xr[h]={listings:[...xr[h].listings,...u],total:c,page:o??1},{listings:u,total:c}},getWalletImageUrl(e){return pn.getWalletImageUrl(e)},getAssetImageUrl(e){return pn.getAssetImageUrl(e)},resetSearch(){xr.search={listings:[],total:0,page:1}}},Bn=Hr({open:!1}),gn={state:Bn,subscribe(e){return dn(Bn,()=>e(Bn))},async open(e){return new Promise(t=>{const{isUiLoaded:r,isDataLoaded:n}=ft.state;if(ie.removeWalletConnectDeepLink(),ft.setWalletConnectUri(e==null?void 0:e.uri),ft.setChains(e==null?void 0:e.chains),tt.reset("ConnectWallet"),r&&n)Bn.open=!0,t();else{const i=setInterval(()=>{const o=ft.state;o.isUiLoaded&&o.isDataLoaded&&(clearInterval(i),Bn.open=!0,t())},200)}})},close(){Bn.open=!1}};var p1=Object.defineProperty,ru=Object.getOwnPropertySymbols,g1=Object.prototype.hasOwnProperty,m1=Object.prototype.propertyIsEnumerable,nu=(e,t,r)=>t in e?p1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v1=(e,t)=>{for(var r in t||(t={}))g1.call(t,r)&&nu(e,r,t[r]);if(ru)for(var r of ru(t))m1.call(t,r)&&nu(e,r,t[r]);return e};function y1(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const Ai=Hr({themeMode:y1()?"dark":"light"}),Vr={state:Ai,subscribe(e){return dn(Ai,()=>e(Ai))},setThemeConfig(e){const{themeMode:t,themeVariables:r}=e;t&&(Ai.themeMode=t),r&&(Ai.themeVariables=v1({},r))}},mn=Hr({open:!1,message:"",variant:"success"}),qr={state:mn,subscribe(e){return dn(mn,()=>e(mn))},openToast(e,t){mn.open=!0,mn.message=e,mn.variant=t},closeToast(){mn.open=!1}};let w1=class{constructor(t){this.openModal=gn.open,this.closeModal=gn.close,this.subscribeModal=gn.subscribe,this.setTheme=Vr.setThemeConfig,Vr.setThemeConfig(t),tr.setConfig(t),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.resolve().then(()=>lS);const t=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",t),ft.setIsUiLoaded(!0)}}};var Js={exports:{}},zn=typeof Reflect=="object"?Reflect:null,iu=zn&&typeof zn.apply=="function"?zn.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},Io;zn&&typeof zn.ownKeys=="function"?Io=zn.ownKeys:Object.getOwnPropertySymbols?Io=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Io=function(t){return Object.getOwnPropertyNames(t)};function b1(e){console&&console.warn&&console.warn(e)}var ou=Number.isNaN||function(t){return t!==t};function Ve(){Ve.init.call(this)}Js.exports=Ve,Js.exports.once=S1,Ve.EventEmitter=Ve,Ve.prototype._events=void 0,Ve.prototype._eventsCount=0,Ve.prototype._maxListeners=void 0;var su=10;function To(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Ve,"defaultMaxListeners",{enumerable:!0,get:function(){return su},set:function(e){if(typeof e!="number"||e<0||ou(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");su=e}}),Ve.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ve.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||ou(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function au(e){return e._maxListeners===void 0?Ve.defaultMaxListeners:e._maxListeners}Ve.prototype.getMaxListeners=function(){return au(this)},Ve.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=t==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(r.length>0&&(s=r[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[t];if(c===void 0)return!1;if(typeof c=="function")iu(c,this,r);else for(var u=c.length,h=fu(c,u),n=0;n<u;++n)iu(h[n],this,r);return!0};function cu(e,t,r,n){var i,o,s;if(To(r),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),s===void 0)s=o[t]=r,++e._eventsCount;else if(typeof s=="function"?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),i=au(e),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,b1(a)}return e}Ve.prototype.addListener=function(t,r){return cu(this,t,r,!1)},Ve.prototype.on=Ve.prototype.addListener,Ve.prototype.prependListener=function(t,r){return cu(this,t,r,!0)};function _1(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function lu(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=_1.bind(n);return i.listener=r,n.wrapFn=i,i}Ve.prototype.once=function(t,r){return To(r),this.on(t,lu(this,t,r)),this},Ve.prototype.prependOnceListener=function(t,r){return To(r),this.prependListener(t,lu(this,t,r)),this},Ve.prototype.removeListener=function(t,r){var n,i,o,s,a;if(To(r),i=this._events,i===void 0)return this;if(n=i[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===r||n[s].listener===r){a=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():E1(n,o),n.length===1&&(i[t]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",t,a||r)}return this},Ve.prototype.off=Ve.prototype.removeListener,Ve.prototype.removeAllListeners=function(t){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var o=Object.keys(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(t,r[i]);return this};function uu(e,t,r){var n=e._events;if(n===void 0)return[];var i=n[t];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?x1(i):fu(i,i.length)}Ve.prototype.listeners=function(t){return uu(this,t,!0)},Ve.prototype.rawListeners=function(t){return uu(this,t,!1)},Ve.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):hu.call(e,t)},Ve.prototype.listenerCount=hu;function hu(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Ve.prototype.eventNames=function(){return this._eventsCount>0?Io(this._events):[]};function fu(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function E1(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function x1(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function S1(e,t){return new Promise(function(r,n){function i(s){e.removeListener(t,o),n(s)}function o(){typeof e.removeListener=="function"&&e.removeListener("error",i),r([].slice.call(arguments))}du(e,t,o,{once:!0}),t!=="error"&&C1(e,i,{once:!0})})}function C1(e,t,r){typeof e.on=="function"&&du(e,"error",t,r)}function du(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(o){n.once&&e.removeEventListener(t,i),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var vr=Js.exports;const pu=Co(vr);var $o={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Zs=function(e,t){return Zs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Zs(e,t)};function A1(e,t){Zs(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Xs=function(){return Xs=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Xs.apply(this,arguments)};function D1(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function O1(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}function I1(e,t){return function(r,n){t(r,n,e)}}function T1(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function $1(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(d){s(d)}}function c(h){try{u(n.throw(h))}catch(d){s(d)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})}function R1(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(h){return c([u,h])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(h){u=[6,h],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function P1(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function N1(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function Qs(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function gu(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function L1(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(gu(arguments[t]));return e}function M1(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}function Di(e){return this instanceof Di?(this.v=e,this):new Di(e)}function F1(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(p){n[p]&&(i[p]=function(m){return new Promise(function(b,_){o.push([p,m,b,_])>1||a(p,m)})})}function a(p,m){try{c(n[p](m))}catch(b){d(o[0][3],b)}}function c(p){p.value instanceof Di?Promise.resolve(p.value.v).then(u,h):d(o[0][2],p)}function u(p){a("next",p)}function h(p){a("throw",p)}function d(p,m){p(m),o.shift(),o.length&&a(o[0][0],o[0][1])}}function U1(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,o){t[i]=e[i]?function(s){return(r=!r)?{value:Di(e[i](s)),done:i==="return"}:o?o(s):s}:o}}function j1(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Qs=="function"?Qs(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}function k1(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function B1(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function z1(e){return e&&e.__esModule?e:{default:e}}function W1(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function H1(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const cr=zs(Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Xs},__asyncDelegator:U1,__asyncGenerator:F1,__asyncValues:j1,__await:Di,__awaiter:$1,__classPrivateFieldGet:W1,__classPrivateFieldSet:H1,__createBinding:P1,__decorate:O1,__exportStar:N1,__extends:A1,__generator:R1,__importDefault:z1,__importStar:B1,__makeTemplateObject:k1,__metadata:T1,__param:I1,__read:gu,__rest:D1,__spread:L1,__spreadArrays:M1,__values:Qs},Symbol.toStringTag,{value:"Module"})));var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});function V1(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return JSON.parse(e)}catch{return e}}Oi.safeJsonParse=V1;function q1(e){return typeof e=="string"?e:JSON.stringify(e,(t,r)=>typeof r>"u"?null:r)}Oi.safeJsonStringify=q1;var Ii={exports:{}},mu;function K1(){return mu||(mu=1,function(){let e;function t(){}e=t,e.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},e.prototype.setItem=function(r,n){this[r]=String(n)},e.prototype.removeItem=function(r){delete this[r]},e.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},e.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof er<"u"&&er.localStorage?Ii.exports=er.localStorage:typeof window<"u"&&window.localStorage?Ii.exports=window.localStorage:Ii.exports=new t}()),Ii.exports}var ea={},Ti={},vu;function G1(){if(vu)return Ti;vu=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.IKeyValueStorage=void 0;class e{}return Ti.IKeyValueStorage=e,Ti}var $i={},yu;function Y1(){if(yu)return $i;yu=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.parseEntry=void 0;const e=Oi;function t(r){var n;return[r[0],e.safeJsonParse((n=r[1])!==null&&n!==void 0?n:"")]}return $i.parseEntry=t,$i}var wu;function J1(){return wu||(wu=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=cr;t.__exportStar(G1(),e),t.__exportStar(Y1(),e)}(ea)),ea}Object.defineProperty($o,"__esModule",{value:!0}),$o.KeyValueStorage=void 0;const Wn=cr,bu=Oi,Z1=Wn.__importDefault(K1()),X1=J1();class _u{constructor(){this.localStorage=Z1.default}getKeys(){return Wn.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Wn.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(X1.parseEntry)})}getItem(t){return Wn.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(t);if(r!==null)return bu.safeJsonParse(r)})}setItem(t,r){return Wn.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(t,bu.safeJsonStringify(r))})}removeItem(t){return Wn.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(t)})}}$o.KeyValueStorage=_u;var Q1=$o.default=_u,Hn={},Ri={},re={},ta={},Pi={},Eu;function eg(){if(Eu)return Pi;Eu=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.delay=void 0;function e(t){return new Promise(r=>{setTimeout(()=>{r(!0)},t)})}return Pi.delay=e,Pi}var vn={},ra={},yn={},xu;function tg(){return xu||(xu=1,Object.defineProperty(yn,"__esModule",{value:!0}),yn.ONE_THOUSAND=yn.ONE_HUNDRED=void 0,yn.ONE_HUNDRED=100,yn.ONE_THOUSAND=1e3),yn}var na={},Su;function rg(){return Su||(Su=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(na)),na}var Cu;function Au(){return Cu||(Cu=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=cr;t.__exportStar(tg(),e),t.__exportStar(rg(),e)}(ra)),ra}var Du;function ng(){if(Du)return vn;Du=1,Object.defineProperty(vn,"__esModule",{value:!0}),vn.fromMiliseconds=vn.toMiliseconds=void 0;const e=Au();function t(n){return n*e.ONE_THOUSAND}vn.toMiliseconds=t;function r(n){return Math.floor(n/e.ONE_THOUSAND)}return vn.fromMiliseconds=r,vn}var Ou;function ig(){return Ou||(Ou=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=cr;t.__exportStar(eg(),e),t.__exportStar(ng(),e)}(ta)),ta}var Vn={},Iu;function og(){if(Iu)return Vn;Iu=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Vn.Watch=e,Vn.default=e,Vn}var ia={},Ni={},Tu;function sg(){if(Tu)return Ni;Tu=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.IWatch=void 0;class e{}return Ni.IWatch=e,Ni}var $u;function ag(){return $u||($u=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),cr.__exportStar(sg(),e)}(ia)),ia}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=cr;t.__exportStar(ig(),e),t.__exportStar(og(),e),t.__exportStar(ag(),e),t.__exportStar(Au(),e)})(re);var oa={},Li={};let wn=class{};const cg=zs(Object.freeze(Object.defineProperty({__proto__:null,IEvents:wn},Symbol.toStringTag,{value:"Module"})));var Ru;function lg(){if(Ru)return Li;Ru=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.IHeartBeat=void 0;const e=cg;class t extends e.IEvents{constructor(n){super()}}return Li.IHeartBeat=t,Li}var Pu;function Nu(){return Pu||(Pu=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),cr.__exportStar(lg(),e)}(oa)),oa}var sa={},bn={},Lu;function ug(){if(Lu)return bn;Lu=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.HEARTBEAT_EVENTS=bn.HEARTBEAT_INTERVAL=void 0;const e=re;return bn.HEARTBEAT_INTERVAL=e.FIVE_SECONDS,bn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},bn}var Mu;function Fu(){return Mu||(Mu=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),cr.__exportStar(ug(),e)}(sa)),sa}var Uu;function hg(){if(Uu)return Ri;Uu=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.HeartBeat=void 0;const e=cr,t=vr,r=re,n=Nu(),i=Fu();class o extends n.IHeartBeat{constructor(a){super(a),this.events=new t.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=(a==null?void 0:a.interval)||i.HEARTBEAT_INTERVAL}static init(a){return e.__awaiter(this,void 0,void 0,function*(){const c=new o(a);return yield c.init(),c})}init(){return e.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(a,c){this.events.on(a,c)}once(a,c){this.events.once(a,c)}off(a,c){this.events.off(a,c)}removeListener(a,c){this.events.removeListener(a,c)}initialize(){return e.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return Ri.HeartBeat=o,Ri}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=cr;t.__exportStar(hg(),e),t.__exportStar(Nu(),e),t.__exportStar(Fu(),e)})(Hn);var Fe={},aa,ju;function fg(){if(ju)return aa;ju=1;function e(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}aa=t;function t(r,n,i){var o=i&&i.stringify||e,s=1;if(typeof r=="object"&&r!==null){var a=n.length+s;if(a===1)return r;var c=new Array(a);c[0]=o(r);for(var u=1;u<a;u++)c[u]=o(n[u]);return c.join(" ")}if(typeof r!="string")return r;var h=n.length;if(h===0)return r;for(var d="",p=1-s,m=-1,b=r&&r.length||0,_=0;_<b;){if(r.charCodeAt(_)===37&&_+1<b){switch(m=m>-1?m:0,r.charCodeAt(_+1)){case 100:case 102:if(p>=h||n[p]==null)break;m<_&&(d+=r.slice(m,_)),d+=Number(n[p]),m=_+2,_++;break;case 105:if(p>=h||n[p]==null)break;m<_&&(d+=r.slice(m,_)),d+=Math.floor(Number(n[p])),m=_+2,_++;break;case 79:case 111:case 106:if(p>=h||n[p]===void 0)break;m<_&&(d+=r.slice(m,_));var A=typeof n[p];if(A==="string"){d+="'"+n[p]+"'",m=_+2,_++;break}if(A==="function"){d+=n[p].name||"<anonymous>",m=_+2,_++;break}d+=o(n[p]),m=_+2,_++;break;case 115:if(p>=h)break;m<_&&(d+=r.slice(m,_)),d+=String(n[p]),m=_+2,_++;break;case 37:m<_&&(d+=r.slice(m,_)),d+="%",m=_+2,_++,p--;break}++p}++_}return m===-1?r:(m<b&&(d+=r.slice(m)),d)}return aa}var ca,ku;function dg(){if(ku)return ca;ku=1;const e=fg();ca=i;const t=S().console||{},r={mapHttpRequest:b,mapHttpResponse:b,wrapRequestSerializer:_,wrapResponseSerializer:_,wrapErrorSerializer:_,req:b,res:b,err:p};function n(g,l){return Array.isArray(g)?g.filter(function(M){return M!=="!stdSerializers.err"}):g===!0?Object.keys(l):!1}function i(g){g=g||{},g.browser=g.browser||{};const l=g.browser.transmit;if(l&&typeof l.send!="function")throw Error("pino: transmit option must have a send function");const v=g.browser.write||t;g.browser.write&&(g.browser.asObject=!0);const M=g.serializers||{},L=n(g.browser.serialize,M);let F=g.browser.serialize;Array.isArray(g.browser.serialize)&&g.browser.serialize.indexOf("!stdSerializers.err")>-1&&(F=!1);const U=["error","fatal","warn","info","debug","trace"];typeof v=="function"&&(v.error=v.fatal=v.warn=v.info=v.debug=v.trace=v),g.enabled===!1&&(g.level="silent");const j=g.level||"info",D=Object.create(v);D.log||(D.log=A),Object.defineProperty(D,"levelVal",{get:G}),Object.defineProperty(D,"level",{get:W,set:z});const R={transmit:l,serialize:L,asObject:g.browser.asObject,levels:U,timestamp:m(g)};D.levels=i.levels,D.level=j,D.setMaxListeners=D.getMaxListeners=D.emit=D.addListener=D.on=D.prependListener=D.once=D.prependOnceListener=D.removeListener=D.removeAllListeners=D.listeners=D.listenerCount=D.eventNames=D.write=D.flush=A,D.serializers=M,D._serialize=L,D._stdErrSerialize=F,D.child=V,l&&(D._logEvent=d());function G(){return this.level==="silent"?1/0:this.levels.values[this.level]}function W(){return this._level}function z(B){if(B!=="silent"&&!this.levels.values[B])throw Error("unknown level "+B);this._level=B,o(R,D,"error","log"),o(R,D,"fatal","error"),o(R,D,"warn","error"),o(R,D,"info","log"),o(R,D,"debug","log"),o(R,D,"trace","log")}function V(B,q){if(!B)throw new Error("missing bindings for child Pino");q=q||{},L&&B.serializers&&(q.serializers=B.serializers);const le=q.serializers;if(L&&le){var K=Object.assign({},M,le),se=g.browser.serialize===!0?Object.keys(K):L;delete B.serializers,c([B],se,K,this._stdErrSerialize)}function ee(oe){this._childLevel=(oe._childLevel|0)+1,this.error=u(oe,B,"error"),this.fatal=u(oe,B,"fatal"),this.warn=u(oe,B,"warn"),this.info=u(oe,B,"info"),this.debug=u(oe,B,"debug"),this.trace=u(oe,B,"trace"),K&&(this.serializers=K,this._serialize=se),l&&(this._logEvent=d([].concat(oe._logEvent.bindings,B)))}return ee.prototype=this,new ee(this)}return D}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=r,i.stdTimeFunctions=Object.assign({},{nullTime:I,epochTime:w,unixTime:E,isoTime:y});function o(g,l,v,M){const L=Object.getPrototypeOf(l);l[v]=l.levelVal>l.levels.values[v]?A:L[v]?L[v]:t[v]||t[M]||A,s(g,l,v)}function s(g,l,v){!g.transmit&&l[v]===A||(l[v]=function(M){return function(){const F=g.timestamp(),U=new Array(arguments.length),j=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var D=0;D<U.length;D++)U[D]=arguments[D];if(g.serialize&&!g.asObject&&c(U,this._serialize,this.serializers,this._stdErrSerialize),g.asObject?M.call(j,a(this,v,U,F)):M.apply(j,U),g.transmit){const R=g.transmit.level||l.level,G=i.levels.values[R],W=i.levels.values[v];if(W<G)return;h(this,{ts:F,methodLevel:v,methodValue:W,transmitLevel:R,transmitValue:i.levels.values[g.transmit.level||l.level],send:g.transmit.send,val:l.levelVal},U)}}}(l[v]))}function a(g,l,v,M){g._serialize&&c(v,g._serialize,g.serializers,g._stdErrSerialize);const L=v.slice();let F=L[0];const U={};M&&(U.time=M),U.level=i.levels.values[l];let j=(g._childLevel|0)+1;if(j<1&&(j=1),F!==null&&typeof F=="object"){for(;j--&&typeof L[0]=="object";)Object.assign(U,L.shift());F=L.length?e(L.shift(),L):void 0}else typeof F=="string"&&(F=e(L.shift(),L));return F!==void 0&&(U.msg=F),U}function c(g,l,v,M){for(const L in g)if(M&&g[L]instanceof Error)g[L]=i.stdSerializers.err(g[L]);else if(typeof g[L]=="object"&&!Array.isArray(g[L]))for(const F in g[L])l&&l.indexOf(F)>-1&&F in v&&(g[L][F]=v[F](g[L][F]))}function u(g,l,v){return function(){const M=new Array(1+arguments.length);M[0]=l;for(var L=1;L<M.length;L++)M[L]=arguments[L-1];return g[v].apply(this,M)}}function h(g,l,v){const M=l.send,L=l.ts,F=l.methodLevel,U=l.methodValue,j=l.val,D=g._logEvent.bindings;c(v,g._serialize||Object.keys(g.serializers),g.serializers,g._stdErrSerialize===void 0?!0:g._stdErrSerialize),g._logEvent.ts=L,g._logEvent.messages=v.filter(function(R){return D.indexOf(R)===-1}),g._logEvent.level.label=F,g._logEvent.level.value=U,M(F,g._logEvent,j),g._logEvent=d(D)}function d(g){return{ts:0,messages:[],bindings:g||[],level:{label:"",value:0}}}function p(g){const l={type:g.constructor.name,msg:g.message,stack:g.stack};for(const v in g)l[v]===void 0&&(l[v]=g[v]);return l}function m(g){return typeof g.timestamp=="function"?g.timestamp:g.timestamp===!1?I:w}function b(){return{}}function _(g){return g}function A(){}function I(){return!1}function w(){return Date.now()}function E(){return Math.round(Date.now()/1e3)}function y(){return new Date(Date.now()).toISOString()}function S(){function g(l){return typeof l<"u"&&l}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return g(self)||g(window)||g(this)||{}}}return ca}var _n={},Bu;function zu(){return Bu||(Bu=1,Object.defineProperty(_n,"__esModule",{value:!0}),_n.PINO_CUSTOM_CONTEXT_KEY=_n.PINO_LOGGER_DEFAULTS=void 0,_n.PINO_LOGGER_DEFAULTS={level:"info"},_n.PINO_CUSTOM_CONTEXT_KEY="custom_context"),_n}var zt={},Wu;function pg(){if(Wu)return zt;Wu=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.generateChildLogger=zt.formatChildLoggerContext=zt.getLoggerContext=zt.setBrowserLoggerContext=zt.getBrowserLoggerContext=zt.getDefaultLoggerOptions=void 0;const e=zu();function t(a){return Object.assign(Object.assign({},a),{level:(a==null?void 0:a.level)||e.PINO_LOGGER_DEFAULTS.level})}zt.getDefaultLoggerOptions=t;function r(a,c=e.PINO_CUSTOM_CONTEXT_KEY){return a[c]||""}zt.getBrowserLoggerContext=r;function n(a,c,u=e.PINO_CUSTOM_CONTEXT_KEY){return a[u]=c,a}zt.setBrowserLoggerContext=n;function i(a,c=e.PINO_CUSTOM_CONTEXT_KEY){let u="";return typeof a.bindings>"u"?u=r(a,c):u=a.bindings().context||"",u}zt.getLoggerContext=i;function o(a,c,u=e.PINO_CUSTOM_CONTEXT_KEY){const h=i(a,u);return h.trim()?`${h}/${c}`:c}zt.formatChildLoggerContext=o;function s(a,c,u=e.PINO_CUSTOM_CONTEXT_KEY){const h=o(a,c,u),d=a.child({context:h});return n(d,h,u)}return zt.generateChildLogger=s,zt}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.pino=void 0;const t=cr,r=t.__importDefault(dg());Object.defineProperty(e,"pino",{enumerable:!0,get:function(){return r.default}}),t.__exportStar(zu(),e),t.__exportStar(pg(),e)})(Fe);let gg=class extends wn{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}},mg=class extends wn{constructor(t,r){super(),this.core=t,this.logger=r,this.records=new Map}},vg=class{constructor(t,r){this.logger=t,this.core=r}},yg=class extends wn{constructor(t,r){super(),this.relayer=t,this.logger=r}},wg=class extends wn{constructor(t){super()}},bg=class{constructor(t,r,n,i){this.core=t,this.logger=r,this.name=n}},_g=class extends wn{constructor(t,r){super(),this.relayer=t,this.logger=r}},Eg=class extends wn{constructor(t,r){super(),this.core=t,this.logger=r}},xg=class{constructor(t,r){this.projectId=t,this.logger=r}},Sg=class{constructor(t){this.opts=t,this.protocol="wc",this.version=2}},Cg=class{constructor(t){this.client=t}};const Ag=e=>JSON.stringify(e,(t,r)=>typeof r=="bigint"?r.toString()+"n":r),Dg=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=e.replace(t,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Hu(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return Dg(e)}catch{return e}}function la(e){return typeof e=="string"?e:Ag(e)||""}var ua={},qn={},Ro={},Po={};Object.defineProperty(Po,"__esModule",{value:!0}),Po.BrowserRandomSource=void 0;const Vu=65536;class Og{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues!==void 0&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(t);for(let n=0;n<r.length;n+=Vu)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,Vu)));return r}}Po.BrowserRandomSource=Og;function Ig(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var No={},rr={};Object.defineProperty(rr,"__esModule",{value:!0});function Tg(e){for(var t=0;t<e.length;t++)e[t]=0;return e}rr.wipe=Tg;const $g=zs(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(No,"__esModule",{value:!0}),No.NodeRandomSource=void 0;const Rg=rr;class Pg{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Ig<"u"){const t=$g;t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(t);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,Rg.wipe)(r),n}}No.NodeRandomSource=Pg,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.SystemRandomSource=void 0;const Ng=Po,Lg=No;class Mg{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Ng.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Lg.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}Ro.SystemRandomSource=Mg;var de={},qu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(a,c){var u=a>>>16&65535,h=a&65535,d=c>>>16&65535,p=c&65535;return h*p+(u*p+h*d<<16>>>0)|0}e.mul=Math.imul||t;function r(a,c){return a+c|0}e.add=r;function n(a,c){return a-c|0}e.sub=n;function i(a,c){return a<<c|a>>>32-c}e.rotl=i;function o(a,c){return a<<32-c|a>>>c}e.rotr=o;function s(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}e.isInteger=Number.isInteger||s,e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(a){return e.isInteger(a)&&a>=-e.MAX_SAFE_INTEGER&&a<=e.MAX_SAFE_INTEGER}})(qu),Object.defineProperty(de,"__esModule",{value:!0});var Ku=qu;function Fg(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16}de.readInt16BE=Fg;function Ug(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])>>>0}de.readUint16BE=Ug;function jg(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])<<16>>16}de.readInt16LE=jg;function kg(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])>>>0}de.readUint16LE=kg;function Gu(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}de.writeUint16BE=Gu,de.writeInt16BE=Gu;function Yu(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}de.writeUint16LE=Yu,de.writeInt16LE=Yu;function ha(e,t){return t===void 0&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}de.readInt32BE=ha;function fa(e,t){return t===void 0&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}de.readUint32BE=fa;function da(e,t){return t===void 0&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}de.readInt32LE=da;function pa(e,t){return t===void 0&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}de.readUint32LE=pa;function Lo(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}de.writeUint32BE=Lo,de.writeInt32BE=Lo;function Mo(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}de.writeUint32LE=Mo,de.writeInt32LE=Mo;function Bg(e,t){t===void 0&&(t=0);var r=ha(e,t),n=ha(e,t+4);return r*4294967296+n-(n>>31)*4294967296}de.readInt64BE=Bg;function zg(e,t){t===void 0&&(t=0);var r=fa(e,t),n=fa(e,t+4);return r*4294967296+n}de.readUint64BE=zg;function Wg(e,t){t===void 0&&(t=0);var r=da(e,t),n=da(e,t+4);return n*4294967296+r-(r>>31)*4294967296}de.readInt64LE=Wg;function Hg(e,t){t===void 0&&(t=0);var r=pa(e,t),n=pa(e,t+4);return n*4294967296+r}de.readUint64LE=Hg;function Ju(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Lo(e/4294967296>>>0,t,r),Lo(e>>>0,t,r+4),t}de.writeUint64BE=Ju,de.writeInt64BE=Ju;function Zu(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Mo(e>>>0,t,r),Mo(e/4294967296>>>0,t,r+4),t}de.writeUint64LE=Zu,de.writeInt64LE=Zu;function Vg(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,o=e/8+r-1;o>=r;o--)n+=t[o]*i,i*=256;return n}de.readUintBE=Vg;function qg(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,o=r;o<r+e/8;o++)n+=t[o]*i,i*=256;return n}de.readUintLE=qg;function Kg(e,t,r,n){if(r===void 0&&(r=new Uint8Array(e/8)),n===void 0&&(n=0),e%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Ku.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var i=1,o=e/8+n-1;o>=n;o--)r[o]=t/i&255,i*=256;return r}de.writeUintBE=Kg;function Gg(e,t,r,n){if(r===void 0&&(r=new Uint8Array(e/8)),n===void 0&&(n=0),e%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Ku.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var i=1,o=n;o<n+e/8;o++)r[o]=t/i&255,i*=256;return r}de.writeUintLE=Gg;function Yg(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t)}de.readFloat32BE=Yg;function Jg(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t,!0)}de.readFloat32LE=Jg;function Zg(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t)}de.readFloat64BE=Zg;function Xg(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t,!0)}de.readFloat64LE=Xg;function Qg(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat32(r,e),t}de.writeFloat32BE=Qg;function em(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat32(r,e,!0),t}de.writeFloat32LE=em;function tm(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat64(r,e),t}de.writeFloat64BE=tm;function rm(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat64(r,e,!0),t}de.writeFloat64LE=rm,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.randomStringForEntropy=e.randomString=e.randomUint32=e.randomBytes=e.defaultRandomSource=void 0;const t=Ro,r=de,n=rr;e.defaultRandomSource=new t.SystemRandomSource;function i(u,h=e.defaultRandomSource){return h.randomBytes(u)}e.randomBytes=i;function o(u=e.defaultRandomSource){const h=i(4,u),d=(0,r.readUint32LE)(h);return(0,n.wipe)(h),d}e.randomUint32=o;const s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(u,h=s,d=e.defaultRandomSource){if(h.length<2)throw new Error("randomString charset is too short");if(h.length>256)throw new Error("randomString charset is too long");let p="";const m=h.length,b=256-256%m;for(;u>0;){const _=i(Math.ceil(u*256/b),d);for(let A=0;A<_.length&&u>0;A++){const I=_[A];I<b&&(p+=h.charAt(I%m),u--)}(0,n.wipe)(_)}return p}e.randomString=a;function c(u,h=s,d=e.defaultRandomSource){const p=Math.ceil(u/(Math.log(h.length)/Math.LN2));return a(p,h,d)}e.randomStringForEntropy=c}(qn);var Xu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=de,r=rr;e.DIGEST_LENGTH=64,e.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(c,u){if(u===void 0&&(u=c.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var h=0;if(this._bytesHashed+=u,this._bufferLength>0){for(;this._bufferLength<e.BLOCK_SIZE&&u>0;)this._buffer[this._bufferLength++]=c[h++],u--;this._bufferLength===this.blockSize&&(o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(u>=this.blockSize&&(h=o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,c,h,u),u%=this.blockSize);u>0;)this._buffer[this._bufferLength++]=c[h++],u--;return this},a.prototype.finish=function(c){if(!this._finished){var u=this._bytesHashed,h=this._bufferLength,d=u/536870912|0,p=u<<3,m=u%128<112?128:256;this._buffer[h]=128;for(var b=h+1;b<m-8;b++)this._buffer[b]=0;t.writeUint32BE(d,this._buffer,m-8),t.writeUint32BE(p,this._buffer,m-4),o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,m),this._finished=!0}for(var b=0;b<this.digestLength/8;b++)t.writeUint32BE(this._stateHi[b],c,b*8),t.writeUint32BE(this._stateLo[b],c,b*8+4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._stateHi.set(c.stateHi),this._stateLo.set(c.stateLo),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.stateHi),r.wipe(c.stateLo),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();e.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function o(a,c,u,h,d,p,m){for(var b=u[0],_=u[1],A=u[2],I=u[3],w=u[4],E=u[5],y=u[6],S=u[7],g=h[0],l=h[1],v=h[2],M=h[3],L=h[4],F=h[5],U=h[6],j=h[7],D,R,G,W,z,V,B,q;m>=128;){for(var le=0;le<16;le++){var K=8*le+p;a[le]=t.readUint32BE(d,K),c[le]=t.readUint32BE(d,K+4)}for(var le=0;le<80;le++){var se=b,ee=_,oe=A,N=I,P=w,T=E,f=y,O=S,Y=g,Q=l,xe=v,Se=M,ve=L,Le=F,Qe=U,qe=j;if(D=S,R=j,z=R&65535,V=R>>>16,B=D&65535,q=D>>>16,D=(w>>>14|L<<32-14)^(w>>>18|L<<32-18)^(L>>>41-32|w<<32-(41-32)),R=(L>>>14|w<<32-14)^(L>>>18|w<<32-18)^(w>>>41-32|L<<32-(41-32)),z+=R&65535,V+=R>>>16,B+=D&65535,q+=D>>>16,D=w&E^~w&y,R=L&F^~L&U,z+=R&65535,V+=R>>>16,B+=D&65535,q+=D>>>16,D=i[le*2],R=i[le*2+1],z+=R&65535,V+=R>>>16,B+=D&65535,q+=D>>>16,D=a[le%16],R=c[le%16],z+=R&65535,V+=R>>>16,B+=D&65535,q+=D>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,G=B&65535|q<<16,W=z&65535|V<<16,D=G,R=W,z=R&65535,V=R>>>16,B=D&65535,q=D>>>16,D=(b>>>28|g<<32-28)^(g>>>34-32|b<<32-(34-32))^(g>>>39-32|b<<32-(39-32)),R=(g>>>28|b<<32-28)^(b>>>34-32|g<<32-(34-32))^(b>>>39-32|g<<32-(39-32)),z+=R&65535,V+=R>>>16,B+=D&65535,q+=D>>>16,D=b&_^b&A^_&A,R=g&l^g&v^l&v,z+=R&65535,V+=R>>>16,B+=D&65535,q+=D>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,O=B&65535|q<<16,qe=z&65535|V<<16,D=N,R=Se,z=R&65535,V=R>>>16,B=D&65535,q=D>>>16,D=G,R=W,z+=R&65535,V+=R>>>16,B+=D&65535,q+=D>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,N=B&65535|q<<16,Se=z&65535|V<<16,_=se,A=ee,I=oe,w=N,E=P,y=T,S=f,b=O,l=Y,v=Q,M=xe,L=Se,F=ve,U=Le,j=Qe,g=qe,le%16===15)for(var K=0;K<16;K++)D=a[K],R=c[K],z=R&65535,V=R>>>16,B=D&65535,q=D>>>16,D=a[(K+9)%16],R=c[(K+9)%16],z+=R&65535,V+=R>>>16,B+=D&65535,q+=D>>>16,G=a[(K+1)%16],W=c[(K+1)%16],D=(G>>>1|W<<32-1)^(G>>>8|W<<32-8)^G>>>7,R=(W>>>1|G<<32-1)^(W>>>8|G<<32-8)^(W>>>7|G<<32-7),z+=R&65535,V+=R>>>16,B+=D&65535,q+=D>>>16,G=a[(K+14)%16],W=c[(K+14)%16],D=(G>>>19|W<<32-19)^(W>>>61-32|G<<32-(61-32))^G>>>6,R=(W>>>19|G<<32-19)^(G>>>61-32|W<<32-(61-32))^(W>>>6|G<<32-6),z+=R&65535,V+=R>>>16,B+=D&65535,q+=D>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,a[K]=B&65535|q<<16,c[K]=z&65535|V<<16}D=b,R=g,z=R&65535,V=R>>>16,B=D&65535,q=D>>>16,D=u[0],R=h[0],z+=R&65535,V+=R>>>16,B+=D&65535,q+=D>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,u[0]=b=B&65535|q<<16,h[0]=g=z&65535|V<<16,D=_,R=l,z=R&65535,V=R>>>16,B=D&65535,q=D>>>16,D=u[1],R=h[1],z+=R&65535,V+=R>>>16,B+=D&65535,q+=D>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,u[1]=_=B&65535|q<<16,h[1]=l=z&65535|V<<16,D=A,R=v,z=R&65535,V=R>>>16,B=D&65535,q=D>>>16,D=u[2],R=h[2],z+=R&65535,V+=R>>>16,B+=D&65535,q+=D>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,u[2]=A=B&65535|q<<16,h[2]=v=z&65535|V<<16,D=I,R=M,z=R&65535,V=R>>>16,B=D&65535,q=D>>>16,D=u[3],R=h[3],z+=R&65535,V+=R>>>16,B+=D&65535,q+=D>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,u[3]=I=B&65535|q<<16,h[3]=M=z&65535|V<<16,D=w,R=L,z=R&65535,V=R>>>16,B=D&65535,q=D>>>16,D=u[4],R=h[4],z+=R&65535,V+=R>>>16,B+=D&65535,q+=D>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,u[4]=w=B&65535|q<<16,h[4]=L=z&65535|V<<16,D=E,R=F,z=R&65535,V=R>>>16,B=D&65535,q=D>>>16,D=u[5],R=h[5],z+=R&65535,V+=R>>>16,B+=D&65535,q+=D>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,u[5]=E=B&65535|q<<16,h[5]=F=z&65535|V<<16,D=y,R=U,z=R&65535,V=R>>>16,B=D&65535,q=D>>>16,D=u[6],R=h[6],z+=R&65535,V+=R>>>16,B+=D&65535,q+=D>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,u[6]=y=B&65535|q<<16,h[6]=U=z&65535|V<<16,D=S,R=j,z=R&65535,V=R>>>16,B=D&65535,q=D>>>16,D=u[7],R=h[7],z+=R&65535,V+=R>>>16,B+=D&65535,q+=D>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,u[7]=S=B&65535|q<<16,h[7]=j=z&65535|V<<16,p+=128,m-=128}return p}function s(a){var c=new n;c.update(a);var u=c.digest();return c.clean(),u}e.hash=s})(Xu),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.convertSecretKeyToX25519=e.convertPublicKeyToX25519=e.verify=e.sign=e.extractPublicKeyFromSecretKey=e.generateKeyPair=e.generateKeyPairFromSeed=e.SEED_LENGTH=e.SECRET_KEY_LENGTH=e.PUBLIC_KEY_LENGTH=e.SIGNATURE_LENGTH=void 0;const t=qn,r=Xu,n=rr;e.SIGNATURE_LENGTH=64,e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=64,e.SEED_LENGTH=32;function i(N){const P=new Float64Array(16);if(N)for(let T=0;T<N.length;T++)P[T]=N[T];return P}const o=new Uint8Array(32);o[0]=9;const s=i(),a=i([1]),c=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),h=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function m(N,P){for(let T=0;T<16;T++)N[T]=P[T]|0}function b(N){let P=1;for(let T=0;T<16;T++){let f=N[T]+P+65535;P=Math.floor(f/65536),N[T]=f-P*65536}N[0]+=P-1+37*(P-1)}function _(N,P,T){const f=~(T-1);for(let O=0;O<16;O++){const Y=f&(N[O]^P[O]);N[O]^=Y,P[O]^=Y}}function A(N,P){const T=i(),f=i();for(let O=0;O<16;O++)f[O]=P[O];b(f),b(f),b(f);for(let O=0;O<2;O++){T[0]=f[0]-65517;for(let Q=1;Q<15;Q++)T[Q]=f[Q]-65535-(T[Q-1]>>16&1),T[Q-1]&=65535;T[15]=f[15]-32767-(T[14]>>16&1);const Y=T[15]>>16&1;T[14]&=65535,_(f,T,1-Y)}for(let O=0;O<16;O++)N[2*O]=f[O]&255,N[2*O+1]=f[O]>>8}function I(N,P){let T=0;for(let f=0;f<32;f++)T|=N[f]^P[f];return(1&T-1>>>8)-1}function w(N,P){const T=new Uint8Array(32),f=new Uint8Array(32);return A(T,N),A(f,P),I(T,f)}function E(N){const P=new Uint8Array(32);return A(P,N),P[0]&1}function y(N,P){for(let T=0;T<16;T++)N[T]=P[2*T]+(P[2*T+1]<<8);N[15]&=32767}function S(N,P,T){for(let f=0;f<16;f++)N[f]=P[f]+T[f]}function g(N,P,T){for(let f=0;f<16;f++)N[f]=P[f]-T[f]}function l(N,P,T){let f,O,Y=0,Q=0,xe=0,Se=0,ve=0,Le=0,Qe=0,qe=0,Te=0,De=0,ye=0,be=0,we=0,pe=0,fe=0,ae=0,_e=0,Ce=0,ue=0,Oe=0,Me=0,ke=0,Be=0,Ue=0,sr=0,dr=0,Rr=0,Pt=0,Pr=0,pr=0,cn=0,et=T[0],Ye=T[1],at=T[2],rt=T[3],ct=T[4],Je=T[5],dt=T[6],yt=T[7],wt=T[8],pt=T[9],bt=T[10],gt=T[11],lt=T[12],Ge=T[13],C=T[14],k=T[15];f=P[0],Y+=f*et,Q+=f*Ye,xe+=f*at,Se+=f*rt,ve+=f*ct,Le+=f*Je,Qe+=f*dt,qe+=f*yt,Te+=f*wt,De+=f*pt,ye+=f*bt,be+=f*gt,we+=f*lt,pe+=f*Ge,fe+=f*C,ae+=f*k,f=P[1],Q+=f*et,xe+=f*Ye,Se+=f*at,ve+=f*rt,Le+=f*ct,Qe+=f*Je,qe+=f*dt,Te+=f*yt,De+=f*wt,ye+=f*pt,be+=f*bt,we+=f*gt,pe+=f*lt,fe+=f*Ge,ae+=f*C,_e+=f*k,f=P[2],xe+=f*et,Se+=f*Ye,ve+=f*at,Le+=f*rt,Qe+=f*ct,qe+=f*Je,Te+=f*dt,De+=f*yt,ye+=f*wt,be+=f*pt,we+=f*bt,pe+=f*gt,fe+=f*lt,ae+=f*Ge,_e+=f*C,Ce+=f*k,f=P[3],Se+=f*et,ve+=f*Ye,Le+=f*at,Qe+=f*rt,qe+=f*ct,Te+=f*Je,De+=f*dt,ye+=f*yt,be+=f*wt,we+=f*pt,pe+=f*bt,fe+=f*gt,ae+=f*lt,_e+=f*Ge,Ce+=f*C,ue+=f*k,f=P[4],ve+=f*et,Le+=f*Ye,Qe+=f*at,qe+=f*rt,Te+=f*ct,De+=f*Je,ye+=f*dt,be+=f*yt,we+=f*wt,pe+=f*pt,fe+=f*bt,ae+=f*gt,_e+=f*lt,Ce+=f*Ge,ue+=f*C,Oe+=f*k,f=P[5],Le+=f*et,Qe+=f*Ye,qe+=f*at,Te+=f*rt,De+=f*ct,ye+=f*Je,be+=f*dt,we+=f*yt,pe+=f*wt,fe+=f*pt,ae+=f*bt,_e+=f*gt,Ce+=f*lt,ue+=f*Ge,Oe+=f*C,Me+=f*k,f=P[6],Qe+=f*et,qe+=f*Ye,Te+=f*at,De+=f*rt,ye+=f*ct,be+=f*Je,we+=f*dt,pe+=f*yt,fe+=f*wt,ae+=f*pt,_e+=f*bt,Ce+=f*gt,ue+=f*lt,Oe+=f*Ge,Me+=f*C,ke+=f*k,f=P[7],qe+=f*et,Te+=f*Ye,De+=f*at,ye+=f*rt,be+=f*ct,we+=f*Je,pe+=f*dt,fe+=f*yt,ae+=f*wt,_e+=f*pt,Ce+=f*bt,ue+=f*gt,Oe+=f*lt,Me+=f*Ge,ke+=f*C,Be+=f*k,f=P[8],Te+=f*et,De+=f*Ye,ye+=f*at,be+=f*rt,we+=f*ct,pe+=f*Je,fe+=f*dt,ae+=f*yt,_e+=f*wt,Ce+=f*pt,ue+=f*bt,Oe+=f*gt,Me+=f*lt,ke+=f*Ge,Be+=f*C,Ue+=f*k,f=P[9],De+=f*et,ye+=f*Ye,be+=f*at,we+=f*rt,pe+=f*ct,fe+=f*Je,ae+=f*dt,_e+=f*yt,Ce+=f*wt,ue+=f*pt,Oe+=f*bt,Me+=f*gt,ke+=f*lt,Be+=f*Ge,Ue+=f*C,sr+=f*k,f=P[10],ye+=f*et,be+=f*Ye,we+=f*at,pe+=f*rt,fe+=f*ct,ae+=f*Je,_e+=f*dt,Ce+=f*yt,ue+=f*wt,Oe+=f*pt,Me+=f*bt,ke+=f*gt,Be+=f*lt,Ue+=f*Ge,sr+=f*C,dr+=f*k,f=P[11],be+=f*et,we+=f*Ye,pe+=f*at,fe+=f*rt,ae+=f*ct,_e+=f*Je,Ce+=f*dt,ue+=f*yt,Oe+=f*wt,Me+=f*pt,ke+=f*bt,Be+=f*gt,Ue+=f*lt,sr+=f*Ge,dr+=f*C,Rr+=f*k,f=P[12],we+=f*et,pe+=f*Ye,fe+=f*at,ae+=f*rt,_e+=f*ct,Ce+=f*Je,ue+=f*dt,Oe+=f*yt,Me+=f*wt,ke+=f*pt,Be+=f*bt,Ue+=f*gt,sr+=f*lt,dr+=f*Ge,Rr+=f*C,Pt+=f*k,f=P[13],pe+=f*et,fe+=f*Ye,ae+=f*at,_e+=f*rt,Ce+=f*ct,ue+=f*Je,Oe+=f*dt,Me+=f*yt,ke+=f*wt,Be+=f*pt,Ue+=f*bt,sr+=f*gt,dr+=f*lt,Rr+=f*Ge,Pt+=f*C,Pr+=f*k,f=P[14],fe+=f*et,ae+=f*Ye,_e+=f*at,Ce+=f*rt,ue+=f*ct,Oe+=f*Je,Me+=f*dt,ke+=f*yt,Be+=f*wt,Ue+=f*pt,sr+=f*bt,dr+=f*gt,Rr+=f*lt,Pt+=f*Ge,Pr+=f*C,pr+=f*k,f=P[15],ae+=f*et,_e+=f*Ye,Ce+=f*at,ue+=f*rt,Oe+=f*ct,Me+=f*Je,ke+=f*dt,Be+=f*yt,Ue+=f*wt,sr+=f*pt,dr+=f*bt,Rr+=f*gt,Pt+=f*lt,Pr+=f*Ge,pr+=f*C,cn+=f*k,Y+=38*_e,Q+=38*Ce,xe+=38*ue,Se+=38*Oe,ve+=38*Me,Le+=38*ke,Qe+=38*Be,qe+=38*Ue,Te+=38*sr,De+=38*dr,ye+=38*Rr,be+=38*Pt,we+=38*Pr,pe+=38*pr,fe+=38*cn,O=1,f=Y+O+65535,O=Math.floor(f/65536),Y=f-O*65536,f=Q+O+65535,O=Math.floor(f/65536),Q=f-O*65536,f=xe+O+65535,O=Math.floor(f/65536),xe=f-O*65536,f=Se+O+65535,O=Math.floor(f/65536),Se=f-O*65536,f=ve+O+65535,O=Math.floor(f/65536),ve=f-O*65536,f=Le+O+65535,O=Math.floor(f/65536),Le=f-O*65536,f=Qe+O+65535,O=Math.floor(f/65536),Qe=f-O*65536,f=qe+O+65535,O=Math.floor(f/65536),qe=f-O*65536,f=Te+O+65535,O=Math.floor(f/65536),Te=f-O*65536,f=De+O+65535,O=Math.floor(f/65536),De=f-O*65536,f=ye+O+65535,O=Math.floor(f/65536),ye=f-O*65536,f=be+O+65535,O=Math.floor(f/65536),be=f-O*65536,f=we+O+65535,O=Math.floor(f/65536),we=f-O*65536,f=pe+O+65535,O=Math.floor(f/65536),pe=f-O*65536,f=fe+O+65535,O=Math.floor(f/65536),fe=f-O*65536,f=ae+O+65535,O=Math.floor(f/65536),ae=f-O*65536,Y+=O-1+37*(O-1),O=1,f=Y+O+65535,O=Math.floor(f/65536),Y=f-O*65536,f=Q+O+65535,O=Math.floor(f/65536),Q=f-O*65536,f=xe+O+65535,O=Math.floor(f/65536),xe=f-O*65536,f=Se+O+65535,O=Math.floor(f/65536),Se=f-O*65536,f=ve+O+65535,O=Math.floor(f/65536),ve=f-O*65536,f=Le+O+65535,O=Math.floor(f/65536),Le=f-O*65536,f=Qe+O+65535,O=Math.floor(f/65536),Qe=f-O*65536,f=qe+O+65535,O=Math.floor(f/65536),qe=f-O*65536,f=Te+O+65535,O=Math.floor(f/65536),Te=f-O*65536,f=De+O+65535,O=Math.floor(f/65536),De=f-O*65536,f=ye+O+65535,O=Math.floor(f/65536),ye=f-O*65536,f=be+O+65535,O=Math.floor(f/65536),be=f-O*65536,f=we+O+65535,O=Math.floor(f/65536),we=f-O*65536,f=pe+O+65535,O=Math.floor(f/65536),pe=f-O*65536,f=fe+O+65535,O=Math.floor(f/65536),fe=f-O*65536,f=ae+O+65535,O=Math.floor(f/65536),ae=f-O*65536,Y+=O-1+37*(O-1),N[0]=Y,N[1]=Q,N[2]=xe,N[3]=Se,N[4]=ve,N[5]=Le,N[6]=Qe,N[7]=qe,N[8]=Te,N[9]=De,N[10]=ye,N[11]=be,N[12]=we,N[13]=pe,N[14]=fe,N[15]=ae}function v(N,P){l(N,P,P)}function M(N,P){const T=i();let f;for(f=0;f<16;f++)T[f]=P[f];for(f=253;f>=0;f--)v(T,T),f!==2&&f!==4&&l(T,T,P);for(f=0;f<16;f++)N[f]=T[f]}function L(N,P){const T=i();let f;for(f=0;f<16;f++)T[f]=P[f];for(f=250;f>=0;f--)v(T,T),f!==1&&l(T,T,P);for(f=0;f<16;f++)N[f]=T[f]}function F(N,P){const T=i(),f=i(),O=i(),Y=i(),Q=i(),xe=i(),Se=i(),ve=i(),Le=i();g(T,N[1],N[0]),g(Le,P[1],P[0]),l(T,T,Le),S(f,N[0],N[1]),S(Le,P[0],P[1]),l(f,f,Le),l(O,N[3],P[3]),l(O,O,u),l(Y,N[2],P[2]),S(Y,Y,Y),g(Q,f,T),g(xe,Y,O),S(Se,Y,O),S(ve,f,T),l(N[0],Q,xe),l(N[1],ve,Se),l(N[2],Se,xe),l(N[3],Q,ve)}function U(N,P,T){for(let f=0;f<4;f++)_(N[f],P[f],T)}function j(N,P){const T=i(),f=i(),O=i();M(O,P[2]),l(T,P[0],O),l(f,P[1],O),A(N,f),N[31]^=E(T)<<7}function D(N,P,T){m(N[0],s),m(N[1],a),m(N[2],a),m(N[3],s);for(let f=255;f>=0;--f){const O=T[f/8|0]>>(f&7)&1;U(N,P,O),F(P,N),F(N,N),U(N,P,O)}}function R(N,P){const T=[i(),i(),i(),i()];m(T[0],h),m(T[1],d),m(T[2],a),l(T[3],h,d),D(N,T,P)}function G(N){if(N.length!==e.SEED_LENGTH)throw new Error(`ed25519: seed must be ${e.SEED_LENGTH} bytes`);const P=(0,r.hash)(N);P[0]&=248,P[31]&=127,P[31]|=64;const T=new Uint8Array(32),f=[i(),i(),i(),i()];R(f,P),j(T,f);const O=new Uint8Array(64);return O.set(N),O.set(T,32),{publicKey:T,secretKey:O}}e.generateKeyPairFromSeed=G;function W(N){const P=(0,t.randomBytes)(32,N),T=G(P);return(0,n.wipe)(P),T}e.generateKeyPair=W;function z(N){if(N.length!==e.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${e.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(N.subarray(32))}e.extractPublicKeyFromSecretKey=z;const V=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function B(N,P){let T,f,O,Y;for(f=63;f>=32;--f){for(T=0,O=f-32,Y=f-12;O<Y;++O)P[O]+=T-16*P[f]*V[O-(f-32)],T=Math.floor((P[O]+128)/256),P[O]-=T*256;P[O]+=T,P[f]=0}for(T=0,O=0;O<32;O++)P[O]+=T-(P[31]>>4)*V[O],T=P[O]>>8,P[O]&=255;for(O=0;O<32;O++)P[O]-=T*V[O];for(f=0;f<32;f++)P[f+1]+=P[f]>>8,N[f]=P[f]&255}function q(N){const P=new Float64Array(64);for(let T=0;T<64;T++)P[T]=N[T];for(let T=0;T<64;T++)N[T]=0;B(N,P)}function le(N,P){const T=new Float64Array(64),f=[i(),i(),i(),i()],O=(0,r.hash)(N.subarray(0,32));O[0]&=248,O[31]&=127,O[31]|=64;const Y=new Uint8Array(64);Y.set(O.subarray(32),32);const Q=new r.SHA512;Q.update(Y.subarray(32)),Q.update(P);const xe=Q.digest();Q.clean(),q(xe),R(f,xe),j(Y,f),Q.reset(),Q.update(Y.subarray(0,32)),Q.update(N.subarray(32)),Q.update(P);const Se=Q.digest();q(Se);for(let ve=0;ve<32;ve++)T[ve]=xe[ve];for(let ve=0;ve<32;ve++)for(let Le=0;Le<32;Le++)T[ve+Le]+=Se[ve]*O[Le];return B(Y.subarray(32),T),Y}e.sign=le;function K(N,P){const T=i(),f=i(),O=i(),Y=i(),Q=i(),xe=i(),Se=i();return m(N[2],a),y(N[1],P),v(O,N[1]),l(Y,O,c),g(O,O,N[2]),S(Y,N[2],Y),v(Q,Y),v(xe,Q),l(Se,xe,Q),l(T,Se,O),l(T,T,Y),L(T,T),l(T,T,O),l(T,T,Y),l(T,T,Y),l(N[0],T,Y),v(f,N[0]),l(f,f,Y),w(f,O)&&l(N[0],N[0],p),v(f,N[0]),l(f,f,Y),w(f,O)?-1:(E(N[0])===P[31]>>7&&g(N[0],s,N[0]),l(N[3],N[0],N[1]),0)}function se(N,P,T){const f=new Uint8Array(32),O=[i(),i(),i(),i()],Y=[i(),i(),i(),i()];if(T.length!==e.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${e.SIGNATURE_LENGTH} bytes`);if(K(Y,N))return!1;const Q=new r.SHA512;Q.update(T.subarray(0,32)),Q.update(N),Q.update(P);const xe=Q.digest();return q(xe),D(O,Y,xe),R(Y,T.subarray(32)),F(O,Y),j(f,O),!I(T,f)}e.verify=se;function ee(N){let P=[i(),i(),i(),i()];if(K(P,N))throw new Error("Ed25519: invalid public key");let T=i(),f=i(),O=P[1];S(T,a,O),g(f,a,O),M(f,f),l(T,T,f);let Y=new Uint8Array(32);return A(Y,T),Y}e.convertPublicKeyToX25519=ee;function oe(N){const P=(0,r.hash)(N.subarray(0,32));P[0]&=248,P[31]&=127,P[31]|=64;const T=new Uint8Array(P.subarray(0,32));return(0,n.wipe)(P),T}e.convertSecretKeyToX25519=oe}(ua);const nm="EdDSA",im="JWT",Qu=".",eh="base64url",om="utf8",sm="utf8",am=":",cm="did",lm="key",th="base58btc",um="z",hm="K36",fm=32;function ga(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function rh(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ga(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function ma(e,t){t||(t=e.reduce((i,o)=>i+o.length,0));const r=rh(t);let n=0;for(const i of e)r.set(i,n),n+=i.length;return ga(r)}function dm(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function d(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var _=0,A=0,I=0,w=b.length;I!==w&&b[I]===0;)I++,_++;for(var E=(w-I)*h+1>>>0,y=new Uint8Array(E);I!==w;){for(var S=b[I],g=0,l=E-1;(S!==0||g<A)&&l!==-1;l--,g++)S+=256*y[l]>>>0,y[l]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");A=g,I++}for(var v=E-A;v!==E&&y[v]===0;)v++;for(var M=c.repeat(_);v<E;++v)M+=e.charAt(y[v]);return M}function p(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var _=0;if(b[_]!==" "){for(var A=0,I=0;b[_]===c;)A++,_++;for(var w=(b.length-_)*u+1>>>0,E=new Uint8Array(w);b[_];){var y=r[b.charCodeAt(_)];if(y===255)return;for(var S=0,g=w-1;(y!==0||S<I)&&g!==-1;g--,S++)y+=a*E[g]>>>0,E[g]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");I=S,_++}if(b[_]!==" "){for(var l=w-I;l!==w&&E[l]===0;)l++;for(var v=new Uint8Array(A+(w-l)),M=A;l!==w;)v[M++]=E[l++];return v}}}function m(b){var _=p(b);if(_)return _;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:p,decode:m}}var pm=dm,gm=pm;const mm=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},vm=e=>new TextEncoder().encode(e),ym=e=>new TextDecoder().decode(e);class wm{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class bm{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return nh(this,t)}}class _m{constructor(t){this.decoders=t}or(t){return nh(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const nh=(e,t)=>new _m({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Em{constructor(t,r,n,i){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new wm(t,r,n),this.decoder=new bm(t,r,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Fo=({name:e,prefix:t,encode:r,decode:n})=>new Em(e,t,r,n),Mi=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=gm(r,t);return Fo({prefix:e,name:t,encode:n,decode:o=>mm(i(o))})},xm=(e,t,r,n)=>{const i={};for(let h=0;h<t.length;++h)i[t[h]]=h;let o=e.length;for(;e[o-1]==="=";)--o;const s=new Uint8Array(o*r/8|0);let a=0,c=0,u=0;for(let h=0;h<o;++h){const d=i[e[h]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s},Sm=(e,t,r)=>{const n=t[t.length-1]==="=",i=(1<<r)-1;let o="",s=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],s+=8;s>r;)s-=r,o+=t[i&a>>s];if(s&&(o+=t[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o},It=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Fo({prefix:t,name:e,encode(i){return Sm(i,n,r)},decode(i){return xm(i,n,r,e)}}),Cm=Fo({prefix:"\0",name:"identity",encode:e=>ym(e),decode:e=>vm(e)}),Am=Object.freeze(Object.defineProperty({__proto__:null,identity:Cm},Symbol.toStringTag,{value:"Module"})),Dm=It({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Om=Object.freeze(Object.defineProperty({__proto__:null,base2:Dm},Symbol.toStringTag,{value:"Module"})),Im=It({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Tm=Object.freeze(Object.defineProperty({__proto__:null,base8:Im},Symbol.toStringTag,{value:"Module"})),$m=Mi({prefix:"9",name:"base10",alphabet:"0123456789"}),Rm=Object.freeze(Object.defineProperty({__proto__:null,base10:$m},Symbol.toStringTag,{value:"Module"})),Pm=It({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Nm=It({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Lm=Object.freeze(Object.defineProperty({__proto__:null,base16:Pm,base16upper:Nm},Symbol.toStringTag,{value:"Module"})),Mm=It({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Fm=It({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Um=It({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),jm=It({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),km=It({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Bm=It({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),zm=It({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Wm=It({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Hm=It({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Vm=Object.freeze(Object.defineProperty({__proto__:null,base32:Mm,base32hex:km,base32hexpad:zm,base32hexpadupper:Wm,base32hexupper:Bm,base32pad:Um,base32padupper:jm,base32upper:Fm,base32z:Hm},Symbol.toStringTag,{value:"Module"})),qm=Mi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Km=Mi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Gm=Object.freeze(Object.defineProperty({__proto__:null,base36:qm,base36upper:Km},Symbol.toStringTag,{value:"Module"})),Ym=Mi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Jm=Mi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Zm=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Ym,base58flickr:Jm},Symbol.toStringTag,{value:"Module"})),Xm=It({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Qm=It({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ev=It({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),tv=It({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),rv=Object.freeze(Object.defineProperty({__proto__:null,base64:Xm,base64pad:Qm,base64url:ev,base64urlpad:tv},Symbol.toStringTag,{value:"Module"})),ih=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),nv=ih.reduce((e,t,r)=>(e[r]=t,e),[]),iv=ih.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function ov(e){return e.reduce((t,r)=>(t+=nv[r],t),"")}function sv(e){const t=[];for(const r of e){const n=iv[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}const av=Fo({prefix:"🚀",name:"base256emoji",encode:ov,decode:sv}),cv=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:av},Symbol.toStringTag,{value:"Module"}));new TextEncoder,new TextDecoder;const oh={...Am,...Om,...Tm,...Rm,...Lm,...Vm,...Gm,...Zm,...rv,...cv};function sh(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const ah=sh("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),va=sh("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=rh(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),ch={utf8:ah,"utf-8":ah,hex:oh.base16,latin1:va,ascii:va,binary:va,...oh};function Wt(e,t="utf8"){const r=ch[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}function Jt(e,t="utf8"){const r=ch[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ga(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function Uo(e){return Wt(Jt(la(e),om),eh)}function lh(e){const t=Jt(hm,th),r=um+Wt(ma([t,e]),th);return[cm,lm,r].join(am)}function lv(e){return Wt(e,eh)}function uv(e){return Jt([Uo(e.header),Uo(e.payload)].join(Qu),sm)}function hv(e){return[Uo(e.header),Uo(e.payload),lv(e.signature)].join(Qu)}function uh(e=qn.randomBytes(fm)){return ua.generateKeyPairFromSeed(e)}async function fv(e,t,r,n,i=re.fromMiliseconds(Date.now())){const o={alg:nm,typ:im},s=lh(n.publicKey),a=i+r,c={iss:s,sub:e,aud:t,iat:i,exp:a},u=uv({header:o,payload:c}),h=ua.sign(n.secretKey,u);return hv({header:o,payload:c,signature:h})}var ya={},jo={};Object.defineProperty(jo,"__esModule",{value:!0});var Ft=de,wa=rr,dv=20;function pv(e,t,r){for(var n=1634760805,i=857760878,o=2036477234,s=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],u=r[11]<<24|r[10]<<16|r[9]<<8|r[8],h=r[15]<<24|r[14]<<16|r[13]<<8|r[12],d=r[19]<<24|r[18]<<16|r[17]<<8|r[16],p=r[23]<<24|r[22]<<16|r[21]<<8|r[20],m=r[27]<<24|r[26]<<16|r[25]<<8|r[24],b=r[31]<<24|r[30]<<16|r[29]<<8|r[28],_=t[3]<<24|t[2]<<16|t[1]<<8|t[0],A=t[7]<<24|t[6]<<16|t[5]<<8|t[4],I=t[11]<<24|t[10]<<16|t[9]<<8|t[8],w=t[15]<<24|t[14]<<16|t[13]<<8|t[12],E=n,y=i,S=o,g=s,l=a,v=c,M=u,L=h,F=d,U=p,j=m,D=b,R=_,G=A,W=I,z=w,V=0;V<dv;V+=2)E=E+l|0,R^=E,R=R>>>32-16|R<<16,F=F+R|0,l^=F,l=l>>>32-12|l<<12,y=y+v|0,G^=y,G=G>>>32-16|G<<16,U=U+G|0,v^=U,v=v>>>32-12|v<<12,S=S+M|0,W^=S,W=W>>>32-16|W<<16,j=j+W|0,M^=j,M=M>>>32-12|M<<12,g=g+L|0,z^=g,z=z>>>32-16|z<<16,D=D+z|0,L^=D,L=L>>>32-12|L<<12,S=S+M|0,W^=S,W=W>>>32-8|W<<8,j=j+W|0,M^=j,M=M>>>32-7|M<<7,g=g+L|0,z^=g,z=z>>>32-8|z<<8,D=D+z|0,L^=D,L=L>>>32-7|L<<7,y=y+v|0,G^=y,G=G>>>32-8|G<<8,U=U+G|0,v^=U,v=v>>>32-7|v<<7,E=E+l|0,R^=E,R=R>>>32-8|R<<8,F=F+R|0,l^=F,l=l>>>32-7|l<<7,E=E+v|0,z^=E,z=z>>>32-16|z<<16,j=j+z|0,v^=j,v=v>>>32-12|v<<12,y=y+M|0,R^=y,R=R>>>32-16|R<<16,D=D+R|0,M^=D,M=M>>>32-12|M<<12,S=S+L|0,G^=S,G=G>>>32-16|G<<16,F=F+G|0,L^=F,L=L>>>32-12|L<<12,g=g+l|0,W^=g,W=W>>>32-16|W<<16,U=U+W|0,l^=U,l=l>>>32-12|l<<12,S=S+L|0,G^=S,G=G>>>32-8|G<<8,F=F+G|0,L^=F,L=L>>>32-7|L<<7,g=g+l|0,W^=g,W=W>>>32-8|W<<8,U=U+W|0,l^=U,l=l>>>32-7|l<<7,y=y+M|0,R^=y,R=R>>>32-8|R<<8,D=D+R|0,M^=D,M=M>>>32-7|M<<7,E=E+v|0,z^=E,z=z>>>32-8|z<<8,j=j+z|0,v^=j,v=v>>>32-7|v<<7;Ft.writeUint32LE(E+n|0,e,0),Ft.writeUint32LE(y+i|0,e,4),Ft.writeUint32LE(S+o|0,e,8),Ft.writeUint32LE(g+s|0,e,12),Ft.writeUint32LE(l+a|0,e,16),Ft.writeUint32LE(v+c|0,e,20),Ft.writeUint32LE(M+u|0,e,24),Ft.writeUint32LE(L+h|0,e,28),Ft.writeUint32LE(F+d|0,e,32),Ft.writeUint32LE(U+p|0,e,36),Ft.writeUint32LE(j+m|0,e,40),Ft.writeUint32LE(D+b|0,e,44),Ft.writeUint32LE(R+_|0,e,48),Ft.writeUint32LE(G+A|0,e,52),Ft.writeUint32LE(W+I|0,e,56),Ft.writeUint32LE(z+w|0,e,60)}function hh(e,t,r,n,i){if(i===void 0&&(i=0),e.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var o,s;if(i===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");o=new Uint8Array(16),s=o.length-t.length,o.set(t,s)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");o=t,s=i}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){pv(a,o,e);for(var u=c;u<c+64&&u<r.length;u++)n[u]=r[u]^a[u-c];mv(o,0,s)}return wa.wipe(a),i===0&&wa.wipe(o),n}jo.streamXOR=hh;function gv(e,t,r,n){return n===void 0&&(n=0),wa.wipe(r),hh(e,t,r,r,n)}jo.stream=gv;function mv(e,t,r){for(var n=1;r--;)n=n+(e[t]&255)|0,e[t]=n&255,n>>>=8,t++;if(n>0)throw new Error("ChaCha: counter overflow")}var fh={},Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});function vv(e,t,r){return~(e-1)&t|e-1&r}Kr.select=vv;function yv(e,t){return(e|0)-(t|0)-1>>>31&1}Kr.lessOrEqual=yv;function dh(e,t){if(e.length!==t.length)return 0;for(var r=0,n=0;n<e.length;n++)r|=e[n]^t[n];return 1&r-1>>>8}Kr.compare=dh;function wv(e,t){return e.length===0||t.length===0?!1:dh(e,t)!==0}Kr.equal=wv,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Kr,r=rr;e.DIGEST_LENGTH=16;var n=function(){function s(a){this.digestLength=e.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=a[0]|a[1]<<8;this._r[0]=c&8191;var u=a[2]|a[3]<<8;this._r[1]=(c>>>13|u<<3)&8191;var h=a[4]|a[5]<<8;this._r[2]=(u>>>10|h<<6)&7939;var d=a[6]|a[7]<<8;this._r[3]=(h>>>7|d<<9)&8191;var p=a[8]|a[9]<<8;this._r[4]=(d>>>4|p<<12)&255,this._r[5]=p>>>1&8190;var m=a[10]|a[11]<<8;this._r[6]=(p>>>14|m<<2)&8191;var b=a[12]|a[13]<<8;this._r[7]=(m>>>11|b<<5)&8065;var _=a[14]|a[15]<<8;this._r[8]=(b>>>8|_<<8)&8191,this._r[9]=_>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return s.prototype._blocks=function(a,c,u){for(var h=this._fin?0:2048,d=this._h[0],p=this._h[1],m=this._h[2],b=this._h[3],_=this._h[4],A=this._h[5],I=this._h[6],w=this._h[7],E=this._h[8],y=this._h[9],S=this._r[0],g=this._r[1],l=this._r[2],v=this._r[3],M=this._r[4],L=this._r[5],F=this._r[6],U=this._r[7],j=this._r[8],D=this._r[9];u>=16;){var R=a[c+0]|a[c+1]<<8;d+=R&8191;var G=a[c+2]|a[c+3]<<8;p+=(R>>>13|G<<3)&8191;var W=a[c+4]|a[c+5]<<8;m+=(G>>>10|W<<6)&8191;var z=a[c+6]|a[c+7]<<8;b+=(W>>>7|z<<9)&8191;var V=a[c+8]|a[c+9]<<8;_+=(z>>>4|V<<12)&8191,A+=V>>>1&8191;var B=a[c+10]|a[c+11]<<8;I+=(V>>>14|B<<2)&8191;var q=a[c+12]|a[c+13]<<8;w+=(B>>>11|q<<5)&8191;var le=a[c+14]|a[c+15]<<8;E+=(q>>>8|le<<8)&8191,y+=le>>>5|h;var K=0,se=K;se+=d*S,se+=p*(5*D),se+=m*(5*j),se+=b*(5*U),se+=_*(5*F),K=se>>>13,se&=8191,se+=A*(5*L),se+=I*(5*M),se+=w*(5*v),se+=E*(5*l),se+=y*(5*g),K+=se>>>13,se&=8191;var ee=K;ee+=d*g,ee+=p*S,ee+=m*(5*D),ee+=b*(5*j),ee+=_*(5*U),K=ee>>>13,ee&=8191,ee+=A*(5*F),ee+=I*(5*L),ee+=w*(5*M),ee+=E*(5*v),ee+=y*(5*l),K+=ee>>>13,ee&=8191;var oe=K;oe+=d*l,oe+=p*g,oe+=m*S,oe+=b*(5*D),oe+=_*(5*j),K=oe>>>13,oe&=8191,oe+=A*(5*U),oe+=I*(5*F),oe+=w*(5*L),oe+=E*(5*M),oe+=y*(5*v),K+=oe>>>13,oe&=8191;var N=K;N+=d*v,N+=p*l,N+=m*g,N+=b*S,N+=_*(5*D),K=N>>>13,N&=8191,N+=A*(5*j),N+=I*(5*U),N+=w*(5*F),N+=E*(5*L),N+=y*(5*M),K+=N>>>13,N&=8191;var P=K;P+=d*M,P+=p*v,P+=m*l,P+=b*g,P+=_*S,K=P>>>13,P&=8191,P+=A*(5*D),P+=I*(5*j),P+=w*(5*U),P+=E*(5*F),P+=y*(5*L),K+=P>>>13,P&=8191;var T=K;T+=d*L,T+=p*M,T+=m*v,T+=b*l,T+=_*g,K=T>>>13,T&=8191,T+=A*S,T+=I*(5*D),T+=w*(5*j),T+=E*(5*U),T+=y*(5*F),K+=T>>>13,T&=8191;var f=K;f+=d*F,f+=p*L,f+=m*M,f+=b*v,f+=_*l,K=f>>>13,f&=8191,f+=A*g,f+=I*S,f+=w*(5*D),f+=E*(5*j),f+=y*(5*U),K+=f>>>13,f&=8191;var O=K;O+=d*U,O+=p*F,O+=m*L,O+=b*M,O+=_*v,K=O>>>13,O&=8191,O+=A*l,O+=I*g,O+=w*S,O+=E*(5*D),O+=y*(5*j),K+=O>>>13,O&=8191;var Y=K;Y+=d*j,Y+=p*U,Y+=m*F,Y+=b*L,Y+=_*M,K=Y>>>13,Y&=8191,Y+=A*v,Y+=I*l,Y+=w*g,Y+=E*S,Y+=y*(5*D),K+=Y>>>13,Y&=8191;var Q=K;Q+=d*D,Q+=p*j,Q+=m*U,Q+=b*F,Q+=_*L,K=Q>>>13,Q&=8191,Q+=A*M,Q+=I*v,Q+=w*l,Q+=E*g,Q+=y*S,K+=Q>>>13,Q&=8191,K=(K<<2)+K|0,K=K+se|0,se=K&8191,K=K>>>13,ee+=K,d=se,p=ee,m=oe,b=N,_=P,A=T,I=f,w=O,E=Y,y=Q,c+=16,u-=16}this._h[0]=d,this._h[1]=p,this._h[2]=m,this._h[3]=b,this._h[4]=_,this._h[5]=A,this._h[6]=I,this._h[7]=w,this._h[8]=E,this._h[9]=y},s.prototype.finish=function(a,c){c===void 0&&(c=0);var u=new Uint16Array(10),h,d,p,m;if(this._leftover){for(m=this._leftover,this._buffer[m++]=1;m<16;m++)this._buffer[m]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(h=this._h[1]>>>13,this._h[1]&=8191,m=2;m<10;m++)this._h[m]+=h,h=this._h[m]>>>13,this._h[m]&=8191;for(this._h[0]+=h*5,h=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=h,h=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=h,u[0]=this._h[0]+5,h=u[0]>>>13,u[0]&=8191,m=1;m<10;m++)u[m]=this._h[m]+h,h=u[m]>>>13,u[m]&=8191;for(u[9]-=8192,d=(h^1)-1,m=0;m<10;m++)u[m]&=d;for(d=~d,m=0;m<10;m++)this._h[m]=this._h[m]&d|u[m];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,p=this._h[0]+this._pad[0],this._h[0]=p&65535,m=1;m<8;m++)p=(this._h[m]+this._pad[m]|0)+(p>>>16)|0,this._h[m]=p&65535;return a[c+0]=this._h[0]>>>0,a[c+1]=this._h[0]>>>8,a[c+2]=this._h[1]>>>0,a[c+3]=this._h[1]>>>8,a[c+4]=this._h[2]>>>0,a[c+5]=this._h[2]>>>8,a[c+6]=this._h[3]>>>0,a[c+7]=this._h[3]>>>8,a[c+8]=this._h[4]>>>0,a[c+9]=this._h[4]>>>8,a[c+10]=this._h[5]>>>0,a[c+11]=this._h[5]>>>8,a[c+12]=this._h[6]>>>0,a[c+13]=this._h[6]>>>8,a[c+14]=this._h[7]>>>0,a[c+15]=this._h[7]>>>8,this._finished=!0,this},s.prototype.update=function(a){var c=0,u=a.length,h;if(this._leftover){h=16-this._leftover,h>u&&(h=u);for(var d=0;d<h;d++)this._buffer[this._leftover+d]=a[c+d];if(u-=h,c+=h,this._leftover+=h,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(u>=16&&(h=u-u%16,this._blocks(a,c,h),c+=h,u-=h),u){for(var d=0;d<u;d++)this._buffer[this._leftover+d]=a[c+d];this._leftover+=u}return this},s.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},s.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},s}();e.Poly1305=n;function i(s,a){var c=new n(s);c.update(a);var u=c.digest();return c.clean(),u}e.oneTimeAuth=i;function o(s,a){return s.length!==e.DIGEST_LENGTH||a.length!==e.DIGEST_LENGTH?!1:t.equal(s,a)}e.equal=o}(fh),function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=jo,r=fh,n=rr,i=de,o=Kr;e.KEY_LENGTH=32,e.NONCE_LENGTH=12,e.TAG_LENGTH=16;var s=new Uint8Array(16),a=function(){function c(u){if(this.nonceLength=e.NONCE_LENGTH,this.tagLength=e.TAG_LENGTH,u.length!==e.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(u)}return c.prototype.seal=function(u,h,d,p){if(u.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var m=new Uint8Array(16);m.set(u,m.length-u.length);var b=new Uint8Array(32);t.stream(this._key,m,b,4);var _=h.length+this.tagLength,A;if(p){if(p.length!==_)throw new Error("ChaCha20Poly1305: incorrect destination length");A=p}else A=new Uint8Array(_);return t.streamXOR(this._key,m,h,A,4),this._authenticate(A.subarray(A.length-this.tagLength,A.length),b,A.subarray(0,A.length-this.tagLength),d),n.wipe(m),A},c.prototype.open=function(u,h,d,p){if(u.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(h.length<this.tagLength)return null;var m=new Uint8Array(16);m.set(u,m.length-u.length);var b=new Uint8Array(32);t.stream(this._key,m,b,4);var _=new Uint8Array(this.tagLength);if(this._authenticate(_,b,h.subarray(0,h.length-this.tagLength),d),!o.equal(_,h.subarray(h.length-this.tagLength,h.length)))return null;var A=h.length-this.tagLength,I;if(p){if(p.length!==A)throw new Error("ChaCha20Poly1305: incorrect destination length");I=p}else I=new Uint8Array(A);return t.streamXOR(this._key,m,h.subarray(0,h.length-this.tagLength),I,4),n.wipe(m),I},c.prototype.clean=function(){return n.wipe(this._key),this},c.prototype._authenticate=function(u,h,d,p){var m=new r.Poly1305(h);p&&(m.update(p),p.length%16>0&&m.update(s.subarray(p.length%16))),m.update(d),d.length%16>0&&m.update(s.subarray(d.length%16));var b=new Uint8Array(8);p&&i.writeUint64LE(p.length,b),m.update(b),i.writeUint64LE(d.length,b),m.update(b);for(var _=m.digest(),A=0;A<_.length;A++)u[A]=_[A];m.clean(),n.wipe(_),n.wipe(b)},c}();e.ChaCha20Poly1305=a}(ya);var ph={},Fi={},ba={};Object.defineProperty(ba,"__esModule",{value:!0});function bv(e){return typeof e.saveState<"u"&&typeof e.restoreState<"u"&&typeof e.cleanSavedState<"u"}ba.isSerializableHash=bv,Object.defineProperty(Fi,"__esModule",{value:!0});var Sr=ba,_v=Kr,Ev=rr,gh=function(){function e(t,r){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),Sr.isSerializableHash(this._inner)&&Sr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Ev.wipe(n)}return e.prototype.reset=function(){if(!Sr.isSerializableHash(this._inner)||!Sr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){Sr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Sr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(t){return this._inner.update(t),this},e.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},e.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},e.prototype.saveState=function(){if(!Sr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(t){if(!Sr.isSerializableHash(this._inner)||!Sr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(t){if(!Sr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},e}();Fi.HMAC=gh;function xv(e,t,r){var n=new gh(e,t);n.update(r);var i=n.digest();return n.clean(),i}Fi.hmac=xv,Fi.equal=_v.equal,Object.defineProperty(ph,"__esModule",{value:!0});var mh=Fi,vh=rr,Sv=function(){function e(t,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=i;var o=mh.hmac(this._hash,n,r);this._hmac=new mh.HMAC(t,o),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(t){for(var r=new Uint8Array(t),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},e.prototype.clean=function(){this._hmac.clean(),vh.wipe(this._buffer),vh.wipe(this._counter),this._bufpos=0},e}(),Cv=ph.HKDF=Sv,ko={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=de,r=rr;e.DIGEST_LENGTH=32,e.BLOCK_SIZE=64;var n=function(){function a(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},a.prototype.update=function(c,u){if(u===void 0&&(u=c.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var h=0;if(this._bytesHashed+=u,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&u>0;)this._buffer[this._bufferLength++]=c[h++],u--;this._bufferLength===this.blockSize&&(o(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(u>=this.blockSize&&(h=o(this._temp,this._state,c,h,u),u%=this.blockSize);u>0;)this._buffer[this._bufferLength++]=c[h++],u--;return this},a.prototype.finish=function(c){if(!this._finished){var u=this._bytesHashed,h=this._bufferLength,d=u/536870912|0,p=u<<3,m=u%64<56?64:128;this._buffer[h]=128;for(var b=h+1;b<m-8;b++)this._buffer[b]=0;t.writeUint32BE(d,this._buffer,m-8),t.writeUint32BE(p,this._buffer,m-4),o(this._temp,this._state,this._buffer,0,m),this._finished=!0}for(var b=0;b<this.digestLength/4;b++)t.writeUint32BE(this._state[b],c,b*4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._state.set(c.state),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.state),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();e.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function o(a,c,u,h,d){for(;d>=64;){for(var p=c[0],m=c[1],b=c[2],_=c[3],A=c[4],I=c[5],w=c[6],E=c[7],y=0;y<16;y++){var S=h+y*4;a[y]=t.readUint32BE(u,S)}for(var y=16;y<64;y++){var g=a[y-2],l=(g>>>17|g<<32-17)^(g>>>19|g<<32-19)^g>>>10;g=a[y-15];var v=(g>>>7|g<<32-7)^(g>>>18|g<<32-18)^g>>>3;a[y]=(l+a[y-7]|0)+(v+a[y-16]|0)}for(var y=0;y<64;y++){var l=(((A>>>6|A<<26)^(A>>>11|A<<21)^(A>>>25|A<<7))+(A&I^~A&w)|0)+(E+(i[y]+a[y]|0)|0)|0,v=((p>>>2|p<<32-2)^(p>>>13|p<<32-13)^(p>>>22|p<<32-22))+(p&m^p&b^m&b)|0;E=w,w=I,I=A,A=_+l|0,_=b,b=m,m=p,p=l+v|0}c[0]+=p,c[1]+=m,c[2]+=b,c[3]+=_,c[4]+=A,c[5]+=I,c[6]+=w,c[7]+=E,h+=64,d-=64}return h}function s(a){var c=new n;c.update(a);var u=c.digest();return c.clean(),u}e.hash=s})(ko);var _a={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.sharedKey=e.generateKeyPair=e.generateKeyPairFromSeed=e.scalarMultBase=e.scalarMult=e.SHARED_KEY_LENGTH=e.SECRET_KEY_LENGTH=e.PUBLIC_KEY_LENGTH=void 0;const t=qn,r=rr;e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=32,e.SHARED_KEY_LENGTH=32;function n(y){const S=new Float64Array(16);if(y)for(let g=0;g<y.length;g++)S[g]=y[g];return S}const i=new Uint8Array(32);i[0]=9;const o=n([56129,1]);function s(y){let S=1;for(let g=0;g<16;g++){let l=y[g]+S+65535;S=Math.floor(l/65536),y[g]=l-S*65536}y[0]+=S-1+37*(S-1)}function a(y,S,g){const l=~(g-1);for(let v=0;v<16;v++){const M=l&(y[v]^S[v]);y[v]^=M,S[v]^=M}}function c(y,S){const g=n(),l=n();for(let v=0;v<16;v++)l[v]=S[v];s(l),s(l),s(l);for(let v=0;v<2;v++){g[0]=l[0]-65517;for(let L=1;L<15;L++)g[L]=l[L]-65535-(g[L-1]>>16&1),g[L-1]&=65535;g[15]=l[15]-32767-(g[14]>>16&1);const M=g[15]>>16&1;g[14]&=65535,a(l,g,1-M)}for(let v=0;v<16;v++)y[2*v]=l[v]&255,y[2*v+1]=l[v]>>8}function u(y,S){for(let g=0;g<16;g++)y[g]=S[2*g]+(S[2*g+1]<<8);y[15]&=32767}function h(y,S,g){for(let l=0;l<16;l++)y[l]=S[l]+g[l]}function d(y,S,g){for(let l=0;l<16;l++)y[l]=S[l]-g[l]}function p(y,S,g){let l,v,M=0,L=0,F=0,U=0,j=0,D=0,R=0,G=0,W=0,z=0,V=0,B=0,q=0,le=0,K=0,se=0,ee=0,oe=0,N=0,P=0,T=0,f=0,O=0,Y=0,Q=0,xe=0,Se=0,ve=0,Le=0,Qe=0,qe=0,Te=g[0],De=g[1],ye=g[2],be=g[3],we=g[4],pe=g[5],fe=g[6],ae=g[7],_e=g[8],Ce=g[9],ue=g[10],Oe=g[11],Me=g[12],ke=g[13],Be=g[14],Ue=g[15];l=S[0],M+=l*Te,L+=l*De,F+=l*ye,U+=l*be,j+=l*we,D+=l*pe,R+=l*fe,G+=l*ae,W+=l*_e,z+=l*Ce,V+=l*ue,B+=l*Oe,q+=l*Me,le+=l*ke,K+=l*Be,se+=l*Ue,l=S[1],L+=l*Te,F+=l*De,U+=l*ye,j+=l*be,D+=l*we,R+=l*pe,G+=l*fe,W+=l*ae,z+=l*_e,V+=l*Ce,B+=l*ue,q+=l*Oe,le+=l*Me,K+=l*ke,se+=l*Be,ee+=l*Ue,l=S[2],F+=l*Te,U+=l*De,j+=l*ye,D+=l*be,R+=l*we,G+=l*pe,W+=l*fe,z+=l*ae,V+=l*_e,B+=l*Ce,q+=l*ue,le+=l*Oe,K+=l*Me,se+=l*ke,ee+=l*Be,oe+=l*Ue,l=S[3],U+=l*Te,j+=l*De,D+=l*ye,R+=l*be,G+=l*we,W+=l*pe,z+=l*fe,V+=l*ae,B+=l*_e,q+=l*Ce,le+=l*ue,K+=l*Oe,se+=l*Me,ee+=l*ke,oe+=l*Be,N+=l*Ue,l=S[4],j+=l*Te,D+=l*De,R+=l*ye,G+=l*be,W+=l*we,z+=l*pe,V+=l*fe,B+=l*ae,q+=l*_e,le+=l*Ce,K+=l*ue,se+=l*Oe,ee+=l*Me,oe+=l*ke,N+=l*Be,P+=l*Ue,l=S[5],D+=l*Te,R+=l*De,G+=l*ye,W+=l*be,z+=l*we,V+=l*pe,B+=l*fe,q+=l*ae,le+=l*_e,K+=l*Ce,se+=l*ue,ee+=l*Oe,oe+=l*Me,N+=l*ke,P+=l*Be,T+=l*Ue,l=S[6],R+=l*Te,G+=l*De,W+=l*ye,z+=l*be,V+=l*we,B+=l*pe,q+=l*fe,le+=l*ae,K+=l*_e,se+=l*Ce,ee+=l*ue,oe+=l*Oe,N+=l*Me,P+=l*ke,T+=l*Be,f+=l*Ue,l=S[7],G+=l*Te,W+=l*De,z+=l*ye,V+=l*be,B+=l*we,q+=l*pe,le+=l*fe,K+=l*ae,se+=l*_e,ee+=l*Ce,oe+=l*ue,N+=l*Oe,P+=l*Me,T+=l*ke,f+=l*Be,O+=l*Ue,l=S[8],W+=l*Te,z+=l*De,V+=l*ye,B+=l*be,q+=l*we,le+=l*pe,K+=l*fe,se+=l*ae,ee+=l*_e,oe+=l*Ce,N+=l*ue,P+=l*Oe,T+=l*Me,f+=l*ke,O+=l*Be,Y+=l*Ue,l=S[9],z+=l*Te,V+=l*De,B+=l*ye,q+=l*be,le+=l*we,K+=l*pe,se+=l*fe,ee+=l*ae,oe+=l*_e,N+=l*Ce,P+=l*ue,T+=l*Oe,f+=l*Me,O+=l*ke,Y+=l*Be,Q+=l*Ue,l=S[10],V+=l*Te,B+=l*De,q+=l*ye,le+=l*be,K+=l*we,se+=l*pe,ee+=l*fe,oe+=l*ae,N+=l*_e,P+=l*Ce,T+=l*ue,f+=l*Oe,O+=l*Me,Y+=l*ke,Q+=l*Be,xe+=l*Ue,l=S[11],B+=l*Te,q+=l*De,le+=l*ye,K+=l*be,se+=l*we,ee+=l*pe,oe+=l*fe,N+=l*ae,P+=l*_e,T+=l*Ce,f+=l*ue,O+=l*Oe,Y+=l*Me,Q+=l*ke,xe+=l*Be,Se+=l*Ue,l=S[12],q+=l*Te,le+=l*De,K+=l*ye,se+=l*be,ee+=l*we,oe+=l*pe,N+=l*fe,P+=l*ae,T+=l*_e,f+=l*Ce,O+=l*ue,Y+=l*Oe,Q+=l*Me,xe+=l*ke,Se+=l*Be,ve+=l*Ue,l=S[13],le+=l*Te,K+=l*De,se+=l*ye,ee+=l*be,oe+=l*we,N+=l*pe,P+=l*fe,T+=l*ae,f+=l*_e,O+=l*Ce,Y+=l*ue,Q+=l*Oe,xe+=l*Me,Se+=l*ke,ve+=l*Be,Le+=l*Ue,l=S[14],K+=l*Te,se+=l*De,ee+=l*ye,oe+=l*be,N+=l*we,P+=l*pe,T+=l*fe,f+=l*ae,O+=l*_e,Y+=l*Ce,Q+=l*ue,xe+=l*Oe,Se+=l*Me,ve+=l*ke,Le+=l*Be,Qe+=l*Ue,l=S[15],se+=l*Te,ee+=l*De,oe+=l*ye,N+=l*be,P+=l*we,T+=l*pe,f+=l*fe,O+=l*ae,Y+=l*_e,Q+=l*Ce,xe+=l*ue,Se+=l*Oe,ve+=l*Me,Le+=l*ke,Qe+=l*Be,qe+=l*Ue,M+=38*ee,L+=38*oe,F+=38*N,U+=38*P,j+=38*T,D+=38*f,R+=38*O,G+=38*Y,W+=38*Q,z+=38*xe,V+=38*Se,B+=38*ve,q+=38*Le,le+=38*Qe,K+=38*qe,v=1,l=M+v+65535,v=Math.floor(l/65536),M=l-v*65536,l=L+v+65535,v=Math.floor(l/65536),L=l-v*65536,l=F+v+65535,v=Math.floor(l/65536),F=l-v*65536,l=U+v+65535,v=Math.floor(l/65536),U=l-v*65536,l=j+v+65535,v=Math.floor(l/65536),j=l-v*65536,l=D+v+65535,v=Math.floor(l/65536),D=l-v*65536,l=R+v+65535,v=Math.floor(l/65536),R=l-v*65536,l=G+v+65535,v=Math.floor(l/65536),G=l-v*65536,l=W+v+65535,v=Math.floor(l/65536),W=l-v*65536,l=z+v+65535,v=Math.floor(l/65536),z=l-v*65536,l=V+v+65535,v=Math.floor(l/65536),V=l-v*65536,l=B+v+65535,v=Math.floor(l/65536),B=l-v*65536,l=q+v+65535,v=Math.floor(l/65536),q=l-v*65536,l=le+v+65535,v=Math.floor(l/65536),le=l-v*65536,l=K+v+65535,v=Math.floor(l/65536),K=l-v*65536,l=se+v+65535,v=Math.floor(l/65536),se=l-v*65536,M+=v-1+37*(v-1),v=1,l=M+v+65535,v=Math.floor(l/65536),M=l-v*65536,l=L+v+65535,v=Math.floor(l/65536),L=l-v*65536,l=F+v+65535,v=Math.floor(l/65536),F=l-v*65536,l=U+v+65535,v=Math.floor(l/65536),U=l-v*65536,l=j+v+65535,v=Math.floor(l/65536),j=l-v*65536,l=D+v+65535,v=Math.floor(l/65536),D=l-v*65536,l=R+v+65535,v=Math.floor(l/65536),R=l-v*65536,l=G+v+65535,v=Math.floor(l/65536),G=l-v*65536,l=W+v+65535,v=Math.floor(l/65536),W=l-v*65536,l=z+v+65535,v=Math.floor(l/65536),z=l-v*65536,l=V+v+65535,v=Math.floor(l/65536),V=l-v*65536,l=B+v+65535,v=Math.floor(l/65536),B=l-v*65536,l=q+v+65535,v=Math.floor(l/65536),q=l-v*65536,l=le+v+65535,v=Math.floor(l/65536),le=l-v*65536,l=K+v+65535,v=Math.floor(l/65536),K=l-v*65536,l=se+v+65535,v=Math.floor(l/65536),se=l-v*65536,M+=v-1+37*(v-1),y[0]=M,y[1]=L,y[2]=F,y[3]=U,y[4]=j,y[5]=D,y[6]=R,y[7]=G,y[8]=W,y[9]=z,y[10]=V,y[11]=B,y[12]=q,y[13]=le,y[14]=K,y[15]=se}function m(y,S){p(y,S,S)}function b(y,S){const g=n();for(let l=0;l<16;l++)g[l]=S[l];for(let l=253;l>=0;l--)m(g,g),l!==2&&l!==4&&p(g,g,S);for(let l=0;l<16;l++)y[l]=g[l]}function _(y,S){const g=new Uint8Array(32),l=new Float64Array(80),v=n(),M=n(),L=n(),F=n(),U=n(),j=n();for(let W=0;W<31;W++)g[W]=y[W];g[31]=y[31]&127|64,g[0]&=248,u(l,S);for(let W=0;W<16;W++)M[W]=l[W];v[0]=F[0]=1;for(let W=254;W>=0;--W){const z=g[W>>>3]>>>(W&7)&1;a(v,M,z),a(L,F,z),h(U,v,L),d(v,v,L),h(L,M,F),d(M,M,F),m(F,U),m(j,v),p(v,L,v),p(L,M,U),h(U,v,L),d(v,v,L),m(M,v),d(L,F,j),p(v,L,o),h(v,v,F),p(L,L,v),p(v,F,j),p(F,M,l),m(M,U),a(v,M,z),a(L,F,z)}for(let W=0;W<16;W++)l[W+16]=v[W],l[W+32]=L[W],l[W+48]=M[W],l[W+64]=F[W];const D=l.subarray(32),R=l.subarray(16);b(D,D),p(R,R,D);const G=new Uint8Array(32);return c(G,R),G}e.scalarMult=_;function A(y){return _(y,i)}e.scalarMultBase=A;function I(y){if(y.length!==e.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${e.SECRET_KEY_LENGTH} bytes`);const S=new Uint8Array(y);return{publicKey:A(S),secretKey:S}}e.generateKeyPairFromSeed=I;function w(y){const S=(0,t.randomBytes)(32,y),g=I(S);return(0,r.wipe)(S),g}e.generateKeyPair=w;function E(y,S,g=!1){if(y.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(S.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const l=_(y,S);if(g){let v=0;for(let M=0;M<l.length;M++)v|=l[M];if(v===0)throw new Error("X25519: invalid shared key")}return l}e.sharedKey=E})(_a);var yh=globalThis&&globalThis.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},Av=function(){function e(t,r,n){this.name=t,this.version=r,this.os=n,this.type="browser"}return e}(),Dv=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),Ov=function(){function e(t,r,n,i){this.name=t,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return e}(),Iv=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),Tv=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),$v=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Rv=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,wh=3,Pv=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",$v]],bh=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Nv(e){return e?_h(e):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Tv:typeof navigator<"u"?_h(navigator.userAgent):Fv()}function Lv(e){return e!==""&&Pv.reduce(function(t,r){var n=r[0],i=r[1];if(t)return t;var o=i.exec(e);return!!o&&[n,o]},!1)}function _h(e){var t=Lv(e);if(!t)return null;var r=t[0],n=t[1];if(r==="searchbot")return new Iv;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<wh&&(i=yh(yh([],i,!0),Uv(wh-i.length),!0)):i=[];var o=i.join("."),s=Mv(e),a=Rv.exec(e);return a&&a[1]?new Ov(r,o,s,a[1]):new Av(r,o,s)}function Mv(e){for(var t=0,r=bh.length;t<r;t++){var n=bh[t],i=n[0],o=n[1],s=o.exec(e);if(s)return i}return null}function Fv(){var e=typeof process<"u"&&process.version;return e?new Dv(process.version.slice(1)):null}function Uv(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.getLocalStorage=Ke.getLocalStorageOrThrow=Ke.getCrypto=Ke.getCryptoOrThrow=xh=Ke.getLocation=Ke.getLocationOrThrow=Ea=Ke.getNavigator=Ke.getNavigatorOrThrow=Eh=Ke.getDocument=Ke.getDocumentOrThrow=Ke.getFromWindowOrThrow=Ke.getFromWindow=void 0;function En(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}Ke.getFromWindow=En;function Kn(e){const t=En(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Ke.getFromWindowOrThrow=Kn;function jv(){return Kn("document")}Ke.getDocumentOrThrow=jv;function kv(){return En("document")}var Eh=Ke.getDocument=kv;function Bv(){return Kn("navigator")}Ke.getNavigatorOrThrow=Bv;function zv(){return En("navigator")}var Ea=Ke.getNavigator=zv;function Wv(){return Kn("location")}Ke.getLocationOrThrow=Wv;function Hv(){return En("location")}var xh=Ke.getLocation=Hv;function Vv(){return Kn("crypto")}Ke.getCryptoOrThrow=Vv;function qv(){return En("crypto")}Ke.getCrypto=qv;function Kv(){return Kn("localStorage")}Ke.getLocalStorageOrThrow=Kv;function Gv(){return En("localStorage")}Ke.getLocalStorage=Gv;var xa={};Object.defineProperty(xa,"__esModule",{value:!0});var Sh=xa.getWindowMetadata=void 0;const Ch=Ke;function Yv(){let e,t;try{e=Ch.getDocumentOrThrow(),t=Ch.getLocationOrThrow()}catch{return null}function r(){const d=e.getElementsByTagName("link"),p=[];for(let m=0;m<d.length;m++){const b=d[m],_=b.getAttribute("rel");if(_&&_.toLowerCase().indexOf("icon")>-1){const A=b.getAttribute("href");if(A)if(A.toLowerCase().indexOf("https:")===-1&&A.toLowerCase().indexOf("http:")===-1&&A.indexOf("//")!==0){let I=t.protocol+"//"+t.host;if(A.indexOf("/")===0)I+=A;else{const w=t.pathname.split("/");w.pop();const E=w.join("/");I+=E+"/"+A}p.push(I)}else if(A.indexOf("//")===0){const I=t.protocol+A;p.push(I)}else p.push(A)}}return p}function n(...d){const p=e.getElementsByTagName("meta");for(let m=0;m<p.length;m++){const b=p[m],_=["itemprop","property","name"].map(A=>b.getAttribute(A)).filter(A=>A?d.includes(A):!1);if(_.length&&_){const A=b.getAttribute("content");if(A)return A}}return""}function i(){let d=n("name","og:site_name","og:title","twitter:title");return d||(d=e.title),d}function o(){return n("description","og:description","twitter:description","keywords")}const s=i(),a=o(),c=t.origin,u=r();return{description:a,url:c,icons:u,name:s}}Sh=xa.getWindowMetadata=Yv;var Ui={},Jv=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),Ah="%[a-f0-9]{2}",Dh=new RegExp("("+Ah+")|([^%]+?)","gi"),Oh=new RegExp("("+Ah+")+","gi");function Sa(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],Sa(r),Sa(n))}function Zv(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(Dh)||[],r=1;r<t.length;r++)e=Sa(t,r).join(""),t=e.match(Dh)||[];return e}}function Xv(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=Oh.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{var n=Zv(r[0]);n!==r[0]&&(t[r[0]]=n)}r=Oh.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),o=0;o<i.length;o++){var s=i[o];e=e.replace(new RegExp(s,"g"),t[s])}return e}var Qv=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return Xv(e)}},ey=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]},ty=function(e,t){for(var r={},n=Object.keys(e),i=Array.isArray(t),o=0;o<n.length;o++){var s=n[o],a=e[s];(i?t.indexOf(s)!==-1:t(s,a,e))&&(r[s]=a)}return r};(function(e){const t=Jv,r=Qv,n=ey,i=ty,o=w=>w==null,s=Symbol("encodeFragmentIdentifier");function a(w){switch(w.arrayFormat){case"index":return E=>(y,S)=>{const g=y.length;return S===void 0||w.skipNull&&S===null||w.skipEmptyString&&S===""?y:S===null?[...y,[h(E,w),"[",g,"]"].join("")]:[...y,[h(E,w),"[",h(g,w),"]=",h(S,w)].join("")]};case"bracket":return E=>(y,S)=>S===void 0||w.skipNull&&S===null||w.skipEmptyString&&S===""?y:S===null?[...y,[h(E,w),"[]"].join("")]:[...y,[h(E,w),"[]=",h(S,w)].join("")];case"colon-list-separator":return E=>(y,S)=>S===void 0||w.skipNull&&S===null||w.skipEmptyString&&S===""?y:S===null?[...y,[h(E,w),":list="].join("")]:[...y,[h(E,w),":list=",h(S,w)].join("")];case"comma":case"separator":case"bracket-separator":{const E=w.arrayFormat==="bracket-separator"?"[]=":"=";return y=>(S,g)=>g===void 0||w.skipNull&&g===null||w.skipEmptyString&&g===""?S:(g=g===null?"":g,S.length===0?[[h(y,w),E,h(g,w)].join("")]:[[S,h(g,w)].join(w.arrayFormatSeparator)])}default:return E=>(y,S)=>S===void 0||w.skipNull&&S===null||w.skipEmptyString&&S===""?y:S===null?[...y,h(E,w)]:[...y,[h(E,w),"=",h(S,w)].join("")]}}function c(w){let E;switch(w.arrayFormat){case"index":return(y,S,g)=>{if(E=/\[(\d*)\]$/.exec(y),y=y.replace(/\[\d*\]$/,""),!E){g[y]=S;return}g[y]===void 0&&(g[y]={}),g[y][E[1]]=S};case"bracket":return(y,S,g)=>{if(E=/(\[\])$/.exec(y),y=y.replace(/\[\]$/,""),!E){g[y]=S;return}if(g[y]===void 0){g[y]=[S];return}g[y]=[].concat(g[y],S)};case"colon-list-separator":return(y,S,g)=>{if(E=/(:list)$/.exec(y),y=y.replace(/:list$/,""),!E){g[y]=S;return}if(g[y]===void 0){g[y]=[S];return}g[y]=[].concat(g[y],S)};case"comma":case"separator":return(y,S,g)=>{const l=typeof S=="string"&&S.includes(w.arrayFormatSeparator),v=typeof S=="string"&&!l&&d(S,w).includes(w.arrayFormatSeparator);S=v?d(S,w):S;const M=l||v?S.split(w.arrayFormatSeparator).map(L=>d(L,w)):S===null?S:d(S,w);g[y]=M};case"bracket-separator":return(y,S,g)=>{const l=/(\[\])$/.test(y);if(y=y.replace(/\[\]$/,""),!l){g[y]=S&&d(S,w);return}const v=S===null?[]:S.split(w.arrayFormatSeparator).map(M=>d(M,w));if(g[y]===void 0){g[y]=v;return}g[y]=[].concat(g[y],v)};default:return(y,S,g)=>{if(g[y]===void 0){g[y]=S;return}g[y]=[].concat(g[y],S)}}}function u(w){if(typeof w!="string"||w.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function h(w,E){return E.encode?E.strict?t(w):encodeURIComponent(w):w}function d(w,E){return E.decode?r(w):w}function p(w){return Array.isArray(w)?w.sort():typeof w=="object"?p(Object.keys(w)).sort((E,y)=>Number(E)-Number(y)).map(E=>w[E]):w}function m(w){const E=w.indexOf("#");return E!==-1&&(w=w.slice(0,E)),w}function b(w){let E="";const y=w.indexOf("#");return y!==-1&&(E=w.slice(y)),E}function _(w){w=m(w);const E=w.indexOf("?");return E===-1?"":w.slice(E+1)}function A(w,E){return E.parseNumbers&&!Number.isNaN(Number(w))&&typeof w=="string"&&w.trim()!==""?w=Number(w):E.parseBooleans&&w!==null&&(w.toLowerCase()==="true"||w.toLowerCase()==="false")&&(w=w.toLowerCase()==="true"),w}function I(w,E){E=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},E),u(E.arrayFormatSeparator);const y=c(E),S=Object.create(null);if(typeof w!="string"||(w=w.trim().replace(/^[?#&]/,""),!w))return S;for(const g of w.split("&")){if(g==="")continue;let[l,v]=n(E.decode?g.replace(/\+/g," "):g,"=");v=v===void 0?null:["comma","separator","bracket-separator"].includes(E.arrayFormat)?v:d(v,E),y(d(l,E),v,S)}for(const g of Object.keys(S)){const l=S[g];if(typeof l=="object"&&l!==null)for(const v of Object.keys(l))l[v]=A(l[v],E);else S[g]=A(l,E)}return E.sort===!1?S:(E.sort===!0?Object.keys(S).sort():Object.keys(S).sort(E.sort)).reduce((g,l)=>{const v=S[l];return v&&typeof v=="object"&&!Array.isArray(v)?g[l]=p(v):g[l]=v,g},Object.create(null))}e.extract=_,e.parse=I,e.stringify=(w,E)=>{if(!w)return"";E=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},E),u(E.arrayFormatSeparator);const y=v=>E.skipNull&&o(w[v])||E.skipEmptyString&&w[v]==="",S=a(E),g={};for(const v of Object.keys(w))y(v)||(g[v]=w[v]);const l=Object.keys(g);return E.sort!==!1&&l.sort(E.sort),l.map(v=>{const M=w[v];return M===void 0?"":M===null?h(v,E):Array.isArray(M)?M.length===0&&E.arrayFormat==="bracket-separator"?h(v,E)+"[]":M.reduce(S(v),[]).join("&"):h(v,E)+"="+h(M,E)}).filter(v=>v.length>0).join("&")},e.parseUrl=(w,E)=>{E=Object.assign({decode:!0},E);const[y,S]=n(w,"#");return Object.assign({url:y.split("?")[0]||"",query:I(_(w),E)},E&&E.parseFragmentIdentifier&&S?{fragmentIdentifier:d(S,E)}:{})},e.stringifyUrl=(w,E)=>{E=Object.assign({encode:!0,strict:!0,[s]:!0},E);const y=m(w.url).split("?")[0]||"",S=e.extract(w.url),g=e.parse(S,{sort:!1}),l=Object.assign(g,w.query);let v=e.stringify(l,E);v&&(v=`?${v}`);let M=b(w.url);return w.fragmentIdentifier&&(M=`#${E[s]?h(w.fragmentIdentifier,E):w.fragmentIdentifier}`),`${y}${v}${M}`},e.pick=(w,E,y)=>{y=Object.assign({parseFragmentIdentifier:!0,[s]:!1},y);const{url:S,query:g,fragmentIdentifier:l}=e.parseUrl(w,y);return e.stringifyUrl({url:S,query:i(g,E),fragmentIdentifier:l},y)},e.exclude=(w,E,y)=>{const S=Array.isArray(E)?g=>!E.includes(g):(g,l)=>!E(g,l);return e.pick(w,S,y)}})(Ui);const ry={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function Ih(e,t){return e.includes(":")?[e]:t.chains||[]}const Th="base10",Ht="base16",Ca="base64pad",Aa="utf8",$h=0,xn=1,ny=0,Rh=1,Da=12,Oa=32;function iy(){const e=_a.generateKeyPair();return{privateKey:Wt(e.secretKey,Ht),publicKey:Wt(e.publicKey,Ht)}}function Ia(){const e=qn.randomBytes(Oa);return Wt(e,Ht)}function oy(e,t){const r=_a.sharedKey(Jt(e,Ht),Jt(t,Ht)),n=new Cv(ko.SHA256,r).expand(Oa);return Wt(n,Ht)}function sy(e){const t=ko.hash(Jt(e,Ht));return Wt(t,Ht)}function Gn(e){const t=ko.hash(Jt(e,Aa));return Wt(t,Ht)}function ay(e){return Jt(`${e}`,Th)}function ji(e){return Number(Wt(e,Th))}function cy(e){const t=ay(typeof e.type<"u"?e.type:$h);if(ji(t)===xn&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof e.senderPublicKey<"u"?Jt(e.senderPublicKey,Ht):void 0,n=typeof e.iv<"u"?Jt(e.iv,Ht):qn.randomBytes(Da),i=new ya.ChaCha20Poly1305(Jt(e.symKey,Ht)).seal(n,Jt(e.message,Aa));return uy({type:t,sealed:i,iv:n,senderPublicKey:r})}function ly(e){const t=new ya.ChaCha20Poly1305(Jt(e.symKey,Ht)),{sealed:r,iv:n}=Bo(e.encoded),i=t.open(n,r);if(i===null)throw new Error("Failed to decrypt");return Wt(i,Aa)}function uy(e){if(ji(e.type)===xn){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Wt(ma([e.type,e.senderPublicKey,e.iv,e.sealed]),Ca)}return Wt(ma([e.type,e.iv,e.sealed]),Ca)}function Bo(e){const t=Jt(e,Ca),r=t.slice(ny,Rh),n=Rh;if(ji(r)===xn){const a=n+Oa,c=a+Da,u=t.slice(n,a),h=t.slice(a,c),d=t.slice(c);return{type:r,sealed:d,iv:h,senderPublicKey:u}}const i=n+Da,o=t.slice(n,i),s=t.slice(i);return{type:r,sealed:s,iv:o}}function hy(e,t){const r=Bo(e);return Ph({type:ji(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Wt(r.senderPublicKey,Ht):void 0,receiverPublicKey:t==null?void 0:t.receiverPublicKey})}function Ph(e){const t=(e==null?void 0:e.type)||$h;if(t===xn){if(typeof(e==null?void 0:e.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(e==null?void 0:e.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e==null?void 0:e.senderPublicKey,receiverPublicKey:e==null?void 0:e.receiverPublicKey}}function Nh(e){return e.type===xn&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}var fy=Object.defineProperty,Lh=Object.getOwnPropertySymbols,dy=Object.prototype.hasOwnProperty,py=Object.prototype.propertyIsEnumerable,Mh=(e,t,r)=>t in e?fy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Fh=(e,t)=>{for(var r in t||(t={}))dy.call(t,r)&&Mh(e,r,t[r]);if(Lh)for(var r of Lh(t))py.call(t,r)&&Mh(e,r,t[r]);return e};const gy="ReactNative",Gr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},my="js";function Ta(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Uh(){return!Eh()&&!!Ea()&&navigator.product===gy}function $a(){return!Ta()&&!!Ea()}function Ra(){return Uh()?Gr.reactNative:Ta()?Gr.node:$a()?Gr.browser:Gr.unknown}function vy(e,t){let r=Ui.parse(e);return r=Fh(Fh({},r),t),e=Ui.stringify(r),e}function yy(){return Sh()||{name:"",description:"",url:"",icons:[""]}}function wy(){if(Ra()===Gr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const e=Nv();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function by(){var e;const t=Ra();return t===Gr.browser?[t,((e=xh())==null?void 0:e.host)||"unknown"].join(":"):t}function _y(e,t,r){const n=wy(),i=by();return[[e,t].join("-"),[my,r].join("-"),n,i].join("/")}function Ey({protocol:e,version:t,relayUrl:r,sdkVersion:n,auth:i,projectId:o,useOnCloseEvent:s}){const a=r.split("?"),c=_y(e,t,n),u={auth:i,ua:c,projectId:o,useOnCloseEvent:s||void 0},h=vy(a[1]||"",u);return a[0]+"?"+h}function Sn(e,t){return e.filter(r=>t.includes(r)).length===e.length}function jh(e){return Object.fromEntries(e.entries())}function kh(e){return new Map(Object.entries(e))}function Yn(e=re.FIVE_MINUTES,t){const r=re.toMiliseconds(e||re.FIVE_MINUTES);let n,i,o;return{resolve:s=>{o&&n&&(clearTimeout(o),n(s))},reject:s=>{o&&i&&(clearTimeout(o),i(s))},done:()=>new Promise((s,a)=>{o=setTimeout(()=>{a(new Error(t))},r),n=s,i=a})}}function zo(e,t,r){return new Promise(async(n,i)=>{const o=setTimeout(()=>i(new Error(r)),t);try{const s=await e;n(s)}catch(s){i(s)}clearTimeout(o)})}function Bh(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function xy(e){return Bh("topic",e)}function Sy(e){return Bh("id",e)}function zh(e){const[t,r]=e.split(":"),n={id:void 0,topic:void 0};if(t==="topic"&&typeof r=="string")n.topic=r;else if(t==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return n}function yr(e,t){return re.fromMiliseconds((t||Date.now())+re.toMiliseconds(e))}function Yr(e){return Date.now()>=re.toMiliseconds(e)}function mt(e,t){return`${e}${t?`:${t}`:""}`}async function Cy({id:e,topic:t,wcDeepLink:r}){try{if(!r)return;const n=typeof r=="string"?JSON.parse(r):r;let i=n==null?void 0:n.href;if(typeof i!="string")return;i.endsWith("/")&&(i=i.slice(0,-1));const o=`${i}/wc?requestId=${e}&sessionTopic=${t}`,s=Ra();s===Gr.browser?o.startsWith("https://")?window.open(o,"_blank","noreferrer noopener"):window.open(o,"_self","noreferrer noopener"):s===Gr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(n){console.error(n)}}const Ay="irn";function Pa(e){return(e==null?void 0:e.relay)||{protocol:Ay}}function Wo(e){const t=ry[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var Dy=Object.defineProperty,Wh=Object.getOwnPropertySymbols,Oy=Object.prototype.hasOwnProperty,Iy=Object.prototype.propertyIsEnumerable,Hh=(e,t,r)=>t in e?Dy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ty=(e,t)=>{for(var r in t||(t={}))Oy.call(t,r)&&Hh(e,r,t[r]);if(Wh)for(var r of Wh(t))Iy.call(t,r)&&Hh(e,r,t[r]);return e};function $y(e,t="-"){const r={},n="relay"+t;return Object.keys(e).forEach(i=>{if(i.startsWith(n)){const o=i.replace(n,""),s=e[i];r[o]=s}}),r}function Ry(e){const t=e.indexOf(":"),r=e.indexOf("?")!==-1?e.indexOf("?"):void 0,n=e.substring(0,t),i=e.substring(t+1,r).split("@"),o=typeof r<"u"?e.substring(r):"",s=Ui.parse(o);return{protocol:n,topic:Py(i[0]),version:parseInt(i[1],10),symKey:s.symKey,relay:$y(s)}}function Py(e){return e.startsWith("//")?e.substring(2):e}function Ny(e,t="-"){const r="relay",n={};return Object.keys(e).forEach(i=>{const o=r+t+i;e[i]&&(n[o]=e[i])}),n}function Ly(e){return`${e.protocol}:${e.topic}@${e.version}?`+Ui.stringify(Ty({symKey:e.symKey},Ny(e.relay)))}function Jn(e){const t=[];return e.forEach(r=>{const[n,i]=r.split(":");t.push(`${n}:${i}`)}),t}function My(e){const t=[];return Object.values(e).forEach(r=>{t.push(...Jn(r.accounts))}),t}function Fy(e,t){const r=[];return Object.values(e).forEach(n=>{Jn(n.accounts).includes(t)&&r.push(...n.methods)}),r}function Uy(e,t){const r=[];return Object.values(e).forEach(n=>{Jn(n.accounts).includes(t)&&r.push(...n.events)}),r}function jy(e,t){const r=Vo(e,t);if(r)throw new Error(r.message);const n={};for(const[i,o]of Object.entries(e))n[i]={methods:o.methods,events:o.events,chains:o.accounts.map(s=>`${s.split(":")[0]}:${s.split(":")[1]}`)};return n}const ky={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},By={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function X(e,t){const{message:r,code:n}=By[e];return{message:t?`${r} ${t}`:r,code:n}}function Et(e,t){const{message:r,code:n}=ky[e];return{message:t?`${r} ${t}`:r,code:n}}function ki(e,t){return Array.isArray(e)?typeof t<"u"&&e.length?e.every(t):!0:!1}function Bi(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Vt(e){return typeof e>"u"}function At(e,t){return t&&Vt(e)?!0:typeof e=="string"&&!!e.trim().length}function Na(e,t){return t&&Vt(e)?!0:typeof e=="number"&&!isNaN(e)}function zy(e,t){const{requiredNamespaces:r}=t,n=Object.keys(e.namespaces),i=Object.keys(r);let o=!0;return Sn(i,n)?(n.forEach(s=>{const{accounts:a,methods:c,events:u}=e.namespaces[s],h=Jn(a),d=r[s];(!Sn(Ih(s,d),h)||!Sn(d.methods,c)||!Sn(d.events,u))&&(o=!1)}),o):!1}function Ho(e){return At(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function Wy(e){if(At(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const r=t[0]+":"+t[1];return!!t[2]&&Ho(r)}}return!1}function Hy(e){if(At(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function Vy(e){var t;return(t=e==null?void 0:e.proposer)==null?void 0:t.publicKey}function qy(e){return e==null?void 0:e.topic}function Ky(e,t){let r=null;return At(e==null?void 0:e.publicKey,!1)||(r=X("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function Vh(e){let t=!0;return ki(e)?e.length&&(t=e.every(r=>At(r,!1))):t=!1,t}function Gy(e,t,r){let n=null;return ki(t)&&t.length?t.forEach(i=>{n||Ho(i)||(n=Et("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Ho(e)||(n=Et("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function Yy(e,t,r){let n=null;return Object.entries(e).forEach(([i,o])=>{if(n)return;const s=Gy(i,Ih(i,o),`${t} ${r}`);s&&(n=s)}),n}function Jy(e,t){let r=null;return ki(e)?e.forEach(n=>{r||Wy(n)||(r=Et("UNSUPPORTED_ACCOUNTS",`${t}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=Et("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Zy(e,t){let r=null;return Object.values(e).forEach(n=>{if(r)return;const i=Jy(n==null?void 0:n.accounts,`${t} namespace`);i&&(r=i)}),r}function Xy(e,t){let r=null;return Vh(e==null?void 0:e.methods)?Vh(e==null?void 0:e.events)||(r=Et("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Et("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function qh(e,t){let r=null;return Object.values(e).forEach(n=>{if(r)return;const i=Xy(n,`${t}, namespace`);i&&(r=i)}),r}function Qy(e,t,r){let n=null;if(e&&Bi(e)){const i=qh(e,t);i&&(n=i);const o=Yy(e,t,r);o&&(n=o)}else n=X("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return n}function Vo(e,t){let r=null;if(e&&Bi(e)){const n=qh(e,t);n&&(r=n);const i=Zy(e,t);i&&(r=i)}else r=X("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function Kh(e){return At(e.protocol,!0)}function ew(e,t){let r=!1;return t&&!e?r=!0:e&&ki(e)&&e.length&&e.forEach(n=>{r=Kh(n)}),r}function tw(e){return typeof e=="number"}function Zt(e){return typeof e<"u"&&typeof e!==null}function rw(e){return!(!e||typeof e!="object"||!e.code||!Na(e.code,!1)||!e.message||!At(e.message,!1))}function nw(e){return!(Vt(e)||!At(e.method,!1))}function iw(e){return!(Vt(e)||Vt(e.result)&&Vt(e.error)||!Na(e.id,!1)||!At(e.jsonrpc,!1))}function ow(e){return!(Vt(e)||!At(e.name,!1))}function Gh(e,t){return!(!Ho(t)||!My(e).includes(t))}function sw(e,t,r){return At(r,!1)?Fy(e,t).includes(r):!1}function aw(e,t,r){return At(r,!1)?Uy(e,t).includes(r):!1}function Yh(e,t,r){let n=null;const i=cw(e),o=lw(t),s=Object.keys(i),a=Object.keys(o),c=Jh(Object.keys(e)),u=Jh(Object.keys(t)),h=c.filter(d=>!u.includes(d));return h.length&&(n=X("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${h.toString()}
      Received: ${Object.keys(t).toString()}`)),Sn(s,a)||(n=X("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${s.toString()}
      Approved: ${a.toString()}`)),Object.keys(t).forEach(d=>{if(!d.includes(":")||n)return;const p=Jn(t[d].accounts);p.includes(d)||(n=X("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${p.toString()}`))}),s.forEach(d=>{n||(Sn(i[d].methods,o[d].methods)?Sn(i[d].events,o[d].events)||(n=X("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${d}`)):n=X("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${d}`))}),n}function cw(e){const t={};return Object.keys(e).forEach(r=>{var n;r.includes(":")?t[r]=e[r]:(n=e[r].chains)==null||n.forEach(i=>{t[i]={methods:e[r].methods,events:e[r].events}})}),t}function Jh(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function lw(e){const t={};return Object.keys(e).forEach(r=>{if(r.includes(":"))t[r]=e[r];else{const n=Jn(e[r].accounts);n==null||n.forEach(i=>{t[i]={accounts:e[r].accounts.filter(o=>o.includes(`${i}:`)),methods:e[r].methods,events:e[r].events}})}}),t}function uw(e,t){return Na(e,!1)&&e<=t.max&&e>=t.min}const hw="PARSE_ERROR",fw="INVALID_REQUEST",dw="METHOD_NOT_FOUND",pw="INVALID_PARAMS",Zh="INTERNAL_ERROR",La="SERVER_ERROR",gw=[-32700,-32600,-32601,-32602,-32603],zi={[hw]:{code:-32700,message:"Parse error"},[fw]:{code:-32600,message:"Invalid Request"},[dw]:{code:-32601,message:"Method not found"},[pw]:{code:-32602,message:"Invalid params"},[Zh]:{code:-32603,message:"Internal error"},[La]:{code:-32e3,message:"Server error"}},Xh=La;function mw(e){return gw.includes(e)}function Qh(e){return Object.keys(zi).includes(e)?zi[e]:zi[Xh]}function vw(e){const t=Object.values(zi).find(r=>r.code===e);return t||zi[Xh]}function yw(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${t}`):e}var ef={},Nr={},tf;function ww(){if(tf)return Nr;tf=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.isBrowserCryptoAvailable=Nr.getSubtleCrypto=Nr.getBrowerCrypto=void 0;function e(){return(er==null?void 0:er.crypto)||(er==null?void 0:er.msCrypto)||{}}Nr.getBrowerCrypto=e;function t(){const n=e();return n.subtle||n.webkitSubtle}Nr.getSubtleCrypto=t;function r(){return!!e()&&!!t()}return Nr.isBrowserCryptoAvailable=r,Nr}var Lr={},rf;function bw(){if(rf)return Lr;rf=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.isBrowser=Lr.isNode=Lr.isReactNative=void 0;function e(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Lr.isReactNative=e;function t(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Lr.isNode=t;function r(){return!e()&&!t()}return Lr.isBrowser=r,Lr}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=cr;t.__exportStar(ww(),e),t.__exportStar(bw(),e)})(ef);function nf(e=3){const t=Date.now()*Math.pow(10,e),r=Math.floor(Math.random()*Math.pow(10,e));return t+r}function Ma(e=6){return BigInt(nf(e))}function qo(e,t,r){return{id:r||nf(),jsonrpc:"2.0",method:e,params:t}}function Fa(e,t){return{id:e,jsonrpc:"2.0",result:t}}function Ua(e,t,r){return{id:e,jsonrpc:"2.0",error:_w(t,r)}}function _w(e,t){return typeof e>"u"?Qh(Zh):(typeof e=="string"&&(e=Object.assign(Object.assign({},Qh(La)),{message:e})),typeof t<"u"&&(e.data=t),mw(e.code)&&(e=vw(e.code)),e)}class Ew{}class xw extends Ew{constructor(){super()}}class Sw extends xw{constructor(t){super()}}const Cw="^wss?:";function Aw(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function Dw(e,t){const r=Aw(e);return typeof r>"u"?!1:new RegExp(t).test(r)}function of(e){return Dw(e,Cw)}function Ow(e){return new RegExp("wss?://localhost(:d{2,5})?").test(e)}function sf(e){return typeof e=="object"&&"id"in e&&"jsonrpc"in e&&e.jsonrpc==="2.0"}function ja(e){return sf(e)&&"method"in e}function Ko(e){return sf(e)&&(Mr(e)||wr(e))}function Mr(e){return"result"in e}function wr(e){return"error"in e}class Iw extends Sw{constructor(t){super(t),this.events=new vr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async request(t,r){return this.requestStrict(qo(t.method,t.params||[],t.id||Ma().toString()),r)}async requestStrict(t,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(o){i(o)}this.events.on(`${t.id}`,o=>{wr(o)?i(o.error):n(o.result)});try{await this.connection.send(t,r)}catch(o){i(o)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),Ko(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t=="string"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Tw=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),$w=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",af=e=>e.split("?")[0],cf=10,Rw=Tw();class Pw{constructor(t){if(this.url=t,this.events=new vr.EventEmitter,this.registering=!1,!of(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),t()},this.socket.close()})}async send(t,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(la(t))}catch(n){this.onError(t.id,n)}}register(t=this.url){if(!of(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),i(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=t,this.registering=!0,new Promise((r,n)=>{const i=ef.isReactNative()?void 0:{rejectUnauthorized:!Ow(t)},o=new Rw(t,[],i);$w()?o.onerror=s=>{const a=s;n(this.emitError(a.error))}:o.on("error",s=>{n(this.emitError(s))}),o.onopen=()=>{this.onOpen(o),r(o)}})}onOpen(t){t.onmessage=r=>this.onPayload(r),t.onclose=r=>this.onClose(r),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?Hu(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const n=this.parseError(r),i=n.message||n.toString(),o=Ua(t,i);this.events.emit("payload",o)}parseError(t,r=this.url){return yw(t,af(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>cf&&this.events.setMaxListeners(cf)}emitError(t){const r=this.parseError(new Error((t==null?void 0:t.message)||`WebSocket connection failed for host: ${af(this.url)}`));return this.events.emit("register_error",r),r}}var Go={exports:{}};Go.exports,function(e,t){var r=200,n="__lodash_hash_undefined__",i=1,o=2,s=9007199254740991,a="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",h="[object Boolean]",d="[object Date]",p="[object Error]",m="[object Function]",b="[object GeneratorFunction]",_="[object Map]",A="[object Number]",I="[object Null]",w="[object Object]",E="[object Promise]",y="[object Proxy]",S="[object RegExp]",g="[object Set]",l="[object String]",v="[object Symbol]",M="[object Undefined]",L="[object WeakMap]",F="[object ArrayBuffer]",U="[object DataView]",j="[object Float32Array]",D="[object Float64Array]",R="[object Int8Array]",G="[object Int16Array]",W="[object Int32Array]",z="[object Uint8Array]",V="[object Uint8ClampedArray]",B="[object Uint16Array]",q="[object Uint32Array]",le=/[\\^$.*+?()[\]{}|]/g,K=/^\[object .+?Constructor\]$/,se=/^(?:0|[1-9]\d*)$/,ee={};ee[j]=ee[D]=ee[R]=ee[G]=ee[W]=ee[z]=ee[V]=ee[B]=ee[q]=!0,ee[a]=ee[c]=ee[F]=ee[h]=ee[U]=ee[d]=ee[p]=ee[m]=ee[_]=ee[A]=ee[w]=ee[S]=ee[g]=ee[l]=ee[L]=!1;var oe=typeof er=="object"&&er&&er.Object===Object&&er,N=typeof self=="object"&&self&&self.Object===Object&&self,P=oe||N||Function("return this")(),T=t&&!t.nodeType&&t,f=T&&!0&&e&&!e.nodeType&&e,O=f&&f.exports===T,Y=O&&oe.process,Q=function(){try{return Y&&Y.binding&&Y.binding("util")}catch{}}(),xe=Q&&Q.isTypedArray;function Se(x,$){for(var H=-1,te=x==null?0:x.length,Ze=0,me=[];++H<te;){var ht=x[H];$(ht,H,x)&&(me[Ze++]=ht)}return me}function ve(x,$){for(var H=-1,te=$.length,Ze=x.length;++H<te;)x[Ze+H]=$[H];return x}function Le(x,$){for(var H=-1,te=x==null?0:x.length;++H<te;)if($(x[H],H,x))return!0;return!1}function Qe(x,$){for(var H=-1,te=Array(x);++H<x;)te[H]=$(H);return te}function qe(x){return function($){return x($)}}function Te(x,$){return x.has($)}function De(x,$){return x==null?void 0:x[$]}function ye(x){var $=-1,H=Array(x.size);return x.forEach(function(te,Ze){H[++$]=[Ze,te]}),H}function be(x,$){return function(H){return x($(H))}}function we(x){var $=-1,H=Array(x.size);return x.forEach(function(te){H[++$]=te}),H}var pe=Array.prototype,fe=Function.prototype,ae=Object.prototype,_e=P["__core-js_shared__"],Ce=fe.toString,ue=ae.hasOwnProperty,Oe=function(){var x=/[^.]+$/.exec(_e&&_e.keys&&_e.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),Me=ae.toString,ke=RegExp("^"+Ce.call(ue).replace(le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=O?P.Buffer:void 0,Ue=P.Symbol,sr=P.Uint8Array,dr=ae.propertyIsEnumerable,Rr=pe.splice,Pt=Ue?Ue.toStringTag:void 0,Pr=Object.getOwnPropertySymbols,pr=Be?Be.isBuffer:void 0,cn=be(Object.keys,Object),et=xi(P,"DataView"),Ye=xi(P,"Map"),at=xi(P,"Promise"),rt=xi(P,"Set"),ct=xi(P,"WeakMap"),Je=xi(Object,"create"),dt=jn(et),yt=jn(Ye),wt=jn(at),pt=jn(rt),bt=jn(ct),gt=Ue?Ue.prototype:void 0,lt=gt?gt.valueOf:void 0;function Ge(x){var $=-1,H=x==null?0:x.length;for(this.clear();++$<H;){var te=x[$];this.set(te[0],te[1])}}function C(){this.__data__=Je?Je(null):{},this.size=0}function k(x){var $=this.has(x)&&delete this.__data__[x];return this.size-=$?1:0,$}function Z(x){var $=this.__data__;if(Je){var H=$[x];return H===n?void 0:H}return ue.call($,x)?$[x]:void 0}function ce(x){var $=this.__data__;return Je?$[x]!==void 0:ue.call($,x)}function je(x,$){var H=this.__data__;return this.size+=this.has(x)?0:1,H[x]=Je&&$===void 0?n:$,this}Ge.prototype.clear=C,Ge.prototype.delete=k,Ge.prototype.get=Z,Ge.prototype.has=ce,Ge.prototype.set=je;function Ie(x){var $=-1,H=x==null?0:x.length;for(this.clear();++$<H;){var te=x[$];this.set(te[0],te[1])}}function $e(){this.__data__=[],this.size=0}function Ae(x){var $=this.__data__,H=Fs($,x);if(H<0)return!1;var te=$.length-1;return H==te?$.pop():Rr.call($,H,1),--this.size,!0}function Nt(x){var $=this.__data__,H=Fs($,x);return H<0?void 0:$[H][1]}function nt(x){return Fs(this.__data__,x)>-1}function ut(x,$){var H=this.__data__,te=Fs(H,x);return te<0?(++this.size,H.push([x,$])):H[te][1]=$,this}Ie.prototype.clear=$e,Ie.prototype.delete=Ae,Ie.prototype.get=Nt,Ie.prototype.has=nt,Ie.prototype.set=ut;function _t(x){var $=-1,H=x==null?0:x.length;for(this.clear();++$<H;){var te=x[$];this.set(te[0],te[1])}}function ln(){this.size=0,this.__data__={hash:new Ge,map:new(Ye||Ie),string:new Ge}}function Ls(x){var $=Us(this,x).delete(x);return this.size-=$?1:0,$}function br(x){return Us(this,x).get(x)}function uS(x){return Us(this,x).has(x)}function hS(x,$){var H=Us(this,x),te=H.size;return H.set(x,$),this.size+=H.size==te?0:1,this}_t.prototype.clear=ln,_t.prototype.delete=Ls,_t.prototype.get=br,_t.prototype.has=uS,_t.prototype.set=hS;function Ms(x){var $=-1,H=x==null?0:x.length;for(this.__data__=new _t;++$<H;)this.add(x[$])}function fS(x){return this.__data__.set(x,n),this}function dS(x){return this.__data__.has(x)}Ms.prototype.add=Ms.prototype.push=fS,Ms.prototype.has=dS;function un(x){var $=this.__data__=new Ie(x);this.size=$.size}function pS(){this.__data__=new Ie,this.size=0}function gS(x){var $=this.__data__,H=$.delete(x);return this.size=$.size,H}function mS(x){return this.__data__.get(x)}function vS(x){return this.__data__.has(x)}function yS(x,$){var H=this.__data__;if(H instanceof Ie){var te=H.__data__;if(!Ye||te.length<r-1)return te.push([x,$]),this.size=++H.size,this;H=this.__data__=new _t(te)}return H.set(x,$),this.size=H.size,this}un.prototype.clear=pS,un.prototype.delete=gS,un.prototype.get=mS,un.prototype.has=vS,un.prototype.set=yS;function wS(x,$){var H=js(x),te=!H&&NS(x),Ze=!H&&!te&&Vl(x),me=!H&&!te&&!Ze&&Kp(x),ht=H||te||Ze||me,Ot=ht?Qe(x.length,String):[],Lt=Ot.length;for(var it in x)($||ue.call(x,it))&&!(ht&&(it=="length"||Ze&&(it=="offset"||it=="parent")||me&&(it=="buffer"||it=="byteLength"||it=="byteOffset")||IS(it,Lt)))&&Ot.push(it);return Ot}function Fs(x,$){for(var H=x.length;H--;)if(Wp(x[H][0],$))return H;return-1}function bS(x,$,H){var te=$(x);return js(x)?te:ve(te,H(x))}function xo(x){return x==null?x===void 0?M:I:Pt&&Pt in Object(x)?DS(x):PS(x)}function jp(x){return So(x)&&xo(x)==a}function kp(x,$,H,te,Ze){return x===$?!0:x==null||$==null||!So(x)&&!So($)?x!==x&&$!==$:_S(x,$,H,te,kp,Ze)}function _S(x,$,H,te,Ze,me){var ht=js(x),Ot=js($),Lt=ht?c:hn(x),it=Ot?c:hn($);Lt=Lt==a?w:Lt,it=it==a?w:it;var ar=Lt==w,_r=it==w,Bt=Lt==it;if(Bt&&Vl(x)){if(!Vl($))return!1;ht=!0,ar=!1}if(Bt&&!ar)return me||(me=new un),ht||Kp(x)?Bp(x,$,H,te,Ze,me):CS(x,$,Lt,H,te,Ze,me);if(!(H&i)){var gr=ar&&ue.call(x,"__wrapped__"),mr=_r&&ue.call($,"__wrapped__");if(gr||mr){var fn=gr?x.value():x,zr=mr?$.value():$;return me||(me=new un),Ze(fn,zr,H,te,me)}}return Bt?(me||(me=new un),AS(x,$,H,te,Ze,me)):!1}function ES(x){if(!qp(x)||$S(x))return!1;var $=Hp(x)?ke:K;return $.test(jn(x))}function xS(x){return So(x)&&Vp(x.length)&&!!ee[xo(x)]}function SS(x){if(!RS(x))return cn(x);var $=[];for(var H in Object(x))ue.call(x,H)&&H!="constructor"&&$.push(H);return $}function Bp(x,$,H,te,Ze,me){var ht=H&i,Ot=x.length,Lt=$.length;if(Ot!=Lt&&!(ht&&Lt>Ot))return!1;var it=me.get(x);if(it&&me.get($))return it==$;var ar=-1,_r=!0,Bt=H&o?new Ms:void 0;for(me.set(x,$),me.set($,x);++ar<Ot;){var gr=x[ar],mr=$[ar];if(te)var fn=ht?te(mr,gr,ar,$,x,me):te(gr,mr,ar,x,$,me);if(fn!==void 0){if(fn)continue;_r=!1;break}if(Bt){if(!Le($,function(zr,kn){if(!Te(Bt,kn)&&(gr===zr||Ze(gr,zr,H,te,me)))return Bt.push(kn)})){_r=!1;break}}else if(!(gr===mr||Ze(gr,mr,H,te,me))){_r=!1;break}}return me.delete(x),me.delete($),_r}function CS(x,$,H,te,Ze,me,ht){switch(H){case U:if(x.byteLength!=$.byteLength||x.byteOffset!=$.byteOffset)return!1;x=x.buffer,$=$.buffer;case F:return!(x.byteLength!=$.byteLength||!me(new sr(x),new sr($)));case h:case d:case A:return Wp(+x,+$);case p:return x.name==$.name&&x.message==$.message;case S:case l:return x==$+"";case _:var Ot=ye;case g:var Lt=te&i;if(Ot||(Ot=we),x.size!=$.size&&!Lt)return!1;var it=ht.get(x);if(it)return it==$;te|=o,ht.set(x,$);var ar=Bp(Ot(x),Ot($),te,Ze,me,ht);return ht.delete(x),ar;case v:if(lt)return lt.call(x)==lt.call($)}return!1}function AS(x,$,H,te,Ze,me){var ht=H&i,Ot=zp(x),Lt=Ot.length,it=zp($),ar=it.length;if(Lt!=ar&&!ht)return!1;for(var _r=Lt;_r--;){var Bt=Ot[_r];if(!(ht?Bt in $:ue.call($,Bt)))return!1}var gr=me.get(x);if(gr&&me.get($))return gr==$;var mr=!0;me.set(x,$),me.set($,x);for(var fn=ht;++_r<Lt;){Bt=Ot[_r];var zr=x[Bt],kn=$[Bt];if(te)var Gp=ht?te(kn,zr,Bt,$,x,me):te(zr,kn,Bt,x,$,me);if(!(Gp===void 0?zr===kn||Ze(zr,kn,H,te,me):Gp)){mr=!1;break}fn||(fn=Bt=="constructor")}if(mr&&!fn){var ks=x.constructor,Bs=$.constructor;ks!=Bs&&"constructor"in x&&"constructor"in $&&!(typeof ks=="function"&&ks instanceof ks&&typeof Bs=="function"&&Bs instanceof Bs)&&(mr=!1)}return me.delete(x),me.delete($),mr}function zp(x){return bS(x,FS,OS)}function Us(x,$){var H=x.__data__;return TS($)?H[typeof $=="string"?"string":"hash"]:H.map}function xi(x,$){var H=De(x,$);return ES(H)?H:void 0}function DS(x){var $=ue.call(x,Pt),H=x[Pt];try{x[Pt]=void 0;var te=!0}catch{}var Ze=Me.call(x);return te&&($?x[Pt]=H:delete x[Pt]),Ze}var OS=Pr?function(x){return x==null?[]:(x=Object(x),Se(Pr(x),function($){return dr.call(x,$)}))}:US,hn=xo;(et&&hn(new et(new ArrayBuffer(1)))!=U||Ye&&hn(new Ye)!=_||at&&hn(at.resolve())!=E||rt&&hn(new rt)!=g||ct&&hn(new ct)!=L)&&(hn=function(x){var $=xo(x),H=$==w?x.constructor:void 0,te=H?jn(H):"";if(te)switch(te){case dt:return U;case yt:return _;case wt:return E;case pt:return g;case bt:return L}return $});function IS(x,$){return $=$??s,!!$&&(typeof x=="number"||se.test(x))&&x>-1&&x%1==0&&x<$}function TS(x){var $=typeof x;return $=="string"||$=="number"||$=="symbol"||$=="boolean"?x!=="__proto__":x===null}function $S(x){return!!Oe&&Oe in x}function RS(x){var $=x&&x.constructor,H=typeof $=="function"&&$.prototype||ae;return x===H}function PS(x){return Me.call(x)}function jn(x){if(x!=null){try{return Ce.call(x)}catch{}try{return x+""}catch{}}return""}function Wp(x,$){return x===$||x!==x&&$!==$}var NS=jp(function(){return arguments}())?jp:function(x){return So(x)&&ue.call(x,"callee")&&!dr.call(x,"callee")},js=Array.isArray;function LS(x){return x!=null&&Vp(x.length)&&!Hp(x)}var Vl=pr||jS;function MS(x,$){return kp(x,$)}function Hp(x){if(!qp(x))return!1;var $=xo(x);return $==m||$==b||$==u||$==y}function Vp(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=s}function qp(x){var $=typeof x;return x!=null&&($=="object"||$=="function")}function So(x){return x!=null&&typeof x=="object"}var Kp=xe?qe(xe):xS;function FS(x){return LS(x)?wS(x):SS(x)}function US(){return[]}function jS(){return!1}e.exports=MS}(Go,Go.exports);var Nw=Go.exports;const Lw=Co(Nw);function Mw(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function d(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var _=0,A=0,I=0,w=b.length;I!==w&&b[I]===0;)I++,_++;for(var E=(w-I)*h+1>>>0,y=new Uint8Array(E);I!==w;){for(var S=b[I],g=0,l=E-1;(S!==0||g<A)&&l!==-1;l--,g++)S+=256*y[l]>>>0,y[l]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");A=g,I++}for(var v=E-A;v!==E&&y[v]===0;)v++;for(var M=c.repeat(_);v<E;++v)M+=e.charAt(y[v]);return M}function p(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var _=0;if(b[_]!==" "){for(var A=0,I=0;b[_]===c;)A++,_++;for(var w=(b.length-_)*u+1>>>0,E=new Uint8Array(w);b[_];){var y=r[b.charCodeAt(_)];if(y===255)return;for(var S=0,g=w-1;(y!==0||S<I)&&g!==-1;g--,S++)y+=a*E[g]>>>0,E[g]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");I=S,_++}if(b[_]!==" "){for(var l=w-I;l!==w&&E[l]===0;)l++;for(var v=new Uint8Array(A+(w-l)),M=A;l!==w;)v[M++]=E[l++];return v}}}function m(b){var _=p(b);if(_)return _;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:p,decode:m}}var Fw=Mw,Uw=Fw;const lf=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},jw=e=>new TextEncoder().encode(e),kw=e=>new TextDecoder().decode(e);class Bw{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class zw{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return uf(this,t)}}class Ww{constructor(t){this.decoders=t}or(t){return uf(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const uf=(e,t)=>new Ww({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Hw{constructor(t,r,n,i){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Bw(t,r,n),this.decoder=new zw(t,r,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Yo=({name:e,prefix:t,encode:r,decode:n})=>new Hw(e,t,r,n),Wi=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=Uw(r,t);return Yo({prefix:e,name:t,encode:n,decode:o=>lf(i(o))})},Vw=(e,t,r,n)=>{const i={};for(let h=0;h<t.length;++h)i[t[h]]=h;let o=e.length;for(;e[o-1]==="=";)--o;const s=new Uint8Array(o*r/8|0);let a=0,c=0,u=0;for(let h=0;h<o;++h){const d=i[e[h]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s},qw=(e,t,r)=>{const n=t[t.length-1]==="=",i=(1<<r)-1;let o="",s=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],s+=8;s>r;)s-=r,o+=t[i&a>>s];if(s&&(o+=t[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o},Tt=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Yo({prefix:t,name:e,encode(i){return qw(i,n,r)},decode(i){return Vw(i,n,r,e)}}),Kw=Yo({prefix:"\0",name:"identity",encode:e=>kw(e),decode:e=>jw(e)});var Gw=Object.freeze({__proto__:null,identity:Kw});const Yw=Tt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Jw=Object.freeze({__proto__:null,base2:Yw});const Zw=Tt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Xw=Object.freeze({__proto__:null,base8:Zw});const Qw=Wi({prefix:"9",name:"base10",alphabet:"0123456789"});var eb=Object.freeze({__proto__:null,base10:Qw});const tb=Tt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),rb=Tt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var nb=Object.freeze({__proto__:null,base16:tb,base16upper:rb});const ib=Tt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ob=Tt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),sb=Tt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ab=Tt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),cb=Tt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),lb=Tt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ub=Tt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hb=Tt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),fb=Tt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var db=Object.freeze({__proto__:null,base32:ib,base32upper:ob,base32pad:sb,base32padupper:ab,base32hex:cb,base32hexupper:lb,base32hexpad:ub,base32hexpadupper:hb,base32z:fb});const pb=Wi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),gb=Wi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var mb=Object.freeze({__proto__:null,base36:pb,base36upper:gb});const vb=Wi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),yb=Wi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var wb=Object.freeze({__proto__:null,base58btc:vb,base58flickr:yb});const bb=Tt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),_b=Tt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Eb=Tt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),xb=Tt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Sb=Object.freeze({__proto__:null,base64:bb,base64pad:_b,base64url:Eb,base64urlpad:xb});const hf=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Cb=hf.reduce((e,t,r)=>(e[r]=t,e),[]),Ab=hf.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function Db(e){return e.reduce((t,r)=>(t+=Cb[r],t),"")}function Ob(e){const t=[];for(const r of e){const n=Ab[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}const Ib=Yo({prefix:"🚀",name:"base256emoji",encode:Db,decode:Ob});var Tb=Object.freeze({__proto__:null,base256emoji:Ib}),$b=df,ff=128,Rb=127,Pb=~Rb,Nb=Math.pow(2,31);function df(e,t,r){t=t||[],r=r||0;for(var n=r;e>=Nb;)t[r++]=e&255|ff,e/=128;for(;e&Pb;)t[r++]=e&255|ff,e>>>=7;return t[r]=e|0,df.bytes=r-n+1,t}var Lb=ka,Mb=128,pf=127;function ka(e,n){var r=0,n=n||0,i=0,o=n,s,a=e.length;do{if(o>=a)throw ka.bytes=0,new RangeError("Could not decode varint");s=e[o++],r+=i<28?(s&pf)<<i:(s&pf)*Math.pow(2,i),i+=7}while(s>=Mb);return ka.bytes=o-n,r}var Fb=Math.pow(2,7),Ub=Math.pow(2,14),jb=Math.pow(2,21),kb=Math.pow(2,28),Bb=Math.pow(2,35),zb=Math.pow(2,42),Wb=Math.pow(2,49),Hb=Math.pow(2,56),Vb=Math.pow(2,63),qb=function(e){return e<Fb?1:e<Ub?2:e<jb?3:e<kb?4:e<Bb?5:e<zb?6:e<Wb?7:e<Hb?8:e<Vb?9:10},Kb={encode:$b,decode:Lb,encodingLength:qb},gf=Kb;const mf=(e,t,r=0)=>(gf.encode(e,t,r),t),vf=e=>gf.encodingLength(e),Ba=(e,t)=>{const r=t.byteLength,n=vf(e),i=n+vf(r),o=new Uint8Array(i+r);return mf(e,o,0),mf(r,o,n),o.set(t,i),new Gb(e,r,t,o)};class Gb{constructor(t,r,n,i){this.code=t,this.size=r,this.digest=n,this.bytes=i}}const yf=({name:e,code:t,encode:r})=>new Yb(e,t,r);class Yb{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?Ba(this.code,r):r.then(n=>Ba(this.code,n))}else throw Error("Unknown type, must be binary type")}}const wf=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Jb=yf({name:"sha2-256",code:18,encode:wf("SHA-256")}),Zb=yf({name:"sha2-512",code:19,encode:wf("SHA-512")});var Xb=Object.freeze({__proto__:null,sha256:Jb,sha512:Zb});const bf=0,Qb="identity",_f=lf;var e2=Object.freeze({__proto__:null,identity:{code:bf,name:Qb,encode:_f,digest:e=>Ba(bf,_f(e))}});new TextEncoder,new TextDecoder;const Ef={...Gw,...Jw,...Xw,...eb,...nb,...db,...mb,...wb,...Sb,...Tb};({...Xb,...e2});function xf(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function t2(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?xf(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Sf(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const Cf=Sf("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),za=Sf("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=t2(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),r2={utf8:Cf,"utf-8":Cf,hex:Ef.base16,latin1:za,ascii:za,binary:za,...Ef};function n2(e,t="utf8"){const r=r2[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?xf(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}const Af="wc",i2=2,Wa="core",Jr=`${Af}@2:${Wa}:`,o2={name:Wa,logger:"error"},s2={database:":memory:"},a2="crypto",Df="client_ed25519_seed",c2=re.ONE_DAY,l2="keychain",u2="0.3",h2="messages",f2="0.3",d2=re.SIX_HOURS,p2="publisher",Of="irn",g2="error",If="wss://relay.walletconnect.com",Tf="wss://relay.walletconnect.org",m2="relayer",ot={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},v2="_subscription",Hi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},y2=re.ONE_SECOND/2,w2="2.9.1",b2=1e4,_2="0.3",E2="WALLETCONNECT_CLIENT_ID",Cr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},x2="subscription",S2="0.3",C2=re.FIVE_SECONDS*1e3,A2="pairing",D2="0.3",Vi={wc_pairingDelete:{req:{ttl:re.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:re.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:re.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:re.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:re.ONE_DAY,prompt:!1,tag:0},res:{ttl:re.ONE_DAY,prompt:!1,tag:0}}},Ar={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},O2="history",I2="0.3",T2="expirer",lr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},$2="0.3",Ha="verify-api",$f="https://verify.walletconnect.com";let R2=class{constructor(t,r){this.core=t,this.logger=r,this.keychain=new Map,this.name=l2,this.version=u2,this.initialized=!1,this.storagePrefix=Jr,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:o}=X("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(o)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=t,this.logger=Fe.generateChildLogger(r,this.name)}get context(){return Fe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,jh(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?kh(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=X("NOT_INITIALIZED",this.name);throw new Error(t)}}},P2=class{constructor(t,r,n){this.core=t,this.logger=r,this.name=a2,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),o=uh(i);return lh(o.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=iy();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const o=await this.getClientSeed(),s=uh(o),a=Ia();return await fv(a,i,c2,s)},this.generateSharedKey=(i,o,s)=>{this.isInitialized();const a=this.getPrivateKey(i),c=oy(a,o);return this.setSymKey(c,s)},this.setSymKey=async(i,o)=>{this.isInitialized();const s=o||sy(i);return await this.keychain.set(s,i),s},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,o,s)=>{this.isInitialized();const a=Ph(s),c=la(o);if(Nh(a)){const p=a.senderPublicKey,m=a.receiverPublicKey;i=await this.generateSharedKey(p,m)}const u=this.getSymKey(i),{type:h,senderPublicKey:d}=a;return cy({type:h,symKey:u,message:c,senderPublicKey:d})},this.decode=async(i,o,s)=>{this.isInitialized();const a=hy(o,s);if(Nh(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;i=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(i),u=ly({symKey:c,encoded:o});return Hu(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}},this.getPayloadType=i=>{const o=Bo(i);return ji(o.type)},this.getPayloadSenderPublicKey=i=>{const o=Bo(i);return o.senderPublicKey?Wt(o.senderPublicKey,Ht):void 0},this.core=t,this.logger=Fe.generateChildLogger(r,this.name),this.keychain=n||new R2(this.core,this.logger)}get context(){return Fe.getLoggerContext(this.logger)}async setPrivateKey(t,r){return await this.keychain.set(t,r),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(Df)}catch{t=Ia(),await this.keychain.set(Df,t)}return n2(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=X("NOT_INITIALIZED",this.name);throw new Error(t)}}},N2=class extends vg{constructor(t,r){super(t,r),this.logger=t,this.core=r,this.messages=new Map,this.name=h2,this.version=f2,this.initialized=!1,this.storagePrefix=Jr,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const o=Gn(i);let s=this.messages.get(n);return typeof s>"u"&&(s={}),typeof s[o]<"u"||(s[o]=i,this.messages.set(n,s),await this.persist()),o},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const o=this.get(n),s=Gn(i);return typeof o[s]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Fe.generateChildLogger(t,this.name),this.core=r}get context(){return Fe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,jh(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?kh(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=X("NOT_INITIALIZED",this.name);throw new Error(t)}}},L2=class extends yg{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.events=new vr.EventEmitter,this.name=p2,this.queue=new Map,this.publishTimeout=re.toMiliseconds(re.TEN_SECONDS),this.queueTimeout=re.toMiliseconds(re.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,i,o)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:o}});try{const s=(o==null?void 0:o.ttl)||d2,a=Pa(o),c=(o==null?void 0:o.prompt)||!1,u=(o==null?void 0:o.tag)||0,h=(o==null?void 0:o.id)||Ma().toString(),d={topic:n,message:i,opts:{ttl:s,relay:a,prompt:c,tag:u,id:h}},p=setTimeout(()=>this.queue.set(h,d),this.queueTimeout);try{await await zo(this.rpcPublish(n,i,s,a,c,u,h),this.publishTimeout),clearTimeout(p),this.relayer.events.emit(ot.publish,d)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:o}})}catch(s){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(s),s}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=t,this.logger=Fe.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Fe.getLoggerContext(this.logger)}rpcPublish(t,r,n,i,o,s,a){var c,u,h,d;const p={method:Wo(i.protocol).publish,params:{topic:t,message:r,ttl:n,prompt:o,tag:s},id:a};return Vt((c=p.params)==null?void 0:c.prompt)&&((u=p.params)==null||delete u.prompt),Vt((h=p.params)==null?void 0:h.tag)&&((d=p.params)==null||delete d.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p}),this.relayer.request(p)}onPublish(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async t=>{const{topic:r,message:n,opts:i}=t;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(Hn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(ot.connection_stalled);return}this.checkQueue()}),this.relayer.on(ot.message_ack,t=>{this.onPublish(t.id.toString())})}},M2=class{constructor(){this.map=new Map,this.set=(t,r)=>{const n=this.get(t);this.exists(t,r)||this.map.set(t,[...n,r])},this.get=t=>this.map.get(t)||[],this.exists=(t,r)=>this.get(t).includes(r),this.delete=(t,r)=>{if(typeof r>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const n=this.get(t);if(!this.exists(t,r))return;const i=n.filter(o=>o!==r);if(!i.length){this.map.delete(t);return}this.map.set(t,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}};var F2=Object.defineProperty,U2=Object.defineProperties,j2=Object.getOwnPropertyDescriptors,Rf=Object.getOwnPropertySymbols,k2=Object.prototype.hasOwnProperty,B2=Object.prototype.propertyIsEnumerable,Pf=(e,t,r)=>t in e?F2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qi=(e,t)=>{for(var r in t||(t={}))k2.call(t,r)&&Pf(e,r,t[r]);if(Rf)for(var r of Rf(t))B2.call(t,r)&&Pf(e,r,t[r]);return e},Va=(e,t)=>U2(e,j2(t));let z2=class extends _g{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.subscriptions=new Map,this.topicMap=new M2,this.events=new vr.EventEmitter,this.name=x2,this.version=S2,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Jr,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const o=Pa(i),s={topic:n,relay:o};this.pending.set(n,s);const a=await this.rpcSubscribe(n,o);return this.onSubscribe(a,s),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),a}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,o)=>{const s=new re.Watch;s.start(this.pendingSubscriptionWatchLabel);const a=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(a),s.stop(this.pendingSubscriptionWatchLabel),i(!0)),s.elapsed(this.pendingSubscriptionWatchLabel)>=C2&&(clearInterval(a),s.stop(this.pendingSubscriptionWatchLabel),o(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=t,this.logger=Fe.generateChildLogger(r,this.name),this.clientId=""}get context(){return Fe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,r){let n=!1;try{n=this.getSubscription(t).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,r){const n=this.topicMap.get(t);await Promise.all(n.map(async i=>await this.unsubscribeById(t,i,r)))}async unsubscribeById(t,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:n}});try{const i=Pa(n);await this.rpcUnsubscribe(t,r,i);const o=Et("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,r,o),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(t,r){const n={method:Wo(r.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await zo(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(ot.connection_stalled)}return Gn(t+this.clientId)}async rpcBatchSubscribe(t){if(!t.length)return;const r=t[0].relay,n={method:Wo(r.protocol).batchSubscribe,params:{topics:t.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await zo(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(ot.connection_stalled)}}rpcUnsubscribe(t,r,n){const i={method:Wo(n.protocol).unsubscribe,params:{topic:t,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(t,r){this.setSubscription(t,Va(qi({},r),{id:t})),this.pending.delete(r.topic)}onBatchSubscribe(t){t.length&&t.forEach(r=>{this.setSubscription(r.id,qi({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(t,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,t)&&this.deleteSubscription(r,n),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,r){this.subscriptions.has(t)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:r}),this.addSubscription(t,r))}addSubscription(t,r){this.subscriptions.set(t,qi({},r)),this.topicMap.set(r.topic,t),this.events.emit(Cr.created,r)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const r=this.subscriptions.get(t);if(!r){const{message:n}=X("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(n)}return r}deleteSubscription(t,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:r});const n=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(n.topic,t),this.events.emit(Cr.deleted,Va(qi({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Cr.sync)}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(Cr.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:r}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const r=await this.rpcBatchSubscribe(t);ki(r)&&this.onBatchSubscribe(r.map((n,i)=>Va(qi({},t[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const t=[];this.pending.forEach(r=>{t.push(r)}),await this.batchSubscribe(t)}registerEventListeners(){this.relayer.core.heartbeat.on(Hn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(ot.connect,async()=>{await this.onConnect()}),this.relayer.on(ot.disconnect,()=>{this.onDisconnect()}),this.events.on(Cr.created,async t=>{const r=Cr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()}),this.events.on(Cr.deleted,async t=>{const r=Cr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=X("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise(t=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),t())},this.pollingInterval)})}};var W2=Object.defineProperty,Nf=Object.getOwnPropertySymbols,H2=Object.prototype.hasOwnProperty,V2=Object.prototype.propertyIsEnumerable,Lf=(e,t,r)=>t in e?W2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,q2=(e,t)=>{for(var r in t||(t={}))H2.call(t,r)&&Lf(e,r,t[r]);if(Nf)for(var r of Nf(t))V2.call(t,r)&&Lf(e,r,t[r]);return e};let K2=class extends wg{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new vr.EventEmitter,this.name=m2,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?Fe.generateChildLogger(t.logger,this.name):Fe.pino(Fe.getDefaultLoggerOptions({level:t.logger||g2})),this.messages=new N2(this.logger,t.core),this.subscriber=new z2(this,this.logger),this.publisher=new L2(this,this.logger),this.relayUrl=(t==null?void 0:t.relayUrl)||If,this.projectId=t.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Tf}...`),await this.restartTransport(Tf)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},b2)}get context(){return Fe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(t,r,n){this.isInitialized(),await this.publisher.publish(t,r,n),await this.recordMessageEvent({topic:t,message:r,publishedAt:Date.now()})}async subscribe(t,r){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(t))==null?void 0:n[0])||"";return i||(await Promise.all([new Promise(o=>{this.subscriber.once(Cr.created,s=>{s.topic===t&&o()})}),new Promise(async o=>{i=await this.subscriber.subscribe(t,r),o()})]),i)}async unsubscribe(t,r){this.isInitialized(),await this.subscriber.unsubscribe(t,r)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(ot.transport_closed))}async transportOpen(t){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=t||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(Cr.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,n)=>{await zo(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(i=>n(i)).then(()=>r()).finally(()=>this.removeListener(ot.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(ot.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);const n=r;if(!this.isConnectionStalled(n.message))throw r;this.events.emit(ot.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(t){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=t||this.relayUrl,this.connected&&await Promise.all([new Promise(r=>{this.provider.once(Hi.disconnect,()=>{r()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(t){return this.staleConnectionErrors.some(r=>t.includes(r))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Iw(new Pw(Ey({sdkVersion:w2,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:r,message:n}=t;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(t){const{topic:r,message:n}=t;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),ja(t)){if(!t.method.endsWith(v2))return;const r=t.params,{topic:n,message:i,publishedAt:o}=r.data,s={topic:n,message:i,publishedAt:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(q2({type:"event",event:r.id},s)),this.events.emit(r.id,s),await this.acknowledgePayload(t),await this.onMessageEvent(s)}else Ko(t)&&this.events.emit(ot.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(ot.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const r=Fa(t.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on(Hi.payload,t=>this.onProviderPayload(t)),this.provider.on(Hi.connect,()=>{this.events.emit(ot.connect)}),this.provider.on(Hi.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(Hi.error,t=>{this.logger.error(t),this.events.emit(ot.error,t)})}registerEventListeners(){this.events.on(ot.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(ot.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},re.toMiliseconds(y2))}isInitialized(){if(!this.initialized){const{message:t}=X("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(t=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),t())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var G2=Object.defineProperty,Mf=Object.getOwnPropertySymbols,Y2=Object.prototype.hasOwnProperty,J2=Object.prototype.propertyIsEnumerable,Ff=(e,t,r)=>t in e?G2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Uf=(e,t)=>{for(var r in t||(t={}))Y2.call(t,r)&&Ff(e,r,t[r]);if(Mf)for(var r of Mf(t))J2.call(t,r)&&Ff(e,r,t[r]);return e};let Jo=class extends bg{constructor(t,r,n,i=Jr,o=void 0){super(t,r,n,i),this.core=t,this.logger=r,this.name=n,this.map=new Map,this.version=_2,this.cached=[],this.initialized=!1,this.storagePrefix=Jr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>{this.getKey&&s!==null&&!Vt(s)?this.map.set(this.getKey(s),s):Vy(s)?this.map.set(s.id,s):qy(s)&&this.map.set(s.topic,s)}),this.cached=[],this.initialized=!0)},this.set=async(s,a)=>{this.isInitialized(),this.map.has(s)?await this.update(s,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:s,value:a}),this.map.set(s,a),await this.persist())},this.get=s=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:s}),this.getData(s)),this.getAll=s=>(this.isInitialized(),s?this.values.filter(a=>Object.keys(s).every(c=>Lw(a[c],s[c]))):this.values),this.update=async(s,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:s,update:a});const c=Uf(Uf({},this.getData(s)),a);this.map.set(s,c),await this.persist()},this.delete=async(s,a)=>{this.isInitialized(),this.map.has(s)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:s,reason:a}),this.map.delete(s),await this.persist())},this.logger=Fe.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=o}get context(){return Fe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const r=this.map.get(t);if(!r){const{message:n}=X("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:r}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=X("NOT_INITIALIZED",this.name);throw new Error(t)}}},Z2=class{constructor(t,r){this.core=t,this.logger=r,this.name=A2,this.version=D2,this.events=new pu,this.initialized=!1,this.storagePrefix=Jr,this.ignoredPayloadTypes=[xn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=Ia(),i=await this.core.crypto.setSymKey(n),o=yr(re.FIVE_MINUTES),s={protocol:Of},a={topic:i,expiry:o,relay:s,active:!1},c=Ly({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:s});return await this.pairings.set(i,a),await this.core.relayer.subscribe(i),this.core.expirer.set(i,o),{topic:i,uri:c}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:o,relay:s}=Ry(n.uri);if(this.pairings.keys.includes(i))throw new Error(`Pairing already exists: ${i}`);if(this.core.crypto.hasKeys(i))throw new Error(`Keychain already exists: ${i}`);const a=yr(re.FIVE_MINUTES),c={topic:i,relay:s,expiry:a,active:!1};return await this.pairings.set(i,c),await this.core.crypto.setSymKey(o,i),await this.core.relayer.subscribe(i,{relay:s}),this.core.expirer.set(i,a),n.activatePairing&&await this.activate({topic:i}),c},this.activate=async({topic:n})=>{this.isInitialized();const i=yr(re.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const o=await this.sendRequest(i,"wc_pairingPing",{}),{done:s,resolve:a,reject:c}=Yn();this.events.once(mt("pairing_ping",o),({error:u})=>{u?c(u):a()}),await s()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Et("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,o)=>{const s=qo(i,o),a=await this.core.crypto.encode(n,s),c=Vi[i].req;return this.core.history.set(n,s),this.core.relayer.publish(n,a,c),s.id},this.sendResult=async(n,i,o)=>{const s=Fa(n,o),a=await this.core.crypto.encode(i,s),c=await this.core.history.get(i,n),u=Vi[c.request.method].res;await this.core.relayer.publish(i,a,u),await this.core.history.resolve(s)},this.sendError=async(n,i,o)=>{const s=Ua(n,o),a=await this.core.crypto.encode(i,s),c=await this.core.history.get(i,n),u=Vi[c.request.method]?Vi[c.request.method].res:Vi.unregistered_method.res;await this.core.relayer.publish(i,a,u),await this.core.history.resolve(s)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Et("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>Yr(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:o}=n;switch(o.method){case"wc_pairingPing":return this.onPairingPingRequest(i,o);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,o);default:return this.onUnknownRpcMethodRequest(i,o)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:o}=n,s=(await this.core.history.get(i,o.id)).request.method;switch(s){case"wc_pairingPing":return this.onPairingPingResponse(i,o);default:return this.onUnknownRpcMethodResponse(s)}},this.onPairingPingRequest=async(n,i)=>{const{id:o}=i;try{this.isValidPing({topic:n}),await this.sendResult(o,n,!0),this.events.emit("pairing_ping",{id:o,topic:n})}catch(s){await this.sendError(o,n,s),this.logger.error(s)}},this.onPairingPingResponse=(n,i)=>{const{id:o}=i;setTimeout(()=>{Mr(i)?this.events.emit(mt("pairing_ping",o),{}):wr(i)&&this.events.emit(mt("pairing_ping",o),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:o}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit("pairing_delete",{id:o,topic:n})}catch(s){await this.sendError(o,n,s),this.logger.error(s)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:o,method:s}=i;try{if(this.registeredMethods.includes(s))return;const a=Et("WC_METHOD_UNSUPPORTED",s);await this.sendError(o,n,a),this.logger.error(a)}catch(a){await this.sendError(o,n,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(Et("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!Zt(n)){const{message:i}=X("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!Hy(n.uri)){const{message:i}=X("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!Zt(n)){const{message:o}=X("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(o)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!Zt(n)){const{message:o}=X("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(o)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!At(n,!1)){const{message:i}=X("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=X("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(Yr(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=X("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=t,this.logger=Fe.generateChildLogger(r,this.name),this.pairings=new Jo(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Fe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=X("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(ot.message,async t=>{const{topic:r,message:n}=t;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);ja(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):Ko(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id))})}registerExpirerEvents(){this.core.expirer.on(lr.expired,async t=>{const{topic:r}=zh(t.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}},X2=class extends mg{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.records=new Map,this.events=new vr.EventEmitter,this.name=O2,this.version=I2,this.cached=[],this.initialized=!1,this.storagePrefix=Jr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,o)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:o}),this.records.has(i.id))return;const s={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:o,expiry:yr(re.THIRTY_DAYS)};this.records.set(s.id,s),this.events.emit(Ar.created,s)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=wr(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(Ar.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(o=>{if(o.topic===n){if(typeof i<"u"&&o.id!==i)return;this.records.delete(o.id),this.events.emit(Ar.deleted,o)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Fe.generateChildLogger(r,this.name)}get context(){return Fe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:qo(r.request.method,r.request.params,r.id),chainId:r.chainId};return t.push(n)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const r=this.records.get(t);if(!r){const{message:n}=X("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Ar.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:r}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(Ar.created,t=>{const r=Ar.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(Ar.updated,t=>{const r=Ar.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(Ar.deleted,t=>{const r=Ar.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.core.heartbeat.on(Hn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(t=>{re.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.delete(t.topic,t.id))})}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=X("NOT_INITIALIZED",this.name);throw new Error(t)}}},Q2=class extends Eg{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.expirations=new Map,this.events=new vr.EventEmitter,this.name=T2,this.version=$2,this.cached=[],this.initialized=!1,this.storagePrefix=Jr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const o=this.formatTarget(n),s={target:o,expiry:i};this.expirations.set(o,s),this.checkExpiry(o,s),this.events.emit(lr.created,{target:o,expiration:s})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),o=this.getExpiration(i);this.expirations.delete(i),this.events.emit(lr.deleted,{target:i,expiration:o})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Fe.generateChildLogger(r,this.name)}get context(){return Fe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return xy(t);if(typeof t=="number")return Sy(t);const{message:r}=X("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(r)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(lr.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:r}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const r=this.expirations.get(t);if(!r){const{message:n}=X("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(t,r){const{expiry:n}=r;re.toMiliseconds(n)-Date.now()<=0&&this.expire(t,r)}expire(t,r){this.expirations.delete(t),this.events.emit(lr.expired,{target:t,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,r)=>this.checkExpiry(r,t))}registerEventListeners(){this.core.heartbeat.on(Hn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(lr.created,t=>{const r=lr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(lr.expired,t=>{const r=lr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(lr.deleted,t=>{const r=lr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=X("NOT_INITIALIZED",this.name);throw new Error(t)}}},e3=class extends xg{constructor(t,r){super(t,r),this.projectId=t,this.logger=r,this.name=Ha,this.initialized=!1,this.init=async n=>{Uh()||!$a()||(this.verifyUrl=(n==null?void 0:n.verifyUrl)||$f,await this.createIframe())},this.register=async n=>{var i;if(this.initialized||await this.init(),!!this.iframe)try{(i=this.iframe.contentWindow)==null||i.postMessage(n.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${n.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async n=>{var i;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${n.attestationId}`);const o=this.startAbortTimer(re.FIVE_SECONDS),s=await fetch(`${this.verifyUrl}/attestation/${n.attestationId}`,{signal:this.abortController.signal});return clearTimeout(o),s.status===200?(i=await s.json())==null?void 0:i.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((n,i)=>{if(document.getElementById(Ha))return n();const o=document.createElement("iframe");o.setAttribute("id",Ha),o.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),o.style.display="none",o.addEventListener("load",()=>{this.initialized=!0,n()}),o.addEventListener("error",s=>{i(s)}),document.body.append(o),this.iframe=o}),new Promise(n=>{setTimeout(()=>n("iframe load timeout"),re.toMiliseconds(re.ONE_SECOND/2))})])}catch(n){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(n)}},this.logger=Fe.generateChildLogger(r,this.name),this.verifyUrl=$f,this.abortController=new AbortController,this.isDevEnv=Ta()&&process.env.IS_VITEST}get context(){return Fe.getLoggerContext(this.logger)}startAbortTimer(t){return setTimeout(()=>this.abortController.abort(),re.toMiliseconds(t))}};var t3=Object.defineProperty,jf=Object.getOwnPropertySymbols,r3=Object.prototype.hasOwnProperty,n3=Object.prototype.propertyIsEnumerable,kf=(e,t,r)=>t in e?t3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Bf=(e,t)=>{for(var r in t||(t={}))r3.call(t,r)&&kf(e,r,t[r]);if(jf)for(var r of jf(t))n3.call(t,r)&&kf(e,r,t[r]);return e};const i3=class Yp extends gg{constructor(t){super(t),this.protocol=Af,this.version=i2,this.name=Wa,this.events=new vr.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=t==null?void 0:t.projectId,this.relayUrl=(t==null?void 0:t.relayUrl)||If;const r=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Fe.pino(Fe.getDefaultLoggerOptions({level:(t==null?void 0:t.logger)||o2.logger}));this.logger=Fe.generateChildLogger(r,this.name),this.heartbeat=new Hn.HeartBeat,this.crypto=new P2(this,this.logger,t==null?void 0:t.keychain),this.history=new X2(this,this.logger),this.expirer=new Q2(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new Q1(Bf(Bf({},s2),t==null?void 0:t.storageOptions)),this.relayer=new K2({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Z2(this,this.logger),this.verify=new e3(this.projectId||"",this.logger)}static async init(t){const r=new Yp(t);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(E2,n),r}get context(){return Fe.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}},zf="wc",Wf=2,Hf="client",qa=`${zf}@${Wf}:${Hf}:`,Ka={name:Hf,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},o3="WALLETCONNECT_DEEPLINK_CHOICE",s3="proposal",a3="Proposal expired",c3="session",Zo=re.SEVEN_DAYS,l3="engine",Ki={wc_sessionPropose:{req:{ttl:re.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:re.ONE_DAY,prompt:!1,tag:1104},res:{ttl:re.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:re.ONE_DAY,prompt:!1,tag:1106},res:{ttl:re.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:re.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:re.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:re.ONE_DAY,prompt:!1,tag:1112},res:{ttl:re.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:re.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:re.THIRTY_SECONDS,prompt:!1,tag:1115}}},Ga={min:re.FIVE_MINUTES,max:re.SEVEN_DAYS},Gi={idle:"idle",active:"active"},u3="request",h3=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var f3=Object.defineProperty,d3=Object.defineProperties,p3=Object.getOwnPropertyDescriptors,Vf=Object.getOwnPropertySymbols,g3=Object.prototype.hasOwnProperty,m3=Object.prototype.propertyIsEnumerable,qf=(e,t,r)=>t in e?f3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ur=(e,t)=>{for(var r in t||(t={}))g3.call(t,r)&&qf(e,r,t[r]);if(Vf)for(var r of Vf(t))m3.call(t,r)&&qf(e,r,t[r]);return e},Ya=(e,t)=>d3(e,p3(t));class v3 extends Cg{constructor(t){super(t),this.name=l3,this.events=new pu,this.initialized=!1,this.ignoredPayloadTypes=[xn],this.requestQueue={state:Gi.idle,requests:[]},this.requestQueueDelay=re.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(Ki)}),this.initialized=!0,setTimeout(()=>{this.requestQueue.requests=this.getPendingSessionRequests(),this.processRequestQueue()},re.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{this.isInitialized();const n=Ya(ur({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:o,optionalNamespaces:s,sessionProperties:a,relays:c}=n;let u=i,h,d=!1;if(u&&(d=this.client.core.pairing.pairings.get(u).active),!u||!d){const{topic:E,uri:y}=await this.client.core.pairing.create();u=E,h=y}const p=await this.client.core.crypto.generateKeyPair(),m=ur({requiredNamespaces:o,optionalNamespaces:s,relays:c??[{protocol:Of}],proposer:{publicKey:p,metadata:this.client.metadata}},a&&{sessionProperties:a}),{reject:b,resolve:_,done:A}=Yn(re.FIVE_MINUTES,a3);if(this.events.once(mt("session_connect"),async({error:E,session:y})=>{if(E)b(E);else if(y){y.self.publicKey=p;const S=Ya(ur({},y),{requiredNamespaces:y.requiredNamespaces,optionalNamespaces:y.optionalNamespaces});await this.client.session.set(y.topic,S),await this.setExpiry(y.topic,y.expiry),u&&await this.client.core.pairing.updateMetadata({topic:u,metadata:y.peer.metadata}),_(S)}}),!u){const{message:E}=X("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(E)}const I=await this.sendRequest(u,"wc_sessionPropose",m),w=yr(re.FIVE_MINUTES);return await this.setProposal(I,ur({id:I,expiry:w},m)),{uri:h,approval:A}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:i,namespaces:o,sessionProperties:s}=r,a=this.client.proposal.get(n);let{pairingTopic:c,proposer:u,requiredNamespaces:h,optionalNamespaces:d}=a;c=c||"",Bi(h)||(h=jy(o,"approve()"));const p=await this.client.core.crypto.generateKeyPair(),m=u.publicKey,b=await this.client.core.crypto.generateSharedKey(p,m);c&&n&&(await this.client.core.pairing.updateMetadata({topic:c,metadata:u.metadata}),await this.sendResult(n,c,{relay:{protocol:i??"irn"},responderPublicKey:p}),await this.client.proposal.delete(n,Et("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:c}));const _=ur({relay:{protocol:i??"irn"},namespaces:o,requiredNamespaces:h,optionalNamespaces:d,pairingTopic:c,controller:{publicKey:p,metadata:this.client.metadata},expiry:yr(Zo)},s&&{sessionProperties:s});await this.client.core.relayer.subscribe(b),await this.sendRequest(b,"wc_sessionSettle",_);const A=Ya(ur({},_),{topic:b,pairingTopic:c,acknowledged:!1,self:_.controller,peer:{publicKey:u.publicKey,metadata:u.metadata},controller:p});return await this.client.session.set(b,A),await this.setExpiry(b,yr(Zo)),{topic:b,acknowledged:()=>new Promise(I=>setTimeout(()=>I(this.client.session.get(b)),500))}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:n,reason:i}=r,{pairingTopic:o}=this.client.proposal.get(n);o&&(await this.sendError(n,o,i),await this.client.proposal.delete(n,Et("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:i}=r,o=await this.sendRequest(n,"wc_sessionUpdate",{namespaces:i}),{done:s,resolve:a,reject:c}=Yn();return this.events.once(mt("session_update",o),({error:u})=>{u?c(u):a()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:s}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,i=await this.sendRequest(n,"wc_sessionExtend",{}),{done:o,resolve:s,reject:a}=Yn();return this.events.once(mt("session_extend",i),({error:c})=>{c?a(c):s()}),await this.setExpiry(n,yr(Zo)),{acknowledged:o}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:i,topic:o,expiry:s}=r,a=await this.sendRequest(o,"wc_sessionRequest",{request:i,chainId:n},s),{done:c,resolve:u,reject:h}=Yn(s);this.events.once(mt("session_request",a),({error:p,result:m})=>{p?h(p):u(m)}),this.client.events.emit("session_request_sent",{topic:o,request:i,chainId:n,id:a});const d=await this.client.core.storage.getItem(o3);return Cy({id:a,topic:o,wcDeepLink:d}),await c()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:o}=i;Mr(i)?await this.sendResult(o,n,i.result):wr(i)&&await this.sendError(o,n,i.error),this.cleanupAfterResponse(r)},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=await this.sendRequest(n,"wc_sessionPing",{}),{done:o,resolve:s,reject:a}=Yn();this.events.once(mt("session_ping",i),({error:c})=>{c?a(c):s()}),await o()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:i,chainId:o}=r;await this.sendRequest(n,"wc_sessionEvent",{event:i,chainId:o})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=Ma().toString();let o;const s=a=>{(a==null?void 0:a.id.toString())===i&&(this.client.core.relayer.events.removeListener(ot.message_ack,s),o())};await Promise.all([new Promise(a=>{o=a,this.client.core.relayer.on(ot.message_ack,s)}),this.sendRequest(n,"wc_sessionDelete",Et("USER_DISCONNECTED"),void 0,i)]),await this.deleteSession(n)}else await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>zy(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(o=>{var s,a;return((s=o.peerMetadata)==null?void 0:s.url)&&((a=o.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&o.topic&&o.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(o=>this.client.core.pairing.disconnect({topic:o.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(r,n)=>{const{self:i}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,Et("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(i.publicKey)&&await this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r)},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,Et("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.requestQueue.requests=this.requestQueue.requests.filter(o=>o.id!==r),i&&(this.requestQueue.state=Gi.idle)},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{const n=Ki.wc_sessionRequest.req.ttl,{id:i,topic:o,params:s}=r;await this.client.pendingRequest.set(i,{id:i,topic:o,params:s}),n&&this.client.core.expirer.set(i,yr(n))},this.sendRequest=async(r,n,i,o,s)=>{const a=qo(n,i);if($a()&&h3.includes(n)){const h=Gn(JSON.stringify(a));await this.client.core.verify.register({attestationId:h})}const c=await this.client.core.crypto.encode(r,a),u=Ki[n].req;return o&&(u.ttl=o),s&&(u.id=s),this.client.core.history.set(r,a),this.client.core.relayer.publish(r,c,u),a.id},this.sendResult=async(r,n,i)=>{const o=Fa(r,i),s=await this.client.core.crypto.encode(n,o),a=await this.client.core.history.get(n,r),c=Ki[a.request.method].res;this.client.core.relayer.publish(n,s,c),await this.client.core.history.resolve(o)},this.sendError=async(r,n,i)=>{const o=Ua(r,i),s=await this.client.core.crypto.encode(n,o),a=await this.client.core.history.get(n,r),c=Ki[a.request.method].res;this.client.core.relayer.publish(n,s,c),await this.client.core.history.resolve(o)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{Yr(i.expiry)&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Yr(i.expiry)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession(i)),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=r=>{const{topic:n,payload:i}=r,o=i.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${o}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i}=r,o=(await this.client.core.history.get(n,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:i}=X("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.onSessionProposeRequest=async(r,n)=>{const{params:i,id:o}=n;try{this.isValidConnect(ur({},n.params));const s=yr(re.FIVE_MINUTES),a=ur({id:o,pairingTopic:r,expiry:s},i);await this.setProposal(o,a);const c=Gn(JSON.stringify(n)),u=await this.getVerifyContext(c,a.proposer.metadata);this.client.events.emit("session_proposal",{id:o,params:a,verifyContext:u})}catch(s){await this.sendError(o,r,s),this.client.logger.error(s)}},this.onSessionProposeResponse=async(r,n)=>{const{id:i}=n;if(Mr(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const s=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:s});const a=s.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});const c=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:c});const u=await this.client.core.crypto.generateSharedKey(a,c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:u});const h=await this.client.core.relayer.subscribe(u);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:r})}else wr(n)&&(await this.client.proposal.delete(i,Et("USER_DISCONNECTED")),this.events.emit(mt("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:o}=n;try{this.isValidSessionSettleRequest(o);const{relay:s,controller:a,expiry:c,namespaces:u,requiredNamespaces:h,optionalNamespaces:d,sessionProperties:p,pairingTopic:m}=n.params,b=ur({topic:r,relay:s,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:m,requiredNamespaces:h,optionalNamespaces:d,controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},p&&{sessionProperties:p});await this.sendResult(n.id,r,!0),this.events.emit(mt("session_connect"),{session:b}),this.cleanupDuplicatePairings(b)}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;Mr(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(mt("session_approve",i),{})):wr(n)&&(await this.client.session.delete(r,Et("USER_DISCONNECTED")),this.events.emit(mt("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:o}=n;try{this.isValidUpdate(ur({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult(o,r,!0),this.client.events.emit("session_update",{id:o,topic:r,params:i})}catch(s){await this.sendError(o,r,s),this.client.logger.error(s)}},this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n;Mr(n)?this.events.emit(mt("session_update",i),{}):wr(n)&&this.events.emit(mt("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,yr(Zo)),await this.sendResult(i,r,!0),this.client.events.emit("session_extend",{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n;Mr(n)?this.events.emit(mt("session_extend",i),{}):wr(n)&&this.events.emit(mt("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.client.events.emit("session_ping",{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n;setTimeout(()=>{Mr(n)?this.events.emit(mt("session_ping",i),{}):wr(n)&&this.events.emit(mt("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(o=>{this.client.core.relayer.once(ot.publish,async()=>{o(await this.deleteSession(r))})}),this.sendResult(i,r,!0)]),this.client.events.emit("session_delete",{id:i,topic:r})}catch(o){this.client.logger.error(o)}},this.onSessionRequest=async(r,n)=>{const{id:i,params:o}=n;try{this.isValidRequest(ur({topic:r},o)),await this.setPendingSessionRequest({id:i,topic:r,params:o}),this.addRequestToQueue({id:i,topic:r,params:o}),await this.processRequestQueue()}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n;Mr(n)?this.events.emit(mt("session_request",i),{result:n.result}):wr(n)&&this.events.emit(mt("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:o}=n;try{this.isValidEmit(ur({topic:r},o)),this.client.events.emit("session_event",{id:i,topic:r,params:o})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.addRequestToQueue=r=>{this.requestQueue.requests.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.requestQueue.state=Gi.idle,this.processRequestQueue()},re.toMiliseconds(this.requestQueueDelay))},this.processRequestQueue=async()=>{if(this.requestQueue.state===Gi.active){this.client.logger.info("session request queue is already active.");return}const r=this.requestQueue.requests[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{const{id:n,topic:i,params:o}=r,s=Gn(JSON.stringify({id:n,params:o})),a=this.client.session.get(i),c=await this.getVerifyContext(s,a.peer.metadata);this.requestQueue.state=Gi.active,this.client.events.emit("session_request",{id:n,topic:i,params:o,verifyContext:c})}catch(n){this.client.logger.error(n)}},this.isValidConnect=async r=>{if(!Zt(r)){const{message:c}=X("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(c)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:s,relays:a}=r;if(Vt(n)||await this.isValidPairingTopic(n),!ew(a,!0)){const{message:c}=X("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(c)}!Vt(i)&&Bi(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!Vt(o)&&Bi(o)!==0&&this.validateNamespaces(o,"optionalNamespaces"),Vt(s)||this.validateSessionProps(s,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=Qy(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!Zt(r))throw new Error(X("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:o,sessionProperties:s}=r;await this.isValidProposalId(n);const a=this.client.proposal.get(n),c=Vo(i,"approve()");if(c)throw new Error(c.message);const u=Yh(a.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!At(o,!0)){const{message:h}=X("MISSING_OR_INVALID",`approve() relayProtocol: ${o}`);throw new Error(h)}Vt(s)||this.validateSessionProps(s,"sessionProperties")},this.isValidReject=async r=>{if(!Zt(r)){const{message:o}=X("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(o)}const{id:n,reason:i}=r;if(await this.isValidProposalId(n),!rw(i)){const{message:o}=X("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(o)}},this.isValidSessionSettleRequest=r=>{if(!Zt(r)){const{message:u}=X("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(u)}const{relay:n,controller:i,namespaces:o,expiry:s}=r;if(!Kh(n)){const{message:u}=X("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=Ky(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Vo(o,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Yr(s)){const{message:u}=X("EXPIRED","onSessionSettleRequest()");throw new Error(u)}},this.isValidUpdate=async r=>{if(!Zt(r)){const{message:c}=X("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);const o=this.client.session.get(n),s=Vo(i,"update()");if(s)throw new Error(s.message);const a=Yh(o.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!Zt(r)){const{message:i}=X("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!Zt(r)){const{message:c}=X("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:i,chainId:o,expiry:s}=r;await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!Gh(a,o)){const{message:c}=X("MISSING_OR_INVALID",`request() chainId: ${o}`);throw new Error(c)}if(!nw(i)){const{message:c}=X("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!sw(a,o,i.method)){const{message:c}=X("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(s&&!uw(s,Ga)){const{message:c}=X("MISSING_OR_INVALID",`request() expiry: ${s}. Expiry must be a number (in seconds) between ${Ga.min} and ${Ga.max}`);throw new Error(c)}},this.isValidRespond=async r=>{if(!Zt(r)){const{message:o}=X("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:n,response:i}=r;if(await this.isValidSessionTopic(n),!iw(i)){const{message:o}=X("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}},this.isValidPing=async r=>{if(!Zt(r)){const{message:i}=X("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!Zt(r)){const{message:a}=X("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:o}=r;await this.isValidSessionTopic(n);const{namespaces:s}=this.client.session.get(n);if(!Gh(s,o)){const{message:a}=X("MISSING_OR_INVALID",`emit() chainId: ${o}`);throw new Error(a)}if(!ow(i)){const{message:a}=X("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!aw(s,o,i.name)){const{message:a}=X("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!Zt(r)){const{message:i}=X("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(r,n)=>{const i={verified:{verifyUrl:n.verifyUrl||"",validation:"UNKNOWN",origin:n.url||""}};try{const o=await this.client.core.verify.resolve({attestationId:r,verifyUrl:n.verifyUrl});o&&(i.verified.origin=o,i.verified.validation=o===n.url?"VALID":"INVALID")}catch(o){this.client.logger.error(o)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!At(i,!1)){const{message:o}=X("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(o)}})}}isInitialized(){if(!this.initialized){const{message:t}=X("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.client.core.relayer.on(ot.message,async t=>{const{topic:r,message:n}=t;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(r,n);ja(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):Ko(i)?(await this.client.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.client.core.history.delete(r,i.id)):this.onRelayEventUnknownPayload({topic:r,payload:i})})}registerExpirerEvents(){this.client.core.expirer.on(lr.expired,async t=>{const{topic:r,id:n}=zh(t.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,X("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(t){if(!At(t,!1)){const{message:r}=X("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:r}=X("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(r)}if(Yr(this.client.core.pairing.pairings.get(t).expiry)){const{message:r}=X("EXPIRED",`pairing topic: ${t}`);throw new Error(r)}}async isValidSessionTopic(t){if(!At(t,!1)){const{message:r}=X("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(r)}if(!this.client.session.keys.includes(t)){const{message:r}=X("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(r)}if(Yr(this.client.session.get(t).expiry)){await this.deleteSession(t);const{message:r}=X("EXPIRED",`session topic: ${t}`);throw new Error(r)}}async isValidSessionOrPairingTopic(t){if(this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(At(t,!1)){const{message:r}=X("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(r)}else{const{message:r}=X("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(r)}}async isValidProposalId(t){if(!tw(t)){const{message:r}=X("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(r)}if(!this.client.proposal.keys.includes(t)){const{message:r}=X("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(r)}if(Yr(this.client.proposal.get(t).expiry)){await this.deleteProposal(t);const{message:r}=X("EXPIRED",`proposal id: ${t}`);throw new Error(r)}}}class y3 extends Jo{constructor(t,r){super(t,r,s3,qa),this.core=t,this.logger=r}}class w3 extends Jo{constructor(t,r){super(t,r,c3,qa),this.core=t,this.logger=r}}class b3 extends Jo{constructor(t,r){super(t,r,u3,qa,n=>n.id),this.core=t,this.logger=r}}let _3=class Jp extends Sg{constructor(t){super(t),this.protocol=zf,this.version=Wf,this.name=Ka.name,this.events=new vr.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(t==null?void 0:t.name)||Ka.name,this.metadata=(t==null?void 0:t.metadata)||yy();const r=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Fe.pino(Fe.getDefaultLoggerOptions({level:(t==null?void 0:t.logger)||Ka.logger}));this.core=(t==null?void 0:t.core)||new i3(t),this.logger=Fe.generateChildLogger(r,this.name),this.session=new w3(this.core,this.logger),this.proposal=new y3(this.core,this.logger),this.pendingRequest=new b3(this.core,this.logger),this.engine=new v3(this)}static async init(t){const r=new Jp(t);return await r.initialize(),r}get context(){return Fe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}};var E3=Object.defineProperty,x3=Object.defineProperties,S3=Object.getOwnPropertyDescriptors,Kf=Object.getOwnPropertySymbols,C3=Object.prototype.hasOwnProperty,A3=Object.prototype.propertyIsEnumerable,Gf=(e,t,r)=>t in e?E3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,D3=(e,t)=>{for(var r in t||(t={}))C3.call(t,r)&&Gf(e,r,t[r]);if(Kf)for(var r of Kf(t))A3.call(t,r)&&Gf(e,r,t[r]);return e},O3=(e,t)=>x3(e,S3(t)),Ja=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},Xe=(e,t,r)=>(Ja(e,t,"read from private field"),r?r.call(e):t.get(e)),Cn=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},Xo=(e,t,r,n)=>(Ja(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Ut=(e,t,r)=>(Ja(e,t,"access private method"),r),An,Zn,Yi,Dt,Za,Yf,jt,qt,Xa,Jf;let I3=class{constructor(t){Cn(this,Za),Cn(this,jt),Cn(this,Xa),Cn(this,An,void 0),Cn(this,Zn,void 0),Cn(this,Yi,void 0),Cn(this,Dt,void 0),Xo(this,An,t),Xo(this,Zn,Ut(this,Za,Yf).call(this)),Ut(this,jt,qt).call(this)}async connect(t){const{requiredNamespaces:r,optionalNamespaces:n}=t;return new Promise(async(i,o)=>{await Ut(this,jt,qt).call(this);const s=Xe(this,Zn).subscribeModal(u=>{u.open||(s(),o(new Error("Modal closed")))}),{uri:a,approval:c}=await Xe(this,Dt).connect(t);if(a){const u=new Set;r&&Object.values(r).forEach(({chains:h})=>{h&&h.forEach(d=>u.add(d))}),n&&Object.values(n).forEach(({chains:h})=>{h&&h.forEach(d=>u.add(d))}),await Xe(this,Zn).openModal({uri:a,chains:Array.from(u)})}try{const u=await c();i(u)}catch(u){o(u)}finally{s(),Xe(this,Zn).closeModal()}})}async disconnect(t){await Ut(this,jt,qt).call(this),await Xe(this,Dt).disconnect(t)}async request(t){return await Ut(this,jt,qt).call(this),await Xe(this,Dt).request(t)}async getSessions(){return await Ut(this,jt,qt).call(this),Xe(this,Dt).session.getAll()}async getSession(){return await Ut(this,jt,qt).call(this),Xe(this,Dt).session.getAll().at(-1)}async onSessionEvent(t){await Ut(this,jt,qt).call(this),Xe(this,Dt).on("session_event",t)}async offSessionEvent(t){await Ut(this,jt,qt).call(this),Xe(this,Dt).off("session_event",t)}async onSessionUpdate(t){await Ut(this,jt,qt).call(this),Xe(this,Dt).on("session_update",t)}async offSessionUpdate(t){await Ut(this,jt,qt).call(this),Xe(this,Dt).off("session_update",t)}async onSessionDelete(t){await Ut(this,jt,qt).call(this),Xe(this,Dt).on("session_delete",t)}async offSessionDelete(t){await Ut(this,jt,qt).call(this),Xe(this,Dt).off("session_delete",t)}async onSessionExpire(t){await Ut(this,jt,qt).call(this),Xe(this,Dt).on("session_expire",t)}async offSessionExpire(t){await Ut(this,jt,qt).call(this),Xe(this,Dt).off("session_expire",t)}};An=new WeakMap,Zn=new WeakMap,Yi=new WeakMap,Dt=new WeakMap,Za=new WeakSet,Yf=function(){const{modalOptions:e,projectId:t}=Xe(this,An);return new w1(O3(D3({},e),{projectId:t}))},jt=new WeakSet,qt=async function(){return Xe(this,Dt)?!0:(!Xe(this,Yi)&&typeof window<"u"&&Xo(this,Yi,Ut(this,Xa,Jf).call(this)),Xe(this,Yi))},Xa=new WeakSet,Jf=async function(){Xo(this,Dt,await _3.init({metadata:Xe(this,An).metadata,projectId:Xe(this,An).projectId,relayUrl:Xe(this,An).relayUrl}));const e=await Xe(this,Dt).core.crypto.getClientId();try{localStorage.setItem("WCM_WALLETCONNECT_CLIENT_ID",e)}catch{console.info("Unable to set client id")}};function T3(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(i){i(r)}),(n=e.get("*"))&&n.slice().map(function(i){i(t,r)})}}}const Qo=T3();let Ji;function $3(e){Ji=new I3(e)}async function hr(){return new Promise(e=>{if(Ji)e(Ji);else{const t=setInterval(()=>{Ji&&(clearInterval(t),e(Ji))},200)}})}function R3(e){return He.useEffect(()=>{$3(e)},[]),null}const P3=He.memo(R3);function Qa(){const[e,t]=He.useState(void 0),[r,n]=He.useState(void 0),[i,o]=He.useState(!1);return{data:e,error:r,loading:i,setData:t,setError:n,setLoading:o}}function N3(e){const{data:t,error:r,loading:n,setData:i,setError:o,setLoading:s}=Qa();async function a(c){try{s(!0),o(void 0);const u=await(await hr()).connect(c??e);return i(u),Qo.emit("session_change"),u}catch(u){throw o(u),u}finally{s(!1)}}return{data:t,error:r,loading:n,connect:a}}function L3(e){const{error:t,loading:r,setError:n,setLoading:i}=Qa();async function o(s){try{i(!0),n(void 0),await(await hr()).disconnect(s??e),Qo.emit("session_change")}catch(a){throw n(a),a}finally{i(!1)}}return{error:t,loading:r,disconnect:o}}function Zf(e){He.useEffect(()=>(hr().then(t=>{t.onSessionDelete(e)}),()=>{hr().then(t=>{t.offSessionDelete(e)})}),[e])}function ec(e){He.useEffect(()=>(hr().then(t=>{t.onSessionEvent(e)}),()=>{hr().then(t=>{t.offSessionEvent(e)})}),[e])}function M3(e){He.useEffect(()=>(hr().then(t=>{t.onSessionExpire(e)}),()=>{hr().then(t=>{t.offSessionExpire(e)})}),[e])}function F3(e){He.useEffect(()=>(hr().then(t=>{t.onSessionUpdate(e)}),()=>{hr().then(t=>{t.offSessionUpdate(e)})}),[e])}function Dn(e){const{data:t,error:r,loading:n,setData:i,setError:o,setLoading:s}=Qa();async function a(c){try{s(!0),o(void 0);const u=await(await hr()).request(c??e);return i(u),u}catch(u){throw o(u),u}finally{s(!1)}}return{data:t,error:r,loading:n,request:a}}var U3=Object.defineProperty,j3=Object.defineProperties,k3=Object.getOwnPropertyDescriptors,Xf=Object.getOwnPropertySymbols,B3=Object.prototype.hasOwnProperty,z3=Object.prototype.propertyIsEnumerable,Qf=(e,t,r)=>t in e?U3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,W3=(e,t)=>{for(var r in t||(t={}))B3.call(t,r)&&Qf(e,r,t[r]);if(Xf)for(var r of Xf(t))z3.call(t,r)&&Qf(e,r,t[r]);return e},H3=(e,t)=>j3(e,k3(t));function Dr(){const[e,t]=He.useState(void 0);return Zf(r=>{r.topic===(e==null?void 0:e.topic)&&t(void 0)}),F3(r=>{if(e&&r.topic===(e==null?void 0:e.topic)){const{namespaces:n}=r.params,i=H3(W3({},e),{namespaces:n});t(i)}}),M3(r=>{e&&r.topic===(e==null?void 0:e.topic)&&t(void 0)}),He.useEffect(()=>{async function r(){const n=await(await hr()).getSession();t(n)}return r(),Qo.on("session_change",r),()=>{Qo.off("session_change",r)}},[]),e}const ed=["aztec_connect","aztec_disconnect","aztec_getAccountPublicKey","aztec_getSpendingPublicKey","aztec_requestProofs"],tc=["aztec:1337"],rc=["aleo_decrypt","aleo_disconnect","aleo_getSelectedAccount","aleo_deployProgram","aleo_getBalance","aleo_executeProgram","aleo_getRecords","aleo_transfer"],es=["aleo:1"],ts=["chainChanged","accountSelected","accountSynced"],td="f0aaeffe71b636da453fce042d79d723",nc="https://walletconnect.puzzle.online/",rd={standaloneChains:tc.concat(es),enableExplorer:!1,enableAccountView:!0,enableNetworkView:!0,enableStandaloneMode:!0,mobileWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"",universal:nc}}],desktopWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"",universal:nc}}],walletImages:{puzzle:"https://i.imgur.com/p9tHaFC.png"}},V3={requiredNamespaces:{aztec:{methods:ed,chains:tc,events:ts},aleo:{methods:rc,chains:es,events:ts}}},q3=({dAppName:e,dAppDescription:t,dAppUrl:r,dAppIconURL:n})=>Hs.jsx(P3,{projectId:td,metadata:{name:e,description:t,url:r,icons:[n]},modalOptions:{...rd}}),K3=({children:e})=>(S0(),Hs.jsx(Hs.Fragment,{children:e})),nd=e=>{let t;const r=new Set,n=(c,u)=>{const h=typeof c=="function"?c(t):c;if(!Object.is(h,t)){const d=t;t=u??typeof h!="object"?h:Object.assign({},t,h),r.forEach(p=>p(t,d))}},i=()=>t,a={setState:n,getState:i,subscribe:c=>(r.add(c),()=>r.delete(c)),destroy:()=>{r.clear()}};return t=e(n,i,a),a},G3=e=>e?nd(e):nd;var ic={exports:{}},oc={},rs={exports:{}},sc={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var id;function Y3(){if(id)return sc;id=1;var e=He;function t(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,i=e.useEffect,o=e.useLayoutEffect,s=e.useDebugValue;function a(d,p){var m=p(),b=n({inst:{value:m,getSnapshot:p}}),_=b[0].inst,A=b[1];return o(function(){_.value=m,_.getSnapshot=p,c(_)&&A({inst:_})},[d,m,p]),i(function(){return c(_)&&A({inst:_}),d(function(){c(_)&&A({inst:_})})},[d]),s(m),m}function c(d){var p=d.getSnapshot;d=d.value;try{var m=p();return!r(d,m)}catch{return!0}}function u(d,p){return p()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return sc.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,sc}var ac={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var od;function J3(){return od||(od=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=He,t=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function r(E){{for(var y=arguments.length,S=new Array(y>1?y-1:0),g=1;g<y;g++)S[g-1]=arguments[g];n("error",E,S)}}function n(E,y,S){{var g=t.ReactDebugCurrentFrame,l=g.getStackAddendum();l!==""&&(y+="%s",S=S.concat([l]));var v=S.map(function(M){return String(M)});v.unshift("Warning: "+y),Function.prototype.apply.call(console[E],console,v)}}function i(E,y){return E===y&&(E!==0||1/E===1/y)||E!==E&&y!==y}var o=typeof Object.is=="function"?Object.is:i,s=e.useState,a=e.useEffect,c=e.useLayoutEffect,u=e.useDebugValue,h=!1,d=!1;function p(E,y,S){h||e.startTransition!==void 0&&(h=!0,r("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var g=y();if(!d){var l=y();o(g,l)||(r("The result of getSnapshot should be cached to avoid an infinite loop"),d=!0)}var v=s({inst:{value:g,getSnapshot:y}}),M=v[0].inst,L=v[1];return c(function(){M.value=g,M.getSnapshot=y,m(M)&&L({inst:M})},[E,g,y]),a(function(){m(M)&&L({inst:M});var F=function(){m(M)&&L({inst:M})};return E(F)},[E]),u(g),g}function m(E){var y=E.getSnapshot,S=E.value;try{var g=y();return!o(S,g)}catch{return!0}}function b(E,y,S){return y()}var _=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",A=!_,I=A?b:p,w=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:I;ac.useSyncExternalStore=w,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),ac}var sd;function ad(){return sd||(sd=1,process.env.NODE_ENV==="production"?rs.exports=Y3():rs.exports=J3()),rs.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cd;function Z3(){if(cd)return oc;cd=1;var e=He,t=ad();function r(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var n=typeof Object.is=="function"?Object.is:r,i=t.useSyncExternalStore,o=e.useRef,s=e.useEffect,a=e.useMemo,c=e.useDebugValue;return oc.useSyncExternalStoreWithSelector=function(u,h,d,p,m){var b=o(null);if(b.current===null){var _={hasValue:!1,value:null};b.current=_}else _=b.current;b=a(function(){function I(g){if(!w){if(w=!0,E=g,g=p(g),m!==void 0&&_.hasValue){var l=_.value;if(m(l,g))return y=l}return y=g}if(l=y,n(E,g))return l;var v=p(g);return m!==void 0&&m(l,v)?l:(E=g,y=v)}var w=!1,E,y,S=d===void 0?null:d;return[function(){return I(h())},S===null?void 0:function(){return I(S())}]},[h,d,p,m]);var A=i(u,b[0],b[1]);return s(function(){_.hasValue=!0,_.value=A},[A]),c(A),A},oc}var cc={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ld;function X3(){return ld||(ld=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=He,t=ad();function r(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}var n=typeof Object.is=="function"?Object.is:r,i=t.useSyncExternalStore,o=e.useRef,s=e.useEffect,a=e.useMemo,c=e.useDebugValue;function u(h,d,p,m,b){var _=o(null),A;_.current===null?(A={hasValue:!1,value:null},_.current=A):A=_.current;var I=a(function(){var S=!1,g,l,v=function(U){if(!S){S=!0,g=U;var j=m(U);if(b!==void 0&&A.hasValue){var D=A.value;if(b(D,j))return l=D,D}return l=j,j}var R=g,G=l;if(n(R,U))return G;var W=m(U);return b!==void 0&&b(G,W)?G:(g=U,l=W,W)},M=p===void 0?null:p,L=function(){return v(d())},F=M===null?void 0:function(){return v(M())};return[L,F]},[d,p,m,b]),w=I[0],E=I[1],y=i(h,w,E);return s(function(){A.hasValue=!0,A.value=y},[y]),c(y),y}cc.useSyncExternalStoreWithSelector=u,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),cc}process.env.NODE_ENV==="production"?ic.exports=Z3():ic.exports=X3();var Q3=ic.exports;const e5=Co(Q3),{useSyncExternalStoreWithSelector:t5}=e5;function r5(e,t=e.getState,r){const n=t5(e.subscribe,e.getState,e.getServerState||e.getState,t,r);return He.useDebugValue(n),n}const ud=e=>{const t=typeof e=="function"?G3(e):e,r=(n,i)=>r5(t,n,i);return Object.assign(r,t),r},n5=e=>e?ud(e):ud;function $t(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(process.env.NODE_ENV!=="production"){var i=h5[e],o=i?typeof i=="function"?i.apply(null,r):i:"unknown error nr: "+e;throw Error("[Immer] "+o)}throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Xn(e){return!!e&&!!e[nr]}function On(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var i=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===f5}(e)||Array.isArray(e)||!!e[bd]||!!(!((t=e.constructor)===null||t===void 0)&&t[bd])||uc(e)||hc(e))}function Zi(e,t,r){r===void 0&&(r=!1),Qn(e)===0?(r?Object.keys:xc)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,i){return t(i,n,e)})}function Qn(e){var t=e[nr];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:uc(e)?2:hc(e)?3:0}function lc(e,t){return Qn(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function i5(e,t){return Qn(e)===2?e.get(t):e[t]}function hd(e,t,r){var n=Qn(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function o5(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function uc(e){return l5&&e instanceof Map}function hc(e){return u5&&e instanceof Set}function In(e){return e.o||e.t}function fc(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=d5(e);delete t[nr];for(var r=xc(t),n=0;n<r.length;n++){var i=r[n],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function dc(e,t){return t===void 0&&(t=!1),pc(e)||Xn(e)||!On(e)||(Qn(e)>1&&(e.set=e.add=e.clear=e.delete=s5),Object.freeze(e),t&&Zi(e,function(r,n){return dc(n,!0)},!0)),e}function s5(){$t(2)}function pc(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Or(e){var t=p5[e];return t||$t(18,e),t}function fd(){return process.env.NODE_ENV==="production"||ei||$t(0),ei}function gc(e,t){t&&(Or("Patches"),e.u=[],e.s=[],e.v=t)}function ns(e){mc(e),e.p.forEach(a5),e.p=null}function mc(e){e===ei&&(ei=e.l)}function dd(e){return ei={p:[],l:ei,h:e,m:!0,_:0}}function a5(e){var t=e[nr];t.i===0||t.i===1?t.j():t.O=!0}function vc(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.g||Or("ES5").S(t,e,n),n?(r[nr].P&&(ns(t),$t(4)),On(e)&&(e=is(t,e),t.l||os(t,e)),t.u&&Or("Patches").M(r[nr].t,e,t.u,t.s)):e=is(t,r,[]),ns(t),t.u&&t.v(t.u,t.s),e!==wd?e:void 0}function is(e,t,r){if(pc(t))return t;var n=t[nr];if(!n)return Zi(t,function(a,c){return pd(e,n,t,a,c,r)},!0),t;if(n.A!==e)return t;if(!n.P)return os(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=fc(n.k):n.o,o=i,s=!1;n.i===3&&(o=new Set(i),i.clear(),s=!0),Zi(o,function(a,c){return pd(e,n,i,a,c,r,s)}),os(e,i,!1),r&&e.u&&Or("Patches").N(n,r,e.u,e.s)}return n.o}function pd(e,t,r,n,i,o,s){if(process.env.NODE_ENV!=="production"&&i===r&&$t(5),Xn(i)){var a=is(e,i,o&&t&&t.i!==3&&!lc(t.R,n)?o.concat(n):void 0);if(hd(r,n,a),!Xn(a))return;e.m=!1}else s&&r.add(i);if(On(i)&&!pc(i)){if(!e.h.D&&e._<1)return;is(e,i),t&&t.A.l||os(e,i)}}function os(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&dc(t,r)}function yc(e,t){var r=e[nr];return(r?In(r):e)[t]}function gd(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function wc(e){e.P||(e.P=!0,e.l&&wc(e.l))}function bc(e){e.o||(e.o=fc(e.t))}function _c(e,t,r){var n=uc(t)?Or("MapSet").F(t,r):hc(t)?Or("MapSet").T(t,r):e.g?function(i,o){var s=Array.isArray(i),a={i:s?1:0,A:o?o.A:fd(),P:!1,I:!1,R:{},l:o,t:i,k:null,o:null,j:null,C:!1},c=a,u=Sc;s&&(c=[a],u=Xi);var h=Proxy.revocable(c,u),d=h.revoke,p=h.proxy;return a.k=p,a.j=d,p}(t,r):Or("ES5").J(t,r);return(r?r.A:fd()).p.push(n),n}function c5(e){return Xn(e)||$t(22,e),function t(r){if(!On(r))return r;var n,i=r[nr],o=Qn(r);if(i){if(!i.P&&(i.i<4||!Or("ES5").K(i)))return i.t;i.I=!0,n=md(r,o),i.I=!1}else n=md(r,o);return Zi(n,function(s,a){i&&i5(i.t,s)===a||hd(n,s,t(a))}),o===3?new Set(n):n}(e)}function md(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return fc(e)}var vd,ei,Ec=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",l5=typeof Map<"u",u5=typeof Set<"u",yd=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",wd=Ec?Symbol.for("immer-nothing"):((vd={})["immer-nothing"]=!0,vd),bd=Ec?Symbol.for("immer-draftable"):"__$immer_draftable",nr=Ec?Symbol.for("immer-state"):"__$immer_state",h5={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},f5=""+Object.prototype.constructor,xc=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,d5=Object.getOwnPropertyDescriptors||function(e){var t={};return xc(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},p5={},Sc={get:function(e,t){if(t===nr)return e;var r=In(e);if(!lc(r,t))return function(i,o,s){var a,c=gd(o,s);return c?"value"in c?c.value:(a=c.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,r,t);var n=r[t];return e.I||!On(n)?n:n===yc(e.t,t)?(bc(e),e.o[t]=_c(e.A.h,n,e)):n},has:function(e,t){return t in In(e)},ownKeys:function(e){return Reflect.ownKeys(In(e))},set:function(e,t,r){var n=gd(In(e),t);if(n!=null&&n.set)return n.set.call(e.k,r),!0;if(!e.P){var i=yc(In(e),t),o=i==null?void 0:i[nr];if(o&&o.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(o5(r,i)&&(r!==void 0||lc(e.t,t)))return!0;bc(e),wc(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return yc(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,bc(e),wc(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=In(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){$t(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){$t(12)}},Xi={};Zi(Sc,function(e,t){Xi[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Xi.deleteProperty=function(e,t){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(t))&&$t(13),Xi.set.call(this,e,t,void 0)},Xi.set=function(e,t,r){return process.env.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&$t(14),Sc.set.call(this,e[0],t,r,e[0])};var g5=function(){function e(r){var n=this;this.g=yd,this.D=!0,this.produce=function(i,o,s){if(typeof i=="function"&&typeof o!="function"){var a=o;o=i;var c=n;return function(_){var A=this;_===void 0&&(_=a);for(var I=arguments.length,w=Array(I>1?I-1:0),E=1;E<I;E++)w[E-1]=arguments[E];return c.produce(_,function(y){var S;return(S=o).call.apply(S,[A,y].concat(w))})}}var u;if(typeof o!="function"&&$t(6),s!==void 0&&typeof s!="function"&&$t(7),On(i)){var h=dd(n),d=_c(n,i,void 0),p=!0;try{u=o(d),p=!1}finally{p?ns(h):mc(h)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(_){return gc(h,s),vc(_,h)},function(_){throw ns(h),_}):(gc(h,s),vc(u,h))}if(!i||typeof i!="object"){if((u=o(i))===void 0&&(u=i),u===wd&&(u=void 0),n.D&&dc(u,!0),s){var m=[],b=[];Or("Patches").M(i,u,m,b),s(m,b)}return u}$t(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(u){for(var h=arguments.length,d=Array(h>1?h-1:0),p=1;p<h;p++)d[p-1]=arguments[p];return n.produceWithPatches(u,function(m){return i.apply(void 0,[m].concat(d))})};var s,a,c=n.produce(i,o,function(u,h){s=u,a=h});return typeof Promise<"u"&&c instanceof Promise?c.then(function(u){return[u,s,a]}):[c,s,a]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){On(r)||$t(8),Xn(r)&&(r=c5(r));var n=dd(this),i=_c(this,r,void 0);return i[nr].C=!0,mc(n),i},t.finishDraft=function(r,n){var i=r&&r[nr];process.env.NODE_ENV!=="production"&&(i&&i.C||$t(9),i.I&&$t(10));var o=i.A;return gc(o,n),vc(void 0,o)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!yd&&$t(20),this.g=r},t.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var o=n[i];if(o.path.length===0&&o.op==="replace"){r=o.value;break}}i>-1&&(n=n.slice(i+1));var s=Or("Patches").$;return Xn(r)?s(r,n):this.produce(r,function(a){return s(a,n)})},e}(),ir=new g5,m5=ir.produce;ir.produceWithPatches.bind(ir),ir.setAutoFreeze.bind(ir),ir.setUseProxies.bind(ir),ir.applyPatches.bind(ir),ir.createDraft.bind(ir),ir.finishDraft.bind(ir);const v5=e=>(t,r,n)=>(n.setState=(i,o,...s)=>{const a=typeof i=="function"?m5(i):i;return t(a,o,...s)},e(n.setState,r,n)),Fr=n5()(v5((e,t)=>({account:void 0,accounts:[],chainId:void 0,setAccounts:r=>{e({accounts:r})},setAccount:r=>{e({account:r})},setChainId:r=>{e({chainId:r})},disconnect:()=>{e({account:void 0,accounts:[],chainId:void 0})}}))),y5=()=>{const e=Dr(),[t,r,n,i]=Fr(h=>[h.account,h.accounts,h.chainId,h.setAccount]),{request:o,data:s,error:a,loading:c}=Dn({topic:e==null?void 0:e.topic,chainId:n??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"aleo_getSelectedAccount",params:{type:"GET_SELECTED_ACCOUNT"}}});ec(({params:h,topic:d})=>{if(h.event.name==="accountSelected"&&e&&e.topic===d){const m=h.event.data,b=h.chainId.split(":")[0],_=h.chainId.split(":")[1];i({network:b,chainId:_,address:m})}}),He.useEffect(()=>{e&&!c&&o()},[e==null?void 0:e.topic]),He.useEffect(()=>{if(s){const h=s&&s.type==="GET_SELECTED_ACCOUNT_RES"?s:void 0,d=h==null?void 0:h.data.account;d&&i(d)}},[s]);const u=a?a.message:s&&s.type==="GET_SELECTED_ACCOUNT_REJ"?s.data.error:void 0;return{account:t,accounts:r,error:u,loading:c}},w5=()=>{const e=Dr(),[t,r]=Fr(d=>[d.chainId,d.account]),{request:n,data:i,error:o,loading:s}=Dn({topic:e==null?void 0:e.topic,chainId:t??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"aleo_getBalance",params:{type:"GET_BALANCE",data:{assetId:void 0}}}});ec(({_:d,params:p,topic:m})=>{p.event.name==="accountSynced"&&e&&e.topic===m&&!s&&n()});const a=!!e&&!!r;He.useEffect(()=>{a&&!s&&n()},[a,r]);const c=o?o.message:i&&i.type==="GET_BALANCE_REJ"?i.data.error:void 0,u=i&&i.type==="GET_BALANCE_RES"?i:void 0,h=u==null?void 0:u.data.balances;return{loading:s,balances:h,error:c}},b5=()=>{const e=Dr(),{connect:t,data:r,error:n,loading:i}=N3({requiredNamespaces:{aleo:{methods:rc,chains:es,events:ts}}});return{connect:async()=>{await t()},data:r,error:n,loading:i,session:e,isConnected:!!e}},_5=e=>{const t=Dr(),[r]=Fr(d=>[d.chainId]),{request:n,data:i,error:o,loading:s}=Dn({topic:(t==null?void 0:t.topic)??"",chainId:r??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"aleo_decrypt",params:{type:"DECRYPT",data:{transactionId:e}}}}),a=o?o.message:i&&i.type==="DECRYPT_REJ"?i.data.error:void 0,c=i&&i.type==="DECRYPT_RES"?i:void 0,u=c==null?void 0:c.data.transitions;return{decrypt:()=>{!e||!e.startsWith("at1")||e.length!==61||n()},transitions:u,loading:s,error:a}},E5=e=>{const t=Dr(),[r]=Fr(d=>[d.chainId]),{request:n,data:i,error:o,loading:s}=Dn({topic:(t==null?void 0:t.topic)??"",chainId:r??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"aleo_deployProgram",params:{type:"DEPLOY",data:{data:e}}}}),a=o?o.message:i&&i.type==="DEPLOY_REJ"?i.data.error:void 0,c=i&&i.type==="DEPLOY_RES"?i:void 0,u=c==null?void 0:c.data.transactionId;return{deploy:()=>{e&&n()},transactionId:u,loading:s,error:a}};var Cc={exports:{}},Ac,_d;function x5(){if(_d)return Ac;_d=1;var e=1e3,t=e*60,r=t*60,n=r*24,i=n*7,o=n*365.25;Ac=function(h,d){d=d||{};var p=typeof h;if(p==="string"&&h.length>0)return s(h);if(p==="number"&&isFinite(h))return d.long?c(h):a(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))};function s(h){if(h=String(h),!(h.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(d){var p=parseFloat(d[1]),m=(d[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return p*o;case"weeks":case"week":case"w":return p*i;case"days":case"day":case"d":return p*n;case"hours":case"hour":case"hrs":case"hr":case"h":return p*r;case"minutes":case"minute":case"mins":case"min":case"m":return p*t;case"seconds":case"second":case"secs":case"sec":case"s":return p*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function a(h){var d=Math.abs(h);return d>=n?Math.round(h/n)+"d":d>=r?Math.round(h/r)+"h":d>=t?Math.round(h/t)+"m":d>=e?Math.round(h/e)+"s":h+"ms"}function c(h){var d=Math.abs(h);return d>=n?u(h,d,n,"day"):d>=r?u(h,d,r,"hour"):d>=t?u(h,d,t,"minute"):d>=e?u(h,d,e,"second"):h+" ms"}function u(h,d,p,m){var b=d>=p*1.5;return Math.round(h/p)+" "+m+(b?"s":"")}return Ac}function S5(e){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=i,r.enabled=s,r.humanize=x5(),r.destroy=u,Object.keys(e).forEach(h=>{r[h]=e[h]}),r.names=[],r.skips=[],r.formatters={};function t(h){let d=0;for(let p=0;p<h.length;p++)d=(d<<5)-d+h.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=t;function r(h){let d,p=null,m,b;function _(...A){if(!_.enabled)return;const I=_,w=Number(new Date),E=w-(d||w);I.diff=E,I.prev=d,I.curr=w,d=w,A[0]=r.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let y=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(g,l)=>{if(g==="%%")return"%";y++;const v=r.formatters[l];if(typeof v=="function"){const M=A[y];g=v.call(I,M),A.splice(y,1),y--}return g}),r.formatArgs.call(I,A),(I.log||r.log).apply(I,A)}return _.namespace=h,_.useColors=r.useColors(),_.color=r.selectColor(h),_.extend=n,_.destroy=r.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(m!==r.namespaces&&(m=r.namespaces,b=r.enabled(h)),b),set:A=>{p=A}}),typeof r.init=="function"&&r.init(_),_}function n(h,d){const p=r(this.namespace+(typeof d>"u"?":":d)+h);return p.log=this.log,p}function i(h){r.save(h),r.namespaces=h,r.names=[],r.skips=[];let d;const p=(typeof h=="string"?h:"").split(/[\s,]+/),m=p.length;for(d=0;d<m;d++)p[d]&&(h=p[d].replace(/\*/g,".*?"),h[0]==="-"?r.skips.push(new RegExp("^"+h.slice(1)+"$")):r.names.push(new RegExp("^"+h+"$")))}function o(){const h=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),h}function s(h){if(h[h.length-1]==="*")return!0;let d,p;for(d=0,p=r.skips.length;d<p;d++)if(r.skips[d].test(h))return!1;for(d=0,p=r.names.length;d<p;d++)if(r.names[d].test(h))return!0;return!1}function a(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}function c(h){return h instanceof Error?h.stack||h.message:h}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var C5=S5;(function(e,t){t.formatArgs=n,t.save=i,t.load=o,t.useColors=r,t.storage=s(),t.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let h=0,d=0;c[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(h++,p==="%c"&&(d=h))}),c.splice(d,0,u)}t.log=console.debug||console.log||(()=>{});function i(c){try{c?t.storage.setItem("debug",c):t.storage.removeItem("debug")}catch{}}function o(){let c;try{c=t.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function s(){try{return localStorage}catch{}}e.exports=C5(t);const{formatters:a}=e.exports;a.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(Cc,Cc.exports);var A5=Cc.exports;const Dc=Co(A5)("wallet:sdk");Dc.enabled=!0;const D5=()=>{const e=Dr(),[t]=Fr(a=>[a.disconnect]),{disconnect:r,error:n,loading:i}=L3({topic:e==null?void 0:e.topic,reason:Et("USER_DISCONNECTED")}),o=async()=>{if(e){try{r()}catch{Dc("could not disconnect session entirely")}t()}},s=n?n.message:void 0;return{disconnect:o,error:s,loading:i}},O5=e=>{const t=Dr(),[r]=Fr(p=>[p.chainId]),{request:n,data:i,error:o,loading:s}=Dn({topic:(t==null?void 0:t.topic)??"",chainId:r??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"aleo_executeProgram",params:{type:"EXECUTE",data:{data:e}}}}),a=o?o.message:i&&i.type==="EXECUTE_REJ"?i.data.error:void 0,c=i&&i.type==="EXECUTE_RES"?i:void 0,u=c==null?void 0:c.data.transactionId,h=c==null?void 0:c.data.transitions;return{execute:()=>{e&&n()},transactionId:u,transitions:h,error:a,loading:s}},I5=()=>{const[e,t]=He.useState({loading:!0});return He.useEffect(()=>{},[]),{...e}};/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function Ed(e){return typeof e>"u"||e===null}function T5(e){return typeof e=="object"&&e!==null}function $5(e){return Array.isArray(e)?e:Ed(e)?[]:[e]}function R5(e,t){var r,n,i,o;if(t)for(o=Object.keys(t),r=0,n=o.length;r<n;r+=1)i=o[r],e[i]=t[i];return e}function P5(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function N5(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var L5=Ed,M5=T5,F5=$5,U5=P5,j5=N5,k5=R5,xt={isNothing:L5,isObject:M5,toArray:F5,repeat:U5,isNegativeZero:j5,extend:k5};function xd(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function Qi(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=xd(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Qi.prototype=Object.create(Error.prototype),Qi.prototype.constructor=Qi,Qi.prototype.toString=function(t){return this.name+": "+xd(this,t)};var Kt=Qi;function Oc(e,t,r,n,i){var o="",s="",a=Math.floor(i/2)-1;return n-t>a&&(o=" ... ",t=n-a+o.length),r-n>a&&(s=" ...",r=n+a-s.length),{str:o+e.slice(t,r).replace(/\t/g,"→")+s,pos:n-t+o.length}}function Ic(e,t){return xt.repeat(" ",t-e.length)+e}function B5(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(e.buffer);)i.push(o.index),n.push(o.index+o[0].length),e.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var a="",c,u,h=Math.min(e.line+t.linesAfter,i.length).toString().length,d=t.maxLength-(t.indent+h+3);for(c=1;c<=t.linesBefore&&!(s-c<0);c++)u=Oc(e.buffer,n[s-c],i[s-c],e.position-(n[s]-n[s-c]),d),a=xt.repeat(" ",t.indent)+Ic((e.line-c+1).toString(),h)+" | "+u.str+`
`+a;for(u=Oc(e.buffer,n[s],i[s],e.position,d),a+=xt.repeat(" ",t.indent)+Ic((e.line+1).toString(),h)+" | "+u.str+`
`,a+=xt.repeat("-",t.indent+h+3+u.pos)+`^
`,c=1;c<=t.linesAfter&&!(s+c>=i.length);c++)u=Oc(e.buffer,n[s+c],i[s+c],e.position-(n[s]-n[s+c]),d),a+=xt.repeat(" ",t.indent)+Ic((e.line+c+1).toString(),h)+" | "+u.str+`
`;return a.replace(/\n$/,"")}var z5=B5,W5=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],H5=["scalar","sequence","mapping"];function V5(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function q5(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(W5.indexOf(r)===-1)throw new Kt('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=V5(t.styleAliases||null),H5.indexOf(this.kind)===-1)throw new Kt('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Rt=q5;function Sd(e,t){var r=[];return e[t].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function K5(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function Tc(e){return this.extend(e)}Tc.prototype.extend=function(t){var r=[],n=[];if(t instanceof Rt)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new Kt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Rt))throw new Kt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Kt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Kt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Rt))throw new Kt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Tc.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Sd(i,"implicit"),i.compiledExplicit=Sd(i,"explicit"),i.compiledTypeMap=K5(i.compiledImplicit,i.compiledExplicit),i};var Cd=Tc,Ad=new Rt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Dd=new Rt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Od=new Rt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Id=new Cd({explicit:[Ad,Dd,Od]});function G5(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function Y5(){return null}function J5(e){return e===null}var Td=new Rt("tag:yaml.org,2002:null",{kind:"scalar",resolve:G5,construct:Y5,predicate:J5,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Z5(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function X5(e){return e==="true"||e==="True"||e==="TRUE"}function Q5(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var $d=new Rt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Z5,construct:X5,predicate:Q5,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function e_(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function t_(e){return 48<=e&&e<=55}function r_(e){return 48<=e&&e<=57}function n_(e){if(e===null)return!1;var t=e.length,r=0,n=!1,i;if(!t)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===t)return!0;if(i=e[++r],i==="b"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!e_(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!t_(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<t;r++)if(i=e[r],i!=="_"){if(!r_(e.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function i_(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function o_(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!xt.isNegativeZero(e)}var Rd=new Rt("tag:yaml.org,2002:int",{kind:"scalar",resolve:n_,construct:i_,predicate:o_,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),s_=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function a_(e){return!(e===null||!s_.test(e)||e[e.length-1]==="_")}function c_(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var l_=/^[-+]?[0-9]+e/;function u_(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(xt.isNegativeZero(e))return"-0.0";return r=e.toString(10),l_.test(r)?r.replace("e",".e"):r}function h_(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||xt.isNegativeZero(e))}var Pd=new Rt("tag:yaml.org,2002:float",{kind:"scalar",resolve:a_,construct:c_,predicate:h_,represent:u_,defaultStyle:"lowercase"}),Nd=Id.extend({implicit:[Td,$d,Rd,Pd]}),Ld=Nd,Md=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Fd=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function f_(e){return e===null?!1:Md.exec(e)!==null||Fd.exec(e)!==null}function d_(e){var t,r,n,i,o,s,a,c=0,u=null,h,d,p;if(t=Md.exec(e),t===null&&(t=Fd.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,n,i));if(o=+t[4],s=+t[5],a=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(h=+t[10],d=+(t[11]||0),u=(h*60+d)*6e4,t[9]==="-"&&(u=-u)),p=new Date(Date.UTC(r,n,i,o,s,a,c)),u&&p.setTime(p.getTime()-u),p}function p_(e){return e.toISOString()}var Ud=new Rt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:f_,construct:d_,instanceOf:Date,represent:p_});function g_(e){return e==="<<"||e===null}var jd=new Rt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:g_}),$c=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function m_(e){if(e===null)return!1;var t,r,n=0,i=e.length,o=$c;for(r=0;r<i;r++)if(t=o.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function v_(e){var t,r,n=e.replace(/[\r\n=]/g,""),i=n.length,o=$c,s=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|o.indexOf(n.charAt(t));return r=i%4*6,r===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):r===18?(a.push(s>>10&255),a.push(s>>2&255)):r===12&&a.push(s>>4&255),new Uint8Array(a)}function y_(e){var t="",r=0,n,i,o=e.length,s=$c;for(n=0;n<o;n++)n%3===0&&n&&(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]),r=(r<<8)+e[n];return i=o%3,i===0?(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]):i===2?(t+=s[r>>10&63],t+=s[r>>4&63],t+=s[r<<2&63],t+=s[64]):i===1&&(t+=s[r>>2&63],t+=s[r<<4&63],t+=s[64],t+=s[64]),t}function w_(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var kd=new Rt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:m_,construct:v_,predicate:w_,represent:y_}),b_=Object.prototype.hasOwnProperty,__=Object.prototype.toString;function E_(e){if(e===null)return!0;var t=[],r,n,i,o,s,a=e;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],s=!1,__.call(i)!=="[object Object]")return!1;for(o in i)if(b_.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(o)===-1)t.push(o);else return!1}return!0}function x_(e){return e!==null?e:[]}var Bd=new Rt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:E_,construct:x_}),S_=Object.prototype.toString;function C_(e){if(e===null)return!0;var t,r,n,i,o,s=e;for(o=new Array(s.length),t=0,r=s.length;t<r;t+=1){if(n=s[t],S_.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[t]=[i[0],n[i[0]]]}return!0}function A_(e){if(e===null)return[];var t,r,n,i,o,s=e;for(o=new Array(s.length),t=0,r=s.length;t<r;t+=1)n=s[t],i=Object.keys(n),o[t]=[i[0],n[i[0]]];return o}var zd=new Rt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:C_,construct:A_}),D_=Object.prototype.hasOwnProperty;function O_(e){if(e===null)return!0;var t,r=e;for(t in r)if(D_.call(r,t)&&r[t]!==null)return!1;return!0}function I_(e){return e!==null?e:{}}var Wd=new Rt("tag:yaml.org,2002:set",{kind:"mapping",resolve:O_,construct:I_}),Rc=Ld.extend({implicit:[Ud,jd],explicit:[kd,Bd,zd,Wd]}),Zr=Object.prototype.hasOwnProperty,ss=1,Hd=2,Vd=3,as=4,Pc=1,T_=2,qd=3,$_=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,R_=/[\x85\u2028\u2029]/,P_=/[,\[\]\{\}]/,Kd=/^(?:!|!!|![a-z\-]+!)$/i,Gd=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Yd(e){return Object.prototype.toString.call(e)}function Ir(e){return e===10||e===13}function Tn(e){return e===9||e===32}function Xt(e){return e===9||e===32||e===10||e===13}function ti(e){return e===44||e===91||e===93||e===123||e===125}function N_(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function L_(e){return e===120?2:e===117?4:e===85?8:0}function M_(e){return 48<=e&&e<=57?e-48:-1}function Jd(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}function F_(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}for(var Zd=new Array(256),Xd=new Array(256),ri=0;ri<256;ri++)Zd[ri]=Jd(ri)?1:0,Xd[ri]=Jd(ri);function U_(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Rc,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Qd(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=z5(r),new Kt(t,r)}function ne(e,t){throw Qd(e,t)}function cs(e,t){e.onWarning&&e.onWarning.call(null,Qd(e,t))}var e0={YAML:function(t,r,n){var i,o,s;t.version!==null&&ne(t,"duplication of %YAML directive"),n.length!==1&&ne(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&ne(t,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&ne(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=s<2,s!==1&&s!==2&&cs(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var i,o;n.length!==2&&ne(t,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],Kd.test(i)||ne(t,"ill-formed tag handle (first argument) of the TAG directive"),Zr.call(t.tagMap,i)&&ne(t,'there is a previously declared suffix for "'+i+'" tag handle'),Gd.test(o)||ne(t,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{ne(t,"tag prefix is malformed: "+o)}t.tagMap[i]=o}};function Xr(e,t,r,n){var i,o,s,a;if(t<r){if(a=e.input.slice(t,r),n)for(i=0,o=a.length;i<o;i+=1)s=a.charCodeAt(i),s===9||32<=s&&s<=1114111||ne(e,"expected valid JSON character");else $_.test(a)&&ne(e,"the stream contains non-printable characters");e.result+=a}}function t0(e,t,r,n){var i,o,s,a;for(xt.isObject(r)||ne(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,a=i.length;s<a;s+=1)o=i[s],Zr.call(t,o)||(t[o]=r[o],n[o]=!0)}function ni(e,t,r,n,i,o,s,a,c){var u,h;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,h=i.length;u<h;u+=1)Array.isArray(i[u])&&ne(e,"nested arrays are not supported inside keys"),typeof i=="object"&&Yd(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&Yd(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,h=o.length;u<h;u+=1)t0(e,t,o[u],r);else t0(e,t,o,r);else!e.json&&!Zr.call(r,i)&&Zr.call(t,i)&&(e.line=s||e.line,e.lineStart=a||e.lineStart,e.position=c||e.position,ne(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[i]=o,delete r[i];return t}function Nc(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):ne(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function vt(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Tn(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(Ir(i))for(Nc(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&cs(e,"deficient indentation"),n}function ls(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||Xt(r)))}function Lc(e,t){t===1?e.result+=" ":t>1&&(e.result+=xt.repeat(`
`,t-1))}function j_(e,t,r){var n,i,o,s,a,c,u,h,d=e.kind,p=e.result,m;if(m=e.input.charCodeAt(e.position),Xt(m)||ti(m)||m===35||m===38||m===42||m===33||m===124||m===62||m===39||m===34||m===37||m===64||m===96||(m===63||m===45)&&(i=e.input.charCodeAt(e.position+1),Xt(i)||r&&ti(i)))return!1;for(e.kind="scalar",e.result="",o=s=e.position,a=!1;m!==0;){if(m===58){if(i=e.input.charCodeAt(e.position+1),Xt(i)||r&&ti(i))break}else if(m===35){if(n=e.input.charCodeAt(e.position-1),Xt(n))break}else{if(e.position===e.lineStart&&ls(e)||r&&ti(m))break;if(Ir(m))if(c=e.line,u=e.lineStart,h=e.lineIndent,vt(e,!1,-1),e.lineIndent>=t){a=!0,m=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=c,e.lineStart=u,e.lineIndent=h;break}}a&&(Xr(e,o,s,!1),Lc(e,e.line-c),o=s=e.position,a=!1),Tn(m)||(s=e.position+1),m=e.input.charCodeAt(++e.position)}return Xr(e,o,s,!1),e.result?!0:(e.kind=d,e.result=p,!1)}function k_(e,t){var r,n,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(Xr(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,i=e.position;else return!0;else Ir(r)?(Xr(e,n,i,!0),Lc(e,vt(e,!1,t)),n=i=e.position):e.position===e.lineStart&&ls(e)?ne(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);ne(e,"unexpected end of the stream within a single quoted scalar")}function B_(e,t){var r,n,i,o,s,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return Xr(e,r,e.position,!0),e.position++,!0;if(a===92){if(Xr(e,r,e.position,!0),a=e.input.charCodeAt(++e.position),Ir(a))vt(e,!1,t);else if(a<256&&Zd[a])e.result+=Xd[a],e.position++;else if((s=L_(a))>0){for(i=s,o=0;i>0;i--)a=e.input.charCodeAt(++e.position),(s=N_(a))>=0?o=(o<<4)+s:ne(e,"expected hexadecimal character");e.result+=F_(o),e.position++}else ne(e,"unknown escape sequence");r=n=e.position}else Ir(a)?(Xr(e,r,n,!0),Lc(e,vt(e,!1,t)),r=n=e.position):e.position===e.lineStart&&ls(e)?ne(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}ne(e,"unexpected end of the stream within a double quoted scalar")}function z_(e,t){var r=!0,n,i,o,s=e.tag,a,c=e.anchor,u,h,d,p,m,b=Object.create(null),_,A,I,w;if(w=e.input.charCodeAt(e.position),w===91)h=93,m=!1,a=[];else if(w===123)h=125,m=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),w=e.input.charCodeAt(++e.position);w!==0;){if(vt(e,!0,t),w=e.input.charCodeAt(e.position),w===h)return e.position++,e.tag=s,e.anchor=c,e.kind=m?"mapping":"sequence",e.result=a,!0;r?w===44&&ne(e,"expected the node content, but found ','"):ne(e,"missed comma between flow collection entries"),A=_=I=null,d=p=!1,w===63&&(u=e.input.charCodeAt(e.position+1),Xt(u)&&(d=p=!0,e.position++,vt(e,!0,t))),n=e.line,i=e.lineStart,o=e.position,ii(e,t,ss,!1,!0),A=e.tag,_=e.result,vt(e,!0,t),w=e.input.charCodeAt(e.position),(p||e.line===n)&&w===58&&(d=!0,w=e.input.charCodeAt(++e.position),vt(e,!0,t),ii(e,t,ss,!1,!0),I=e.result),m?ni(e,a,b,A,_,I,n,i,o):d?a.push(ni(e,null,b,A,_,I,n,i,o)):a.push(_),vt(e,!0,t),w=e.input.charCodeAt(e.position),w===44?(r=!0,w=e.input.charCodeAt(++e.position)):r=!1}ne(e,"unexpected end of the stream within a flow collection")}function W_(e,t){var r,n,i=Pc,o=!1,s=!1,a=t,c=0,u=!1,h,d;if(d=e.input.charCodeAt(e.position),d===124)n=!1;else if(d===62)n=!0;else return!1;for(e.kind="scalar",e.result="";d!==0;)if(d=e.input.charCodeAt(++e.position),d===43||d===45)Pc===i?i=d===43?qd:T_:ne(e,"repeat of a chomping mode identifier");else if((h=M_(d))>=0)h===0?ne(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?ne(e,"repeat of an indentation width identifier"):(a=t+h-1,s=!0);else break;if(Tn(d)){do d=e.input.charCodeAt(++e.position);while(Tn(d));if(d===35)do d=e.input.charCodeAt(++e.position);while(!Ir(d)&&d!==0)}for(;d!==0;){for(Nc(e),e.lineIndent=0,d=e.input.charCodeAt(e.position);(!s||e.lineIndent<a)&&d===32;)e.lineIndent++,d=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>a&&(a=e.lineIndent),Ir(d)){c++;continue}if(e.lineIndent<a){i===qd?e.result+=xt.repeat(`
`,o?1+c:c):i===Pc&&o&&(e.result+=`
`);break}for(n?Tn(d)?(u=!0,e.result+=xt.repeat(`
`,o?1+c:c)):u?(u=!1,e.result+=xt.repeat(`
`,c+1)):c===0?o&&(e.result+=" "):e.result+=xt.repeat(`
`,c):e.result+=xt.repeat(`
`,o?1+c:c),o=!0,s=!0,c=0,r=e.position;!Ir(d)&&d!==0;)d=e.input.charCodeAt(++e.position);Xr(e,r,e.position,!1)}return!0}function r0(e,t){var r,n=e.tag,i=e.anchor,o=[],s,a=!1,c;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),c=e.input.charCodeAt(e.position);c!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,ne(e,"tab characters must not be used in indentation")),!(c!==45||(s=e.input.charCodeAt(e.position+1),!Xt(s))));){if(a=!0,e.position++,vt(e,!0,-1)&&e.lineIndent<=t){o.push(null),c=e.input.charCodeAt(e.position);continue}if(r=e.line,ii(e,t,Vd,!1,!0),o.push(e.result),vt(e,!0,-1),c=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&c!==0)ne(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=o,!0):!1}function H_(e,t,r){var n,i,o,s,a,c,u=e.tag,h=e.anchor,d={},p=Object.create(null),m=null,b=null,_=null,A=!1,I=!1,w;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=d),w=e.input.charCodeAt(e.position);w!==0;){if(!A&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,ne(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),o=e.line,(w===63||w===58)&&Xt(n))w===63?(A&&(ni(e,d,p,m,b,null,s,a,c),m=b=_=null),I=!0,A=!0,i=!0):A?(A=!1,i=!0):ne(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,w=n;else{if(s=e.line,a=e.lineStart,c=e.position,!ii(e,r,Hd,!1,!0))break;if(e.line===o){for(w=e.input.charCodeAt(e.position);Tn(w);)w=e.input.charCodeAt(++e.position);if(w===58)w=e.input.charCodeAt(++e.position),Xt(w)||ne(e,"a whitespace character is expected after the key-value separator within a block mapping"),A&&(ni(e,d,p,m,b,null,s,a,c),m=b=_=null),I=!0,A=!1,i=!1,m=e.tag,b=e.result;else if(I)ne(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=u,e.anchor=h,!0}else if(I)ne(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=u,e.anchor=h,!0}if((e.line===o||e.lineIndent>t)&&(A&&(s=e.line,a=e.lineStart,c=e.position),ii(e,t,as,!0,i)&&(A?b=e.result:_=e.result),A||(ni(e,d,p,m,b,_,s,a,c),m=b=_=null),vt(e,!0,-1),w=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&w!==0)ne(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return A&&ni(e,d,p,m,b,null,s,a,c),I&&(e.tag=u,e.anchor=h,e.kind="mapping",e.result=d),I}function V_(e){var t,r=!1,n=!1,i,o,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&ne(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(r=!0,s=e.input.charCodeAt(++e.position)):s===33?(n=!0,i="!!",s=e.input.charCodeAt(++e.position)):i="!",t=e.position,r){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(o=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):ne(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Xt(s);)s===33&&(n?ne(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),Kd.test(i)||ne(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);o=e.input.slice(t,e.position),P_.test(o)&&ne(e,"tag suffix cannot contain flow indicator characters")}o&&!Gd.test(o)&&ne(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{ne(e,"tag name is malformed: "+o)}return r?e.tag=o:Zr.call(e.tagMap,i)?e.tag=e.tagMap[i]+o:i==="!"?e.tag="!"+o:i==="!!"?e.tag="tag:yaml.org,2002:"+o:ne(e,'undeclared tag handle "'+i+'"'),!0}function q_(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&ne(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Xt(r)&&!ti(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&ne(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function K_(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Xt(n)&&!ti(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&ne(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),Zr.call(e.anchorMap,r)||ne(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],vt(e,!0,-1),!0}function ii(e,t,r,n,i){var o,s,a,c=1,u=!1,h=!1,d,p,m,b,_,A;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=s=a=as===r||Vd===r,n&&vt(e,!0,-1)&&(u=!0,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)),c===1)for(;V_(e)||q_(e);)vt(e,!0,-1)?(u=!0,a=o,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)):a=!1;if(a&&(a=u||i),(c===1||as===r)&&(ss===r||Hd===r?_=t:_=t+1,A=e.position-e.lineStart,c===1?a&&(r0(e,A)||H_(e,A,_))||z_(e,_)?h=!0:(s&&W_(e,_)||k_(e,_)||B_(e,_)?h=!0:K_(e)?(h=!0,(e.tag!==null||e.anchor!==null)&&ne(e,"alias node should not have any properties")):j_(e,_,ss===r)&&(h=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):c===0&&(h=a&&r0(e,A))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&ne(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),d=0,p=e.implicitTypes.length;d<p;d+=1)if(b=e.implicitTypes[d],b.resolve(e.result)){e.result=b.construct(e.result),e.tag=b.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Zr.call(e.typeMap[e.kind||"fallback"],e.tag))b=e.typeMap[e.kind||"fallback"][e.tag];else for(b=null,m=e.typeMap.multi[e.kind||"fallback"],d=0,p=m.length;d<p;d+=1)if(e.tag.slice(0,m[d].tag.length)===m[d].tag){b=m[d];break}b||ne(e,"unknown tag !<"+e.tag+">"),e.result!==null&&b.kind!==e.kind&&ne(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+b.kind+'", not "'+e.kind+'"'),b.resolve(e.result,e.tag)?(e.result=b.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):ne(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||h}function G_(e){var t=e.position,r,n,i,o=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(vt(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(o=!0,s=e.input.charCodeAt(++e.position),r=e.position;s!==0&&!Xt(s);)s=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),i=[],n.length<1&&ne(e,"directive name must not be less than one character in length");s!==0;){for(;Tn(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!Ir(s));break}if(Ir(s))break;for(r=e.position;s!==0&&!Xt(s);)s=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}s!==0&&Nc(e),Zr.call(e0,n)?e0[n](e,n,i):cs(e,'unknown document directive "'+n+'"')}if(vt(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,vt(e,!0,-1)):o&&ne(e,"directives end mark is expected"),ii(e,e.lineIndent-1,as,!1,!0),vt(e,!0,-1),e.checkLineBreaks&&R_.test(e.input.slice(t,e.position))&&cs(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&ls(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,vt(e,!0,-1));return}if(e.position<e.length-1)ne(e,"end of the stream or a document separator is expected");else return}function n0(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new U_(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,ne(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)G_(r);return r.documents}function Y_(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=n0(e,r);if(typeof t!="function")return n;for(var i=0,o=n.length;i<o;i+=1)t(n[i])}function J_(e,t){var r=n0(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new Kt("expected a single document in the stream, but found more")}}var Z_=Y_,X_=J_,i0={loadAll:Z_,load:X_},o0=Object.prototype.toString,s0=Object.prototype.hasOwnProperty,Mc=65279,Q_=9,eo=10,eE=13,tE=32,rE=33,nE=34,Fc=35,iE=37,oE=38,sE=39,aE=42,a0=44,cE=45,us=58,lE=61,uE=62,hE=63,fE=64,c0=91,l0=93,dE=96,u0=123,pE=124,h0=125,kt={};kt[0]="\\0",kt[7]="\\a",kt[8]="\\b",kt[9]="\\t",kt[10]="\\n",kt[11]="\\v",kt[12]="\\f",kt[13]="\\r",kt[27]="\\e",kt[34]='\\"',kt[92]="\\\\",kt[133]="\\N",kt[160]="\\_",kt[8232]="\\L",kt[8233]="\\P";var gE=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],mE=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function vE(e,t){var r,n,i,o,s,a,c;if(t===null)return{};for(r={},n=Object.keys(t),i=0,o=n.length;i<o;i+=1)s=n[i],a=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),c=e.compiledTypeMap.fallback[s],c&&s0.call(c.styleAliases,a)&&(a=c.styleAliases[a]),r[s]=a;return r}function yE(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new Kt("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+xt.repeat("0",n-t.length)+t}var wE=1,to=2;function bE(e){this.schema=e.schema||Rc,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=xt.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=vE(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?to:wE,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function f0(e,t){for(var r=xt.repeat(" ",t),n=0,i=-1,o="",s,a=e.length;n<a;)i=e.indexOf(`
`,n),i===-1?(s=e.slice(n),n=a):(s=e.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function Uc(e,t){return`
`+xt.repeat(" ",e.indent*t)}function _E(e,t){var r,n,i;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(i=e.implicitTypes[r],i.resolve(t))return!0;return!1}function hs(e){return e===tE||e===Q_}function ro(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Mc||65536<=e&&e<=1114111}function d0(e){return ro(e)&&e!==Mc&&e!==eE&&e!==eo}function p0(e,t,r){var n=d0(e),i=n&&!hs(e);return(r?n:n&&e!==a0&&e!==c0&&e!==l0&&e!==u0&&e!==h0)&&e!==Fc&&!(t===us&&!i)||d0(t)&&!hs(t)&&e===Fc||t===us&&i}function EE(e){return ro(e)&&e!==Mc&&!hs(e)&&e!==cE&&e!==hE&&e!==us&&e!==a0&&e!==c0&&e!==l0&&e!==u0&&e!==h0&&e!==Fc&&e!==oE&&e!==aE&&e!==rE&&e!==pE&&e!==lE&&e!==uE&&e!==sE&&e!==nE&&e!==iE&&e!==fE&&e!==dE}function xE(e){return!hs(e)&&e!==us}function no(e,t){var r=e.charCodeAt(t),n;return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function g0(e){var t=/^\n* /;return t.test(e)}var m0=1,jc=2,v0=3,y0=4,oi=5;function SE(e,t,r,n,i,o,s,a){var c,u=0,h=null,d=!1,p=!1,m=n!==-1,b=-1,_=EE(no(e,0))&&xE(no(e,e.length-1));if(t||s)for(c=0;c<e.length;u>=65536?c+=2:c++){if(u=no(e,c),!ro(u))return oi;_=_&&p0(u,h,a),h=u}else{for(c=0;c<e.length;u>=65536?c+=2:c++){if(u=no(e,c),u===eo)d=!0,m&&(p=p||c-b-1>n&&e[b+1]!==" ",b=c);else if(!ro(u))return oi;_=_&&p0(u,h,a),h=u}p=p||m&&c-b-1>n&&e[b+1]!==" "}return!d&&!p?_&&!s&&!i(e)?m0:o===to?oi:jc:r>9&&g0(e)?oi:s?o===to?oi:jc:p?y0:v0}function CE(e,t,r,n,i){e.dump=function(){if(t.length===0)return e.quotingType===to?'""':"''";if(!e.noCompatMode&&(gE.indexOf(t)!==-1||mE.test(t)))return e.quotingType===to?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,r),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),a=n||e.flowLevel>-1&&r>=e.flowLevel;function c(u){return _E(e,u)}switch(SE(t,a,e.indent,s,c,e.quotingType,e.forceQuotes&&!n,i)){case m0:return t;case jc:return"'"+t.replace(/'/g,"''")+"'";case v0:return"|"+w0(t,e.indent)+b0(f0(t,o));case y0:return">"+w0(t,e.indent)+b0(f0(AE(t,s),o));case oi:return'"'+DE(t)+'"';default:throw new Kt("impossible error: invalid scalar style")}}()}function w0(e,t){var r=g0(e)?String(t):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),o=i?"+":n?"":"-";return r+o+`
`}function b0(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function AE(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=e.indexOf(`
`);return u=u!==-1?u:e.length,r.lastIndex=u,_0(e.slice(0,u),t)}(),i=e[0]===`
`||e[0]===" ",o,s;s=r.exec(e);){var a=s[1],c=s[2];o=c[0]===" ",n+=a+(!i&&!o&&c!==""?`
`:"")+_0(c,t),i=o}return n}function _0(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,i=0,o,s=0,a=0,c="";n=r.exec(e);)a=n.index,a-i>t&&(o=s>i?s:a,c+=`
`+e.slice(i,o),i=o+1),s=a;return c+=`
`,e.length-i>t&&s>i?c+=e.slice(i,s)+`
`+e.slice(s+1):c+=e.slice(i),c.slice(1)}function DE(e){for(var t="",r=0,n,i=0;i<e.length;r>=65536?i+=2:i++)r=no(e,i),n=kt[r],!n&&ro(r)?(t+=e[i],r>=65536&&(t+=e[i+1])):t+=n||yE(r);return t}function OE(e,t,r){var n="",i=e.tag,o,s,a;for(o=0,s=r.length;o<s;o+=1)a=r[o],e.replacer&&(a=e.replacer.call(r,String(o),a)),(Ur(e,t,a,!1,!1)||typeof a>"u"&&Ur(e,t,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function E0(e,t,r,n){var i="",o=e.tag,s,a,c;for(s=0,a=r.length;s<a;s+=1)c=r[s],e.replacer&&(c=e.replacer.call(r,String(s),c)),(Ur(e,t+1,c,!0,!0,!1,!0)||typeof c>"u"&&Ur(e,t+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=Uc(e,t)),e.dump&&eo===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=o,e.dump=i||"[]"}function IE(e,t,r){var n="",i=e.tag,o=Object.keys(r),s,a,c,u,h;for(s=0,a=o.length;s<a;s+=1)h="",n!==""&&(h+=", "),e.condenseFlow&&(h+='"'),c=o[s],u=r[c],e.replacer&&(u=e.replacer.call(r,c,u)),Ur(e,t,c,!1,!1)&&(e.dump.length>1024&&(h+="? "),h+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Ur(e,t,u,!1,!1)&&(h+=e.dump,n+=h));e.tag=i,e.dump="{"+n+"}"}function TE(e,t,r,n){var i="",o=e.tag,s=Object.keys(r),a,c,u,h,d,p;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new Kt("sortKeys must be a boolean or a function");for(a=0,c=s.length;a<c;a+=1)p="",(!n||i!=="")&&(p+=Uc(e,t)),u=s[a],h=r[u],e.replacer&&(h=e.replacer.call(r,u,h)),Ur(e,t+1,u,!0,!0,!0)&&(d=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,d&&(e.dump&&eo===e.dump.charCodeAt(0)?p+="?":p+="? "),p+=e.dump,d&&(p+=Uc(e,t)),Ur(e,t+1,h,!0,d)&&(e.dump&&eo===e.dump.charCodeAt(0)?p+=":":p+=": ",p+=e.dump,i+=p));e.tag=o,e.dump=i||"{}"}function x0(e,t,r){var n,i,o,s,a,c;for(i=r?e.explicitTypes:e.implicitTypes,o=0,s=i.length;o<s;o+=1)if(a=i[o],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(r?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(c=e.styleMap[a.tag]||a.defaultStyle,o0.call(a.represent)==="[object Function]")n=a.represent(t,c);else if(s0.call(a.represent,c))n=a.represent[c](t,c);else throw new Kt("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');e.dump=n}return!0}return!1}function Ur(e,t,r,n,i,o,s){e.tag=null,e.dump=r,x0(e,r,!1)||x0(e,r,!0);var a=o0.call(e.dump),c=n,u;n&&(n=e.flowLevel<0||e.flowLevel>t);var h=a==="[object Object]"||a==="[object Array]",d,p;if(h&&(d=e.duplicates.indexOf(r),p=d!==-1),(e.tag!==null&&e.tag!=="?"||p||e.indent!==2&&t>0)&&(i=!1),p&&e.usedDuplicates[d])e.dump="*ref_"+d;else{if(h&&p&&!e.usedDuplicates[d]&&(e.usedDuplicates[d]=!0),a==="[object Object]")n&&Object.keys(e.dump).length!==0?(TE(e,t,e.dump,i),p&&(e.dump="&ref_"+d+e.dump)):(IE(e,t,e.dump),p&&(e.dump="&ref_"+d+" "+e.dump));else if(a==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!s&&t>0?E0(e,t-1,e.dump,i):E0(e,t,e.dump,i),p&&(e.dump="&ref_"+d+e.dump)):(OE(e,t,e.dump),p&&(e.dump="&ref_"+d+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&CE(e,e.dump,t,o,c);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Kt("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(u=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",e.dump=u+" "+e.dump)}return!0}function $E(e,t){var r=[],n=[],i,o;for(kc(e,r,n),i=0,o=n.length;i<o;i+=1)t.duplicates.push(r[n[i]]);t.usedDuplicates=new Array(o)}function kc(e,t,r){var n,i,o;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)kc(e[i],t,r);else for(n=Object.keys(e),i=0,o=n.length;i<o;i+=1)kc(e[n[i]],t,r)}function RE(e,t){t=t||{};var r=new bE(t);r.noRefs||$E(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Ur(r,0,n,!0,!0)?r.dump+`
`:""}var PE=RE,NE={dump:PE};function Bc(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var LE=Rt,ME=Cd,FE=Id,UE=Nd,jE=Ld,kE=Rc,BE=i0.load,zE=i0.loadAll,WE=NE.dump,HE=Kt,VE={binary:kd,float:Pd,map:Od,null:Td,pairs:zd,set:Wd,timestamp:Ud,bool:$d,int:Rd,merge:jd,omap:Bd,seq:Dd,str:Ad},qE=Bc("safeLoad","load"),KE=Bc("safeLoadAll","loadAll"),GE=Bc("safeDump","dump"),YE={Type:LE,Schema:ME,FAILSAFE_SCHEMA:FE,JSON_SCHEMA:UE,CORE_SCHEMA:jE,DEFAULT_SCHEMA:kE,load:BE,loadAll:zE,dump:WE,YAMLException:HE,types:VE,safeLoad:qE,safeLoadAll:KE,safeDump:GE};const JE=50,ZE=({filter:e,page:t,formatted:r})=>{const n=Dr(),[i,o]=Fr(A=>[A.chainId,A.account]);(e==null?void 0:e.program_id)===""&&(e.program_id=void 0);const{request:s,data:a,error:c,loading:u}=Dn({topic:n==null?void 0:n.topic,chainId:i??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"aleo_getRecords",params:{type:"GET_RECORDS",filter:e,page:t,formatted:r}}});ec(({id:A,params:I,topic:w})=>{I.event.name==="accountSynced"&&n&&n.topic===w&&!u&&s()});const h=!!n&&!!o;He.useEffect(()=>{h&&!u&&s()},[h,o]);const d=()=>{!!n&&!!o&&!u&&s()},p=c?c.message:a&&a.type==="GET_RECORDS_REJ"?a.data.error:void 0,m=a&&a.type==="GET_RECORDS_RES"?a:void 0,b=m==null?void 0:m.data.records,_=(m==null?void 0:m.data.totalRecordCount)??0;return b&&b.forEach(A=>{console.log(A);const I=YE.load(A.plaintext);console.log(I)}),{request:d,records:b,error:p,loading:u,totalRecordCount:_}},XE=e=>{const t=Dr(),[r]=Fr(a=>[a.chainId]),{request:n,data:i,error:o,loading:s}=Dn({topic:(t==null?void 0:t.topic)??"",chainId:r??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"aleo_transfer",params:e}});return{transfer:n,data:i,error:o,loading:s}},S0=()=>{const e=Dr(),[t,r,n]=Fr(i=>[i.setAccount,i.setAccounts,i.disconnect]);He.useEffect(()=>{if(e){window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE");const i=e.namespaces.aleo.accounts.map(o=>{const s=o.split(":");return{network:s[0],chainId:s[1],address:s[2]}});r(i??[]),i[0]&&t(i[0])}},[e==null?void 0:e.topic]),Zf(({id:i,topic:o})=>{Dc("session deleted! topic: ",o),n()})};function C0(e,t,r=t){const n=e<BigInt(0),i=e.toString().slice(n?1:0).padStart(t+1,"0"),o=i.slice(0,i.length-t),s=i.slice(-t);let a=s.length-1;for(;s[a]==="0";)--a;const c=s.slice(0,a+1);return(n?"-":"")+(c?`${o}.${c.slice(0,r)}`:o)}function QE(e,t){const[r,n]=e.split("."),i=(n||"").replace(/0+$/,"").slice(0,t),o=BigInt(10)**BigInt(t),s=o/BigInt(10)**BigInt(i.length||0);return BigInt(i||0)*s+BigInt(r||0)*o}var A0=(e=>(e[e.ETH=0]="ETH",e[e.DAI=1]="DAI",e))(A0||{});function e6(e){switch(e){case 0:return{id:0,symbol:"ETH",coinMarketCapID:"1027"};case 1:return{id:1,symbol:"DAI",coinMarketCapID:"4943"}}}class t6{constructor(t,r){this.getDisplayValue=()=>C0(this.value,18)+" "+this.symbol,this.type=t;const{id:n,symbol:i,coinMarketCapID:o}=e6(t);this.id=n,this.symbol=i,this.coinMarketCapID=o,this.value=r}}const r6="0x6b175474e89094c44da98b954eedeac495271d0f",n6=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,type:"function"}];/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fs=window,zc=fs.ShadowRoot&&(fs.ShadyCSS===void 0||fs.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Wc=Symbol(),D0=new WeakMap;let O0=class{constructor(t,r,n){if(this._$cssResult$=!0,n!==Wc)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=r}get styleSheet(){let t=this.o;const r=this.t;if(zc&&t===void 0){const n=r!==void 0&&r.length===1;n&&(t=D0.get(r)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),n&&D0.set(r,t))}return t}toString(){return this.cssText}};const i6=e=>new O0(typeof e=="string"?e:e+"",void 0,Wc),ze=(e,...t)=>{const r=e.length===1?e[0]:t.reduce((n,i,o)=>n+(s=>{if(s._$cssResult$===!0)return s.cssText;if(typeof s=="number")return s;throw Error("Value passed to 'css' function must be a 'css' function result: "+s+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+e[o+1],e[0]);return new O0(r,e,Wc)},o6=(e,t)=>{zc?e.adoptedStyleSheets=t.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet):t.forEach(r=>{const n=document.createElement("style"),i=fs.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,e.appendChild(n)})},I0=zc?e=>e:e=>e instanceof CSSStyleSheet?(t=>{let r="";for(const n of t.cssRules)r+=n.cssText;return i6(r)})(e):e;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Hc;const ds=window,T0=ds.trustedTypes,s6=T0?T0.emptyScript:"",$0=ds.reactiveElementPolyfillSupport,Vc={toAttribute(e,t){switch(t){case Boolean:e=e?s6:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=e!==null;break;case Number:r=e===null?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch{r=null}}return r}},R0=(e,t)=>t!==e&&(t==t||e==e),qc={attribute:!0,type:String,converter:Vc,reflect:!1,hasChanged:R0},Kc="finalized";let si=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t){var r;this.finalize(),((r=this.h)!==null&&r!==void 0?r:this.h=[]).push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach((r,n)=>{const i=this._$Ep(n,r);i!==void 0&&(this._$Ev.set(i,n),t.push(i))}),t}static createProperty(t,r=qc){if(r.state&&(r.attribute=!1),this.finalize(),this.elementProperties.set(t,r),!r.noAccessor&&!this.prototype.hasOwnProperty(t)){const n=typeof t=="symbol"?Symbol():"__"+t,i=this.getPropertyDescriptor(t,n,r);i!==void 0&&Object.defineProperty(this.prototype,t,i)}}static getPropertyDescriptor(t,r,n){return{get(){return this[r]},set(i){const o=this[t];this[r]=i,this.requestUpdate(t,o,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||qc}static finalize(){if(this.hasOwnProperty(Kc))return!1;this[Kc]=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),t.h!==void 0&&(this.h=[...t.h]),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const r=this.properties,n=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(const i of n)this.createProperty(i,r[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const r=[];if(Array.isArray(t)){const n=new Set(t.flat(1/0).reverse());for(const i of n)r.unshift(I0(i))}else t!==void 0&&r.push(I0(t));return r}static _$Ep(t,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof t=="string"?t.toLowerCase():void 0}u(){var t;this._$E_=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(t=this.constructor.h)===null||t===void 0||t.forEach(r=>r(this))}addController(t){var r,n;((r=this._$ES)!==null&&r!==void 0?r:this._$ES=[]).push(t),this.renderRoot!==void 0&&this.isConnected&&((n=t.hostConnected)===null||n===void 0||n.call(t))}removeController(t){var r;(r=this._$ES)===null||r===void 0||r.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((t,r)=>{this.hasOwnProperty(r)&&(this._$Ei.set(r,this[r]),delete this[r])})}createRenderRoot(){var t;const r=(t=this.shadowRoot)!==null&&t!==void 0?t:this.attachShadow(this.constructor.shadowRootOptions);return o6(r,this.constructor.elementStyles),r}connectedCallback(){var t;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$ES)===null||t===void 0||t.forEach(r=>{var n;return(n=r.hostConnected)===null||n===void 0?void 0:n.call(r)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$ES)===null||t===void 0||t.forEach(r=>{var n;return(n=r.hostDisconnected)===null||n===void 0?void 0:n.call(r)})}attributeChangedCallback(t,r,n){this._$AK(t,n)}_$EO(t,r,n=qc){var i;const o=this.constructor._$Ep(t,n);if(o!==void 0&&n.reflect===!0){const s=(((i=n.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?n.converter:Vc).toAttribute(r,n.type);this._$El=t,s==null?this.removeAttribute(o):this.setAttribute(o,s),this._$El=null}}_$AK(t,r){var n;const i=this.constructor,o=i._$Ev.get(t);if(o!==void 0&&this._$El!==o){const s=i.getPropertyOptions(o),a=typeof s.converter=="function"?{fromAttribute:s.converter}:((n=s.converter)===null||n===void 0?void 0:n.fromAttribute)!==void 0?s.converter:Vc;this._$El=o,this[o]=a.fromAttribute(r,s.type),this._$El=null}}requestUpdate(t,r,n){let i=!0;t!==void 0&&(((n=n||this.constructor.getPropertyOptions(t)).hasChanged||R0)(this[t],r)?(this._$AL.has(t)||this._$AL.set(t,r),n.reflect===!0&&this._$El!==t&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(t,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(r){Promise.reject(r)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,o)=>this[o]=i),this._$Ei=void 0);let r=!1;const n=this._$AL;try{r=this.shouldUpdate(n),r?(this.willUpdate(n),(t=this._$ES)===null||t===void 0||t.forEach(i=>{var o;return(o=i.hostUpdate)===null||o===void 0?void 0:o.call(i)}),this.update(n)):this._$Ek()}catch(i){throw r=!1,this._$Ek(),i}r&&this._$AE(n)}willUpdate(t){}_$AE(t){var r;(r=this._$ES)===null||r===void 0||r.forEach(n=>{var i;return(i=n.hostUpdated)===null||i===void 0?void 0:i.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){this._$EC!==void 0&&(this._$EC.forEach((r,n)=>this._$EO(n,this[n],r)),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}};si[Kc]=!0,si.elementProperties=new Map,si.elementStyles=[],si.shadowRootOptions={mode:"open"},$0==null||$0({ReactiveElement:si}),((Hc=ds.reactiveElementVersions)!==null&&Hc!==void 0?Hc:ds.reactiveElementVersions=[]).push("1.6.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Gc;const ps=window,ai=ps.trustedTypes,P0=ai?ai.createPolicy("lit-html",{createHTML:e=>e}):void 0,Yc="$lit$",Qr=`lit$${(Math.random()+"").slice(9)}$`,N0="?"+Qr,a6=`<${N0}>`,$n=document,io=()=>$n.createComment(""),oo=e=>e===null||typeof e!="object"&&typeof e!="function",L0=Array.isArray,c6=e=>L0(e)||typeof(e==null?void 0:e[Symbol.iterator])=="function",Jc=`[ 	
\f\r]`,so=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,M0=/-->/g,F0=/>/g,Rn=RegExp(`>|${Jc}(?:([^\\s"'>=/]+)(${Jc}*=${Jc}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),U0=/'/g,j0=/"/g,k0=/^(?:script|style|textarea|title)$/i,B0=e=>(t,...r)=>({_$litType$:e,strings:t,values:r}),J=B0(1),st=B0(2),Pn=Symbol.for("lit-noChange"),St=Symbol.for("lit-nothing"),z0=new WeakMap,Nn=$n.createTreeWalker($n,129,null,!1);function W0(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return P0!==void 0?P0.createHTML(t):t}const l6=(e,t)=>{const r=e.length-1,n=[];let i,o=t===2?"<svg>":"",s=so;for(let a=0;a<r;a++){const c=e[a];let u,h,d=-1,p=0;for(;p<c.length&&(s.lastIndex=p,h=s.exec(c),h!==null);)p=s.lastIndex,s===so?h[1]==="!--"?s=M0:h[1]!==void 0?s=F0:h[2]!==void 0?(k0.test(h[2])&&(i=RegExp("</"+h[2],"g")),s=Rn):h[3]!==void 0&&(s=Rn):s===Rn?h[0]===">"?(s=i??so,d=-1):h[1]===void 0?d=-2:(d=s.lastIndex-h[2].length,u=h[1],s=h[3]===void 0?Rn:h[3]==='"'?j0:U0):s===j0||s===U0?s=Rn:s===M0||s===F0?s=so:(s=Rn,i=void 0);const m=s===Rn&&e[a+1].startsWith("/>")?" ":"";o+=s===so?c+a6:d>=0?(n.push(u),c.slice(0,d)+Yc+c.slice(d)+Qr+m):c+Qr+(d===-2?(n.push(void 0),a):m)}return[W0(e,o+(e[r]||"<?>")+(t===2?"</svg>":"")),n]};class ao{constructor({strings:t,_$litType$:r},n){let i;this.parts=[];let o=0,s=0;const a=t.length-1,c=this.parts,[u,h]=l6(t,r);if(this.el=ao.createElement(u,n),Nn.currentNode=this.el.content,r===2){const d=this.el.content,p=d.firstChild;p.remove(),d.append(...p.childNodes)}for(;(i=Nn.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes()){const d=[];for(const p of i.getAttributeNames())if(p.endsWith(Yc)||p.startsWith(Qr)){const m=h[s++];if(d.push(p),m!==void 0){const b=i.getAttribute(m.toLowerCase()+Yc).split(Qr),_=/([.?@])?(.*)/.exec(m);c.push({type:1,index:o,name:_[2],strings:b,ctor:_[1]==="."?h6:_[1]==="?"?d6:_[1]==="@"?p6:gs})}else c.push({type:6,index:o})}for(const p of d)i.removeAttribute(p)}if(k0.test(i.tagName)){const d=i.textContent.split(Qr),p=d.length-1;if(p>0){i.textContent=ai?ai.emptyScript:"";for(let m=0;m<p;m++)i.append(d[m],io()),Nn.nextNode(),c.push({type:2,index:++o});i.append(d[p],io())}}}else if(i.nodeType===8)if(i.data===N0)c.push({type:2,index:o});else{let d=-1;for(;(d=i.data.indexOf(Qr,d+1))!==-1;)c.push({type:7,index:o}),d+=Qr.length-1}o++}}static createElement(t,r){const n=$n.createElement("template");return n.innerHTML=t,n}}function ci(e,t,r=e,n){var i,o,s,a;if(t===Pn)return t;let c=n!==void 0?(i=r._$Co)===null||i===void 0?void 0:i[n]:r._$Cl;const u=oo(t)?void 0:t._$litDirective$;return(c==null?void 0:c.constructor)!==u&&((o=c==null?void 0:c._$AO)===null||o===void 0||o.call(c,!1),u===void 0?c=void 0:(c=new u(e),c._$AT(e,r,n)),n!==void 0?((s=(a=r)._$Co)!==null&&s!==void 0?s:a._$Co=[])[n]=c:r._$Cl=c),c!==void 0&&(t=ci(e,c._$AS(e,t.values),c,n)),t}class u6{constructor(t,r){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var r;const{el:{content:n},parts:i}=this._$AD,o=((r=t==null?void 0:t.creationScope)!==null&&r!==void 0?r:$n).importNode(n,!0);Nn.currentNode=o;let s=Nn.nextNode(),a=0,c=0,u=i[0];for(;u!==void 0;){if(a===u.index){let h;u.type===2?h=new co(s,s.nextSibling,this,t):u.type===1?h=new u.ctor(s,u.name,u.strings,this,t):u.type===6&&(h=new g6(s,this,t)),this._$AV.push(h),u=i[++c]}a!==(u==null?void 0:u.index)&&(s=Nn.nextNode(),a++)}return Nn.currentNode=$n,o}v(t){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(t,n,r),r+=n.strings.length-2):n._$AI(t[r])),r++}}class co{constructor(t,r,n,i){var o;this.type=2,this._$AH=St,this._$AN=void 0,this._$AA=t,this._$AB=r,this._$AM=n,this.options=i,this._$Cp=(o=i==null?void 0:i.isConnected)===null||o===void 0||o}get _$AU(){var t,r;return(r=(t=this._$AM)===null||t===void 0?void 0:t._$AU)!==null&&r!==void 0?r:this._$Cp}get parentNode(){let t=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=r.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,r=this){t=ci(this,t,r),oo(t)?t===St||t==null||t===""?(this._$AH!==St&&this._$AR(),this._$AH=St):t!==this._$AH&&t!==Pn&&this._(t):t._$litType$!==void 0?this.g(t):t.nodeType!==void 0?this.$(t):c6(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==St&&oo(this._$AH)?this._$AA.nextSibling.data=t:this.$($n.createTextNode(t)),this._$AH=t}g(t){var r;const{values:n,_$litType$:i}=t,o=typeof i=="number"?this._$AC(t):(i.el===void 0&&(i.el=ao.createElement(W0(i.h,i.h[0]),this.options)),i);if(((r=this._$AH)===null||r===void 0?void 0:r._$AD)===o)this._$AH.v(n);else{const s=new u6(o,this),a=s.u(this.options);s.v(n),this.$(a),this._$AH=s}}_$AC(t){let r=z0.get(t.strings);return r===void 0&&z0.set(t.strings,r=new ao(t)),r}T(t){L0(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const o of t)i===r.length?r.push(n=new co(this.k(io()),this.k(io()),this,this.options)):n=r[i],n._$AI(o),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(t=this._$AA.nextSibling,r){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,r);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var r;this._$AM===void 0&&(this._$Cp=t,(r=this._$AP)===null||r===void 0||r.call(this,t))}}class gs{constructor(t,r,n,i,o){this.type=1,this._$AH=St,this._$AN=void 0,this.element=t,this.name=r,this._$AM=i,this.options=o,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=St}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,r=this,n,i){const o=this.strings;let s=!1;if(o===void 0)t=ci(this,t,r,0),s=!oo(t)||t!==this._$AH&&t!==Pn,s&&(this._$AH=t);else{const a=t;let c,u;for(t=o[0],c=0;c<o.length-1;c++)u=ci(this,a[n+c],r,c),u===Pn&&(u=this._$AH[c]),s||(s=!oo(u)||u!==this._$AH[c]),u===St?t=St:t!==St&&(t+=(u??"")+o[c+1]),this._$AH[c]=u}s&&!i&&this.j(t)}j(t){t===St?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class h6 extends gs{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===St?void 0:t}}const f6=ai?ai.emptyScript:"";let d6=class extends gs{constructor(){super(...arguments),this.type=4}j(t){t&&t!==St?this.element.setAttribute(this.name,f6):this.element.removeAttribute(this.name)}};class p6 extends gs{constructor(t,r,n,i,o){super(t,r,n,i,o),this.type=5}_$AI(t,r=this){var n;if((t=(n=ci(this,t,r,0))!==null&&n!==void 0?n:St)===Pn)return;const i=this._$AH,o=t===St&&i!==St||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,s=t!==St&&(i===St||o);o&&this.element.removeEventListener(this.name,this,i),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var r,n;typeof this._$AH=="function"?this._$AH.call((n=(r=this.options)===null||r===void 0?void 0:r.host)!==null&&n!==void 0?n:this.element,t):this._$AH.handleEvent(t)}}let g6=class{constructor(t,r,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){ci(this,t)}};const H0=ps.litHtmlPolyfillSupport;H0==null||H0(ao,co),((Gc=ps.litHtmlVersions)!==null&&Gc!==void 0?Gc:ps.litHtmlVersions=[]).push("2.7.5");const m6=(e,t,r)=>{var n,i;const o=(n=r==null?void 0:r.renderBefore)!==null&&n!==void 0?n:t;let s=o._$litPart$;if(s===void 0){const a=(i=r==null?void 0:r.renderBefore)!==null&&i!==void 0?i:null;o._$litPart$=s=new co(t.insertBefore(io(),a),a,void 0,r??{})}return s._$AI(e),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Zc,Xc;class Ee extends si{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,r;const n=super.createRenderRoot();return(t=(r=this.renderOptions).renderBefore)!==null&&t!==void 0||(r.renderBefore=n.firstChild),n}update(t){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=m6(r,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)===null||t===void 0||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)===null||t===void 0||t.setConnected(!1)}render(){return Pn}}Ee.finalized=!0,Ee._$litElement$=!0,(Zc=globalThis.litElementHydrateSupport)===null||Zc===void 0||Zc.call(globalThis,{LitElement:Ee});const V0=globalThis.litElementPolyfillSupport;V0==null||V0({LitElement:Ee}),((Xc=globalThis.litElementVersions)!==null&&Xc!==void 0?Xc:globalThis.litElementVersions=[]).push("3.3.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ne=e=>t=>typeof t=="function"?((r,n)=>(customElements.define(r,n),n))(e,t):((r,n)=>{const{kind:i,elements:o}=n;return{kind:i,elements:o,finisher(s){customElements.define(r,s)}}})(e,t);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const v6=(e,t)=>t.kind==="method"&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(r){r.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){typeof t.initializer=="function"&&(this[t.key]=t.initializer.call(this))},finisher(r){r.createProperty(t.key,e)}},y6=(e,t,r)=>{t.constructor.createProperty(r,e)};function ge(e){return(t,r)=>r!==void 0?y6(e,t,r):v6(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Qt(e){return ge({...e,state:!0})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Qc;((Qc=window.HTMLSlotElement)===null||Qc===void 0?void 0:Qc.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const w6={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},b6=e=>(...t)=>({_$litDirective$:e,values:t});class _6{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,r,n){this._$Ct=t,this._$AM=r,this._$Ci=n}_$AS(t,r){return this.update(t,r)}update(t,r){return this.render(...r)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const jr=b6(class extends _6{constructor(e){var t;if(super(e),e.type!==w6.ATTRIBUTE||e.name!=="class"||((t=e.strings)===null||t===void 0?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter(t=>e[t]).join(" ")+" "}update(e,[t]){var r,n;if(this.it===void 0){this.it=new Set,e.strings!==void 0&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter(o=>o!=="")));for(const o in t)t[o]&&!(!((r=this.nt)===null||r===void 0)&&r.has(o))&&this.it.add(o);return this.render(t)}const i=e.element.classList;this.it.forEach(o=>{o in t||(i.remove(o),this.it.delete(o))});for(const o in t){const s=!!t[o];s===this.it.has(o)||!((n=this.nt)===null||n===void 0)&&n.has(o)||(s?(i.add(o),this.it.add(o)):(i.remove(o),this.it.delete(o)))}return Pn}});function E6(e,t){e.indexOf(t)===-1&&e.push(t)}const q0=(e,t,r)=>Math.min(Math.max(r,e),t),fr={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},ms=e=>typeof e=="number",li=e=>Array.isArray(e)&&!ms(e[0]),x6=(e,t,r)=>{const n=t-e;return((r-e)%n+n)%n+e};function S6(e,t){return li(e)?e[x6(0,e.length,t)]:e}const K0=(e,t,r)=>-r*e+r*t+e,G0=()=>{},en=e=>e,el=(e,t,r)=>t-e===0?1:(r-e)/(t-e);function Y0(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const i=el(0,t,n);e.push(K0(r,1,i))}}function C6(e){const t=[0];return Y0(t,e-1),t}function A6(e,t=C6(e.length),r=en){const n=e.length,i=n-t.length;return i>0&&Y0(t,i),o=>{let s=0;for(;s<n-2&&!(o<t[s+1]);s++);let a=q0(0,1,el(t[s],t[s+1],o));return a=S6(r,s)(a),K0(e[s],e[s+1],a)}}const J0=e=>Array.isArray(e)&&ms(e[0]),tl=e=>typeof e=="object"&&!!e.createAnimation,ui=e=>typeof e=="function",D6=e=>typeof e=="string",lo={ms:e=>e*1e3,s:e=>e/1e3},Z0=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,O6=1e-7,I6=12;function T6(e,t,r,n,i){let o,s,a=0;do s=t+(r-t)/2,o=Z0(s,n,i)-e,o>0?r=s:t=s;while(Math.abs(o)>O6&&++a<I6);return s}function uo(e,t,r,n){if(e===t&&r===n)return en;const i=o=>T6(o,0,1,e,r);return o=>o===0||o===1?o:Z0(i(o),t,n)}const $6=(e,t="end")=>r=>{r=t==="end"?Math.min(r,.999):Math.max(r,.001);const n=r*e,i=t==="end"?Math.floor(n):Math.ceil(n);return q0(0,1,i/e)},X0={ease:uo(.25,.1,.25,1),"ease-in":uo(.42,0,1,1),"ease-in-out":uo(.42,0,.58,1),"ease-out":uo(0,0,.58,1)},R6=/\((.*?)\)/;function Q0(e){if(ui(e))return e;if(J0(e))return uo(...e);if(X0[e])return X0[e];if(e.startsWith("steps")){const t=R6.exec(e);if(t){const r=t[1].split(",");return $6(parseFloat(r[0]),r[1].trim())}}return en}class ep{constructor(t,r=[0,1],{easing:n,duration:i=fr.duration,delay:o=fr.delay,endDelay:s=fr.endDelay,repeat:a=fr.repeat,offset:c,direction:u="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=en,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((d,p)=>{this.resolve=d,this.reject=p}),n=n||fr.easing,tl(n)){const d=n.createAnimation(r);n=d.easing,r=d.keyframes||r,i=d.duration||i}this.repeat=a,this.easing=li(n)?en:Q0(n),this.updateDuration(i);const h=A6(r,c,li(n)?n.map(Q0):en);this.tick=d=>{var p;o=o;let m=0;this.pauseTime!==void 0?m=this.pauseTime:m=(d-this.startTime)*this.rate,this.t=m,m/=1e3,m=Math.max(m-o,0),this.playState==="finished"&&this.pauseTime===void 0&&(m=this.totalDuration);const b=m/this.duration;let _=Math.floor(b),A=b%1;!A&&b>=1&&(A=1),A===1&&_--;const I=_%2;(u==="reverse"||u==="alternate"&&I||u==="alternate-reverse"&&!I)&&(A=1-A);const w=m>=this.totalDuration?1:Math.min(A,1),E=h(this.easing(w));t(E),this.pauseTime===void 0&&(this.playState==="finished"||m>=this.totalDuration+s)?(this.playState="finished",(p=this.resolve)===null||p===void 0||p.call(this,E)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const t=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=t-this.pauseTime:this.startTime||(this.startTime=t),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var t;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(t=this.reject)===null||t===void 0||t.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(t){this.duration=t,this.totalDuration=t*(this.repeat+1)}get currentTime(){return this.t}set currentTime(t){this.pauseTime!==void 0||this.rate===0?this.pauseTime=t:this.startTime=performance.now()-t/this.rate}get playbackRate(){return this.rate}set playbackRate(t){this.rate=t}}var rl=function(){};process.env.NODE_ENV!=="production"&&(rl=function(e,t){if(!e)throw new Error(t)});class P6{setAnimation(t){this.animation=t,t==null||t.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const nl=new WeakMap;function tp(e){return nl.has(e)||nl.set(e,{transforms:[],values:new Map}),nl.get(e)}function N6(e,t){return e.has(t)||e.set(t,new P6),e.get(t)}const L6=["","X","Y","Z"],M6=["translate","scale","rotate","skew"],vs={x:"translateX",y:"translateY",z:"translateZ"},rp={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:e=>e+"deg"},F6={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:e=>e+"px"},rotate:rp,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:en},skew:rp},ho=new Map,il=e=>`--motion-${e}`,ys=["x","y","z"];M6.forEach(e=>{L6.forEach(t=>{ys.push(e+t),ho.set(il(e+t),F6[e])})});const U6=(e,t)=>ys.indexOf(e)-ys.indexOf(t),j6=new Set(ys),np=e=>j6.has(e),k6=(e,t)=>{vs[t]&&(t=vs[t]);const{transforms:r}=tp(e);E6(r,t),e.style.transform=B6(r)},B6=e=>e.sort(U6).reduce(z6,"").trim(),z6=(e,t)=>`${e} ${t}(var(${il(t)}))`,ol=e=>e.startsWith("--"),ip=new Set;function W6(e){if(!ip.has(e)){ip.add(e);try{const{syntax:t,initialValue:r}=ho.has(e)?ho.get(e):{};CSS.registerProperty({name:e,inherits:!1,syntax:t,initialValue:r})}catch{}}}const sl=(e,t)=>document.createElement("div").animate(e,t),op={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{sl({opacity:[1]})}catch{return!1}return!0},finished:()=>!!sl({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{sl({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},al={},hi={};for(const e in op)hi[e]=()=>(al[e]===void 0&&(al[e]=op[e]()),al[e]);const H6=.015,V6=(e,t)=>{let r="";const n=Math.round(t/H6);for(let i=0;i<n;i++)r+=e(el(0,n-1,i))+", ";return r.substring(0,r.length-2)},sp=(e,t)=>ui(e)?hi.linearEasing()?`linear(${V6(e,t)})`:fr.easing:J0(e)?q6(e):e,q6=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`;function K6(e,t){for(let r=0;r<e.length;r++)e[r]===null&&(e[r]=r?e[r-1]:t());return e}const G6=e=>Array.isArray(e)?e:[e];function cl(e){return vs[e]&&(e=vs[e]),np(e)?il(e):e}const ws={get:(e,t)=>{t=cl(t);let r=ol(t)?e.style.getPropertyValue(t):getComputedStyle(e)[t];if(!r&&r!==0){const n=ho.get(t);n&&(r=n.initialValue)}return r},set:(e,t,r)=>{t=cl(t),ol(t)?e.style.setProperty(t,r):e.style[t]=r}};function ap(e,t=!0){if(!(!e||e.playState==="finished"))try{e.stop?e.stop():(t&&e.commitStyles(),e.cancel())}catch{}}function Y6(e,t){var r;let n=(t==null?void 0:t.toDefaultUnit)||en;const i=e[e.length-1];if(D6(i)){const o=((r=i.match(/(-?[\d.]+)([a-z%]*)/))===null||r===void 0?void 0:r[2])||"";o&&(n=s=>s+o)}return n}function J6(){return window.__MOTION_DEV_TOOLS_RECORD}function Z6(e,t,r,n={},i){const o=J6(),s=n.record!==!1&&o;let a,{duration:c=fr.duration,delay:u=fr.delay,endDelay:h=fr.endDelay,repeat:d=fr.repeat,easing:p=fr.easing,persist:m=!1,direction:b,offset:_,allowWebkitAcceleration:A=!1}=n;const I=tp(e),w=np(t);let E=hi.waapi();w&&k6(e,t);const y=cl(t),S=N6(I.values,y),g=ho.get(y);return ap(S.animation,!(tl(p)&&S.generator)&&n.record!==!1),()=>{const l=()=>{var L,F;return(F=(L=ws.get(e,y))!==null&&L!==void 0?L:g==null?void 0:g.initialValue)!==null&&F!==void 0?F:0};let v=K6(G6(r),l);const M=Y6(v,g);if(tl(p)){const L=p.createAnimation(v,t!=="opacity",l,y,S);p=L.easing,v=L.keyframes||v,c=L.duration||c}if(ol(y)&&(hi.cssRegisterProperty()?W6(y):E=!1),w&&!hi.linearEasing()&&(ui(p)||li(p)&&p.some(ui))&&(E=!1),E){g&&(v=v.map(U=>ms(U)?g.toDefaultUnit(U):U)),v.length===1&&(!hi.partialKeyframes()||s)&&v.unshift(l());const L={delay:lo.ms(u),duration:lo.ms(c),endDelay:lo.ms(h),easing:li(p)?void 0:sp(p,c),direction:b,iterations:d+1,fill:"both"};a=e.animate({[y]:v,offset:_,easing:li(p)?p.map(U=>sp(U,c)):void 0},L),a.finished||(a.finished=new Promise((U,j)=>{a.onfinish=U,a.oncancel=j}));const F=v[v.length-1];a.finished.then(()=>{m||(ws.set(e,y,F),a.cancel())}).catch(G0),A||(a.playbackRate=1.000001)}else if(i&&w)v=v.map(L=>typeof L=="string"?parseFloat(L):L),v.length===1&&v.unshift(parseFloat(l())),a=new i(L=>{ws.set(e,y,M?M(L):L)},v,Object.assign(Object.assign({},n),{duration:c,easing:p}));else{const L=v[v.length-1];ws.set(e,y,g&&ms(L)?g.toDefaultUnit(L):L)}return s&&o(e,t,v,{duration:c,delay:u,easing:p,repeat:d,offset:_},"motion-one"),S.setAnimation(a),a}}const X6=(e,t)=>e[t]?Object.assign(Object.assign({},e),e[t]):Object.assign({},e);function Q6(e,t){var r;return typeof e=="string"?t?((r=t[e])!==null&&r!==void 0||(t[e]=document.querySelectorAll(e)),e=t[e]):e=document.querySelectorAll(e):e instanceof Element&&(e=[e]),Array.from(e||[])}const e4=e=>e(),cp=(e,t,r=fr.duration)=>new Proxy({animations:e.map(e4).filter(Boolean),duration:r,options:t},r4),t4=e=>e.animations[0],r4={get:(e,t)=>{const r=t4(e);switch(t){case"duration":return e.duration;case"currentTime":return lo.s((r==null?void 0:r[t])||0);case"playbackRate":case"playState":return r==null?void 0:r[t];case"finished":return e.finished||(e.finished=Promise.all(e.animations.map(n4)).catch(G0)),e.finished;case"stop":return()=>{e.animations.forEach(n=>ap(n))};case"forEachNative":return n=>{e.animations.forEach(i=>n(i,e))};default:return typeof(r==null?void 0:r[t])>"u"?void 0:()=>e.animations.forEach(n=>n[t]())}},set:(e,t,r)=>{switch(t){case"currentTime":r=lo.ms(r);case"currentTime":case"playbackRate":for(let n=0;n<e.animations.length;n++)e.animations[n][t]=r;return!0}return!1}},n4=e=>e.finished;function i4(e,t,r){return ui(e)?e(t,r):e}function o4(e){return function(r,n,i={}){r=Q6(r);const o=r.length;rl(!!o,"No valid element provided."),rl(!!n,"No keyframes defined.");const s=[];for(let a=0;a<o;a++){const c=r[a];for(const u in n){const h=X6(i,u);h.delay=i4(h.delay,a,o);const d=Z6(c,u,n[u],h,e);s.push(d)}}return cp(s,i,i.duration)}}const s4=o4(ep);function a4(e,t={}){return cp([()=>{const r=new ep(e,[0,1],t);return r.finished.catch(()=>{}),r}],t,t.duration)}function Ln(e,t,r){return(ui(e)?a4:s4)(e,t,r)}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Gt=e=>e??St;var fo={},c4=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},lp={},or={};let ll;const l4=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];or.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17},or.getSymbolTotalCodewords=function(t){return l4[t]},or.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t},or.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');ll=t},or.isKanjiModeEnabled=function(){return typeof ll<"u"},or.toSJIS=function(t){return ll(t)};var bs={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+r)}}e.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},e.from=function(n,i){if(e.isValid(n))return n;try{return t(n)}catch{return i}}})(bs);function up(){this.buffer=[],this.length=0}up.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var u4=up;function po(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}po.prototype.set=function(e,t,r,n){const i=e*this.size+t;this.data[i]=r,n&&(this.reservedBit[i]=!0)},po.prototype.get=function(e,t){return this.data[e*this.size+t]},po.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},po.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var h4=po,hp={};(function(e){const t=or.getSymbolSize;e.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,o=t(n),s=o===145?26:Math.ceil((o-13)/(2*i-2))*2,a=[o-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-s;return a.push(6),a.reverse()},e.getPositions=function(n){const i=[],o=e.getRowColCoords(n),s=o.length;for(let a=0;a<s;a++)for(let c=0;c<s;c++)a===0&&c===0||a===0&&c===s-1||a===s-1&&c===0||i.push([o[a],o[c]]);return i}})(hp);var fp={};const f4=or.getSymbolSize,dp=7;fp.getPositions=function(t){const r=f4(t);return[[0,0],[r-dp,0],[0,r-dp]]};var pp={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},e.from=function(i){return e.isValid(i)?parseInt(i,10):void 0},e.getPenaltyN1=function(i){const o=i.size;let s=0,a=0,c=0,u=null,h=null;for(let d=0;d<o;d++){a=c=0,u=h=null;for(let p=0;p<o;p++){let m=i.get(d,p);m===u?a++:(a>=5&&(s+=t.N1+(a-5)),u=m,a=1),m=i.get(p,d),m===h?c++:(c>=5&&(s+=t.N1+(c-5)),h=m,c=1)}a>=5&&(s+=t.N1+(a-5)),c>=5&&(s+=t.N1+(c-5))}return s},e.getPenaltyN2=function(i){const o=i.size;let s=0;for(let a=0;a<o-1;a++)for(let c=0;c<o-1;c++){const u=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(u===4||u===0)&&s++}return s*t.N2},e.getPenaltyN3=function(i){const o=i.size;let s=0,a=0,c=0;for(let u=0;u<o;u++){a=c=0;for(let h=0;h<o;h++)a=a<<1&2047|i.get(u,h),h>=10&&(a===1488||a===93)&&s++,c=c<<1&2047|i.get(h,u),h>=10&&(c===1488||c===93)&&s++}return s*t.N3},e.getPenaltyN4=function(i){let o=0;const s=i.data.length;for(let c=0;c<s;c++)o+=i.data[c];return Math.abs(Math.ceil(o*100/s/5)-10)*t.N4};function r(n,i,o){switch(n){case e.Patterns.PATTERN000:return(i+o)%2===0;case e.Patterns.PATTERN001:return i%2===0;case e.Patterns.PATTERN010:return o%3===0;case e.Patterns.PATTERN011:return(i+o)%3===0;case e.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(o/3))%2===0;case e.Patterns.PATTERN101:return i*o%2+i*o%3===0;case e.Patterns.PATTERN110:return(i*o%2+i*o%3)%2===0;case e.Patterns.PATTERN111:return(i*o%3+(i+o)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}e.applyMask=function(i,o){const s=o.size;for(let a=0;a<s;a++)for(let c=0;c<s;c++)o.isReserved(c,a)||o.xor(c,a,r(i,c,a))},e.getBestMask=function(i,o){const s=Object.keys(e.Patterns).length;let a=0,c=1/0;for(let u=0;u<s;u++){o(u),e.applyMask(u,i);const h=e.getPenaltyN1(i)+e.getPenaltyN2(i)+e.getPenaltyN3(i)+e.getPenaltyN4(i);e.applyMask(u,i),h<c&&(c=h,a=u)}return a}})(pp);var _s={};const tn=bs,Es=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],xs=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];_s.getBlocksCount=function(t,r){switch(r){case tn.L:return Es[(t-1)*4+0];case tn.M:return Es[(t-1)*4+1];case tn.Q:return Es[(t-1)*4+2];case tn.H:return Es[(t-1)*4+3];default:return}},_s.getTotalCodewordsCount=function(t,r){switch(r){case tn.L:return xs[(t-1)*4+0];case tn.M:return xs[(t-1)*4+1];case tn.Q:return xs[(t-1)*4+2];case tn.H:return xs[(t-1)*4+3];default:return}};var gp={},Ss={};const go=new Uint8Array(512),Cs=new Uint8Array(256);(function(){let t=1;for(let r=0;r<255;r++)go[r]=t,Cs[t]=r,t<<=1,t&256&&(t^=285);for(let r=255;r<512;r++)go[r]=go[r-255]})(),Ss.log=function(t){if(t<1)throw new Error("log("+t+")");return Cs[t]},Ss.exp=function(t){return go[t]},Ss.mul=function(t,r){return t===0||r===0?0:go[Cs[t]+Cs[r]]},function(e){const t=Ss;e.mul=function(n,i){const o=new Uint8Array(n.length+i.length-1);for(let s=0;s<n.length;s++)for(let a=0;a<i.length;a++)o[s+a]^=t.mul(n[s],i[a]);return o},e.mod=function(n,i){let o=new Uint8Array(n);for(;o.length-i.length>=0;){const s=o[0];for(let c=0;c<i.length;c++)o[c]^=t.mul(i[c],s);let a=0;for(;a<o.length&&o[a]===0;)a++;o=o.slice(a)}return o},e.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let o=0;o<n;o++)i=e.mul(i,new Uint8Array([1,t.exp(o)]));return i}}(gp);const mp=gp;function ul(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}ul.prototype.initialize=function(t){this.degree=t,this.genPoly=mp.generateECPolynomial(this.degree)},ul.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(t.length+this.degree);r.set(t);const n=mp.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){const o=new Uint8Array(this.degree);return o.set(n,i),o}return n};var d4=ul,vp={},rn={},hl={};hl.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var Tr={};const yp="[0-9]+",p4="[A-Z $%*+\\-./:]+";let mo="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";mo=mo.replace(/u/g,"\\u");const g4="(?:(?![A-Z0-9 $%*+\\-./:]|"+mo+`)(?:.|[\r
]))+`;Tr.KANJI=new RegExp(mo,"g"),Tr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Tr.BYTE=new RegExp(g4,"g"),Tr.NUMERIC=new RegExp(yp,"g"),Tr.ALPHANUMERIC=new RegExp(p4,"g");const m4=new RegExp("^"+mo+"$"),v4=new RegExp("^"+yp+"$"),y4=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Tr.testKanji=function(t){return m4.test(t)},Tr.testNumeric=function(t){return v4.test(t)},Tr.testAlphanumeric=function(t){return y4.test(t)},function(e){const t=hl,r=Tr;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(o,s){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!t.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?o.ccBits[0]:s<27?o.ccBits[1]:o.ccBits[2]},e.getBestModeForData=function(o){return r.testNumeric(o)?e.NUMERIC:r.testAlphanumeric(o)?e.ALPHANUMERIC:r.testKanji(o)?e.KANJI:e.BYTE},e.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},e.isValid=function(o){return o&&o.bit&&o.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+i)}}e.from=function(o,s){if(e.isValid(o))return o;try{return n(o)}catch{return s}}}(rn),function(e){const t=or,r=_s,n=bs,i=rn,o=hl,s=7973,a=t.getBCHDigit(s);function c(p,m,b){for(let _=1;_<=40;_++)if(m<=e.getCapacity(_,b,p))return _}function u(p,m){return i.getCharCountIndicator(p,m)+4}function h(p,m){let b=0;return p.forEach(function(_){const A=u(_.mode,m);b+=A+_.getBitsLength()}),b}function d(p,m){for(let b=1;b<=40;b++)if(h(p,b)<=e.getCapacity(b,m,i.MIXED))return b}e.from=function(m,b){return o.isValid(m)?parseInt(m,10):b},e.getCapacity=function(m,b,_){if(!o.isValid(m))throw new Error("Invalid QR Code version");typeof _>"u"&&(_=i.BYTE);const A=t.getSymbolTotalCodewords(m),I=r.getTotalCodewordsCount(m,b),w=(A-I)*8;if(_===i.MIXED)return w;const E=w-u(_,m);switch(_){case i.NUMERIC:return Math.floor(E/10*3);case i.ALPHANUMERIC:return Math.floor(E/11*2);case i.KANJI:return Math.floor(E/13);case i.BYTE:default:return Math.floor(E/8)}},e.getBestVersionForData=function(m,b){let _;const A=n.from(b,n.M);if(Array.isArray(m)){if(m.length>1)return d(m,A);if(m.length===0)return 1;_=m[0]}else _=m;return c(_.mode,_.getLength(),A)},e.getEncodedBits=function(m){if(!o.isValid(m)||m<7)throw new Error("Invalid QR Code version");let b=m<<12;for(;t.getBCHDigit(b)-a>=0;)b^=s<<t.getBCHDigit(b)-a;return m<<12|b}}(vp);var wp={};const fl=or,bp=1335,w4=21522,_p=fl.getBCHDigit(bp);wp.getEncodedBits=function(t,r){const n=t.bit<<3|r;let i=n<<10;for(;fl.getBCHDigit(i)-_p>=0;)i^=bp<<fl.getBCHDigit(i)-_p;return(n<<10|i)^w4};var Ep={};const b4=rn;function fi(e){this.mode=b4.NUMERIC,this.data=e.toString()}fi.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},fi.prototype.getLength=function(){return this.data.length},fi.prototype.getBitsLength=function(){return fi.getBitsLength(this.data.length)},fi.prototype.write=function(t){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),t.put(i,10);const o=this.data.length-r;o>0&&(n=this.data.substr(r),i=parseInt(n,10),t.put(i,o*3+1))};var _4=fi;const E4=rn,dl=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function di(e){this.mode=E4.ALPHANUMERIC,this.data=e}di.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)},di.prototype.getLength=function(){return this.data.length},di.prototype.getBitsLength=function(){return di.getBitsLength(this.data.length)},di.prototype.write=function(t){let r;for(r=0;r+2<=this.data.length;r+=2){let n=dl.indexOf(this.data[r])*45;n+=dl.indexOf(this.data[r+1]),t.put(n,11)}this.data.length%2&&t.put(dl.indexOf(this.data[r]),6)};var x4=di,S4=function(t){for(var r=[],n=t.length,i=0;i<n;i++){var o=t.charCodeAt(i);if(o>=55296&&o<=56319&&n>i+1){var s=t.charCodeAt(i+1);s>=56320&&s<=57343&&(o=(o-55296)*1024+s-56320+65536,i+=1)}if(o<128){r.push(o);continue}if(o<2048){r.push(o>>6|192),r.push(o&63|128);continue}if(o<55296||o>=57344&&o<65536){r.push(o>>12|224),r.push(o>>6&63|128),r.push(o&63|128);continue}if(o>=65536&&o<=1114111){r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(o&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const C4=S4,A4=rn;function pi(e){this.mode=A4.BYTE,typeof e=="string"&&(e=C4(e)),this.data=new Uint8Array(e)}pi.getBitsLength=function(t){return t*8},pi.prototype.getLength=function(){return this.data.length},pi.prototype.getBitsLength=function(){return pi.getBitsLength(this.data.length)},pi.prototype.write=function(e){for(let t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)};var D4=pi;const O4=rn,I4=or;function gi(e){this.mode=O4.KANJI,this.data=e}gi.getBitsLength=function(t){return t*13},gi.prototype.getLength=function(){return this.data.length},gi.prototype.getBitsLength=function(){return gi.getBitsLength(this.data.length)},gi.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let r=I4.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),e.put(r,13)}};var T4=gi,xp={exports:{}};(function(e){var t={single_source_shortest_paths:function(r,n,i){var o={},s={};s[n]=0;var a=t.PriorityQueue.make();a.push(n,0);for(var c,u,h,d,p,m,b,_,A;!a.empty();){c=a.pop(),u=c.value,d=c.cost,p=r[u]||{};for(h in p)p.hasOwnProperty(h)&&(m=p[h],b=d+m,_=s[h],A=typeof s[h]>"u",(A||_>b)&&(s[h]=b,a.push(h,b),o[h]=u))}if(typeof i<"u"&&typeof s[i]>"u"){var I=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(I)}return o},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],o=n;o;)i.push(o),r[o],o=r[o];return i.reverse(),i},find_path:function(r,n,i){var o=t.single_source_shortest_paths(r,n,i);return t.extract_shortest_path_from_predecessor_list(o,i)},PriorityQueue:{make:function(r){var n=t.PriorityQueue,i={},o;r=r||{};for(o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(xp);var $4=xp.exports;(function(e){const t=rn,r=_4,n=x4,i=D4,o=T4,s=Tr,a=or,c=$4;function u(I){return unescape(encodeURIComponent(I)).length}function h(I,w,E){const y=[];let S;for(;(S=I.exec(E))!==null;)y.push({data:S[0],index:S.index,mode:w,length:S[0].length});return y}function d(I){const w=h(s.NUMERIC,t.NUMERIC,I),E=h(s.ALPHANUMERIC,t.ALPHANUMERIC,I);let y,S;return a.isKanjiModeEnabled()?(y=h(s.BYTE,t.BYTE,I),S=h(s.KANJI,t.KANJI,I)):(y=h(s.BYTE_KANJI,t.BYTE,I),S=[]),w.concat(E,y,S).sort(function(l,v){return l.index-v.index}).map(function(l){return{data:l.data,mode:l.mode,length:l.length}})}function p(I,w){switch(w){case t.NUMERIC:return r.getBitsLength(I);case t.ALPHANUMERIC:return n.getBitsLength(I);case t.KANJI:return o.getBitsLength(I);case t.BYTE:return i.getBitsLength(I)}}function m(I){return I.reduce(function(w,E){const y=w.length-1>=0?w[w.length-1]:null;return y&&y.mode===E.mode?(w[w.length-1].data+=E.data,w):(w.push(E),w)},[])}function b(I){const w=[];for(let E=0;E<I.length;E++){const y=I[E];switch(y.mode){case t.NUMERIC:w.push([y,{data:y.data,mode:t.ALPHANUMERIC,length:y.length},{data:y.data,mode:t.BYTE,length:y.length}]);break;case t.ALPHANUMERIC:w.push([y,{data:y.data,mode:t.BYTE,length:y.length}]);break;case t.KANJI:w.push([y,{data:y.data,mode:t.BYTE,length:u(y.data)}]);break;case t.BYTE:w.push([{data:y.data,mode:t.BYTE,length:u(y.data)}])}}return w}function _(I,w){const E={},y={start:{}};let S=["start"];for(let g=0;g<I.length;g++){const l=I[g],v=[];for(let M=0;M<l.length;M++){const L=l[M],F=""+g+M;v.push(F),E[F]={node:L,lastCount:0},y[F]={};for(let U=0;U<S.length;U++){const j=S[U];E[j]&&E[j].node.mode===L.mode?(y[j][F]=p(E[j].lastCount+L.length,L.mode)-p(E[j].lastCount,L.mode),E[j].lastCount+=L.length):(E[j]&&(E[j].lastCount=L.length),y[j][F]=p(L.length,L.mode)+4+t.getCharCountIndicator(L.mode,w))}}S=v}for(let g=0;g<S.length;g++)y[S[g]].end=0;return{map:y,table:E}}function A(I,w){let E;const y=t.getBestModeForData(I);if(E=t.from(w,y),E!==t.BYTE&&E.bit<y.bit)throw new Error('"'+I+'" cannot be encoded with mode '+t.toString(E)+`.
 Suggested mode is: `+t.toString(y));switch(E===t.KANJI&&!a.isKanjiModeEnabled()&&(E=t.BYTE),E){case t.NUMERIC:return new r(I);case t.ALPHANUMERIC:return new n(I);case t.KANJI:return new o(I);case t.BYTE:return new i(I)}}e.fromArray=function(w){return w.reduce(function(E,y){return typeof y=="string"?E.push(A(y,null)):y.data&&E.push(A(y.data,y.mode)),E},[])},e.fromString=function(w,E){const y=d(w,a.isKanjiModeEnabled()),S=b(y),g=_(S,E),l=c.find_path(g.map,"start","end"),v=[];for(let M=1;M<l.length-1;M++)v.push(g.table[l[M]].node);return e.fromArray(m(v))},e.rawSplit=function(w){return e.fromArray(d(w,a.isKanjiModeEnabled()))}})(Ep);const As=or,pl=bs,R4=u4,P4=h4,N4=hp,L4=fp,gl=pp,ml=_s,M4=d4,Ds=vp,F4=wp,U4=rn,vl=Ep;function j4(e,t){const r=e.size,n=L4.getPositions(t);for(let i=0;i<n.length;i++){const o=n[i][0],s=n[i][1];for(let a=-1;a<=7;a++)if(!(o+a<=-1||r<=o+a))for(let c=-1;c<=7;c++)s+c<=-1||r<=s+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?e.set(o+a,s+c,!0,!0):e.set(o+a,s+c,!1,!0))}}function k4(e){const t=e.size;for(let r=8;r<t-8;r++){const n=r%2===0;e.set(r,6,n,!0),e.set(6,r,n,!0)}}function B4(e,t){const r=N4.getPositions(t);for(let n=0;n<r.length;n++){const i=r[n][0],o=r[n][1];for(let s=-2;s<=2;s++)for(let a=-2;a<=2;a++)s===-2||s===2||a===-2||a===2||s===0&&a===0?e.set(i+s,o+a,!0,!0):e.set(i+s,o+a,!1,!0)}}function z4(e,t){const r=e.size,n=Ds.getEncodedBits(t);let i,o,s;for(let a=0;a<18;a++)i=Math.floor(a/3),o=a%3+r-8-3,s=(n>>a&1)===1,e.set(i,o,s,!0),e.set(o,i,s,!0)}function yl(e,t,r){const n=e.size,i=F4.getEncodedBits(t,r);let o,s;for(o=0;o<15;o++)s=(i>>o&1)===1,o<6?e.set(o,8,s,!0):o<8?e.set(o+1,8,s,!0):e.set(n-15+o,8,s,!0),o<8?e.set(8,n-o-1,s,!0):o<9?e.set(8,15-o-1+1,s,!0):e.set(8,15-o-1,s,!0);e.set(n-8,8,1,!0)}function W4(e,t){const r=e.size;let n=-1,i=r-1,o=7,s=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!e.isReserved(i,a-c)){let u=!1;s<t.length&&(u=(t[s]>>>o&1)===1),e.set(i,a-c,u),o--,o===-1&&(s++,o=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function H4(e,t,r){const n=new R4;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),U4.getCharCountIndicator(c.mode,e)),c.write(n)});const i=As.getSymbolTotalCodewords(e),o=ml.getTotalCodewordsCount(e,t),s=(i-o)*8;for(n.getLengthInBits()+4<=s&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(s-n.getLengthInBits())/8;for(let c=0;c<a;c++)n.put(c%2?17:236,8);return V4(n,e,t)}function V4(e,t,r){const n=As.getSymbolTotalCodewords(t),i=ml.getTotalCodewordsCount(t,r),o=n-i,s=ml.getBlocksCount(t,r),a=n%s,c=s-a,u=Math.floor(n/s),h=Math.floor(o/s),d=h+1,p=u-h,m=new M4(p);let b=0;const _=new Array(s),A=new Array(s);let I=0;const w=new Uint8Array(e.buffer);for(let l=0;l<s;l++){const v=l<c?h:d;_[l]=w.slice(b,b+v),A[l]=m.encode(_[l]),b+=v,I=Math.max(I,v)}const E=new Uint8Array(n);let y=0,S,g;for(S=0;S<I;S++)for(g=0;g<s;g++)S<_[g].length&&(E[y++]=_[g][S]);for(S=0;S<p;S++)for(g=0;g<s;g++)E[y++]=A[g][S];return E}function q4(e,t,r,n){let i;if(Array.isArray(e))i=vl.fromArray(e);else if(typeof e=="string"){let u=t;if(!u){const h=vl.rawSplit(e);u=Ds.getBestVersionForData(h,r)}i=vl.fromString(e,u||40)}else throw new Error("Invalid data");const o=Ds.getBestVersionForData(i,r);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=o;else if(t<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);const s=H4(t,r,i),a=As.getSymbolSize(t),c=new P4(a);return j4(c,t),k4(c),B4(c,t),yl(c,r,0),t>=7&&z4(c,t),W4(c,s),isNaN(n)&&(n=gl.getBestMask(c,yl.bind(null,c,r))),gl.applyMask(n,c),yl(c,r,n),{modules:c,version:t,errorCorrectionLevel:r,maskPattern:n,segments:i}}lp.create=function(t,r){if(typeof t>"u"||t==="")throw new Error("No input text");let n=pl.M,i,o;return typeof r<"u"&&(n=pl.from(r.errorCorrectionLevel,pl.M),i=Ds.from(r.version),o=gl.from(r.maskPattern),r.toSJISFunc&&As.setToSJISFunction(r.toSJISFunc)),q4(t,i,n,o)};var Sp={},wl={};(function(e){function t(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(o){return[o,o]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}e.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,o=n.width&&n.width>=21?n.width:void 0,s=n.scale||4;return{width:o,scale:o?4:s,margin:i,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},e.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},e.getImageWidth=function(n,i){const o=e.getScale(n,i);return Math.floor((n+i.margin*2)*o)},e.qrToImageData=function(n,i,o){const s=i.modules.size,a=i.modules.data,c=e.getScale(s,o),u=Math.floor((s+o.margin*2)*c),h=o.margin*c,d=[o.color.light,o.color.dark];for(let p=0;p<u;p++)for(let m=0;m<u;m++){let b=(p*u+m)*4,_=o.color.light;if(p>=h&&m>=h&&p<u-h&&m<u-h){const A=Math.floor((p-h)/c),I=Math.floor((m-h)/c);_=d[a[A*s+I]?1:0]}n[b++]=_.r,n[b++]=_.g,n[b++]=_.b,n[b]=_.a}}})(wl),function(e){const t=wl;function r(i,o,s){i.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=s,o.width=s,o.style.height=s+"px",o.style.width=s+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(o,s,a){let c=a,u=s;typeof c>"u"&&(!s||!s.getContext)&&(c=s,s=void 0),s||(u=n()),c=t.getOptions(c);const h=t.getImageWidth(o.modules.size,c),d=u.getContext("2d"),p=d.createImageData(h,h);return t.qrToImageData(p.data,o,c),r(d,u,h),d.putImageData(p,0,0),u},e.renderToDataURL=function(o,s,a){let c=a;typeof c>"u"&&(!s||!s.getContext)&&(c=s,s=void 0),c||(c={});const u=e.render(o,s,c),h=c.type||"image/png",d=c.rendererOpts||{};return u.toDataURL(h,d.quality)}}(Sp);var Cp={};const K4=wl;function Ap(e,t){const r=e.a/255,n=t+'="'+e.hex+'"';return r<1?n+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function bl(e,t,r){let n=e+t;return typeof r<"u"&&(n+=" "+r),n}function G4(e,t,r){let n="",i=0,o=!1,s=0;for(let a=0;a<e.length;a++){const c=Math.floor(a%t),u=Math.floor(a/t);!c&&!o&&(o=!0),e[a]?(s++,a>0&&c>0&&e[a-1]||(n+=o?bl("M",c+r,.5+u+r):bl("m",i,0),i=0,o=!1),c+1<t&&e[a+1]||(n+=bl("h",s),s=0)):i++}return n}Cp.render=function(t,r,n){const i=K4.getOptions(r),o=t.modules.size,s=t.modules.data,a=o+i.margin*2,c=i.color.light.a?"<path "+Ap(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",u="<path "+Ap(i.color.dark,"stroke")+' d="'+G4(s,o,i.margin)+'"/>',h='viewBox="0 0 '+a+" "+a+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+h+' shape-rendering="crispEdges">'+c+u+`</svg>
`;return typeof n=="function"&&n(null,p),p};const Y4=c4,_l=lp,Dp=Sp,J4=Cp;function El(e,t,r,n,i){const o=[].slice.call(arguments,1),s=o.length,a=typeof o[s-1]=="function";if(!a&&!Y4())throw new Error("Callback required as last argument");if(a){if(s<2)throw new Error("Too few arguments provided");s===2?(i=r,r=t,t=n=void 0):s===3&&(t.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=t,t=void 0))}else{if(s<1)throw new Error("Too few arguments provided");return s===1?(r=t,t=n=void 0):s===2&&!t.getContext&&(n=r,r=t,t=void 0),new Promise(function(c,u){try{const h=_l.create(r,n);c(e(h,t,n))}catch(h){u(h)}})}try{const c=_l.create(r,n);i(null,e(c,t,n))}catch(c){i(c)}}fo.create=_l.create,fo.toCanvas=El.bind(null,Dp.render),fo.toDataURL=El.bind(null,Dp.renderToDataURL),fo.toString=El.bind(null,function(e,t,r){return J4.render(e,r)});var Z4=Object.defineProperty,Op=Object.getOwnPropertySymbols,X4=Object.prototype.hasOwnProperty,Q4=Object.prototype.propertyIsEnumerable,Ip=(e,t,r)=>t in e?Z4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,xl=(e,t)=>{for(var r in t||(t={}))X4.call(t,r)&&Ip(e,r,t[r]);if(Op)for(var r of Op(t))Q4.call(t,r)&&Ip(e,r,t[r]);return e};function ex(){var e;const t=(e=Vr.state.themeMode)!=null?e:"dark",r={light:{foreground:{1:"rgb(20,20,20)",2:"rgb(121,134,134)",3:"rgb(158,169,169)"},background:{1:"rgb(255,255,255)",2:"rgb(241,243,243)",3:"rgb(228,231,231)"},overlay:"rgba(0,0,0,0.1)"},dark:{foreground:{1:"rgb(228,231,231)",2:"rgb(148,158,158)",3:"rgb(110,119,119)"},background:{1:"rgb(20,20,20)",2:"rgb(39,42,42)",3:"rgb(59,64,64)"},overlay:"rgba(255,255,255,0.1)"}}[t];return{"--wcm-color-fg-1":r.foreground[1],"--wcm-color-fg-2":r.foreground[2],"--wcm-color-fg-3":r.foreground[3],"--wcm-color-bg-1":r.background[1],"--wcm-color-bg-2":r.background[2],"--wcm-color-bg-3":r.background[3],"--wcm-color-overlay":r.overlay}}function Tp(){return{"--wcm-accent-color":"#3396FF","--wcm-accent-fill-color":"#FFFFFF","--wcm-z-index":"89","--wcm-background-color":"#3396FF","--wcm-background-border-radius":"8px","--wcm-container-border-radius":"30px","--wcm-wallet-icon-border-radius":"15px","--wcm-wallet-icon-large-border-radius":"30px","--wcm-wallet-icon-small-border-radius":"7px","--wcm-input-border-radius":"28px","--wcm-button-border-radius":"10px","--wcm-notification-border-radius":"36px","--wcm-secondary-button-border-radius":"28px","--wcm-icon-button-border-radius":"50%","--wcm-button-hover-highlight-border-radius":"10px","--wcm-text-big-bold-size":"20px","--wcm-text-big-bold-weight":"600","--wcm-text-big-bold-line-height":"24px","--wcm-text-big-bold-letter-spacing":"-0.03em","--wcm-text-big-bold-text-transform":"none","--wcm-text-xsmall-bold-size":"10px","--wcm-text-xsmall-bold-weight":"700","--wcm-text-xsmall-bold-line-height":"12px","--wcm-text-xsmall-bold-letter-spacing":"0.02em","--wcm-text-xsmall-bold-text-transform":"uppercase","--wcm-text-xsmall-regular-size":"12px","--wcm-text-xsmall-regular-weight":"600","--wcm-text-xsmall-regular-line-height":"14px","--wcm-text-xsmall-regular-letter-spacing":"-0.03em","--wcm-text-xsmall-regular-text-transform":"none","--wcm-text-small-thin-size":"14px","--wcm-text-small-thin-weight":"500","--wcm-text-small-thin-line-height":"16px","--wcm-text-small-thin-letter-spacing":"-0.03em","--wcm-text-small-thin-text-transform":"none","--wcm-text-small-regular-size":"14px","--wcm-text-small-regular-weight":"600","--wcm-text-small-regular-line-height":"16px","--wcm-text-small-regular-letter-spacing":"-0.03em","--wcm-text-small-regular-text-transform":"none","--wcm-text-medium-regular-size":"16px","--wcm-text-medium-regular-weight":"600","--wcm-text-medium-regular-line-height":"20px","--wcm-text-medium-regular-letter-spacing":"-0.03em","--wcm-text-medium-regular-text-transform":"none","--wcm-font-family":"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', sans-serif","--wcm-font-feature-settings":"'tnum' on, 'lnum' on, 'case' on","--wcm-success-color":"rgb(38,181,98)","--wcm-error-color":"rgb(242, 90, 103)","--wcm-overlay-background-color":"rgba(0, 0, 0, 0.3)","--wcm-overlay-backdrop-filter":"none"}}const Pe={getPreset(e){return Tp()[e]},setTheme(){const e=document.querySelector(":root"),{themeVariables:t}=Vr.state;if(e){const r=xl(xl(xl({},ex()),Tp()),t);Object.entries(r).forEach(([n,i])=>e.style.setProperty(n,i))}},globalCss:ze`*,::after,::before{margin:0;padding:0;box-sizing:border-box;font-style:normal;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;backface-visibility:hidden}button{cursor:pointer;display:flex;justify-content:center;align-items:center;position:relative;border:none;background-color:transparent;transition:all .2s ease}@media (hover:hover) and (pointer:fine){button:active{transition:all .1s ease;transform:scale(.93)}}button::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;transition:background-color,.2s ease}button:disabled{cursor:not-allowed}button svg,button wcm-text{position:relative;z-index:1}input{border:none;outline:0;appearance:none}img{display:block}::selection{color:var(--wcm-accent-fill-color);background:var(--wcm-accent-color)}`},tx=ze`button{border-radius:var(--wcm-secondary-button-border-radius);height:28px;padding:0 10px;background-color:var(--wcm-accent-color)}button path{fill:var(--wcm-accent-fill-color)}button::after{border-radius:inherit;border:1px solid var(--wcm-color-overlay)}button:disabled::after{background-color:transparent}.wcm-icon-left svg{margin-right:5px}.wcm-icon-right svg{margin-left:5px}button:active::after{background-color:var(--wcm-color-overlay)}.wcm-ghost,.wcm-ghost:active::after,.wcm-outline{background-color:transparent}.wcm-ghost:active{opacity:.5}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}.wcm-ghost:hover::after{background-color:transparent}.wcm-ghost:hover{opacity:.5}}button:disabled{background-color:var(--wcm-color-bg-3);pointer-events:none}.wcm-ghost::after{border-color:transparent}.wcm-ghost path{fill:var(--wcm-color-fg-2)}.wcm-outline path{fill:var(--wcm-accent-color)}.wcm-outline:disabled{background-color:transparent;opacity:.5}`;var rx=Object.defineProperty,nx=Object.getOwnPropertyDescriptor,mi=(e,t,r,n)=>{for(var i=n>1?void 0:n?nx(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&rx(t,r,i),i};let nn=class extends Ee{constructor(){super(...arguments),this.disabled=!1,this.iconLeft=void 0,this.iconRight=void 0,this.onClick=()=>null,this.variant="default"}render(){const e={"wcm-icon-left":this.iconLeft!==void 0,"wcm-icon-right":this.iconRight!==void 0,"wcm-ghost":this.variant==="ghost","wcm-outline":this.variant==="outline"};let t="inverse";return this.variant==="ghost"&&(t="secondary"),this.variant==="outline"&&(t="accent"),J`<button class="${jr(e)}" ?disabled="${this.disabled}" @click="${this.onClick}">${this.iconLeft}<wcm-text variant="small-regular" color="${t}"><slot></slot></wcm-text>${this.iconRight}</button>`}};nn.styles=[Pe.globalCss,tx],mi([ge({type:Boolean})],nn.prototype,"disabled",2),mi([ge()],nn.prototype,"iconLeft",2),mi([ge()],nn.prototype,"iconRight",2),mi([ge()],nn.prototype,"onClick",2),mi([ge()],nn.prototype,"variant",2),nn=mi([Ne("wcm-button")],nn);const ix=ze`:host{display:inline-block}button{padding:0 15px 1px;height:40px;border-radius:var(--wcm-button-border-radius);color:var(--wcm-accent-fill-color);background-color:var(--wcm-accent-color)}button::after{content:'';top:0;bottom:0;left:0;right:0;position:absolute;background-color:transparent;border-radius:inherit;transition:background-color .2s ease;border:1px solid var(--wcm-color-overlay)}button:active::after{background-color:var(--wcm-color-overlay)}button:disabled{padding-bottom:0;background-color:var(--wcm-color-bg-3);color:var(--wcm-color-fg-3)}.wcm-secondary{color:var(--wcm-accent-color);background-color:transparent}.wcm-secondary::after{display:none}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}}`;var ox=Object.defineProperty,sx=Object.getOwnPropertyDescriptor,Sl=(e,t,r,n)=>{for(var i=n>1?void 0:n?sx(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&ox(t,r,i),i};let vo=class extends Ee{constructor(){super(...arguments),this.disabled=!1,this.variant="primary"}render(){const e={"wcm-secondary":this.variant==="secondary"};return J`<button ?disabled="${this.disabled}" class="${jr(e)}"><slot></slot></button>`}};vo.styles=[Pe.globalCss,ix],Sl([ge({type:Boolean})],vo.prototype,"disabled",2),Sl([ge()],vo.prototype,"variant",2),vo=Sl([Ne("wcm-button-big")],vo);const ax=ze`:host{background-color:var(--wcm-color-bg-2);border-top:1px solid var(--wcm-color-bg-3)}div{padding:10px 20px;display:inherit;flex-direction:inherit;align-items:inherit;width:inherit;justify-content:inherit}`;var cx=Object.defineProperty,lx=Object.getOwnPropertyDescriptor,ux=(e,t,r,n)=>{for(var i=n>1?void 0:n?lx(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&cx(t,r,i),i};let Cl=class extends Ee{render(){return J`<div><slot></slot></div>`}};Cl.styles=[Pe.globalCss,ax],Cl=ux([Ne("wcm-info-footer")],Cl);const We={CROSS_ICON:st`<svg width="12" height="12" viewBox="0 0 12 12"><path d="M9.94 11A.75.75 0 1 0 11 9.94L7.414 6.353a.5.5 0 0 1 0-.708L11 2.061A.75.75 0 1 0 9.94 1L6.353 4.586a.5.5 0 0 1-.708 0L2.061 1A.75.75 0 0 0 1 2.06l3.586 3.586a.5.5 0 0 1 0 .708L1 9.939A.75.75 0 1 0 2.06 11l3.586-3.586a.5.5 0 0 1 .708 0L9.939 11Z" fill="#fff"/></svg>`,WALLET_CONNECT_LOGO:st`<svg width="178" height="29" viewBox="0 0 178 29" id="wcm-wc-logo"><path d="M10.683 7.926c5.284-5.17 13.85-5.17 19.134 0l.636.623a.652.652 0 0 1 0 .936l-2.176 2.129a.343.343 0 0 1-.478 0l-.875-.857c-3.686-3.607-9.662-3.607-13.348 0l-.937.918a.343.343 0 0 1-.479 0l-2.175-2.13a.652.652 0 0 1 0-.936l.698-.683Zm23.633 4.403 1.935 1.895a.652.652 0 0 1 0 .936l-8.73 8.543a.687.687 0 0 1-.956 0L20.37 17.64a.172.172 0 0 0-.239 0l-6.195 6.063a.687.687 0 0 1-.957 0l-8.73-8.543a.652.652 0 0 1 0-.936l1.936-1.895a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .239 0l6.195-6.064a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .24 0l6.195-6.064a.687.687 0 0 1 .956 0ZM48.093 20.948l2.338-9.355c.139-.515.258-1.07.416-1.942.12.872.258 1.427.357 1.942l2.022 9.355h4.181l3.528-13.874h-3.21l-1.943 8.523a24.825 24.825 0 0 0-.456 2.457c-.158-.931-.317-1.625-.495-2.438l-1.883-8.542h-4.201l-2.042 8.542a41.204 41.204 0 0 0-.475 2.438 41.208 41.208 0 0 0-.476-2.438l-1.903-8.542h-3.349l3.508 13.874h4.083ZM63.33 21.304c1.585 0 2.596-.654 3.11-1.605-.059.297-.078.595-.078.892v.357h2.655V15.22c0-2.735-1.248-4.32-4.3-4.32-2.636 0-4.36 1.466-4.52 3.487h2.914c.1-.891.734-1.426 1.705-1.426.911 0 1.407.515 1.407 1.11 0 .435-.258.693-1.03.792l-1.388.159c-2.061.257-3.825 1.01-3.825 3.19 0 1.982 1.645 3.092 3.35 3.092Zm.891-2.041c-.773 0-1.348-.436-1.348-1.19 0-.733.655-1.09 1.645-1.268l.674-.119c.575-.118.892-.218 1.09-.396v.912c0 1.228-.892 2.06-2.06 2.06ZM70.398 7.074v13.874h2.874V7.074h-2.874ZM74.934 7.074v13.874h2.874V7.074h-2.874ZM84.08 21.304c2.735 0 4.5-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922H81.92ZM94.92 21.146c.633 0 1.248-.1 1.525-.179v-2.18c-.218.04-.475.06-.693.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.338v-2.24h-2.338V7.788H91.47v3.448H89.37v2.24h2.1v4.201c0 2.3 1.15 3.469 3.45 3.469ZM104.62 21.304c3.924 0 6.302-2.299 6.599-5.608h-3.111c-.238 1.803-1.506 3.032-3.369 3.032-2.2 0-3.746-1.784-3.746-4.796 0-2.953 1.605-4.638 3.805-4.638 1.883 0 2.953 1.15 3.171 2.834h3.191c-.317-3.448-2.854-5.41-6.342-5.41-3.984 0-7.036 2.695-7.036 7.214 0 4.677 2.676 7.372 6.838 7.372ZM117.449 21.304c2.993 0 5.114-1.882 5.114-5.172 0-3.23-2.121-5.233-5.114-5.233-2.972 0-5.093 2.002-5.093 5.233 0 3.29 2.101 5.172 5.093 5.172Zm0-2.22c-1.327 0-2.18-1.09-2.18-2.952 0-1.903.892-2.973 2.18-2.973 1.308 0 2.2 1.07 2.2 2.973 0 1.862-.872 2.953-2.2 2.953ZM126.569 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.229-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM137.464 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.228-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM149.949 21.304c2.735 0 4.499-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922h-3.984ZM160.876 21.304c3.013 0 4.658-1.645 4.975-4.201h-2.874c-.099 1.07-.713 1.982-2.001 1.982-1.309 0-2.2-1.21-2.2-2.993 0-1.942 1.03-2.933 2.259-2.933 1.209 0 1.803.872 1.883 1.882h2.873c-.218-2.358-1.823-4.142-4.776-4.142-2.874 0-5.153 1.903-5.153 5.193 0 3.25 1.923 5.212 5.014 5.212ZM172.067 21.146c.634 0 1.248-.1 1.526-.179v-2.18c-.218.04-.476.06-.694.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.339v-2.24h-2.339V7.788h-2.854v3.448h-2.1v2.24h2.1v4.201c0 2.3 1.15 3.469 3.449 3.469Z" fill="#fff"/></svg>`,WALLET_CONNECT_ICON:st`<svg width="28" height="20" viewBox="0 0 28 20"><g clip-path="url(#a)"><path d="M7.386 6.482c3.653-3.576 9.575-3.576 13.228 0l.44.43a.451.451 0 0 1 0 .648L19.55 9.033a.237.237 0 0 1-.33 0l-.606-.592c-2.548-2.496-6.68-2.496-9.228 0l-.648.634a.237.237 0 0 1-.33 0L6.902 7.602a.451.451 0 0 1 0-.647l.483-.473Zm16.338 3.046 1.339 1.31a.451.451 0 0 1 0 .648l-6.035 5.909a.475.475 0 0 1-.662 0L14.083 13.2a.119.119 0 0 0-.166 0l-4.283 4.194a.475.475 0 0 1-.662 0l-6.035-5.91a.451.451 0 0 1 0-.647l1.338-1.31a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0Z" fill="#000000"/></g><defs><clipPath id="a"><path fill="#ffffff" d="M0 0h28v20H0z"/></clipPath></defs></svg>`,WALLET_CONNECT_ICON_COLORED:st`<svg width="96" height="96" fill="none"><path fill="#fff" d="M25.322 33.597c12.525-12.263 32.83-12.263 45.355 0l1.507 1.476a1.547 1.547 0 0 1 0 2.22l-5.156 5.048a.814.814 0 0 1-1.134 0l-2.074-2.03c-8.737-8.555-22.903-8.555-31.64 0l-2.222 2.175a.814.814 0 0 1-1.134 0l-5.156-5.049a1.547 1.547 0 0 1 0-2.22l1.654-1.62Zm56.019 10.44 4.589 4.494a1.547 1.547 0 0 1 0 2.22l-20.693 20.26a1.628 1.628 0 0 1-2.267 0L48.283 56.632a.407.407 0 0 0-.567 0L33.03 71.012a1.628 1.628 0 0 1-2.268 0L10.07 50.75a1.547 1.547 0 0 1 0-2.22l4.59-4.494a1.628 1.628 0 0 1 2.267 0l14.687 14.38c.156.153.41.153.567 0l14.685-14.38a1.628 1.628 0 0 1 2.268 0l14.687 14.38c.156.153.41.153.567 0l14.686-14.38a1.628 1.628 0 0 1 2.268 0Z"/><path stroke="#000" d="M25.672 33.954c12.33-12.072 32.325-12.072 44.655 0l1.508 1.476a1.047 1.047 0 0 1 0 1.506l-5.157 5.048a.314.314 0 0 1-.434 0l-2.074-2.03c-8.932-8.746-23.409-8.746-32.34 0l-2.222 2.174a.314.314 0 0 1-.434 0l-5.157-5.048a1.047 1.047 0 0 1 0-1.506l1.655-1.62Zm55.319 10.44 4.59 4.494a1.047 1.047 0 0 1 0 1.506l-20.694 20.26a1.128 1.128 0 0 1-1.568 0l-14.686-14.38a.907.907 0 0 0-1.267 0L32.68 70.655a1.128 1.128 0 0 1-1.568 0L10.42 50.394a1.047 1.047 0 0 1 0-1.506l4.59-4.493a1.128 1.128 0 0 1 1.567 0l14.687 14.379a.907.907 0 0 0 1.266 0l-.35-.357.35.357 14.686-14.38a1.128 1.128 0 0 1 1.568 0l14.687 14.38a.907.907 0 0 0 1.267 0l14.686-14.38a1.128 1.128 0 0 1 1.568 0Z"/></svg>`,BACK_ICON:st`<svg width="10" height="18" viewBox="0 0 10 18"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.735.179a.75.75 0 0 1 .087 1.057L2.92 8.192a1.25 1.25 0 0 0 0 1.617l5.902 6.956a.75.75 0 1 1-1.144.97L1.776 10.78a2.75 2.75 0 0 1 0-3.559L7.678.265A.75.75 0 0 1 8.735.18Z" fill="#fff"/></svg>`,COPY_ICON:st`<svg width="24" height="24" fill="none"><path fill="#fff" fill-rule="evenodd" d="M7.01 7.01c.03-1.545.138-2.5.535-3.28A5 5 0 0 1 9.73 1.545C10.8 1 12.2 1 15 1c2.8 0 4.2 0 5.27.545a5 5 0 0 1 2.185 2.185C23 4.8 23 6.2 23 9c0 2.8 0 4.2-.545 5.27a5 5 0 0 1-2.185 2.185c-.78.397-1.735.505-3.28.534l-.001.01c-.03 1.54-.138 2.493-.534 3.27a5 5 0 0 1-2.185 2.186C13.2 23 11.8 23 9 23c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C1 19.2 1 17.8 1 15c0-2.8 0-4.2.545-5.27A5 5 0 0 1 3.73 7.545C4.508 7.149 5.46 7.04 7 7.01h.01ZM15 15.5c-1.425 0-2.403-.001-3.162-.063-.74-.06-1.139-.172-1.427-.319a3.5 3.5 0 0 1-1.53-1.529c-.146-.288-.257-.686-.318-1.427C8.501 11.403 8.5 10.425 8.5 9c0-1.425.001-2.403.063-3.162.06-.74.172-1.139.318-1.427a3.5 3.5 0 0 1 1.53-1.53c.288-.146.686-.257 1.427-.318.759-.062 1.737-.063 3.162-.063 1.425 0 2.403.001 3.162.063.74.06 1.139.172 1.427.318a3.5 3.5 0 0 1 1.53 1.53c.146.288.257.686.318 1.427.062.759.063 1.737.063 3.162 0 1.425-.001 2.403-.063 3.162-.06.74-.172 1.139-.319 1.427a3.5 3.5 0 0 1-1.529 1.53c-.288.146-.686.257-1.427.318-.759.062-1.737.063-3.162.063ZM7 8.511c-.444.009-.825.025-1.162.052-.74.06-1.139.172-1.427.318a3.5 3.5 0 0 0-1.53 1.53c-.146.288-.257.686-.318 1.427-.062.759-.063 1.737-.063 3.162 0 1.425.001 2.403.063 3.162.06.74.172 1.139.318 1.427a3.5 3.5 0 0 0 1.53 1.53c.288.146.686.257 1.427.318.759.062 1.737.063 3.162.063 1.425 0 2.403-.001 3.162-.063.74-.06 1.139-.172 1.427-.319a3.5 3.5 0 0 0 1.53-1.53c.146-.287.257-.685.318-1.426.027-.337.043-.718.052-1.162H15c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C7 13.2 7 11.8 7 9v-.489Z" clip-rule="evenodd"/></svg>`,RETRY_ICON:st`<svg width="15" height="16" viewBox="0 0 15 16"><path d="M6.464 2.03A.75.75 0 0 0 5.403.97L2.08 4.293a1 1 0 0 0 0 1.414L5.403 9.03a.75.75 0 0 0 1.06-1.06L4.672 6.177a.25.25 0 0 1 .177-.427h2.085a4 4 0 1 1-3.93 4.746c-.077-.407-.405-.746-.82-.746-.414 0-.755.338-.7.748a5.501 5.501 0 1 0 5.45-6.248H4.848a.25.25 0 0 1-.177-.427L6.464 2.03Z" fill="#fff"/></svg>`,DESKTOP_ICON:st`<svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C2.204 1 3.13 1 4.98 1h6.04c1.85 0 2.775 0 3.466.394a3 3 0 0 1 1.12 1.12C16 3.204 16 4.13 16 5.98v1.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C13.796 12 12.87 12 11.02 12H4.98c-1.85 0-2.775 0-3.466-.394a3 3 0 0 1-1.12-1.12C0 9.796 0 8.87 0 7.02V5.98ZM4.98 2.5h6.04c.953 0 1.568.001 2.034.043.446.04.608.108.69.154a1.5 1.5 0 0 1 .559.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033v1.04c0 .952-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.046-.243.114-.69.154-.466.042-1.08.043-2.033.043H4.98c-.952 0-1.568-.001-2.034-.043-.446-.04-.608-.108-.69-.154a1.5 1.5 0 0 1-.559-.56c-.046-.08-.114-.243-.154-.69-.042-.465-.043-1.08-.043-2.033V5.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.046.243-.114.69-.154.465-.042 1.08-.043 2.033-.043Z" fill="#fff"/><path d="M4 14.25a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,MOBILE_ICON:st`<svg width="16" height="16" viewBox="0 0 16 16"><path d="M6.75 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C5.204 0 6.136 0 8 0s2.795 0 3.486.394a3 3 0 0 1 1.12 1.12C13 2.204 13 3.13 13 4.98v6.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C10.796 16 9.864 16 8 16s-2.795 0-3.486-.394a3 3 0 0 1-1.12-1.12C3 13.796 3 12.87 3 11.02V4.98Zm8.5 0v6.04c0 .953-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.045-.242.113-.693.154-.47.042-1.091.043-2.05.043-.959 0-1.58-.001-2.05-.043-.45-.04-.613-.109-.693-.154a1.5 1.5 0 0 1-.56-.56c-.046-.08-.114-.243-.154-.69-.042-.466-.043-1.08-.043-2.033V4.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.045.243-.113.693-.154C6.42 1.501 7.041 1.5 8 1.5c.959 0 1.58.001 2.05.043.45.04.613.109.693.154a1.5 1.5 0 0 1 .56.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033Z" fill="#fff"/></svg>`,ARROW_DOWN_ICON:st`<svg width="14" height="14" viewBox="0 0 14 14"><path d="M2.28 7.47a.75.75 0 0 0-1.06 1.06l5.25 5.25a.75.75 0 0 0 1.06 0l5.25-5.25a.75.75 0 0 0-1.06-1.06l-3.544 3.543a.25.25 0 0 1-.426-.177V.75a.75.75 0 0 0-1.5 0v10.086a.25.25 0 0 1-.427.176L2.28 7.47Z" fill="#fff"/></svg>`,ARROW_UP_RIGHT_ICON:st`<svg width="15" height="14" fill="none"><path d="M4.5 1.75A.75.75 0 0 1 5.25 1H12a1.5 1.5 0 0 1 1.5 1.5v6.75a.75.75 0 0 1-1.5 0V4.164a.25.25 0 0 0-.427-.176L4.061 11.5A.75.75 0 0 1 3 10.44l7.513-7.513a.25.25 0 0 0-.177-.427H5.25a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,ARROW_RIGHT_ICON:st`<svg width="6" height="14" viewBox="0 0 6 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.181 1.099a.75.75 0 0 1 1.024.279l2.433 4.258a2.75 2.75 0 0 1 0 2.729l-2.433 4.257a.75.75 0 1 1-1.303-.744L4.335 7.62a1.25 1.25 0 0 0 0-1.24L1.902 2.122a.75.75 0 0 1 .28-1.023Z" fill="#fff"/></svg>`,QRCODE_ICON:st`<svg width="25" height="24" viewBox="0 0 25 24"><path d="M23.748 9a.748.748 0 0 0 .748-.752c-.018-2.596-.128-4.07-.784-5.22a6 6 0 0 0-2.24-2.24c-1.15-.656-2.624-.766-5.22-.784a.748.748 0 0 0-.752.748c0 .414.335.749.748.752 1.015.007 1.82.028 2.494.088.995.09 1.561.256 1.988.5.7.398 1.28.978 1.679 1.678.243.427.41.993.498 1.988.061.675.082 1.479.09 2.493a.753.753 0 0 0 .75.749ZM3.527.788C4.677.132 6.152.022 8.747.004A.748.748 0 0 1 9.5.752a.753.753 0 0 1-.749.752c-1.014.007-1.818.028-2.493.088-.995.09-1.561.256-1.988.5-.7.398-1.28.978-1.679 1.678-.243.427-.41.993-.499 1.988-.06.675-.081 1.479-.088 2.493A.753.753 0 0 1 1.252 9a.748.748 0 0 1-.748-.752c.018-2.596.128-4.07.784-5.22a6 6 0 0 1 2.24-2.24ZM1.252 15a.748.748 0 0 0-.748.752c.018 2.596.128 4.07.784 5.22a6 6 0 0 0 2.24 2.24c1.15.656 2.624.766 5.22.784a.748.748 0 0 0 .752-.748.753.753 0 0 0-.749-.752c-1.014-.007-1.818-.028-2.493-.089-.995-.089-1.561-.255-1.988-.498a4.5 4.5 0 0 1-1.679-1.68c-.243-.426-.41-.992-.499-1.987-.06-.675-.081-1.479-.088-2.493A.753.753 0 0 0 1.252 15ZM22.996 15.749a.753.753 0 0 1 .752-.749c.415 0 .751.338.748.752-.018 2.596-.128 4.07-.784 5.22a6 6 0 0 1-2.24 2.24c-1.15.656-2.624.766-5.22.784a.748.748 0 0 1-.752-.748c0-.414.335-.749.748-.752 1.015-.007 1.82-.028 2.494-.089.995-.089 1.561-.255 1.988-.498a4.5 4.5 0 0 0 1.679-1.68c.243-.426.41-.992.498-1.987.061-.675.082-1.479.09-2.493Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 4a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 11h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 4H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM13.5 6.5A2.5 2.5 0 0 1 16 4h2a2.5 2.5 0 0 1 2.5 2.5v2A2.5 2.5 0 0 1 18 11h-2a2.5 2.5 0 0 1-2.5-2.5v-2Zm2.5-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1ZM7 13a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 20h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 13H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Z" fill="#fff"/><path d="M13.5 15.5c0-.465 0-.697.038-.89a2 2 0 0 1 1.572-1.572C15.303 13 15.535 13 16 13v2.5h-2.5ZM18 13c.465 0 .697 0 .89.038a2 2 0 0 1 1.572 1.572c.038.193.038.425.038.89H18V13ZM18 17.5h2.5c0 .465 0 .697-.038.89a2 2 0 0 1-1.572 1.572C18.697 20 18.465 20 18 20v-2.5ZM13.5 17.5H16V20c-.465 0-.697 0-.89-.038a2 2 0 0 1-1.572-1.572c-.038-.193-.038-.425-.038-.89Z" fill="#fff"/></svg>`,SCAN_ICON:st`<svg width="16" height="16" fill="none"><path fill="#fff" d="M10 15.216c0 .422.347.763.768.74 1.202-.064 2.025-.222 2.71-.613a5.001 5.001 0 0 0 1.865-1.866c.39-.684.549-1.507.613-2.709a.735.735 0 0 0-.74-.768.768.768 0 0 0-.76.732c-.009.157-.02.306-.032.447-.073.812-.206 1.244-.384 1.555-.31.545-.761.996-1.306 1.306-.311.178-.743.311-1.555.384-.141.013-.29.023-.447.032a.768.768 0 0 0-.732.76ZM10 .784c0 .407.325.737.732.76.157.009.306.02.447.032.812.073 1.244.206 1.555.384a3.5 3.5 0 0 1 1.306 1.306c.178.311.311.743.384 1.555.013.142.023.29.032.447a.768.768 0 0 0 .76.732.734.734 0 0 0 .74-.768c-.064-1.202-.222-2.025-.613-2.71A5 5 0 0 0 13.477.658c-.684-.39-1.507-.549-2.709-.613a.735.735 0 0 0-.768.74ZM5.232.044A.735.735 0 0 1 6 .784a.768.768 0 0 1-.732.76c-.157.009-.305.02-.447.032-.812.073-1.244.206-1.555.384A3.5 3.5 0 0 0 1.96 3.266c-.178.311-.311.743-.384 1.555-.013.142-.023.29-.032.447A.768.768 0 0 1 .784 6a.735.735 0 0 1-.74-.768c.064-1.202.222-2.025.613-2.71A5 5 0 0 1 2.523.658C3.207.267 4.03.108 5.233.044ZM5.268 14.456a.768.768 0 0 1 .732.76.734.734 0 0 1-.768.74c-1.202-.064-2.025-.222-2.71-.613a5 5 0 0 1-1.865-1.866c-.39-.684-.549-1.507-.613-2.709A.735.735 0 0 1 .784 10c.407 0 .737.325.76.732.009.157.02.306.032.447.073.812.206 1.244.384 1.555a3.5 3.5 0 0 0 1.306 1.306c.311.178.743.311 1.555.384.142.013.29.023.447.032Z"/></svg>`,CHECKMARK_ICON:st`<svg width="13" height="12" viewBox="0 0 13 12"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.155.132a.75.75 0 0 1 .232 1.035L5.821 11.535a1 1 0 0 1-1.626.09L.665 7.21a.75.75 0 1 1 1.17-.937L4.71 9.867a.25.25 0 0 0 .406-.023L11.12.364a.75.75 0 0 1 1.035-.232Z" fill="#fff"/></svg>`,SEARCH_ICON:st`<svg width="20" height="21"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.432 13.992c-.354-.353-.91-.382-1.35-.146a5.5 5.5 0 1 1 2.265-2.265c-.237.441-.208.997.145 1.35l3.296 3.296a.75.75 0 1 1-1.06 1.061l-3.296-3.296Zm.06-5a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z" fill="#949E9E"/></svg>`,WALLET_PLACEHOLDER:st`<svg width="60" height="60" fill="none" viewBox="0 0 60 60"><g clip-path="url(#q)"><path id="wallet-placeholder-fill" fill="#fff" d="M0 24.9c0-9.251 0-13.877 1.97-17.332a15 15 0 0 1 5.598-5.597C11.023 0 15.648 0 24.9 0h10.2c9.252 0 13.877 0 17.332 1.97a15 15 0 0 1 5.597 5.598C60 11.023 60 15.648 60 24.9v10.2c0 9.252 0 13.877-1.97 17.332a15.001 15.001 0 0 1-5.598 5.597C48.977 60 44.352 60 35.1 60H24.9c-9.251 0-13.877 0-17.332-1.97a15 15 0 0 1-5.597-5.598C0 48.977 0 44.352 0 35.1V24.9Z"/><path id="wallet-placeholder-dash" stroke="#000" stroke-dasharray="4 4" stroke-width="1.5" d="M.04 41.708a231.598 231.598 0 0 1-.039-4.403l.75-.001L.75 35.1v-2.55H0v-5.1h.75V24.9l.001-2.204h-.75c.003-1.617.011-3.077.039-4.404l.75.016c.034-1.65.099-3.08.218-4.343l-.746-.07c.158-1.678.412-3.083.82-4.316l.713.236c.224-.679.497-1.296.827-1.875a14.25 14.25 0 0 1 1.05-1.585L3.076 5.9A15 15 0 0 1 5.9 3.076l.455.596a14.25 14.25 0 0 1 1.585-1.05c.579-.33 1.196-.603 1.875-.827l-.236-.712C10.812.674 12.217.42 13.895.262l.07.746C15.23.89 16.66.824 18.308.79l-.016-.75C19.62.012 21.08.004 22.695.001l.001.75L24.9.75h2.55V0h5.1v.75h2.55l2.204.001v-.75c1.617.003 3.077.011 4.404.039l-.016.75c1.65.034 3.08.099 4.343.218l.07-.746c1.678.158 3.083.412 4.316.82l-.236.713c.679.224 1.296.497 1.875.827a14.24 14.24 0 0 1 1.585 1.05l.455-.596A14.999 14.999 0 0 1 56.924 5.9l-.596.455c.384.502.735 1.032 1.05 1.585.33.579.602 1.196.827 1.875l.712-.236c.409 1.233.663 2.638.822 4.316l-.747.07c.119 1.264.184 2.694.218 4.343l.75-.016c.028 1.327.036 2.787.039 4.403l-.75.001.001 2.204v2.55H60v5.1h-.75v2.55l-.001 2.204h.75a231.431 231.431 0 0 1-.039 4.404l-.75-.016c-.034 1.65-.099 3.08-.218 4.343l.747.07c-.159 1.678-.413 3.083-.822 4.316l-.712-.236a10.255 10.255 0 0 1-.827 1.875 14.242 14.242 0 0 1-1.05 1.585l.596.455a14.997 14.997 0 0 1-2.824 2.824l-.455-.596c-.502.384-1.032.735-1.585 1.05-.579.33-1.196.602-1.875.827l.236.712c-1.233.409-2.638.663-4.316.822l-.07-.747c-1.264.119-2.694.184-4.343.218l.016.75c-1.327.028-2.787.036-4.403.039l-.001-.75-2.204.001h-2.55V60h-5.1v-.75H24.9l-2.204-.001v.75a231.431 231.431 0 0 1-4.404-.039l.016-.75c-1.65-.034-3.08-.099-4.343-.218l-.07.747c-1.678-.159-3.083-.413-4.316-.822l.236-.712a10.258 10.258 0 0 1-1.875-.827 14.252 14.252 0 0 1-1.585-1.05l-.455.596A14.999 14.999 0 0 1 3.076 54.1l.596-.455a14.24 14.24 0 0 1-1.05-1.585 10.259 10.259 0 0 1-.827-1.875l-.712.236C.674 49.188.42 47.783.262 46.105l.746-.07C.89 44.77.824 43.34.79 41.692l-.75.016Z"/><path fill="#fff" fill-rule="evenodd" d="M35.643 32.145c-.297-.743-.445-1.114-.401-1.275a.42.42 0 0 1 .182-.27c.134-.1.463-.1 1.123-.1.742 0 1.499.046 2.236-.05a6 6 0 0 0 5.166-5.166c.051-.39.051-.855.051-1.784 0-.928 0-1.393-.051-1.783a6 6 0 0 0-5.166-5.165c-.39-.052-.854-.052-1.783-.052h-7.72c-4.934 0-7.401 0-9.244 1.051a8 8 0 0 0-2.985 2.986C16.057 22.28 16.003 24.58 16 29 15.998 31.075 16 33.15 16 35.224A7.778 7.778 0 0 0 23.778 43H28.5c1.394 0 2.09 0 2.67-.116a6 6 0 0 0 4.715-4.714c.115-.58.115-1.301.115-2.744 0-1.31 0-1.964-.114-2.49a4.998 4.998 0 0 0-.243-.792Z" clip-rule="evenodd"/><path fill="#9EA9A9" fill-rule="evenodd" d="M37 18h-7.72c-2.494 0-4.266.002-5.647.126-1.361.122-2.197.354-2.854.728a6.5 6.5 0 0 0-2.425 2.426c-.375.657-.607 1.492-.729 2.853-.11 1.233-.123 2.777-.125 4.867 0 .7 0 1.05.097 1.181.096.13.182.181.343.2.163.02.518-.18 1.229-.581a6.195 6.195 0 0 1 3.053-.8H37c.977 0 1.32-.003 1.587-.038a4.5 4.5 0 0 0 3.874-3.874c.036-.268.039-.611.039-1.588 0-.976-.003-1.319-.038-1.587a4.5 4.5 0 0 0-3.875-3.874C38.32 18.004 37.977 18 37 18Zm-7.364 12.5h-7.414a4.722 4.722 0 0 0-4.722 4.723 6.278 6.278 0 0 0 6.278 6.278H28.5c1.466 0 1.98-.008 2.378-.087a4.5 4.5 0 0 0 3.535-3.536c.08-.397.087-.933.087-2.451 0-1.391-.009-1.843-.08-2.17a3.5 3.5 0 0 0-2.676-2.676c-.328-.072-.762-.08-2.108-.08Z" clip-rule="evenodd"/></g><defs><clipPath id="q"><path fill="#fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>`,GLOBE_ICON:st`<svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="#fff" fill-rule="evenodd" d="M15.5 8a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0Zm-2.113.75c.301 0 .535.264.47.558a6.01 6.01 0 0 1-2.867 3.896c-.203.116-.42-.103-.334-.32.409-1.018.691-2.274.797-3.657a.512.512 0 0 1 .507-.477h1.427Zm.47-2.058c.065.294-.169.558-.47.558H11.96a.512.512 0 0 1-.507-.477c-.106-1.383-.389-2.638-.797-3.656-.087-.217.13-.437.333-.32a6.01 6.01 0 0 1 2.868 3.895Zm-4.402.558c.286 0 .515-.24.49-.525-.121-1.361-.429-2.534-.83-3.393-.279-.6-.549-.93-.753-1.112a.535.535 0 0 0-.724 0c-.204.182-.474.513-.754 1.112-.4.859-.708 2.032-.828 3.393a.486.486 0 0 0 .49.525h2.909Zm-5.415 0c.267 0 .486-.21.507-.477.106-1.383.389-2.638.797-3.656.087-.217-.13-.437-.333-.32a6.01 6.01 0 0 0-2.868 3.895c-.065.294.169.558.47.558H4.04ZM2.143 9.308c-.065-.294.169-.558.47-.558H4.04c.267 0 .486.21.507.477.106 1.383.389 2.639.797 3.657.087.217-.13.436-.333.32a6.01 6.01 0 0 1-2.868-3.896Zm3.913-.033a.486.486 0 0 1 .49-.525h2.909c.286 0 .515.24.49.525-.121 1.361-.428 2.535-.83 3.394-.279.6-.549.93-.753 1.112a.535.535 0 0 1-.724 0c-.204-.182-.474-.513-.754-1.112-.4-.859-.708-2.033-.828-3.394Z" clip-rule="evenodd"/></svg>`},hx=ze`.wcm-toolbar-placeholder{top:0;bottom:0;left:0;right:0;width:100%;position:absolute;display:block;pointer-events:none;height:100px;border-radius:calc(var(--wcm-background-border-radius) * .9);background-color:var(--wcm-background-color);background-position:center;background-size:cover}.wcm-toolbar{height:38px;display:flex;position:relative;margin:5px 15px 5px 5px;justify-content:space-between;align-items:center}.wcm-toolbar img,.wcm-toolbar svg{height:28px;object-position:left center;object-fit:contain}#wcm-wc-logo path{fill:var(--wcm-accent-fill-color)}button{width:28px;height:28px;border-radius:var(--wcm-icon-button-border-radius);border:0;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:var(--wcm-color-bg-1);box-shadow:0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-bg-2)}button svg{display:block;object-position:center}button path{fill:var(--wcm-color-fg-1)}.wcm-toolbar div{display:flex}@media(hover:hover){button:hover{background-color:var(--wcm-color-bg-2)}}`;var fx=Object.defineProperty,dx=Object.getOwnPropertyDescriptor,px=(e,t,r,n)=>{for(var i=n>1?void 0:n?dx(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&fx(t,r,i),i};let Al=class extends Ee{render(){return J`<div class="wcm-toolbar-placeholder"></div><div class="wcm-toolbar">${We.WALLET_CONNECT_LOGO} <button @click="${gn.close}">${We.CROSS_ICON}</button></div>`}};Al.styles=[Pe.globalCss,hx],Al=px([Ne("wcm-modal-backcard")],Al);const gx=ze`main{padding:20px;padding-top:0;width:100%}`;var mx=Object.defineProperty,vx=Object.getOwnPropertyDescriptor,yx=(e,t,r,n)=>{for(var i=n>1?void 0:n?vx(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&mx(t,r,i),i};let Dl=class extends Ee{render(){return J`<main><slot></slot></main>`}};Dl.styles=[Pe.globalCss,gx],Dl=yx([Ne("wcm-modal-content")],Dl);const wx=ze`footer{padding:10px;display:flex;flex-direction:column;align-items:inherit;justify-content:inherit;border-top:1px solid var(--wcm-color-bg-2)}`;var bx=Object.defineProperty,_x=Object.getOwnPropertyDescriptor,Ex=(e,t,r,n)=>{for(var i=n>1?void 0:n?_x(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&bx(t,r,i),i};let Ol=class extends Ee{render(){return J`<footer><slot></slot></footer>`}};Ol.styles=[Pe.globalCss,wx],Ol=Ex([Ne("wcm-modal-footer")],Ol);const xx=ze`header{display:flex;justify-content:center;align-items:center;padding:20px;position:relative}.wcm-border{border-bottom:1px solid var(--wcm-color-bg-2);margin-bottom:20px}header button{padding:15px 20px}header button:active{opacity:.5}@media(hover:hover){header button:hover{opacity:.5}}.wcm-back-btn{position:absolute;left:0}.wcm-action-btn{position:absolute;right:0}path{fill:var(--wcm-accent-color)}`;var Sx=Object.defineProperty,Cx=Object.getOwnPropertyDescriptor,yo=(e,t,r,n)=>{for(var i=n>1?void 0:n?Cx(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&Sx(t,r,i),i};let Mn=class extends Ee{constructor(){super(...arguments),this.title="",this.onAction=void 0,this.actionIcon=void 0,this.border=!1}backBtnTemplate(){return J`<button class="wcm-back-btn" @click="${tt.goBack}">${We.BACK_ICON}</button>`}actionBtnTemplate(){return J`<button class="wcm-action-btn" @click="${this.onAction}">${this.actionIcon}</button>`}render(){const e={"wcm-border":this.border},t=tt.state.history.length>1,r=this.title?J`<wcm-text variant="big-bold">${this.title}</wcm-text>`:J`<slot></slot>`;return J`<header class="${jr(e)}">${t?this.backBtnTemplate():null} ${r} ${this.onAction?this.actionBtnTemplate():null}</header>`}};Mn.styles=[Pe.globalCss,xx],yo([ge()],Mn.prototype,"title",2),yo([ge()],Mn.prototype,"onAction",2),yo([ge()],Mn.prototype,"actionIcon",2),yo([ge({type:Boolean})],Mn.prototype,"border",2),Mn=yo([Ne("wcm-modal-header")],Mn);const he={MOBILE_BREAKPOINT:600,WCM_RECENT_WALLET_DATA:"WCM_RECENT_WALLET_DATA",EXPLORER_WALLET_URL:"https://explorer.walletconnect.com/?type=wallet",getShadowRootElement(e,t){const r=e.renderRoot.querySelector(t);if(!r)throw new Error(`${t} not found`);return r},getWalletIcon({id:e,image_id:t}){const{walletImages:r}=tr.state;return r!=null&&r[e]?r[e]:t?Yt.getWalletImageUrl(t):""},getWalletName(e,t=!1){return t&&e.length>8?`${e.substring(0,8)}..`:e},isMobileAnimation(){return window.innerWidth<=he.MOBILE_BREAKPOINT},async preloadImage(e){const t=new Promise((r,n)=>{const i=new Image;i.onload=r,i.onerror=n,i.crossOrigin="anonymous",i.src=e});return Promise.race([t,ie.wait(3e3)])},getErrorMessage(e){return e instanceof Error?e.message:"Unknown Error"},debounce(e,t=500){let r;return(...n)=>{function i(){e(...n)}r&&clearTimeout(r),r=setTimeout(i,t)}},handleMobileLinking(e){const{walletConnectUri:t}=ft.state,{mobile:r,name:n}=e,i=r==null?void 0:r.native,o=r==null?void 0:r.universal;he.setRecentWallet(e);function s(a){let c="";i?c=ie.formatUniversalUrl(i,a,n):o&&(c=ie.formatNativeUrl(o,a,n)),ie.openHref(c,"_self")}t&&s(t)},handleAndroidLinking(){const{walletConnectUri:e}=ft.state;e&&(ie.setWalletConnectAndroidDeepLink(e),ie.openHref(e,"_self"))},async handleUriCopy(){const{walletConnectUri:e}=ft.state;if(e)try{await navigator.clipboard.writeText(e),qr.openToast("Link copied","success")}catch{qr.openToast("Failed to copy","error")}},getCustomImageUrls(){const{walletImages:e}=tr.state,t=Object.values(e??{});return Object.values(t)},truncate(e,t=8){return e.length<=t?e:`${e.substring(0,4)}...${e.substring(e.length-4)}`},setRecentWallet(e){try{localStorage.setItem(he.WCM_RECENT_WALLET_DATA,JSON.stringify(e))}catch{console.info("Unable to set recent wallet")}},getRecentWallet(){try{const e=localStorage.getItem(he.WCM_RECENT_WALLET_DATA);return e?JSON.parse(e):void 0}catch{console.info("Unable to get recent wallet")}},caseSafeIncludes(e,t){return e.toUpperCase().includes(t.toUpperCase())},openWalletExplorerUrl(){ie.openHref(he.EXPLORER_WALLET_URL,"_blank")},getCachedRouterWalletPlatforms(){const{desktop:e,mobile:t}=ie.getWalletRouterData(),r=!!(e!=null&&e.native),n=!!(e!=null&&e.universal),i=!!(t!=null&&t.native)||!!(t!=null&&t.universal);return{isDesktop:r,isMobile:i,isWeb:n}},goToConnectingView(e){tt.setData({Wallet:e});const t=ie.isMobile(),{isDesktop:r,isWeb:n,isMobile:i}=he.getCachedRouterWalletPlatforms();t?i?tt.push("MobileConnecting"):n?tt.push("WebConnecting"):tt.push("InstallWallet"):r?tt.push("DesktopConnecting"):n?tt.push("WebConnecting"):i?tt.push("MobileQrcodeConnecting"):tt.push("InstallWallet")}},Ax=ze`.wcm-router{overflow:hidden;will-change:transform}.wcm-content{display:flex;flex-direction:column}`;var Dx=Object.defineProperty,Ox=Object.getOwnPropertyDescriptor,Il=(e,t,r,n)=>{for(var i=n>1?void 0:n?Ox(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&Dx(t,r,i),i};let wo=class extends Ee{constructor(){super(),this.view=tt.state.view,this.prevView=tt.state.view,this.unsubscribe=void 0,this.oldHeight="0px",this.resizeObserver=void 0,this.unsubscribe=tt.subscribe(e=>{this.view!==e.view&&this.onChangeRoute()})}firstUpdated(){this.resizeObserver=new ResizeObserver(([e])=>{const t=`${e.contentRect.height}px`;this.oldHeight!=="0px"&&Ln(this.routerEl,{height:[this.oldHeight,t]},{duration:.2}),this.oldHeight=t}),this.resizeObserver.observe(this.contentEl)}disconnectedCallback(){var e,t;(e=this.unsubscribe)==null||e.call(this),(t=this.resizeObserver)==null||t.disconnect()}get routerEl(){return he.getShadowRootElement(this,".wcm-router")}get contentEl(){return he.getShadowRootElement(this,".wcm-content")}viewTemplate(){switch(this.view){case"ConnectWallet":return J`<wcm-connect-wallet-view></wcm-connect-wallet-view>`;case"DesktopConnecting":return J`<wcm-desktop-connecting-view></wcm-desktop-connecting-view>`;case"MobileConnecting":return J`<wcm-mobile-connecting-view></wcm-mobile-connecting-view>`;case"WebConnecting":return J`<wcm-web-connecting-view></wcm-web-connecting-view>`;case"MobileQrcodeConnecting":return J`<wcm-mobile-qr-connecting-view></wcm-mobile-qr-connecting-view>`;case"WalletExplorer":return J`<wcm-wallet-explorer-view></wcm-wallet-explorer-view>`;case"Qrcode":return J`<wcm-qrcode-view></wcm-qrcode-view>`;case"InstallWallet":return J`<wcm-install-wallet-view></wcm-install-wallet-view>`;default:return J`<div>Not Found</div>`}}async onChangeRoute(){await Ln(this.routerEl,{opacity:[1,0],scale:[1,1.02]},{duration:.15,delay:.1}).finished,this.view=tt.state.view,Ln(this.routerEl,{opacity:[0,1],scale:[.99,1]},{duration:.37,delay:.05})}render(){return J`<div class="wcm-router"><div class="wcm-content">${this.viewTemplate()}</div></div>`}};wo.styles=[Pe.globalCss,Ax],Il([Qt()],wo.prototype,"view",2),Il([Qt()],wo.prototype,"prevView",2),wo=Il([Ne("wcm-modal-router")],wo);const Ix=ze`div{height:36px;width:max-content;display:flex;justify-content:center;align-items:center;padding:9px 15px 11px;position:absolute;top:12px;box-shadow:0 6px 14px -6px rgba(10,16,31,.3),0 10px 32px -4px rgba(10,16,31,.15);z-index:2;left:50%;transform:translateX(-50%);pointer-events:none;backdrop-filter:blur(20px) saturate(1.8);-webkit-backdrop-filter:blur(20px) saturate(1.8);border-radius:var(--wcm-notification-border-radius);border:1px solid var(--wcm-color-overlay);background-color:var(--wcm-color-overlay)}svg{margin-right:5px}@-moz-document url-prefix(){div{background-color:var(--wcm-color-bg-3)}}.wcm-success path{fill:var(--wcm-accent-color)}.wcm-error path{fill:var(--wcm-error-color)}`;var Tx=Object.defineProperty,$x=Object.getOwnPropertyDescriptor,$p=(e,t,r,n)=>{for(var i=n>1?void 0:n?$x(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&Tx(t,r,i),i};let Os=class extends Ee{constructor(){super(),this.open=!1,this.unsubscribe=void 0,this.timeout=void 0,this.unsubscribe=qr.subscribe(e=>{e.open?(this.open=!0,this.timeout=setTimeout(()=>qr.closeToast(),2200)):(this.open=!1,clearTimeout(this.timeout))})}disconnectedCallback(){var e;(e=this.unsubscribe)==null||e.call(this),clearTimeout(this.timeout),qr.closeToast()}render(){const{message:e,variant:t}=qr.state,r={"wcm-success":t==="success","wcm-error":t==="error"};return this.open?J`<div class="${jr(r)}">${t==="success"?We.CHECKMARK_ICON:null} ${t==="error"?We.CROSS_ICON:null}<wcm-text variant="small-regular">${e}</wcm-text></div>`:null}};Os.styles=[Pe.globalCss,Ix],$p([Qt()],Os.prototype,"open",2),Os=$p([Ne("wcm-modal-toast")],Os);const Rx=.1,Rp=2.5,kr=7;function Tl(e,t,r){return e===t?!1:(e-t<0?t-e:e-t)<=r+Rx}function Px(e,t){const r=Array.prototype.slice.call(fo.create(e,{errorCorrectionLevel:t}).modules.data,0),n=Math.sqrt(r.length);return r.reduce((i,o,s)=>(s%n===0?i.push([o]):i[i.length-1].push(o))&&i,[])}const Nx={generate(e,t,r){const n="#141414",i="#ffffff",o=[],s=Px(e,"Q"),a=t/s.length,c=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];c.forEach(({x:b,y:_})=>{const A=(s.length-kr)*a*b,I=(s.length-kr)*a*_,w=.45;for(let E=0;E<c.length;E+=1){const y=a*(kr-E*2);o.push(st`<rect fill="${E%2===0?n:i}" height="${y}" rx="${y*w}" ry="${y*w}" width="${y}" x="${A+a*E}" y="${I+a*E}">`)}});const u=Math.floor((r+25)/a),h=s.length/2-u/2,d=s.length/2+u/2-1,p=[];s.forEach((b,_)=>{b.forEach((A,I)=>{if(s[_][I]&&!(_<kr&&I<kr||_>s.length-(kr+1)&&I<kr||_<kr&&I>s.length-(kr+1))&&!(_>h&&_<d&&I>h&&I<d)){const w=_*a+a/2,E=I*a+a/2;p.push([w,E])}})});const m={};return p.forEach(([b,_])=>{m[b]?m[b].push(_):m[b]=[_]}),Object.entries(m).map(([b,_])=>{const A=_.filter(I=>_.every(w=>!Tl(I,w,a)));return[Number(b),A]}).forEach(([b,_])=>{_.forEach(A=>{o.push(st`<circle cx="${b}" cy="${A}" fill="${n}" r="${a/Rp}">`)})}),Object.entries(m).filter(([b,_])=>_.length>1).map(([b,_])=>{const A=_.filter(I=>_.some(w=>Tl(I,w,a)));return[Number(b),A]}).map(([b,_])=>{_.sort((I,w)=>I<w?-1:1);const A=[];for(const I of _){const w=A.find(E=>E.some(y=>Tl(I,y,a)));w?w.push(I):A.push([I])}return[b,A.map(I=>[I[0],I[I.length-1]])]}).forEach(([b,_])=>{_.forEach(([A,I])=>{o.push(st`<line x1="${b}" x2="${b}" y1="${A}" y2="${I}" stroke="${n}" stroke-width="${a/(Rp/2)}" stroke-linecap="round">`)})}),o}},Lx=ze`@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}div{position:relative;user-select:none;display:block;overflow:hidden;aspect-ratio:1/1;animation:fadeIn ease .2s}.wcm-dark{background-color:#fff;border-radius:var(--wcm-container-border-radius);padding:18px;box-shadow:0 2px 5px #000}svg:first-child,wcm-wallet-image{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{width:25%;height:25%;border-radius:var(--wcm-wallet-icon-border-radius)}svg:first-child{transform:translateY(-50%) translateX(-50%) scale(.9)}svg:first-child path:first-child{fill:var(--wcm-accent-color)}svg:first-child path:last-child{stroke:var(--wcm-color-overlay)}`;var Mx=Object.defineProperty,Fx=Object.getOwnPropertyDescriptor,vi=(e,t,r,n)=>{for(var i=n>1?void 0:n?Fx(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&Mx(t,r,i),i};let Br=class extends Ee{constructor(){super(...arguments),this.uri="",this.size=0,this.imageId=void 0,this.walletId=void 0,this.imageUrl=void 0}svgTemplate(){const e=Vr.state.themeMode==="light"?this.size:this.size-36;return st`<svg height="${e}" width="${e}">${Nx.generate(this.uri,e,e/4)}</svg>`}render(){const e={"wcm-dark":Vr.state.themeMode==="dark"};return J`<div style="${`width: ${this.size}px`}" class="${jr(e)}">${this.walletId||this.imageUrl?J`<wcm-wallet-image walletId="${Gt(this.walletId)}" imageId="${Gt(this.imageId)}" imageUrl="${Gt(this.imageUrl)}"></wcm-wallet-image>`:We.WALLET_CONNECT_ICON_COLORED} ${this.svgTemplate()}</div>`}};Br.styles=[Pe.globalCss,Lx],vi([ge()],Br.prototype,"uri",2),vi([ge({type:Number})],Br.prototype,"size",2),vi([ge()],Br.prototype,"imageId",2),vi([ge()],Br.prototype,"walletId",2),vi([ge()],Br.prototype,"imageUrl",2),Br=vi([Ne("wcm-qrcode")],Br);const Ux=ze`:host{position:relative;height:28px;width:80%}input{width:100%;height:100%;line-height:28px!important;border-radius:var(--wcm-input-border-radius);font-style:normal;font-family:-apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,'Helvetica Neue',sans-serif;font-feature-settings:'case' on;font-weight:500;font-size:16px;letter-spacing:-.03em;padding:0 10px 0 34px;transition:.2s all ease;color:var(--wcm-color-fg-1);background-color:var(--wcm-color-bg-3);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay);caret-color:var(--wcm-accent-color)}input::placeholder{color:var(--wcm-color-fg-2)}svg{left:10px;top:4px;pointer-events:none;position:absolute;width:20px;height:20px}input:focus-within{box-shadow:inset 0 0 0 1px var(--wcm-accent-color)}path{fill:var(--wcm-color-fg-2)}`;var jx=Object.defineProperty,kx=Object.getOwnPropertyDescriptor,Pp=(e,t,r,n)=>{for(var i=n>1?void 0:n?kx(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&jx(t,r,i),i};let Is=class extends Ee{constructor(){super(...arguments),this.onChange=()=>null}render(){return J`<input type="text" @input="${this.onChange}" placeholder="Search wallets"> ${We.SEARCH_ICON}`}};Is.styles=[Pe.globalCss,Ux],Pp([ge()],Is.prototype,"onChange",2),Is=Pp([Ne("wcm-search-input")],Is);const Bx=ze`@keyframes rotate{100%{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}svg{animation:rotate 2s linear infinite;display:flex;justify-content:center;align-items:center}svg circle{stroke-linecap:round;animation:dash 1.5s ease infinite;stroke:var(--wcm-accent-color)}`;var zx=Object.defineProperty,Wx=Object.getOwnPropertyDescriptor,Hx=(e,t,r,n)=>{for(var i=n>1?void 0:n?Wx(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&zx(t,r,i),i};let $l=class extends Ee{render(){return J`<svg viewBox="0 0 50 50" width="24" height="24"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4" stroke="#fff"/></svg>`}};$l.styles=[Pe.globalCss,Bx],$l=Hx([Ne("wcm-spinner")],$l);const Vx=ze`span{font-style:normal;font-family:var(--wcm-font-family);font-feature-settings:var(--wcm-font-feature-settings)}.wcm-xsmall-bold{font-family:var(--wcm-text-xsmall-bold-font-family);font-weight:var(--wcm-text-xsmall-bold-weight);font-size:var(--wcm-text-xsmall-bold-size);line-height:var(--wcm-text-xsmall-bold-line-height);letter-spacing:var(--wcm-text-xsmall-bold-letter-spacing);text-transform:var(--wcm-text-xsmall-bold-text-transform)}.wcm-xsmall-regular{font-family:var(--wcm-text-xsmall-regular-font-family);font-weight:var(--wcm-text-xsmall-regular-weight);font-size:var(--wcm-text-xsmall-regular-size);line-height:var(--wcm-text-xsmall-regular-line-height);letter-spacing:var(--wcm-text-xsmall-regular-letter-spacing);text-transform:var(--wcm-text-xsmall-regular-text-transform)}.wcm-small-thin{font-family:var(--wcm-text-small-thin-font-family);font-weight:var(--wcm-text-small-thin-weight);font-size:var(--wcm-text-small-thin-size);line-height:var(--wcm-text-small-thin-line-height);letter-spacing:var(--wcm-text-small-thin-letter-spacing);text-transform:var(--wcm-text-small-thin-text-transform)}.wcm-small-regular{font-family:var(--wcm-text-small-regular-font-family);font-weight:var(--wcm-text-small-regular-weight);font-size:var(--wcm-text-small-regular-size);line-height:var(--wcm-text-small-regular-line-height);letter-spacing:var(--wcm-text-small-regular-letter-spacing);text-transform:var(--wcm-text-small-regular-text-transform)}.wcm-medium-regular{font-family:var(--wcm-text-medium-regular-font-family);font-weight:var(--wcm-text-medium-regular-weight);font-size:var(--wcm-text-medium-regular-size);line-height:var(--wcm-text-medium-regular-line-height);letter-spacing:var(--wcm-text-medium-regular-letter-spacing);text-transform:var(--wcm-text-medium-regular-text-transform)}.wcm-big-bold{font-family:var(--wcm-text-big-bold-font-family);font-weight:var(--wcm-text-big-bold-weight);font-size:var(--wcm-text-big-bold-size);line-height:var(--wcm-text-big-bold-line-height);letter-spacing:var(--wcm-text-big-bold-letter-spacing);text-transform:var(--wcm-text-big-bold-text-transform)}:host(*){color:var(--wcm-color-fg-1)}.wcm-color-primary{color:var(--wcm-color-fg-1)}.wcm-color-secondary{color:var(--wcm-color-fg-2)}.wcm-color-tertiary{color:var(--wcm-color-fg-3)}.wcm-color-inverse{color:var(--wcm-accent-fill-color)}.wcm-color-accnt{color:var(--wcm-accent-color)}.wcm-color-error{color:var(--wcm-error-color)}`;var qx=Object.defineProperty,Kx=Object.getOwnPropertyDescriptor,Rl=(e,t,r,n)=>{for(var i=n>1?void 0:n?Kx(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&qx(t,r,i),i};let bo=class extends Ee{constructor(){super(...arguments),this.variant="medium-regular",this.color="primary"}render(){const e={"wcm-big-bold":this.variant==="big-bold","wcm-medium-regular":this.variant==="medium-regular","wcm-small-regular":this.variant==="small-regular","wcm-small-thin":this.variant==="small-thin","wcm-xsmall-regular":this.variant==="xsmall-regular","wcm-xsmall-bold":this.variant==="xsmall-bold","wcm-color-primary":this.color==="primary","wcm-color-secondary":this.color==="secondary","wcm-color-tertiary":this.color==="tertiary","wcm-color-inverse":this.color==="inverse","wcm-color-accnt":this.color==="accent","wcm-color-error":this.color==="error"};return J`<span><slot class="${jr(e)}"></slot></span>`}};bo.styles=[Pe.globalCss,Vx],Rl([ge()],bo.prototype,"variant",2),Rl([ge()],bo.prototype,"color",2),bo=Rl([Ne("wcm-text")],bo);const Gx=ze`button{width:100%;height:100%;border-radius:var(--wcm-button-hover-highlight-border-radius);display:flex;align-items:flex-start}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}button>div{width:80px;padding:5px 0;display:flex;flex-direction:column;align-items:center}wcm-text{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}wcm-wallet-image{height:60px;width:60px;transition:all .2s ease;border-radius:var(--wcm-wallet-icon-border-radius);margin-bottom:5px}.wcm-sublabel{margin-top:2px}`;var Yx=Object.defineProperty,Jx=Object.getOwnPropertyDescriptor,on=(e,t,r,n)=>{for(var i=n>1?void 0:n?Jx(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&Yx(t,r,i),i};let $r=class extends Ee{constructor(){super(...arguments),this.onClick=()=>null,this.name="",this.walletId="",this.label=void 0,this.imageId=void 0,this.installed=!1,this.recent=!1}sublabelTemplate(){return this.recent?J`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">RECENT</wcm-text>`:this.installed?J`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">INSTALLED</wcm-text>`:null}handleClick(){Jl.click({name:"WALLET_BUTTON",walletId:this.walletId}),this.onClick()}render(){var e;return J`<button @click="${this.handleClick.bind(this)}"><div><wcm-wallet-image walletId="${this.walletId}" imageId="${Gt(this.imageId)}"></wcm-wallet-image><wcm-text variant="xsmall-regular">${(e=this.label)!=null?e:he.getWalletName(this.name,!0)}</wcm-text>${this.sublabelTemplate()}</div></button>`}};$r.styles=[Pe.globalCss,Gx],on([ge()],$r.prototype,"onClick",2),on([ge()],$r.prototype,"name",2),on([ge()],$r.prototype,"walletId",2),on([ge()],$r.prototype,"label",2),on([ge()],$r.prototype,"imageId",2),on([ge({type:Boolean})],$r.prototype,"installed",2),on([ge({type:Boolean})],$r.prototype,"recent",2),$r=on([Ne("wcm-wallet-button")],$r);const Zx=ze`:host{display:block}div{overflow:hidden;position:relative;border-radius:inherit;width:100%;height:100%;background-color:var(--wcm-color-overlay)}svg{position:relative;width:100%;height:100%}div::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;border-radius:inherit;border:1px solid var(--wcm-color-overlay)}div img{width:100%;height:100%;object-fit:cover;object-position:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var Xx=Object.defineProperty,Qx=Object.getOwnPropertyDescriptor,Ts=(e,t,r,n)=>{for(var i=n>1?void 0:n?Qx(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&Xx(t,r,i),i};let yi=class extends Ee{constructor(){super(...arguments),this.walletId="",this.imageId=void 0,this.imageUrl=void 0}render(){var e;const t=(e=this.imageUrl)!=null&&e.length?this.imageUrl:he.getWalletIcon({id:this.walletId,image_id:this.imageId});return J`${t.length?J`<div><img crossorigin="anonymous" src="${t}" alt="${this.id}"></div>`:We.WALLET_PLACEHOLDER}`}};yi.styles=[Pe.globalCss,Zx],Ts([ge()],yi.prototype,"walletId",2),Ts([ge()],yi.prototype,"imageId",2),Ts([ge()],yi.prototype,"imageUrl",2),yi=Ts([Ne("wcm-wallet-image")],yi);var e8=Object.defineProperty,t8=Object.getOwnPropertyDescriptor,Np=(e,t,r,n)=>{for(var i=n>1?void 0:n?t8(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&e8(t,r,i),i};let Pl=class extends Ee{constructor(){super(),this.preload=!0,this.preloadData()}async loadImages(e){try{e!=null&&e.length&&await Promise.all(e.map(async t=>he.preloadImage(t)))}catch{console.info("Unsuccessful attempt at preloading some images",e)}}async preloadListings(){if(tr.state.enableExplorer){await Yt.getRecomendedWallets(),ft.setIsDataLoaded(!0);const{recomendedWallets:e}=Yt.state,t=e.map(r=>he.getWalletIcon(r));await this.loadImages(t)}else ft.setIsDataLoaded(!0)}async preloadCustomImages(){const e=he.getCustomImageUrls();await this.loadImages(e)}async preloadData(){try{this.preload&&(this.preload=!1,await Promise.all([this.preloadListings(),this.preloadCustomImages()]))}catch(e){console.error(e),qr.openToast("Failed preloading","error")}}};Np([Qt()],Pl.prototype,"preload",2),Pl=Np([Ne("wcm-explorer-context")],Pl);var r8=Object.defineProperty,n8=Object.getOwnPropertyDescriptor,i8=(e,t,r,n)=>{for(var i=n>1?void 0:n?n8(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&r8(t,r,i),i};let Lp=class extends Ee{constructor(){super(),this.unsubscribeTheme=void 0,Pe.setTheme(),this.unsubscribeTheme=Vr.subscribe(Pe.setTheme)}disconnectedCallback(){var e;(e=this.unsubscribeTheme)==null||e.call(this)}};Lp=i8([Ne("wcm-theme-context")],Lp);const o8=ze`@keyframes scroll{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(calc(-70px * 9),0,0)}}.wcm-slider{position:relative;overflow-x:hidden;padding:10px 0;margin:0 -20px;width:calc(100% + 40px)}.wcm-track{display:flex;width:calc(70px * 18);animation:scroll 20s linear infinite;opacity:.7}.wcm-track svg{margin:0 5px}wcm-wallet-image{width:60px;height:60px;margin:0 5px;border-radius:var(--wcm-wallet-icon-border-radius)}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-title{display:flex;align-items:center;margin-bottom:10px}.wcm-title svg{margin-right:6px}.wcm-title path{fill:var(--wcm-accent-color)}wcm-modal-footer .wcm-title{padding:0 10px}wcm-button-big{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);filter:drop-shadow(0 0 17px var(--wcm-color-bg-1))}wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-info-footer wcm-text{text-align:center;margin-bottom:15px}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var s8=Object.defineProperty,a8=Object.getOwnPropertyDescriptor,c8=(e,t,r,n)=>{for(var i=n>1?void 0:n?a8(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&s8(t,r,i),i};let Nl=class extends Ee{onGoToQrcode(){tt.push("Qrcode")}render(){const{recomendedWallets:e}=Yt.state,t=[...e,...e],r=ie.RECOMMENDED_WALLET_AMOUNT*2;return J`<wcm-modal-header title="Connect your wallet" .onAction="${this.onGoToQrcode}" .actionIcon="${We.QRCODE_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-title">${We.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">WalletConnect</wcm-text></div><div class="wcm-slider"><div class="wcm-track">${[...Array(r)].map((n,i)=>{const o=t[i%t.length];return o?J`<wcm-wallet-image walletId="${o.id}" imageId="${o.image_id}"></wcm-wallet-image>`:We.WALLET_PLACEHOLDER})}</div><wcm-button-big @click="${he.handleAndroidLinking}"><wcm-text variant="medium-regular" color="inverse">Select Wallet</wcm-text></wcm-button-big></div></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">Choose WalletConnect to see supported apps on your device</wcm-text></wcm-info-footer>`}};Nl.styles=[Pe.globalCss,o8],Nl=c8([Ne("wcm-android-wallet-selection")],Nl);const l8=ze`@keyframes loading{to{stroke-dashoffset:0}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(1px,0,0)}30%,50%,70%{transform:translate3d(-2px,0,0)}40%,60%{transform:translate3d(2px,0,0)}}:host{display:flex;flex-direction:column;align-items:center}div{position:relative;width:110px;height:110px;display:flex;justify-content:center;align-items:center;margin:40px 0 20px 0;transform:translate3d(0,0,0)}svg{position:absolute;width:110px;height:110px;fill:none;stroke:transparent;stroke-linecap:round;stroke-width:2px;top:0;left:0}use{stroke:var(--wcm-accent-color);animation:loading 1s linear infinite}wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:90px;height:90px}wcm-text{margin-bottom:40px}.wcm-error svg{stroke:var(--wcm-error-color)}.wcm-error use{display:none}.wcm-error{animation:shake .4s cubic-bezier(.36,.07,.19,.97) both}.wcm-stale svg,.wcm-stale use{display:none}`;var u8=Object.defineProperty,h8=Object.getOwnPropertyDescriptor,wi=(e,t,r,n)=>{for(var i=n>1?void 0:n?h8(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&u8(t,r,i),i};let sn=class extends Ee{constructor(){super(...arguments),this.walletId=void 0,this.imageId=void 0,this.isError=!1,this.isStale=!1,this.label=""}svgLoaderTemplate(){var e,t;const r=(t=(e=Vr.state.themeVariables)==null?void 0:e["--wcm-wallet-icon-large-border-radius"])!=null?t:Pe.getPreset("--wcm-wallet-icon-large-border-radius");let n=0;r.includes("%")?n=88/100*parseInt(r,10):n=parseInt(r,10),n*=1.17;const i=317-n*1.57,o=425-n*1.8;return J`<svg viewBox="0 0 110 110" width="110" height="110"><rect id="wcm-loader" x="2" y="2" width="106" height="106" rx="${n}"/><use xlink:href="#wcm-loader" stroke-dasharray="106 ${i}" stroke-dashoffset="${o}"></use></svg>`}render(){const e={"wcm-error":this.isError,"wcm-stale":this.isStale};return J`<div class="${jr(e)}">${this.svgLoaderTemplate()}<wcm-wallet-image walletId="${Gt(this.walletId)}" imageId="${Gt(this.imageId)}"></wcm-wallet-image></div><wcm-text variant="medium-regular" color="${this.isError?"error":"primary"}">${this.isError?"Connection declined":this.label}</wcm-text>`}};sn.styles=[Pe.globalCss,l8],wi([ge()],sn.prototype,"walletId",2),wi([ge()],sn.prototype,"imageId",2),wi([ge({type:Boolean})],sn.prototype,"isError",2),wi([ge({type:Boolean})],sn.prototype,"isStale",2),wi([ge()],sn.prototype,"label",2),sn=wi([Ne("wcm-connector-waiting")],sn);const bi={manualWallets(){var e,t;const{mobileWallets:r,desktopWallets:n}=tr.state,i=(e=bi.recentWallet())==null?void 0:e.id,o=ie.isMobile()?r:n,s=o==null?void 0:o.filter(a=>i!==a.id);return(t=ie.isMobile()?s==null?void 0:s.map(({id:a,name:c,links:u})=>({id:a,name:c,mobile:u,links:u})):s==null?void 0:s.map(({id:a,name:c,links:u})=>({id:a,name:c,desktop:u,links:u})))!=null?t:[]},recentWallet(){return he.getRecentWallet()},recomendedWallets(e=!1){var t;const r=e||(t=bi.recentWallet())==null?void 0:t.id,{recomendedWallets:n}=Yt.state;return n.filter(i=>r!==i.id)}},an={onConnecting(e){he.goToConnectingView(e)},manualWalletsTemplate(){return bi.manualWallets().map(e=>J`<wcm-wallet-button walletId="${e.id}" name="${e.name}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`)},recomendedWalletsTemplate(e=!1){return bi.recomendedWallets(e).map(t=>J`<wcm-wallet-button name="${t.name}" walletId="${t.id}" imageId="${t.image_id}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`)},recentWalletTemplate(){const e=bi.recentWallet();if(e)return J`<wcm-wallet-button name="${e.name}" walletId="${e.id}" imageId="${Gt(e.image_id)}" .recent="${!0}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`}},f8=ze`.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-desktop-title,.wcm-mobile-title{display:flex;align-items:center}.wcm-mobile-title{justify-content:space-between;margin-bottom:20px;margin-top:-10px}.wcm-desktop-title{margin-bottom:10px;padding:0 10px}.wcm-subtitle{display:flex;align-items:center}.wcm-subtitle:last-child path{fill:var(--wcm-color-fg-3)}.wcm-desktop-title svg,.wcm-mobile-title svg{margin-right:6px}.wcm-desktop-title path,.wcm-mobile-title path{fill:var(--wcm-accent-color)}`;var d8=Object.defineProperty,p8=Object.getOwnPropertyDescriptor,g8=(e,t,r,n)=>{for(var i=n>1?void 0:n?p8(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&d8(t,r,i),i};let Ll=class extends Ee{render(){const{explorerExcludedWalletIds:e,enableExplorer:t}=tr.state,r=e!=="ALL"&&t,n=an.manualWalletsTemplate(),i=an.recomendedWalletsTemplate();let o=[an.recentWalletTemplate(),...n,...i];o=o.filter(Boolean);const s=o.length>4||r;let a=[];s?a=o.slice(0,3):a=o;const c=!!a.length;return J`<wcm-modal-header .border="${!0}" title="Connect your wallet" .onAction="${he.handleUriCopy}" .actionIcon="${We.COPY_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-mobile-title"><div class="wcm-subtitle">${We.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">Mobile</wcm-text></div><div class="wcm-subtitle">${We.SCAN_ICON}<wcm-text variant="small-regular" color="secondary">Scan with your wallet</wcm-text></div></div><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>${c?J`<wcm-modal-footer><div class="wcm-desktop-title">${We.DESKTOP_ICON}<wcm-text variant="small-regular" color="accent">Desktop</wcm-text></div><div class="wcm-grid">${a} ${s?J`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-footer>`:null}`}};Ll.styles=[Pe.globalCss,f8],Ll=g8([Ne("wcm-desktop-wallet-selection")],Ll);const m8=ze`div{background-color:var(--wcm-color-bg-2);padding:10px 20px 15px 20px;border-top:1px solid var(--wcm-color-bg-3);text-align:center}a{color:var(--wcm-accent-color);text-decoration:none;transition:opacity .2s ease-in-out;display:inline}a:active{opacity:.8}@media(hover:hover){a:hover{opacity:.8}}`;var v8=Object.defineProperty,y8=Object.getOwnPropertyDescriptor,w8=(e,t,r,n)=>{for(var i=n>1?void 0:n?y8(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&v8(t,r,i),i};let Ml=class extends Ee{render(){const{termsOfServiceUrl:e,privacyPolicyUrl:t}=tr.state;return e??t?J`<div><wcm-text variant="small-regular" color="secondary">By connecting your wallet to this app, you agree to the app's ${e?J`<a href="${e}" target="_blank" rel="noopener noreferrer">Terms of Service</a>`:null} ${e&&t?"and":null} ${t?J`<a href="${t}" target="_blank" rel="noopener noreferrer">Privacy Policy</a>`:null}</wcm-text></div>`:null}};Ml.styles=[Pe.globalCss,m8],Ml=w8([Ne("wcm-legal-notice")],Ml);const b8=ze`div{display:grid;grid-template-columns:repeat(4,80px);margin:0 -10px;justify-content:space-between;row-gap:10px}`;var _8=Object.defineProperty,E8=Object.getOwnPropertyDescriptor,x8=(e,t,r,n)=>{for(var i=n>1?void 0:n?E8(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&_8(t,r,i),i};let Fl=class extends Ee{onQrcode(){tt.push("Qrcode")}render(){const{explorerExcludedWalletIds:e,enableExplorer:t}=tr.state,r=e!=="ALL"&&t,n=an.manualWalletsTemplate(),i=an.recomendedWalletsTemplate();let o=[an.recentWalletTemplate(),...n,...i];o=o.filter(Boolean);const s=o.length>8||r;let a=[];s?a=o.slice(0,7):a=o;const c=!!a.length;return J`<wcm-modal-header title="Connect your wallet" .onAction="${this.onQrcode}" .actionIcon="${We.QRCODE_ICON}"></wcm-modal-header>${c?J`<wcm-modal-content><div>${a} ${s?J`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-content>`:null}`}};Fl.styles=[Pe.globalCss,b8],Fl=x8([Ne("wcm-mobile-wallet-selection")],Fl);const S8=ze`:host{all:initial}.wcm-overlay{top:0;bottom:0;left:0;right:0;position:fixed;z-index:var(--wcm-z-index);overflow:hidden;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;background-color:var(--wcm-overlay-background-color);backdrop-filter:var(--wcm-overlay-backdrop-filter)}@media(max-height:720px) and (orientation:landscape){.wcm-overlay{overflow:scroll;align-items:flex-start;padding:20px 0}}.wcm-active{pointer-events:auto}.wcm-container{position:relative;max-width:360px;width:100%;outline:0;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) var(--wcm-container-border-radius) var(--wcm-container-border-radius);border:1px solid var(--wcm-color-overlay);overflow:hidden}.wcm-card{width:100%;position:relative;border-radius:var(--wcm-container-border-radius);overflow:hidden;box-shadow:0 6px 14px -6px rgba(10,16,31,.12),0 10px 32px -4px rgba(10,16,31,.1),0 0 0 1px var(--wcm-color-overlay);background-color:var(--wcm-color-bg-1);color:var(--wcm-color-fg-1)}@media(max-width:600px){.wcm-container{max-width:440px;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) 0 0}.wcm-card{border-radius:var(--wcm-container-border-radius) var(--wcm-container-border-radius) 0 0}.wcm-overlay{align-items:flex-end}}@media(max-width:440px){.wcm-container{border:0}}`;var C8=Object.defineProperty,A8=Object.getOwnPropertyDescriptor,Ul=(e,t,r,n)=>{for(var i=n>1?void 0:n?A8(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&C8(t,r,i),i};let _i=class extends Ee{constructor(){super(),this.open=!1,this.active=!1,this.unsubscribeModal=void 0,this.abortController=void 0,this.unsubscribeModal=gn.subscribe(e=>{e.open?this.onOpenModalEvent():this.onCloseModalEvent()})}disconnectedCallback(){var e;(e=this.unsubscribeModal)==null||e.call(this)}get overlayEl(){return he.getShadowRootElement(this,".wcm-overlay")}get containerEl(){return he.getShadowRootElement(this,".wcm-container")}toggleBodyScroll(e){if(document.querySelector("body"))if(e){const t=document.getElementById("wcm-styles");t==null||t.remove()}else document.head.insertAdjacentHTML("beforeend",'<style id="wcm-styles">html,body{touch-action:none;overflow:hidden;overscroll-behavior:contain;}</style>')}onCloseModal(e){e.target===e.currentTarget&&gn.close()}onOpenModalEvent(){this.toggleBodyScroll(!1),this.addKeyboardEvents(),this.open=!0,setTimeout(async()=>{const e=he.isMobileAnimation()?{y:["50vh","0vh"]}:{scale:[.98,1]},t=.1,r=.2;await Promise.all([Ln(this.overlayEl,{opacity:[0,1]},{delay:t,duration:r}).finished,Ln(this.containerEl,e,{delay:t,duration:r}).finished]),this.active=!0},0)}async onCloseModalEvent(){this.toggleBodyScroll(!0),this.removeKeyboardEvents();const e=he.isMobileAnimation()?{y:["0vh","50vh"]}:{scale:[1,.98]},t=.2;await Promise.all([Ln(this.overlayEl,{opacity:[1,0]},{duration:t}).finished,Ln(this.containerEl,e,{duration:t}).finished]),this.containerEl.removeAttribute("style"),this.active=!1,this.open=!1}addKeyboardEvents(){this.abortController=new AbortController,window.addEventListener("keydown",e=>{var t;e.key==="Escape"?gn.close():e.key==="Tab"&&((t=e.target)!=null&&t.tagName.includes("wcm-")||this.containerEl.focus())},this.abortController),this.containerEl.focus()}removeKeyboardEvents(){var e;(e=this.abortController)==null||e.abort(),this.abortController=void 0}render(){const e={"wcm-overlay":!0,"wcm-active":this.active};return J`<wcm-explorer-context></wcm-explorer-context><wcm-theme-context></wcm-theme-context><div id="wcm-modal" class="${jr(e)}" @click="${this.onCloseModal}" role="alertdialog" aria-modal="true"><div class="wcm-container" tabindex="0">${this.open?J`<wcm-modal-backcard></wcm-modal-backcard><div class="wcm-card"><wcm-modal-router></wcm-modal-router><wcm-modal-toast></wcm-modal-toast></div>`:null}</div></div>`}};_i.styles=[Pe.globalCss,S8],Ul([Qt()],_i.prototype,"open",2),Ul([Qt()],_i.prototype,"active",2),_i=Ul([Ne("wcm-modal")],_i);const D8=ze`div{display:flex;margin-top:15px}slot{display:inline-block;margin:0 5px}wcm-button{margin:0 5px}`;var O8=Object.defineProperty,I8=Object.getOwnPropertyDescriptor,_o=(e,t,r,n)=>{for(var i=n>1?void 0:n?I8(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&O8(t,r,i),i};let Fn=class extends Ee{constructor(){super(...arguments),this.isMobile=!1,this.isDesktop=!1,this.isWeb=!1,this.isRetry=!1}onMobile(){ie.isMobile()?tt.replace("MobileConnecting"):tt.replace("MobileQrcodeConnecting")}onDesktop(){tt.replace("DesktopConnecting")}onWeb(){tt.replace("WebConnecting")}render(){return J`<div>${this.isRetry?J`<slot></slot>`:null} ${this.isMobile?J`<wcm-button .onClick="${this.onMobile}" .iconLeft="${We.MOBILE_ICON}" variant="outline">Mobile</wcm-button>`:null} ${this.isDesktop?J`<wcm-button .onClick="${this.onDesktop}" .iconLeft="${We.DESKTOP_ICON}" variant="outline">Desktop</wcm-button>`:null} ${this.isWeb?J`<wcm-button .onClick="${this.onWeb}" .iconLeft="${We.GLOBE_ICON}" variant="outline">Web</wcm-button>`:null}</div>`}};Fn.styles=[Pe.globalCss,D8],_o([ge({type:Boolean})],Fn.prototype,"isMobile",2),_o([ge({type:Boolean})],Fn.prototype,"isDesktop",2),_o([ge({type:Boolean})],Fn.prototype,"isWeb",2),_o([ge({type:Boolean})],Fn.prototype,"isRetry",2),Fn=_o([Ne("wcm-platform-selection")],Fn);const T8=ze`button{display:flex;flex-direction:column;padding:5px 10px;border-radius:var(--wcm-button-hover-highlight-border-radius);height:100%;justify-content:flex-start}.wcm-icons{width:60px;height:60px;display:flex;flex-wrap:wrap;padding:7px;border-radius:var(--wcm-wallet-icon-border-radius);justify-content:space-between;align-items:center;margin-bottom:5px;background-color:var(--wcm-color-bg-2);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}.wcm-icons img{width:21px;height:21px;object-fit:cover;object-position:center;border-radius:calc(var(--wcm-wallet-icon-border-radius)/ 2);border:1px solid var(--wcm-color-overlay)}.wcm-icons svg{width:21px;height:21px}.wcm-icons img:nth-child(1),.wcm-icons img:nth-child(2),.wcm-icons svg:nth-child(1),.wcm-icons svg:nth-child(2){margin-bottom:4px}wcm-text{width:100%;text-align:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var $8=Object.defineProperty,R8=Object.getOwnPropertyDescriptor,P8=(e,t,r,n)=>{for(var i=n>1?void 0:n?R8(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&$8(t,r,i),i};let jl=class extends Ee{onClick(){tt.push("WalletExplorer")}render(){const{recomendedWallets:e}=Yt.state,t=bi.manualWallets(),r=[...e,...t].reverse().slice(0,4);return J`<button @click="${this.onClick}"><div class="wcm-icons">${r.map(n=>{const i=he.getWalletIcon(n);if(i)return J`<img crossorigin="anonymous" src="${i}">`;const o=he.getWalletIcon({id:n.id});return o?J`<img crossorigin="anonymous" src="${o}">`:We.WALLET_PLACEHOLDER})} ${[...Array(4-r.length)].map(()=>We.WALLET_PLACEHOLDER)}</div><wcm-text variant="xsmall-regular">View All</wcm-text></button>`}};jl.styles=[Pe.globalCss,T8],jl=P8([Ne("wcm-view-all-wallets-button")],jl);const N8=ze`.wcm-qr-container{width:100%;display:flex;justify-content:center;align-items:center;aspect-ratio:1/1}`;var L8=Object.defineProperty,M8=Object.getOwnPropertyDescriptor,$s=(e,t,r,n)=>{for(var i=n>1?void 0:n?M8(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&L8(t,r,i),i};let Ei=class extends Ee{constructor(){super(),this.walletId="",this.imageId="",this.uri="",setTimeout(()=>{const{walletConnectUri:e}=ft.state;this.uri=e},0)}get overlayEl(){return he.getShadowRootElement(this,".wcm-qr-container")}render(){return J`<div class="wcm-qr-container">${this.uri?J`<wcm-qrcode size="${this.overlayEl.offsetWidth}" uri="${this.uri}" walletId="${Gt(this.walletId)}" imageId="${Gt(this.imageId)}"></wcm-qrcode>`:J`<wcm-spinner></wcm-spinner>`}</div>`}};Ei.styles=[Pe.globalCss,N8],$s([ge()],Ei.prototype,"walletId",2),$s([ge()],Ei.prototype,"imageId",2),$s([Qt()],Ei.prototype,"uri",2),Ei=$s([Ne("wcm-walletconnect-qr")],Ei);var F8=Object.defineProperty,U8=Object.getOwnPropertyDescriptor,j8=(e,t,r,n)=>{for(var i=n>1?void 0:n?U8(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&F8(t,r,i),i};let kl=class extends Ee{viewTemplate(){return ie.isAndroid()?J`<wcm-android-wallet-selection></wcm-android-wallet-selection>`:ie.isMobile()?J`<wcm-mobile-wallet-selection></wcm-mobile-wallet-selection>`:J`<wcm-desktop-wallet-selection></wcm-desktop-wallet-selection>`}render(){return J`${this.viewTemplate()}<wcm-legal-notice></wcm-legal-notice>`}};kl.styles=[Pe.globalCss],kl=j8([Ne("wcm-connect-wallet-view")],kl);const k8=ze`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var B8=Object.defineProperty,z8=Object.getOwnPropertyDescriptor,Mp=(e,t,r,n)=>{for(var i=n>1?void 0:n?z8(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&B8(t,r,i),i};let Rs=class extends Ee{constructor(){super(),this.isError=!1,this.openDesktopApp()}onFormatAndRedirect(e){const{desktop:t,name:r}=ie.getWalletRouterData(),n=t==null?void 0:t.native;if(n){const i=ie.formatNativeUrl(n,e,r);ie.openHref(i,"_self")}}openDesktopApp(){const{walletConnectUri:e}=ft.state,t=ie.getWalletRouterData();he.setRecentWallet(t),e&&this.onFormatAndRedirect(e)}render(){const{name:e,id:t,image_id:r}=ie.getWalletRouterData(),{isMobile:n,isWeb:i}=he.getCachedRouterWalletPlatforms();return J`<wcm-modal-header title="${e}" .onAction="${he.handleUriCopy}" .actionIcon="${We.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${t}" imageId="${Gt(r)}" label="${`Continue in ${e}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Connection can continue loading if ${e} is not installed on your device`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isWeb="${i}" .isRetry="${!0}"><wcm-button .onClick="${this.openDesktopApp.bind(this)}" .iconRight="${We.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Rs.styles=[Pe.globalCss,k8],Mp([Qt()],Rs.prototype,"isError",2),Rs=Mp([Ne("wcm-desktop-connecting-view")],Rs);const W8=ze`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}wcm-button{margin-top:15px}`;var H8=Object.defineProperty,V8=Object.getOwnPropertyDescriptor,q8=(e,t,r,n)=>{for(var i=n>1?void 0:n?V8(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&H8(t,r,i),i};let Bl=class extends Ee{onInstall(e){e&&ie.openHref(e,"_blank")}render(){const{name:e,id:t,image_id:r,homepage:n}=ie.getWalletRouterData();return J`<wcm-modal-header title="${e}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${t}" imageId="${Gt(r)}" label="Not Detected" .isStale="${!0}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Download ${e} to continue. If multiple browser extensions are installed, disable non ${e} ones and try again`}</wcm-text><wcm-button .onClick="${()=>this.onInstall(n)}" .iconLeft="${We.ARROW_DOWN_ICON}">Download</wcm-button></wcm-info-footer>`}};Bl.styles=[Pe.globalCss,W8],Bl=q8([Ne("wcm-install-wallet-view")],Bl);const K8=ze`wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:96px;height:96px;margin-bottom:20px}wcm-info-footer{display:flex;width:100%}.wcm-app-store{justify-content:space-between}.wcm-app-store wcm-wallet-image{margin-right:10px;margin-bottom:0;width:28px;height:28px;border-radius:var(--wcm-wallet-icon-small-border-radius)}.wcm-app-store div{display:flex;align-items:center}.wcm-app-store wcm-button{margin-right:-10px}.wcm-note{flex-direction:column;align-items:center;padding:5px 0}.wcm-note wcm-text{text-align:center}wcm-platform-selection{margin-top:-15px}.wcm-note wcm-text{margin-top:15px}.wcm-note wcm-text span{color:var(--wcm-accent-color)}`;var G8=Object.defineProperty,Y8=Object.getOwnPropertyDescriptor,Fp=(e,t,r,n)=>{for(var i=n>1?void 0:n?Y8(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&G8(t,r,i),i};let Ps=class extends Ee{constructor(){super(),this.isError=!1,this.openMobileApp()}onFormatAndRedirect(e,t=!1){const{mobile:r,name:n}=ie.getWalletRouterData(),i=r==null?void 0:r.native,o=r==null?void 0:r.universal;if(i&&!t){const s=ie.formatNativeUrl(i,e,n);ie.openHref(s,"_self")}else if(o){const s=ie.formatUniversalUrl(o,e,n);ie.openHref(s,"_self")}}openMobileApp(e=!1){const{walletConnectUri:t}=ft.state,r=ie.getWalletRouterData();he.setRecentWallet(r),t&&this.onFormatAndRedirect(t,e)}onGoToAppStore(e){e&&ie.openHref(e,"_blank")}render(){const{name:e,id:t,image_id:r,app:n,mobile:i}=ie.getWalletRouterData(),{isWeb:o}=he.getCachedRouterWalletPlatforms(),s=n==null?void 0:n.ios,a=i==null?void 0:i.universal;return J`<wcm-modal-header title="${e}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${t}" imageId="${Gt(r)}" label="Tap 'Open' to continue…" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer class="wcm-note"><wcm-platform-selection .isWeb="${o}" .isRetry="${!0}"><wcm-button .onClick="${()=>this.openMobileApp(!1)}" .iconRight="${We.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection>${a?J`<wcm-text color="secondary" variant="small-thin">Still doesn't work? <span tabindex="0" @click="${()=>this.openMobileApp(!0)}">Try this alternate link</span></wcm-text>`:null}</wcm-info-footer><wcm-info-footer class="wcm-app-store"><div><wcm-wallet-image walletId="${t}" imageId="${Gt(r)}"></wcm-wallet-image><wcm-text>${`Get ${e}`}</wcm-text></div><wcm-button .iconRight="${We.ARROW_RIGHT_ICON}" .onClick="${()=>this.onGoToAppStore(s)}" variant="ghost">App Store</wcm-button></wcm-info-footer>`}};Ps.styles=[Pe.globalCss,K8],Fp([Qt()],Ps.prototype,"isError",2),Ps=Fp([Ne("wcm-mobile-connecting-view")],Ps);const J8=ze`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var Z8=Object.defineProperty,X8=Object.getOwnPropertyDescriptor,Q8=(e,t,r,n)=>{for(var i=n>1?void 0:n?X8(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&Z8(t,r,i),i};let zl=class extends Ee{render(){const{name:e,id:t,image_id:r}=ie.getWalletRouterData(),{isDesktop:n,isWeb:i}=he.getCachedRouterWalletPlatforms();return J`<wcm-modal-header title="${e}" .onAction="${he.handleUriCopy}" .actionIcon="${We.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr walletId="${t}" imageId="${Gt(r)}"></wcm-walletconnect-qr></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Scan this QR Code with your phone's camera or inside ${e} app`}</wcm-text><wcm-platform-selection .isDesktop="${n}" .isWeb="${i}"></wcm-platform-selection></wcm-info-footer>`}};zl.styles=[Pe.globalCss,J8],zl=Q8([Ne("wcm-mobile-qr-connecting-view")],zl);var eS=Object.defineProperty,tS=Object.getOwnPropertyDescriptor,rS=(e,t,r,n)=>{for(var i=n>1?void 0:n?tS(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&eS(t,r,i),i};let Wl=class extends Ee{render(){return J`<wcm-modal-header title="Scan the code" .onAction="${he.handleUriCopy}" .actionIcon="${We.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>`}};Wl.styles=[Pe.globalCss],Wl=rS([Ne("wcm-qrcode-view")],Wl);const nS=ze`wcm-modal-content{height:clamp(200px,60vh,600px);display:block;overflow:scroll;scrollbar-width:none;position:relative;margin-top:1px}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between;margin:-15px -10px;padding-top:20px}wcm-modal-content::after,wcm-modal-content::before{content:'';position:fixed;pointer-events:none;z-index:1;width:100%;height:20px;opacity:1}wcm-modal-content::before{box-shadow:0 -1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(var(--wcm-color-bg-1),rgba(255,255,255,0))}wcm-modal-content::after{box-shadow:0 1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(rgba(255,255,255,0),var(--wcm-color-bg-1));top:calc(100% - 20px)}wcm-modal-content::-webkit-scrollbar{display:none}.wcm-placeholder-block{display:flex;justify-content:center;align-items:center;height:100px;overflow:hidden}.wcm-empty,.wcm-loading{display:flex}.wcm-loading .wcm-placeholder-block{height:100%}.wcm-end-reached .wcm-placeholder-block{height:0;opacity:0}.wcm-empty .wcm-placeholder-block{opacity:1;height:100%}wcm-wallet-button{margin:calc((100% - 60px)/ 3) 0}`;var iS=Object.defineProperty,oS=Object.getOwnPropertyDescriptor,Eo=(e,t,r,n)=>{for(var i=n>1?void 0:n?oS(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&iS(t,r,i),i};const Hl=40;let Un=class extends Ee{constructor(){super(...arguments),this.loading=!Yt.state.wallets.listings.length,this.firstFetch=!Yt.state.wallets.listings.length,this.search="",this.endReached=!1,this.intersectionObserver=void 0,this.searchDebounce=he.debounce(e=>{e.length>=1?(this.firstFetch=!0,this.endReached=!1,this.search=e,Yt.resetSearch(),this.fetchWallets()):this.search&&(this.search="",this.endReached=this.isLastPage(),Yt.resetSearch())})}firstUpdated(){this.createPaginationObserver()}disconnectedCallback(){var e;(e=this.intersectionObserver)==null||e.disconnect()}get placeholderEl(){return he.getShadowRootElement(this,".wcm-placeholder-block")}createPaginationObserver(){this.intersectionObserver=new IntersectionObserver(([e])=>{e.isIntersecting&&!(this.search&&this.firstFetch)&&this.fetchWallets()}),this.intersectionObserver.observe(this.placeholderEl)}isLastPage(){const{wallets:e,search:t}=Yt.state,{listings:r,total:n}=this.search?t:e;return n<=Hl||r.length>=n}async fetchWallets(){var e;const{wallets:t,search:r}=Yt.state,{listings:n,total:i,page:o}=this.search?r:t;if(!this.endReached&&(this.firstFetch||i>Hl&&n.length<i))try{this.loading=!0;const s=(e=ft.state.chains)==null?void 0:e.join(","),{listings:a}=await Yt.getWallets({page:this.firstFetch?1:o+1,entries:Hl,search:this.search,version:2,chains:s}),c=a.map(u=>he.getWalletIcon(u));await Promise.all([...c.map(async u=>he.preloadImage(u)),ie.wait(300)]),this.endReached=this.isLastPage()}catch(s){console.error(s),qr.openToast(he.getErrorMessage(s),"error")}finally{this.loading=!1,this.firstFetch=!1}}onConnect(e){ie.isAndroid()?he.handleMobileLinking(e):he.goToConnectingView(e)}onSearchChange(e){const{value:t}=e.target;this.searchDebounce(t)}render(){const{wallets:e,search:t}=Yt.state,{listings:r}=this.search?t:e,n=this.loading&&!r.length,i=this.search.length>=3;let o=an.manualWalletsTemplate(),s=an.recomendedWalletsTemplate(!0);i&&(o=o.filter(({values:u})=>he.caseSafeIncludes(u[0],this.search)),s=s.filter(({values:u})=>he.caseSafeIncludes(u[0],this.search)));const a=!this.loading&&!r.length&&!s.length,c={"wcm-loading":n,"wcm-end-reached":this.endReached||!this.loading,"wcm-empty":a};return J`<wcm-modal-header><wcm-search-input .onChange="${this.onSearchChange.bind(this)}"></wcm-search-input></wcm-modal-header><wcm-modal-content class="${jr(c)}"><div class="wcm-grid">${n?null:o} ${n?null:s} ${n?null:r.map(u=>J`${u?J`<wcm-wallet-button imageId="${u.image_id}" name="${u.name}" walletId="${u.id}" .onClick="${()=>this.onConnect(u)}"></wcm-wallet-button>`:null}`)}</div><div class="wcm-placeholder-block">${a?J`<wcm-text variant="big-bold" color="secondary">No results found</wcm-text>`:null} ${!a&&this.loading?J`<wcm-spinner></wcm-spinner>`:null}</div></wcm-modal-content>`}};Un.styles=[Pe.globalCss,nS],Eo([Qt()],Un.prototype,"loading",2),Eo([Qt()],Un.prototype,"firstFetch",2),Eo([Qt()],Un.prototype,"search",2),Eo([Qt()],Un.prototype,"endReached",2),Un=Eo([Ne("wcm-wallet-explorer-view")],Un);const sS=ze`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var aS=Object.defineProperty,cS=Object.getOwnPropertyDescriptor,Up=(e,t,r,n)=>{for(var i=n>1?void 0:n?cS(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&aS(t,r,i),i};let Ns=class extends Ee{constructor(){super(),this.isError=!1,this.openWebWallet()}onFormatAndRedirect(e){const{desktop:t,name:r}=ie.getWalletRouterData(),n=t==null?void 0:t.universal;if(n){const i=ie.formatUniversalUrl(n,e,r);ie.openHref(i,"_blank")}}openWebWallet(){const{walletConnectUri:e}=ft.state,t=ie.getWalletRouterData();he.setRecentWallet(t),e&&this.onFormatAndRedirect(e)}render(){const{name:e,id:t,image_id:r}=ie.getWalletRouterData(),{isMobile:n,isDesktop:i}=he.getCachedRouterWalletPlatforms(),o=ie.isMobile();return J`<wcm-modal-header title="${e}" .onAction="${he.handleUriCopy}" .actionIcon="${We.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${t}" imageId="${Gt(r)}" label="${`Continue in ${e}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`${e} web app has opened in a new tab. Go there, accept the connection, and come back`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isDesktop="${o?!1:i}" .isRetry="${!0}"><wcm-button .onClick="${this.openWebWallet.bind(this)}" .iconRight="${We.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Ns.styles=[Pe.globalCss,sS],Up([Qt()],Ns.prototype,"isError",2),Ns=Up([Ne("wcm-web-connecting-view")],Ns);const lS=Object.freeze(Object.defineProperty({__proto__:null,get WcmModal(){return _i},get WcmQrCode(){return Br}},Symbol.toStringTag,{value:"Module"}));Re.Asset=t6,Re.AssetType=A0,Re.DAI_ABI=n6,Re.DAI_ADDRESS=r6,Re.PuzzleWalletProvider=K3,Re.PuzzleWeb3Modal=q3,Re.RECORDS_PER_PAGE=JE,Re.fromBaseUnits=C0,Re.projectId=td,Re.signClient_puzzleProps=V3,Re.toBaseUnits=QE,Re.useAccount=y5,Re.useBalance=w5,Re.useConnect=b5,Re.useDecrypt=_5,Re.useDeployProgram=E5,Re.useDisconnect=D5,Re.useExecuteProgram=O5,Re.useInitWallet=S0,Re.usePuzzleFees=I5,Re.useRecords=ZE,Re.useTransferCredits=XE,Re.walletURL=nc,Re.wc_aleo_chains=es,Re.wc_aleo_methods=rc,Re.wc_aztec_chains=tc,Re.wc_aztec_methods=ed,Re.wc_events=ts,Re.web3modal_puzzle_props=rd,Object.defineProperty(Re,Symbol.toStringTag,{value:"Module"})});
