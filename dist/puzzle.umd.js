(function(Fe,_e){typeof exports=="object"&&typeof module<"u"?_e(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],_e):(Fe=typeof globalThis<"u"?globalThis:Fe||self,_e(Fe["@puzzlehq/sdk"]={},Fe.React))})(this,function(Fe,_e){"use strict";var qt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ho(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var fo={exports:{}},ai={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jc;function Xf(){if(Jc)return ai;Jc=1;var t=_e,e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,h){var d,w={},m=null,v=null;h!==void 0&&(m=""+h),l.key!==void 0&&(m=""+l.key),l.ref!==void 0&&(v=l.ref);for(d in l)n.call(l,d)&&!s.hasOwnProperty(d)&&(w[d]=l[d]);if(a&&a.defaultProps)for(d in l=a.defaultProps,l)w[d]===void 0&&(w[d]=l[d]);return{$$typeof:e,type:a,key:m,ref:v,props:w,_owner:i.current}}return ai.Fragment=r,ai.jsx=o,ai.jsxs=o,ai}var ci={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zc;function Qf(){return Zc||(Zc=1,process.env.NODE_ENV!=="production"&&function(){var t=_e,e=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen"),b=Symbol.iterator,x="@@iterator";function C(D){if(D===null||typeof D!="object")return null;var j=b&&D[b]||D[x];return typeof j=="function"?j:null}var $=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function y(D){{for(var j=arguments.length,Z=new Array(j>1?j-1:0),ae=1;ae<j;ae++)Z[ae-1]=arguments[ae];E("error",D,Z)}}function E(D,j,Z){{var ae=$.ReactDebugCurrentFrame,je=ae.getStackAddendum();je!==""&&(j+="%s",Z=Z.concat([je]));var Ae=Z.map(function(Te){return String(Te)});Ae.unshift("Warning: "+j),Function.prototype.apply.call(console[D],console,Ae)}}var g=!1,S=!1,f=!1,c=!1,p=!1,P;P=Symbol.for("react.module.reference");function A(D){return!!(typeof D=="string"||typeof D=="function"||D===n||D===s||p||D===i||D===h||D===d||c||D===v||g||S||f||typeof D=="object"&&D!==null&&(D.$$typeof===m||D.$$typeof===w||D.$$typeof===o||D.$$typeof===a||D.$$typeof===l||D.$$typeof===P||D.getModuleId!==void 0))}function U(D,j,Z){var ae=D.displayName;if(ae)return ae;var je=j.displayName||j.name||"";return je!==""?Z+"("+je+")":Z}function B(D){return D.displayName||"Context"}function V(D){if(D==null)return null;if(typeof D.tag=="number"&&y("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof D=="function")return D.displayName||D.name||null;if(typeof D=="string")return D;switch(D){case n:return"Fragment";case r:return"Portal";case s:return"Profiler";case i:return"StrictMode";case h:return"Suspense";case d:return"SuspenseList"}if(typeof D=="object")switch(D.$$typeof){case a:var j=D;return B(j)+".Consumer";case o:var Z=D;return B(Z._context)+".Provider";case l:return U(D,D.render,"ForwardRef");case w:var ae=D.displayName||null;return ae!==null?ae:V(D.type)||"Memo";case m:{var je=D,Ae=je._payload,Te=je._init;try{return V(Te(Ae))}catch{return null}}}return null}var I=Object.assign,N=0,G,H,k,W,F,K,ce;function q(){}q.__reactDisabledLog=!0;function se(){{if(N===0){G=console.log,H=console.info,k=console.warn,W=console.error,F=console.group,K=console.groupCollapsed,ce=console.groupEnd;var D={configurable:!0,enumerable:!0,value:q,writable:!0};Object.defineProperties(console,{info:D,log:D,warn:D,error:D,group:D,groupCollapsed:D,groupEnd:D})}N++}}function ee(){{if(N--,N===0){var D={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:I({},D,{value:G}),info:I({},D,{value:H}),warn:I({},D,{value:k}),error:I({},D,{value:W}),group:I({},D,{value:F}),groupCollapsed:I({},D,{value:K}),groupEnd:I({},D,{value:ce})})}N<0&&y("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var ie=$.ReactCurrentDispatcher,M;function L(D,j,Z){{if(M===void 0)try{throw Error()}catch(je){var ae=je.stack.trim().match(/\n( *(at )?)/);M=ae&&ae[1]||""}return`
`+M+D}}var T=!1,u;{var O=typeof WeakMap=="function"?WeakMap:Map;u=new O}function Y(D,j){if(!D||T)return"";{var Z=u.get(D);if(Z!==void 0)return Z}var ae;T=!0;var je=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Ae;Ae=ie.current,ie.current=null,se();try{if(j){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(fr){ae=fr}Reflect.construct(D,[],Te)}else{try{Te.call()}catch(fr){ae=fr}D.call(Te.prototype)}}else{try{throw Error()}catch(fr){ae=fr}D()}}catch(fr){if(fr&&ae&&typeof fr.stack=="string"){for(var Oe=fr.stack.split(`
`),At=ae.stack.split(`
`),tt=Oe.length-1,ct=At.length-1;tt>=1&&ct>=0&&Oe[tt]!==At[ct];)ct--;for(;tt>=1&&ct>=0;tt--,ct--)if(Oe[tt]!==At[ct]){if(tt!==1||ct!==1)do if(tt--,ct--,ct<0||Oe[tt]!==At[ct]){var yt=`
`+Oe[tt].replace(" at new "," at ");return D.displayName&&yt.includes("<anonymous>")&&(yt=yt.replace("<anonymous>",D.displayName)),typeof D=="function"&&u.set(D,yt),yt}while(tt>=1&&ct>=0);break}}}finally{T=!1,ie.current=Ae,ee(),Error.prepareStackTrace=je}var Yr=D?D.displayName||D.name:"",no=Yr?L(Yr):"";return typeof D=="function"&&u.set(D,no),no}function Q(D,j,Z){return Y(D,!1)}function Se(D){var j=D.prototype;return!!(j&&j.isReactComponent)}function xe(D,j,Z){if(D==null)return"";if(typeof D=="function")return Y(D,Se(D));if(typeof D=="string")return L(D);switch(D){case h:return L("Suspense");case d:return L("SuspenseList")}if(typeof D=="object")switch(D.$$typeof){case l:return Q(D.render);case w:return xe(D.type,j,Z);case m:{var ae=D,je=ae._payload,Ae=ae._init;try{return xe(Ae(je),j,Z)}catch{}}}return""}var me=Object.prototype.hasOwnProperty,Ne={},Ze=$.ReactDebugCurrentFrame;function Ve(D){if(D){var j=D._owner,Z=xe(D.type,D._source,j?j.type:null);Ze.setExtraStackFrame(Z)}else Ze.setExtraStackFrame(null)}function $e(D,j,Z,ae,je){{var Ae=Function.call.bind(me);for(var Te in D)if(Ae(D,Te)){var Oe=void 0;try{if(typeof D[Te]!="function"){var At=Error((ae||"React class")+": "+Z+" type `"+Te+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof D[Te]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw At.name="Invariant Violation",At}Oe=D[Te](j,Te,ae,Z,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(tt){Oe=tt}Oe&&!(Oe instanceof Error)&&(Ve(je),y("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",ae||"React class",Z,Te,typeof Oe),Ve(null)),Oe instanceof Error&&!(Oe.message in Ne)&&(Ne[Oe.message]=!0,Ve(je),y("Failed %s type: %s",Z,Oe.message),Ve(null))}}}var Ce=Array.isArray;function we(D){return Ce(D)}function ye(D){{var j=typeof Symbol=="function"&&Symbol.toStringTag,Z=j&&D[Symbol.toStringTag]||D.constructor.name||"Object";return Z}}function ve(D){try{return fe(D),!1}catch{return!0}}function fe(D){return""+D}function he(D){if(ve(D))return y("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",ye(D)),fe(D)}var oe=$.ReactCurrentOwner,be={key:!0,ref:!0,__self:!0,__source:!0},De,le,Ie;Ie={};function Le(D){if(me.call(D,"ref")){var j=Object.getOwnPropertyDescriptor(D,"ref").get;if(j&&j.isReactWarning)return!1}return D.ref!==void 0}function ke(D){if(me.call(D,"key")){var j=Object.getOwnPropertyDescriptor(D,"key").get;if(j&&j.isReactWarning)return!1}return D.key!==void 0}function Be(D,j){if(typeof D.ref=="string"&&oe.current&&j&&oe.current.stateNode!==j){var Z=V(oe.current.type);Ie[Z]||(y('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',V(oe.current.type),D.ref),Ie[Z]=!0)}}function Ue(D,j){{var Z=function(){De||(De=!0,y("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",j))};Z.isReactWarning=!0,Object.defineProperty(D,"key",{get:Z,configurable:!0})}}function Qt(D,j){{var Z=function(){le||(le=!0,y("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",j))};Z.isReactWarning=!0,Object.defineProperty(D,"ref",{get:Z,configurable:!0})}}var sr=function(D,j,Z,ae,je,Ae,Te){var Oe={$$typeof:e,type:D,key:j,ref:Z,props:Te,_owner:Ae};return Oe._store={},Object.defineProperty(Oe._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Oe,"_self",{configurable:!1,enumerable:!1,writable:!1,value:ae}),Object.defineProperty(Oe,"_source",{configurable:!1,enumerable:!1,writable:!1,value:je}),Object.freeze&&(Object.freeze(Oe.props),Object.freeze(Oe)),Oe};function Sr(D,j,Z,ae,je){{var Ae,Te={},Oe=null,At=null;Z!==void 0&&(he(Z),Oe=""+Z),ke(j)&&(he(j.key),Oe=""+j.key),Le(j)&&(At=j.ref,Be(j,je));for(Ae in j)me.call(j,Ae)&&!be.hasOwnProperty(Ae)&&(Te[Ae]=j[Ae]);if(D&&D.defaultProps){var tt=D.defaultProps;for(Ae in tt)Te[Ae]===void 0&&(Te[Ae]=tt[Ae])}if(Oe||At){var ct=typeof D=="function"?D.displayName||D.name||"Unknown":D;Oe&&Ue(Te,ct),At&&Qt(Te,ct)}return sr(D,Oe,At,je,ae,oe.current,Te)}}var It=$.ReactCurrentOwner,xr=$.ReactDebugCurrentFrame;function or(D){if(D){var j=D._owner,Z=xe(D.type,D._source,j?j.type:null);xr.setExtraStackFrame(Z)}else xr.setExtraStackFrame(null)}var Gr;Gr=!1;function Xe(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function Ge(){{if(It.current){var D=V(It.current.type);if(D)return`

Check the render method of \``+D+"`."}return""}}function st(D){{if(D!==void 0){var j=D.fileName.replace(/^.*[\\\/]/,""),Z=D.lineNumber;return`

Check your code at `+j+":"+Z+"."}return""}}var et={};function ot(D){{var j=Ge();if(!j){var Z=typeof D=="string"?D:D.displayName||D.name;Z&&(j=`

Check the top-level render call using <`+Z+">.")}return j}}function Ye(D,j){{if(!D._store||D._store.validated||D.key!=null)return;D._store.validated=!0;var Z=ot(j);if(et[Z])return;et[Z]=!0;var ae="";D&&D._owner&&D._owner!==It.current&&(ae=" It was passed a child from "+V(D._owner.type)+"."),or(D),y('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Z,ae),or(null)}}function ht(D,j){{if(typeof D!="object")return;if(we(D))for(var Z=0;Z<D.length;Z++){var ae=D[Z];Xe(ae)&&Ye(ae,j)}else if(Xe(D))D._store&&(D._store.validated=!0);else if(D){var je=C(D);if(typeof je=="function"&&je!==D.entries)for(var Ae=je.call(D),Te;!(Te=Ae.next()).done;)Xe(Te.value)&&Ye(Te.value,j)}}}function mt(D){{var j=D.type;if(j==null||typeof j=="string")return;var Z;if(typeof j=="function")Z=j.propTypes;else if(typeof j=="object"&&(j.$$typeof===l||j.$$typeof===w))Z=j.propTypes;else return;if(Z){var ae=V(j);$e(Z,D.props,"prop",ae,D)}else if(j.PropTypes!==void 0&&!Gr){Gr=!0;var je=V(j);y("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",je||"Unknown")}typeof j.getDefaultProps=="function"&&!j.getDefaultProps.isReactClassApproved&&y("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function wt(D){{for(var j=Object.keys(D.props),Z=0;Z<j.length;Z++){var ae=j[Z];if(ae!=="children"&&ae!=="key"){or(D),y("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",ae),or(null);break}}D.ref!==null&&(or(D),y("Invalid attribute `ref` supplied to `React.Fragment`."),or(null))}}function dt(D,j,Z,ae,je,Ae){{var Te=A(D);if(!Te){var Oe="";(D===void 0||typeof D=="object"&&D!==null&&Object.keys(D).length===0)&&(Oe+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var At=st(je);At?Oe+=At:Oe+=Ge();var tt;D===null?tt="null":we(D)?tt="array":D!==void 0&&D.$$typeof===e?(tt="<"+(V(D.type)||"Unknown")+" />",Oe=" Did you accidentally export a JSX literal instead of a component?"):tt=typeof D,y("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",tt,Oe)}var ct=Sr(D,j,Z,je,Ae);if(ct==null)return ct;if(Te){var yt=j.children;if(yt!==void 0)if(ae)if(we(yt)){for(var Yr=0;Yr<yt.length;Yr++)ht(yt[Yr],D);Object.freeze&&Object.freeze(yt)}else y("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else ht(yt,D)}return D===n?wt(ct):mt(ct),ct}}function vt(D,j,Z){return dt(D,j,Z,!0)}function ft(D,j,Z){return dt(D,j,Z,!1)}var at=ft,qe=vt;ci.Fragment=n,ci.jsx=at,ci.jsxs=qe}()),ci}process.env.NODE_ENV==="production"?fo.exports=Xf():fo.exports=Qf();var po=fo.exports;const e0=Symbol(),Xc=Object.getPrototypeOf,go=new WeakMap,t0=t=>t&&(go.has(t)?go.get(t):Xc(t)===Object.prototype||Xc(t)===Array.prototype),r0=t=>t0(t)&&t[e0]||null,Qc=(t,e=!0)=>{go.set(t,e)},mo=t=>typeof t=="object"&&t!==null,Rr=new WeakMap,ts=new WeakSet,n0=(t=Object.is,e=(h,d)=>new Proxy(h,d),r=h=>mo(h)&&!ts.has(h)&&(Array.isArray(h)||!(Symbol.iterator in h))&&!(h instanceof WeakMap)&&!(h instanceof WeakSet)&&!(h instanceof Error)&&!(h instanceof Number)&&!(h instanceof Date)&&!(h instanceof String)&&!(h instanceof RegExp)&&!(h instanceof ArrayBuffer),n=h=>{switch(h.status){case"fulfilled":return h.value;case"rejected":throw h.reason;default:throw h}},i=new WeakMap,s=(h,d,w=n)=>{const m=i.get(h);if((m==null?void 0:m[0])===d)return m[1];const v=Array.isArray(h)?[]:Object.create(Object.getPrototypeOf(h));return Qc(v,!0),i.set(h,[d,v]),Reflect.ownKeys(h).forEach(b=>{if(Object.getOwnPropertyDescriptor(v,b))return;const x=Reflect.get(h,b),C={value:x,enumerable:!0,configurable:!0};if(ts.has(x))Qc(x,!1);else if(x instanceof Promise)delete C.value,C.get=()=>w(x);else if(Rr.has(x)){const[$,y]=Rr.get(x);C.value=s($,y(),w)}Object.defineProperty(v,b,C)}),Object.preventExtensions(v)},o=new WeakMap,a=[1,1],l=h=>{if(!mo(h))throw new Error("object required");const d=o.get(h);if(d)return d;let w=a[0];const m=new Set,v=(P,A=++a[0])=>{w!==A&&(w=A,m.forEach(U=>U(P,A)))};let b=a[1];const x=(P=++a[1])=>(b!==P&&!m.size&&(b=P,$.forEach(([A])=>{const U=A[1](P);U>w&&(w=U)})),w),C=P=>(A,U)=>{const B=[...A];B[1]=[P,...B[1]],v(B,U)},$=new Map,y=(P,A)=>{if(m.size){const U=A[3](C(P));$.set(P,[A,U])}else $.set(P,[A])},E=P=>{var A;const U=$.get(P);U&&($.delete(P),(A=U[1])==null||A.call(U))},g=P=>(m.add(P),m.size===1&&$.forEach(([U,B],V)=>{const I=U[3](C(V));$.set(V,[U,I])}),()=>{m.delete(P),m.size===0&&$.forEach(([U,B],V)=>{B&&(B(),$.set(V,[U]))})}),S=Array.isArray(h)?[]:Object.create(Object.getPrototypeOf(h)),c=e(S,{deleteProperty(P,A){const U=Reflect.get(P,A);E(A);const B=Reflect.deleteProperty(P,A);return B&&v(["delete",[A],U]),B},set(P,A,U,B){const V=Reflect.has(P,A),I=Reflect.get(P,A,B);if(V&&(t(I,U)||o.has(U)&&t(I,o.get(U))))return!0;E(A),mo(U)&&(U=r0(U)||U);let N=U;if(U instanceof Promise)U.then(G=>{U.status="fulfilled",U.value=G,v(["resolve",[A],G])}).catch(G=>{U.status="rejected",U.reason=G,v(["reject",[A],G])});else{!Rr.has(U)&&r(U)&&(N=l(U));const G=!ts.has(N)&&Rr.get(N);G&&y(A,G)}return Reflect.set(P,A,N,B),v(["set",[A],U,I]),!0}});o.set(h,c);const p=[S,x,s,g];return Rr.set(c,p),Reflect.ownKeys(h).forEach(P=>{const A=Object.getOwnPropertyDescriptor(h,P);"value"in A&&(c[P]=h[P],delete A.value,delete A.writable),Object.defineProperty(S,P,A)}),c})=>[l,Rr,ts,t,e,r,n,i,s,o,a],[i0]=n0();function Pr(t={}){return i0(t)}function Qr(t,e,r){const n=Rr.get(t);let i;const s=[],o=n[3];let a=!1;const h=o(d=>{if(s.push(d),r){e(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,h()}}function s0(t,e){const r=Rr.get(t),[n,i,s]=r;return s(n,i(),e)}const _t=Pr({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),Qe={state:_t,subscribe(t){return Qr(_t,()=>t(_t))},push(t,e){t!==_t.view&&(_t.view=t,e&&(_t.data=e),_t.history.push(t))},reset(t){_t.view=t,_t.history=[t]},replace(t){_t.history.length>1&&(_t.history[_t.history.length-1]=t,_t.view=t)},goBack(){if(_t.history.length>1){_t.history.pop();const[t]=_t.history.slice(-1);_t.view=t}},setData(t){_t.data=t}},ne={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return ne.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const t=navigator.userAgent.toLowerCase();return ne.isMobile()&&(t.includes("iphone")||t.includes("ipad"))},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},isArray(t){return Array.isArray(t)&&t.length>0},formatNativeUrl(t,e,r){if(ne.isHttpUrl(t))return this.formatUniversalUrl(t,e,r);let n=t;n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},formatUniversalUrl(t,e,r){if(!ne.isHttpUrl(t))return this.formatNativeUrl(t,e,r);let n=t;n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},async wait(t){return new Promise(e=>{setTimeout(e,t)})},openHref(t,e){window.open(t,e,"noreferrer noopener")},setWalletConnectDeepLink(t,e){try{localStorage.setItem(ne.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(t){try{const[e]=t.split("?");localStorage.setItem(ne.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(ne.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(ne.WCM_VERSION,"2.6.0")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var t;const e=(t=Qe.state.data)==null?void 0:t.Wallet;if(!e)throw new Error('Missing "Wallet" view data');return e}},o0=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),Tt=Pr({enabled:o0,userSessionId:"",events:[],connectedWalletId:void 0}),el={state:Tt,subscribe(t){return Qr(Tt.events,()=>t(s0(Tt.events[Tt.events.length-1])))},initialize(){Tt.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(Tt.userSessionId=crypto.randomUUID())},setConnectedWalletId(t){Tt.connectedWalletId=t},click(t){if(Tt.enabled){const e={type:"CLICK",name:t.name,userSessionId:Tt.userSessionId,timestamp:Date.now(),data:t};Tt.events.push(e)}},track(t){if(Tt.enabled){const e={type:"TRACK",name:t.name,userSessionId:Tt.userSessionId,timestamp:Date.now(),data:t};Tt.events.push(e)}},view(t){if(Tt.enabled){const e={type:"VIEW",name:t.name,userSessionId:Tt.userSessionId,timestamp:Date.now(),data:t};Tt.events.push(e)}}},gr=Pr({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),ut={state:gr,subscribe(t){return Qr(gr,()=>t(gr))},setChains(t){gr.chains=t},setWalletConnectUri(t){gr.walletConnectUri=t},setIsCustomDesktop(t){gr.isCustomDesktop=t},setIsCustomMobile(t){gr.isCustomMobile=t},setIsDataLoaded(t){gr.isDataLoaded=t},setIsUiLoaded(t){gr.isUiLoaded=t},setIsAuth(t){gr.isAuth=t}},rs=Pr({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),Gt={state:rs,subscribe(t){return Qr(rs,()=>t(rs))},setConfig(t){var e,r;el.initialize(),ut.setChains(t.chains),ut.setIsAuth(!!t.enableAuthMode),ut.setIsCustomMobile(!!((e=t.mobileWallets)!=null&&e.length)),ut.setIsCustomDesktop(!!((r=t.desktopWallets)!=null&&r.length)),ne.setModalVersionInStorage(),Object.assign(rs,t)}},wo="https://explorer-api.walletconnect.com";async function ns(t,e){const r=new URL(t,wo);return r.searchParams.append("projectId",Gt.state.projectId),Object.entries(e).forEach(([n,i])=>{i&&r.searchParams.append(n,String(i))}),(await fetch(r)).json()}const en={async getDesktopListings(t){return ns("/w3m/v1/getDesktopListings",t)},async getMobileListings(t){return ns("/w3m/v1/getMobileListings",t)},async getInjectedListings(t){return ns("/w3m/v1/getInjectedListings",t)},async getAllListings(t){return ns("/w3m/v1/getAllListings",t)},getWalletImageUrl(t){return`${wo}/w3m/v1/getWalletImage/${t}?projectId=${Gt.state.projectId}`},getAssetImageUrl(t){return`${wo}/w3m/v1/getAssetImage/${t}?projectId=${Gt.state.projectId}`}};var a0=Object.defineProperty,tl=Object.getOwnPropertySymbols,c0=Object.prototype.hasOwnProperty,l0=Object.prototype.propertyIsEnumerable,rl=(t,e,r)=>e in t?a0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,u0=(t,e)=>{for(var r in e||(e={}))c0.call(e,r)&&rl(t,r,e[r]);if(tl)for(var r of tl(e))l0.call(e,r)&&rl(t,r,e[r]);return t};const nl=ne.isMobile(),mr=Pr({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),zt={state:mr,async getRecomendedWallets(){const{explorerRecommendedWalletIds:t,explorerExcludedWalletIds:e}=Gt.state;if(t==="NONE"||e==="ALL"&&!t)return mr.recomendedWallets;if(ne.isArray(t)){const r={recommendedIds:t.join(",")},{listings:n}=await en.getAllListings(r),i=Object.values(n);i.sort((s,o)=>{const a=t.indexOf(s.id),l=t.indexOf(o.id);return a-l}),mr.recomendedWallets=i}else{const{chains:r,isAuth:n}=ut.state,i=r==null?void 0:r.join(","),s=ne.isArray(e),o={page:1,sdks:n?"auth_v1":void 0,entries:ne.RECOMMENDED_WALLET_AMOUNT,chains:i,version:2,excludedIds:s?e.join(","):void 0},{listings:a}=nl?await en.getMobileListings(o):await en.getDesktopListings(o);mr.recomendedWallets=Object.values(a)}return mr.recomendedWallets},async getWallets(t){const e=u0({},t),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:n}=Gt.state,{recomendedWallets:i}=mr;if(n==="ALL")return mr.wallets;i.length?e.excludedIds=i.map(w=>w.id).join(","):ne.isArray(r)&&(e.excludedIds=r.join(",")),ne.isArray(n)&&(e.excludedIds=[e.excludedIds,n].filter(Boolean).join(",")),ut.state.isAuth&&(e.sdks="auth_v1");const{page:s,search:o}=t,{listings:a,total:l}=nl?await en.getMobileListings(e):await en.getDesktopListings(e),h=Object.values(a),d=o?"search":"wallets";return mr[d]={listings:[...mr[d].listings,...h],total:l,page:s??1},{listings:h,total:l}},getWalletImageUrl(t){return en.getWalletImageUrl(t)},getAssetImageUrl(t){return en.getAssetImageUrl(t)},resetSearch(){mr.search={listings:[],total:0,page:1}}},In=Pr({open:!1}),tn={state:In,subscribe(t){return Qr(In,()=>t(In))},async open(t){return new Promise(e=>{const{isUiLoaded:r,isDataLoaded:n}=ut.state;if(ut.setWalletConnectUri(t==null?void 0:t.uri),ut.setChains(t==null?void 0:t.chains),Qe.reset("ConnectWallet"),r&&n)In.open=!0,e();else{const i=setInterval(()=>{const s=ut.state;s.isUiLoaded&&s.isDataLoaded&&(clearInterval(i),In.open=!0,e())},200)}})},close(){In.open=!1}};var h0=Object.defineProperty,il=Object.getOwnPropertySymbols,d0=Object.prototype.hasOwnProperty,f0=Object.prototype.propertyIsEnumerable,sl=(t,e,r)=>e in t?h0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,p0=(t,e)=>{for(var r in e||(e={}))d0.call(e,r)&&sl(t,r,e[r]);if(il)for(var r of il(e))f0.call(e,r)&&sl(t,r,e[r]);return t};function g0(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const li=Pr({themeMode:g0()?"dark":"light"}),Nr={state:li,subscribe(t){return Qr(li,()=>t(li))},setThemeConfig(t){const{themeMode:e,themeVariables:r}=t;e&&(li.themeMode=e),r&&(li.themeVariables=p0({},r))}},rn=Pr({open:!1,message:"",variant:"success"}),Lr={state:rn,subscribe(t){return Qr(rn,()=>t(rn))},openToast(t,e){rn.open=!0,rn.message=t,rn.variant=e},closeToast(){rn.open=!1}};let m0=class{constructor(e){this.openModal=tn.open,this.closeModal=tn.close,this.subscribeModal=tn.subscribe,this.setTheme=Nr.setThemeConfig,Nr.setThemeConfig(e),Gt.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.resolve().then(()=>RE);const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),ut.setIsUiLoaded(!0)}}};var vo={exports:{}},An=typeof Reflect=="object"?Reflect:null,ol=An&&typeof An.apply=="function"?An.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},is;An&&typeof An.ownKeys=="function"?is=An.ownKeys:Object.getOwnPropertySymbols?is=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:is=function(e){return Object.getOwnPropertyNames(e)};function w0(t){console&&console.warn&&console.warn(t)}var al=Number.isNaN||function(e){return e!==e};function He(){He.init.call(this)}vo.exports=He,vo.exports.once=_0,He.EventEmitter=He,He.prototype._events=void 0,He.prototype._eventsCount=0,He.prototype._maxListeners=void 0;var cl=10;function ss(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(He,"defaultMaxListeners",{enumerable:!0,get:function(){return cl},set:function(t){if(typeof t!="number"||t<0||al(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");cl=t}}),He.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},He.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||al(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function ll(t){return t._maxListeners===void 0?He.defaultMaxListeners:t._maxListeners}He.prototype.getMaxListeners=function(){return ll(this)},He.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")ol(l,this,r);else for(var h=l.length,d=pl(l,h),n=0;n<h;++n)ol(d[n],this,r);return!0};function ul(t,e,r,n){var i,s,o;if(ss(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=ll(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,w0(a)}return t}He.prototype.addListener=function(e,r){return ul(this,e,r,!1)},He.prototype.on=He.prototype.addListener,He.prototype.prependListener=function(e,r){return ul(this,e,r,!0)};function v0(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function hl(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=v0.bind(n);return i.listener=r,n.wrapFn=i,i}He.prototype.once=function(e,r){return ss(r),this.on(e,hl(this,e,r)),this},He.prototype.prependOnceListener=function(e,r){return ss(r),this.prependListener(e,hl(this,e,r)),this},He.prototype.removeListener=function(e,r){var n,i,s,o,a;if(ss(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():y0(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this},He.prototype.off=He.prototype.removeListener,He.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function dl(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?b0(i):pl(i,i.length)}He.prototype.listeners=function(e){return dl(this,e,!0)},He.prototype.rawListeners=function(e){return dl(this,e,!1)},He.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):fl.call(t,e)},He.prototype.listenerCount=fl;function fl(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}He.prototype.eventNames=function(){return this._eventsCount>0?is(this._events):[]};function pl(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function y0(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function b0(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function _0(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}gl(t,e,s,{once:!0}),e!=="error"&&E0(t,i,{once:!0})})}function E0(t,e,r){typeof t.on=="function"&&gl(t,"error",e,r)}function gl(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var lr=vo.exports;const ml=uo(lr);var os={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var yo=function(t,e){return yo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},yo(t,e)};function S0(t,e){yo(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var bo=function(){return bo=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},bo.apply(this,arguments)};function x0(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function D0(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function O0(t,e){return function(r,n){e(r,n,t)}}function C0(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function I0(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(d){try{h(n.next(d))}catch(w){o(w)}}function l(d){try{h(n.throw(d))}catch(w){o(w)}}function h(d){d.done?s(d.value):i(d.value).then(a,l)}h((n=n.apply(t,e||[])).next())})}function A0(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(h){return function(d){return l([h,d])}}function l(h){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){r.label=h[1];break}if(h[0]===6&&r.label<s[1]){r.label=s[1],s=h;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(h);break}s[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(d){h=[6,d],i=0}finally{n=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function $0(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function T0(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function _o(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wl(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function R0(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(wl(arguments[e]));return t}function P0(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function ui(t){return this instanceof ui?(this.v=t,this):new ui(t)}function N0(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(m){n[m]&&(i[m]=function(v){return new Promise(function(b,x){s.push([m,v,b,x])>1||a(m,v)})})}function a(m,v){try{l(n[m](v))}catch(b){w(s[0][3],b)}}function l(m){m.value instanceof ui?Promise.resolve(m.value.v).then(h,d):w(s[0][2],m)}function h(m){a("next",m)}function d(m){a("throw",m)}function w(m,v){m(v),s.shift(),s.length&&a(s[0][0],s[0][1])}}function L0(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:ui(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function M0(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof _o=="function"?_o(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(h){s({value:h,done:a})},o)}}function U0(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function j0(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function F0(t){return t&&t.__esModule?t:{default:t}}function k0(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function B0(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const tr=ho(Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return bo},__asyncDelegator:L0,__asyncGenerator:N0,__asyncValues:M0,__await:ui,__awaiter:I0,__classPrivateFieldGet:k0,__classPrivateFieldSet:B0,__createBinding:$0,__decorate:D0,__exportStar:T0,__extends:S0,__generator:A0,__importDefault:F0,__importStar:j0,__makeTemplateObject:U0,__metadata:C0,__param:O0,__read:wl,__rest:x0,__spread:R0,__spreadArrays:P0,__values:_o},Symbol.toStringTag,{value:"Module"})));var hi={};Object.defineProperty(hi,"__esModule",{value:!0});function z0(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}hi.safeJsonParse=z0;function W0(t){return typeof t=="string"?t:JSON.stringify(t,(e,r)=>typeof r>"u"?null:r)}hi.safeJsonStringify=W0;var di={exports:{}},vl;function H0(){return vl||(vl=1,function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof qt<"u"&&qt.localStorage?di.exports=qt.localStorage:typeof window<"u"&&window.localStorage?di.exports=window.localStorage:di.exports=new e}()),di.exports}var Eo={},fi={},yl;function V0(){if(yl)return fi;yl=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.IKeyValueStorage=void 0;class t{}return fi.IKeyValueStorage=t,fi}var pi={},bl;function K0(){if(bl)return pi;bl=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.parseEntry=void 0;const t=hi;function e(r){var n;return[r[0],t.safeJsonParse((n=r[1])!==null&&n!==void 0?n:"")]}return pi.parseEntry=e,pi}var _l;function q0(){return _l||(_l=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=tr;e.__exportStar(V0(),t),e.__exportStar(K0(),t)}(Eo)),Eo}Object.defineProperty(os,"__esModule",{value:!0}),os.KeyValueStorage=void 0;const $n=tr,El=hi,G0=$n.__importDefault(H0()),Y0=q0();class Sl{constructor(){this.localStorage=G0.default}getKeys(){return $n.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return $n.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(Y0.parseEntry)})}getItem(e){return $n.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return El.safeJsonParse(r)})}setItem(e,r){return $n.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,El.safeJsonStringify(r))})}removeItem(e){return $n.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}os.KeyValueStorage=Sl;var J0=os.default=Sl,Tn={},gi={},re={},So={},mi={},xl;function Z0(){if(xl)return mi;xl=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return mi.delay=t,mi}var nn={},xo={},sn={},Dl;function X0(){return Dl||(Dl=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.ONE_THOUSAND=sn.ONE_HUNDRED=void 0,sn.ONE_HUNDRED=100,sn.ONE_THOUSAND=1e3),sn}var Do={},Ol;function Q0(){return Ol||(Ol=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Do)),Do}var Cl;function Il(){return Cl||(Cl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=tr;e.__exportStar(X0(),t),e.__exportStar(Q0(),t)}(xo)),xo}var Al;function e1(){if(Al)return nn;Al=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.fromMiliseconds=nn.toMiliseconds=void 0;const t=Il();function e(n){return n*t.ONE_THOUSAND}nn.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return nn.fromMiliseconds=r,nn}var $l;function t1(){return $l||($l=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=tr;e.__exportStar(Z0(),t),e.__exportStar(e1(),t)}(So)),So}var Rn={},Tl;function r1(){if(Tl)return Rn;Tl=1,Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Rn.Watch=t,Rn.default=t,Rn}var Oo={},wi={},Rl;function n1(){if(Rl)return wi;Rl=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.IWatch=void 0;class t{}return wi.IWatch=t,wi}var Pl;function i1(){return Pl||(Pl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),tr.__exportStar(n1(),t)}(Oo)),Oo}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=tr;e.__exportStar(t1(),t),e.__exportStar(r1(),t),e.__exportStar(i1(),t),e.__exportStar(Il(),t)})(re);var Co={},vi={};let on=class{};const s1=ho(Object.freeze(Object.defineProperty({__proto__:null,IEvents:on},Symbol.toStringTag,{value:"Module"})));var Nl;function o1(){if(Nl)return vi;Nl=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.IHeartBeat=void 0;const t=s1;class e extends t.IEvents{constructor(n){super()}}return vi.IHeartBeat=e,vi}var Ll;function Ml(){return Ll||(Ll=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),tr.__exportStar(o1(),t)}(Co)),Co}var Io={},an={},Ul;function a1(){if(Ul)return an;Ul=1,Object.defineProperty(an,"__esModule",{value:!0}),an.HEARTBEAT_EVENTS=an.HEARTBEAT_INTERVAL=void 0;const t=re;return an.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,an.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},an}var jl;function Fl(){return jl||(jl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),tr.__exportStar(a1(),t)}(Io)),Io}var kl;function c1(){if(kl)return gi;kl=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.HeartBeat=void 0;const t=tr,e=lr,r=re,n=Ml(),i=Fl();class s extends n.IHeartBeat{constructor(a){super(a),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=(a==null?void 0:a.interval)||i.HEARTBEAT_INTERVAL}static init(a){return t.__awaiter(this,void 0,void 0,function*(){const l=new s(a);return yield l.init(),l})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(a,l){this.events.on(a,l)}once(a,l){this.events.once(a,l)}off(a,l){this.events.off(a,l)}removeListener(a,l){this.events.removeListener(a,l)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return gi.HeartBeat=s,gi}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=tr;e.__exportStar(c1(),t),e.__exportStar(Ml(),t),e.__exportStar(Fl(),t)})(Tn);var Me={},Ao,Bl;function l1(){if(Bl)return Ao;Bl=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Ao=e;function e(r,n,i){var s=i&&i.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var l=new Array(a);l[0]=s(r);for(var h=1;h<a;h++)l[h]=s(n[h]);return l.join(" ")}if(typeof r!="string")return r;var d=n.length;if(d===0)return r;for(var w="",m=1-o,v=-1,b=r&&r.length||0,x=0;x<b;){if(r.charCodeAt(x)===37&&x+1<b){switch(v=v>-1?v:0,r.charCodeAt(x+1)){case 100:case 102:if(m>=d||n[m]==null)break;v<x&&(w+=r.slice(v,x)),w+=Number(n[m]),v=x+2,x++;break;case 105:if(m>=d||n[m]==null)break;v<x&&(w+=r.slice(v,x)),w+=Math.floor(Number(n[m])),v=x+2,x++;break;case 79:case 111:case 106:if(m>=d||n[m]===void 0)break;v<x&&(w+=r.slice(v,x));var C=typeof n[m];if(C==="string"){w+="'"+n[m]+"'",v=x+2,x++;break}if(C==="function"){w+=n[m].name||"<anonymous>",v=x+2,x++;break}w+=s(n[m]),v=x+2,x++;break;case 115:if(m>=d)break;v<x&&(w+=r.slice(v,x)),w+=String(n[m]),v=x+2,x++;break;case 37:v<x&&(w+=r.slice(v,x)),w+="%",v=x+2,x++,m--;break}++m}++x}return v===-1?r:(v<b&&(w+=r.slice(v)),w)}return Ao}var $o,zl;function u1(){if(zl)return $o;zl=1;const t=l1();$o=i;const e=S().console||{},r={mapHttpRequest:b,mapHttpResponse:b,wrapRequestSerializer:x,wrapResponseSerializer:x,wrapErrorSerializer:x,req:b,res:b,err:m};function n(f,c){return Array.isArray(f)?f.filter(function(P){return P!=="!stdSerializers.err"}):f===!0?Object.keys(c):!1}function i(f){f=f||{},f.browser=f.browser||{};const c=f.browser.transmit;if(c&&typeof c.send!="function")throw Error("pino: transmit option must have a send function");const p=f.browser.write||e;f.browser.write&&(f.browser.asObject=!0);const P=f.serializers||{},A=n(f.browser.serialize,P);let U=f.browser.serialize;Array.isArray(f.browser.serialize)&&f.browser.serialize.indexOf("!stdSerializers.err")>-1&&(U=!1);const B=["error","fatal","warn","info","debug","trace"];typeof p=="function"&&(p.error=p.fatal=p.warn=p.info=p.debug=p.trace=p),f.enabled===!1&&(f.level="silent");const V=f.level||"info",I=Object.create(p);I.log||(I.log=C),Object.defineProperty(I,"levelVal",{get:G}),Object.defineProperty(I,"level",{get:H,set:k});const N={transmit:c,serialize:A,asObject:f.browser.asObject,levels:B,timestamp:v(f)};I.levels=i.levels,I.level=V,I.setMaxListeners=I.getMaxListeners=I.emit=I.addListener=I.on=I.prependListener=I.once=I.prependOnceListener=I.removeListener=I.removeAllListeners=I.listeners=I.listenerCount=I.eventNames=I.write=I.flush=C,I.serializers=P,I._serialize=A,I._stdErrSerialize=U,I.child=W,c&&(I._logEvent=w());function G(){return this.level==="silent"?1/0:this.levels.values[this.level]}function H(){return this._level}function k(F){if(F!=="silent"&&!this.levels.values[F])throw Error("unknown level "+F);this._level=F,s(N,I,"error","log"),s(N,I,"fatal","error"),s(N,I,"warn","error"),s(N,I,"info","log"),s(N,I,"debug","log"),s(N,I,"trace","log")}function W(F,K){if(!F)throw new Error("missing bindings for child Pino");K=K||{},A&&F.serializers&&(K.serializers=F.serializers);const ce=K.serializers;if(A&&ce){var q=Object.assign({},P,ce),se=f.browser.serialize===!0?Object.keys(q):A;delete F.serializers,l([F],se,q,this._stdErrSerialize)}function ee(ie){this._childLevel=(ie._childLevel|0)+1,this.error=h(ie,F,"error"),this.fatal=h(ie,F,"fatal"),this.warn=h(ie,F,"warn"),this.info=h(ie,F,"info"),this.debug=h(ie,F,"debug"),this.trace=h(ie,F,"trace"),q&&(this.serializers=q,this._serialize=se),c&&(this._logEvent=w([].concat(ie._logEvent.bindings,F)))}return ee.prototype=this,new ee(this)}return I}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=r,i.stdTimeFunctions=Object.assign({},{nullTime:$,epochTime:y,unixTime:E,isoTime:g});function s(f,c,p,P){const A=Object.getPrototypeOf(c);c[p]=c.levelVal>c.levels.values[p]?C:A[p]?A[p]:e[p]||e[P]||C,o(f,c,p)}function o(f,c,p){!f.transmit&&c[p]===C||(c[p]=function(P){return function(){const U=f.timestamp(),B=new Array(arguments.length),V=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var I=0;I<B.length;I++)B[I]=arguments[I];if(f.serialize&&!f.asObject&&l(B,this._serialize,this.serializers,this._stdErrSerialize),f.asObject?P.call(V,a(this,p,B,U)):P.apply(V,B),f.transmit){const N=f.transmit.level||c.level,G=i.levels.values[N],H=i.levels.values[p];if(H<G)return;d(this,{ts:U,methodLevel:p,methodValue:H,transmitLevel:N,transmitValue:i.levels.values[f.transmit.level||c.level],send:f.transmit.send,val:c.levelVal},B)}}}(c[p]))}function a(f,c,p,P){f._serialize&&l(p,f._serialize,f.serializers,f._stdErrSerialize);const A=p.slice();let U=A[0];const B={};P&&(B.time=P),B.level=i.levels.values[c];let V=(f._childLevel|0)+1;if(V<1&&(V=1),U!==null&&typeof U=="object"){for(;V--&&typeof A[0]=="object";)Object.assign(B,A.shift());U=A.length?t(A.shift(),A):void 0}else typeof U=="string"&&(U=t(A.shift(),A));return U!==void 0&&(B.msg=U),B}function l(f,c,p,P){for(const A in f)if(P&&f[A]instanceof Error)f[A]=i.stdSerializers.err(f[A]);else if(typeof f[A]=="object"&&!Array.isArray(f[A]))for(const U in f[A])c&&c.indexOf(U)>-1&&U in p&&(f[A][U]=p[U](f[A][U]))}function h(f,c,p){return function(){const P=new Array(1+arguments.length);P[0]=c;for(var A=1;A<P.length;A++)P[A]=arguments[A-1];return f[p].apply(this,P)}}function d(f,c,p){const P=c.send,A=c.ts,U=c.methodLevel,B=c.methodValue,V=c.val,I=f._logEvent.bindings;l(p,f._serialize||Object.keys(f.serializers),f.serializers,f._stdErrSerialize===void 0?!0:f._stdErrSerialize),f._logEvent.ts=A,f._logEvent.messages=p.filter(function(N){return I.indexOf(N)===-1}),f._logEvent.level.label=U,f._logEvent.level.value=B,P(U,f._logEvent,V),f._logEvent=w(I)}function w(f){return{ts:0,messages:[],bindings:f||[],level:{label:"",value:0}}}function m(f){const c={type:f.constructor.name,msg:f.message,stack:f.stack};for(const p in f)c[p]===void 0&&(c[p]=f[p]);return c}function v(f){return typeof f.timestamp=="function"?f.timestamp:f.timestamp===!1?$:y}function b(){return{}}function x(f){return f}function C(){}function $(){return!1}function y(){return Date.now()}function E(){return Math.round(Date.now()/1e3)}function g(){return new Date(Date.now()).toISOString()}function S(){function f(c){return typeof c<"u"&&c}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return f(self)||f(window)||f(this)||{}}}return $o}var cn={},Wl;function Hl(){return Wl||(Wl=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.PINO_CUSTOM_CONTEXT_KEY=cn.PINO_LOGGER_DEFAULTS=void 0,cn.PINO_LOGGER_DEFAULTS={level:"info"},cn.PINO_CUSTOM_CONTEXT_KEY="custom_context"),cn}var Mt={},Vl;function h1(){if(Vl)return Mt;Vl=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.generateChildLogger=Mt.formatChildLoggerContext=Mt.getLoggerContext=Mt.setBrowserLoggerContext=Mt.getBrowserLoggerContext=Mt.getDefaultLoggerOptions=void 0;const t=Hl();function e(a){return Object.assign(Object.assign({},a),{level:(a==null?void 0:a.level)||t.PINO_LOGGER_DEFAULTS.level})}Mt.getDefaultLoggerOptions=e;function r(a,l=t.PINO_CUSTOM_CONTEXT_KEY){return a[l]||""}Mt.getBrowserLoggerContext=r;function n(a,l,h=t.PINO_CUSTOM_CONTEXT_KEY){return a[h]=l,a}Mt.setBrowserLoggerContext=n;function i(a,l=t.PINO_CUSTOM_CONTEXT_KEY){let h="";return typeof a.bindings>"u"?h=r(a,l):h=a.bindings().context||"",h}Mt.getLoggerContext=i;function s(a,l,h=t.PINO_CUSTOM_CONTEXT_KEY){const d=i(a,h);return d.trim()?`${d}/${l}`:l}Mt.formatChildLoggerContext=s;function o(a,l,h=t.PINO_CUSTOM_CONTEXT_KEY){const d=s(a,l,h),w=a.child({context:d});return n(w,d,h)}return Mt.generateChildLogger=o,Mt}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=tr,r=e.__importDefault(u1());Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(Hl(),t),e.__exportStar(h1(),t)})(Me);let d1=class extends on{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},f1=class extends on{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},p1=class{constructor(e,r){this.logger=e,this.core=r}},g1=class extends on{constructor(e,r){super(),this.relayer=e,this.logger=r}},m1=class extends on{constructor(e){super()}},w1=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},v1=class extends on{constructor(e,r){super(),this.relayer=e,this.logger=r}},y1=class extends on{constructor(e,r){super(),this.core=e,this.logger=r}},b1=class{constructor(e,r){this.projectId=e,this.logger=r}},_1=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},E1=class{constructor(e){this.client=e}};const S1=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),x1=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Kl(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return x1(t)}catch{return t}}function To(t){return typeof t=="string"?t:S1(t)||""}var Ro={},Pn={},as={},cs={};Object.defineProperty(cs,"__esModule",{value:!0}),cs.BrowserRandomSource=void 0;const ql=65536;class D1{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=ql)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,ql)));return r}}cs.BrowserRandomSource=D1;function O1(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ls={},Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});function C1(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Yt.wipe=C1;const I1=ho(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(ls,"__esModule",{value:!0}),ls.NodeRandomSource=void 0;const A1=Yt;class $1{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof O1<"u"){const e=I1;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,A1.wipe)(r),n}}ls.NodeRandomSource=$1,Object.defineProperty(as,"__esModule",{value:!0}),as.SystemRandomSource=void 0;const T1=cs,R1=ls;class P1{constructor(){if(this.isAvailable=!1,this.name="",this._source=new T1.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new R1.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}as.SystemRandomSource=P1;var de={},Gl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,l){var h=a>>>16&65535,d=a&65535,w=l>>>16&65535,m=l&65535;return d*m+(h*m+d*w<<16>>>0)|0}t.mul=Math.imul||e;function r(a,l){return a+l|0}t.add=r;function n(a,l){return a-l|0}t.sub=n;function i(a,l){return a<<l|a>>>32-l}t.rotl=i;function s(a,l){return a<<32-l|a>>>l}t.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||o,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(Gl),Object.defineProperty(de,"__esModule",{value:!0});var Yl=Gl;function N1(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}de.readInt16BE=N1;function L1(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}de.readUint16BE=L1;function M1(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}de.readInt16LE=M1;function U1(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}de.readUint16LE=U1;function Jl(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}de.writeUint16BE=Jl,de.writeInt16BE=Jl;function Zl(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}de.writeUint16LE=Zl,de.writeInt16LE=Zl;function Po(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}de.readInt32BE=Po;function No(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}de.readUint32BE=No;function Lo(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}de.readInt32LE=Lo;function Mo(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}de.readUint32LE=Mo;function us(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}de.writeUint32BE=us,de.writeInt32BE=us;function hs(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}de.writeUint32LE=hs,de.writeInt32LE=hs;function j1(t,e){e===void 0&&(e=0);var r=Po(t,e),n=Po(t,e+4);return r*4294967296+n-(n>>31)*4294967296}de.readInt64BE=j1;function F1(t,e){e===void 0&&(e=0);var r=No(t,e),n=No(t,e+4);return r*4294967296+n}de.readUint64BE=F1;function k1(t,e){e===void 0&&(e=0);var r=Lo(t,e),n=Lo(t,e+4);return n*4294967296+r-(r>>31)*4294967296}de.readInt64LE=k1;function B1(t,e){e===void 0&&(e=0);var r=Mo(t,e),n=Mo(t,e+4);return n*4294967296+r}de.readUint64LE=B1;function Xl(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),us(t/4294967296>>>0,e,r),us(t>>>0,e,r+4),e}de.writeUint64BE=Xl,de.writeInt64BE=Xl;function Ql(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),hs(t>>>0,e,r),hs(t/4294967296>>>0,e,r+4),e}de.writeUint64LE=Ql,de.writeInt64LE=Ql;function z1(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}de.readUintBE=z1;function W1(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}de.readUintLE=W1;function H1(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Yl.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}de.writeUintBE=H1;function V1(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Yl.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}de.writeUintLE=V1;function K1(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}de.readFloat32BE=K1;function q1(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}de.readFloat32LE=q1;function G1(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}de.readFloat64BE=G1;function Y1(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}de.readFloat64LE=Y1;function J1(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}de.writeFloat32BE=J1;function Z1(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}de.writeFloat32LE=Z1;function X1(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}de.writeFloat64BE=X1;function Q1(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}de.writeFloat64LE=Q1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=as,r=de,n=Yt;t.defaultRandomSource=new e.SystemRandomSource;function i(h,d=t.defaultRandomSource){return d.randomBytes(h)}t.randomBytes=i;function s(h=t.defaultRandomSource){const d=i(4,h),w=(0,r.readUint32LE)(d);return(0,n.wipe)(d),w}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(h,d=o,w=t.defaultRandomSource){if(d.length<2)throw new Error("randomString charset is too short");if(d.length>256)throw new Error("randomString charset is too long");let m="";const v=d.length,b=256-256%v;for(;h>0;){const x=i(Math.ceil(h*256/b),w);for(let C=0;C<x.length&&h>0;C++){const $=x[C];$<b&&(m+=d.charAt($%v),h--)}(0,n.wipe)(x)}return m}t.randomString=a;function l(h,d=o,w=t.defaultRandomSource){const m=Math.ceil(h/(Math.log(d.length)/Math.LN2));return a(m,d,w)}t.randomStringForEntropy=l}(Pn);var eu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=de,r=Yt;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(l,h){if(h===void 0&&(h=l.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var d=0;if(this._bytesHashed+=h,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&h>0;)this._buffer[this._bufferLength++]=l[d++],h--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(h>=this.blockSize&&(d=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,l,d,h),h%=this.blockSize);h>0;)this._buffer[this._bufferLength++]=l[d++],h--;return this},a.prototype.finish=function(l){if(!this._finished){var h=this._bytesHashed,d=this._bufferLength,w=h/536870912|0,m=h<<3,v=h%128<112?128:256;this._buffer[d]=128;for(var b=d+1;b<v-8;b++)this._buffer[b]=0;e.writeUint32BE(w,this._buffer,v-8),e.writeUint32BE(m,this._buffer,v-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,v),this._finished=!0}for(var b=0;b<this.digestLength/8;b++)e.writeUint32BE(this._stateHi[b],l,b*8),e.writeUint32BE(this._stateLo[b],l,b*8+4);return this},a.prototype.digest=function(){var l=new Uint8Array(this.digestLength);return this.finish(l),l},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(l){return this._stateHi.set(l.stateHi),this._stateLo.set(l.stateLo),this._bufferLength=l.bufferLength,l.buffer&&this._buffer.set(l.buffer),this._bytesHashed=l.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(l){r.wipe(l.stateHi),r.wipe(l.stateLo),l.buffer&&r.wipe(l.buffer),l.bufferLength=0,l.bytesHashed=0},a}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,l,h,d,w,m,v){for(var b=h[0],x=h[1],C=h[2],$=h[3],y=h[4],E=h[5],g=h[6],S=h[7],f=d[0],c=d[1],p=d[2],P=d[3],A=d[4],U=d[5],B=d[6],V=d[7],I,N,G,H,k,W,F,K;v>=128;){for(var ce=0;ce<16;ce++){var q=8*ce+m;a[ce]=e.readUint32BE(w,q),l[ce]=e.readUint32BE(w,q+4)}for(var ce=0;ce<80;ce++){var se=b,ee=x,ie=C,M=$,L=y,T=E,u=g,O=S,Y=f,Q=c,Se=p,xe=P,me=A,Ne=U,Ze=B,Ve=V;if(I=S,N=V,k=N&65535,W=N>>>16,F=I&65535,K=I>>>16,I=(y>>>14|A<<32-14)^(y>>>18|A<<32-18)^(A>>>41-32|y<<32-(41-32)),N=(A>>>14|y<<32-14)^(A>>>18|y<<32-18)^(y>>>41-32|A<<32-(41-32)),k+=N&65535,W+=N>>>16,F+=I&65535,K+=I>>>16,I=y&E^~y&g,N=A&U^~A&B,k+=N&65535,W+=N>>>16,F+=I&65535,K+=I>>>16,I=i[ce*2],N=i[ce*2+1],k+=N&65535,W+=N>>>16,F+=I&65535,K+=I>>>16,I=a[ce%16],N=l[ce%16],k+=N&65535,W+=N>>>16,F+=I&65535,K+=I>>>16,W+=k>>>16,F+=W>>>16,K+=F>>>16,G=F&65535|K<<16,H=k&65535|W<<16,I=G,N=H,k=N&65535,W=N>>>16,F=I&65535,K=I>>>16,I=(b>>>28|f<<32-28)^(f>>>34-32|b<<32-(34-32))^(f>>>39-32|b<<32-(39-32)),N=(f>>>28|b<<32-28)^(b>>>34-32|f<<32-(34-32))^(b>>>39-32|f<<32-(39-32)),k+=N&65535,W+=N>>>16,F+=I&65535,K+=I>>>16,I=b&x^b&C^x&C,N=f&c^f&p^c&p,k+=N&65535,W+=N>>>16,F+=I&65535,K+=I>>>16,W+=k>>>16,F+=W>>>16,K+=F>>>16,O=F&65535|K<<16,Ve=k&65535|W<<16,I=M,N=xe,k=N&65535,W=N>>>16,F=I&65535,K=I>>>16,I=G,N=H,k+=N&65535,W+=N>>>16,F+=I&65535,K+=I>>>16,W+=k>>>16,F+=W>>>16,K+=F>>>16,M=F&65535|K<<16,xe=k&65535|W<<16,x=se,C=ee,$=ie,y=M,E=L,g=T,S=u,b=O,c=Y,p=Q,P=Se,A=xe,U=me,B=Ne,V=Ze,f=Ve,ce%16===15)for(var q=0;q<16;q++)I=a[q],N=l[q],k=N&65535,W=N>>>16,F=I&65535,K=I>>>16,I=a[(q+9)%16],N=l[(q+9)%16],k+=N&65535,W+=N>>>16,F+=I&65535,K+=I>>>16,G=a[(q+1)%16],H=l[(q+1)%16],I=(G>>>1|H<<32-1)^(G>>>8|H<<32-8)^G>>>7,N=(H>>>1|G<<32-1)^(H>>>8|G<<32-8)^(H>>>7|G<<32-7),k+=N&65535,W+=N>>>16,F+=I&65535,K+=I>>>16,G=a[(q+14)%16],H=l[(q+14)%16],I=(G>>>19|H<<32-19)^(H>>>61-32|G<<32-(61-32))^G>>>6,N=(H>>>19|G<<32-19)^(G>>>61-32|H<<32-(61-32))^(H>>>6|G<<32-6),k+=N&65535,W+=N>>>16,F+=I&65535,K+=I>>>16,W+=k>>>16,F+=W>>>16,K+=F>>>16,a[q]=F&65535|K<<16,l[q]=k&65535|W<<16}I=b,N=f,k=N&65535,W=N>>>16,F=I&65535,K=I>>>16,I=h[0],N=d[0],k+=N&65535,W+=N>>>16,F+=I&65535,K+=I>>>16,W+=k>>>16,F+=W>>>16,K+=F>>>16,h[0]=b=F&65535|K<<16,d[0]=f=k&65535|W<<16,I=x,N=c,k=N&65535,W=N>>>16,F=I&65535,K=I>>>16,I=h[1],N=d[1],k+=N&65535,W+=N>>>16,F+=I&65535,K+=I>>>16,W+=k>>>16,F+=W>>>16,K+=F>>>16,h[1]=x=F&65535|K<<16,d[1]=c=k&65535|W<<16,I=C,N=p,k=N&65535,W=N>>>16,F=I&65535,K=I>>>16,I=h[2],N=d[2],k+=N&65535,W+=N>>>16,F+=I&65535,K+=I>>>16,W+=k>>>16,F+=W>>>16,K+=F>>>16,h[2]=C=F&65535|K<<16,d[2]=p=k&65535|W<<16,I=$,N=P,k=N&65535,W=N>>>16,F=I&65535,K=I>>>16,I=h[3],N=d[3],k+=N&65535,W+=N>>>16,F+=I&65535,K+=I>>>16,W+=k>>>16,F+=W>>>16,K+=F>>>16,h[3]=$=F&65535|K<<16,d[3]=P=k&65535|W<<16,I=y,N=A,k=N&65535,W=N>>>16,F=I&65535,K=I>>>16,I=h[4],N=d[4],k+=N&65535,W+=N>>>16,F+=I&65535,K+=I>>>16,W+=k>>>16,F+=W>>>16,K+=F>>>16,h[4]=y=F&65535|K<<16,d[4]=A=k&65535|W<<16,I=E,N=U,k=N&65535,W=N>>>16,F=I&65535,K=I>>>16,I=h[5],N=d[5],k+=N&65535,W+=N>>>16,F+=I&65535,K+=I>>>16,W+=k>>>16,F+=W>>>16,K+=F>>>16,h[5]=E=F&65535|K<<16,d[5]=U=k&65535|W<<16,I=g,N=B,k=N&65535,W=N>>>16,F=I&65535,K=I>>>16,I=h[6],N=d[6],k+=N&65535,W+=N>>>16,F+=I&65535,K+=I>>>16,W+=k>>>16,F+=W>>>16,K+=F>>>16,h[6]=g=F&65535|K<<16,d[6]=B=k&65535|W<<16,I=S,N=V,k=N&65535,W=N>>>16,F=I&65535,K=I>>>16,I=h[7],N=d[7],k+=N&65535,W+=N>>>16,F+=I&65535,K+=I>>>16,W+=k>>>16,F+=W>>>16,K+=F>>>16,h[7]=S=F&65535|K<<16,d[7]=V=k&65535|W<<16,m+=128,v-=128}return m}function o(a){var l=new n;l.update(a);var h=l.digest();return l.clean(),h}t.hash=o})(eu),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=Pn,r=eu,n=Yt;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(M){const L=new Float64Array(16);if(M)for(let T=0;T<M.length;T++)L[T]=M[T];return L}const s=new Uint8Array(32);s[0]=9;const o=i(),a=i([1]),l=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),w=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),m=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function v(M,L){for(let T=0;T<16;T++)M[T]=L[T]|0}function b(M){let L=1;for(let T=0;T<16;T++){let u=M[T]+L+65535;L=Math.floor(u/65536),M[T]=u-L*65536}M[0]+=L-1+37*(L-1)}function x(M,L,T){const u=~(T-1);for(let O=0;O<16;O++){const Y=u&(M[O]^L[O]);M[O]^=Y,L[O]^=Y}}function C(M,L){const T=i(),u=i();for(let O=0;O<16;O++)u[O]=L[O];b(u),b(u),b(u);for(let O=0;O<2;O++){T[0]=u[0]-65517;for(let Q=1;Q<15;Q++)T[Q]=u[Q]-65535-(T[Q-1]>>16&1),T[Q-1]&=65535;T[15]=u[15]-32767-(T[14]>>16&1);const Y=T[15]>>16&1;T[14]&=65535,x(u,T,1-Y)}for(let O=0;O<16;O++)M[2*O]=u[O]&255,M[2*O+1]=u[O]>>8}function $(M,L){let T=0;for(let u=0;u<32;u++)T|=M[u]^L[u];return(1&T-1>>>8)-1}function y(M,L){const T=new Uint8Array(32),u=new Uint8Array(32);return C(T,M),C(u,L),$(T,u)}function E(M){const L=new Uint8Array(32);return C(L,M),L[0]&1}function g(M,L){for(let T=0;T<16;T++)M[T]=L[2*T]+(L[2*T+1]<<8);M[15]&=32767}function S(M,L,T){for(let u=0;u<16;u++)M[u]=L[u]+T[u]}function f(M,L,T){for(let u=0;u<16;u++)M[u]=L[u]-T[u]}function c(M,L,T){let u,O,Y=0,Q=0,Se=0,xe=0,me=0,Ne=0,Ze=0,Ve=0,$e=0,Ce=0,we=0,ye=0,ve=0,fe=0,he=0,oe=0,be=0,De=0,le=0,Ie=0,Le=0,ke=0,Be=0,Ue=0,Qt=0,sr=0,Sr=0,It=0,xr=0,or=0,Gr=0,Xe=T[0],Ge=T[1],st=T[2],et=T[3],ot=T[4],Ye=T[5],ht=T[6],mt=T[7],wt=T[8],dt=T[9],vt=T[10],ft=T[11],at=T[12],qe=T[13],D=T[14],j=T[15];u=L[0],Y+=u*Xe,Q+=u*Ge,Se+=u*st,xe+=u*et,me+=u*ot,Ne+=u*Ye,Ze+=u*ht,Ve+=u*mt,$e+=u*wt,Ce+=u*dt,we+=u*vt,ye+=u*ft,ve+=u*at,fe+=u*qe,he+=u*D,oe+=u*j,u=L[1],Q+=u*Xe,Se+=u*Ge,xe+=u*st,me+=u*et,Ne+=u*ot,Ze+=u*Ye,Ve+=u*ht,$e+=u*mt,Ce+=u*wt,we+=u*dt,ye+=u*vt,ve+=u*ft,fe+=u*at,he+=u*qe,oe+=u*D,be+=u*j,u=L[2],Se+=u*Xe,xe+=u*Ge,me+=u*st,Ne+=u*et,Ze+=u*ot,Ve+=u*Ye,$e+=u*ht,Ce+=u*mt,we+=u*wt,ye+=u*dt,ve+=u*vt,fe+=u*ft,he+=u*at,oe+=u*qe,be+=u*D,De+=u*j,u=L[3],xe+=u*Xe,me+=u*Ge,Ne+=u*st,Ze+=u*et,Ve+=u*ot,$e+=u*Ye,Ce+=u*ht,we+=u*mt,ye+=u*wt,ve+=u*dt,fe+=u*vt,he+=u*ft,oe+=u*at,be+=u*qe,De+=u*D,le+=u*j,u=L[4],me+=u*Xe,Ne+=u*Ge,Ze+=u*st,Ve+=u*et,$e+=u*ot,Ce+=u*Ye,we+=u*ht,ye+=u*mt,ve+=u*wt,fe+=u*dt,he+=u*vt,oe+=u*ft,be+=u*at,De+=u*qe,le+=u*D,Ie+=u*j,u=L[5],Ne+=u*Xe,Ze+=u*Ge,Ve+=u*st,$e+=u*et,Ce+=u*ot,we+=u*Ye,ye+=u*ht,ve+=u*mt,fe+=u*wt,he+=u*dt,oe+=u*vt,be+=u*ft,De+=u*at,le+=u*qe,Ie+=u*D,Le+=u*j,u=L[6],Ze+=u*Xe,Ve+=u*Ge,$e+=u*st,Ce+=u*et,we+=u*ot,ye+=u*Ye,ve+=u*ht,fe+=u*mt,he+=u*wt,oe+=u*dt,be+=u*vt,De+=u*ft,le+=u*at,Ie+=u*qe,Le+=u*D,ke+=u*j,u=L[7],Ve+=u*Xe,$e+=u*Ge,Ce+=u*st,we+=u*et,ye+=u*ot,ve+=u*Ye,fe+=u*ht,he+=u*mt,oe+=u*wt,be+=u*dt,De+=u*vt,le+=u*ft,Ie+=u*at,Le+=u*qe,ke+=u*D,Be+=u*j,u=L[8],$e+=u*Xe,Ce+=u*Ge,we+=u*st,ye+=u*et,ve+=u*ot,fe+=u*Ye,he+=u*ht,oe+=u*mt,be+=u*wt,De+=u*dt,le+=u*vt,Ie+=u*ft,Le+=u*at,ke+=u*qe,Be+=u*D,Ue+=u*j,u=L[9],Ce+=u*Xe,we+=u*Ge,ye+=u*st,ve+=u*et,fe+=u*ot,he+=u*Ye,oe+=u*ht,be+=u*mt,De+=u*wt,le+=u*dt,Ie+=u*vt,Le+=u*ft,ke+=u*at,Be+=u*qe,Ue+=u*D,Qt+=u*j,u=L[10],we+=u*Xe,ye+=u*Ge,ve+=u*st,fe+=u*et,he+=u*ot,oe+=u*Ye,be+=u*ht,De+=u*mt,le+=u*wt,Ie+=u*dt,Le+=u*vt,ke+=u*ft,Be+=u*at,Ue+=u*qe,Qt+=u*D,sr+=u*j,u=L[11],ye+=u*Xe,ve+=u*Ge,fe+=u*st,he+=u*et,oe+=u*ot,be+=u*Ye,De+=u*ht,le+=u*mt,Ie+=u*wt,Le+=u*dt,ke+=u*vt,Be+=u*ft,Ue+=u*at,Qt+=u*qe,sr+=u*D,Sr+=u*j,u=L[12],ve+=u*Xe,fe+=u*Ge,he+=u*st,oe+=u*et,be+=u*ot,De+=u*Ye,le+=u*ht,Ie+=u*mt,Le+=u*wt,ke+=u*dt,Be+=u*vt,Ue+=u*ft,Qt+=u*at,sr+=u*qe,Sr+=u*D,It+=u*j,u=L[13],fe+=u*Xe,he+=u*Ge,oe+=u*st,be+=u*et,De+=u*ot,le+=u*Ye,Ie+=u*ht,Le+=u*mt,ke+=u*wt,Be+=u*dt,Ue+=u*vt,Qt+=u*ft,sr+=u*at,Sr+=u*qe,It+=u*D,xr+=u*j,u=L[14],he+=u*Xe,oe+=u*Ge,be+=u*st,De+=u*et,le+=u*ot,Ie+=u*Ye,Le+=u*ht,ke+=u*mt,Be+=u*wt,Ue+=u*dt,Qt+=u*vt,sr+=u*ft,Sr+=u*at,It+=u*qe,xr+=u*D,or+=u*j,u=L[15],oe+=u*Xe,be+=u*Ge,De+=u*st,le+=u*et,Ie+=u*ot,Le+=u*Ye,ke+=u*ht,Be+=u*mt,Ue+=u*wt,Qt+=u*dt,sr+=u*vt,Sr+=u*ft,It+=u*at,xr+=u*qe,or+=u*D,Gr+=u*j,Y+=38*be,Q+=38*De,Se+=38*le,xe+=38*Ie,me+=38*Le,Ne+=38*ke,Ze+=38*Be,Ve+=38*Ue,$e+=38*Qt,Ce+=38*sr,we+=38*Sr,ye+=38*It,ve+=38*xr,fe+=38*or,he+=38*Gr,O=1,u=Y+O+65535,O=Math.floor(u/65536),Y=u-O*65536,u=Q+O+65535,O=Math.floor(u/65536),Q=u-O*65536,u=Se+O+65535,O=Math.floor(u/65536),Se=u-O*65536,u=xe+O+65535,O=Math.floor(u/65536),xe=u-O*65536,u=me+O+65535,O=Math.floor(u/65536),me=u-O*65536,u=Ne+O+65535,O=Math.floor(u/65536),Ne=u-O*65536,u=Ze+O+65535,O=Math.floor(u/65536),Ze=u-O*65536,u=Ve+O+65535,O=Math.floor(u/65536),Ve=u-O*65536,u=$e+O+65535,O=Math.floor(u/65536),$e=u-O*65536,u=Ce+O+65535,O=Math.floor(u/65536),Ce=u-O*65536,u=we+O+65535,O=Math.floor(u/65536),we=u-O*65536,u=ye+O+65535,O=Math.floor(u/65536),ye=u-O*65536,u=ve+O+65535,O=Math.floor(u/65536),ve=u-O*65536,u=fe+O+65535,O=Math.floor(u/65536),fe=u-O*65536,u=he+O+65535,O=Math.floor(u/65536),he=u-O*65536,u=oe+O+65535,O=Math.floor(u/65536),oe=u-O*65536,Y+=O-1+37*(O-1),O=1,u=Y+O+65535,O=Math.floor(u/65536),Y=u-O*65536,u=Q+O+65535,O=Math.floor(u/65536),Q=u-O*65536,u=Se+O+65535,O=Math.floor(u/65536),Se=u-O*65536,u=xe+O+65535,O=Math.floor(u/65536),xe=u-O*65536,u=me+O+65535,O=Math.floor(u/65536),me=u-O*65536,u=Ne+O+65535,O=Math.floor(u/65536),Ne=u-O*65536,u=Ze+O+65535,O=Math.floor(u/65536),Ze=u-O*65536,u=Ve+O+65535,O=Math.floor(u/65536),Ve=u-O*65536,u=$e+O+65535,O=Math.floor(u/65536),$e=u-O*65536,u=Ce+O+65535,O=Math.floor(u/65536),Ce=u-O*65536,u=we+O+65535,O=Math.floor(u/65536),we=u-O*65536,u=ye+O+65535,O=Math.floor(u/65536),ye=u-O*65536,u=ve+O+65535,O=Math.floor(u/65536),ve=u-O*65536,u=fe+O+65535,O=Math.floor(u/65536),fe=u-O*65536,u=he+O+65535,O=Math.floor(u/65536),he=u-O*65536,u=oe+O+65535,O=Math.floor(u/65536),oe=u-O*65536,Y+=O-1+37*(O-1),M[0]=Y,M[1]=Q,M[2]=Se,M[3]=xe,M[4]=me,M[5]=Ne,M[6]=Ze,M[7]=Ve,M[8]=$e,M[9]=Ce,M[10]=we,M[11]=ye,M[12]=ve,M[13]=fe,M[14]=he,M[15]=oe}function p(M,L){c(M,L,L)}function P(M,L){const T=i();let u;for(u=0;u<16;u++)T[u]=L[u];for(u=253;u>=0;u--)p(T,T),u!==2&&u!==4&&c(T,T,L);for(u=0;u<16;u++)M[u]=T[u]}function A(M,L){const T=i();let u;for(u=0;u<16;u++)T[u]=L[u];for(u=250;u>=0;u--)p(T,T),u!==1&&c(T,T,L);for(u=0;u<16;u++)M[u]=T[u]}function U(M,L){const T=i(),u=i(),O=i(),Y=i(),Q=i(),Se=i(),xe=i(),me=i(),Ne=i();f(T,M[1],M[0]),f(Ne,L[1],L[0]),c(T,T,Ne),S(u,M[0],M[1]),S(Ne,L[0],L[1]),c(u,u,Ne),c(O,M[3],L[3]),c(O,O,h),c(Y,M[2],L[2]),S(Y,Y,Y),f(Q,u,T),f(Se,Y,O),S(xe,Y,O),S(me,u,T),c(M[0],Q,Se),c(M[1],me,xe),c(M[2],xe,Se),c(M[3],Q,me)}function B(M,L,T){for(let u=0;u<4;u++)x(M[u],L[u],T)}function V(M,L){const T=i(),u=i(),O=i();P(O,L[2]),c(T,L[0],O),c(u,L[1],O),C(M,u),M[31]^=E(T)<<7}function I(M,L,T){v(M[0],o),v(M[1],a),v(M[2],a),v(M[3],o);for(let u=255;u>=0;--u){const O=T[u/8|0]>>(u&7)&1;B(M,L,O),U(L,M),U(M,M),B(M,L,O)}}function N(M,L){const T=[i(),i(),i(),i()];v(T[0],d),v(T[1],w),v(T[2],a),c(T[3],d,w),I(M,T,L)}function G(M){if(M.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const L=(0,r.hash)(M);L[0]&=248,L[31]&=127,L[31]|=64;const T=new Uint8Array(32),u=[i(),i(),i(),i()];N(u,L),V(T,u);const O=new Uint8Array(64);return O.set(M),O.set(T,32),{publicKey:T,secretKey:O}}t.generateKeyPairFromSeed=G;function H(M){const L=(0,e.randomBytes)(32,M),T=G(L);return(0,n.wipe)(L),T}t.generateKeyPair=H;function k(M){if(M.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(M.subarray(32))}t.extractPublicKeyFromSecretKey=k;const W=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function F(M,L){let T,u,O,Y;for(u=63;u>=32;--u){for(T=0,O=u-32,Y=u-12;O<Y;++O)L[O]+=T-16*L[u]*W[O-(u-32)],T=Math.floor((L[O]+128)/256),L[O]-=T*256;L[O]+=T,L[u]=0}for(T=0,O=0;O<32;O++)L[O]+=T-(L[31]>>4)*W[O],T=L[O]>>8,L[O]&=255;for(O=0;O<32;O++)L[O]-=T*W[O];for(u=0;u<32;u++)L[u+1]+=L[u]>>8,M[u]=L[u]&255}function K(M){const L=new Float64Array(64);for(let T=0;T<64;T++)L[T]=M[T];for(let T=0;T<64;T++)M[T]=0;F(M,L)}function ce(M,L){const T=new Float64Array(64),u=[i(),i(),i(),i()],O=(0,r.hash)(M.subarray(0,32));O[0]&=248,O[31]&=127,O[31]|=64;const Y=new Uint8Array(64);Y.set(O.subarray(32),32);const Q=new r.SHA512;Q.update(Y.subarray(32)),Q.update(L);const Se=Q.digest();Q.clean(),K(Se),N(u,Se),V(Y,u),Q.reset(),Q.update(Y.subarray(0,32)),Q.update(M.subarray(32)),Q.update(L);const xe=Q.digest();K(xe);for(let me=0;me<32;me++)T[me]=Se[me];for(let me=0;me<32;me++)for(let Ne=0;Ne<32;Ne++)T[me+Ne]+=xe[me]*O[Ne];return F(Y.subarray(32),T),Y}t.sign=ce;function q(M,L){const T=i(),u=i(),O=i(),Y=i(),Q=i(),Se=i(),xe=i();return v(M[2],a),g(M[1],L),p(O,M[1]),c(Y,O,l),f(O,O,M[2]),S(Y,M[2],Y),p(Q,Y),p(Se,Q),c(xe,Se,Q),c(T,xe,O),c(T,T,Y),A(T,T),c(T,T,O),c(T,T,Y),c(T,T,Y),c(M[0],T,Y),p(u,M[0]),c(u,u,Y),y(u,O)&&c(M[0],M[0],m),p(u,M[0]),c(u,u,Y),y(u,O)?-1:(E(M[0])===L[31]>>7&&f(M[0],o,M[0]),c(M[3],M[0],M[1]),0)}function se(M,L,T){const u=new Uint8Array(32),O=[i(),i(),i(),i()],Y=[i(),i(),i(),i()];if(T.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(q(Y,M))return!1;const Q=new r.SHA512;Q.update(T.subarray(0,32)),Q.update(M),Q.update(L);const Se=Q.digest();return K(Se),I(O,Y,Se),N(Y,T.subarray(32)),U(O,Y),V(u,O),!$(T,u)}t.verify=se;function ee(M){let L=[i(),i(),i(),i()];if(q(L,M))throw new Error("Ed25519: invalid public key");let T=i(),u=i(),O=L[1];S(T,a,O),f(u,a,O),P(u,u),c(T,T,u);let Y=new Uint8Array(32);return C(Y,T),Y}t.convertPublicKeyToX25519=ee;function ie(M){const L=(0,r.hash)(M.subarray(0,32));L[0]&=248,L[31]&=127,L[31]|=64;const T=new Uint8Array(L.subarray(0,32));return(0,n.wipe)(L),T}t.convertSecretKeyToX25519=ie}(Ro);const ep="EdDSA",tp="JWT",tu=".",ru="base64url",rp="utf8",np="utf8",ip=":",sp="did",op="key",nu="base58btc",ap="z",cp="K36",lp=32;function Uo(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function iu(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Uo(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function jo(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=iu(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return Uo(r)}function up(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,l=t.charAt(0),h=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function w(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var x=0,C=0,$=0,y=b.length;$!==y&&b[$]===0;)$++,x++;for(var E=(y-$)*d+1>>>0,g=new Uint8Array(E);$!==y;){for(var S=b[$],f=0,c=E-1;(S!==0||f<C)&&c!==-1;c--,f++)S+=256*g[c]>>>0,g[c]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");C=f,$++}for(var p=E-C;p!==E&&g[p]===0;)p++;for(var P=l.repeat(x);p<E;++p)P+=t.charAt(g[p]);return P}function m(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var x=0;if(b[x]!==" "){for(var C=0,$=0;b[x]===l;)C++,x++;for(var y=(b.length-x)*h+1>>>0,E=new Uint8Array(y);b[x];){var g=r[b.charCodeAt(x)];if(g===255)return;for(var S=0,f=y-1;(g!==0||S<$)&&f!==-1;f--,S++)g+=a*E[f]>>>0,E[f]=g%256>>>0,g=g/256>>>0;if(g!==0)throw new Error("Non-zero carry");$=S,x++}if(b[x]!==" "){for(var c=y-$;c!==y&&E[c]===0;)c++;for(var p=new Uint8Array(C+(y-c)),P=C;c!==y;)p[P++]=E[c++];return p}}}function v(b){var x=m(b);if(x)return x;throw new Error(`Non-${e} character`)}return{encode:w,decodeUnsafe:m,decode:v}}var hp=up,dp=hp;const fp=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},pp=t=>new TextEncoder().encode(t),gp=t=>new TextDecoder().decode(t);class mp{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class wp{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return su(this,e)}}class vp{constructor(e){this.decoders=e}or(e){return su(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const su=(t,e)=>new vp({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class yp{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new mp(e,r,n),this.decoder=new wp(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ds=({name:t,prefix:e,encode:r,decode:n})=>new yp(t,e,r,n),yi=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=dp(r,e);return ds({prefix:t,name:e,encode:n,decode:s=>fp(i(s))})},bp=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,l=0,h=0;for(let d=0;d<s;++d){const w=i[t[d]];if(w===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<r|w,a+=r,a>=8&&(a-=8,o[h++]=255&l>>a)}if(a>=r||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return o},_p=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Dt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>ds({prefix:e,name:t,encode(i){return _p(i,n,r)},decode(i){return bp(i,n,r,t)}}),Ep=ds({prefix:"\0",name:"identity",encode:t=>gp(t),decode:t=>pp(t)}),Sp=Object.freeze(Object.defineProperty({__proto__:null,identity:Ep},Symbol.toStringTag,{value:"Module"})),xp=Dt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Dp=Object.freeze(Object.defineProperty({__proto__:null,base2:xp},Symbol.toStringTag,{value:"Module"})),Op=Dt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Cp=Object.freeze(Object.defineProperty({__proto__:null,base8:Op},Symbol.toStringTag,{value:"Module"})),Ip=yi({prefix:"9",name:"base10",alphabet:"0123456789"}),Ap=Object.freeze(Object.defineProperty({__proto__:null,base10:Ip},Symbol.toStringTag,{value:"Module"})),$p=Dt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Tp=Dt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Rp=Object.freeze(Object.defineProperty({__proto__:null,base16:$p,base16upper:Tp},Symbol.toStringTag,{value:"Module"})),Pp=Dt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Np=Dt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Lp=Dt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Mp=Dt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Up=Dt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),jp=Dt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Fp=Dt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),kp=Dt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Bp=Dt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),zp=Object.freeze(Object.defineProperty({__proto__:null,base32:Pp,base32hex:Up,base32hexpad:Fp,base32hexpadupper:kp,base32hexupper:jp,base32pad:Lp,base32padupper:Mp,base32upper:Np,base32z:Bp},Symbol.toStringTag,{value:"Module"})),Wp=yi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Hp=yi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Vp=Object.freeze(Object.defineProperty({__proto__:null,base36:Wp,base36upper:Hp},Symbol.toStringTag,{value:"Module"})),Kp=yi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),qp=yi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Gp=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Kp,base58flickr:qp},Symbol.toStringTag,{value:"Module"})),Yp=Dt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Jp=Dt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Zp=Dt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Xp=Dt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Qp=Object.freeze(Object.defineProperty({__proto__:null,base64:Yp,base64pad:Jp,base64url:Zp,base64urlpad:Xp},Symbol.toStringTag,{value:"Module"})),ou=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),eg=ou.reduce((t,e,r)=>(t[r]=e,t),[]),tg=ou.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function rg(t){return t.reduce((e,r)=>(e+=eg[r],e),"")}function ng(t){const e=[];for(const r of t){const n=tg[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const ig=ds({prefix:"🚀",name:"base256emoji",encode:rg,decode:ng}),sg=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:ig},Symbol.toStringTag,{value:"Module"}));new TextEncoder,new TextDecoder;const au={...Sp,...Dp,...Cp,...Ap,...Rp,...zp,...Vp,...Gp,...Qp,...sg};function cu(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const lu=cu("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Fo=cu("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=iu(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),uu={utf8:lu,"utf-8":lu,hex:au.base16,latin1:Fo,ascii:Fo,binary:Fo,...au};function Ut(t,e="utf8"){const r=uu[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Wt(t,e="utf8"){const r=uu[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Uo(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function fs(t){return Ut(Wt(To(t),rp),ru)}function hu(t){const e=Wt(cp,nu),r=ap+Ut(jo([e,t]),nu);return[sp,op,r].join(ip)}function og(t){return Ut(t,ru)}function ag(t){return Wt([fs(t.header),fs(t.payload)].join(tu),np)}function cg(t){return[fs(t.header),fs(t.payload),og(t.signature)].join(tu)}function du(t=Pn.randomBytes(lp)){return Ro.generateKeyPairFromSeed(t)}async function lg(t,e,r,n,i=re.fromMiliseconds(Date.now())){const s={alg:ep,typ:tp},o=hu(n.publicKey),a=i+r,l={iss:o,sub:t,aud:e,iat:i,exp:a},h=ag({header:s,payload:l}),d=Ro.sign(n.secretKey,h);return cg({header:s,payload:l,signature:d})}var ko={},ps={};Object.defineProperty(ps,"__esModule",{value:!0});var Rt=de,Bo=Yt,ug=20;function hg(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],l=r[7]<<24|r[6]<<16|r[5]<<8|r[4],h=r[11]<<24|r[10]<<16|r[9]<<8|r[8],d=r[15]<<24|r[14]<<16|r[13]<<8|r[12],w=r[19]<<24|r[18]<<16|r[17]<<8|r[16],m=r[23]<<24|r[22]<<16|r[21]<<8|r[20],v=r[27]<<24|r[26]<<16|r[25]<<8|r[24],b=r[31]<<24|r[30]<<16|r[29]<<8|r[28],x=e[3]<<24|e[2]<<16|e[1]<<8|e[0],C=e[7]<<24|e[6]<<16|e[5]<<8|e[4],$=e[11]<<24|e[10]<<16|e[9]<<8|e[8],y=e[15]<<24|e[14]<<16|e[13]<<8|e[12],E=n,g=i,S=s,f=o,c=a,p=l,P=h,A=d,U=w,B=m,V=v,I=b,N=x,G=C,H=$,k=y,W=0;W<ug;W+=2)E=E+c|0,N^=E,N=N>>>32-16|N<<16,U=U+N|0,c^=U,c=c>>>32-12|c<<12,g=g+p|0,G^=g,G=G>>>32-16|G<<16,B=B+G|0,p^=B,p=p>>>32-12|p<<12,S=S+P|0,H^=S,H=H>>>32-16|H<<16,V=V+H|0,P^=V,P=P>>>32-12|P<<12,f=f+A|0,k^=f,k=k>>>32-16|k<<16,I=I+k|0,A^=I,A=A>>>32-12|A<<12,S=S+P|0,H^=S,H=H>>>32-8|H<<8,V=V+H|0,P^=V,P=P>>>32-7|P<<7,f=f+A|0,k^=f,k=k>>>32-8|k<<8,I=I+k|0,A^=I,A=A>>>32-7|A<<7,g=g+p|0,G^=g,G=G>>>32-8|G<<8,B=B+G|0,p^=B,p=p>>>32-7|p<<7,E=E+c|0,N^=E,N=N>>>32-8|N<<8,U=U+N|0,c^=U,c=c>>>32-7|c<<7,E=E+p|0,k^=E,k=k>>>32-16|k<<16,V=V+k|0,p^=V,p=p>>>32-12|p<<12,g=g+P|0,N^=g,N=N>>>32-16|N<<16,I=I+N|0,P^=I,P=P>>>32-12|P<<12,S=S+A|0,G^=S,G=G>>>32-16|G<<16,U=U+G|0,A^=U,A=A>>>32-12|A<<12,f=f+c|0,H^=f,H=H>>>32-16|H<<16,B=B+H|0,c^=B,c=c>>>32-12|c<<12,S=S+A|0,G^=S,G=G>>>32-8|G<<8,U=U+G|0,A^=U,A=A>>>32-7|A<<7,f=f+c|0,H^=f,H=H>>>32-8|H<<8,B=B+H|0,c^=B,c=c>>>32-7|c<<7,g=g+P|0,N^=g,N=N>>>32-8|N<<8,I=I+N|0,P^=I,P=P>>>32-7|P<<7,E=E+p|0,k^=E,k=k>>>32-8|k<<8,V=V+k|0,p^=V,p=p>>>32-7|p<<7;Rt.writeUint32LE(E+n|0,t,0),Rt.writeUint32LE(g+i|0,t,4),Rt.writeUint32LE(S+s|0,t,8),Rt.writeUint32LE(f+o|0,t,12),Rt.writeUint32LE(c+a|0,t,16),Rt.writeUint32LE(p+l|0,t,20),Rt.writeUint32LE(P+h|0,t,24),Rt.writeUint32LE(A+d|0,t,28),Rt.writeUint32LE(U+w|0,t,32),Rt.writeUint32LE(B+m|0,t,36),Rt.writeUint32LE(V+v|0,t,40),Rt.writeUint32LE(I+b|0,t,44),Rt.writeUint32LE(N+x|0,t,48),Rt.writeUint32LE(G+C|0,t,52),Rt.writeUint32LE(H+$|0,t,56),Rt.writeUint32LE(k+y|0,t,60)}function fu(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=i}for(var a=new Uint8Array(64),l=0;l<r.length;l+=64){hg(a,s,t);for(var h=l;h<l+64&&h<r.length;h++)n[h]=r[h]^a[h-l];fg(s,0,o)}return Bo.wipe(a),i===0&&Bo.wipe(s),n}ps.streamXOR=fu;function dg(t,e,r,n){return n===void 0&&(n=0),Bo.wipe(r),fu(t,e,r,r,n)}ps.stream=dg;function fg(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var pu={},Mr={};Object.defineProperty(Mr,"__esModule",{value:!0});function pg(t,e,r){return~(t-1)&e|t-1&r}Mr.select=pg;function gg(t,e){return(t|0)-(e|0)-1>>>31&1}Mr.lessOrEqual=gg;function gu(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}Mr.compare=gu;function mg(t,e){return t.length===0||e.length===0?!1:gu(t,e)!==0}Mr.equal=mg,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Mr,r=Yt;t.DIGEST_LENGTH=16;var n=function(){function o(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var l=a[0]|a[1]<<8;this._r[0]=l&8191;var h=a[2]|a[3]<<8;this._r[1]=(l>>>13|h<<3)&8191;var d=a[4]|a[5]<<8;this._r[2]=(h>>>10|d<<6)&7939;var w=a[6]|a[7]<<8;this._r[3]=(d>>>7|w<<9)&8191;var m=a[8]|a[9]<<8;this._r[4]=(w>>>4|m<<12)&255,this._r[5]=m>>>1&8190;var v=a[10]|a[11]<<8;this._r[6]=(m>>>14|v<<2)&8191;var b=a[12]|a[13]<<8;this._r[7]=(v>>>11|b<<5)&8065;var x=a[14]|a[15]<<8;this._r[8]=(b>>>8|x<<8)&8191,this._r[9]=x>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return o.prototype._blocks=function(a,l,h){for(var d=this._fin?0:2048,w=this._h[0],m=this._h[1],v=this._h[2],b=this._h[3],x=this._h[4],C=this._h[5],$=this._h[6],y=this._h[7],E=this._h[8],g=this._h[9],S=this._r[0],f=this._r[1],c=this._r[2],p=this._r[3],P=this._r[4],A=this._r[5],U=this._r[6],B=this._r[7],V=this._r[8],I=this._r[9];h>=16;){var N=a[l+0]|a[l+1]<<8;w+=N&8191;var G=a[l+2]|a[l+3]<<8;m+=(N>>>13|G<<3)&8191;var H=a[l+4]|a[l+5]<<8;v+=(G>>>10|H<<6)&8191;var k=a[l+6]|a[l+7]<<8;b+=(H>>>7|k<<9)&8191;var W=a[l+8]|a[l+9]<<8;x+=(k>>>4|W<<12)&8191,C+=W>>>1&8191;var F=a[l+10]|a[l+11]<<8;$+=(W>>>14|F<<2)&8191;var K=a[l+12]|a[l+13]<<8;y+=(F>>>11|K<<5)&8191;var ce=a[l+14]|a[l+15]<<8;E+=(K>>>8|ce<<8)&8191,g+=ce>>>5|d;var q=0,se=q;se+=w*S,se+=m*(5*I),se+=v*(5*V),se+=b*(5*B),se+=x*(5*U),q=se>>>13,se&=8191,se+=C*(5*A),se+=$*(5*P),se+=y*(5*p),se+=E*(5*c),se+=g*(5*f),q+=se>>>13,se&=8191;var ee=q;ee+=w*f,ee+=m*S,ee+=v*(5*I),ee+=b*(5*V),ee+=x*(5*B),q=ee>>>13,ee&=8191,ee+=C*(5*U),ee+=$*(5*A),ee+=y*(5*P),ee+=E*(5*p),ee+=g*(5*c),q+=ee>>>13,ee&=8191;var ie=q;ie+=w*c,ie+=m*f,ie+=v*S,ie+=b*(5*I),ie+=x*(5*V),q=ie>>>13,ie&=8191,ie+=C*(5*B),ie+=$*(5*U),ie+=y*(5*A),ie+=E*(5*P),ie+=g*(5*p),q+=ie>>>13,ie&=8191;var M=q;M+=w*p,M+=m*c,M+=v*f,M+=b*S,M+=x*(5*I),q=M>>>13,M&=8191,M+=C*(5*V),M+=$*(5*B),M+=y*(5*U),M+=E*(5*A),M+=g*(5*P),q+=M>>>13,M&=8191;var L=q;L+=w*P,L+=m*p,L+=v*c,L+=b*f,L+=x*S,q=L>>>13,L&=8191,L+=C*(5*I),L+=$*(5*V),L+=y*(5*B),L+=E*(5*U),L+=g*(5*A),q+=L>>>13,L&=8191;var T=q;T+=w*A,T+=m*P,T+=v*p,T+=b*c,T+=x*f,q=T>>>13,T&=8191,T+=C*S,T+=$*(5*I),T+=y*(5*V),T+=E*(5*B),T+=g*(5*U),q+=T>>>13,T&=8191;var u=q;u+=w*U,u+=m*A,u+=v*P,u+=b*p,u+=x*c,q=u>>>13,u&=8191,u+=C*f,u+=$*S,u+=y*(5*I),u+=E*(5*V),u+=g*(5*B),q+=u>>>13,u&=8191;var O=q;O+=w*B,O+=m*U,O+=v*A,O+=b*P,O+=x*p,q=O>>>13,O&=8191,O+=C*c,O+=$*f,O+=y*S,O+=E*(5*I),O+=g*(5*V),q+=O>>>13,O&=8191;var Y=q;Y+=w*V,Y+=m*B,Y+=v*U,Y+=b*A,Y+=x*P,q=Y>>>13,Y&=8191,Y+=C*p,Y+=$*c,Y+=y*f,Y+=E*S,Y+=g*(5*I),q+=Y>>>13,Y&=8191;var Q=q;Q+=w*I,Q+=m*V,Q+=v*B,Q+=b*U,Q+=x*A,q=Q>>>13,Q&=8191,Q+=C*P,Q+=$*p,Q+=y*c,Q+=E*f,Q+=g*S,q+=Q>>>13,Q&=8191,q=(q<<2)+q|0,q=q+se|0,se=q&8191,q=q>>>13,ee+=q,w=se,m=ee,v=ie,b=M,x=L,C=T,$=u,y=O,E=Y,g=Q,l+=16,h-=16}this._h[0]=w,this._h[1]=m,this._h[2]=v,this._h[3]=b,this._h[4]=x,this._h[5]=C,this._h[6]=$,this._h[7]=y,this._h[8]=E,this._h[9]=g},o.prototype.finish=function(a,l){l===void 0&&(l=0);var h=new Uint16Array(10),d,w,m,v;if(this._leftover){for(v=this._leftover,this._buffer[v++]=1;v<16;v++)this._buffer[v]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(d=this._h[1]>>>13,this._h[1]&=8191,v=2;v<10;v++)this._h[v]+=d,d=this._h[v]>>>13,this._h[v]&=8191;for(this._h[0]+=d*5,d=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=d,d=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=d,h[0]=this._h[0]+5,d=h[0]>>>13,h[0]&=8191,v=1;v<10;v++)h[v]=this._h[v]+d,d=h[v]>>>13,h[v]&=8191;for(h[9]-=8192,w=(d^1)-1,v=0;v<10;v++)h[v]&=w;for(w=~w,v=0;v<10;v++)this._h[v]=this._h[v]&w|h[v];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,m=this._h[0]+this._pad[0],this._h[0]=m&65535,v=1;v<8;v++)m=(this._h[v]+this._pad[v]|0)+(m>>>16)|0,this._h[v]=m&65535;return a[l+0]=this._h[0]>>>0,a[l+1]=this._h[0]>>>8,a[l+2]=this._h[1]>>>0,a[l+3]=this._h[1]>>>8,a[l+4]=this._h[2]>>>0,a[l+5]=this._h[2]>>>8,a[l+6]=this._h[3]>>>0,a[l+7]=this._h[3]>>>8,a[l+8]=this._h[4]>>>0,a[l+9]=this._h[4]>>>8,a[l+10]=this._h[5]>>>0,a[l+11]=this._h[5]>>>8,a[l+12]=this._h[6]>>>0,a[l+13]=this._h[6]>>>8,a[l+14]=this._h[7]>>>0,a[l+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(a){var l=0,h=a.length,d;if(this._leftover){d=16-this._leftover,d>h&&(d=h);for(var w=0;w<d;w++)this._buffer[this._leftover+w]=a[l+w];if(h-=d,l+=d,this._leftover+=d,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(h>=16&&(d=h-h%16,this._blocks(a,l,d),l+=d,h-=d),h){for(var w=0;w<h;w++)this._buffer[this._leftover+w]=a[l+w];this._leftover+=h}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},o.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o}();t.Poly1305=n;function i(o,a){var l=new n(o);l.update(a);var h=l.digest();return l.clean(),h}t.oneTimeAuth=i;function s(o,a){return o.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(o,a)}t.equal=s}(pu),function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ps,r=pu,n=Yt,i=de,s=Mr;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var o=new Uint8Array(16),a=function(){function l(h){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,h.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(h)}return l.prototype.seal=function(h,d,w,m){if(h.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var v=new Uint8Array(16);v.set(h,v.length-h.length);var b=new Uint8Array(32);e.stream(this._key,v,b,4);var x=d.length+this.tagLength,C;if(m){if(m.length!==x)throw new Error("ChaCha20Poly1305: incorrect destination length");C=m}else C=new Uint8Array(x);return e.streamXOR(this._key,v,d,C,4),this._authenticate(C.subarray(C.length-this.tagLength,C.length),b,C.subarray(0,C.length-this.tagLength),w),n.wipe(v),C},l.prototype.open=function(h,d,w,m){if(h.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(d.length<this.tagLength)return null;var v=new Uint8Array(16);v.set(h,v.length-h.length);var b=new Uint8Array(32);e.stream(this._key,v,b,4);var x=new Uint8Array(this.tagLength);if(this._authenticate(x,b,d.subarray(0,d.length-this.tagLength),w),!s.equal(x,d.subarray(d.length-this.tagLength,d.length)))return null;var C=d.length-this.tagLength,$;if(m){if(m.length!==C)throw new Error("ChaCha20Poly1305: incorrect destination length");$=m}else $=new Uint8Array(C);return e.streamXOR(this._key,v,d.subarray(0,d.length-this.tagLength),$,4),n.wipe(v),$},l.prototype.clean=function(){return n.wipe(this._key),this},l.prototype._authenticate=function(h,d,w,m){var v=new r.Poly1305(d);m&&(v.update(m),m.length%16>0&&v.update(o.subarray(m.length%16))),v.update(w),w.length%16>0&&v.update(o.subarray(w.length%16));var b=new Uint8Array(8);m&&i.writeUint64LE(m.length,b),v.update(b),i.writeUint64LE(w.length,b),v.update(b);for(var x=v.digest(),C=0;C<x.length;C++)h[C]=x[C];v.clean(),n.wipe(x),n.wipe(b)},l}();t.ChaCha20Poly1305=a}(ko);var mu={},bi={},zo={};Object.defineProperty(zo,"__esModule",{value:!0});function wg(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}zo.isSerializableHash=wg,Object.defineProperty(bi,"__esModule",{value:!0});var wr=zo,vg=Mr,yg=Yt,wu=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),wr.isSerializableHash(this._inner)&&wr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),yg.wipe(n)}return t.prototype.reset=function(){if(!wr.isSerializableHash(this._inner)||!wr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){wr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),wr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!wr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!wr.isSerializableHash(this._inner)||!wr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!wr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();bi.HMAC=wu;function bg(t,e,r){var n=new wu(t,e);n.update(r);var i=n.digest();return n.clean(),i}bi.hmac=bg,bi.equal=vg.equal,Object.defineProperty(mu,"__esModule",{value:!0});var vu=bi,yu=Yt,_g=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=vu.hmac(this._hash,n,r);this._hmac=new vu.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),yu.wipe(this._buffer),yu.wipe(this._counter),this._bufpos=0},t}(),Eg=mu.HKDF=_g,gs={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=de,r=Yt;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},a.prototype.update=function(l,h){if(h===void 0&&(h=l.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var d=0;if(this._bytesHashed+=h,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&h>0;)this._buffer[this._bufferLength++]=l[d++],h--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(h>=this.blockSize&&(d=s(this._temp,this._state,l,d,h),h%=this.blockSize);h>0;)this._buffer[this._bufferLength++]=l[d++],h--;return this},a.prototype.finish=function(l){if(!this._finished){var h=this._bytesHashed,d=this._bufferLength,w=h/536870912|0,m=h<<3,v=h%64<56?64:128;this._buffer[d]=128;for(var b=d+1;b<v-8;b++)this._buffer[b]=0;e.writeUint32BE(w,this._buffer,v-8),e.writeUint32BE(m,this._buffer,v-4),s(this._temp,this._state,this._buffer,0,v),this._finished=!0}for(var b=0;b<this.digestLength/4;b++)e.writeUint32BE(this._state[b],l,b*4);return this},a.prototype.digest=function(){var l=new Uint8Array(this.digestLength);return this.finish(l),l},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(l){return this._state.set(l.state),this._bufferLength=l.bufferLength,l.buffer&&this._buffer.set(l.buffer),this._bytesHashed=l.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(l){r.wipe(l.state),l.buffer&&r.wipe(l.buffer),l.bufferLength=0,l.bytesHashed=0},a}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(a,l,h,d,w){for(;w>=64;){for(var m=l[0],v=l[1],b=l[2],x=l[3],C=l[4],$=l[5],y=l[6],E=l[7],g=0;g<16;g++){var S=d+g*4;a[g]=e.readUint32BE(h,S)}for(var g=16;g<64;g++){var f=a[g-2],c=(f>>>17|f<<32-17)^(f>>>19|f<<32-19)^f>>>10;f=a[g-15];var p=(f>>>7|f<<32-7)^(f>>>18|f<<32-18)^f>>>3;a[g]=(c+a[g-7]|0)+(p+a[g-16]|0)}for(var g=0;g<64;g++){var c=(((C>>>6|C<<26)^(C>>>11|C<<21)^(C>>>25|C<<7))+(C&$^~C&y)|0)+(E+(i[g]+a[g]|0)|0)|0,p=((m>>>2|m<<32-2)^(m>>>13|m<<32-13)^(m>>>22|m<<32-22))+(m&v^m&b^v&b)|0;E=y,y=$,$=C,C=x+c|0,x=b,b=v,v=m,m=c+p|0}l[0]+=m,l[1]+=v,l[2]+=b,l[3]+=x,l[4]+=C,l[5]+=$,l[6]+=y,l[7]+=E,d+=64,w-=64}return d}function o(a){var l=new n;l.update(a);var h=l.digest();return l.clean(),h}t.hash=o})(gs);var Wo={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=Pn,r=Yt;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(g){const S=new Float64Array(16);if(g)for(let f=0;f<g.length;f++)S[f]=g[f];return S}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function o(g){let S=1;for(let f=0;f<16;f++){let c=g[f]+S+65535;S=Math.floor(c/65536),g[f]=c-S*65536}g[0]+=S-1+37*(S-1)}function a(g,S,f){const c=~(f-1);for(let p=0;p<16;p++){const P=c&(g[p]^S[p]);g[p]^=P,S[p]^=P}}function l(g,S){const f=n(),c=n();for(let p=0;p<16;p++)c[p]=S[p];o(c),o(c),o(c);for(let p=0;p<2;p++){f[0]=c[0]-65517;for(let A=1;A<15;A++)f[A]=c[A]-65535-(f[A-1]>>16&1),f[A-1]&=65535;f[15]=c[15]-32767-(f[14]>>16&1);const P=f[15]>>16&1;f[14]&=65535,a(c,f,1-P)}for(let p=0;p<16;p++)g[2*p]=c[p]&255,g[2*p+1]=c[p]>>8}function h(g,S){for(let f=0;f<16;f++)g[f]=S[2*f]+(S[2*f+1]<<8);g[15]&=32767}function d(g,S,f){for(let c=0;c<16;c++)g[c]=S[c]+f[c]}function w(g,S,f){for(let c=0;c<16;c++)g[c]=S[c]-f[c]}function m(g,S,f){let c,p,P=0,A=0,U=0,B=0,V=0,I=0,N=0,G=0,H=0,k=0,W=0,F=0,K=0,ce=0,q=0,se=0,ee=0,ie=0,M=0,L=0,T=0,u=0,O=0,Y=0,Q=0,Se=0,xe=0,me=0,Ne=0,Ze=0,Ve=0,$e=f[0],Ce=f[1],we=f[2],ye=f[3],ve=f[4],fe=f[5],he=f[6],oe=f[7],be=f[8],De=f[9],le=f[10],Ie=f[11],Le=f[12],ke=f[13],Be=f[14],Ue=f[15];c=S[0],P+=c*$e,A+=c*Ce,U+=c*we,B+=c*ye,V+=c*ve,I+=c*fe,N+=c*he,G+=c*oe,H+=c*be,k+=c*De,W+=c*le,F+=c*Ie,K+=c*Le,ce+=c*ke,q+=c*Be,se+=c*Ue,c=S[1],A+=c*$e,U+=c*Ce,B+=c*we,V+=c*ye,I+=c*ve,N+=c*fe,G+=c*he,H+=c*oe,k+=c*be,W+=c*De,F+=c*le,K+=c*Ie,ce+=c*Le,q+=c*ke,se+=c*Be,ee+=c*Ue,c=S[2],U+=c*$e,B+=c*Ce,V+=c*we,I+=c*ye,N+=c*ve,G+=c*fe,H+=c*he,k+=c*oe,W+=c*be,F+=c*De,K+=c*le,ce+=c*Ie,q+=c*Le,se+=c*ke,ee+=c*Be,ie+=c*Ue,c=S[3],B+=c*$e,V+=c*Ce,I+=c*we,N+=c*ye,G+=c*ve,H+=c*fe,k+=c*he,W+=c*oe,F+=c*be,K+=c*De,ce+=c*le,q+=c*Ie,se+=c*Le,ee+=c*ke,ie+=c*Be,M+=c*Ue,c=S[4],V+=c*$e,I+=c*Ce,N+=c*we,G+=c*ye,H+=c*ve,k+=c*fe,W+=c*he,F+=c*oe,K+=c*be,ce+=c*De,q+=c*le,se+=c*Ie,ee+=c*Le,ie+=c*ke,M+=c*Be,L+=c*Ue,c=S[5],I+=c*$e,N+=c*Ce,G+=c*we,H+=c*ye,k+=c*ve,W+=c*fe,F+=c*he,K+=c*oe,ce+=c*be,q+=c*De,se+=c*le,ee+=c*Ie,ie+=c*Le,M+=c*ke,L+=c*Be,T+=c*Ue,c=S[6],N+=c*$e,G+=c*Ce,H+=c*we,k+=c*ye,W+=c*ve,F+=c*fe,K+=c*he,ce+=c*oe,q+=c*be,se+=c*De,ee+=c*le,ie+=c*Ie,M+=c*Le,L+=c*ke,T+=c*Be,u+=c*Ue,c=S[7],G+=c*$e,H+=c*Ce,k+=c*we,W+=c*ye,F+=c*ve,K+=c*fe,ce+=c*he,q+=c*oe,se+=c*be,ee+=c*De,ie+=c*le,M+=c*Ie,L+=c*Le,T+=c*ke,u+=c*Be,O+=c*Ue,c=S[8],H+=c*$e,k+=c*Ce,W+=c*we,F+=c*ye,K+=c*ve,ce+=c*fe,q+=c*he,se+=c*oe,ee+=c*be,ie+=c*De,M+=c*le,L+=c*Ie,T+=c*Le,u+=c*ke,O+=c*Be,Y+=c*Ue,c=S[9],k+=c*$e,W+=c*Ce,F+=c*we,K+=c*ye,ce+=c*ve,q+=c*fe,se+=c*he,ee+=c*oe,ie+=c*be,M+=c*De,L+=c*le,T+=c*Ie,u+=c*Le,O+=c*ke,Y+=c*Be,Q+=c*Ue,c=S[10],W+=c*$e,F+=c*Ce,K+=c*we,ce+=c*ye,q+=c*ve,se+=c*fe,ee+=c*he,ie+=c*oe,M+=c*be,L+=c*De,T+=c*le,u+=c*Ie,O+=c*Le,Y+=c*ke,Q+=c*Be,Se+=c*Ue,c=S[11],F+=c*$e,K+=c*Ce,ce+=c*we,q+=c*ye,se+=c*ve,ee+=c*fe,ie+=c*he,M+=c*oe,L+=c*be,T+=c*De,u+=c*le,O+=c*Ie,Y+=c*Le,Q+=c*ke,Se+=c*Be,xe+=c*Ue,c=S[12],K+=c*$e,ce+=c*Ce,q+=c*we,se+=c*ye,ee+=c*ve,ie+=c*fe,M+=c*he,L+=c*oe,T+=c*be,u+=c*De,O+=c*le,Y+=c*Ie,Q+=c*Le,Se+=c*ke,xe+=c*Be,me+=c*Ue,c=S[13],ce+=c*$e,q+=c*Ce,se+=c*we,ee+=c*ye,ie+=c*ve,M+=c*fe,L+=c*he,T+=c*oe,u+=c*be,O+=c*De,Y+=c*le,Q+=c*Ie,Se+=c*Le,xe+=c*ke,me+=c*Be,Ne+=c*Ue,c=S[14],q+=c*$e,se+=c*Ce,ee+=c*we,ie+=c*ye,M+=c*ve,L+=c*fe,T+=c*he,u+=c*oe,O+=c*be,Y+=c*De,Q+=c*le,Se+=c*Ie,xe+=c*Le,me+=c*ke,Ne+=c*Be,Ze+=c*Ue,c=S[15],se+=c*$e,ee+=c*Ce,ie+=c*we,M+=c*ye,L+=c*ve,T+=c*fe,u+=c*he,O+=c*oe,Y+=c*be,Q+=c*De,Se+=c*le,xe+=c*Ie,me+=c*Le,Ne+=c*ke,Ze+=c*Be,Ve+=c*Ue,P+=38*ee,A+=38*ie,U+=38*M,B+=38*L,V+=38*T,I+=38*u,N+=38*O,G+=38*Y,H+=38*Q,k+=38*Se,W+=38*xe,F+=38*me,K+=38*Ne,ce+=38*Ze,q+=38*Ve,p=1,c=P+p+65535,p=Math.floor(c/65536),P=c-p*65536,c=A+p+65535,p=Math.floor(c/65536),A=c-p*65536,c=U+p+65535,p=Math.floor(c/65536),U=c-p*65536,c=B+p+65535,p=Math.floor(c/65536),B=c-p*65536,c=V+p+65535,p=Math.floor(c/65536),V=c-p*65536,c=I+p+65535,p=Math.floor(c/65536),I=c-p*65536,c=N+p+65535,p=Math.floor(c/65536),N=c-p*65536,c=G+p+65535,p=Math.floor(c/65536),G=c-p*65536,c=H+p+65535,p=Math.floor(c/65536),H=c-p*65536,c=k+p+65535,p=Math.floor(c/65536),k=c-p*65536,c=W+p+65535,p=Math.floor(c/65536),W=c-p*65536,c=F+p+65535,p=Math.floor(c/65536),F=c-p*65536,c=K+p+65535,p=Math.floor(c/65536),K=c-p*65536,c=ce+p+65535,p=Math.floor(c/65536),ce=c-p*65536,c=q+p+65535,p=Math.floor(c/65536),q=c-p*65536,c=se+p+65535,p=Math.floor(c/65536),se=c-p*65536,P+=p-1+37*(p-1),p=1,c=P+p+65535,p=Math.floor(c/65536),P=c-p*65536,c=A+p+65535,p=Math.floor(c/65536),A=c-p*65536,c=U+p+65535,p=Math.floor(c/65536),U=c-p*65536,c=B+p+65535,p=Math.floor(c/65536),B=c-p*65536,c=V+p+65535,p=Math.floor(c/65536),V=c-p*65536,c=I+p+65535,p=Math.floor(c/65536),I=c-p*65536,c=N+p+65535,p=Math.floor(c/65536),N=c-p*65536,c=G+p+65535,p=Math.floor(c/65536),G=c-p*65536,c=H+p+65535,p=Math.floor(c/65536),H=c-p*65536,c=k+p+65535,p=Math.floor(c/65536),k=c-p*65536,c=W+p+65535,p=Math.floor(c/65536),W=c-p*65536,c=F+p+65535,p=Math.floor(c/65536),F=c-p*65536,c=K+p+65535,p=Math.floor(c/65536),K=c-p*65536,c=ce+p+65535,p=Math.floor(c/65536),ce=c-p*65536,c=q+p+65535,p=Math.floor(c/65536),q=c-p*65536,c=se+p+65535,p=Math.floor(c/65536),se=c-p*65536,P+=p-1+37*(p-1),g[0]=P,g[1]=A,g[2]=U,g[3]=B,g[4]=V,g[5]=I,g[6]=N,g[7]=G,g[8]=H,g[9]=k,g[10]=W,g[11]=F,g[12]=K,g[13]=ce,g[14]=q,g[15]=se}function v(g,S){m(g,S,S)}function b(g,S){const f=n();for(let c=0;c<16;c++)f[c]=S[c];for(let c=253;c>=0;c--)v(f,f),c!==2&&c!==4&&m(f,f,S);for(let c=0;c<16;c++)g[c]=f[c]}function x(g,S){const f=new Uint8Array(32),c=new Float64Array(80),p=n(),P=n(),A=n(),U=n(),B=n(),V=n();for(let H=0;H<31;H++)f[H]=g[H];f[31]=g[31]&127|64,f[0]&=248,h(c,S);for(let H=0;H<16;H++)P[H]=c[H];p[0]=U[0]=1;for(let H=254;H>=0;--H){const k=f[H>>>3]>>>(H&7)&1;a(p,P,k),a(A,U,k),d(B,p,A),w(p,p,A),d(A,P,U),w(P,P,U),v(U,B),v(V,p),m(p,A,p),m(A,P,B),d(B,p,A),w(p,p,A),v(P,p),w(A,U,V),m(p,A,s),d(p,p,U),m(A,A,p),m(p,U,V),m(U,P,c),v(P,B),a(p,P,k),a(A,U,k)}for(let H=0;H<16;H++)c[H+16]=p[H],c[H+32]=A[H],c[H+48]=P[H],c[H+64]=U[H];const I=c.subarray(32),N=c.subarray(16);b(I,I),m(N,N,I);const G=new Uint8Array(32);return l(G,N),G}t.scalarMult=x;function C(g){return x(g,i)}t.scalarMultBase=C;function $(g){if(g.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const S=new Uint8Array(g);return{publicKey:C(S),secretKey:S}}t.generateKeyPairFromSeed=$;function y(g){const S=(0,e.randomBytes)(32,g),f=$(S);return(0,r.wipe)(S),f}t.generateKeyPair=y;function E(g,S,f=!1){if(g.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(S.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const c=x(g,S);if(f){let p=0;for(let P=0;P<c.length;P++)p|=c[P];if(p===0)throw new Error("X25519: invalid shared key")}return c}t.sharedKey=E})(Wo);var bu=globalThis&&globalThis.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},Sg=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),xg=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Dg=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),Og=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Cg=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Ig=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Ag=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,_u=3,$g=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Ig]],Eu=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Tg(t){return t?Su(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Cg:typeof navigator<"u"?Su(navigator.userAgent):Ng()}function Rg(t){return t!==""&&$g.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function Su(t){var e=Rg(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Og;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<_u&&(i=bu(bu([],i,!0),Lg(_u-i.length),!0)):i=[];var s=i.join("."),o=Pg(t),a=Ag.exec(t);return a&&a[1]?new Dg(r,s,o,a[1]):new Sg(r,s,o)}function Pg(t){for(var e=0,r=Eu.length;e<r;e++){var n=Eu[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function Ng(){var t=typeof process<"u"&&process.version;return t?new xg(process.version.slice(1)):null}function Lg(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.getLocalStorage=Ke.getLocalStorageOrThrow=Ke.getCrypto=Ke.getCryptoOrThrow=Du=Ke.getLocation=Ke.getLocationOrThrow=Ho=Ke.getNavigator=Ke.getNavigatorOrThrow=xu=Ke.getDocument=Ke.getDocumentOrThrow=Ke.getFromWindowOrThrow=Ke.getFromWindow=void 0;function ln(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Ke.getFromWindow=ln;function Nn(t){const e=ln(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Ke.getFromWindowOrThrow=Nn;function Mg(){return Nn("document")}Ke.getDocumentOrThrow=Mg;function Ug(){return ln("document")}var xu=Ke.getDocument=Ug;function jg(){return Nn("navigator")}Ke.getNavigatorOrThrow=jg;function Fg(){return ln("navigator")}var Ho=Ke.getNavigator=Fg;function kg(){return Nn("location")}Ke.getLocationOrThrow=kg;function Bg(){return ln("location")}var Du=Ke.getLocation=Bg;function zg(){return Nn("crypto")}Ke.getCryptoOrThrow=zg;function Wg(){return ln("crypto")}Ke.getCrypto=Wg;function Hg(){return Nn("localStorage")}Ke.getLocalStorageOrThrow=Hg;function Vg(){return ln("localStorage")}Ke.getLocalStorage=Vg;var Vo={};Object.defineProperty(Vo,"__esModule",{value:!0});var Ou=Vo.getWindowMetadata=void 0;const Cu=Ke;function Kg(){let t,e;try{t=Cu.getDocumentOrThrow(),e=Cu.getLocationOrThrow()}catch{return null}function r(){const w=t.getElementsByTagName("link"),m=[];for(let v=0;v<w.length;v++){const b=w[v],x=b.getAttribute("rel");if(x&&x.toLowerCase().indexOf("icon")>-1){const C=b.getAttribute("href");if(C)if(C.toLowerCase().indexOf("https:")===-1&&C.toLowerCase().indexOf("http:")===-1&&C.indexOf("//")!==0){let $=e.protocol+"//"+e.host;if(C.indexOf("/")===0)$+=C;else{const y=e.pathname.split("/");y.pop();const E=y.join("/");$+=E+"/"+C}m.push($)}else if(C.indexOf("//")===0){const $=e.protocol+C;m.push($)}else m.push(C)}}return m}function n(...w){const m=t.getElementsByTagName("meta");for(let v=0;v<m.length;v++){const b=m[v],x=["itemprop","property","name"].map(C=>b.getAttribute(C)).filter(C=>C?w.includes(C):!1);if(x.length&&x){const C=b.getAttribute("content");if(C)return C}}return""}function i(){let w=n("name","og:site_name","og:title","twitter:title");return w||(w=t.title),w}function s(){return n("description","og:description","twitter:description","keywords")}const o=i(),a=s(),l=e.origin,h=r();return{description:a,url:l,icons:h,name:o}}Ou=Vo.getWindowMetadata=Kg;var _i={},qg=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Iu="%[a-f0-9]{2}",Au=new RegExp("("+Iu+")|([^%]+?)","gi"),$u=new RegExp("("+Iu+")+","gi");function Ko(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],Ko(r),Ko(n))}function Gg(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(Au)||[],r=1;r<e.length;r++)t=Ko(e,r).join(""),e=t.match(Au)||[];return t}}function Yg(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=$u.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=Gg(r[0]);n!==r[0]&&(e[r[0]]=n)}r=$u.exec(t)}e["%C2"]="�";for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];t=t.replace(new RegExp(o,"g"),e[o])}return t}var Jg=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return Yg(t)}},Zg=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},Xg=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var o=n[s],a=t[o];(i?e.indexOf(o)!==-1:e(o,a,t))&&(r[o]=a)}return r};(function(t){const e=qg,r=Jg,n=Zg,i=Xg,s=y=>y==null,o=Symbol("encodeFragmentIdentifier");function a(y){switch(y.arrayFormat){case"index":return E=>(g,S)=>{const f=g.length;return S===void 0||y.skipNull&&S===null||y.skipEmptyString&&S===""?g:S===null?[...g,[d(E,y),"[",f,"]"].join("")]:[...g,[d(E,y),"[",d(f,y),"]=",d(S,y)].join("")]};case"bracket":return E=>(g,S)=>S===void 0||y.skipNull&&S===null||y.skipEmptyString&&S===""?g:S===null?[...g,[d(E,y),"[]"].join("")]:[...g,[d(E,y),"[]=",d(S,y)].join("")];case"colon-list-separator":return E=>(g,S)=>S===void 0||y.skipNull&&S===null||y.skipEmptyString&&S===""?g:S===null?[...g,[d(E,y),":list="].join("")]:[...g,[d(E,y),":list=",d(S,y)].join("")];case"comma":case"separator":case"bracket-separator":{const E=y.arrayFormat==="bracket-separator"?"[]=":"=";return g=>(S,f)=>f===void 0||y.skipNull&&f===null||y.skipEmptyString&&f===""?S:(f=f===null?"":f,S.length===0?[[d(g,y),E,d(f,y)].join("")]:[[S,d(f,y)].join(y.arrayFormatSeparator)])}default:return E=>(g,S)=>S===void 0||y.skipNull&&S===null||y.skipEmptyString&&S===""?g:S===null?[...g,d(E,y)]:[...g,[d(E,y),"=",d(S,y)].join("")]}}function l(y){let E;switch(y.arrayFormat){case"index":return(g,S,f)=>{if(E=/\[(\d*)\]$/.exec(g),g=g.replace(/\[\d*\]$/,""),!E){f[g]=S;return}f[g]===void 0&&(f[g]={}),f[g][E[1]]=S};case"bracket":return(g,S,f)=>{if(E=/(\[\])$/.exec(g),g=g.replace(/\[\]$/,""),!E){f[g]=S;return}if(f[g]===void 0){f[g]=[S];return}f[g]=[].concat(f[g],S)};case"colon-list-separator":return(g,S,f)=>{if(E=/(:list)$/.exec(g),g=g.replace(/:list$/,""),!E){f[g]=S;return}if(f[g]===void 0){f[g]=[S];return}f[g]=[].concat(f[g],S)};case"comma":case"separator":return(g,S,f)=>{const c=typeof S=="string"&&S.includes(y.arrayFormatSeparator),p=typeof S=="string"&&!c&&w(S,y).includes(y.arrayFormatSeparator);S=p?w(S,y):S;const P=c||p?S.split(y.arrayFormatSeparator).map(A=>w(A,y)):S===null?S:w(S,y);f[g]=P};case"bracket-separator":return(g,S,f)=>{const c=/(\[\])$/.test(g);if(g=g.replace(/\[\]$/,""),!c){f[g]=S&&w(S,y);return}const p=S===null?[]:S.split(y.arrayFormatSeparator).map(P=>w(P,y));if(f[g]===void 0){f[g]=p;return}f[g]=[].concat(f[g],p)};default:return(g,S,f)=>{if(f[g]===void 0){f[g]=S;return}f[g]=[].concat(f[g],S)}}}function h(y){if(typeof y!="string"||y.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(y,E){return E.encode?E.strict?e(y):encodeURIComponent(y):y}function w(y,E){return E.decode?r(y):y}function m(y){return Array.isArray(y)?y.sort():typeof y=="object"?m(Object.keys(y)).sort((E,g)=>Number(E)-Number(g)).map(E=>y[E]):y}function v(y){const E=y.indexOf("#");return E!==-1&&(y=y.slice(0,E)),y}function b(y){let E="";const g=y.indexOf("#");return g!==-1&&(E=y.slice(g)),E}function x(y){y=v(y);const E=y.indexOf("?");return E===-1?"":y.slice(E+1)}function C(y,E){return E.parseNumbers&&!Number.isNaN(Number(y))&&typeof y=="string"&&y.trim()!==""?y=Number(y):E.parseBooleans&&y!==null&&(y.toLowerCase()==="true"||y.toLowerCase()==="false")&&(y=y.toLowerCase()==="true"),y}function $(y,E){E=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},E),h(E.arrayFormatSeparator);const g=l(E),S=Object.create(null);if(typeof y!="string"||(y=y.trim().replace(/^[?#&]/,""),!y))return S;for(const f of y.split("&")){if(f==="")continue;let[c,p]=n(E.decode?f.replace(/\+/g," "):f,"=");p=p===void 0?null:["comma","separator","bracket-separator"].includes(E.arrayFormat)?p:w(p,E),g(w(c,E),p,S)}for(const f of Object.keys(S)){const c=S[f];if(typeof c=="object"&&c!==null)for(const p of Object.keys(c))c[p]=C(c[p],E);else S[f]=C(c,E)}return E.sort===!1?S:(E.sort===!0?Object.keys(S).sort():Object.keys(S).sort(E.sort)).reduce((f,c)=>{const p=S[c];return p&&typeof p=="object"&&!Array.isArray(p)?f[c]=m(p):f[c]=p,f},Object.create(null))}t.extract=x,t.parse=$,t.stringify=(y,E)=>{if(!y)return"";E=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},E),h(E.arrayFormatSeparator);const g=p=>E.skipNull&&s(y[p])||E.skipEmptyString&&y[p]==="",S=a(E),f={};for(const p of Object.keys(y))g(p)||(f[p]=y[p]);const c=Object.keys(f);return E.sort!==!1&&c.sort(E.sort),c.map(p=>{const P=y[p];return P===void 0?"":P===null?d(p,E):Array.isArray(P)?P.length===0&&E.arrayFormat==="bracket-separator"?d(p,E)+"[]":P.reduce(S(p),[]).join("&"):d(p,E)+"="+d(P,E)}).filter(p=>p.length>0).join("&")},t.parseUrl=(y,E)=>{E=Object.assign({decode:!0},E);const[g,S]=n(y,"#");return Object.assign({url:g.split("?")[0]||"",query:$(x(y),E)},E&&E.parseFragmentIdentifier&&S?{fragmentIdentifier:w(S,E)}:{})},t.stringifyUrl=(y,E)=>{E=Object.assign({encode:!0,strict:!0,[o]:!0},E);const g=v(y.url).split("?")[0]||"",S=t.extract(y.url),f=t.parse(S,{sort:!1}),c=Object.assign(f,y.query);let p=t.stringify(c,E);p&&(p=`?${p}`);let P=b(y.url);return y.fragmentIdentifier&&(P=`#${E[o]?d(y.fragmentIdentifier,E):y.fragmentIdentifier}`),`${g}${p}${P}`},t.pick=(y,E,g)=>{g=Object.assign({parseFragmentIdentifier:!0,[o]:!1},g);const{url:S,query:f,fragmentIdentifier:c}=t.parseUrl(y,g);return t.stringifyUrl({url:S,query:i(f,E),fragmentIdentifier:c},g)},t.exclude=(y,E,g)=>{const S=Array.isArray(E)?f=>!E.includes(f):(f,c)=>!E(f,c);return t.pick(y,S,g)}})(_i);const Qg={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function Tu(t,e){return t.includes(":")?[t]:e.chains||[]}const Ru="base10",jt="base16",qo="base64pad",Go="utf8",Pu=0,un=1,em=0,Nu=1,Yo=12,Jo=32;function tm(){const t=Wo.generateKeyPair();return{privateKey:Ut(t.secretKey,jt),publicKey:Ut(t.publicKey,jt)}}function Zo(){const t=Pn.randomBytes(Jo);return Ut(t,jt)}function rm(t,e){const r=Wo.sharedKey(Wt(t,jt),Wt(e,jt)),n=new Eg(gs.SHA256,r).expand(Jo);return Ut(n,jt)}function nm(t){const e=gs.hash(Wt(t,jt));return Ut(e,jt)}function Ln(t){const e=gs.hash(Wt(t,Go));return Ut(e,jt)}function im(t){return Wt(`${t}`,Ru)}function Ei(t){return Number(Ut(t,Ru))}function sm(t){const e=im(typeof t.type<"u"?t.type:Pu);if(Ei(e)===un&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Wt(t.senderPublicKey,jt):void 0,n=typeof t.iv<"u"?Wt(t.iv,jt):Pn.randomBytes(Yo),i=new ko.ChaCha20Poly1305(Wt(t.symKey,jt)).seal(n,Wt(t.message,Go));return am({type:e,sealed:i,iv:n,senderPublicKey:r})}function om(t){const e=new ko.ChaCha20Poly1305(Wt(t.symKey,jt)),{sealed:r,iv:n}=ms(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return Ut(i,Go)}function am(t){if(Ei(t.type)===un){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ut(jo([t.type,t.senderPublicKey,t.iv,t.sealed]),qo)}return Ut(jo([t.type,t.iv,t.sealed]),qo)}function ms(t){const e=Wt(t,qo),r=e.slice(em,Nu),n=Nu;if(Ei(r)===un){const a=n+Jo,l=a+Yo,h=e.slice(n,a),d=e.slice(a,l),w=e.slice(l);return{type:r,sealed:w,iv:d,senderPublicKey:h}}const i=n+Yo,s=e.slice(n,i),o=e.slice(i);return{type:r,sealed:o,iv:s}}function cm(t,e){const r=ms(t);return Lu({type:Ei(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Ut(r.senderPublicKey,jt):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Lu(t){const e=(t==null?void 0:t.type)||Pu;if(e===un){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function Mu(t){return t.type===un&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var lm=Object.defineProperty,Uu=Object.getOwnPropertySymbols,um=Object.prototype.hasOwnProperty,hm=Object.prototype.propertyIsEnumerable,ju=(t,e,r)=>e in t?lm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fu=(t,e)=>{for(var r in e||(e={}))um.call(e,r)&&ju(t,r,e[r]);if(Uu)for(var r of Uu(e))hm.call(e,r)&&ju(t,r,e[r]);return t};const dm="ReactNative",Ur={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},fm="js";function Xo(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function ku(){return!xu()&&!!Ho()&&navigator.product===dm}function Qo(){return!Xo()&&!!Ho()}function ea(){return ku()?Ur.reactNative:Xo()?Ur.node:Qo()?Ur.browser:Ur.unknown}function pm(t,e){let r=_i.parse(t);return r=Fu(Fu({},r),e),t=_i.stringify(r),t}function gm(){return Ou()||{name:"",description:"",url:"",icons:[""]}}function mm(){if(ea()===Ur.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=Tg();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function wm(){var t;const e=ea();return e===Ur.browser?[e,((t=Du())==null?void 0:t.host)||"unknown"].join(":"):e}function vm(t,e,r){const n=mm(),i=wm();return[[t,e].join("-"),[fm,r].join("-"),n,i].join("/")}function ym({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o}){const a=r.split("?"),l=vm(t,e,n),h={auth:i,ua:l,projectId:s,useOnCloseEvent:o||void 0},d=pm(a[1]||"",h);return a[0]+"?"+d}function hn(t,e){return t.filter(r=>e.includes(r)).length===t.length}function Bu(t){return Object.fromEntries(t.entries())}function zu(t){return new Map(Object.entries(t))}function Mn(t=re.FIVE_MINUTES,e){const r=re.toMiliseconds(t||re.FIVE_MINUTES);let n,i,s;return{resolve:o=>{s&&n&&(clearTimeout(s),n(o))},reject:o=>{s&&i&&(clearTimeout(s),i(o))},done:()=>new Promise((o,a)=>{s=setTimeout(()=>{a(new Error(e))},r),n=o,i=a})}}function ws(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function Wu(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function bm(t){return Wu("topic",t)}function _m(t){return Wu("id",t)}function Hu(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function ur(t,e){return re.fromMiliseconds((e||Date.now())+re.toMiliseconds(t))}function jr(t){return Date.now()>=re.toMiliseconds(t)}function pt(t,e){return`${t}${e?`:${e}`:""}`}async function Em({id:t,topic:e,wcDeepLink:r}){try{if(!r)return;const n=typeof r=="string"?JSON.parse(r):r;let i=n==null?void 0:n.href;if(typeof i!="string")return;i.endsWith("/")&&(i=i.slice(0,-1));const s=`${i}/wc?requestId=${t}&sessionTopic=${e}`,o=ea();o===Ur.browser?s.startsWith("https://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):o===Ur.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(n){console.error(n)}}const Sm="irn";function ta(t){return(t==null?void 0:t.relay)||{protocol:Sm}}function vs(t){const e=Qg[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var xm=Object.defineProperty,Vu=Object.getOwnPropertySymbols,Dm=Object.prototype.hasOwnProperty,Om=Object.prototype.propertyIsEnumerable,Ku=(t,e,r)=>e in t?xm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Cm=(t,e)=>{for(var r in e||(e={}))Dm.call(e,r)&&Ku(t,r,e[r]);if(Vu)for(var r of Vu(e))Om.call(e,r)&&Ku(t,r,e[r]);return t};function Im(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function Am(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=_i.parse(s);return{protocol:n,topic:$m(i[0]),version:parseInt(i[1],10),symKey:o.symKey,relay:Im(o)}}function $m(t){return t.startsWith("//")?t.substring(2):t}function Tm(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=r+e+i;t[i]&&(n[s]=t[i])}),n}function Rm(t){return`${t.protocol}:${t.topic}@${t.version}?`+_i.stringify(Cm({symKey:t.symKey},Tm(t.relay)))}function Un(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function Pm(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Un(r.accounts))}),e}function Nm(t,e){const r=[];return Object.values(t).forEach(n=>{Un(n.accounts).includes(e)&&r.push(...n.methods)}),r}function Lm(t,e){const r=[];return Object.values(t).forEach(n=>{Un(n.accounts).includes(e)&&r.push(...n.events)}),r}function Mm(t,e){const r=bs(t,e);if(r)throw new Error(r.message);const n={};for(const[i,s]of Object.entries(t))n[i]={methods:s.methods,events:s.events,chains:s.accounts.map(o=>`${o.split(":")[0]}:${o.split(":")[1]}`)};return n}const Um={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},jm={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function X(t,e){const{message:r,code:n}=jm[t];return{message:e?`${r} ${e}`:r,code:n}}function Et(t,e){const{message:r,code:n}=Um[t];return{message:e?`${r} ${e}`:r,code:n}}function Si(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function xi(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Ft(t){return typeof t>"u"}function St(t,e){return e&&Ft(t)?!0:typeof t=="string"&&!!t.trim().length}function ra(t,e){return e&&Ft(t)?!0:typeof t=="number"&&!isNaN(t)}function Fm(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return hn(i,n)?(n.forEach(o=>{const{accounts:a,methods:l,events:h}=t.namespaces[o],d=Un(a),w=r[o];(!hn(Tu(o,w),d)||!hn(w.methods,l)||!hn(w.events,h))&&(s=!1)}),s):!1}function ys(t){return St(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function km(t){if(St(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&ys(r)}}return!1}function Bm(t){if(St(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function zm(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function Wm(t){return t==null?void 0:t.topic}function Hm(t,e){let r=null;return St(t==null?void 0:t.publicKey,!1)||(r=X("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function qu(t){let e=!0;return Si(t)?t.length&&(e=t.every(r=>St(r,!1))):e=!1,e}function Vm(t,e,r){let n=null;return Si(e)&&e.length?e.forEach(i=>{n||ys(i)||(n=Et("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):ys(t)||(n=Et("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function Km(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=Vm(i,Tu(i,s),`${e} ${r}`);o&&(n=o)}),n}function qm(t,e){let r=null;return Si(t)?t.forEach(n=>{r||km(n)||(r=Et("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=Et("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Gm(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=qm(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function Ym(t,e){let r=null;return qu(t==null?void 0:t.methods)?qu(t==null?void 0:t.events)||(r=Et("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Et("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function Gu(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Ym(n,`${e}, namespace`);i&&(r=i)}),r}function Jm(t,e,r){let n=null;if(t&&xi(t)){const i=Gu(t,e);i&&(n=i);const s=Km(t,e,r);s&&(n=s)}else n=X("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function bs(t,e){let r=null;if(t&&xi(t)){const n=Gu(t,e);n&&(r=n);const i=Gm(t,e);i&&(r=i)}else r=X("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function Yu(t){return St(t.protocol,!0)}function Zm(t,e){let r=!1;return e&&!t?r=!0:t&&Si(t)&&t.length&&t.forEach(n=>{r=Yu(n)}),r}function Xm(t){return typeof t=="number"}function Ht(t){return typeof t<"u"&&typeof t!==null}function Qm(t){return!(!t||typeof t!="object"||!t.code||!ra(t.code,!1)||!t.message||!St(t.message,!1))}function ew(t){return!(Ft(t)||!St(t.method,!1))}function tw(t){return!(Ft(t)||Ft(t.result)&&Ft(t.error)||!ra(t.id,!1)||!St(t.jsonrpc,!1))}function rw(t){return!(Ft(t)||!St(t.name,!1))}function Ju(t,e){return!(!ys(e)||!Pm(t).includes(e))}function nw(t,e,r){return St(r,!1)?Nm(t,e).includes(r):!1}function iw(t,e,r){return St(r,!1)?Lm(t,e).includes(r):!1}function Zu(t,e,r){let n=null;const i=sw(t),s=ow(e),o=Object.keys(i),a=Object.keys(s),l=Xu(Object.keys(t)),h=Xu(Object.keys(e)),d=l.filter(w=>!h.includes(w));return d.length&&(n=X("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${d.toString()}
      Received: ${Object.keys(e).toString()}`)),hn(o,a)||(n=X("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(w=>{if(!w.includes(":")||n)return;const m=Un(e[w].accounts);m.includes(w)||(n=X("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${w}
        Required: ${w}
        Approved: ${m.toString()}`))}),o.forEach(w=>{n||(hn(i[w].methods,s[w].methods)?hn(i[w].events,s[w].events)||(n=X("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${w}`)):n=X("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${w}`))}),n}function sw(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function Xu(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function ow(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=Un(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function aw(t,e){return ra(t,!1)&&t<=e.max&&t>=e.min}const cw="PARSE_ERROR",lw="INVALID_REQUEST",uw="METHOD_NOT_FOUND",hw="INVALID_PARAMS",Qu="INTERNAL_ERROR",na="SERVER_ERROR",dw=[-32700,-32600,-32601,-32602,-32603],Di={[cw]:{code:-32700,message:"Parse error"},[lw]:{code:-32600,message:"Invalid Request"},[uw]:{code:-32601,message:"Method not found"},[hw]:{code:-32602,message:"Invalid params"},[Qu]:{code:-32603,message:"Internal error"},[na]:{code:-32e3,message:"Server error"}},eh=na;function fw(t){return dw.includes(t)}function th(t){return Object.keys(Di).includes(t)?Di[t]:Di[eh]}function pw(t){const e=Object.values(Di).find(r=>r.code===t);return e||Di[eh]}function gw(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var rh={},Dr={},nh;function mw(){if(nh)return Dr;nh=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.isBrowserCryptoAvailable=Dr.getSubtleCrypto=Dr.getBrowerCrypto=void 0;function t(){return(qt==null?void 0:qt.crypto)||(qt==null?void 0:qt.msCrypto)||{}}Dr.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}Dr.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return Dr.isBrowserCryptoAvailable=r,Dr}var Or={},ih;function ww(){if(ih)return Or;ih=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.isBrowser=Or.isNode=Or.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Or.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Or.isNode=e;function r(){return!t()&&!e()}return Or.isBrowser=r,Or}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=tr;e.__exportStar(mw(),t),e.__exportStar(ww(),t)})(rh);function sh(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function ia(t=6){return BigInt(sh(t))}function _s(t,e,r){return{id:r||sh(),jsonrpc:"2.0",method:t,params:e}}function sa(t,e){return{id:t,jsonrpc:"2.0",result:e}}function oa(t,e,r){return{id:t,jsonrpc:"2.0",error:vw(e,r)}}function vw(t,e){return typeof t>"u"?th(Qu):(typeof t=="string"&&(t=Object.assign(Object.assign({},th(na)),{message:t})),typeof e<"u"&&(t.data=e),fw(t.code)&&(t=pw(t.code)),t)}class yw{}class bw extends yw{constructor(){super()}}class _w extends bw{constructor(e){super()}}const Ew="^wss?:";function Sw(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function xw(t,e){const r=Sw(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function oh(t){return xw(t,Ew)}function Dw(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function ah(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function aa(t){return ah(t)&&"method"in t}function Es(t){return ah(t)&&(Cr(t)||hr(t))}function Cr(t){return"result"in t}function hr(t){return"error"in t}class Ow extends _w{constructor(e){super(e),this.events=new lr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(_s(e.method,e.params||[],e.id||ia().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{hr(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Es(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Cw=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),Iw=()=>typeof window<"u",ch=t=>t.split("?")[0],lh=10,Aw=Cw();class $w{constructor(e){if(this.url=e,this.events=new lr.EventEmitter,this.registering=!1,!oh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(To(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!oh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=rh.isReactNative()?void 0:{rejectUnauthorized:!Dw(e)},s=new Aw(e,[],i);Iw()?s.onerror=o=>{const a=o;n(this.emitError(a.error))}:s.on("error",o=>{n(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Kl(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=oa(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return gw(e,ch(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>lh&&this.events.setMaxListeners(lh)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${ch(this.url)}`));return this.events.emit("register_error",r),r}}var Ss={exports:{}};Ss.exports,function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",h="[object AsyncFunction]",d="[object Boolean]",w="[object Date]",m="[object Error]",v="[object Function]",b="[object GeneratorFunction]",x="[object Map]",C="[object Number]",$="[object Null]",y="[object Object]",E="[object Promise]",g="[object Proxy]",S="[object RegExp]",f="[object Set]",c="[object String]",p="[object Symbol]",P="[object Undefined]",A="[object WeakMap]",U="[object ArrayBuffer]",B="[object DataView]",V="[object Float32Array]",I="[object Float64Array]",N="[object Int8Array]",G="[object Int16Array]",H="[object Int32Array]",k="[object Uint8Array]",W="[object Uint8ClampedArray]",F="[object Uint16Array]",K="[object Uint32Array]",ce=/[\\^$.*+?()[\]{}|]/g,q=/^\[object .+?Constructor\]$/,se=/^(?:0|[1-9]\d*)$/,ee={};ee[V]=ee[I]=ee[N]=ee[G]=ee[H]=ee[k]=ee[W]=ee[F]=ee[K]=!0,ee[a]=ee[l]=ee[U]=ee[d]=ee[B]=ee[w]=ee[m]=ee[v]=ee[x]=ee[C]=ee[y]=ee[S]=ee[f]=ee[c]=ee[A]=!1;var ie=typeof qt=="object"&&qt&&qt.Object===Object&&qt,M=typeof self=="object"&&self&&self.Object===Object&&self,L=ie||M||Function("return this")(),T=e&&!e.nodeType&&e,u=T&&!0&&t&&!t.nodeType&&t,O=u&&u.exports===T,Y=O&&ie.process,Q=function(){try{return Y&&Y.binding&&Y.binding("util")}catch{}}(),Se=Q&&Q.isTypedArray;function xe(_,R){for(var z=-1,te=_==null?0:_.length,Je=0,ge=[];++z<te;){var lt=_[z];R(lt,z,_)&&(ge[Je++]=lt)}return ge}function me(_,R){for(var z=-1,te=R.length,Je=_.length;++z<te;)_[Je+z]=R[z];return _}function Ne(_,R){for(var z=-1,te=_==null?0:_.length;++z<te;)if(R(_[z],z,_))return!0;return!1}function Ze(_,R){for(var z=-1,te=Array(_);++z<_;)te[z]=R(z);return te}function Ve(_){return function(R){return _(R)}}function $e(_,R){return _.has(R)}function Ce(_,R){return _==null?void 0:_[R]}function we(_){var R=-1,z=Array(_.size);return _.forEach(function(te,Je){z[++R]=[Je,te]}),z}function ye(_,R){return function(z){return _(R(z))}}function ve(_){var R=-1,z=Array(_.size);return _.forEach(function(te){z[++R]=te}),z}var fe=Array.prototype,he=Function.prototype,oe=Object.prototype,be=L["__core-js_shared__"],De=he.toString,le=oe.hasOwnProperty,Ie=function(){var _=/[^.]+$/.exec(be&&be.keys&&be.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),Le=oe.toString,ke=RegExp("^"+De.call(le).replace(ce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=O?L.Buffer:void 0,Ue=L.Symbol,Qt=L.Uint8Array,sr=oe.propertyIsEnumerable,Sr=fe.splice,It=Ue?Ue.toStringTag:void 0,xr=Object.getOwnPropertySymbols,or=Be?Be.isBuffer:void 0,Gr=ye(Object.keys,Object),Xe=oi(L,"DataView"),Ge=oi(L,"Map"),st=oi(L,"Promise"),et=oi(L,"Set"),ot=oi(L,"WeakMap"),Ye=oi(Object,"create"),ht=On(Xe),mt=On(Ge),wt=On(st),dt=On(et),vt=On(ot),ft=Ue?Ue.prototype:void 0,at=ft?ft.valueOf:void 0;function qe(_){var R=-1,z=_==null?0:_.length;for(this.clear();++R<z;){var te=_[R];this.set(te[0],te[1])}}function D(){this.__data__=Ye?Ye(null):{},this.size=0}function j(_){var R=this.has(_)&&delete this.__data__[_];return this.size-=R?1:0,R}function Z(_){var R=this.__data__;if(Ye){var z=R[_];return z===n?void 0:z}return le.call(R,_)?R[_]:void 0}function ae(_){var R=this.__data__;return Ye?R[_]!==void 0:le.call(R,_)}function je(_,R){var z=this.__data__;return this.size+=this.has(_)?0:1,z[_]=Ye&&R===void 0?n:R,this}qe.prototype.clear=D,qe.prototype.delete=j,qe.prototype.get=Z,qe.prototype.has=ae,qe.prototype.set=je;function Ae(_){var R=-1,z=_==null?0:_.length;for(this.clear();++R<z;){var te=_[R];this.set(te[0],te[1])}}function Te(){this.__data__=[],this.size=0}function Oe(_){var R=this.__data__,z=so(R,_);if(z<0)return!1;var te=R.length-1;return z==te?R.pop():Sr.call(R,z,1),--this.size,!0}function At(_){var R=this.__data__,z=so(R,_);return z<0?void 0:R[z][1]}function tt(_){return so(this.__data__,_)>-1}function ct(_,R){var z=this.__data__,te=so(z,_);return te<0?(++this.size,z.push([_,R])):z[te][1]=R,this}Ae.prototype.clear=Te,Ae.prototype.delete=Oe,Ae.prototype.get=At,Ae.prototype.has=tt,Ae.prototype.set=ct;function yt(_){var R=-1,z=_==null?0:_.length;for(this.clear();++R<z;){var te=_[R];this.set(te[0],te[1])}}function Yr(){this.size=0,this.__data__={hash:new qe,map:new(Ge||Ae),string:new qe}}function no(_){var R=oo(this,_).delete(_);return this.size-=R?1:0,R}function fr(_){return oo(this,_).get(_)}function PE(_){return oo(this,_).has(_)}function NE(_,R){var z=oo(this,_),te=z.size;return z.set(_,R),this.size+=z.size==te?0:1,this}yt.prototype.clear=Yr,yt.prototype.delete=no,yt.prototype.get=fr,yt.prototype.has=PE,yt.prototype.set=NE;function io(_){var R=-1,z=_==null?0:_.length;for(this.__data__=new yt;++R<z;)this.add(_[R])}function LE(_){return this.__data__.set(_,n),this}function ME(_){return this.__data__.has(_)}io.prototype.add=io.prototype.push=LE,io.prototype.has=ME;function Jr(_){var R=this.__data__=new Ae(_);this.size=R.size}function UE(){this.__data__=new Ae,this.size=0}function jE(_){var R=this.__data__,z=R.delete(_);return this.size=R.size,z}function FE(_){return this.__data__.get(_)}function kE(_){return this.__data__.has(_)}function BE(_,R){var z=this.__data__;if(z instanceof Ae){var te=z.__data__;if(!Ge||te.length<r-1)return te.push([_,R]),this.size=++z.size,this;z=this.__data__=new yt(te)}return z.set(_,R),this.size=z.size,this}Jr.prototype.clear=UE,Jr.prototype.delete=jE,Jr.prototype.get=FE,Jr.prototype.has=kE,Jr.prototype.set=BE;function zE(_,R){var z=ao(_),te=!z&&n6(_),Je=!z&&!te&&Yc(_),ge=!z&&!te&&!Je&&Gf(_),lt=z||te||Je||ge,xt=lt?Ze(_.length,String):[],$t=xt.length;for(var rt in _)(R||le.call(_,rt))&&!(lt&&(rt=="length"||Je&&(rt=="offset"||rt=="parent")||ge&&(rt=="buffer"||rt=="byteLength"||rt=="byteOffset")||XE(rt,$t)))&&xt.push(rt);return xt}function so(_,R){for(var z=_.length;z--;)if(Hf(_[z][0],R))return z;return-1}function WE(_,R,z){var te=R(_);return ao(_)?te:me(te,z(_))}function Qi(_){return _==null?_===void 0?P:$:It&&It in Object(_)?JE(_):r6(_)}function kf(_){return es(_)&&Qi(_)==a}function Bf(_,R,z,te,Je){return _===R?!0:_==null||R==null||!es(_)&&!es(R)?_!==_&&R!==R:HE(_,R,z,te,Bf,Je)}function HE(_,R,z,te,Je,ge){var lt=ao(_),xt=ao(R),$t=lt?l:Zr(_),rt=xt?l:Zr(R);$t=$t==a?y:$t,rt=rt==a?y:rt;var er=$t==y,pr=rt==y,Lt=$t==rt;if(Lt&&Yc(_)){if(!Yc(R))return!1;lt=!0,er=!1}if(Lt&&!er)return ge||(ge=new Jr),lt||Gf(_)?zf(_,R,z,te,Je,ge):GE(_,R,$t,z,te,Je,ge);if(!(z&i)){var ar=er&&le.call(_,"__wrapped__"),cr=pr&&le.call(R,"__wrapped__");if(ar||cr){var Xr=ar?_.value():_,Tr=cr?R.value():R;return ge||(ge=new Jr),Je(Xr,Tr,z,te,ge)}}return Lt?(ge||(ge=new Jr),YE(_,R,z,te,Je,ge)):!1}function VE(_){if(!qf(_)||e6(_))return!1;var R=Vf(_)?ke:q;return R.test(On(_))}function KE(_){return es(_)&&Kf(_.length)&&!!ee[Qi(_)]}function qE(_){if(!t6(_))return Gr(_);var R=[];for(var z in Object(_))le.call(_,z)&&z!="constructor"&&R.push(z);return R}function zf(_,R,z,te,Je,ge){var lt=z&i,xt=_.length,$t=R.length;if(xt!=$t&&!(lt&&$t>xt))return!1;var rt=ge.get(_);if(rt&&ge.get(R))return rt==R;var er=-1,pr=!0,Lt=z&s?new io:void 0;for(ge.set(_,R),ge.set(R,_);++er<xt;){var ar=_[er],cr=R[er];if(te)var Xr=lt?te(cr,ar,er,R,_,ge):te(ar,cr,er,_,R,ge);if(Xr!==void 0){if(Xr)continue;pr=!1;break}if(Lt){if(!Ne(R,function(Tr,Cn){if(!$e(Lt,Cn)&&(ar===Tr||Je(ar,Tr,z,te,ge)))return Lt.push(Cn)})){pr=!1;break}}else if(!(ar===cr||Je(ar,cr,z,te,ge))){pr=!1;break}}return ge.delete(_),ge.delete(R),pr}function GE(_,R,z,te,Je,ge,lt){switch(z){case B:if(_.byteLength!=R.byteLength||_.byteOffset!=R.byteOffset)return!1;_=_.buffer,R=R.buffer;case U:return!(_.byteLength!=R.byteLength||!ge(new Qt(_),new Qt(R)));case d:case w:case C:return Hf(+_,+R);case m:return _.name==R.name&&_.message==R.message;case S:case c:return _==R+"";case x:var xt=we;case f:var $t=te&i;if(xt||(xt=ve),_.size!=R.size&&!$t)return!1;var rt=lt.get(_);if(rt)return rt==R;te|=s,lt.set(_,R);var er=zf(xt(_),xt(R),te,Je,ge,lt);return lt.delete(_),er;case p:if(at)return at.call(_)==at.call(R)}return!1}function YE(_,R,z,te,Je,ge){var lt=z&i,xt=Wf(_),$t=xt.length,rt=Wf(R),er=rt.length;if($t!=er&&!lt)return!1;for(var pr=$t;pr--;){var Lt=xt[pr];if(!(lt?Lt in R:le.call(R,Lt)))return!1}var ar=ge.get(_);if(ar&&ge.get(R))return ar==R;var cr=!0;ge.set(_,R),ge.set(R,_);for(var Xr=lt;++pr<$t;){Lt=xt[pr];var Tr=_[Lt],Cn=R[Lt];if(te)var Yf=lt?te(Cn,Tr,Lt,R,_,ge):te(Tr,Cn,Lt,_,R,ge);if(!(Yf===void 0?Tr===Cn||Je(Tr,Cn,z,te,ge):Yf)){cr=!1;break}Xr||(Xr=Lt=="constructor")}if(cr&&!Xr){var co=_.constructor,lo=R.constructor;co!=lo&&"constructor"in _&&"constructor"in R&&!(typeof co=="function"&&co instanceof co&&typeof lo=="function"&&lo instanceof lo)&&(cr=!1)}return ge.delete(_),ge.delete(R),cr}function Wf(_){return WE(_,o6,ZE)}function oo(_,R){var z=_.__data__;return QE(R)?z[typeof R=="string"?"string":"hash"]:z.map}function oi(_,R){var z=Ce(_,R);return VE(z)?z:void 0}function JE(_){var R=le.call(_,It),z=_[It];try{_[It]=void 0;var te=!0}catch{}var Je=Le.call(_);return te&&(R?_[It]=z:delete _[It]),Je}var ZE=xr?function(_){return _==null?[]:(_=Object(_),xe(xr(_),function(R){return sr.call(_,R)}))}:a6,Zr=Qi;(Xe&&Zr(new Xe(new ArrayBuffer(1)))!=B||Ge&&Zr(new Ge)!=x||st&&Zr(st.resolve())!=E||et&&Zr(new et)!=f||ot&&Zr(new ot)!=A)&&(Zr=function(_){var R=Qi(_),z=R==y?_.constructor:void 0,te=z?On(z):"";if(te)switch(te){case ht:return B;case mt:return x;case wt:return E;case dt:return f;case vt:return A}return R});function XE(_,R){return R=R??o,!!R&&(typeof _=="number"||se.test(_))&&_>-1&&_%1==0&&_<R}function QE(_){var R=typeof _;return R=="string"||R=="number"||R=="symbol"||R=="boolean"?_!=="__proto__":_===null}function e6(_){return!!Ie&&Ie in _}function t6(_){var R=_&&_.constructor,z=typeof R=="function"&&R.prototype||oe;return _===z}function r6(_){return Le.call(_)}function On(_){if(_!=null){try{return De.call(_)}catch{}try{return _+""}catch{}}return""}function Hf(_,R){return _===R||_!==_&&R!==R}var n6=kf(function(){return arguments}())?kf:function(_){return es(_)&&le.call(_,"callee")&&!sr.call(_,"callee")},ao=Array.isArray;function i6(_){return _!=null&&Kf(_.length)&&!Vf(_)}var Yc=or||c6;function s6(_,R){return Bf(_,R)}function Vf(_){if(!qf(_))return!1;var R=Qi(_);return R==v||R==b||R==h||R==g}function Kf(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=o}function qf(_){var R=typeof _;return _!=null&&(R=="object"||R=="function")}function es(_){return _!=null&&typeof _=="object"}var Gf=Se?Ve(Se):KE;function o6(_){return i6(_)?zE(_):qE(_)}function a6(){return[]}function c6(){return!1}t.exports=s6}(Ss,Ss.exports);var Tw=Ss.exports;const Rw=uo(Tw);function Pw(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,l=t.charAt(0),h=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function w(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var x=0,C=0,$=0,y=b.length;$!==y&&b[$]===0;)$++,x++;for(var E=(y-$)*d+1>>>0,g=new Uint8Array(E);$!==y;){for(var S=b[$],f=0,c=E-1;(S!==0||f<C)&&c!==-1;c--,f++)S+=256*g[c]>>>0,g[c]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");C=f,$++}for(var p=E-C;p!==E&&g[p]===0;)p++;for(var P=l.repeat(x);p<E;++p)P+=t.charAt(g[p]);return P}function m(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var x=0;if(b[x]!==" "){for(var C=0,$=0;b[x]===l;)C++,x++;for(var y=(b.length-x)*h+1>>>0,E=new Uint8Array(y);b[x];){var g=r[b.charCodeAt(x)];if(g===255)return;for(var S=0,f=y-1;(g!==0||S<$)&&f!==-1;f--,S++)g+=a*E[f]>>>0,E[f]=g%256>>>0,g=g/256>>>0;if(g!==0)throw new Error("Non-zero carry");$=S,x++}if(b[x]!==" "){for(var c=y-$;c!==y&&E[c]===0;)c++;for(var p=new Uint8Array(C+(y-c)),P=C;c!==y;)p[P++]=E[c++];return p}}}function v(b){var x=m(b);if(x)return x;throw new Error(`Non-${e} character`)}return{encode:w,decodeUnsafe:m,decode:v}}var Nw=Pw,Lw=Nw;const uh=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Mw=t=>new TextEncoder().encode(t),Uw=t=>new TextDecoder().decode(t);class jw{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Fw{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return hh(this,e)}}class kw{constructor(e){this.decoders=e}or(e){return hh(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const hh=(t,e)=>new kw({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Bw{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new jw(e,r,n),this.decoder=new Fw(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const xs=({name:t,prefix:e,encode:r,decode:n})=>new Bw(t,e,r,n),Oi=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Lw(r,e);return xs({prefix:t,name:e,encode:n,decode:s=>uh(i(s))})},zw=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,l=0,h=0;for(let d=0;d<s;++d){const w=i[t[d]];if(w===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<r|w,a+=r,a>=8&&(a-=8,o[h++]=255&l>>a)}if(a>=r||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return o},Ww=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Ot=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>xs({prefix:e,name:t,encode(i){return Ww(i,n,r)},decode(i){return zw(i,n,r,t)}}),Hw=xs({prefix:"\0",name:"identity",encode:t=>Uw(t),decode:t=>Mw(t)});var Vw=Object.freeze({__proto__:null,identity:Hw});const Kw=Ot({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var qw=Object.freeze({__proto__:null,base2:Kw});const Gw=Ot({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Yw=Object.freeze({__proto__:null,base8:Gw});const Jw=Oi({prefix:"9",name:"base10",alphabet:"0123456789"});var Zw=Object.freeze({__proto__:null,base10:Jw});const Xw=Ot({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Qw=Ot({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ev=Object.freeze({__proto__:null,base16:Xw,base16upper:Qw});const tv=Ot({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),rv=Ot({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),nv=Ot({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),iv=Ot({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),sv=Ot({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ov=Ot({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),av=Ot({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),cv=Ot({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),lv=Ot({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var uv=Object.freeze({__proto__:null,base32:tv,base32upper:rv,base32pad:nv,base32padupper:iv,base32hex:sv,base32hexupper:ov,base32hexpad:av,base32hexpadupper:cv,base32z:lv});const hv=Oi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),dv=Oi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var fv=Object.freeze({__proto__:null,base36:hv,base36upper:dv});const pv=Oi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),gv=Oi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var mv=Object.freeze({__proto__:null,base58btc:pv,base58flickr:gv});const wv=Ot({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),vv=Ot({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),yv=Ot({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),bv=Ot({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var _v=Object.freeze({__proto__:null,base64:wv,base64pad:vv,base64url:yv,base64urlpad:bv});const dh=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Ev=dh.reduce((t,e,r)=>(t[r]=e,t),[]),Sv=dh.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function xv(t){return t.reduce((e,r)=>(e+=Ev[r],e),"")}function Dv(t){const e=[];for(const r of t){const n=Sv[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Ov=xs({prefix:"🚀",name:"base256emoji",encode:xv,decode:Dv});var Cv=Object.freeze({__proto__:null,base256emoji:Ov}),Iv=ph,fh=128,Av=127,$v=~Av,Tv=Math.pow(2,31);function ph(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Tv;)e[r++]=t&255|fh,t/=128;for(;t&$v;)e[r++]=t&255|fh,t>>>=7;return e[r]=t|0,ph.bytes=r-n+1,e}var Rv=ca,Pv=128,gh=127;function ca(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw ca.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&gh)<<i:(o&gh)*Math.pow(2,i),i+=7}while(o>=Pv);return ca.bytes=s-n,r}var Nv=Math.pow(2,7),Lv=Math.pow(2,14),Mv=Math.pow(2,21),Uv=Math.pow(2,28),jv=Math.pow(2,35),Fv=Math.pow(2,42),kv=Math.pow(2,49),Bv=Math.pow(2,56),zv=Math.pow(2,63),Wv=function(t){return t<Nv?1:t<Lv?2:t<Mv?3:t<Uv?4:t<jv?5:t<Fv?6:t<kv?7:t<Bv?8:t<zv?9:10},Hv={encode:Iv,decode:Rv,encodingLength:Wv},mh=Hv;const wh=(t,e,r=0)=>(mh.encode(t,e,r),e),vh=t=>mh.encodingLength(t),la=(t,e)=>{const r=e.byteLength,n=vh(t),i=n+vh(r),s=new Uint8Array(i+r);return wh(t,s,0),wh(r,s,n),s.set(e,i),new Vv(t,r,e,s)};class Vv{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const yh=({name:t,code:e,encode:r})=>new Kv(t,e,r);class Kv{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?la(this.code,r):r.then(n=>la(this.code,n))}else throw Error("Unknown type, must be binary type")}}const bh=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),qv=yh({name:"sha2-256",code:18,encode:bh("SHA-256")}),Gv=yh({name:"sha2-512",code:19,encode:bh("SHA-512")});var Yv=Object.freeze({__proto__:null,sha256:qv,sha512:Gv});const _h=0,Jv="identity",Eh=uh;var Zv=Object.freeze({__proto__:null,identity:{code:_h,name:Jv,encode:Eh,digest:t=>la(_h,Eh(t))}});new TextEncoder,new TextDecoder;const Sh={...Vw,...qw,...Yw,...Zw,...ev,...uv,...fv,...mv,..._v,...Cv};({...Yv,...Zv});function xh(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Xv(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?xh(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Dh(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Oh=Dh("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ua=Dh("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Xv(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Qv={utf8:Oh,"utf-8":Oh,hex:Sh.base16,latin1:ua,ascii:ua,binary:ua,...Sh};function ey(t,e="utf8"){const r=Qv[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?xh(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const Ch="wc",ty=2,ha="core",Fr=`${Ch}@2:${ha}:`,ry={name:ha,logger:"error"},ny={database:":memory:"},iy="crypto",Ih="client_ed25519_seed",sy=re.ONE_DAY,oy="keychain",ay="0.3",cy="messages",ly="0.3",uy=re.SIX_HOURS,hy="publisher",Ah="irn",dy="error",$h="wss://relay.walletconnect.com",Th="wss://relay.walletconnect.org",fy="relayer",nt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},py="_subscription",Ci={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},gy=re.ONE_SECOND/2,my="2.9.0",wy=1e4,vy="0.3",yy="WALLETCONNECT_CLIENT_ID",vr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},by="subscription",_y="0.3",Ey=re.FIVE_SECONDS*1e3,Sy="pairing",xy="0.3",Ii={wc_pairingDelete:{req:{ttl:re.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:re.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:re.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:re.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:re.ONE_DAY,prompt:!1,tag:0},res:{ttl:re.ONE_DAY,prompt:!1,tag:0}}},yr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Dy="history",Oy="0.3",Cy="expirer",rr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Iy="0.3",da="verify-api",Rh="https://verify.walletconnect.com";let Ay=class{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=oy,this.version=ay,this.initialized=!1,this.storagePrefix=Fr,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=X("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=Me.generateChildLogger(r,this.name)}get context(){return Me.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Bu(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?zu(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}},$y=class{constructor(e,r,n){this.core=e,this.logger=r,this.name=iy,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=du(i);return hu(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=tm();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),o=du(s),a=Zo();return await lg(a,i,sy,o)},this.generateSharedKey=(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),l=rm(a,s);return this.setSymKey(l,o)},this.setSymKey=async(i,s)=>{this.isInitialized();const o=s||nm(i);return await this.keychain.set(o,i),o},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,o)=>{this.isInitialized();const a=Lu(o),l=To(s);if(Mu(a)){const m=a.senderPublicKey,v=a.receiverPublicKey;i=await this.generateSharedKey(m,v)}const h=this.getSymKey(i),{type:d,senderPublicKey:w}=a;return sm({type:d,symKey:h,message:l,senderPublicKey:w})},this.decode=async(i,s,o)=>{this.isInitialized();const a=cm(s,o);if(Mu(a)){const d=a.receiverPublicKey,w=a.senderPublicKey;i=await this.generateSharedKey(d,w)}const l=this.getSymKey(i),h=om({symKey:l,encoded:s});return Kl(h)},this.getPayloadType=i=>{const s=ms(i);return Ei(s.type)},this.getPayloadSenderPublicKey=i=>{const s=ms(i);return s.senderPublicKey?Ut(s.senderPublicKey,jt):void 0},this.core=e,this.logger=Me.generateChildLogger(r,this.name),this.keychain=n||new Ay(this.core,this.logger)}get context(){return Me.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Ih)}catch{e=Zo(),await this.keychain.set(Ih,e)}return ey(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}},Ty=class extends p1{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=cy,this.version=ly,this.initialized=!1,this.storagePrefix=Fr,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=Ln(i);let o=this.messages.get(n);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(n,o),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),o=Ln(i);return typeof s[o]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Me.generateChildLogger(e,this.name),this.core=r}get context(){return Me.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Bu(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?zu(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}},Ry=class extends g1{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new lr.EventEmitter,this.name=hy,this.queue=new Map,this.publishTimeout=re.toMiliseconds(re.TEN_SECONDS),this.queueTimeout=re.toMiliseconds(re.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{const o=(s==null?void 0:s.ttl)||uy,a=ta(s),l=(s==null?void 0:s.prompt)||!1,h=(s==null?void 0:s.tag)||0,d=(s==null?void 0:s.id)||ia().toString(),w={topic:n,message:i,opts:{ttl:o,relay:a,prompt:l,tag:h,id:d}},m=setTimeout(()=>this.queue.set(d,w),this.queueTimeout);try{await await ws(this.rpcPublish(n,i,o,a,l,h,d),this.publishTimeout),clearTimeout(m),this.relayer.events.emit(nt.publish,w)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(o){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(o),o}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=Me.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Me.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,s,o,a){var l,h,d,w;const m={method:vs(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:o},id:a};return Ft((l=m.params)==null?void 0:l.prompt)&&((h=m.params)==null||delete h.prompt),Ft((d=m.params)==null?void 0:d.tag)&&((w=m.params)==null||delete w.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:m}),this.relayer.request(m)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(Tn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(nt.connection_stalled);return}this.checkQueue()}),this.relayer.on(nt.message_ack,e=>{this.onPublish(e.id.toString())})}},Py=class{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}};var Ny=Object.defineProperty,Ly=Object.defineProperties,My=Object.getOwnPropertyDescriptors,Ph=Object.getOwnPropertySymbols,Uy=Object.prototype.hasOwnProperty,jy=Object.prototype.propertyIsEnumerable,Nh=(t,e,r)=>e in t?Ny(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ai=(t,e)=>{for(var r in e||(e={}))Uy.call(e,r)&&Nh(t,r,e[r]);if(Ph)for(var r of Ph(e))jy.call(e,r)&&Nh(t,r,e[r]);return t},fa=(t,e)=>Ly(t,My(e));let Fy=class extends v1{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new Py,this.events=new lr.EventEmitter,this.name=by,this.version=_y,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Fr,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=ta(i),o={topic:n,relay:s};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s);return this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,s)=>{const o=new re.Watch;o.start(this.pendingSubscriptionWatchLabel);const a=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),i(!0)),o.elapsed(this.pendingSubscriptionWatchLabel)>=Ey&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),s(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Me.generateChildLogger(r,this.name),this.clientId=""}get context(){return Me.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=ta(n);await this.rpcUnsubscribe(e,r,i);const s=Et("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){const n={method:vs(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await ws(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(nt.connection_stalled)}return Ln(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:vs(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await ws(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(nt.connection_stalled)}}rpcUnsubscribe(e,r,n){const i={method:vs(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,fa(Ai({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Ai({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,Ai({},r)),this.topicMap.set(r.topic,e),this.events.emit(vr.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(vr.deleted,fa(Ai({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(vr.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(vr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);Si(r)&&this.onBatchSubscribe(r.map((n,i)=>fa(Ai({},e[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Tn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(nt.connect,async()=>{await this.onConnect()}),this.relayer.on(nt.disconnect,()=>{this.onDisconnect()}),this.events.on(vr.created,async e=>{const r=vr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(vr.deleted,async e=>{const r=vr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}};var ky=Object.defineProperty,Lh=Object.getOwnPropertySymbols,By=Object.prototype.hasOwnProperty,zy=Object.prototype.propertyIsEnumerable,Mh=(t,e,r)=>e in t?ky(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Wy=(t,e)=>{for(var r in e||(e={}))By.call(e,r)&&Mh(t,r,e[r]);if(Lh)for(var r of Lh(e))zy.call(e,r)&&Mh(t,r,e[r]);return t};let Hy=class extends m1{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new lr.EventEmitter,this.name=fy,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Me.generateChildLogger(e.logger,this.name):Me.pino(Me.getDefaultLoggerOptions({level:e.logger||dy})),this.messages=new Ty(this.logger,e.core),this.subscriber=new Fy(this,this.logger),this.publisher=new Ry(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||$h,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Th}...`),await this.restartTransport(Th)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},wy)}get context(){return Me.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"";return i||(await Promise.all([new Promise(s=>{this.subscriber.once(vr.created,o=>{o.topic===e&&s()})}),new Promise(async s=>{i=await this.subscriber.subscribe(e,r),s()})]),i)}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(nt.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(vr.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,n)=>{await ws(this.provider.connect(),5e3,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(i=>n(i)).then(()=>r()).finally(()=>this.removeListener(nt.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(nt.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);const n=r;if(!this.isConnectionStalled(n.message))throw r;this.events.emit(nt.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(r=>{this.provider.once(Ci.disconnect,()=>{r()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ow(new $w(ym({sdkVersion:my,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;return await this.subscriber.isSubscribed(r)?this.messages.has(r,n):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),aa(e)){if(!e.method.endsWith(py))return;const r=e.params,{topic:n,message:i,publishedAt:s}=r.data,o={topic:n,message:i,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Wy({type:"event",event:r.id},o)),this.events.emit(r.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else Es(e)&&this.events.emit(nt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(nt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=sa(e.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on(Ci.payload,e=>this.onProviderPayload(e)),this.provider.on(Ci.connect,()=>{this.events.emit(nt.connect)}),this.provider.on(Ci.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(Ci.error,e=>{this.logger.error(e),this.events.emit(nt.error,e)})}registerEventListeners(){this.events.on(nt.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(nt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},re.toMiliseconds(gy))}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var Vy=Object.defineProperty,Uh=Object.getOwnPropertySymbols,Ky=Object.prototype.hasOwnProperty,qy=Object.prototype.propertyIsEnumerable,jh=(t,e,r)=>e in t?Vy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fh=(t,e)=>{for(var r in e||(e={}))Ky.call(e,r)&&jh(t,r,e[r]);if(Uh)for(var r of Uh(e))qy.call(e,r)&&jh(t,r,e[r]);return t};let Ds=class extends w1{constructor(e,r,n,i=Fr,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=vy,this.cached=[],this.initialized=!1,this.storagePrefix=Fr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Ft(o)?this.map.set(this.getKey(o),o):zm(o)?this.map.set(o.id,o):Wm(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(l=>Rw(a[l],o[l]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const l=Fh(Fh({},this.getData(o)),a);this.map.set(o,l),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),await this.persist())},this.logger=Me.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return Me.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}},Gy=class{constructor(e,r){this.core=e,this.logger=r,this.name=Sy,this.version=xy,this.events=new ml,this.initialized=!1,this.storagePrefix=Fr,this.ignoredPayloadTypes=[un],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=Zo(),i=await this.core.crypto.setSymKey(n),s=ur(re.FIVE_MINUTES),o={protocol:Ah},a={topic:i,expiry:s,relay:o,active:!1},l=Rm({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:o});return await this.pairings.set(i,a),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:l}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:s,relay:o}=Am(n.uri);if(this.pairings.keys.includes(i))throw new Error(`Pairing already exists: ${i}`);if(this.core.crypto.hasKeys(i))throw new Error(`Keychain already exists: ${i}`);const a=ur(re.FIVE_MINUTES),l={topic:i,relay:o,expiry:a,active:!1};return await this.pairings.set(i,l),await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:o}),this.core.expirer.set(i,a),n.activatePairing&&await this.activate({topic:i}),l},this.activate=async({topic:n})=>{this.isInitialized();const i=ur(re.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:l}=Mn();this.events.once(pt("pairing_ping",s),({error:h})=>{h?l(h):a()}),await o()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Et("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{const o=_s(i,s),a=await this.core.crypto.encode(n,o),l=Ii[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,l),o.id},this.sendResult=async(n,i,s)=>{const o=sa(n,s),a=await this.core.crypto.encode(i,o),l=await this.core.history.get(i,n),h=Ii[l.request.method].res;await this.core.relayer.publish(i,a,h),await this.core.history.resolve(o)},this.sendError=async(n,i,s)=>{const o=oa(n,s),a=await this.core.crypto.encode(i,o),l=await this.core.history.get(i,n),h=Ii[l.request.method]?Ii[l.request.method].res:Ii.unregistered_method.res;await this.core.relayer.publish(i,a,h),await this.core.history.resolve(o)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Et("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>jr(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n,o=s.method;if(this.pairings.keys.includes(i))switch(o){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;if(this.pairings.keys.includes(i))switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit("pairing_ping",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{Cr(i)?this.events.emit(pt("pairing_ping",s),{}):hr(i)&&this.events.emit(pt("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit("pairing_delete",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=Et("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(Et("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!Ht(n)){const{message:i}=X("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!Bm(n.uri)){const{message:i}=X("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!Ht(n)){const{message:s}=X("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!Ht(n)){const{message:s}=X("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!St(n,!1)){const{message:i}=X("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=X("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(jr(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=X("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=Me.generateChildLogger(r,this.name),this.pairings=new Ds(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Me.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(nt.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);aa(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):Es(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id))})}registerExpirerEvents(){this.core.expirer.on(rr.expired,async e=>{const{topic:r}=Hu(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}},Yy=class extends f1{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new lr.EventEmitter,this.name=Dy,this.version=Oy,this.cached=[],this.initialized=!1,this.storagePrefix=Fr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:ur(re.THIRTY_DAYS)};this.records.set(o.id,o),this.events.emit(yr.created,o)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=hr(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(yr.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(yr.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Me.generateChildLogger(r,this.name)}get context(){return Me.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:_s(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(yr.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(yr.created,e=>{const r=yr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(yr.updated,e=>{const r=yr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(yr.deleted,e=>{const r=yr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(Tn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{re.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}},Jy=class extends y1{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new lr.EventEmitter,this.name=Cy,this.version=Iy,this.cached=[],this.initialized=!1,this.storagePrefix=Fr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(rr.created,{target:s,expiration:o})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(rr.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Me.generateChildLogger(r,this.name)}get context(){return Me.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return bm(e);if(typeof e=="number")return _m(e);const{message:r}=X("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(rr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;re.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(rr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Tn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(rr.created,e=>{const r=rr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(rr.expired,e=>{const r=rr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(rr.deleted,e=>{const r=rr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}},Zy=class extends b1{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=da,this.initialized=!1,this.init=async n=>{ku()||!Qo()||(this.verifyUrl=(n==null?void 0:n.verifyUrl)||Rh,await this.createIframe())},this.register=async n=>{var i;if(this.initialized||await this.init(),!!this.iframe)try{(i=this.iframe.contentWindow)==null||i.postMessage(n.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${n.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async n=>{var i;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${n.attestationId}`);const s=this.startAbortTimer(re.FIVE_SECONDS),o=await fetch(`${this.verifyUrl}/attestation/${n.attestationId}`,{signal:this.abortController.signal});return clearTimeout(s),o.status===200?(i=await o.json())==null?void 0:i.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((n,i)=>{if(document.getElementById(da))return n();const s=document.createElement("iframe");s.setAttribute("id",da),s.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),s.style.display="none",s.addEventListener("load",()=>{this.initialized=!0,n()}),s.addEventListener("error",o=>{i(o)}),document.body.append(s),this.iframe=s}),new Promise(n=>{setTimeout(()=>n("iframe load timeout"),re.toMiliseconds(re.ONE_SECOND/2))})])}catch(n){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(n)}},this.logger=Me.generateChildLogger(r,this.name),this.verifyUrl=Rh,this.abortController=new AbortController,this.isDevEnv=Xo()&&process.env.IS_VITEST}get context(){return Me.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),re.toMiliseconds(e))}};var Xy=Object.defineProperty,kh=Object.getOwnPropertySymbols,Qy=Object.prototype.hasOwnProperty,eb=Object.prototype.propertyIsEnumerable,Bh=(t,e,r)=>e in t?Xy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zh=(t,e)=>{for(var r in e||(e={}))Qy.call(e,r)&&Bh(t,r,e[r]);if(kh)for(var r of kh(e))eb.call(e,r)&&Bh(t,r,e[r]);return t};const tb=class Jf extends d1{constructor(e){super(e),this.protocol=Ch,this.version=ty,this.name=ha,this.events=new lr.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||$h;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Me.pino(Me.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||ry.logger}));this.logger=Me.generateChildLogger(r,this.name),this.heartbeat=new Tn.HeartBeat,this.crypto=new $y(this,this.logger,e==null?void 0:e.keychain),this.history=new Yy(this,this.logger),this.expirer=new Jy(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new J0(zh(zh({},ny),e==null?void 0:e.storageOptions)),this.relayer=new Hy({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Gy(this,this.logger),this.verify=new Zy(this.projectId||"",this.logger)}static async init(e){const r=new Jf(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(yy,n),r}get context(){return Me.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}},Wh="wc",Hh=2,Vh="client",pa=`${Wh}@${Hh}:${Vh}:`,ga={name:Vh,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},rb="WALLETCONNECT_DEEPLINK_CHOICE",nb="proposal",ib="Proposal expired",sb="session",Os=re.SEVEN_DAYS,ob="engine",$i={wc_sessionPropose:{req:{ttl:re.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:re.ONE_DAY,prompt:!1,tag:1104},res:{ttl:re.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:re.ONE_DAY,prompt:!1,tag:1106},res:{ttl:re.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:re.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:re.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:re.ONE_DAY,prompt:!1,tag:1112},res:{ttl:re.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:re.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:re.THIRTY_SECONDS,prompt:!1,tag:1115}}},ma={min:re.FIVE_MINUTES,max:re.SEVEN_DAYS},ab="request",cb=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var lb=Object.defineProperty,ub=Object.defineProperties,hb=Object.getOwnPropertyDescriptors,Kh=Object.getOwnPropertySymbols,db=Object.prototype.hasOwnProperty,fb=Object.prototype.propertyIsEnumerable,qh=(t,e,r)=>e in t?lb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,nr=(t,e)=>{for(var r in e||(e={}))db.call(e,r)&&qh(t,r,e[r]);if(Kh)for(var r of Kh(e))fb.call(e,r)&&qh(t,r,e[r]);return t},wa=(t,e)=>ub(t,hb(e));class pb extends E1{constructor(e){super(e),this.name=ob,this.events=new ml,this.initialized=!1,this.ignoredPayloadTypes=[un],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys($i)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized();const n=wa(nr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:l}=n;let h=i,d,w=!1;if(h&&(w=this.client.core.pairing.pairings.get(h).active),!h||!w){const{topic:E,uri:g}=await this.client.core.pairing.create();h=E,d=g}const m=await this.client.core.crypto.generateKeyPair(),v=nr({requiredNamespaces:s,optionalNamespaces:o,relays:l??[{protocol:Ah}],proposer:{publicKey:m,metadata:this.client.metadata}},a&&{sessionProperties:a}),{reject:b,resolve:x,done:C}=Mn(re.FIVE_MINUTES,ib);if(this.events.once(pt("session_connect"),async({error:E,session:g})=>{if(E)b(E);else if(g){g.self.publicKey=m;const S=wa(nr({},g),{requiredNamespaces:g.requiredNamespaces,optionalNamespaces:g.optionalNamespaces});await this.client.session.set(g.topic,S),await this.setExpiry(g.topic,g.expiry),h&&await this.client.core.pairing.updateMetadata({topic:h,metadata:g.peer.metadata}),x(S)}}),!h){const{message:E}=X("NO_MATCHING_KEY",`connect() pairing topic: ${h}`);throw new Error(E)}const $=await this.sendRequest(h,"wc_sessionPropose",v),y=ur(re.FIVE_MINUTES);return await this.setProposal($,nr({id:$,expiry:y},v)),{uri:d,approval:C}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:i,namespaces:s,sessionProperties:o}=r,a=this.client.proposal.get(n);let{pairingTopic:l,proposer:h,requiredNamespaces:d,optionalNamespaces:w}=a;l=l||"",xi(d)||(d=Mm(s,"approve()"));const m=await this.client.core.crypto.generateKeyPair(),v=h.publicKey,b=await this.client.core.crypto.generateSharedKey(m,v);l&&n&&(await this.client.core.pairing.updateMetadata({topic:l,metadata:h.metadata}),await this.sendResult(n,l,{relay:{protocol:i??"irn"},responderPublicKey:m}),await this.client.proposal.delete(n,Et("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:l}));const x=nr({relay:{protocol:i??"irn"},namespaces:s,requiredNamespaces:d,optionalNamespaces:w,pairingTopic:l,controller:{publicKey:m,metadata:this.client.metadata},expiry:ur(Os)},o&&{sessionProperties:o});await this.client.core.relayer.subscribe(b),await this.sendRequest(b,"wc_sessionSettle",x);const C=wa(nr({},x),{topic:b,pairingTopic:l,acknowledged:!1,self:x.controller,peer:{publicKey:h.publicKey,metadata:h.metadata},controller:m});return await this.client.session.set(b,C),await this.setExpiry(b,ur(Os)),{topic:b,acknowledged:()=>new Promise($=>setTimeout(()=>$(this.client.session.get(b)),500))}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:n,reason:i}=r,{pairingTopic:s}=this.client.proposal.get(n);s&&(await this.sendError(n,s,i),await this.client.proposal.delete(n,Et("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:i}=r,s=await this.sendRequest(n,"wc_sessionUpdate",{namespaces:i}),{done:o,resolve:a,reject:l}=Mn();return this.events.once(pt("session_update",s),({error:h})=>{h?l(h):a()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:o}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,i=await this.sendRequest(n,"wc_sessionExtend",{}),{done:s,resolve:o,reject:a}=Mn();return this.events.once(pt("session_extend",i),({error:l})=>{l?a(l):o()}),await this.setExpiry(n,ur(Os)),{acknowledged:s}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:i,topic:s,expiry:o}=r,a=await this.sendRequest(s,"wc_sessionRequest",{request:i,chainId:n},o),{done:l,resolve:h,reject:d}=Mn(o);this.events.once(pt("session_request",a),({error:m,result:v})=>{m?d(m):h(v)}),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:a});const w=await this.client.core.storage.getItem(rb);return Em({id:a,topic:s,wcDeepLink:w}),await l()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i;Cr(i)?await this.sendResult(s,n,i.result):hr(i)&&await this.sendError(s,n,i.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=await this.sendRequest(n,"wc_sessionPing",{}),{done:s,resolve:o,reject:a}=Mn();this.events.once(pt("session_ping",i),({error:l})=>{l?a(l):o()}),await s()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r;await this.sendRequest(n,"wc_sessionEvent",{event:i,chainId:s})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=ia().toString();let s;const o=a=>{(a==null?void 0:a.id.toString())===i&&(this.client.core.relayer.events.removeListener(nt.message_ack,o),s())};await Promise.all([new Promise(a=>{s=a,this.client.core.relayer.on(nt.message_ack,o)}),this.sendRequest(n,"wc_sessionDelete",Et("USER_DISCONNECTED"),void 0,i)]),await this.deleteSession(n)}else await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>Fm(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(r,n)=>{const{self:i}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,Et("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(i.publicKey)&&await this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r)},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,Et("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{const n=$i.wc_sessionRequest.req.ttl,{id:i,topic:s,params:o}=r;await this.client.pendingRequest.set(i,{id:i,topic:s,params:o}),n&&this.client.core.expirer.set(i,ur(n))},this.sendRequest=async(r,n,i,s,o)=>{const a=_s(n,i);if(Qo()&&cb.includes(n)){const d=Ln(JSON.stringify(a));await this.client.core.verify.register({attestationId:d})}const l=await this.client.core.crypto.encode(r,a),h=$i[n].req;return s&&(h.ttl=s),o&&(h.id=o),this.client.core.history.set(r,a),this.client.core.relayer.publish(r,l,h),a.id},this.sendResult=async(r,n,i)=>{const s=sa(r,i),o=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,r),l=$i[a.request.method].res;this.client.core.relayer.publish(n,o,l),await this.client.core.history.resolve(s)},this.sendError=async(r,n,i)=>{const s=oa(r,i),o=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,r),l=$i[a.request.method].res;this.client.core.relayer.publish(n,o,l),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{jr(i.expiry)&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{jr(i.expiry)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession(i)),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=r=>{const{topic:n,payload:i}=r,s=i.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i}=r,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:i}=X("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.onSessionProposeRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidConnect(nr({},n.params));const o=ur(re.FIVE_MINUTES),a=nr({id:s,pairingTopic:r,expiry:o},i);await this.setProposal(s,a);const l=Ln(JSON.stringify(n)),h=await this.getVerifyContext(l,a.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:a,verifyContext:h})}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.onSessionProposeResponse=async(r,n)=>{const{id:i}=n;if(Cr(n)){const{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const o=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const a=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});const l=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const h=await this.client.core.crypto.generateSharedKey(a,l);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:h});const d=await this.client.core.relayer.subscribe(h);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else hr(n)&&(await this.client.proposal.delete(i,Et("USER_DISCONNECTED")),this.events.emit(pt("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:l,namespaces:h,requiredNamespaces:d,optionalNamespaces:w,sessionProperties:m,pairingTopic:v}=n.params,b=nr({topic:r,relay:o,expiry:l,namespaces:h,acknowledged:!0,pairingTopic:v,requiredNamespaces:d,optionalNamespaces:w,controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},m&&{sessionProperties:m});await this.sendResult(n.id,r,!0),this.events.emit(pt("session_connect"),{session:b}),this.cleanupDuplicatePairings(b)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;Cr(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(pt("session_approve",i),{})):hr(n)&&(await this.client.session.delete(r,Et("USER_DISCONNECTED")),this.events.emit(pt("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidUpdate(nr({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult(s,r,!0),this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n;Cr(n)?this.events.emit(pt("session_update",i),{}):hr(n)&&this.events.emit(pt("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,ur(Os)),await this.sendResult(i,r,!0),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n;Cr(n)?this.events.emit(pt("session_extend",i),{}):hr(n)&&this.events.emit(pt("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n;setTimeout(()=>{Cr(n)?this.events.emit(pt("session_ping",i),{}):hr(n)&&this.events.emit(pt("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(nt.publish,async()=>{s(await this.deleteSession(r))})}),this.sendResult(i,r,!0)]),this.client.events.emit("session_delete",{id:i,topic:r})}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidRequest(nr({topic:r},s)),await this.setPendingSessionRequest({id:i,topic:r,params:s});const o=Ln(JSON.stringify(n)),a=this.client.session.get(r),l=await this.getVerifyContext(o,a.peer.metadata);this.client.events.emit("session_request",{id:i,topic:r,params:s,verifyContext:l})}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n;Cr(n)?this.events.emit(pt("session_request",i),{result:n.result}):hr(n)&&this.events.emit(pt("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidEmit(nr({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s})}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.isValidConnect=async r=>{if(!Ht(r)){const{message:l}=X("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(l)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(Ft(n)||await this.isValidPairingTopic(n),!Zm(a,!0)){const{message:l}=X("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(l)}!Ft(i)&&xi(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!Ft(s)&&xi(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),Ft(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=Jm(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!Ht(r))throw new Error(X("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o}=r;await this.isValidProposalId(n);const a=this.client.proposal.get(n),l=bs(i,"approve()");if(l)throw new Error(l.message);const h=Zu(a.requiredNamespaces,i,"approve()");if(h)throw new Error(h.message);if(!St(s,!0)){const{message:d}=X("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}Ft(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!Ht(r)){const{message:s}=X("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(await this.isValidProposalId(n),!Qm(i)){const{message:s}=X("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!Ht(r)){const{message:h}=X("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(h)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!Yu(n)){const{message:h}=X("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(h)}const a=Hm(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const l=bs(s,"onSessionSettleRequest()");if(l)throw new Error(l.message);if(jr(o)){const{message:h}=X("EXPIRED","onSessionSettleRequest()");throw new Error(h)}},this.isValidUpdate=async r=>{if(!Ht(r)){const{message:l}=X("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(l)}const{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=bs(i,"update()");if(o)throw new Error(o.message);const a=Zu(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!Ht(r)){const{message:i}=X("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!Ht(r)){const{message:l}=X("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(l)}const{topic:n,request:i,chainId:s,expiry:o}=r;await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!Ju(a,s)){const{message:l}=X("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(l)}if(!ew(i)){const{message:l}=X("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(l)}if(!nw(a,s,i.method)){const{message:l}=X("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(l)}if(o&&!aw(o,ma)){const{message:l}=X("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${ma.min} and ${ma.max}`);throw new Error(l)}},this.isValidRespond=async r=>{if(!Ht(r)){const{message:s}=X("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(s)}const{topic:n,response:i}=r;if(await this.isValidSessionTopic(n),!tw(i)){const{message:s}=X("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidPing=async r=>{if(!Ht(r)){const{message:i}=X("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!Ht(r)){const{message:a}=X("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!Ju(o,s)){const{message:a}=X("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!rw(i)){const{message:a}=X("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!iw(o,s,i.name)){const{message:a}=X("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!Ht(r)){const{message:i}=X("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(r,n)=>{const i={verified:{verifyUrl:n.verifyUrl||"",validation:"UNKNOWN",origin:n.url||""}};try{const s=await this.client.core.verify.resolve({attestationId:r,verifyUrl:n.verifyUrl});s&&(i.verified.origin=s,i.verified.validation=s===n.url?"VALID":"INVALID")}catch(s){this.client.logger.error(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!St(i,!1)){const{message:s}=X("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(nt.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(r,n);aa(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):Es(i)?(await this.client.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.client.core.history.delete(r,i.id)):this.onRelayEventUnknownPayload({topic:r,payload:i})})}registerExpirerEvents(){this.client.core.expirer.on(rr.expired,async e=>{const{topic:r,id:n}=Hu(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,X("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(e){if(!St(e,!1)){const{message:r}=X("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=X("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(jr(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=X("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!St(e,!1)){const{message:r}=X("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=X("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(jr(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=X("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(St(e,!1)){const{message:r}=X("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=X("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!Xm(e)){const{message:r}=X("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=X("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(jr(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=X("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class gb extends Ds{constructor(e,r){super(e,r,nb,pa),this.core=e,this.logger=r}}class mb extends Ds{constructor(e,r){super(e,r,sb,pa),this.core=e,this.logger=r}}class wb extends Ds{constructor(e,r){super(e,r,ab,pa,n=>n.id),this.core=e,this.logger=r}}let vb=class Zf extends _1{constructor(e){super(e),this.protocol=Wh,this.version=Hh,this.name=ga.name,this.events=new lr.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(e==null?void 0:e.name)||ga.name,this.metadata=(e==null?void 0:e.metadata)||gm();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Me.pino(Me.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||ga.logger}));this.core=(e==null?void 0:e.core)||new tb(e),this.logger=Me.generateChildLogger(r,this.name),this.session=new mb(this.core,this.logger),this.proposal=new gb(this.core,this.logger),this.pendingRequest=new wb(this.core,this.logger),this.engine=new pb(this)}static async init(e){const r=new Zf(e);return await r.initialize(),r}get context(){return Me.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var yb=Object.defineProperty,bb=Object.defineProperties,_b=Object.getOwnPropertyDescriptors,Gh=Object.getOwnPropertySymbols,Eb=Object.prototype.hasOwnProperty,Sb=Object.prototype.propertyIsEnumerable,Yh=(t,e,r)=>e in t?yb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xb=(t,e)=>{for(var r in e||(e={}))Eb.call(e,r)&&Yh(t,r,e[r]);if(Gh)for(var r of Gh(e))Sb.call(e,r)&&Yh(t,r,e[r]);return t},Db=(t,e)=>bb(t,_b(e)),va=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},gt=(t,e,r)=>(va(t,e,"read from private field"),r?r.call(t):e.get(t)),dn=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Cs=(t,e,r,n)=>(va(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Pt=(t,e,r)=>(va(t,e,"access private method"),r),fn,jn,Ti,Vt,ya,Jh,Nt,kt,ba,Zh;let Ob=class{constructor(e){dn(this,ya),dn(this,Nt),dn(this,ba),dn(this,fn,void 0),dn(this,jn,void 0),dn(this,Ti,void 0),dn(this,Vt,void 0),Cs(this,fn,e),Cs(this,jn,Pt(this,ya,Jh).call(this)),Pt(this,Nt,kt).call(this)}async connect(e){const{requiredNamespaces:r,optionalNamespaces:n}=e;return new Promise(async(i,s)=>{await Pt(this,Nt,kt).call(this);const o=gt(this,jn).subscribeModal(h=>{h.open||(o(),s(new Error("Modal closed")))}),{uri:a,approval:l}=await gt(this,Vt).connect(e);if(a){const h=new Set;r&&Object.values(r).forEach(({chains:d})=>{d&&d.forEach(w=>h.add(w))}),n&&Object.values(n).forEach(({chains:d})=>{d&&d.forEach(w=>h.add(w))}),await gt(this,jn).openModal({uri:a,chains:Array.from(h)})}try{const h=await l();i(h)}catch(h){s(h)}finally{o(),gt(this,jn).closeModal()}})}async disconnect(e){await Pt(this,Nt,kt).call(this),await gt(this,Vt).disconnect(e)}async request(e){return await Pt(this,Nt,kt).call(this),await gt(this,Vt).request(e)}async getSessions(){return await Pt(this,Nt,kt).call(this),gt(this,Vt).session.getAll()}async getSession(){return await Pt(this,Nt,kt).call(this),gt(this,Vt).session.getAll().at(-1)}async onSessionEvent(e){await Pt(this,Nt,kt).call(this),gt(this,Vt).on("session_event",e)}async offSessionEvent(e){await Pt(this,Nt,kt).call(this)}async onSessionUpdate(e){await Pt(this,Nt,kt).call(this),gt(this,Vt).on("session_update",e)}async offSessionUpdate(e){await Pt(this,Nt,kt).call(this)}async onSessionDelete(e){await Pt(this,Nt,kt).call(this),gt(this,Vt).on("session_delete",e)}async offSessionDelete(e){await Pt(this,Nt,kt).call(this)}async onSessionExpire(e){await Pt(this,Nt,kt).call(this),gt(this,Vt).on("session_expire",e)}async offSessionExpire(e){await Pt(this,Nt,kt).call(this)}};fn=new WeakMap,jn=new WeakMap,Ti=new WeakMap,Vt=new WeakMap,ya=new WeakSet,Jh=function(){const{modalOptions:t,projectId:e}=gt(this,fn);return new m0(Db(xb({},t),{projectId:e}))},Nt=new WeakSet,kt=async function(){return gt(this,Vt)?!0:(!gt(this,Ti)&&typeof window<"u"&&Cs(this,Ti,Pt(this,ba,Zh).call(this)),gt(this,Ti))},ba=new WeakSet,Zh=async function(){Cs(this,Vt,await vb.init({metadata:gt(this,fn).metadata,projectId:gt(this,fn).projectId,relayUrl:gt(this,fn).relayUrl}));const t=await gt(this,Vt).core.crypto.getClientId();try{localStorage.setItem("WCM_WALLETCONNECT_CLIENT_ID",t)}catch{console.info("Unable to set client id")}};function Cb(t){return{all:t=t||new Map,on:function(e,r){var n=t.get(e);n?n.push(r):t.set(e,[r])},off:function(e,r){var n=t.get(e);n&&(r?n.splice(n.indexOf(r)>>>0,1):t.set(e,[]))},emit:function(e,r){var n=t.get(e);n&&n.slice().map(function(i){i(r)}),(n=t.get("*"))&&n.slice().map(function(i){i(e,r)})}}}const Xh=Cb();let Ri;function Ib(t){Ri=new Ob(t)}async function dr(){return new Promise(t=>{if(Ri)t(Ri);else{const e=setInterval(()=>{Ri&&(clearInterval(e),t(Ri))},200)}})}function Ab(t){return _e.useEffect(()=>{Ib(t)},[]),null}const $b=_e.memo(Ab);function Qh(){const[t,e]=_e.useState(void 0),[r,n]=_e.useState(void 0),[i,s]=_e.useState(!1);return{data:t,error:r,loading:i,setData:e,setError:n,setLoading:s}}function Tb(t){const{data:e,error:r,loading:n,setData:i,setError:s,setLoading:o}=Qh();async function a(l){try{o(!0),s(void 0);const h=await(await dr()).connect(l??t);return i(h),Xh.emit("session_change"),h}catch(h){throw s(h),h}finally{o(!1)}}return{data:e,error:r,loading:n,connect:a}}function ed(t){_e.useEffect(()=>(dr().then(e=>{e.onSessionDelete(t)}),()=>{dr().then(e=>{})}),[t])}function _a(t){_e.useEffect(()=>(dr().then(e=>{e.onSessionEvent(t)}),()=>{dr().then(e=>{})}),[t])}function Rb(t){_e.useEffect(()=>(dr().then(e=>{e.onSessionExpire(t)}),()=>{dr().then(e=>{})}),[t])}function Pb(t){_e.useEffect(()=>(dr().then(e=>{e.onSessionUpdate(t)}),()=>{dr().then(e=>{})}),[t])}function Fn(t){const{data:e,error:r,loading:n,setData:i,setError:s,setLoading:o}=Qh();async function a(l){try{o(!0),s(void 0);const h=await(await dr()).request(l??t);return i(h),h}catch(h){throw s(h),h}finally{o(!1)}}return{data:e,error:r,loading:n,request:a}}var Nb=Object.defineProperty,Lb=Object.defineProperties,Mb=Object.getOwnPropertyDescriptors,td=Object.getOwnPropertySymbols,Ub=Object.prototype.hasOwnProperty,jb=Object.prototype.propertyIsEnumerable,rd=(t,e,r)=>e in t?Nb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fb=(t,e)=>{for(var r in e||(e={}))Ub.call(e,r)&&rd(t,r,e[r]);if(td)for(var r of td(e))jb.call(e,r)&&rd(t,r,e[r]);return t},kb=(t,e)=>Lb(t,Mb(e));function pn(){const[t,e]=_e.useState(void 0);return ed(r=>{r.topic===(t==null?void 0:t.topic)&&e(void 0)}),Pb(r=>{if(t&&r.topic===(t==null?void 0:t.topic)){const{namespaces:n}=r.params,i=kb(Fb({},t),{namespaces:n});e(i)}}),Rb(r=>{t&&r.topic===(t==null?void 0:t.topic)&&e(void 0)}),_e.useEffect(()=>{async function r(){const n=await(await dr()).getSession();e(n)}return r(),Xh.on("session_change",r),()=>{}},[]),t}const nd=["aztec_connect","aztec_disconnect","aztec_getAccountPublicKey","aztec_getSpendingPublicKey","aztec_requestProofs"],Ea=["aztec:1337"],Sa=["aleo_connect","aleo_disconnect","aleo_getSelectedAccount","aleo_transfer","aleo_deployProgram","aleo_getBalance","aleo_executeProgram","aleo_getRecords"],Is=["aleo:1"],As=["chainChanged","accountsChanged","balanceChanged","recordsChanged"],id="f0aaeffe71b636da453fce042d79d723",xa="https://walletconnect.puzzle.online/",sd={standaloneChains:Ea.concat(Is),enableExplorer:!1,enableAccountView:!0,enableNetworkView:!0,enableStandaloneMode:!0,mobileWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"",universal:xa}}],desktopWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"",universal:xa}}],walletImages:{puzzle:"https://i.imgur.com/p9tHaFC.png"}},Bb={requiredNamespaces:{aztec:{methods:nd,chains:Ea,events:As},aleo:{methods:Sa,chains:Is,events:As}}},zb=({dAppName:t,dAppDescription:e,dAppUrl:r,dAppIconURL:n})=>po.jsx($b,{projectId:id,metadata:{name:t,description:e,url:r,icons:[n]},modalOptions:{...sd}}),Wb=({children:t})=>(xd(),po.jsx(po.Fragment,{children:t})),od=t=>{let e;const r=new Set,n=(l,h)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const w=e;e=h??typeof d!="object"?d:Object.assign({},e,d),r.forEach(m=>m(e,w))}},i=()=>e,a={setState:n,getState:i,subscribe:l=>(r.add(l),()=>r.delete(l)),destroy:()=>{r.clear()}};return e=t(n,i,a),a},Hb=t=>t?od(t):od;var Da={exports:{}},Oa={},$s={exports:{}},Ca={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ad;function Vb(){if(ad)return Ca;ad=1;var t=_e;function e(w,m){return w===m&&(w!==0||1/w===1/m)||w!==w&&m!==m}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(w,m){var v=m(),b=n({inst:{value:v,getSnapshot:m}}),x=b[0].inst,C=b[1];return s(function(){x.value=v,x.getSnapshot=m,l(x)&&C({inst:x})},[w,v,m]),i(function(){return l(x)&&C({inst:x}),w(function(){l(x)&&C({inst:x})})},[w]),o(v),v}function l(w){var m=w.getSnapshot;w=w.value;try{var v=m();return!r(w,v)}catch{return!0}}function h(w,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:a;return Ca.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,Ca}var Ia={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cd;function Kb(){return cd||(cd=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=_e,e=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function r(E){{for(var g=arguments.length,S=new Array(g>1?g-1:0),f=1;f<g;f++)S[f-1]=arguments[f];n("error",E,S)}}function n(E,g,S){{var f=e.ReactDebugCurrentFrame,c=f.getStackAddendum();c!==""&&(g+="%s",S=S.concat([c]));var p=S.map(function(P){return String(P)});p.unshift("Warning: "+g),Function.prototype.apply.call(console[E],console,p)}}function i(E,g){return E===g&&(E!==0||1/E===1/g)||E!==E&&g!==g}var s=typeof Object.is=="function"?Object.is:i,o=t.useState,a=t.useEffect,l=t.useLayoutEffect,h=t.useDebugValue,d=!1,w=!1;function m(E,g,S){d||t.startTransition!==void 0&&(d=!0,r("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var f=g();if(!w){var c=g();s(f,c)||(r("The result of getSnapshot should be cached to avoid an infinite loop"),w=!0)}var p=o({inst:{value:f,getSnapshot:g}}),P=p[0].inst,A=p[1];return l(function(){P.value=f,P.getSnapshot=g,v(P)&&A({inst:P})},[E,f,g]),a(function(){v(P)&&A({inst:P});var U=function(){v(P)&&A({inst:P})};return E(U)},[E]),h(f),f}function v(E){var g=E.getSnapshot,S=E.value;try{var f=g();return!s(S,f)}catch{return!0}}function b(E,g,S){return g()}var x=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",C=!x,$=C?b:m,y=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:$;Ia.useSyncExternalStore=y,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),Ia}var ld;function ud(){return ld||(ld=1,process.env.NODE_ENV==="production"?$s.exports=Vb():$s.exports=Kb()),$s.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hd;function qb(){if(hd)return Oa;hd=1;var t=_e,e=ud();function r(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return Oa.useSyncExternalStoreWithSelector=function(h,d,w,m,v){var b=s(null);if(b.current===null){var x={hasValue:!1,value:null};b.current=x}else x=b.current;b=a(function(){function $(f){if(!y){if(y=!0,E=f,f=m(f),v!==void 0&&x.hasValue){var c=x.value;if(v(c,f))return g=c}return g=f}if(c=g,n(E,f))return c;var p=m(f);return v!==void 0&&v(c,p)?c:(E=f,g=p)}var y=!1,E,g,S=w===void 0?null:w;return[function(){return $(d())},S===null?void 0:function(){return $(S())}]},[d,w,m,v]);var C=i(h,b[0],b[1]);return o(function(){x.hasValue=!0,x.value=C},[C]),l(C),C},Oa}var Aa={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dd;function Gb(){return dd||(dd=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=_e,e=ud();function r(d,w){return d===w&&(d!==0||1/d===1/w)||d!==d&&w!==w}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;function h(d,w,m,v,b){var x=s(null),C;x.current===null?(C={hasValue:!1,value:null},x.current=C):C=x.current;var $=a(function(){var S=!1,f,c,p=function(B){if(!S){S=!0,f=B;var V=v(B);if(b!==void 0&&C.hasValue){var I=C.value;if(b(I,V))return c=I,I}return c=V,V}var N=f,G=c;if(n(N,B))return G;var H=v(B);return b!==void 0&&b(G,H)?G:(f=B,c=H,H)},P=m===void 0?null:m,A=function(){return p(w())},U=P===null?void 0:function(){return p(P())};return[A,U]},[w,m,v,b]),y=$[0],E=$[1],g=i(d,y,E);return o(function(){C.hasValue=!0,C.value=g},[g]),l(g),g}Aa.useSyncExternalStoreWithSelector=h,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),Aa}process.env.NODE_ENV==="production"?Da.exports=qb():Da.exports=Gb();var Yb=Da.exports;const Jb=uo(Yb),{useSyncExternalStoreWithSelector:Zb}=Jb;function Xb(t,e=t.getState,r){const n=Zb(t.subscribe,t.getState,t.getServerState||t.getState,e,r);return _e.useDebugValue(n),n}const fd=t=>{const e=typeof t=="function"?Hb(t):t,r=(n,i)=>Xb(e,n,i);return Object.assign(r,e),r},Qb=t=>t?fd(t):fd;function Ct(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(process.env.NODE_ENV!=="production"){var i=a2[t],s=i?typeof i=="function"?i.apply(null,r):i:"unknown error nr: "+t;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function kn(t){return!!t&&!!t[Jt]}function gn(t){var e;return!!t&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var i=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===c2}(t)||Array.isArray(t)||!!t[Sd]||!!(!((e=t.constructor)===null||e===void 0)&&e[Sd])||Ta(t)||Ra(t))}function Pi(t,e,r){r===void 0&&(r=!1),Bn(t)===0?(r?Object.keys:Ha)(t).forEach(function(n){r&&typeof n=="symbol"||e(n,t[n],t)}):t.forEach(function(n,i){return e(i,n,t)})}function Bn(t){var e=t[Jt];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Ta(t)?2:Ra(t)?3:0}function $a(t,e){return Bn(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function e2(t,e){return Bn(t)===2?t.get(e):t[e]}function pd(t,e,r){var n=Bn(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function t2(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Ta(t){return s2&&t instanceof Map}function Ra(t){return o2&&t instanceof Set}function mn(t){return t.o||t.t}function Pa(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=l2(t);delete e[Jt];for(var r=Ha(e),n=0;n<r.length;n++){var i=r[n],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function Na(t,e){return e===void 0&&(e=!1),La(t)||kn(t)||!gn(t)||(Bn(t)>1&&(t.set=t.add=t.clear=t.delete=r2),Object.freeze(t),e&&Pi(t,function(r,n){return Na(n,!0)},!0)),t}function r2(){Ct(2)}function La(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function br(t){var e=u2[t];return e||Ct(18,t),e}function gd(){return process.env.NODE_ENV==="production"||zn||Ct(0),zn}function Ma(t,e){e&&(br("Patches"),t.u=[],t.s=[],t.v=e)}function Ts(t){Ua(t),t.p.forEach(n2),t.p=null}function Ua(t){t===zn&&(zn=t.l)}function md(t){return zn={p:[],l:zn,h:t,m:!0,_:0}}function n2(t){var e=t[Jt];e.i===0||e.i===1?e.j():e.O=!0}function ja(t,e){e._=e.p.length;var r=e.p[0],n=t!==void 0&&t!==r;return e.h.g||br("ES5").S(e,t,n),n?(r[Jt].P&&(Ts(e),Ct(4)),gn(t)&&(t=Rs(e,t),e.l||Ps(e,t)),e.u&&br("Patches").M(r[Jt].t,t,e.u,e.s)):t=Rs(e,r,[]),Ts(e),e.u&&e.v(e.u,e.s),t!==Ed?t:void 0}function Rs(t,e,r){if(La(e))return e;var n=e[Jt];if(!n)return Pi(e,function(a,l){return wd(t,n,e,a,l,r)},!0),e;if(n.A!==t)return e;if(!n.P)return Ps(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=Pa(n.k):n.o,s=i,o=!1;n.i===3&&(s=new Set(i),i.clear(),o=!0),Pi(s,function(a,l){return wd(t,n,i,a,l,r,o)}),Ps(t,i,!1),r&&t.u&&br("Patches").N(n,r,t.u,t.s)}return n.o}function wd(t,e,r,n,i,s,o){if(process.env.NODE_ENV!=="production"&&i===r&&Ct(5),kn(i)){var a=Rs(t,i,s&&e&&e.i!==3&&!$a(e.R,n)?s.concat(n):void 0);if(pd(r,n,a),!kn(a))return;t.m=!1}else o&&r.add(i);if(gn(i)&&!La(i)){if(!t.h.D&&t._<1)return;Rs(t,i),e&&e.A.l||Ps(t,i)}}function Ps(t,e,r){r===void 0&&(r=!1),!t.l&&t.h.D&&t.m&&Na(e,r)}function Fa(t,e){var r=t[Jt];return(r?mn(r):t)[e]}function vd(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function ka(t){t.P||(t.P=!0,t.l&&ka(t.l))}function Ba(t){t.o||(t.o=Pa(t.t))}function za(t,e,r){var n=Ta(e)?br("MapSet").F(e,r):Ra(e)?br("MapSet").T(e,r):t.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:gd(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,h=Va;o&&(l=[a],h=Ni);var d=Proxy.revocable(l,h),w=d.revoke,m=d.proxy;return a.k=m,a.j=w,m}(e,r):br("ES5").J(e,r);return(r?r.A:gd()).p.push(n),n}function i2(t){return kn(t)||Ct(22,t),function e(r){if(!gn(r))return r;var n,i=r[Jt],s=Bn(r);if(i){if(!i.P&&(i.i<4||!br("ES5").K(i)))return i.t;i.I=!0,n=yd(r,s),i.I=!1}else n=yd(r,s);return Pi(n,function(o,a){i&&e2(i.t,o)===a||pd(n,o,e(a))}),s===3?new Set(n):n}(t)}function yd(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Pa(t)}var bd,zn,Wa=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",s2=typeof Map<"u",o2=typeof Set<"u",_d=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Ed=Wa?Symbol.for("immer-nothing"):((bd={})["immer-nothing"]=!0,bd),Sd=Wa?Symbol.for("immer-draftable"):"__$immer_draftable",Jt=Wa?Symbol.for("immer-state"):"__$immer_state",a2={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(t){return"Cannot apply patch, path doesn't resolve: "+t},16:'Sets cannot have "replace" patches.',17:function(t){return"Unsupported patch operation: "+t},18:function(t){return"The plugin for '"+t+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+t+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(t){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+t+"'"},22:function(t){return"'current' expects a draft, got: "+t},23:function(t){return"'original' expects a draft, got: "+t},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},c2=""+Object.prototype.constructor,Ha=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,l2=Object.getOwnPropertyDescriptors||function(t){var e={};return Ha(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)}),e},u2={},Va={get:function(t,e){if(e===Jt)return t;var r=mn(t);if(!$a(r,e))return function(i,s,o){var a,l=vd(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,r,e);var n=r[e];return t.I||!gn(n)?n:n===Fa(t.t,e)?(Ba(t),t.o[e]=za(t.A.h,n,t)):n},has:function(t,e){return e in mn(t)},ownKeys:function(t){return Reflect.ownKeys(mn(t))},set:function(t,e,r){var n=vd(mn(t),e);if(n!=null&&n.set)return n.set.call(t.k,r),!0;if(!t.P){var i=Fa(mn(t),e),s=i==null?void 0:i[Jt];if(s&&s.t===r)return t.o[e]=r,t.R[e]=!1,!0;if(t2(r,i)&&(r!==void 0||$a(t.t,e)))return!0;Ba(t),ka(t)}return t.o[e]===r&&(r!==void 0||e in t.o)||Number.isNaN(r)&&Number.isNaN(t.o[e])||(t.o[e]=r,t.R[e]=!0),!0},deleteProperty:function(t,e){return Fa(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,Ba(t),ka(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=mn(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty:function(){Ct(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Ct(12)}},Ni={};Pi(Va,function(t,e){Ni[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Ni.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&Ct(13),Ni.set.call(this,t,e,void 0)},Ni.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&Ct(14),Va.set.call(this,t[0],e,r,t[0])};var h2=function(){function t(r){var n=this;this.g=_d,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=n;return function(x){var C=this;x===void 0&&(x=a);for(var $=arguments.length,y=Array($>1?$-1:0),E=1;E<$;E++)y[E-1]=arguments[E];return l.produce(x,function(g){var S;return(S=s).call.apply(S,[C,g].concat(y))})}}var h;if(typeof s!="function"&&Ct(6),o!==void 0&&typeof o!="function"&&Ct(7),gn(i)){var d=md(n),w=za(n,i,void 0),m=!0;try{h=s(w),m=!1}finally{m?Ts(d):Ua(d)}return typeof Promise<"u"&&h instanceof Promise?h.then(function(x){return Ma(d,o),ja(x,d)},function(x){throw Ts(d),x}):(Ma(d,o),ja(h,d))}if(!i||typeof i!="object"){if((h=s(i))===void 0&&(h=i),h===Ed&&(h=void 0),n.D&&Na(h,!0),o){var v=[],b=[];br("Patches").M(i,h,v,b),o(v,b)}return h}Ct(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(h){for(var d=arguments.length,w=Array(d>1?d-1:0),m=1;m<d;m++)w[m-1]=arguments[m];return n.produceWithPatches(h,function(v){return i.apply(void 0,[v].concat(w))})};var o,a,l=n.produce(i,s,function(h,d){o=h,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(h){return[h,o,a]}):[l,o,a]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var e=t.prototype;return e.createDraft=function(r){gn(r)||Ct(8),kn(r)&&(r=i2(r));var n=md(this),i=za(this,r,void 0);return i[Jt].C=!0,Ua(n),i},e.finishDraft=function(r,n){var i=r&&r[Jt];process.env.NODE_ENV!=="production"&&(i&&i.C||Ct(9),i.I&&Ct(10));var s=i.A;return Ma(s,n),ja(void 0,s)},e.setAutoFreeze=function(r){this.D=r},e.setUseProxies=function(r){r&&!_d&&Ct(20),this.g=r},e.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var s=n[i];if(s.path.length===0&&s.op==="replace"){r=s.value;break}}i>-1&&(n=n.slice(i+1));var o=br("Patches").$;return kn(r)?o(r,n):this.produce(r,function(a){return o(a,n)})},t}(),Zt=new h2,d2=Zt.produce;Zt.produceWithPatches.bind(Zt),Zt.setAutoFreeze.bind(Zt),Zt.setUseProxies.bind(Zt),Zt.applyPatches.bind(Zt),Zt.createDraft.bind(Zt),Zt.finishDraft.bind(Zt);const f2=t=>(e,r,n)=>(n.setState=(i,s,...o)=>{const a=typeof i=="function"?d2(i):i;return e(a,s,...o)},t(n.setState,r,n)),wn=Qb()(f2((t,e)=>({account:void 0,accounts:[],chainId:void 0,setAccounts:r=>{t({accounts:r})},setAccount:r=>{t({account:r})},setChainId:r=>{t({chainId:r})}}))),p2=()=>{const t=pn(),[e,r,n,i]=wn(w=>[w.account,w.accounts,w.chainId,w.setAccount]),[s,o]=_e.useState(void 0),{request:a,data:l,error:h,loading:d}=Fn({topic:t==null?void 0:t.topic,chainId:n??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"aleo_getSelectedAccount",params:{type:"GET_SELECTED_ACCOUNT"}}});return _a(({params:w})=>{if(w.event.name==="accountsChanged"){const v=w.event.data[0],b=w.chainId.split(":")[0],x=w.chainId.split(":")[1];i({network:b,chainId:x,address:v}),o(void 0)}}),_e.useEffect(()=>{t&&a()},[t]),_e.useEffect(()=>{if(h)o(h.message);else if(l){const w=l&&l.type==="GET_SELECTED_ACCOUNT_RES"?l:void 0,m=l&&l.type==="GET_SELECTED_ACCOUNT_RES"?l.data.error:void 0,v=w==null?void 0:w.data.account;v&&i(v),o(m)}},[l,h]),{account:e,accounts:r,isConnected:!!e,session:t,error:s,loading:d}},g2=()=>{const t=pn(),[e]=wn(m=>[m.chainId]),[r,n]=_e.useState(0),[i,s]=_e.useState(!1),[o,a]=_e.useState(void 0),{request:l,data:h,error:d,loading:w}=Fn({topic:t==null?void 0:t.topic,chainId:e??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"aleo_getBalance",params:{type:"GET_BALANCE",data:{assetId:void 0}}}});return _a(({id:m,params:v,topic:b})=>{if(v.event.name==="balanceChanged"){const C=Number(v.event.data);n(C),a(void 0),s(!1)}}),_e.useEffect(()=>{t&&(l(),s(!0))},[t]),_e.useEffect(()=>{if(d)n(0),a(d.message),s(!1);else if(h){const m=h&&h.type==="GET_BALANCE_RES"?h:void 0,v=h&&h.type==="GET_BALANCE_REJ"?h.data.error:void 0,b=(m==null?void 0:m.data.balance)??0;n(b),a(v),s(!1)}},[h,d]),{loading:i,balance:r,error:o}},m2=()=>{const{connect:t,data:e,error:r,loading:n}=Tb({requiredNamespaces:{aleo:{methods:Sa,chains:Is,events:As}}});return{connect:async()=>{try{await t()}catch{}},data:e,error:r,loading:n}},w2=t=>{const e=pn(),[r]=wn(w=>[w.chainId]),{request:n,data:i,error:s,loading:o}=Fn({topic:(e==null?void 0:e.topic)??"",chainId:r??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"aleo_deployProgram",params:{type:"DEPLOY",data:{data:t}}}}),a=s?s.message:i&&i.type==="DEPLOY_REJ"?i.data.error:void 0,l=i&&i.type==="DEPLOY_RES"?i:void 0,h=l==null?void 0:l.data.transactionId;return{deploy:()=>{t&&n()},transactionId:h,loading:o,error:a}},v2=t=>{const e=pn();wn(d=>[d.chainId]);const{request:r,data:n,error:i,loading:s}=Fn({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{id:1,jsonrpc:"2.0",method:"aleo_executeProgram",params:{type:"EXECUTE",data:{data:t}}}}),o=i?i.message:n&&n.type==="EXECUTE_REJ"?n.data.error:void 0,a=n&&n.type==="EXECUTE_RES"?n:void 0,l=a==null?void 0:a.data.transactionId;return{execute:()=>{t&&(r(),console.log("sent execute request"))},transactionId:l,error:o,loading:s}},y2=()=>{const[t,e]=_e.useState({loading:!0});return _e.useEffect(()=>{},[]),{...t}},b2=()=>{const t=pn(),[e]=wn(m=>[m.chainId]),[r,n]=_e.useState([]),[i,s]=_e.useState(void 0),[o,a]=_e.useState(!1),{request:l,data:h,error:d,loading:w}=Fn({topic:t==null?void 0:t.topic,chainId:e??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"aleo_getRecords",params:{type:"GET_RECORDS"}}});return _a(({id:m,params:v,topic:b})=>{if(v.event.name==="recordsChanged"){const C=v.event.data;n(C),s(void 0),a(!1)}}),_e.useEffect(()=>{t&&(l(),a(!0))},[t]),_e.useEffect(()=>{if(d)n([]),s(d.message),a(!1);else if(h){const m=h,v=m.type==="GET_RECORDS_REJ"?m.data.error:void 0,b=m.type==="GET_RECORDS_RES"?m.data.records:[];n(b),s(v),a(!1)}},[h,d]),{records:r,error:i,loading:o}},_2=t=>{const e=pn(),[r]=wn(a=>[a.chainId]),{request:n,data:i,error:s,loading:o}=Fn({topic:(e==null?void 0:e.topic)??"",chainId:r??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"aleo_transfer",params:t}});return{transfer:n,data:i,error:s,loading:o}},xd=()=>{const t=pn(),[e,r]=wn(n=>[n.setAccount,n.setAccounts]);_e.useEffect(()=>{if(t){window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE");const n=t.namespaces.aleo.accounts.map(i=>{const s=i.split(":");return{network:s[0],chainId:s[1],address:s[2]}});r(n??[]),n[0]&&e(n[0])}},[t]),ed(({id:n,topic:i})=>{console.log("session deleted! topic: ",i)})};function Dd(t,e,r=e){const n=t<BigInt(0),i=t.toString().slice(n?1:0).padStart(e+1,"0"),s=i.slice(0,i.length-e),o=i.slice(-e);let a=o.length-1;for(;o[a]==="0";)--a;const l=o.slice(0,a+1);return(n?"-":"")+(l?`${s}.${l.slice(0,r)}`:s)}function E2(t,e){const[r,n]=t.split("."),i=(n||"").replace(/0+$/,"").slice(0,e),s=BigInt(10)**BigInt(e),o=s/BigInt(10)**BigInt(i.length||0);return BigInt(i||0)*o+BigInt(r||0)*s}var Od=(t=>(t[t.ETH=0]="ETH",t[t.DAI=1]="DAI",t))(Od||{});function S2(t){switch(t){case 0:return{id:0,symbol:"ETH",coinMarketCapID:"1027"};case 1:return{id:1,symbol:"DAI",coinMarketCapID:"4943"}}}class x2{constructor(e,r){this.getDisplayValue=()=>Dd(this.value,18)+" "+this.symbol,this.type=e;const{id:n,symbol:i,coinMarketCapID:s}=S2(e);this.id=n,this.symbol=i,this.coinMarketCapID=s,this.value=r}}const D2="0x6b175474e89094c44da98b954eedeac495271d0f",O2=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,type:"function"}];/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ns=window,Ka=Ns.ShadowRoot&&(Ns.ShadyCSS===void 0||Ns.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,qa=Symbol(),Cd=new WeakMap;let Id=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==qa)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(Ka&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=Cd.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&Cd.set(r,e))}return e}toString(){return this.cssText}};const C2=t=>new Id(typeof t=="string"?t:t+"",void 0,qa),ze=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,i,s)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new Id(r,t,qa)},I2=(t,e)=>{Ka?t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet):e.forEach(r=>{const n=document.createElement("style"),i=Ns.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)})},Ad=Ka?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return C2(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Ga;const Ls=window,$d=Ls.trustedTypes,A2=$d?$d.emptyScript:"",Td=Ls.reactiveElementPolyfillSupport,Ya={toAttribute(t,e){switch(e){case Boolean:t=t?A2:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},Rd=(t,e)=>e!==t&&(e==e||t==t),Ja={attribute:!0,type:String,converter:Ya,reflect:!1,hasChanged:Rd},Za="finalized";let Wn=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var r;this.finalize(),((r=this.h)!==null&&r!==void 0?r:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((r,n)=>{const i=this._$Ep(n,r);i!==void 0&&(this._$Ev.set(i,n),e.push(i))}),e}static createProperty(e,r=Ja){if(r.state&&(r.attribute=!1),this.finalize(),this.elementProperties.set(e,r),!r.noAccessor&&!this.prototype.hasOwnProperty(e)){const n=typeof e=="symbol"?Symbol():"__"+e,i=this.getPropertyDescriptor(e,n,r);i!==void 0&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){return{get(){return this[r]},set(i){const s=this[e];this[r]=i,this.requestUpdate(e,s,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||Ja}static finalize(){if(this.hasOwnProperty(Za))return!1;this[Za]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const r=this.properties,n=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(const i of n)this.createProperty(i,r[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const i of n)r.unshift(Ad(i))}else e!==void 0&&r.push(Ad(e));return r}static _$Ep(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(r=>r(this))}addController(e){var r,n;((r=this._$ES)!==null&&r!==void 0?r:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)===null||n===void 0||n.call(e))}removeController(e){var r;(r=this._$ES)===null||r===void 0||r.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,r)=>{this.hasOwnProperty(r)&&(this._$Ei.set(r,this[r]),delete this[r])})}createRenderRoot(){var e;const r=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return I2(r,this.constructor.elementStyles),r}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostConnected)===null||n===void 0?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostDisconnected)===null||n===void 0?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$EO(e,r,n=Ja){var i;const s=this.constructor._$Ep(e,n);if(s!==void 0&&n.reflect===!0){const o=(((i=n.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?n.converter:Ya).toAttribute(r,n.type);this._$El=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$El=null}}_$AK(e,r){var n;const i=this.constructor,s=i._$Ev.get(e);if(s!==void 0&&this._$El!==s){const o=i.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((n=o.converter)===null||n===void 0?void 0:n.fromAttribute)!==void 0?o.converter:Ya;this._$El=s,this[s]=a.fromAttribute(r,o.type),this._$El=null}}requestUpdate(e,r,n){let i=!0;e!==void 0&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||Rd)(this[e],r)?(this._$AL.has(e)||this._$AL.set(e,r),n.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,s)=>this[s]=i),this._$Ei=void 0);let r=!1;const n=this._$AL;try{r=this.shouldUpdate(n),r?(this.willUpdate(n),(e=this._$ES)===null||e===void 0||e.forEach(i=>{var s;return(s=i.hostUpdate)===null||s===void 0?void 0:s.call(i)}),this.update(n)):this._$Ek()}catch(i){throw r=!1,this._$Ek(),i}r&&this._$AE(n)}willUpdate(e){}_$AE(e){var r;(r=this._$ES)===null||r===void 0||r.forEach(n=>{var i;return(i=n.hostUpdated)===null||i===void 0?void 0:i.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((r,n)=>this._$EO(n,this[n],r)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};Wn[Za]=!0,Wn.elementProperties=new Map,Wn.elementStyles=[],Wn.shadowRootOptions={mode:"open"},Td==null||Td({ReactiveElement:Wn}),((Ga=Ls.reactiveElementVersions)!==null&&Ga!==void 0?Ga:Ls.reactiveElementVersions=[]).push("1.6.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Xa;const Ms=window,Hn=Ms.trustedTypes,Pd=Hn?Hn.createPolicy("lit-html",{createHTML:t=>t}):void 0,Qa="$lit$",kr=`lit$${(Math.random()+"").slice(9)}$`,Nd="?"+kr,$2=`<${Nd}>`,vn=document,Li=()=>vn.createComment(""),Mi=t=>t===null||typeof t!="object"&&typeof t!="function",Ld=Array.isArray,T2=t=>Ld(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",ec=`[ 	
\f\r]`,Ui=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Md=/-->/g,Ud=/>/g,yn=RegExp(`>|${ec}(?:([^\\s"'>=/]+)(${ec}*=${ec}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),jd=/'/g,Fd=/"/g,kd=/^(?:script|style|textarea|title)$/i,Bd=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),J=Bd(1),it=Bd(2),bn=Symbol.for("lit-noChange"),bt=Symbol.for("lit-nothing"),zd=new WeakMap,_n=vn.createTreeWalker(vn,129,null,!1);function Wd(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Pd!==void 0?Pd.createHTML(e):e}const R2=(t,e)=>{const r=t.length-1,n=[];let i,s=e===2?"<svg>":"",o=Ui;for(let a=0;a<r;a++){const l=t[a];let h,d,w=-1,m=0;for(;m<l.length&&(o.lastIndex=m,d=o.exec(l),d!==null);)m=o.lastIndex,o===Ui?d[1]==="!--"?o=Md:d[1]!==void 0?o=Ud:d[2]!==void 0?(kd.test(d[2])&&(i=RegExp("</"+d[2],"g")),o=yn):d[3]!==void 0&&(o=yn):o===yn?d[0]===">"?(o=i??Ui,w=-1):d[1]===void 0?w=-2:(w=o.lastIndex-d[2].length,h=d[1],o=d[3]===void 0?yn:d[3]==='"'?Fd:jd):o===Fd||o===jd?o=yn:o===Md||o===Ud?o=Ui:(o=yn,i=void 0);const v=o===yn&&t[a+1].startsWith("/>")?" ":"";s+=o===Ui?l+$2:w>=0?(n.push(h),l.slice(0,w)+Qa+l.slice(w)+kr+v):l+kr+(w===-2?(n.push(void 0),a):v)}return[Wd(t,s+(t[r]||"<?>")+(e===2?"</svg>":"")),n]};class ji{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let s=0,o=0;const a=e.length-1,l=this.parts,[h,d]=R2(e,r);if(this.el=ji.createElement(h,n),_n.currentNode=this.el.content,r===2){const w=this.el.content,m=w.firstChild;m.remove(),w.append(...m.childNodes)}for(;(i=_n.nextNode())!==null&&l.length<a;){if(i.nodeType===1){if(i.hasAttributes()){const w=[];for(const m of i.getAttributeNames())if(m.endsWith(Qa)||m.startsWith(kr)){const v=d[o++];if(w.push(m),v!==void 0){const b=i.getAttribute(v.toLowerCase()+Qa).split(kr),x=/([.?@])?(.*)/.exec(v);l.push({type:1,index:s,name:x[2],strings:b,ctor:x[1]==="."?N2:x[1]==="?"?M2:x[1]==="@"?U2:Us})}else l.push({type:6,index:s})}for(const m of w)i.removeAttribute(m)}if(kd.test(i.tagName)){const w=i.textContent.split(kr),m=w.length-1;if(m>0){i.textContent=Hn?Hn.emptyScript:"";for(let v=0;v<m;v++)i.append(w[v],Li()),_n.nextNode(),l.push({type:2,index:++s});i.append(w[m],Li())}}}else if(i.nodeType===8)if(i.data===Nd)l.push({type:2,index:s});else{let w=-1;for(;(w=i.data.indexOf(kr,w+1))!==-1;)l.push({type:7,index:s}),w+=kr.length-1}s++}}static createElement(e,r){const n=vn.createElement("template");return n.innerHTML=e,n}}function Vn(t,e,r=t,n){var i,s,o,a;if(e===bn)return e;let l=n!==void 0?(i=r._$Co)===null||i===void 0?void 0:i[n]:r._$Cl;const h=Mi(e)?void 0:e._$litDirective$;return(l==null?void 0:l.constructor)!==h&&((s=l==null?void 0:l._$AO)===null||s===void 0||s.call(l,!1),h===void 0?l=void 0:(l=new h(t),l._$AT(t,r,n)),n!==void 0?((o=(a=r)._$Co)!==null&&o!==void 0?o:a._$Co=[])[n]=l:r._$Cl=l),l!==void 0&&(e=Vn(t,l._$AS(t,e.values),l,n)),e}class P2{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var r;const{el:{content:n},parts:i}=this._$AD,s=((r=e==null?void 0:e.creationScope)!==null&&r!==void 0?r:vn).importNode(n,!0);_n.currentNode=s;let o=_n.nextNode(),a=0,l=0,h=i[0];for(;h!==void 0;){if(a===h.index){let d;h.type===2?d=new Fi(o,o.nextSibling,this,e):h.type===1?d=new h.ctor(o,h.name,h.strings,this,e):h.type===6&&(d=new j2(o,this,e)),this._$AV.push(d),h=i[++l]}a!==(h==null?void 0:h.index)&&(o=_n.nextNode(),a++)}return _n.currentNode=vn,s}v(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class Fi{constructor(e,r,n,i){var s;this.type=2,this._$AH=bt,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cp=(s=i==null?void 0:i.isConnected)===null||s===void 0||s}get _$AU(){var e,r;return(r=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&r!==void 0?r:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Vn(this,e,r),Mi(e)?e===bt||e==null||e===""?(this._$AH!==bt&&this._$AR(),this._$AH=bt):e!==this._$AH&&e!==bn&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):T2(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==bt&&Mi(this._$AH)?this._$AA.nextSibling.data=e:this.$(vn.createTextNode(e)),this._$AH=e}g(e){var r;const{values:n,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=ji.createElement(Wd(i.h,i.h[0]),this.options)),i);if(((r=this._$AH)===null||r===void 0?void 0:r._$AD)===s)this._$AH.v(n);else{const o=new P2(s,this),a=o.u(this.options);o.v(n),this.$(a),this._$AH=o}}_$AC(e){let r=zd.get(e.strings);return r===void 0&&zd.set(e.strings,r=new ji(e)),r}T(e){Ld(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const s of e)i===r.length?r.push(n=new Fi(this.k(Li()),this.k(Li()),this,this.options)):n=r[i],n._$AI(s),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,r);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var r;this._$AM===void 0&&(this._$Cp=e,(r=this._$AP)===null||r===void 0||r.call(this,e))}}class Us{constructor(e,r,n,i,s){this.type=1,this._$AH=bt,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=bt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,r=this,n,i){const s=this.strings;let o=!1;if(s===void 0)e=Vn(this,e,r,0),o=!Mi(e)||e!==this._$AH&&e!==bn,o&&(this._$AH=e);else{const a=e;let l,h;for(e=s[0],l=0;l<s.length-1;l++)h=Vn(this,a[n+l],r,l),h===bn&&(h=this._$AH[l]),o||(o=!Mi(h)||h!==this._$AH[l]),h===bt?e=bt:e!==bt&&(e+=(h??"")+s[l+1]),this._$AH[l]=h}o&&!i&&this.j(e)}j(e){e===bt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class N2 extends Us{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===bt?void 0:e}}const L2=Hn?Hn.emptyScript:"";let M2=class extends Us{constructor(){super(...arguments),this.type=4}j(e){e&&e!==bt?this.element.setAttribute(this.name,L2):this.element.removeAttribute(this.name)}};class U2 extends Us{constructor(e,r,n,i,s){super(e,r,n,i,s),this.type=5}_$AI(e,r=this){var n;if((e=(n=Vn(this,e,r,0))!==null&&n!==void 0?n:bt)===bn)return;const i=this._$AH,s=e===bt&&i!==bt||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,o=e!==bt&&(i===bt||s);s&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,n;typeof this._$AH=="function"?this._$AH.call((n=(r=this.options)===null||r===void 0?void 0:r.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}let j2=class{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Vn(this,e)}};const Hd=Ms.litHtmlPolyfillSupport;Hd==null||Hd(ji,Fi),((Xa=Ms.litHtmlVersions)!==null&&Xa!==void 0?Xa:Ms.litHtmlVersions=[]).push("2.7.5");const F2=(t,e,r)=>{var n,i;const s=(n=r==null?void 0:r.renderBefore)!==null&&n!==void 0?n:e;let o=s._$litPart$;if(o===void 0){const a=(i=r==null?void 0:r.renderBefore)!==null&&i!==void 0?i:null;s._$litPart$=o=new Fi(e.insertBefore(Li(),a),a,void 0,r??{})}return o._$AI(t),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var tc,rc;class Ee extends Wn{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,r;const n=super.createRenderRoot();return(e=(r=this.renderOptions).renderBefore)!==null&&e!==void 0||(r.renderBefore=n.firstChild),n}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=F2(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return bn}}Ee.finalized=!0,Ee._$litElement$=!0,(tc=globalThis.litElementHydrateSupport)===null||tc===void 0||tc.call(globalThis,{LitElement:Ee});const Vd=globalThis.litElementPolyfillSupport;Vd==null||Vd({LitElement:Ee}),((rc=globalThis.litElementVersions)!==null&&rc!==void 0?rc:globalThis.litElementVersions=[]).push("3.3.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Pe=t=>e=>typeof e=="function"?((r,n)=>(customElements.define(r,n),n))(t,e):((r,n)=>{const{kind:i,elements:s}=n;return{kind:i,elements:s,finisher(o){customElements.define(r,o)}}})(t,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const k2=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(r){r.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}},B2=(t,e,r)=>{e.constructor.createProperty(r,t)};function pe(t){return(e,r)=>r!==void 0?B2(t,e,r):k2(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Kt(t){return pe({...t,state:!0})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var nc;((nc=window.HTMLSlotElement)===null||nc===void 0?void 0:nc.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const z2={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},W2=t=>(...e)=>({_$litDirective$:t,values:e});class H2{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,n){this._$Ct=e,this._$AM=r,this._$Ci=n}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ir=W2(class extends H2{constructor(t){var e;if(super(t),t.type!==z2.ATTRIBUTE||t.name!=="class"||((e=t.strings)===null||e===void 0?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,n;if(this.it===void 0){this.it=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!(!((r=this.nt)===null||r===void 0)&&r.has(s))&&this.it.add(s);return this.render(e)}const i=t.element.classList;this.it.forEach(s=>{s in e||(i.remove(s),this.it.delete(s))});for(const s in e){const o=!!e[s];o===this.it.has(s)||!((n=this.nt)===null||n===void 0)&&n.has(s)||(o?(i.add(s),this.it.add(s)):(i.remove(s),this.it.delete(s)))}return bn}});function V2(t,e){t.indexOf(e)===-1&&t.push(e)}const Kd=(t,e,r)=>Math.min(Math.max(r,t),e),ir={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},js=t=>typeof t=="number",Kn=t=>Array.isArray(t)&&!js(t[0]),K2=(t,e,r)=>{const n=e-t;return((r-t)%n+n)%n+t};function q2(t,e){return Kn(t)?t[K2(0,t.length,e)]:t}const qd=(t,e,r)=>-r*t+r*e+t,Gd=()=>{},Br=t=>t,ic=(t,e,r)=>e-t===0?1:(r-t)/(e-t);function Yd(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=ic(0,e,n);t.push(qd(r,1,i))}}function G2(t){const e=[0];return Yd(e,t-1),e}function Y2(t,e=G2(t.length),r=Br){const n=t.length,i=n-e.length;return i>0&&Yd(e,i),s=>{let o=0;for(;o<n-2&&!(s<e[o+1]);o++);let a=Kd(0,1,ic(e[o],e[o+1],s));return a=q2(r,o)(a),qd(t[o],t[o+1],a)}}const Jd=t=>Array.isArray(t)&&js(t[0]),sc=t=>typeof t=="object"&&!!t.createAnimation,qn=t=>typeof t=="function",J2=t=>typeof t=="string",ki={ms:t=>t*1e3,s:t=>t/1e3},Zd=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,Z2=1e-7,X2=12;function Q2(t,e,r,n,i){let s,o,a=0;do o=e+(r-e)/2,s=Zd(o,n,i)-t,s>0?r=o:e=o;while(Math.abs(s)>Z2&&++a<X2);return o}function Bi(t,e,r,n){if(t===e&&r===n)return Br;const i=s=>Q2(s,0,1,t,r);return s=>s===0||s===1?s:Zd(i(s),e,n)}const e3=(t,e="end")=>r=>{r=e==="end"?Math.min(r,.999):Math.max(r,.001);const n=r*t,i=e==="end"?Math.floor(n):Math.ceil(n);return Kd(0,1,i/t)},Xd={ease:Bi(.25,.1,.25,1),"ease-in":Bi(.42,0,1,1),"ease-in-out":Bi(.42,0,.58,1),"ease-out":Bi(0,0,.58,1)},t3=/\((.*?)\)/;function Qd(t){if(qn(t))return t;if(Jd(t))return Bi(...t);if(Xd[t])return Xd[t];if(t.startsWith("steps")){const e=t3.exec(t);if(e){const r=e[1].split(",");return e3(parseFloat(r[0]),r[1].trim())}}return Br}class ef{constructor(e,r=[0,1],{easing:n,duration:i=ir.duration,delay:s=ir.delay,endDelay:o=ir.endDelay,repeat:a=ir.repeat,offset:l,direction:h="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=Br,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((w,m)=>{this.resolve=w,this.reject=m}),n=n||ir.easing,sc(n)){const w=n.createAnimation(r);n=w.easing,r=w.keyframes||r,i=w.duration||i}this.repeat=a,this.easing=Kn(n)?Br:Qd(n),this.updateDuration(i);const d=Y2(r,l,Kn(n)?n.map(Qd):Br);this.tick=w=>{var m;s=s;let v=0;this.pauseTime!==void 0?v=this.pauseTime:v=(w-this.startTime)*this.rate,this.t=v,v/=1e3,v=Math.max(v-s,0),this.playState==="finished"&&this.pauseTime===void 0&&(v=this.totalDuration);const b=v/this.duration;let x=Math.floor(b),C=b%1;!C&&b>=1&&(C=1),C===1&&x--;const $=x%2;(h==="reverse"||h==="alternate"&&$||h==="alternate-reverse"&&!$)&&(C=1-C);const y=v>=this.totalDuration?1:Math.min(C,1),E=d(this.easing(y));e(E),this.pauseTime===void 0&&(this.playState==="finished"||v>=this.totalDuration+o)?(this.playState="finished",(m=this.resolve)===null||m===void 0||m.call(this,E)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const e=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(e=this.reject)===null||e===void 0||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){this.pauseTime!==void 0||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}var oc=function(){};process.env.NODE_ENV!=="production"&&(oc=function(t,e){if(!t)throw new Error(e)});class r3{setAnimation(e){this.animation=e,e==null||e.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const ac=new WeakMap;function tf(t){return ac.has(t)||ac.set(t,{transforms:[],values:new Map}),ac.get(t)}function n3(t,e){return t.has(e)||t.set(e,new r3),t.get(e)}const i3=["","X","Y","Z"],s3=["translate","scale","rotate","skew"],Fs={x:"translateX",y:"translateY",z:"translateZ"},rf={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},o3={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:rf,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:Br},skew:rf},zi=new Map,cc=t=>`--motion-${t}`,ks=["x","y","z"];s3.forEach(t=>{i3.forEach(e=>{ks.push(t+e),zi.set(cc(t+e),o3[t])})});const a3=(t,e)=>ks.indexOf(t)-ks.indexOf(e),c3=new Set(ks),nf=t=>c3.has(t),l3=(t,e)=>{Fs[e]&&(e=Fs[e]);const{transforms:r}=tf(t);V2(r,e),t.style.transform=u3(r)},u3=t=>t.sort(a3).reduce(h3,"").trim(),h3=(t,e)=>`${t} ${e}(var(${cc(e)}))`,lc=t=>t.startsWith("--"),sf=new Set;function d3(t){if(!sf.has(t)){sf.add(t);try{const{syntax:e,initialValue:r}=zi.has(t)?zi.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:r})}catch{}}}const uc=(t,e)=>document.createElement("div").animate(t,e),of={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{uc({opacity:[1]})}catch{return!1}return!0},finished:()=>!!uc({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{uc({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},hc={},Gn={};for(const t in of)Gn[t]=()=>(hc[t]===void 0&&(hc[t]=of[t]()),hc[t]);const f3=.015,p3=(t,e)=>{let r="";const n=Math.round(e/f3);for(let i=0;i<n;i++)r+=t(ic(0,n-1,i))+", ";return r.substring(0,r.length-2)},af=(t,e)=>qn(t)?Gn.linearEasing()?`linear(${p3(t,e)})`:ir.easing:Jd(t)?g3(t):t,g3=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`;function m3(t,e){for(let r=0;r<t.length;r++)t[r]===null&&(t[r]=r?t[r-1]:e());return t}const w3=t=>Array.isArray(t)?t:[t];function dc(t){return Fs[t]&&(t=Fs[t]),nf(t)?cc(t):t}const Bs={get:(t,e)=>{e=dc(e);let r=lc(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!r&&r!==0){const n=zi.get(e);n&&(r=n.initialValue)}return r},set:(t,e,r)=>{e=dc(e),lc(e)?t.style.setProperty(e,r):t.style[e]=r}};function cf(t,e=!0){if(!(!t||t.playState==="finished"))try{t.stop?t.stop():(e&&t.commitStyles(),t.cancel())}catch{}}function v3(t,e){var r;let n=(e==null?void 0:e.toDefaultUnit)||Br;const i=t[t.length-1];if(J2(i)){const s=((r=i.match(/(-?[\d.]+)([a-z%]*)/))===null||r===void 0?void 0:r[2])||"";s&&(n=o=>o+s)}return n}function y3(){return window.__MOTION_DEV_TOOLS_RECORD}function b3(t,e,r,n={},i){const s=y3(),o=n.record!==!1&&s;let a,{duration:l=ir.duration,delay:h=ir.delay,endDelay:d=ir.endDelay,repeat:w=ir.repeat,easing:m=ir.easing,persist:v=!1,direction:b,offset:x,allowWebkitAcceleration:C=!1}=n;const $=tf(t),y=nf(e);let E=Gn.waapi();y&&l3(t,e);const g=dc(e),S=n3($.values,g),f=zi.get(g);return cf(S.animation,!(sc(m)&&S.generator)&&n.record!==!1),()=>{const c=()=>{var A,U;return(U=(A=Bs.get(t,g))!==null&&A!==void 0?A:f==null?void 0:f.initialValue)!==null&&U!==void 0?U:0};let p=m3(w3(r),c);const P=v3(p,f);if(sc(m)){const A=m.createAnimation(p,e!=="opacity",c,g,S);m=A.easing,p=A.keyframes||p,l=A.duration||l}if(lc(g)&&(Gn.cssRegisterProperty()?d3(g):E=!1),y&&!Gn.linearEasing()&&(qn(m)||Kn(m)&&m.some(qn))&&(E=!1),E){f&&(p=p.map(B=>js(B)?f.toDefaultUnit(B):B)),p.length===1&&(!Gn.partialKeyframes()||o)&&p.unshift(c());const A={delay:ki.ms(h),duration:ki.ms(l),endDelay:ki.ms(d),easing:Kn(m)?void 0:af(m,l),direction:b,iterations:w+1,fill:"both"};a=t.animate({[g]:p,offset:x,easing:Kn(m)?m.map(B=>af(B,l)):void 0},A),a.finished||(a.finished=new Promise((B,V)=>{a.onfinish=B,a.oncancel=V}));const U=p[p.length-1];a.finished.then(()=>{v||(Bs.set(t,g,U),a.cancel())}).catch(Gd),C||(a.playbackRate=1.000001)}else if(i&&y)p=p.map(A=>typeof A=="string"?parseFloat(A):A),p.length===1&&p.unshift(parseFloat(c())),a=new i(A=>{Bs.set(t,g,P?P(A):A)},p,Object.assign(Object.assign({},n),{duration:l,easing:m}));else{const A=p[p.length-1];Bs.set(t,g,f&&js(A)?f.toDefaultUnit(A):A)}return o&&s(t,e,p,{duration:l,delay:h,easing:m,repeat:w,offset:x},"motion-one"),S.setAnimation(a),a}}const _3=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);function E3(t,e){var r;return typeof t=="string"?e?((r=e[t])!==null&&r!==void 0||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t||[])}const S3=t=>t(),lf=(t,e,r=ir.duration)=>new Proxy({animations:t.map(S3).filter(Boolean),duration:r,options:e},D3),x3=t=>t.animations[0],D3={get:(t,e)=>{const r=x3(t);switch(e){case"duration":return t.duration;case"currentTime":return ki.s((r==null?void 0:r[e])||0);case"playbackRate":case"playState":return r==null?void 0:r[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(O3)).catch(Gd)),t.finished;case"stop":return()=>{t.animations.forEach(n=>cf(n))};case"forEachNative":return n=>{t.animations.forEach(i=>n(i,t))};default:return typeof(r==null?void 0:r[e])>"u"?void 0:()=>t.animations.forEach(n=>n[e]())}},set:(t,e,r)=>{switch(e){case"currentTime":r=ki.ms(r);case"currentTime":case"playbackRate":for(let n=0;n<t.animations.length;n++)t.animations[n][e]=r;return!0}return!1}},O3=t=>t.finished;function C3(t,e,r){return qn(t)?t(e,r):t}function I3(t){return function(r,n,i={}){r=E3(r);const s=r.length;oc(!!s,"No valid element provided."),oc(!!n,"No keyframes defined.");const o=[];for(let a=0;a<s;a++){const l=r[a];for(const h in n){const d=_3(i,h);d.delay=C3(d.delay,a,s);const w=b3(l,h,n[h],d,t);o.push(w)}}return lf(o,i,i.duration)}}const A3=I3(ef);function $3(t,e={}){return lf([()=>{const r=new ef(t,[0,1],e);return r.finished.catch(()=>{}),r}],e,e.duration)}function En(t,e,r){return(qn(t)?$3:A3)(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Bt=t=>t??bt;var Wi={},T3=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},uf={},Xt={};let fc;const R3=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Xt.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},Xt.getSymbolTotalCodewords=function(e){return R3[e]},Xt.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e},Xt.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');fc=e},Xt.isKanjiModeEnabled=function(){return typeof fc<"u"},Xt.toSJIS=function(e){return fc(e)};var zs={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(zs);function hf(){this.buffer=[],this.length=0}hf.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var P3=hf;function Hi(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Hi.prototype.set=function(t,e,r,n){const i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)},Hi.prototype.get=function(t,e){return this.data[t*this.size+e]},Hi.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r},Hi.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var N3=Hi,df={};(function(t){const e=Xt.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let l=1;l<i-1;l++)a[l]=a[l-1]-o;return a.push(6),a.reverse()},t.getPositions=function(n){const i=[],s=t.getRowColCoords(n),o=s.length;for(let a=0;a<o;a++)for(let l=0;l<o;l++)a===0&&l===0||a===0&&l===o-1||a===o-1&&l===0||i.push([s[a],s[l]]);return i}})(df);var ff={};const L3=Xt.getSymbolSize,pf=7;ff.getPositions=function(e){const r=L3(e);return[[0,0],[r-pf,0],[0,r-pf]]};var gf={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,l=0,h=null,d=null;for(let w=0;w<s;w++){a=l=0,h=d=null;for(let m=0;m<s;m++){let v=i.get(w,m);v===h?a++:(a>=5&&(o+=e.N1+(a-5)),h=v,a=1),v=i.get(m,w),v===d?l++:(l>=5&&(o+=e.N1+(l-5)),d=v,l=1)}a>=5&&(o+=e.N1+(a-5)),l>=5&&(o+=e.N1+(l-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let l=0;l<s-1;l++){const h=i.get(a,l)+i.get(a,l+1)+i.get(a+1,l)+i.get(a+1,l+1);(h===4||h===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,l=0;for(let h=0;h<s;h++){a=l=0;for(let d=0;d<s;d++)a=a<<1&2047|i.get(h,d),d>=10&&(a===1488||a===93)&&o++,l=l<<1&2047|i.get(d,h),d>=10&&(l===1488||l===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let l=0;l<o;l++)s+=i.data[l];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(n,i,s){switch(n){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let l=0;l<o;l++)s.isReserved(l,a)||s.xor(l,a,r(i,l,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,l=1/0;for(let h=0;h<o;h++){s(h),t.applyMask(h,i);const d=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(h,i),d<l&&(l=d,a=h)}return a}})(gf);var Ws={};const zr=zs,Hs=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Vs=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Ws.getBlocksCount=function(e,r){switch(r){case zr.L:return Hs[(e-1)*4+0];case zr.M:return Hs[(e-1)*4+1];case zr.Q:return Hs[(e-1)*4+2];case zr.H:return Hs[(e-1)*4+3];default:return}},Ws.getTotalCodewordsCount=function(e,r){switch(r){case zr.L:return Vs[(e-1)*4+0];case zr.M:return Vs[(e-1)*4+1];case zr.Q:return Vs[(e-1)*4+2];case zr.H:return Vs[(e-1)*4+3];default:return}};var mf={},Ks={};const Vi=new Uint8Array(512),qs=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)Vi[r]=e,qs[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)Vi[r]=Vi[r-255]})(),Ks.log=function(e){if(e<1)throw new Error("log("+e+")");return qs[e]},Ks.exp=function(e){return Vi[e]},Ks.mul=function(e,r){return e===0||r===0?0:Vi[qs[e]+qs[r]]},function(t){const e=Ks;t.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(n[o],i[a]);return s},t.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let l=0;l<i.length;l++)s[l]^=e.mul(i[l],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}}(mf);const wf=mf;function pc(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}pc.prototype.initialize=function(e){this.degree=e,this.genPoly=wf.generateECPolynomial(this.degree)},pc.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=wf.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(n,i),s}return n};var M3=pc,vf={},Wr={},gc={};gc.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var _r={};const yf="[0-9]+",U3="[A-Z $%*+\\-./:]+";let Ki="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Ki=Ki.replace(/u/g,"\\u");const j3="(?:(?![A-Z0-9 $%*+\\-./:]|"+Ki+`)(?:.|[\r
]))+`;_r.KANJI=new RegExp(Ki,"g"),_r.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),_r.BYTE=new RegExp(j3,"g"),_r.NUMERIC=new RegExp(yf,"g"),_r.ALPHANUMERIC=new RegExp(U3,"g");const F3=new RegExp("^"+Ki+"$"),k3=new RegExp("^"+yf+"$"),B3=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");_r.testKanji=function(e){return F3.test(e)},_r.testNumeric=function(e){return k3.test(e)},_r.testAlphanumeric=function(e){return B3.test(e)},function(t){const e=gc,r=_r;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return n(s)}catch{return o}}}(Wr),function(t){const e=Xt,r=Ws,n=zs,i=Wr,s=gc,o=7973,a=e.getBCHDigit(o);function l(m,v,b){for(let x=1;x<=40;x++)if(v<=t.getCapacity(x,b,m))return x}function h(m,v){return i.getCharCountIndicator(m,v)+4}function d(m,v){let b=0;return m.forEach(function(x){const C=h(x.mode,v);b+=C+x.getBitsLength()}),b}function w(m,v){for(let b=1;b<=40;b++)if(d(m,b)<=t.getCapacity(b,v,i.MIXED))return b}t.from=function(v,b){return s.isValid(v)?parseInt(v,10):b},t.getCapacity=function(v,b,x){if(!s.isValid(v))throw new Error("Invalid QR Code version");typeof x>"u"&&(x=i.BYTE);const C=e.getSymbolTotalCodewords(v),$=r.getTotalCodewordsCount(v,b),y=(C-$)*8;if(x===i.MIXED)return y;const E=y-h(x,v);switch(x){case i.NUMERIC:return Math.floor(E/10*3);case i.ALPHANUMERIC:return Math.floor(E/11*2);case i.KANJI:return Math.floor(E/13);case i.BYTE:default:return Math.floor(E/8)}},t.getBestVersionForData=function(v,b){let x;const C=n.from(b,n.M);if(Array.isArray(v)){if(v.length>1)return w(v,C);if(v.length===0)return 1;x=v[0]}else x=v;return l(x.mode,x.getLength(),C)},t.getEncodedBits=function(v){if(!s.isValid(v)||v<7)throw new Error("Invalid QR Code version");let b=v<<12;for(;e.getBCHDigit(b)-a>=0;)b^=o<<e.getBCHDigit(b)-a;return v<<12|b}}(vf);var bf={};const mc=Xt,_f=1335,z3=21522,Ef=mc.getBCHDigit(_f);bf.getEncodedBits=function(e,r){const n=e.bit<<3|r;let i=n<<10;for(;mc.getBCHDigit(i)-Ef>=0;)i^=_f<<mc.getBCHDigit(i)-Ef;return(n<<10|i)^z3};var Sf={};const W3=Wr;function Yn(t){this.mode=W3.NUMERIC,this.data=t.toString()}Yn.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},Yn.prototype.getLength=function(){return this.data.length},Yn.prototype.getBitsLength=function(){return Yn.getBitsLength(this.data.length)},Yn.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);const s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};var H3=Yn;const V3=Wr,wc=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Jn(t){this.mode=V3.ALPHANUMERIC,this.data=t}Jn.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},Jn.prototype.getLength=function(){return this.data.length},Jn.prototype.getBitsLength=function(){return Jn.getBitsLength(this.data.length)},Jn.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=wc.indexOf(this.data[r])*45;n+=wc.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(wc.indexOf(this.data[r]),6)};var K3=Jn,q3=function(e){for(var r=[],n=e.length,i=0;i<n;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&n>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){r.push(s);continue}if(s<2048){r.push(s>>6|192),r.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128);continue}if(s>=65536&&s<=1114111){r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const G3=q3,Y3=Wr;function Zn(t){this.mode=Y3.BYTE,typeof t=="string"&&(t=G3(t)),this.data=new Uint8Array(t)}Zn.getBitsLength=function(e){return e*8},Zn.prototype.getLength=function(){return this.data.length},Zn.prototype.getBitsLength=function(){return Zn.getBitsLength(this.data.length)},Zn.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var J3=Zn;const Z3=Wr,X3=Xt;function Xn(t){this.mode=Z3.KANJI,this.data=t}Xn.getBitsLength=function(e){return e*13},Xn.prototype.getLength=function(){return this.data.length},Xn.prototype.getBitsLength=function(){return Xn.getBitsLength(this.data.length)},Xn.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=X3.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var Q3=Xn,xf={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,i){var s={},o={};o[n]=0;var a=e.PriorityQueue.make();a.push(n,0);for(var l,h,d,w,m,v,b,x,C;!a.empty();){l=a.pop(),h=l.value,w=l.cost,m=r[h]||{};for(d in m)m.hasOwnProperty(d)&&(v=m[d],b=w+v,x=o[d],C=typeof o[d]>"u",(C||x>b)&&(o[d]=b,a.push(d,b),s[d]=h))}if(typeof i<"u"&&typeof o[i]>"u"){var $=["Could not find a path from ",n," to ",i,"."].join("");throw new Error($)}return s},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],s=n;s;)i.push(s),r[s],s=r[s];return i.reverse(),i},find_path:function(r,n,i){var s=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},s;r=r||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(xf);var e5=xf.exports;(function(t){const e=Wr,r=H3,n=K3,i=J3,s=Q3,o=_r,a=Xt,l=e5;function h($){return unescape(encodeURIComponent($)).length}function d($,y,E){const g=[];let S;for(;(S=$.exec(E))!==null;)g.push({data:S[0],index:S.index,mode:y,length:S[0].length});return g}function w($){const y=d(o.NUMERIC,e.NUMERIC,$),E=d(o.ALPHANUMERIC,e.ALPHANUMERIC,$);let g,S;return a.isKanjiModeEnabled()?(g=d(o.BYTE,e.BYTE,$),S=d(o.KANJI,e.KANJI,$)):(g=d(o.BYTE_KANJI,e.BYTE,$),S=[]),y.concat(E,g,S).sort(function(c,p){return c.index-p.index}).map(function(c){return{data:c.data,mode:c.mode,length:c.length}})}function m($,y){switch(y){case e.NUMERIC:return r.getBitsLength($);case e.ALPHANUMERIC:return n.getBitsLength($);case e.KANJI:return s.getBitsLength($);case e.BYTE:return i.getBitsLength($)}}function v($){return $.reduce(function(y,E){const g=y.length-1>=0?y[y.length-1]:null;return g&&g.mode===E.mode?(y[y.length-1].data+=E.data,y):(y.push(E),y)},[])}function b($){const y=[];for(let E=0;E<$.length;E++){const g=$[E];switch(g.mode){case e.NUMERIC:y.push([g,{data:g.data,mode:e.ALPHANUMERIC,length:g.length},{data:g.data,mode:e.BYTE,length:g.length}]);break;case e.ALPHANUMERIC:y.push([g,{data:g.data,mode:e.BYTE,length:g.length}]);break;case e.KANJI:y.push([g,{data:g.data,mode:e.BYTE,length:h(g.data)}]);break;case e.BYTE:y.push([{data:g.data,mode:e.BYTE,length:h(g.data)}])}}return y}function x($,y){const E={},g={start:{}};let S=["start"];for(let f=0;f<$.length;f++){const c=$[f],p=[];for(let P=0;P<c.length;P++){const A=c[P],U=""+f+P;p.push(U),E[U]={node:A,lastCount:0},g[U]={};for(let B=0;B<S.length;B++){const V=S[B];E[V]&&E[V].node.mode===A.mode?(g[V][U]=m(E[V].lastCount+A.length,A.mode)-m(E[V].lastCount,A.mode),E[V].lastCount+=A.length):(E[V]&&(E[V].lastCount=A.length),g[V][U]=m(A.length,A.mode)+4+e.getCharCountIndicator(A.mode,y))}}S=p}for(let f=0;f<S.length;f++)g[S[f]].end=0;return{map:g,table:E}}function C($,y){let E;const g=e.getBestModeForData($);if(E=e.from(y,g),E!==e.BYTE&&E.bit<g.bit)throw new Error('"'+$+'" cannot be encoded with mode '+e.toString(E)+`.
 Suggested mode is: `+e.toString(g));switch(E===e.KANJI&&!a.isKanjiModeEnabled()&&(E=e.BYTE),E){case e.NUMERIC:return new r($);case e.ALPHANUMERIC:return new n($);case e.KANJI:return new s($);case e.BYTE:return new i($)}}t.fromArray=function(y){return y.reduce(function(E,g){return typeof g=="string"?E.push(C(g,null)):g.data&&E.push(C(g.data,g.mode)),E},[])},t.fromString=function(y,E){const g=w(y,a.isKanjiModeEnabled()),S=b(g),f=x(S,E),c=l.find_path(f.map,"start","end"),p=[];for(let P=1;P<c.length-1;P++)p.push(f.table[c[P]].node);return t.fromArray(v(p))},t.rawSplit=function(y){return t.fromArray(w(y,a.isKanjiModeEnabled()))}})(Sf);const Gs=Xt,vc=zs,t5=P3,r5=N3,n5=df,i5=ff,yc=gf,bc=Ws,s5=M3,Ys=vf,o5=bf,a5=Wr,_c=Sf;function c5(t,e){const r=t.size,n=i5.getPositions(e);for(let i=0;i<n.length;i++){const s=n[i][0],o=n[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||r<=s+a))for(let l=-1;l<=7;l++)o+l<=-1||r<=o+l||(a>=0&&a<=6&&(l===0||l===6)||l>=0&&l<=6&&(a===0||a===6)||a>=2&&a<=4&&l>=2&&l<=4?t.set(s+a,o+l,!0,!0):t.set(s+a,o+l,!1,!0))}}function l5(t){const e=t.size;for(let r=8;r<e-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function u5(t,e){const r=n5.getPositions(e);for(let n=0;n<r.length;n++){const i=r[n][0],s=r[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function h5(t,e){const r=t.size,n=Ys.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+r-8-3,o=(n>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function Ec(t,e,r){const n=t.size,i=o5.getEncodedBits(e,r);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(n-15+s,8,o,!0),s<8?t.set(8,n-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(n-8,8,1,!0)}function d5(t,e){const r=t.size;let n=-1,i=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let l=0;l<2;l++)if(!t.isReserved(i,a-l)){let h=!1;o<e.length&&(h=(e[o]>>>s&1)===1),t.set(i,a-l,h),s--,s===-1&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function f5(t,e,r){const n=new t5;r.forEach(function(l){n.put(l.mode.bit,4),n.put(l.getLength(),a5.getCharCountIndicator(l.mode,t)),l.write(n)});const i=Gs.getSymbolTotalCodewords(t),s=bc.getTotalCodewordsCount(t,e),o=(i-s)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let l=0;l<a;l++)n.put(l%2?17:236,8);return p5(n,t,e)}function p5(t,e,r){const n=Gs.getSymbolTotalCodewords(e),i=bc.getTotalCodewordsCount(e,r),s=n-i,o=bc.getBlocksCount(e,r),a=n%o,l=o-a,h=Math.floor(n/o),d=Math.floor(s/o),w=d+1,m=h-d,v=new s5(m);let b=0;const x=new Array(o),C=new Array(o);let $=0;const y=new Uint8Array(t.buffer);for(let c=0;c<o;c++){const p=c<l?d:w;x[c]=y.slice(b,b+p),C[c]=v.encode(x[c]),b+=p,$=Math.max($,p)}const E=new Uint8Array(n);let g=0,S,f;for(S=0;S<$;S++)for(f=0;f<o;f++)S<x[f].length&&(E[g++]=x[f][S]);for(S=0;S<m;S++)for(f=0;f<o;f++)E[g++]=C[f][S];return E}function g5(t,e,r,n){let i;if(Array.isArray(t))i=_c.fromArray(t);else if(typeof t=="string"){let h=e;if(!h){const d=_c.rawSplit(t);h=Ys.getBestVersionForData(d,r)}i=_c.fromString(t,h||40)}else throw new Error("Invalid data");const s=Ys.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=f5(e,r,i),a=Gs.getSymbolSize(e),l=new r5(a);return c5(l,e),l5(l),u5(l,e),Ec(l,r,0),e>=7&&h5(l,e),d5(l,o),isNaN(n)&&(n=yc.getBestMask(l,Ec.bind(null,l,r))),yc.applyMask(n,l),Ec(l,r,n),{modules:l,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}uf.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=vc.M,i,s;return typeof r<"u"&&(n=vc.from(r.errorCorrectionLevel,vc.M),i=Ys.from(r.version),s=yc.from(r.maskPattern),r.toSJISFunc&&Gs.setToSJISFunction(r.toSJISFunc)),g5(e,i,n,s)};var Df={},Sc={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const s=t.getScale(n,i);return Math.floor((n+i.margin*2)*s)},t.qrToImageData=function(n,i,s){const o=i.modules.size,a=i.modules.data,l=t.getScale(o,s),h=Math.floor((o+s.margin*2)*l),d=s.margin*l,w=[s.color.light,s.color.dark];for(let m=0;m<h;m++)for(let v=0;v<h;v++){let b=(m*h+v)*4,x=s.color.light;if(m>=d&&v>=d&&m<h-d&&v<h-d){const C=Math.floor((m-d)/l),$=Math.floor((v-d)/l);x=w[a[C*o+$]?1:0]}n[b++]=x.r,n[b++]=x.g,n[b++]=x.b,n[b]=x.a}}})(Sc),function(t){const e=Sc;function r(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let l=a,h=o;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),o||(h=n()),l=e.getOptions(l);const d=e.getImageWidth(s.modules.size,l),w=h.getContext("2d"),m=w.createImageData(d,d);return e.qrToImageData(m.data,s,l),r(w,h,d),w.putImageData(m,0,0),h},t.renderToDataURL=function(s,o,a){let l=a;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),l||(l={});const h=t.render(s,o,l),d=l.type||"image/png",w=l.rendererOpts||{};return h.toDataURL(d,w.quality)}}(Df);var Of={};const m5=Sc;function Cf(t,e){const r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function xc(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function w5(t,e,r){let n="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const l=Math.floor(a%e),h=Math.floor(a/e);!l&&!s&&(s=!0),t[a]?(o++,a>0&&l>0&&t[a-1]||(n+=s?xc("M",l+r,.5+h+r):xc("m",i,0),i=0,s=!1),l+1<e&&t[a+1]||(n+=xc("h",o),o=0)):i++}return n}Of.render=function(e,r,n){const i=m5.getOptions(r),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,l=i.color.light.a?"<path "+Cf(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",h="<path "+Cf(i.color.dark,"stroke")+' d="'+w5(o,s,i.margin)+'"/>',d='viewBox="0 0 '+a+" "+a+'"',m='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+l+h+`</svg>
`;return typeof n=="function"&&n(null,m),m};const v5=T3,Dc=uf,If=Df,y5=Of;function Oc(t,e,r,n,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!v5())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(l,h){try{const d=Dc.create(r,n);l(t(d,e,n))}catch(d){h(d)}})}try{const l=Dc.create(r,n);i(null,t(l,e,n))}catch(l){i(l)}}Wi.create=Dc.create,Wi.toCanvas=Oc.bind(null,If.render),Wi.toDataURL=Oc.bind(null,If.renderToDataURL),Wi.toString=Oc.bind(null,function(t,e,r){return y5.render(t,r)});var b5=Object.defineProperty,Af=Object.getOwnPropertySymbols,_5=Object.prototype.hasOwnProperty,E5=Object.prototype.propertyIsEnumerable,$f=(t,e,r)=>e in t?b5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Cc=(t,e)=>{for(var r in e||(e={}))_5.call(e,r)&&$f(t,r,e[r]);if(Af)for(var r of Af(e))E5.call(e,r)&&$f(t,r,e[r]);return t};function S5(){var t;const e=(t=Nr.state.themeMode)!=null?t:"dark",r={light:{foreground:{1:"rgb(20,20,20)",2:"rgb(121,134,134)",3:"rgb(158,169,169)"},background:{1:"rgb(255,255,255)",2:"rgb(241,243,243)",3:"rgb(228,231,231)"},overlay:"rgba(0,0,0,0.1)"},dark:{foreground:{1:"rgb(228,231,231)",2:"rgb(148,158,158)",3:"rgb(110,119,119)"},background:{1:"rgb(20,20,20)",2:"rgb(39,42,42)",3:"rgb(59,64,64)"},overlay:"rgba(255,255,255,0.1)"}}[e];return{"--wcm-color-fg-1":r.foreground[1],"--wcm-color-fg-2":r.foreground[2],"--wcm-color-fg-3":r.foreground[3],"--wcm-color-bg-1":r.background[1],"--wcm-color-bg-2":r.background[2],"--wcm-color-bg-3":r.background[3],"--wcm-color-overlay":r.overlay}}function Tf(){return{"--wcm-accent-color":"#3396FF","--wcm-accent-fill-color":"#FFFFFF","--wcm-z-index":"89","--wcm-background-color":"#3396FF","--wcm-background-border-radius":"8px","--wcm-container-border-radius":"30px","--wcm-wallet-icon-border-radius":"15px","--wcm-wallet-icon-large-border-radius":"30px","--wcm-wallet-icon-small-border-radius":"7px","--wcm-input-border-radius":"28px","--wcm-button-border-radius":"10px","--wcm-notification-border-radius":"36px","--wcm-secondary-button-border-radius":"28px","--wcm-icon-button-border-radius":"50%","--wcm-button-hover-highlight-border-radius":"10px","--wcm-text-big-bold-size":"20px","--wcm-text-big-bold-weight":"600","--wcm-text-big-bold-line-height":"24px","--wcm-text-big-bold-letter-spacing":"-0.03em","--wcm-text-big-bold-text-transform":"none","--wcm-text-xsmall-bold-size":"10px","--wcm-text-xsmall-bold-weight":"700","--wcm-text-xsmall-bold-line-height":"12px","--wcm-text-xsmall-bold-letter-spacing":"0.02em","--wcm-text-xsmall-bold-text-transform":"uppercase","--wcm-text-xsmall-regular-size":"12px","--wcm-text-xsmall-regular-weight":"600","--wcm-text-xsmall-regular-line-height":"14px","--wcm-text-xsmall-regular-letter-spacing":"-0.03em","--wcm-text-xsmall-regular-text-transform":"none","--wcm-text-small-thin-size":"14px","--wcm-text-small-thin-weight":"500","--wcm-text-small-thin-line-height":"16px","--wcm-text-small-thin-letter-spacing":"-0.03em","--wcm-text-small-thin-text-transform":"none","--wcm-text-small-regular-size":"14px","--wcm-text-small-regular-weight":"600","--wcm-text-small-regular-line-height":"16px","--wcm-text-small-regular-letter-spacing":"-0.03em","--wcm-text-small-regular-text-transform":"none","--wcm-text-medium-regular-size":"16px","--wcm-text-medium-regular-weight":"600","--wcm-text-medium-regular-line-height":"20px","--wcm-text-medium-regular-letter-spacing":"-0.03em","--wcm-text-medium-regular-text-transform":"none","--wcm-font-family":"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', sans-serif","--wcm-font-feature-settings":"'tnum' on, 'lnum' on, 'case' on","--wcm-success-color":"rgb(38,181,98)","--wcm-error-color":"rgb(242, 90, 103)","--wcm-overlay-background-color":"rgba(0, 0, 0, 0.3)","--wcm-overlay-backdrop-filter":"none"}}const Re={getPreset(t){return Tf()[t]},setTheme(){const t=document.querySelector(":root"),{themeVariables:e}=Nr.state;if(t){const r=Cc(Cc(Cc({},S5()),Tf()),e);Object.entries(r).forEach(([n,i])=>t.style.setProperty(n,i))}},globalCss:ze`*,::after,::before{margin:0;padding:0;box-sizing:border-box;font-style:normal;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;backface-visibility:hidden}button{cursor:pointer;display:flex;justify-content:center;align-items:center;position:relative;border:none;background-color:transparent;transition:all .2s ease}@media (hover:hover) and (pointer:fine){button:active{transition:all .1s ease;transform:scale(.93)}}button::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;transition:background-color,.2s ease}button:disabled{cursor:not-allowed}button svg,button wcm-text{position:relative;z-index:1}input{border:none;outline:0;appearance:none}img{display:block}::selection{color:var(--wcm-accent-fill-color);background:var(--wcm-accent-color)}`},x5=ze`button{border-radius:var(--wcm-secondary-button-border-radius);height:28px;padding:0 10px;background-color:var(--wcm-accent-color)}button path{fill:var(--wcm-accent-fill-color)}button::after{border-radius:inherit;border:1px solid var(--wcm-color-overlay)}button:disabled::after{background-color:transparent}.wcm-icon-left svg{margin-right:5px}.wcm-icon-right svg{margin-left:5px}button:active::after{background-color:var(--wcm-color-overlay)}.wcm-ghost,.wcm-ghost:active::after,.wcm-outline{background-color:transparent}.wcm-ghost:active{opacity:.5}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}.wcm-ghost:hover::after{background-color:transparent}.wcm-ghost:hover{opacity:.5}}button:disabled{background-color:var(--wcm-color-bg-3);pointer-events:none}.wcm-ghost::after{border-color:transparent}.wcm-ghost path{fill:var(--wcm-color-fg-2)}.wcm-outline path{fill:var(--wcm-accent-color)}.wcm-outline:disabled{background-color:transparent;opacity:.5}`;var D5=Object.defineProperty,O5=Object.getOwnPropertyDescriptor,Qn=(t,e,r,n)=>{for(var i=n>1?void 0:n?O5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&D5(e,r,i),i};let Hr=class extends Ee{constructor(){super(...arguments),this.disabled=!1,this.iconLeft=void 0,this.iconRight=void 0,this.onClick=()=>null,this.variant="default"}render(){const t={"wcm-icon-left":this.iconLeft!==void 0,"wcm-icon-right":this.iconRight!==void 0,"wcm-ghost":this.variant==="ghost","wcm-outline":this.variant==="outline"};let e="inverse";return this.variant==="ghost"&&(e="secondary"),this.variant==="outline"&&(e="accent"),J`<button class="${Ir(t)}" ?disabled="${this.disabled}" @click="${this.onClick}">${this.iconLeft}<wcm-text variant="small-regular" color="${e}"><slot></slot></wcm-text>${this.iconRight}</button>`}};Hr.styles=[Re.globalCss,x5],Qn([pe({type:Boolean})],Hr.prototype,"disabled",2),Qn([pe()],Hr.prototype,"iconLeft",2),Qn([pe()],Hr.prototype,"iconRight",2),Qn([pe()],Hr.prototype,"onClick",2),Qn([pe()],Hr.prototype,"variant",2),Hr=Qn([Pe("wcm-button")],Hr);const C5=ze`:host{display:inline-block}button{padding:0 15px 1px;height:40px;border-radius:var(--wcm-button-border-radius);color:var(--wcm-accent-fill-color);background-color:var(--wcm-accent-color)}button::after{content:'';top:0;bottom:0;left:0;right:0;position:absolute;background-color:transparent;border-radius:inherit;transition:background-color .2s ease;border:1px solid var(--wcm-color-overlay)}button:active::after{background-color:var(--wcm-color-overlay)}button:disabled{padding-bottom:0;background-color:var(--wcm-color-bg-3);color:var(--wcm-color-fg-3)}.wcm-secondary{color:var(--wcm-accent-color);background-color:transparent}.wcm-secondary::after{display:none}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}}`;var I5=Object.defineProperty,A5=Object.getOwnPropertyDescriptor,Ic=(t,e,r,n)=>{for(var i=n>1?void 0:n?A5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&I5(e,r,i),i};let qi=class extends Ee{constructor(){super(...arguments),this.disabled=!1,this.variant="primary"}render(){const t={"wcm-secondary":this.variant==="secondary"};return J`<button ?disabled="${this.disabled}" class="${Ir(t)}"><slot></slot></button>`}};qi.styles=[Re.globalCss,C5],Ic([pe({type:Boolean})],qi.prototype,"disabled",2),Ic([pe()],qi.prototype,"variant",2),qi=Ic([Pe("wcm-button-big")],qi);const $5=ze`:host{background-color:var(--wcm-color-bg-2);border-top:1px solid var(--wcm-color-bg-3)}div{padding:10px 20px;display:inherit;flex-direction:inherit;align-items:inherit;width:inherit;justify-content:inherit}`;var T5=Object.defineProperty,R5=Object.getOwnPropertyDescriptor,P5=(t,e,r,n)=>{for(var i=n>1?void 0:n?R5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&T5(e,r,i),i};let Ac=class extends Ee{render(){return J`<div><slot></slot></div>`}};Ac.styles=[Re.globalCss,$5],Ac=P5([Pe("wcm-info-footer")],Ac);const We={CROSS_ICON:it`<svg width="12" height="12" viewBox="0 0 12 12"><path d="M9.94 11A.75.75 0 1 0 11 9.94L7.414 6.353a.5.5 0 0 1 0-.708L11 2.061A.75.75 0 1 0 9.94 1L6.353 4.586a.5.5 0 0 1-.708 0L2.061 1A.75.75 0 0 0 1 2.06l3.586 3.586a.5.5 0 0 1 0 .708L1 9.939A.75.75 0 1 0 2.06 11l3.586-3.586a.5.5 0 0 1 .708 0L9.939 11Z" fill="#fff"/></svg>`,WALLET_CONNECT_LOGO:it`<svg width="178" height="29" viewBox="0 0 178 29" id="wcm-wc-logo"><path d="M10.683 7.926c5.284-5.17 13.85-5.17 19.134 0l.636.623a.652.652 0 0 1 0 .936l-2.176 2.129a.343.343 0 0 1-.478 0l-.875-.857c-3.686-3.607-9.662-3.607-13.348 0l-.937.918a.343.343 0 0 1-.479 0l-2.175-2.13a.652.652 0 0 1 0-.936l.698-.683Zm23.633 4.403 1.935 1.895a.652.652 0 0 1 0 .936l-8.73 8.543a.687.687 0 0 1-.956 0L20.37 17.64a.172.172 0 0 0-.239 0l-6.195 6.063a.687.687 0 0 1-.957 0l-8.73-8.543a.652.652 0 0 1 0-.936l1.936-1.895a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .239 0l6.195-6.064a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .24 0l6.195-6.064a.687.687 0 0 1 .956 0ZM48.093 20.948l2.338-9.355c.139-.515.258-1.07.416-1.942.12.872.258 1.427.357 1.942l2.022 9.355h4.181l3.528-13.874h-3.21l-1.943 8.523a24.825 24.825 0 0 0-.456 2.457c-.158-.931-.317-1.625-.495-2.438l-1.883-8.542h-4.201l-2.042 8.542a41.204 41.204 0 0 0-.475 2.438 41.208 41.208 0 0 0-.476-2.438l-1.903-8.542h-3.349l3.508 13.874h4.083ZM63.33 21.304c1.585 0 2.596-.654 3.11-1.605-.059.297-.078.595-.078.892v.357h2.655V15.22c0-2.735-1.248-4.32-4.3-4.32-2.636 0-4.36 1.466-4.52 3.487h2.914c.1-.891.734-1.426 1.705-1.426.911 0 1.407.515 1.407 1.11 0 .435-.258.693-1.03.792l-1.388.159c-2.061.257-3.825 1.01-3.825 3.19 0 1.982 1.645 3.092 3.35 3.092Zm.891-2.041c-.773 0-1.348-.436-1.348-1.19 0-.733.655-1.09 1.645-1.268l.674-.119c.575-.118.892-.218 1.09-.396v.912c0 1.228-.892 2.06-2.06 2.06ZM70.398 7.074v13.874h2.874V7.074h-2.874ZM74.934 7.074v13.874h2.874V7.074h-2.874ZM84.08 21.304c2.735 0 4.5-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922H81.92ZM94.92 21.146c.633 0 1.248-.1 1.525-.179v-2.18c-.218.04-.475.06-.693.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.338v-2.24h-2.338V7.788H91.47v3.448H89.37v2.24h2.1v4.201c0 2.3 1.15 3.469 3.45 3.469ZM104.62 21.304c3.924 0 6.302-2.299 6.599-5.608h-3.111c-.238 1.803-1.506 3.032-3.369 3.032-2.2 0-3.746-1.784-3.746-4.796 0-2.953 1.605-4.638 3.805-4.638 1.883 0 2.953 1.15 3.171 2.834h3.191c-.317-3.448-2.854-5.41-6.342-5.41-3.984 0-7.036 2.695-7.036 7.214 0 4.677 2.676 7.372 6.838 7.372ZM117.449 21.304c2.993 0 5.114-1.882 5.114-5.172 0-3.23-2.121-5.233-5.114-5.233-2.972 0-5.093 2.002-5.093 5.233 0 3.29 2.101 5.172 5.093 5.172Zm0-2.22c-1.327 0-2.18-1.09-2.18-2.952 0-1.903.892-2.973 2.18-2.973 1.308 0 2.2 1.07 2.2 2.973 0 1.862-.872 2.953-2.2 2.953ZM126.569 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.229-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM137.464 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.228-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM149.949 21.304c2.735 0 4.499-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922h-3.984ZM160.876 21.304c3.013 0 4.658-1.645 4.975-4.201h-2.874c-.099 1.07-.713 1.982-2.001 1.982-1.309 0-2.2-1.21-2.2-2.993 0-1.942 1.03-2.933 2.259-2.933 1.209 0 1.803.872 1.883 1.882h2.873c-.218-2.358-1.823-4.142-4.776-4.142-2.874 0-5.153 1.903-5.153 5.193 0 3.25 1.923 5.212 5.014 5.212ZM172.067 21.146c.634 0 1.248-.1 1.526-.179v-2.18c-.218.04-.476.06-.694.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.339v-2.24h-2.339V7.788h-2.854v3.448h-2.1v2.24h2.1v4.201c0 2.3 1.15 3.469 3.449 3.469Z" fill="#fff"/></svg>`,WALLET_CONNECT_ICON:it`<svg width="28" height="20" viewBox="0 0 28 20"><g clip-path="url(#a)"><path d="M7.386 6.482c3.653-3.576 9.575-3.576 13.228 0l.44.43a.451.451 0 0 1 0 .648L19.55 9.033a.237.237 0 0 1-.33 0l-.606-.592c-2.548-2.496-6.68-2.496-9.228 0l-.648.634a.237.237 0 0 1-.33 0L6.902 7.602a.451.451 0 0 1 0-.647l.483-.473Zm16.338 3.046 1.339 1.31a.451.451 0 0 1 0 .648l-6.035 5.909a.475.475 0 0 1-.662 0L14.083 13.2a.119.119 0 0 0-.166 0l-4.283 4.194a.475.475 0 0 1-.662 0l-6.035-5.91a.451.451 0 0 1 0-.647l1.338-1.31a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0Z" fill="#000000"/></g><defs><clipPath id="a"><path fill="#ffffff" d="M0 0h28v20H0z"/></clipPath></defs></svg>`,WALLET_CONNECT_ICON_COLORED:it`<svg width="96" height="96" fill="none"><path fill="#fff" d="M25.322 33.597c12.525-12.263 32.83-12.263 45.355 0l1.507 1.476a1.547 1.547 0 0 1 0 2.22l-5.156 5.048a.814.814 0 0 1-1.134 0l-2.074-2.03c-8.737-8.555-22.903-8.555-31.64 0l-2.222 2.175a.814.814 0 0 1-1.134 0l-5.156-5.049a1.547 1.547 0 0 1 0-2.22l1.654-1.62Zm56.019 10.44 4.589 4.494a1.547 1.547 0 0 1 0 2.22l-20.693 20.26a1.628 1.628 0 0 1-2.267 0L48.283 56.632a.407.407 0 0 0-.567 0L33.03 71.012a1.628 1.628 0 0 1-2.268 0L10.07 50.75a1.547 1.547 0 0 1 0-2.22l4.59-4.494a1.628 1.628 0 0 1 2.267 0l14.687 14.38c.156.153.41.153.567 0l14.685-14.38a1.628 1.628 0 0 1 2.268 0l14.687 14.38c.156.153.41.153.567 0l14.686-14.38a1.628 1.628 0 0 1 2.268 0Z"/><path stroke="#000" d="M25.672 33.954c12.33-12.072 32.325-12.072 44.655 0l1.508 1.476a1.047 1.047 0 0 1 0 1.506l-5.157 5.048a.314.314 0 0 1-.434 0l-2.074-2.03c-8.932-8.746-23.409-8.746-32.34 0l-2.222 2.174a.314.314 0 0 1-.434 0l-5.157-5.048a1.047 1.047 0 0 1 0-1.506l1.655-1.62Zm55.319 10.44 4.59 4.494a1.047 1.047 0 0 1 0 1.506l-20.694 20.26a1.128 1.128 0 0 1-1.568 0l-14.686-14.38a.907.907 0 0 0-1.267 0L32.68 70.655a1.128 1.128 0 0 1-1.568 0L10.42 50.394a1.047 1.047 0 0 1 0-1.506l4.59-4.493a1.128 1.128 0 0 1 1.567 0l14.687 14.379a.907.907 0 0 0 1.266 0l-.35-.357.35.357 14.686-14.38a1.128 1.128 0 0 1 1.568 0l14.687 14.38a.907.907 0 0 0 1.267 0l14.686-14.38a1.128 1.128 0 0 1 1.568 0Z"/></svg>`,BACK_ICON:it`<svg width="10" height="18" viewBox="0 0 10 18"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.735.179a.75.75 0 0 1 .087 1.057L2.92 8.192a1.25 1.25 0 0 0 0 1.617l5.902 6.956a.75.75 0 1 1-1.144.97L1.776 10.78a2.75 2.75 0 0 1 0-3.559L7.678.265A.75.75 0 0 1 8.735.18Z" fill="#fff"/></svg>`,COPY_ICON:it`<svg width="24" height="24" fill="none"><path fill="#fff" fill-rule="evenodd" d="M7.01 7.01c.03-1.545.138-2.5.535-3.28A5 5 0 0 1 9.73 1.545C10.8 1 12.2 1 15 1c2.8 0 4.2 0 5.27.545a5 5 0 0 1 2.185 2.185C23 4.8 23 6.2 23 9c0 2.8 0 4.2-.545 5.27a5 5 0 0 1-2.185 2.185c-.78.397-1.735.505-3.28.534l-.001.01c-.03 1.54-.138 2.493-.534 3.27a5 5 0 0 1-2.185 2.186C13.2 23 11.8 23 9 23c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C1 19.2 1 17.8 1 15c0-2.8 0-4.2.545-5.27A5 5 0 0 1 3.73 7.545C4.508 7.149 5.46 7.04 7 7.01h.01ZM15 15.5c-1.425 0-2.403-.001-3.162-.063-.74-.06-1.139-.172-1.427-.319a3.5 3.5 0 0 1-1.53-1.529c-.146-.288-.257-.686-.318-1.427C8.501 11.403 8.5 10.425 8.5 9c0-1.425.001-2.403.063-3.162.06-.74.172-1.139.318-1.427a3.5 3.5 0 0 1 1.53-1.53c.288-.146.686-.257 1.427-.318.759-.062 1.737-.063 3.162-.063 1.425 0 2.403.001 3.162.063.74.06 1.139.172 1.427.318a3.5 3.5 0 0 1 1.53 1.53c.146.288.257.686.318 1.427.062.759.063 1.737.063 3.162 0 1.425-.001 2.403-.063 3.162-.06.74-.172 1.139-.319 1.427a3.5 3.5 0 0 1-1.529 1.53c-.288.146-.686.257-1.427.318-.759.062-1.737.063-3.162.063ZM7 8.511c-.444.009-.825.025-1.162.052-.74.06-1.139.172-1.427.318a3.5 3.5 0 0 0-1.53 1.53c-.146.288-.257.686-.318 1.427-.062.759-.063 1.737-.063 3.162 0 1.425.001 2.403.063 3.162.06.74.172 1.139.318 1.427a3.5 3.5 0 0 0 1.53 1.53c.288.146.686.257 1.427.318.759.062 1.737.063 3.162.063 1.425 0 2.403-.001 3.162-.063.74-.06 1.139-.172 1.427-.319a3.5 3.5 0 0 0 1.53-1.53c.146-.287.257-.685.318-1.426.027-.337.043-.718.052-1.162H15c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C7 13.2 7 11.8 7 9v-.489Z" clip-rule="evenodd"/></svg>`,RETRY_ICON:it`<svg width="15" height="16" viewBox="0 0 15 16"><path d="M6.464 2.03A.75.75 0 0 0 5.403.97L2.08 4.293a1 1 0 0 0 0 1.414L5.403 9.03a.75.75 0 0 0 1.06-1.06L4.672 6.177a.25.25 0 0 1 .177-.427h2.085a4 4 0 1 1-3.93 4.746c-.077-.407-.405-.746-.82-.746-.414 0-.755.338-.7.748a5.501 5.501 0 1 0 5.45-6.248H4.848a.25.25 0 0 1-.177-.427L6.464 2.03Z" fill="#fff"/></svg>`,DESKTOP_ICON:it`<svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C2.204 1 3.13 1 4.98 1h6.04c1.85 0 2.775 0 3.466.394a3 3 0 0 1 1.12 1.12C16 3.204 16 4.13 16 5.98v1.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C13.796 12 12.87 12 11.02 12H4.98c-1.85 0-2.775 0-3.466-.394a3 3 0 0 1-1.12-1.12C0 9.796 0 8.87 0 7.02V5.98ZM4.98 2.5h6.04c.953 0 1.568.001 2.034.043.446.04.608.108.69.154a1.5 1.5 0 0 1 .559.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033v1.04c0 .952-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.046-.243.114-.69.154-.466.042-1.08.043-2.033.043H4.98c-.952 0-1.568-.001-2.034-.043-.446-.04-.608-.108-.69-.154a1.5 1.5 0 0 1-.559-.56c-.046-.08-.114-.243-.154-.69-.042-.465-.043-1.08-.043-2.033V5.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.046.243-.114.69-.154.465-.042 1.08-.043 2.033-.043Z" fill="#fff"/><path d="M4 14.25a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,MOBILE_ICON:it`<svg width="16" height="16" viewBox="0 0 16 16"><path d="M6.75 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C5.204 0 6.136 0 8 0s2.795 0 3.486.394a3 3 0 0 1 1.12 1.12C13 2.204 13 3.13 13 4.98v6.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C10.796 16 9.864 16 8 16s-2.795 0-3.486-.394a3 3 0 0 1-1.12-1.12C3 13.796 3 12.87 3 11.02V4.98Zm8.5 0v6.04c0 .953-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.045-.242.113-.693.154-.47.042-1.091.043-2.05.043-.959 0-1.58-.001-2.05-.043-.45-.04-.613-.109-.693-.154a1.5 1.5 0 0 1-.56-.56c-.046-.08-.114-.243-.154-.69-.042-.466-.043-1.08-.043-2.033V4.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.045.243-.113.693-.154C6.42 1.501 7.041 1.5 8 1.5c.959 0 1.58.001 2.05.043.45.04.613.109.693.154a1.5 1.5 0 0 1 .56.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033Z" fill="#fff"/></svg>`,ARROW_DOWN_ICON:it`<svg width="14" height="14" viewBox="0 0 14 14"><path d="M2.28 7.47a.75.75 0 0 0-1.06 1.06l5.25 5.25a.75.75 0 0 0 1.06 0l5.25-5.25a.75.75 0 0 0-1.06-1.06l-3.544 3.543a.25.25 0 0 1-.426-.177V.75a.75.75 0 0 0-1.5 0v10.086a.25.25 0 0 1-.427.176L2.28 7.47Z" fill="#fff"/></svg>`,ARROW_UP_RIGHT_ICON:it`<svg width="15" height="14" fill="none"><path d="M4.5 1.75A.75.75 0 0 1 5.25 1H12a1.5 1.5 0 0 1 1.5 1.5v6.75a.75.75 0 0 1-1.5 0V4.164a.25.25 0 0 0-.427-.176L4.061 11.5A.75.75 0 0 1 3 10.44l7.513-7.513a.25.25 0 0 0-.177-.427H5.25a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,ARROW_RIGHT_ICON:it`<svg width="6" height="14" viewBox="0 0 6 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.181 1.099a.75.75 0 0 1 1.024.279l2.433 4.258a2.75 2.75 0 0 1 0 2.729l-2.433 4.257a.75.75 0 1 1-1.303-.744L4.335 7.62a1.25 1.25 0 0 0 0-1.24L1.902 2.122a.75.75 0 0 1 .28-1.023Z" fill="#fff"/></svg>`,QRCODE_ICON:it`<svg width="25" height="24" viewBox="0 0 25 24"><path d="M23.748 9a.748.748 0 0 0 .748-.752c-.018-2.596-.128-4.07-.784-5.22a6 6 0 0 0-2.24-2.24c-1.15-.656-2.624-.766-5.22-.784a.748.748 0 0 0-.752.748c0 .414.335.749.748.752 1.015.007 1.82.028 2.494.088.995.09 1.561.256 1.988.5.7.398 1.28.978 1.679 1.678.243.427.41.993.498 1.988.061.675.082 1.479.09 2.493a.753.753 0 0 0 .75.749ZM3.527.788C4.677.132 6.152.022 8.747.004A.748.748 0 0 1 9.5.752a.753.753 0 0 1-.749.752c-1.014.007-1.818.028-2.493.088-.995.09-1.561.256-1.988.5-.7.398-1.28.978-1.679 1.678-.243.427-.41.993-.499 1.988-.06.675-.081 1.479-.088 2.493A.753.753 0 0 1 1.252 9a.748.748 0 0 1-.748-.752c.018-2.596.128-4.07.784-5.22a6 6 0 0 1 2.24-2.24ZM1.252 15a.748.748 0 0 0-.748.752c.018 2.596.128 4.07.784 5.22a6 6 0 0 0 2.24 2.24c1.15.656 2.624.766 5.22.784a.748.748 0 0 0 .752-.748.753.753 0 0 0-.749-.752c-1.014-.007-1.818-.028-2.493-.089-.995-.089-1.561-.255-1.988-.498a4.5 4.5 0 0 1-1.679-1.68c-.243-.426-.41-.992-.499-1.987-.06-.675-.081-1.479-.088-2.493A.753.753 0 0 0 1.252 15ZM22.996 15.749a.753.753 0 0 1 .752-.749c.415 0 .751.338.748.752-.018 2.596-.128 4.07-.784 5.22a6 6 0 0 1-2.24 2.24c-1.15.656-2.624.766-5.22.784a.748.748 0 0 1-.752-.748c0-.414.335-.749.748-.752 1.015-.007 1.82-.028 2.494-.089.995-.089 1.561-.255 1.988-.498a4.5 4.5 0 0 0 1.679-1.68c.243-.426.41-.992.498-1.987.061-.675.082-1.479.09-2.493Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 4a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 11h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 4H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM13.5 6.5A2.5 2.5 0 0 1 16 4h2a2.5 2.5 0 0 1 2.5 2.5v2A2.5 2.5 0 0 1 18 11h-2a2.5 2.5 0 0 1-2.5-2.5v-2Zm2.5-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1ZM7 13a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 20h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 13H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Z" fill="#fff"/><path d="M13.5 15.5c0-.465 0-.697.038-.89a2 2 0 0 1 1.572-1.572C15.303 13 15.535 13 16 13v2.5h-2.5ZM18 13c.465 0 .697 0 .89.038a2 2 0 0 1 1.572 1.572c.038.193.038.425.038.89H18V13ZM18 17.5h2.5c0 .465 0 .697-.038.89a2 2 0 0 1-1.572 1.572C18.697 20 18.465 20 18 20v-2.5ZM13.5 17.5H16V20c-.465 0-.697 0-.89-.038a2 2 0 0 1-1.572-1.572c-.038-.193-.038-.425-.038-.89Z" fill="#fff"/></svg>`,SCAN_ICON:it`<svg width="16" height="16" fill="none"><path fill="#fff" d="M10 15.216c0 .422.347.763.768.74 1.202-.064 2.025-.222 2.71-.613a5.001 5.001 0 0 0 1.865-1.866c.39-.684.549-1.507.613-2.709a.735.735 0 0 0-.74-.768.768.768 0 0 0-.76.732c-.009.157-.02.306-.032.447-.073.812-.206 1.244-.384 1.555-.31.545-.761.996-1.306 1.306-.311.178-.743.311-1.555.384-.141.013-.29.023-.447.032a.768.768 0 0 0-.732.76ZM10 .784c0 .407.325.737.732.76.157.009.306.02.447.032.812.073 1.244.206 1.555.384a3.5 3.5 0 0 1 1.306 1.306c.178.311.311.743.384 1.555.013.142.023.29.032.447a.768.768 0 0 0 .76.732.734.734 0 0 0 .74-.768c-.064-1.202-.222-2.025-.613-2.71A5 5 0 0 0 13.477.658c-.684-.39-1.507-.549-2.709-.613a.735.735 0 0 0-.768.74ZM5.232.044A.735.735 0 0 1 6 .784a.768.768 0 0 1-.732.76c-.157.009-.305.02-.447.032-.812.073-1.244.206-1.555.384A3.5 3.5 0 0 0 1.96 3.266c-.178.311-.311.743-.384 1.555-.013.142-.023.29-.032.447A.768.768 0 0 1 .784 6a.735.735 0 0 1-.74-.768c.064-1.202.222-2.025.613-2.71A5 5 0 0 1 2.523.658C3.207.267 4.03.108 5.233.044ZM5.268 14.456a.768.768 0 0 1 .732.76.734.734 0 0 1-.768.74c-1.202-.064-2.025-.222-2.71-.613a5 5 0 0 1-1.865-1.866c-.39-.684-.549-1.507-.613-2.709A.735.735 0 0 1 .784 10c.407 0 .737.325.76.732.009.157.02.306.032.447.073.812.206 1.244.384 1.555a3.5 3.5 0 0 0 1.306 1.306c.311.178.743.311 1.555.384.142.013.29.023.447.032Z"/></svg>`,CHECKMARK_ICON:it`<svg width="13" height="12" viewBox="0 0 13 12"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.155.132a.75.75 0 0 1 .232 1.035L5.821 11.535a1 1 0 0 1-1.626.09L.665 7.21a.75.75 0 1 1 1.17-.937L4.71 9.867a.25.25 0 0 0 .406-.023L11.12.364a.75.75 0 0 1 1.035-.232Z" fill="#fff"/></svg>`,SEARCH_ICON:it`<svg width="20" height="21"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.432 13.992c-.354-.353-.91-.382-1.35-.146a5.5 5.5 0 1 1 2.265-2.265c-.237.441-.208.997.145 1.35l3.296 3.296a.75.75 0 1 1-1.06 1.061l-3.296-3.296Zm.06-5a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z" fill="#949E9E"/></svg>`,WALLET_PLACEHOLDER:it`<svg width="60" height="60" fill="none" viewBox="0 0 60 60"><g clip-path="url(#q)"><path id="wallet-placeholder-fill" fill="#fff" d="M0 24.9c0-9.251 0-13.877 1.97-17.332a15 15 0 0 1 5.598-5.597C11.023 0 15.648 0 24.9 0h10.2c9.252 0 13.877 0 17.332 1.97a15 15 0 0 1 5.597 5.598C60 11.023 60 15.648 60 24.9v10.2c0 9.252 0 13.877-1.97 17.332a15.001 15.001 0 0 1-5.598 5.597C48.977 60 44.352 60 35.1 60H24.9c-9.251 0-13.877 0-17.332-1.97a15 15 0 0 1-5.597-5.598C0 48.977 0 44.352 0 35.1V24.9Z"/><path id="wallet-placeholder-dash" stroke="#000" stroke-dasharray="4 4" stroke-width="1.5" d="M.04 41.708a231.598 231.598 0 0 1-.039-4.403l.75-.001L.75 35.1v-2.55H0v-5.1h.75V24.9l.001-2.204h-.75c.003-1.617.011-3.077.039-4.404l.75.016c.034-1.65.099-3.08.218-4.343l-.746-.07c.158-1.678.412-3.083.82-4.316l.713.236c.224-.679.497-1.296.827-1.875a14.25 14.25 0 0 1 1.05-1.585L3.076 5.9A15 15 0 0 1 5.9 3.076l.455.596a14.25 14.25 0 0 1 1.585-1.05c.579-.33 1.196-.603 1.875-.827l-.236-.712C10.812.674 12.217.42 13.895.262l.07.746C15.23.89 16.66.824 18.308.79l-.016-.75C19.62.012 21.08.004 22.695.001l.001.75L24.9.75h2.55V0h5.1v.75h2.55l2.204.001v-.75c1.617.003 3.077.011 4.404.039l-.016.75c1.65.034 3.08.099 4.343.218l.07-.746c1.678.158 3.083.412 4.316.82l-.236.713c.679.224 1.296.497 1.875.827a14.24 14.24 0 0 1 1.585 1.05l.455-.596A14.999 14.999 0 0 1 56.924 5.9l-.596.455c.384.502.735 1.032 1.05 1.585.33.579.602 1.196.827 1.875l.712-.236c.409 1.233.663 2.638.822 4.316l-.747.07c.119 1.264.184 2.694.218 4.343l.75-.016c.028 1.327.036 2.787.039 4.403l-.75.001.001 2.204v2.55H60v5.1h-.75v2.55l-.001 2.204h.75a231.431 231.431 0 0 1-.039 4.404l-.75-.016c-.034 1.65-.099 3.08-.218 4.343l.747.07c-.159 1.678-.413 3.083-.822 4.316l-.712-.236a10.255 10.255 0 0 1-.827 1.875 14.242 14.242 0 0 1-1.05 1.585l.596.455a14.997 14.997 0 0 1-2.824 2.824l-.455-.596c-.502.384-1.032.735-1.585 1.05-.579.33-1.196.602-1.875.827l.236.712c-1.233.409-2.638.663-4.316.822l-.07-.747c-1.264.119-2.694.184-4.343.218l.016.75c-1.327.028-2.787.036-4.403.039l-.001-.75-2.204.001h-2.55V60h-5.1v-.75H24.9l-2.204-.001v.75a231.431 231.431 0 0 1-4.404-.039l.016-.75c-1.65-.034-3.08-.099-4.343-.218l-.07.747c-1.678-.159-3.083-.413-4.316-.822l.236-.712a10.258 10.258 0 0 1-1.875-.827 14.252 14.252 0 0 1-1.585-1.05l-.455.596A14.999 14.999 0 0 1 3.076 54.1l.596-.455a14.24 14.24 0 0 1-1.05-1.585 10.259 10.259 0 0 1-.827-1.875l-.712.236C.674 49.188.42 47.783.262 46.105l.746-.07C.89 44.77.824 43.34.79 41.692l-.75.016Z"/><path fill="#fff" fill-rule="evenodd" d="M35.643 32.145c-.297-.743-.445-1.114-.401-1.275a.42.42 0 0 1 .182-.27c.134-.1.463-.1 1.123-.1.742 0 1.499.046 2.236-.05a6 6 0 0 0 5.166-5.166c.051-.39.051-.855.051-1.784 0-.928 0-1.393-.051-1.783a6 6 0 0 0-5.166-5.165c-.39-.052-.854-.052-1.783-.052h-7.72c-4.934 0-7.401 0-9.244 1.051a8 8 0 0 0-2.985 2.986C16.057 22.28 16.003 24.58 16 29 15.998 31.075 16 33.15 16 35.224A7.778 7.778 0 0 0 23.778 43H28.5c1.394 0 2.09 0 2.67-.116a6 6 0 0 0 4.715-4.714c.115-.58.115-1.301.115-2.744 0-1.31 0-1.964-.114-2.49a4.998 4.998 0 0 0-.243-.792Z" clip-rule="evenodd"/><path fill="#9EA9A9" fill-rule="evenodd" d="M37 18h-7.72c-2.494 0-4.266.002-5.647.126-1.361.122-2.197.354-2.854.728a6.5 6.5 0 0 0-2.425 2.426c-.375.657-.607 1.492-.729 2.853-.11 1.233-.123 2.777-.125 4.867 0 .7 0 1.05.097 1.181.096.13.182.181.343.2.163.02.518-.18 1.229-.581a6.195 6.195 0 0 1 3.053-.8H37c.977 0 1.32-.003 1.587-.038a4.5 4.5 0 0 0 3.874-3.874c.036-.268.039-.611.039-1.588 0-.976-.003-1.319-.038-1.587a4.5 4.5 0 0 0-3.875-3.874C38.32 18.004 37.977 18 37 18Zm-7.364 12.5h-7.414a4.722 4.722 0 0 0-4.722 4.723 6.278 6.278 0 0 0 6.278 6.278H28.5c1.466 0 1.98-.008 2.378-.087a4.5 4.5 0 0 0 3.535-3.536c.08-.397.087-.933.087-2.451 0-1.391-.009-1.843-.08-2.17a3.5 3.5 0 0 0-2.676-2.676c-.328-.072-.762-.08-2.108-.08Z" clip-rule="evenodd"/></g><defs><clipPath id="q"><path fill="#fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>`,GLOBE_ICON:it`<svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="#fff" fill-rule="evenodd" d="M15.5 8a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0Zm-2.113.75c.301 0 .535.264.47.558a6.01 6.01 0 0 1-2.867 3.896c-.203.116-.42-.103-.334-.32.409-1.018.691-2.274.797-3.657a.512.512 0 0 1 .507-.477h1.427Zm.47-2.058c.065.294-.169.558-.47.558H11.96a.512.512 0 0 1-.507-.477c-.106-1.383-.389-2.638-.797-3.656-.087-.217.13-.437.333-.32a6.01 6.01 0 0 1 2.868 3.895Zm-4.402.558c.286 0 .515-.24.49-.525-.121-1.361-.429-2.534-.83-3.393-.279-.6-.549-.93-.753-1.112a.535.535 0 0 0-.724 0c-.204.182-.474.513-.754 1.112-.4.859-.708 2.032-.828 3.393a.486.486 0 0 0 .49.525h2.909Zm-5.415 0c.267 0 .486-.21.507-.477.106-1.383.389-2.638.797-3.656.087-.217-.13-.437-.333-.32a6.01 6.01 0 0 0-2.868 3.895c-.065.294.169.558.47.558H4.04ZM2.143 9.308c-.065-.294.169-.558.47-.558H4.04c.267 0 .486.21.507.477.106 1.383.389 2.639.797 3.657.087.217-.13.436-.333.32a6.01 6.01 0 0 1-2.868-3.896Zm3.913-.033a.486.486 0 0 1 .49-.525h2.909c.286 0 .515.24.49.525-.121 1.361-.428 2.535-.83 3.394-.279.6-.549.93-.753 1.112a.535.535 0 0 1-.724 0c-.204-.182-.474-.513-.754-1.112-.4-.859-.708-2.033-.828-3.394Z" clip-rule="evenodd"/></svg>`},N5=ze`.wcm-toolbar-placeholder{top:0;bottom:0;left:0;right:0;width:100%;position:absolute;display:block;pointer-events:none;height:100px;border-radius:calc(var(--wcm-background-border-radius) * .9);background-color:var(--wcm-background-color);background-position:center;background-size:cover}.wcm-toolbar{height:38px;display:flex;position:relative;margin:5px 15px 5px 5px;justify-content:space-between;align-items:center}.wcm-toolbar img,.wcm-toolbar svg{height:28px;object-position:left center;object-fit:contain}#wcm-wc-logo path{fill:var(--wcm-accent-fill-color)}button{width:28px;height:28px;border-radius:var(--wcm-icon-button-border-radius);border:0;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:var(--wcm-color-bg-1);box-shadow:0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-bg-2)}button svg{display:block;object-position:center}button path{fill:var(--wcm-color-fg-1)}.wcm-toolbar div{display:flex}@media(hover:hover){button:hover{background-color:var(--wcm-color-bg-2)}}`;var L5=Object.defineProperty,M5=Object.getOwnPropertyDescriptor,U5=(t,e,r,n)=>{for(var i=n>1?void 0:n?M5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&L5(e,r,i),i};let $c=class extends Ee{render(){return J`<div class="wcm-toolbar-placeholder"></div><div class="wcm-toolbar">${We.WALLET_CONNECT_LOGO} <button @click="${tn.close}">${We.CROSS_ICON}</button></div>`}};$c.styles=[Re.globalCss,N5],$c=U5([Pe("wcm-modal-backcard")],$c);const j5=ze`main{padding:20px;padding-top:0;width:100%}`;var F5=Object.defineProperty,k5=Object.getOwnPropertyDescriptor,B5=(t,e,r,n)=>{for(var i=n>1?void 0:n?k5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&F5(e,r,i),i};let Tc=class extends Ee{render(){return J`<main><slot></slot></main>`}};Tc.styles=[Re.globalCss,j5],Tc=B5([Pe("wcm-modal-content")],Tc);const z5=ze`footer{padding:10px;display:flex;flex-direction:column;align-items:inherit;justify-content:inherit;border-top:1px solid var(--wcm-color-bg-2)}`;var W5=Object.defineProperty,H5=Object.getOwnPropertyDescriptor,V5=(t,e,r,n)=>{for(var i=n>1?void 0:n?H5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&W5(e,r,i),i};let Rc=class extends Ee{render(){return J`<footer><slot></slot></footer>`}};Rc.styles=[Re.globalCss,z5],Rc=V5([Pe("wcm-modal-footer")],Rc);const K5=ze`header{display:flex;justify-content:center;align-items:center;padding:20px;position:relative}.wcm-border{border-bottom:1px solid var(--wcm-color-bg-2);margin-bottom:20px}header button{padding:15px 20px}header button:active{opacity:.5}@media(hover:hover){header button:hover{opacity:.5}}.wcm-back-btn{position:absolute;left:0}.wcm-action-btn{position:absolute;right:0}path{fill:var(--wcm-accent-color)}`;var q5=Object.defineProperty,G5=Object.getOwnPropertyDescriptor,Gi=(t,e,r,n)=>{for(var i=n>1?void 0:n?G5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&q5(e,r,i),i};let Sn=class extends Ee{constructor(){super(...arguments),this.title="",this.onAction=void 0,this.actionIcon=void 0,this.border=!1}backBtnTemplate(){return J`<button class="wcm-back-btn" @click="${Qe.goBack}">${We.BACK_ICON}</button>`}actionBtnTemplate(){return J`<button class="wcm-action-btn" @click="${this.onAction}">${this.actionIcon}</button>`}render(){const t={"wcm-border":this.border},e=Qe.state.history.length>1,r=this.title?J`<wcm-text variant="big-bold">${this.title}</wcm-text>`:J`<slot></slot>`;return J`<header class="${Ir(t)}">${e?this.backBtnTemplate():null} ${r} ${this.onAction?this.actionBtnTemplate():null}</header>`}};Sn.styles=[Re.globalCss,K5],Gi([pe()],Sn.prototype,"title",2),Gi([pe()],Sn.prototype,"onAction",2),Gi([pe()],Sn.prototype,"actionIcon",2),Gi([pe({type:Boolean})],Sn.prototype,"border",2),Sn=Gi([Pe("wcm-modal-header")],Sn);const ue={MOBILE_BREAKPOINT:600,WCM_RECENT_WALLET_DATA:"WCM_RECENT_WALLET_DATA",EXPLORER_WALLET_URL:"https://explorer.walletconnect.com/?type=wallet",getShadowRootElement(t,e){const r=t.renderRoot.querySelector(e);if(!r)throw new Error(`${e} not found`);return r},getWalletIcon({id:t,image_id:e}){const{walletImages:r}=Gt.state;return r!=null&&r[t]?r[t]:e?zt.getWalletImageUrl(e):""},getWalletName(t,e=!1){return e&&t.length>8?`${t.substring(0,8)}..`:t},isMobileAnimation(){return window.innerWidth<=ue.MOBILE_BREAKPOINT},async preloadImage(t){const e=new Promise((r,n)=>{const i=new Image;i.onload=r,i.onerror=n,i.src=t});return Promise.race([e,ne.wait(3e3)])},getErrorMessage(t){return t instanceof Error?t.message:"Unknown Error"},debounce(t,e=500){let r;return(...n)=>{function i(){t(...n)}r&&clearTimeout(r),r=setTimeout(i,e)}},handleMobileLinking(t){const{walletConnectUri:e}=ut.state,{mobile:r,name:n}=t,i=r==null?void 0:r.native,s=r==null?void 0:r.universal;ue.setRecentWallet(t);function o(a){let l="";i?l=ne.formatUniversalUrl(i,a,n):s&&(l=ne.formatNativeUrl(s,a,n)),ne.openHref(l,"_self")}e&&o(e)},handleAndroidLinking(){const{walletConnectUri:t}=ut.state;t&&(ne.setWalletConnectAndroidDeepLink(t),ne.openHref(t,"_self"))},async handleUriCopy(){const{walletConnectUri:t}=ut.state;if(t)try{await navigator.clipboard.writeText(t),Lr.openToast("Link copied","success")}catch{Lr.openToast("Failed to copy","error")}},getCustomImageUrls(){const{walletImages:t}=Gt.state,e=Object.values(t??{});return Object.values(e)},truncate(t,e=8){return t.length<=e?t:`${t.substring(0,4)}...${t.substring(t.length-4)}`},setRecentWallet(t){try{localStorage.setItem(ue.WCM_RECENT_WALLET_DATA,JSON.stringify(t))}catch{console.info("Unable to set recent wallet")}},getRecentWallet(){try{const t=localStorage.getItem(ue.WCM_RECENT_WALLET_DATA);return t?JSON.parse(t):void 0}catch{console.info("Unable to get recent wallet")}},caseSafeIncludes(t,e){return t.toUpperCase().includes(e.toUpperCase())},openWalletExplorerUrl(){ne.openHref(ue.EXPLORER_WALLET_URL,"_blank")},getCachedRouterWalletPlatforms(){const{desktop:t,mobile:e}=ne.getWalletRouterData(),r=!!(t!=null&&t.native),n=!!(t!=null&&t.universal),i=!!(e!=null&&e.native)||!!(e!=null&&e.universal);return{isDesktop:r,isMobile:i,isWeb:n}},goToConnectingView(t){Qe.setData({Wallet:t});const e=ne.isMobile(),{isDesktop:r,isWeb:n,isMobile:i}=ue.getCachedRouterWalletPlatforms();e?i?Qe.push("MobileConnecting"):n?Qe.push("WebConnecting"):Qe.push("InstallWallet"):r?Qe.push("DesktopConnecting"):n?Qe.push("WebConnecting"):i?Qe.push("MobileQrcodeConnecting"):Qe.push("InstallWallet")}},Y5=ze`.wcm-router{overflow:hidden;will-change:transform}.wcm-content{display:flex;flex-direction:column}`;var J5=Object.defineProperty,Z5=Object.getOwnPropertyDescriptor,Pc=(t,e,r,n)=>{for(var i=n>1?void 0:n?Z5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&J5(e,r,i),i};let Yi=class extends Ee{constructor(){super(),this.view=Qe.state.view,this.prevView=Qe.state.view,this.unsubscribe=void 0,this.oldHeight="0px",this.resizeObserver=void 0,this.unsubscribe=Qe.subscribe(t=>{this.view!==t.view&&this.onChangeRoute()})}firstUpdated(){this.resizeObserver=new ResizeObserver(([t])=>{const e=`${t.contentRect.height}px`;this.oldHeight!=="0px"&&En(this.routerEl,{height:[this.oldHeight,e]},{duration:.2}),this.oldHeight=e}),this.resizeObserver.observe(this.contentEl)}disconnectedCallback(){var t,e;(t=this.unsubscribe)==null||t.call(this),(e=this.resizeObserver)==null||e.disconnect()}get routerEl(){return ue.getShadowRootElement(this,".wcm-router")}get contentEl(){return ue.getShadowRootElement(this,".wcm-content")}viewTemplate(){switch(this.view){case"ConnectWallet":return J`<wcm-connect-wallet-view></wcm-connect-wallet-view>`;case"DesktopConnecting":return J`<wcm-desktop-connecting-view></wcm-desktop-connecting-view>`;case"MobileConnecting":return J`<wcm-mobile-connecting-view></wcm-mobile-connecting-view>`;case"WebConnecting":return J`<wcm-web-connecting-view></wcm-web-connecting-view>`;case"MobileQrcodeConnecting":return J`<wcm-mobile-qr-connecting-view></wcm-mobile-qr-connecting-view>`;case"WalletExplorer":return J`<wcm-wallet-explorer-view></wcm-wallet-explorer-view>`;case"Qrcode":return J`<wcm-qrcode-view></wcm-qrcode-view>`;case"InstallWallet":return J`<wcm-install-wallet-view></wcm-install-wallet-view>`;default:return J`<div>Not Found</div>`}}async onChangeRoute(){await En(this.routerEl,{opacity:[1,0],scale:[1,1.02]},{duration:.15,delay:.1}).finished,this.view=Qe.state.view,En(this.routerEl,{opacity:[0,1],scale:[.99,1]},{duration:.37,delay:.05})}render(){return J`<div class="wcm-router"><div class="wcm-content">${this.viewTemplate()}</div></div>`}};Yi.styles=[Re.globalCss,Y5],Pc([Kt()],Yi.prototype,"view",2),Pc([Kt()],Yi.prototype,"prevView",2),Yi=Pc([Pe("wcm-modal-router")],Yi);const X5=ze`div{height:36px;width:max-content;display:flex;justify-content:center;align-items:center;padding:9px 15px 11px;position:absolute;top:12px;box-shadow:0 6px 14px -6px rgba(10,16,31,.3),0 10px 32px -4px rgba(10,16,31,.15);z-index:2;left:50%;transform:translateX(-50%);pointer-events:none;backdrop-filter:blur(20px) saturate(1.8);-webkit-backdrop-filter:blur(20px) saturate(1.8);border-radius:var(--wcm-notification-border-radius);border:1px solid var(--wcm-color-overlay);background-color:var(--wcm-color-overlay)}svg{margin-right:5px}@-moz-document url-prefix(){div{background-color:var(--wcm-color-bg-3)}}.wcm-success path{fill:var(--wcm-accent-color)}.wcm-error path{fill:var(--wcm-error-color)}`;var Q5=Object.defineProperty,e_=Object.getOwnPropertyDescriptor,Rf=(t,e,r,n)=>{for(var i=n>1?void 0:n?e_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Q5(e,r,i),i};let Js=class extends Ee{constructor(){super(),this.open=!1,this.unsubscribe=void 0,this.timeout=void 0,this.unsubscribe=Lr.subscribe(t=>{t.open?(this.open=!0,this.timeout=setTimeout(()=>Lr.closeToast(),2200)):(this.open=!1,clearTimeout(this.timeout))})}disconnectedCallback(){var t;(t=this.unsubscribe)==null||t.call(this),clearTimeout(this.timeout),Lr.closeToast()}render(){const{message:t,variant:e}=Lr.state,r={"wcm-success":e==="success","wcm-error":e==="error"};return this.open?J`<div class="${Ir(r)}">${e==="success"?We.CHECKMARK_ICON:null} ${e==="error"?We.CROSS_ICON:null}<wcm-text variant="small-regular">${t}</wcm-text></div>`:null}};Js.styles=[Re.globalCss,X5],Rf([Kt()],Js.prototype,"open",2),Js=Rf([Pe("wcm-modal-toast")],Js);const t_=.1,Pf=2.5,Ar=7;function Nc(t,e,r){return t===e?!1:(t-e<0?e-t:t-e)<=r+t_}function r_(t,e){const r=Array.prototype.slice.call(Wi.create(t,{errorCorrectionLevel:e}).modules.data,0),n=Math.sqrt(r.length);return r.reduce((i,s,o)=>(o%n===0?i.push([s]):i[i.length-1].push(s))&&i,[])}const n_={generate(t,e,r){const n="#141414",i="#ffffff",s=[],o=r_(t,"Q"),a=e/o.length,l=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];l.forEach(({x:b,y:x})=>{const C=(o.length-Ar)*a*b,$=(o.length-Ar)*a*x,y=.45;for(let E=0;E<l.length;E+=1){const g=a*(Ar-E*2);s.push(it`<rect fill="${E%2===0?n:i}" height="${g}" rx="${g*y}" ry="${g*y}" width="${g}" x="${C+a*E}" y="${$+a*E}">`)}});const h=Math.floor((r+25)/a),d=o.length/2-h/2,w=o.length/2+h/2-1,m=[];o.forEach((b,x)=>{b.forEach((C,$)=>{if(o[x][$]&&!(x<Ar&&$<Ar||x>o.length-(Ar+1)&&$<Ar||x<Ar&&$>o.length-(Ar+1))&&!(x>d&&x<w&&$>d&&$<w)){const y=x*a+a/2,E=$*a+a/2;m.push([y,E])}})});const v={};return m.forEach(([b,x])=>{v[b]?v[b].push(x):v[b]=[x]}),Object.entries(v).map(([b,x])=>{const C=x.filter($=>x.every(y=>!Nc($,y,a)));return[Number(b),C]}).forEach(([b,x])=>{x.forEach(C=>{s.push(it`<circle cx="${b}" cy="${C}" fill="${n}" r="${a/Pf}">`)})}),Object.entries(v).filter(([b,x])=>x.length>1).map(([b,x])=>{const C=x.filter($=>x.some(y=>Nc($,y,a)));return[Number(b),C]}).map(([b,x])=>{x.sort(($,y)=>$<y?-1:1);const C=[];for(const $ of x){const y=C.find(E=>E.some(g=>Nc($,g,a)));y?y.push($):C.push([$])}return[b,C.map($=>[$[0],$[$.length-1]])]}).forEach(([b,x])=>{x.forEach(([C,$])=>{s.push(it`<line x1="${b}" x2="${b}" y1="${C}" y2="${$}" stroke="${n}" stroke-width="${a/(Pf/2)}" stroke-linecap="round">`)})}),s}},i_=ze`@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}div{position:relative;user-select:none;display:block;overflow:hidden;aspect-ratio:1/1;animation:fadeIn ease .2s}.wcm-dark{background-color:#fff;border-radius:var(--wcm-container-border-radius);padding:18px;box-shadow:0 2px 5px #000}svg:first-child,wcm-wallet-image{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{width:25%;height:25%;border-radius:var(--wcm-wallet-icon-border-radius)}svg:first-child{transform:translateY(-50%) translateX(-50%) scale(.9)}svg:first-child path:first-child{fill:var(--wcm-accent-color)}svg:first-child path:last-child{stroke:var(--wcm-color-overlay)}`;var s_=Object.defineProperty,o_=Object.getOwnPropertyDescriptor,ei=(t,e,r,n)=>{for(var i=n>1?void 0:n?o_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&s_(e,r,i),i};let $r=class extends Ee{constructor(){super(...arguments),this.uri="",this.size=0,this.imageId=void 0,this.walletId=void 0,this.imageUrl=void 0}svgTemplate(){const t=Nr.state.themeMode==="light"?this.size:this.size-36;return it`<svg height="${t}" width="${t}">${n_.generate(this.uri,t,t/4)}</svg>`}render(){const t={"wcm-dark":Nr.state.themeMode==="dark"};return J`<div style="${`width: ${this.size}px`}" class="${Ir(t)}">${this.walletId||this.imageUrl?J`<wcm-wallet-image walletId="${Bt(this.walletId)}" imageId="${Bt(this.imageId)}" imageUrl="${Bt(this.imageUrl)}"></wcm-wallet-image>`:We.WALLET_CONNECT_ICON_COLORED} ${this.svgTemplate()}</div>`}};$r.styles=[Re.globalCss,i_],ei([pe()],$r.prototype,"uri",2),ei([pe({type:Number})],$r.prototype,"size",2),ei([pe()],$r.prototype,"imageId",2),ei([pe()],$r.prototype,"walletId",2),ei([pe()],$r.prototype,"imageUrl",2),$r=ei([Pe("wcm-qrcode")],$r);const a_=ze`:host{position:relative;height:28px;width:80%}input{width:100%;height:100%;line-height:28px!important;border-radius:var(--wcm-input-border-radius);font-style:normal;font-family:-apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,'Helvetica Neue',sans-serif;font-feature-settings:'case' on;font-weight:500;font-size:16px;letter-spacing:-.03em;padding:0 10px 0 34px;transition:.2s all ease;color:var(--wcm-color-fg-1);background-color:var(--wcm-color-bg-3);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay);caret-color:var(--wcm-accent-color)}input::placeholder{color:var(--wcm-color-fg-2)}svg{left:10px;top:4px;pointer-events:none;position:absolute;width:20px;height:20px}input:focus-within{box-shadow:inset 0 0 0 1px var(--wcm-accent-color)}path{fill:var(--wcm-color-fg-2)}`;var c_=Object.defineProperty,l_=Object.getOwnPropertyDescriptor,Nf=(t,e,r,n)=>{for(var i=n>1?void 0:n?l_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&c_(e,r,i),i};let Zs=class extends Ee{constructor(){super(...arguments),this.onChange=()=>null}render(){return J`<input type="text" @input="${this.onChange}" placeholder="Search wallets"> ${We.SEARCH_ICON}`}};Zs.styles=[Re.globalCss,a_],Nf([pe()],Zs.prototype,"onChange",2),Zs=Nf([Pe("wcm-search-input")],Zs);const u_=ze`@keyframes rotate{100%{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}svg{animation:rotate 2s linear infinite;display:flex;justify-content:center;align-items:center}svg circle{stroke-linecap:round;animation:dash 1.5s ease infinite;stroke:var(--wcm-accent-color)}`;var h_=Object.defineProperty,d_=Object.getOwnPropertyDescriptor,f_=(t,e,r,n)=>{for(var i=n>1?void 0:n?d_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&h_(e,r,i),i};let Lc=class extends Ee{render(){return J`<svg viewBox="0 0 50 50" width="24" height="24"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4" stroke="#fff"/></svg>`}};Lc.styles=[Re.globalCss,u_],Lc=f_([Pe("wcm-spinner")],Lc);const p_=ze`span{font-style:normal;font-family:var(--wcm-font-family);font-feature-settings:var(--wcm-font-feature-settings)}.wcm-xsmall-bold{font-family:var(--wcm-text-xsmall-bold-font-family);font-weight:var(--wcm-text-xsmall-bold-weight);font-size:var(--wcm-text-xsmall-bold-size);line-height:var(--wcm-text-xsmall-bold-line-height);letter-spacing:var(--wcm-text-xsmall-bold-letter-spacing);text-transform:var(--wcm-text-xsmall-bold-text-transform)}.wcm-xsmall-regular{font-family:var(--wcm-text-xsmall-regular-font-family);font-weight:var(--wcm-text-xsmall-regular-weight);font-size:var(--wcm-text-xsmall-regular-size);line-height:var(--wcm-text-xsmall-regular-line-height);letter-spacing:var(--wcm-text-xsmall-regular-letter-spacing);text-transform:var(--wcm-text-xsmall-regular-text-transform)}.wcm-small-thin{font-family:var(--wcm-text-small-thin-font-family);font-weight:var(--wcm-text-small-thin-weight);font-size:var(--wcm-text-small-thin-size);line-height:var(--wcm-text-small-thin-line-height);letter-spacing:var(--wcm-text-small-thin-letter-spacing);text-transform:var(--wcm-text-small-thin-text-transform)}.wcm-small-regular{font-family:var(--wcm-text-small-regular-font-family);font-weight:var(--wcm-text-small-regular-weight);font-size:var(--wcm-text-small-regular-size);line-height:var(--wcm-text-small-regular-line-height);letter-spacing:var(--wcm-text-small-regular-letter-spacing);text-transform:var(--wcm-text-small-regular-text-transform)}.wcm-medium-regular{font-family:var(--wcm-text-medium-regular-font-family);font-weight:var(--wcm-text-medium-regular-weight);font-size:var(--wcm-text-medium-regular-size);line-height:var(--wcm-text-medium-regular-line-height);letter-spacing:var(--wcm-text-medium-regular-letter-spacing);text-transform:var(--wcm-text-medium-regular-text-transform)}.wcm-big-bold{font-family:var(--wcm-text-big-bold-font-family);font-weight:var(--wcm-text-big-bold-weight);font-size:var(--wcm-text-big-bold-size);line-height:var(--wcm-text-big-bold-line-height);letter-spacing:var(--wcm-text-big-bold-letter-spacing);text-transform:var(--wcm-text-big-bold-text-transform)}:host(*){color:var(--wcm-color-fg-1)}.wcm-color-primary{color:var(--wcm-color-fg-1)}.wcm-color-secondary{color:var(--wcm-color-fg-2)}.wcm-color-tertiary{color:var(--wcm-color-fg-3)}.wcm-color-inverse{color:var(--wcm-accent-fill-color)}.wcm-color-accnt{color:var(--wcm-accent-color)}.wcm-color-error{color:var(--wcm-error-color)}`;var g_=Object.defineProperty,m_=Object.getOwnPropertyDescriptor,Mc=(t,e,r,n)=>{for(var i=n>1?void 0:n?m_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&g_(e,r,i),i};let Ji=class extends Ee{constructor(){super(...arguments),this.variant="medium-regular",this.color="primary"}render(){const t={"wcm-big-bold":this.variant==="big-bold","wcm-medium-regular":this.variant==="medium-regular","wcm-small-regular":this.variant==="small-regular","wcm-small-thin":this.variant==="small-thin","wcm-xsmall-regular":this.variant==="xsmall-regular","wcm-xsmall-bold":this.variant==="xsmall-bold","wcm-color-primary":this.color==="primary","wcm-color-secondary":this.color==="secondary","wcm-color-tertiary":this.color==="tertiary","wcm-color-inverse":this.color==="inverse","wcm-color-accnt":this.color==="accent","wcm-color-error":this.color==="error"};return J`<span><slot class="${Ir(t)}"></slot></span>`}};Ji.styles=[Re.globalCss,p_],Mc([pe()],Ji.prototype,"variant",2),Mc([pe()],Ji.prototype,"color",2),Ji=Mc([Pe("wcm-text")],Ji);const w_=ze`button{width:100%;height:100%;border-radius:var(--wcm-button-hover-highlight-border-radius);display:flex;align-items:flex-start}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}button>div{width:80px;padding:5px 0;display:flex;flex-direction:column;align-items:center}wcm-text{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}wcm-wallet-image{height:60px;width:60px;transition:all .2s ease;border-radius:var(--wcm-wallet-icon-border-radius);margin-bottom:5px}.wcm-sublabel{margin-top:2px}`;var v_=Object.defineProperty,y_=Object.getOwnPropertyDescriptor,Vr=(t,e,r,n)=>{for(var i=n>1?void 0:n?y_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&v_(e,r,i),i};let Er=class extends Ee{constructor(){super(...arguments),this.onClick=()=>null,this.name="",this.walletId="",this.label=void 0,this.imageId=void 0,this.installed=!1,this.recent=!1}sublabelTemplate(){return this.recent?J`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">RECENT</wcm-text>`:this.installed?J`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">INSTALLED</wcm-text>`:null}handleClick(){el.click({name:"WALLET_BUTTON",walletId:this.walletId}),this.onClick()}render(){var t;return J`<button @click="${this.handleClick.bind(this)}"><div><wcm-wallet-image walletId="${this.walletId}" imageId="${Bt(this.imageId)}"></wcm-wallet-image><wcm-text variant="xsmall-regular">${(t=this.label)!=null?t:ue.getWalletName(this.name,!0)}</wcm-text>${this.sublabelTemplate()}</div></button>`}};Er.styles=[Re.globalCss,w_],Vr([pe()],Er.prototype,"onClick",2),Vr([pe()],Er.prototype,"name",2),Vr([pe()],Er.prototype,"walletId",2),Vr([pe()],Er.prototype,"label",2),Vr([pe()],Er.prototype,"imageId",2),Vr([pe({type:Boolean})],Er.prototype,"installed",2),Vr([pe({type:Boolean})],Er.prototype,"recent",2),Er=Vr([Pe("wcm-wallet-button")],Er);const b_=ze`:host{display:block}div{overflow:hidden;position:relative;border-radius:inherit;width:100%;height:100%;background-color:var(--wcm-color-overlay)}svg{position:relative;width:100%;height:100%}div::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;border-radius:inherit;border:1px solid var(--wcm-color-overlay)}div img{width:100%;height:100%;object-fit:cover;object-position:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var __=Object.defineProperty,E_=Object.getOwnPropertyDescriptor,Xs=(t,e,r,n)=>{for(var i=n>1?void 0:n?E_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&__(e,r,i),i};let ti=class extends Ee{constructor(){super(...arguments),this.walletId="",this.imageId=void 0,this.imageUrl=void 0}render(){var t;const e=(t=this.imageUrl)!=null&&t.length?this.imageUrl:ue.getWalletIcon({id:this.walletId,image_id:this.imageId});return J`${e.length?J`<div><img src="${e}" alt="${this.id}"></div>`:We.WALLET_PLACEHOLDER}`}};ti.styles=[Re.globalCss,b_],Xs([pe()],ti.prototype,"walletId",2),Xs([pe()],ti.prototype,"imageId",2),Xs([pe()],ti.prototype,"imageUrl",2),ti=Xs([Pe("wcm-wallet-image")],ti);var S_=Object.defineProperty,x_=Object.getOwnPropertyDescriptor,Lf=(t,e,r,n)=>{for(var i=n>1?void 0:n?x_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&S_(e,r,i),i};let Uc=class extends Ee{constructor(){super(),this.preload=!0,this.preloadData()}async loadImages(t){try{t!=null&&t.length&&await Promise.all(t.map(async e=>ue.preloadImage(e)))}catch{console.info("Unsuccessful attempt at preloading some images",t)}}async preloadListings(){if(Gt.state.enableExplorer){await zt.getRecomendedWallets(),ut.setIsDataLoaded(!0);const{recomendedWallets:t}=zt.state,e=t.map(r=>ue.getWalletIcon(r));await this.loadImages(e)}else ut.setIsDataLoaded(!0)}async preloadCustomImages(){const t=ue.getCustomImageUrls();await this.loadImages(t)}async preloadData(){try{this.preload&&(this.preload=!1,await Promise.all([this.preloadListings(),this.preloadCustomImages()]))}catch(t){console.error(t),Lr.openToast("Failed preloading","error")}}};Lf([Kt()],Uc.prototype,"preload",2),Uc=Lf([Pe("wcm-explorer-context")],Uc);var D_=Object.defineProperty,O_=Object.getOwnPropertyDescriptor,C_=(t,e,r,n)=>{for(var i=n>1?void 0:n?O_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&D_(e,r,i),i};let Mf=class extends Ee{constructor(){super(),this.unsubscribeTheme=void 0,Re.setTheme(),this.unsubscribeTheme=Nr.subscribe(Re.setTheme)}disconnectedCallback(){var t;(t=this.unsubscribeTheme)==null||t.call(this)}};Mf=C_([Pe("wcm-theme-context")],Mf);const I_=ze`@keyframes scroll{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(calc(-70px * 9),0,0)}}.wcm-slider{position:relative;overflow-x:hidden;padding:10px 0;margin:0 -20px;width:calc(100% + 40px)}.wcm-track{display:flex;width:calc(70px * 18);animation:scroll 20s linear infinite;opacity:.7}.wcm-track svg{margin:0 5px}wcm-wallet-image{width:60px;height:60px;margin:0 5px;border-radius:var(--wcm-wallet-icon-border-radius)}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-title{display:flex;align-items:center;margin-bottom:10px}.wcm-title svg{margin-right:6px}.wcm-title path{fill:var(--wcm-accent-color)}wcm-modal-footer .wcm-title{padding:0 10px}wcm-button-big{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);filter:drop-shadow(0 0 17px var(--wcm-color-bg-1))}wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-info-footer wcm-text{text-align:center;margin-bottom:15px}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var A_=Object.defineProperty,$_=Object.getOwnPropertyDescriptor,T_=(t,e,r,n)=>{for(var i=n>1?void 0:n?$_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&A_(e,r,i),i};let jc=class extends Ee{onGoToQrcode(){Qe.push("Qrcode")}render(){const{recomendedWallets:t}=zt.state,e=[...t,...t],r=ne.RECOMMENDED_WALLET_AMOUNT*2;return J`<wcm-modal-header title="Connect your wallet" .onAction="${this.onGoToQrcode}" .actionIcon="${We.QRCODE_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-title">${We.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">WalletConnect</wcm-text></div><div class="wcm-slider"><div class="wcm-track">${[...Array(r)].map((n,i)=>{const s=e[i%e.length];return s?J`<wcm-wallet-image walletId="${s.id}" imageId="${s.image_id}"></wcm-wallet-image>`:We.WALLET_PLACEHOLDER})}</div><wcm-button-big @click="${ue.handleAndroidLinking}"><wcm-text variant="medium-regular" color="inverse">Select Wallet</wcm-text></wcm-button-big></div></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">Choose WalletConnect to see supported apps on your device</wcm-text></wcm-info-footer>`}};jc.styles=[Re.globalCss,I_],jc=T_([Pe("wcm-android-wallet-selection")],jc);const R_=ze`@keyframes loading{to{stroke-dashoffset:0}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(1px,0,0)}30%,50%,70%{transform:translate3d(-2px,0,0)}40%,60%{transform:translate3d(2px,0,0)}}:host{display:flex;flex-direction:column;align-items:center}div{position:relative;width:110px;height:110px;display:flex;justify-content:center;align-items:center;margin:40px 0 20px 0;transform:translate3d(0,0,0)}svg{position:absolute;width:110px;height:110px;fill:none;stroke:transparent;stroke-linecap:round;stroke-width:2px;top:0;left:0}use{stroke:var(--wcm-accent-color);animation:loading 1s linear infinite}wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:90px;height:90px}wcm-text{margin-bottom:40px}.wcm-error svg{stroke:var(--wcm-error-color)}.wcm-error use{display:none}.wcm-error{animation:shake .4s cubic-bezier(.36,.07,.19,.97) both}.wcm-stale svg,.wcm-stale use{display:none}`;var P_=Object.defineProperty,N_=Object.getOwnPropertyDescriptor,ri=(t,e,r,n)=>{for(var i=n>1?void 0:n?N_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&P_(e,r,i),i};let Kr=class extends Ee{constructor(){super(...arguments),this.walletId=void 0,this.imageId=void 0,this.isError=!1,this.isStale=!1,this.label=""}svgLoaderTemplate(){var t,e;const r=(e=(t=Nr.state.themeVariables)==null?void 0:t["--wcm-wallet-icon-large-border-radius"])!=null?e:Re.getPreset("--wcm-wallet-icon-large-border-radius");let n=0;r.includes("%")?n=88/100*parseInt(r,10):n=parseInt(r,10),n*=1.17;const i=317-n*1.57,s=425-n*1.8;return J`<svg viewBox="0 0 110 110" width="110" height="110"><rect id="wcm-loader" x="2" y="2" width="106" height="106" rx="${n}"/><use xlink:href="#wcm-loader" stroke-dasharray="106 ${i}" stroke-dashoffset="${s}"></use></svg>`}render(){const t={"wcm-error":this.isError,"wcm-stale":this.isStale};return J`<div class="${Ir(t)}">${this.svgLoaderTemplate()}<wcm-wallet-image walletId="${Bt(this.walletId)}" imageId="${Bt(this.imageId)}"></wcm-wallet-image></div><wcm-text variant="medium-regular" color="${this.isError?"error":"primary"}">${this.isError?"Connection declined":this.label}</wcm-text>`}};Kr.styles=[Re.globalCss,R_],ri([pe()],Kr.prototype,"walletId",2),ri([pe()],Kr.prototype,"imageId",2),ri([pe({type:Boolean})],Kr.prototype,"isError",2),ri([pe({type:Boolean})],Kr.prototype,"isStale",2),ri([pe()],Kr.prototype,"label",2),Kr=ri([Pe("wcm-connector-waiting")],Kr);const ni={manualWallets(){var t,e;const{mobileWallets:r,desktopWallets:n}=Gt.state,i=(t=ni.recentWallet())==null?void 0:t.id,s=ne.isMobile()?r:n,o=s==null?void 0:s.filter(a=>i!==a.id);return(e=ne.isMobile()?o==null?void 0:o.map(({id:a,name:l,links:h})=>({id:a,name:l,mobile:h,links:h})):o==null?void 0:o.map(({id:a,name:l,links:h})=>({id:a,name:l,desktop:h,links:h})))!=null?e:[]},recentWallet(){return ue.getRecentWallet()},recomendedWallets(t=!1){var e;const r=t||(e=ni.recentWallet())==null?void 0:e.id,{recomendedWallets:n}=zt.state;return n.filter(i=>r!==i.id)}},qr={onConnecting(t){ue.goToConnectingView(t)},manualWalletsTemplate(){return ni.manualWallets().map(t=>J`<wcm-wallet-button walletId="${t.id}" name="${t.name}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`)},recomendedWalletsTemplate(t=!1){return ni.recomendedWallets(t).map(e=>J`<wcm-wallet-button name="${e.name}" walletId="${e.id}" imageId="${e.image_id}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`)},recentWalletTemplate(){const t=ni.recentWallet();if(t)return J`<wcm-wallet-button name="${t.name}" walletId="${t.id}" imageId="${Bt(t.image_id)}" .recent="${!0}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`}},L_=ze`.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-desktop-title,.wcm-mobile-title{display:flex;align-items:center}.wcm-mobile-title{justify-content:space-between;margin-bottom:20px;margin-top:-10px}.wcm-desktop-title{margin-bottom:10px;padding:0 10px}.wcm-subtitle{display:flex;align-items:center}.wcm-subtitle:last-child path{fill:var(--wcm-color-fg-3)}.wcm-desktop-title svg,.wcm-mobile-title svg{margin-right:6px}.wcm-desktop-title path,.wcm-mobile-title path{fill:var(--wcm-accent-color)}`;var M_=Object.defineProperty,U_=Object.getOwnPropertyDescriptor,j_=(t,e,r,n)=>{for(var i=n>1?void 0:n?U_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&M_(e,r,i),i};let Fc=class extends Ee{render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Gt.state,r=t!=="ALL"&&e,n=qr.manualWalletsTemplate(),i=qr.recomendedWalletsTemplate();let s=[qr.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>4||r;let a=[];o?a=s.slice(0,3):a=s;const l=!!a.length;return J`<wcm-modal-header .border="${!0}" title="Connect your wallet" .onAction="${ue.handleUriCopy}" .actionIcon="${We.COPY_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-mobile-title"><div class="wcm-subtitle">${We.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">Mobile</wcm-text></div><div class="wcm-subtitle">${We.SCAN_ICON}<wcm-text variant="small-regular" color="secondary">Scan with your wallet</wcm-text></div></div><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>${l?J`<wcm-modal-footer><div class="wcm-desktop-title">${We.DESKTOP_ICON}<wcm-text variant="small-regular" color="accent">Desktop</wcm-text></div><div class="wcm-grid">${a} ${o?J`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-footer>`:null}`}};Fc.styles=[Re.globalCss,L_],Fc=j_([Pe("wcm-desktop-wallet-selection")],Fc);const F_=ze`div{background-color:var(--wcm-color-bg-2);padding:10px 20px 15px 20px;border-top:1px solid var(--wcm-color-bg-3);text-align:center}a{color:var(--wcm-accent-color);text-decoration:none;transition:opacity .2s ease-in-out;display:inline}a:active{opacity:.8}@media(hover:hover){a:hover{opacity:.8}}`;var k_=Object.defineProperty,B_=Object.getOwnPropertyDescriptor,z_=(t,e,r,n)=>{for(var i=n>1?void 0:n?B_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&k_(e,r,i),i};let kc=class extends Ee{render(){const{termsOfServiceUrl:t,privacyPolicyUrl:e}=Gt.state;return t??e?J`<div><wcm-text variant="small-regular" color="secondary">By connecting your wallet to this app, you agree to the app's ${t?J`<a href="${t}" target="_blank" rel="noopener noreferrer">Terms of Service</a>`:null} ${t&&e?"and":null} ${e?J`<a href="${e}" target="_blank" rel="noopener noreferrer">Privacy Policy</a>`:null}</wcm-text></div>`:null}};kc.styles=[Re.globalCss,F_],kc=z_([Pe("wcm-legal-notice")],kc);const W_=ze`div{display:grid;grid-template-columns:repeat(4,80px);margin:0 -10px;justify-content:space-between;row-gap:10px}`;var H_=Object.defineProperty,V_=Object.getOwnPropertyDescriptor,K_=(t,e,r,n)=>{for(var i=n>1?void 0:n?V_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&H_(e,r,i),i};let Bc=class extends Ee{onQrcode(){Qe.push("Qrcode")}render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Gt.state,r=t!=="ALL"&&e,n=qr.manualWalletsTemplate(),i=qr.recomendedWalletsTemplate();let s=[qr.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>8||r;let a=[];o?a=s.slice(0,7):a=s;const l=!!a.length;return J`<wcm-modal-header title="Connect your wallet" .onAction="${this.onQrcode}" .actionIcon="${We.QRCODE_ICON}"></wcm-modal-header>${l?J`<wcm-modal-content><div>${a} ${o?J`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-content>`:null}`}};Bc.styles=[Re.globalCss,W_],Bc=K_([Pe("wcm-mobile-wallet-selection")],Bc);const q_=ze`:host{all:initial}.wcm-overlay{top:0;bottom:0;left:0;right:0;position:fixed;z-index:var(--wcm-z-index);overflow:hidden;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;background-color:var(--wcm-overlay-background-color);backdrop-filter:var(--wcm-overlay-backdrop-filter)}@media(max-height:720px) and (orientation:landscape){.wcm-overlay{overflow:scroll;align-items:flex-start;padding:20px 0}}.wcm-active{pointer-events:auto}.wcm-container{position:relative;max-width:360px;width:100%;outline:0;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) var(--wcm-container-border-radius) var(--wcm-container-border-radius);border:1px solid var(--wcm-color-overlay);overflow:hidden}.wcm-card{width:100%;position:relative;border-radius:var(--wcm-container-border-radius);overflow:hidden;box-shadow:0 6px 14px -6px rgba(10,16,31,.12),0 10px 32px -4px rgba(10,16,31,.1),0 0 0 1px var(--wcm-color-overlay);background-color:var(--wcm-color-bg-1);color:var(--wcm-color-fg-1)}@media(max-width:600px){.wcm-container{max-width:440px;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) 0 0}.wcm-card{border-radius:var(--wcm-container-border-radius) var(--wcm-container-border-radius) 0 0}.wcm-overlay{align-items:flex-end}}@media(max-width:440px){.wcm-container{border:0}}`;var G_=Object.defineProperty,Y_=Object.getOwnPropertyDescriptor,zc=(t,e,r,n)=>{for(var i=n>1?void 0:n?Y_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&G_(e,r,i),i};let ii=class extends Ee{constructor(){super(),this.open=!1,this.active=!1,this.unsubscribeModal=void 0,this.abortController=void 0,this.unsubscribeModal=tn.subscribe(t=>{t.open?this.onOpenModalEvent():this.onCloseModalEvent()})}disconnectedCallback(){var t;(t=this.unsubscribeModal)==null||t.call(this)}get overlayEl(){return ue.getShadowRootElement(this,".wcm-overlay")}get containerEl(){return ue.getShadowRootElement(this,".wcm-container")}toggleBodyScroll(t){if(document.querySelector("body"))if(t){const e=document.getElementById("wcm-styles");e==null||e.remove()}else document.head.insertAdjacentHTML("beforeend",'<style id="wcm-styles">html,body{touch-action:none;overflow:hidden;overscroll-behavior:contain;}</style>')}onCloseModal(t){t.target===t.currentTarget&&tn.close()}onOpenModalEvent(){this.toggleBodyScroll(!1),this.addKeyboardEvents(),this.open=!0,setTimeout(async()=>{const t=ue.isMobileAnimation()?{y:["50vh","0vh"]}:{scale:[.98,1]},e=.1,r=.2;await Promise.all([En(this.overlayEl,{opacity:[0,1]},{delay:e,duration:r}).finished,En(this.containerEl,t,{delay:e,duration:r}).finished]),this.active=!0},0)}async onCloseModalEvent(){this.toggleBodyScroll(!0),this.removeKeyboardEvents();const t=ue.isMobileAnimation()?{y:["0vh","50vh"]}:{scale:[1,.98]},e=.2;await Promise.all([En(this.overlayEl,{opacity:[1,0]},{duration:e}).finished,En(this.containerEl,t,{duration:e}).finished]),this.containerEl.removeAttribute("style"),this.active=!1,this.open=!1}addKeyboardEvents(){this.abortController=new AbortController,window.addEventListener("keydown",t=>{var e;t.key==="Escape"?tn.close():t.key==="Tab"&&((e=t.target)!=null&&e.tagName.includes("wcm-")||this.containerEl.focus())},this.abortController),this.containerEl.focus()}removeKeyboardEvents(){var t;(t=this.abortController)==null||t.abort(),this.abortController=void 0}render(){const t={"wcm-overlay":!0,"wcm-active":this.active};return J`<wcm-explorer-context></wcm-explorer-context><wcm-theme-context></wcm-theme-context><div id="wcm-modal" class="${Ir(t)}" @click="${this.onCloseModal}" role="alertdialog" aria-modal="true"><div class="wcm-container" tabindex="0">${this.open?J`<wcm-modal-backcard></wcm-modal-backcard><div class="wcm-card"><wcm-modal-router></wcm-modal-router><wcm-modal-toast></wcm-modal-toast></div>`:null}</div></div>`}};ii.styles=[Re.globalCss,q_],zc([Kt()],ii.prototype,"open",2),zc([Kt()],ii.prototype,"active",2),ii=zc([Pe("wcm-modal")],ii);const J_=ze`div{display:flex;margin-top:15px}slot{display:inline-block;margin:0 5px}wcm-button{margin:0 5px}`;var Z_=Object.defineProperty,X_=Object.getOwnPropertyDescriptor,Zi=(t,e,r,n)=>{for(var i=n>1?void 0:n?X_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Z_(e,r,i),i};let xn=class extends Ee{constructor(){super(...arguments),this.isMobile=!1,this.isDesktop=!1,this.isWeb=!1,this.isRetry=!1}onMobile(){ne.isMobile()?Qe.replace("MobileConnecting"):Qe.replace("MobileQrcodeConnecting")}onDesktop(){Qe.replace("DesktopConnecting")}onWeb(){Qe.replace("WebConnecting")}render(){return J`<div>${this.isRetry?J`<slot></slot>`:null} ${this.isMobile?J`<wcm-button .onClick="${this.onMobile}" .iconLeft="${We.MOBILE_ICON}" variant="outline">Mobile</wcm-button>`:null} ${this.isDesktop?J`<wcm-button .onClick="${this.onDesktop}" .iconLeft="${We.DESKTOP_ICON}" variant="outline">Desktop</wcm-button>`:null} ${this.isWeb?J`<wcm-button .onClick="${this.onWeb}" .iconLeft="${We.GLOBE_ICON}" variant="outline">Web</wcm-button>`:null}</div>`}};xn.styles=[Re.globalCss,J_],Zi([pe({type:Boolean})],xn.prototype,"isMobile",2),Zi([pe({type:Boolean})],xn.prototype,"isDesktop",2),Zi([pe({type:Boolean})],xn.prototype,"isWeb",2),Zi([pe({type:Boolean})],xn.prototype,"isRetry",2),xn=Zi([Pe("wcm-platform-selection")],xn);const Q_=ze`button{display:flex;flex-direction:column;padding:5px 10px;border-radius:var(--wcm-button-hover-highlight-border-radius);height:100%;justify-content:flex-start}.wcm-icons{width:60px;height:60px;display:flex;flex-wrap:wrap;padding:7px;border-radius:var(--wcm-wallet-icon-border-radius);justify-content:space-between;align-items:center;margin-bottom:5px;background-color:var(--wcm-color-bg-2);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}.wcm-icons img{width:21px;height:21px;object-fit:cover;object-position:center;border-radius:calc(var(--wcm-wallet-icon-border-radius)/ 2);border:1px solid var(--wcm-color-overlay)}.wcm-icons svg{width:21px;height:21px}.wcm-icons img:nth-child(1),.wcm-icons img:nth-child(2),.wcm-icons svg:nth-child(1),.wcm-icons svg:nth-child(2){margin-bottom:4px}wcm-text{width:100%;text-align:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var eE=Object.defineProperty,tE=Object.getOwnPropertyDescriptor,rE=(t,e,r,n)=>{for(var i=n>1?void 0:n?tE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&eE(e,r,i),i};let Wc=class extends Ee{onClick(){Qe.push("WalletExplorer")}render(){const{recomendedWallets:t}=zt.state,e=ni.manualWallets(),r=[...t,...e].reverse().slice(0,4);return J`<button @click="${this.onClick}"><div class="wcm-icons">${r.map(n=>{const i=ue.getWalletIcon(n);if(i)return J`<img src="${i}">`;const s=ue.getWalletIcon({id:n.id});return s?J`<img src="${s}">`:We.WALLET_PLACEHOLDER})} ${[...Array(4-r.length)].map(()=>We.WALLET_PLACEHOLDER)}</div><wcm-text variant="xsmall-regular">View All</wcm-text></button>`}};Wc.styles=[Re.globalCss,Q_],Wc=rE([Pe("wcm-view-all-wallets-button")],Wc);const nE=ze`.wcm-qr-container{width:100%;display:flex;justify-content:center;align-items:center;aspect-ratio:1/1}`;var iE=Object.defineProperty,sE=Object.getOwnPropertyDescriptor,Qs=(t,e,r,n)=>{for(var i=n>1?void 0:n?sE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&iE(e,r,i),i};let si=class extends Ee{constructor(){super(),this.walletId="",this.imageId="",this.uri="",setTimeout(()=>{const{walletConnectUri:t}=ut.state;this.uri=t},0)}get overlayEl(){return ue.getShadowRootElement(this,".wcm-qr-container")}render(){return J`<div class="wcm-qr-container">${this.uri?J`<wcm-qrcode size="${this.overlayEl.offsetWidth}" uri="${this.uri}" walletId="${Bt(this.walletId)}" imageId="${Bt(this.imageId)}"></wcm-qrcode>`:J`<wcm-spinner></wcm-spinner>`}</div>`}};si.styles=[Re.globalCss,nE],Qs([pe()],si.prototype,"walletId",2),Qs([pe()],si.prototype,"imageId",2),Qs([Kt()],si.prototype,"uri",2),si=Qs([Pe("wcm-walletconnect-qr")],si);var oE=Object.defineProperty,aE=Object.getOwnPropertyDescriptor,cE=(t,e,r,n)=>{for(var i=n>1?void 0:n?aE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&oE(e,r,i),i};let Hc=class extends Ee{viewTemplate(){return ne.isAndroid()?J`<wcm-android-wallet-selection></wcm-android-wallet-selection>`:ne.isMobile()?J`<wcm-mobile-wallet-selection></wcm-mobile-wallet-selection>`:J`<wcm-desktop-wallet-selection></wcm-desktop-wallet-selection>`}render(){return J`${this.viewTemplate()}<wcm-legal-notice></wcm-legal-notice>`}};Hc.styles=[Re.globalCss],Hc=cE([Pe("wcm-connect-wallet-view")],Hc);const lE=ze`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var uE=Object.defineProperty,hE=Object.getOwnPropertyDescriptor,Uf=(t,e,r,n)=>{for(var i=n>1?void 0:n?hE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&uE(e,r,i),i};let eo=class extends Ee{constructor(){super(),this.isError=!1,this.openDesktopApp()}onFormatAndRedirect(t){const{desktop:e,name:r}=ne.getWalletRouterData(),n=e==null?void 0:e.native;if(n){const i=ne.formatNativeUrl(n,t,r);ne.openHref(i,"_self")}}openDesktopApp(){const{walletConnectUri:t}=ut.state,e=ne.getWalletRouterData();ue.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=ne.getWalletRouterData(),{isMobile:n,isWeb:i}=ue.getCachedRouterWalletPlatforms();return J`<wcm-modal-header title="${t}" .onAction="${ue.handleUriCopy}" .actionIcon="${We.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Bt(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Connection can continue loading if ${t} is not installed on your device`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isWeb="${i}" .isRetry="${!0}"><wcm-button .onClick="${this.openDesktopApp.bind(this)}" .iconRight="${We.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};eo.styles=[Re.globalCss,lE],Uf([Kt()],eo.prototype,"isError",2),eo=Uf([Pe("wcm-desktop-connecting-view")],eo);const dE=ze`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}wcm-button{margin-top:15px}`;var fE=Object.defineProperty,pE=Object.getOwnPropertyDescriptor,gE=(t,e,r,n)=>{for(var i=n>1?void 0:n?pE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&fE(e,r,i),i};let Vc=class extends Ee{onInstall(t){t&&ne.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,homepage:n}=ne.getWalletRouterData();return J`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Bt(r)}" label="Not Detected" .isStale="${!0}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Download ${t} to continue. If multiple browser extensions are installed, disable non ${t} ones and try again`}</wcm-text><wcm-button .onClick="${()=>this.onInstall(n)}" .iconLeft="${We.ARROW_DOWN_ICON}">Download</wcm-button></wcm-info-footer>`}};Vc.styles=[Re.globalCss,dE],Vc=gE([Pe("wcm-install-wallet-view")],Vc);const mE=ze`wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:96px;height:96px;margin-bottom:20px}wcm-info-footer{display:flex;width:100%}.wcm-app-store{justify-content:space-between}.wcm-app-store wcm-wallet-image{margin-right:10px;margin-bottom:0;width:28px;height:28px;border-radius:var(--wcm-wallet-icon-small-border-radius)}.wcm-app-store div{display:flex;align-items:center}.wcm-app-store wcm-button{margin-right:-10px}.wcm-note{flex-direction:column;align-items:center;padding:5px 0}.wcm-note wcm-text{text-align:center}wcm-platform-selection{margin-top:-15px}.wcm-note wcm-text{margin-top:15px}.wcm-note wcm-text span{color:var(--wcm-accent-color)}`;var wE=Object.defineProperty,vE=Object.getOwnPropertyDescriptor,jf=(t,e,r,n)=>{for(var i=n>1?void 0:n?vE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&wE(e,r,i),i};let to=class extends Ee{constructor(){super(),this.isError=!1,this.openMobileApp()}onFormatAndRedirect(t,e=!1){const{mobile:r,name:n}=ne.getWalletRouterData(),i=r==null?void 0:r.native,s=r==null?void 0:r.universal;if(i&&!e){const o=ne.formatNativeUrl(i,t,n);ne.openHref(o,"_self")}else if(s){const o=ne.formatUniversalUrl(s,t,n);ne.openHref(o,"_self")}}openMobileApp(t=!1){const{walletConnectUri:e}=ut.state,r=ne.getWalletRouterData();ue.setRecentWallet(r),e&&this.onFormatAndRedirect(e,t)}onGoToAppStore(t){t&&ne.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,app:n,mobile:i}=ne.getWalletRouterData(),{isWeb:s}=ue.getCachedRouterWalletPlatforms(),o=n==null?void 0:n.ios,a=i==null?void 0:i.universal;return J`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Bt(r)}" label="Tap 'Open' to continue…" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer class="wcm-note"><wcm-platform-selection .isWeb="${s}" .isRetry="${!0}"><wcm-button .onClick="${()=>this.openMobileApp(!1)}" .iconRight="${We.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection>${a?J`<wcm-text color="secondary" variant="small-thin">Still doesn't work? <span tabindex="0" @click="${()=>this.openMobileApp(!0)}">Try this alternate link</span></wcm-text>`:null}</wcm-info-footer><wcm-info-footer class="wcm-app-store"><div><wcm-wallet-image walletId="${e}" imageId="${Bt(r)}"></wcm-wallet-image><wcm-text>${`Get ${t}`}</wcm-text></div><wcm-button .iconRight="${We.ARROW_RIGHT_ICON}" .onClick="${()=>this.onGoToAppStore(o)}" variant="ghost">App Store</wcm-button></wcm-info-footer>`}};to.styles=[Re.globalCss,mE],jf([Kt()],to.prototype,"isError",2),to=jf([Pe("wcm-mobile-connecting-view")],to);const yE=ze`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var bE=Object.defineProperty,_E=Object.getOwnPropertyDescriptor,EE=(t,e,r,n)=>{for(var i=n>1?void 0:n?_E(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&bE(e,r,i),i};let Kc=class extends Ee{render(){const{name:t,id:e,image_id:r}=ne.getWalletRouterData(),{isDesktop:n,isWeb:i}=ue.getCachedRouterWalletPlatforms();return J`<wcm-modal-header title="${t}" .onAction="${ue.handleUriCopy}" .actionIcon="${We.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr walletId="${e}" imageId="${Bt(r)}"></wcm-walletconnect-qr></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Scan this QR Code with your phone's camera or inside ${t} app`}</wcm-text><wcm-platform-selection .isDesktop="${n}" .isWeb="${i}"></wcm-platform-selection></wcm-info-footer>`}};Kc.styles=[Re.globalCss,yE],Kc=EE([Pe("wcm-mobile-qr-connecting-view")],Kc);var SE=Object.defineProperty,xE=Object.getOwnPropertyDescriptor,DE=(t,e,r,n)=>{for(var i=n>1?void 0:n?xE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&SE(e,r,i),i};let qc=class extends Ee{render(){return J`<wcm-modal-header title="Scan the code" .onAction="${ue.handleUriCopy}" .actionIcon="${We.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>`}};qc.styles=[Re.globalCss],qc=DE([Pe("wcm-qrcode-view")],qc);const OE=ze`wcm-modal-content{height:clamp(200px,60vh,600px);display:block;overflow:scroll;scrollbar-width:none;position:relative;margin-top:1px}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between;margin:-15px -10px;padding-top:20px}wcm-modal-content::after,wcm-modal-content::before{content:'';position:fixed;pointer-events:none;z-index:1;width:100%;height:20px;opacity:1}wcm-modal-content::before{box-shadow:0 -1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(var(--wcm-color-bg-1),rgba(255,255,255,0))}wcm-modal-content::after{box-shadow:0 1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(rgba(255,255,255,0),var(--wcm-color-bg-1));top:calc(100% - 20px)}wcm-modal-content::-webkit-scrollbar{display:none}.wcm-placeholder-block{display:flex;justify-content:center;align-items:center;height:100px;overflow:hidden}.wcm-empty,.wcm-loading{display:flex}.wcm-loading .wcm-placeholder-block{height:100%}.wcm-end-reached .wcm-placeholder-block{height:0;opacity:0}.wcm-empty .wcm-placeholder-block{opacity:1;height:100%}wcm-wallet-button{margin:calc((100% - 60px)/ 3) 0}`;var CE=Object.defineProperty,IE=Object.getOwnPropertyDescriptor,Xi=(t,e,r,n)=>{for(var i=n>1?void 0:n?IE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&CE(e,r,i),i};const Gc=40;let Dn=class extends Ee{constructor(){super(...arguments),this.loading=!zt.state.wallets.listings.length,this.firstFetch=!zt.state.wallets.listings.length,this.search="",this.endReached=!1,this.intersectionObserver=void 0,this.searchDebounce=ue.debounce(t=>{t.length>=1?(this.firstFetch=!0,this.endReached=!1,this.search=t,zt.resetSearch(),this.fetchWallets()):this.search&&(this.search="",this.endReached=this.isLastPage(),zt.resetSearch())})}firstUpdated(){this.createPaginationObserver()}disconnectedCallback(){var t;(t=this.intersectionObserver)==null||t.disconnect()}get placeholderEl(){return ue.getShadowRootElement(this,".wcm-placeholder-block")}createPaginationObserver(){this.intersectionObserver=new IntersectionObserver(([t])=>{t.isIntersecting&&!(this.search&&this.firstFetch)&&this.fetchWallets()}),this.intersectionObserver.observe(this.placeholderEl)}isLastPage(){const{wallets:t,search:e}=zt.state,{listings:r,total:n}=this.search?e:t;return n<=Gc||r.length>=n}async fetchWallets(){var t;const{wallets:e,search:r}=zt.state,{listings:n,total:i,page:s}=this.search?r:e;if(!this.endReached&&(this.firstFetch||i>Gc&&n.length<i))try{this.loading=!0;const o=(t=ut.state.chains)==null?void 0:t.join(","),{listings:a}=await zt.getWallets({page:this.firstFetch?1:s+1,entries:Gc,search:this.search,version:2,chains:o}),l=a.map(h=>ue.getWalletIcon(h));await Promise.all([...l.map(async h=>ue.preloadImage(h)),ne.wait(300)]),this.endReached=this.isLastPage()}catch(o){console.error(o),Lr.openToast(ue.getErrorMessage(o),"error")}finally{this.loading=!1,this.firstFetch=!1}}onConnect(t){ne.isAndroid()?ue.handleMobileLinking(t):ue.goToConnectingView(t)}onSearchChange(t){const{value:e}=t.target;this.searchDebounce(e)}render(){const{wallets:t,search:e}=zt.state,{listings:r}=this.search?e:t,n=this.loading&&!r.length,i=this.search.length>=3;let s=qr.manualWalletsTemplate(),o=qr.recomendedWalletsTemplate(!0);i&&(s=s.filter(({values:h})=>ue.caseSafeIncludes(h[0],this.search)),o=o.filter(({values:h})=>ue.caseSafeIncludes(h[0],this.search)));const a=!this.loading&&!r.length&&!o.length,l={"wcm-loading":n,"wcm-end-reached":this.endReached||!this.loading,"wcm-empty":a};return J`<wcm-modal-header><wcm-search-input .onChange="${this.onSearchChange.bind(this)}"></wcm-search-input></wcm-modal-header><wcm-modal-content class="${Ir(l)}"><div class="wcm-grid">${n?null:s} ${n?null:o} ${n?null:r.map(h=>J`${h?J`<wcm-wallet-button imageId="${h.image_id}" name="${h.name}" walletId="${h.id}" .onClick="${()=>this.onConnect(h)}"></wcm-wallet-button>`:null}`)}</div><div class="wcm-placeholder-block">${a?J`<wcm-text variant="big-bold" color="secondary">No results found</wcm-text>`:null} ${!a&&this.loading?J`<wcm-spinner></wcm-spinner>`:null}</div></wcm-modal-content>`}};Dn.styles=[Re.globalCss,OE],Xi([Kt()],Dn.prototype,"loading",2),Xi([Kt()],Dn.prototype,"firstFetch",2),Xi([Kt()],Dn.prototype,"search",2),Xi([Kt()],Dn.prototype,"endReached",2),Dn=Xi([Pe("wcm-wallet-explorer-view")],Dn);const AE=ze`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var $E=Object.defineProperty,TE=Object.getOwnPropertyDescriptor,Ff=(t,e,r,n)=>{for(var i=n>1?void 0:n?TE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&$E(e,r,i),i};let ro=class extends Ee{constructor(){super(),this.isError=!1,this.openWebWallet()}onFormatAndRedirect(t){const{desktop:e,name:r}=ne.getWalletRouterData(),n=e==null?void 0:e.universal;if(n){const i=ne.formatUniversalUrl(n,t,r);ne.openHref(i,"_blank")}}openWebWallet(){const{walletConnectUri:t}=ut.state,e=ne.getWalletRouterData();ue.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=ne.getWalletRouterData(),{isMobile:n,isDesktop:i}=ue.getCachedRouterWalletPlatforms(),s=ne.isMobile();return J`<wcm-modal-header title="${t}" .onAction="${ue.handleUriCopy}" .actionIcon="${We.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Bt(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`${t} web app has opened in a new tab. Go there, accept the connection, and come back`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isDesktop="${s?!1:i}" .isRetry="${!0}"><wcm-button .onClick="${this.openWebWallet.bind(this)}" .iconRight="${We.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};ro.styles=[Re.globalCss,AE],Ff([Kt()],ro.prototype,"isError",2),ro=Ff([Pe("wcm-web-connecting-view")],ro);const RE=Object.freeze(Object.defineProperty({__proto__:null,get WcmModal(){return ii},get WcmQrCode(){return $r}},Symbol.toStringTag,{value:"Module"}));Fe.Asset=x2,Fe.AssetType=Od,Fe.DAI_ABI=O2,Fe.DAI_ADDRESS=D2,Fe.PuzzleWalletProvider=Wb,Fe.PuzzleWeb3Modal=zb,Fe.fromBaseUnits=Dd,Fe.projectId=id,Fe.signClient_puzzleProps=Bb,Fe.toBaseUnits=E2,Fe.useAccount=p2,Fe.useBalance=g2,Fe.useConnect=m2,Fe.useDeployProgram=w2,Fe.useExecuteProgram=v2,Fe.useInitWallet=xd,Fe.usePuzzleFees=y2,Fe.useRecords=b2,Fe.useTransferCredits=_2,Fe.walletURL=xa,Fe.wc_aleo_chains=Is,Fe.wc_aleo_methods=Sa,Fe.wc_aztec_chains=Ea,Fe.wc_aztec_methods=nd,Fe.wc_events=As,Fe.web3modal_puzzle_props=sd,Object.defineProperty(Fe,Symbol.toStringTag,{value:"Module"})});
