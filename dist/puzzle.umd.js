(function(J,mt){typeof exports=="object"&&typeof module<"u"?mt(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],mt):(J=typeof globalThis<"u"?globalThis:J||self,mt(J["@puzzlehq/sdk"]=J["@puzzlehq/sdk"]||{},J.React))})(this,function(J,mt){"use strict";function Q0(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:()=>t[r]})}}return e.default=t,Object.freeze(e)}const gr=Q0(mt),Y0={name:"@puzzlehq/sdk",displayName:"Puzzle SDK",version:"0.1.36",description:"Your portal to privacy",main:"./dist/puzzle.cjs.js",module:"./dist/puzzle.es.js",browser:"./dist/puzzle.umd.js",types:"./dist/types/src/index.d.ts",exports:{".":{import:"./dist/puzzle.es.js",require:"./dist/puzzle.cjs.js",browser:"./dist/puzzle.umd.js",types:"./dist/types/src/index.d.ts"}},type:"module",scripts:{build:"vite build && tsc --declaration --emitDeclarationOnly --outDir dist/types","type-check":"tsc --noEmit"},dependencies:{"@tanstack/react-query":"^4.29.5","@trpc/client":"^10.9.0","@trpc/react-query":"^10.9.0","@trpc/server":"^10.8.1","@types/debug":"^4.1.7","@walletconnect/modal-sign-html":"^2.6.2","@walletconnect/types":"^2.9.0","@walletconnect/utils":"^2.9.0",debug:"^4.3.4",eventemitter3:"^5.0.1",events:"^3.3.0",immer:"^9.0.19",react:"^18.2.0",ws:"^8.13.0",zustand:"^4.3.9"},devDependencies:{"@puzzlehq/types":"1.0.7","@types/chrome":"^0.0.228","@types/node":"^18.11.18","@types/react":"^18.0.27","@types/react-dom":"^18.0.10",typescript:"^4.9.4",vite:"^4.4.7"},repository:{type:"git",url:"git+https://github.com/puzzlehq/puzzle-sdk.git"},keywords:["puzzle","aleo","aztec","web3","crypto\\"],author:"Puzzle",license:"ISC",bugs:{url:"https://github.com/puzzlehq/puzzle-sdk/issues"},homepage:"https://github.com/puzzlehq/puzzle-sdk#readme",pnpm:{patchedDependencies:{"@walletconnect/keyvaluestorage@1.0.2":"patches/@walletconnect__keyvaluestorage@1.0.2.patch"}}},J0=Symbol(),Pu=Object.getPrototypeOf,Wa=new WeakMap,X0=t=>t&&(Wa.has(t)?Wa.get(t):Pu(t)===Object.prototype||Pu(t)===Array.prototype),eg=t=>X0(t)&&t[J0]||null,$u=(t,e=!0)=>{Wa.set(t,e)},Va=t=>typeof t=="object"&&t!==null,On=new WeakMap,_o=new WeakSet,tg=(t=Object.is,e=(u,h)=>new Proxy(u,h),r=u=>Va(u)&&!_o.has(u)&&(Array.isArray(u)||!(Symbol.iterator in u))&&!(u instanceof WeakMap)&&!(u instanceof WeakSet)&&!(u instanceof Error)&&!(u instanceof Number)&&!(u instanceof Date)&&!(u instanceof String)&&!(u instanceof RegExp)&&!(u instanceof ArrayBuffer),n=u=>{switch(u.status){case"fulfilled":return u.value;case"rejected":throw u.reason;default:throw u}},i=new WeakMap,s=(u,h,f=n)=>{const p=i.get(u);if((p==null?void 0:p[0])===h)return p[1];const y=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u));return $u(y,!0),i.set(u,[h,y]),Reflect.ownKeys(u).forEach(w=>{if(Object.getOwnPropertyDescriptor(y,w))return;const S=Reflect.get(u,w),E={value:S,enumerable:!0,configurable:!0};if(_o.has(S))$u(S,!1);else if(S instanceof Promise)delete E.value,E.get=()=>f(S);else if(On.has(S)){const[I,b]=On.get(S);E.value=s(I,b(),f)}Object.defineProperty(y,w,E)}),Object.preventExtensions(y)},o=new WeakMap,a=[1,1],c=u=>{if(!Va(u))throw new Error("object required");const h=o.get(u);if(h)return h;let f=a[0];const p=new Set,y=(P,$=++a[0])=>{f!==$&&(f=$,p.forEach(z=>z(P,$)))};let w=a[1];const S=(P=++a[1])=>(w!==P&&!p.size&&(w=P,I.forEach(([$])=>{const z=$[1](P);z>f&&(f=z)})),f),E=P=>($,z)=>{const W=[...$];W[1]=[P,...W[1]],y(W,z)},I=new Map,b=(P,$)=>{if(p.size){const z=$[3](E(P));I.set(P,[$,z])}else I.set(P,[$])},C=P=>{var $;const z=I.get(P);z&&(I.delete(P),($=z[1])==null||$.call(z))},v=P=>(p.add(P),p.size===1&&I.forEach(([z,W],G)=>{const N=z[3](E(G));I.set(G,[z,N])}),()=>{p.delete(P),p.size===0&&I.forEach(([z,W],G)=>{W&&(W(),I.set(G,[z]))})}),_=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u)),l=e(_,{deleteProperty(P,$){const z=Reflect.get(P,$);C($);const W=Reflect.deleteProperty(P,$);return W&&y(["delete",[$],z]),W},set(P,$,z,W){const G=Reflect.has(P,$),N=Reflect.get(P,$,W);if(G&&(t(N,z)||o.has(z)&&t(N,o.get(z))))return!0;C($),Va(z)&&(z=eg(z)||z);let j=z;if(z instanceof Promise)z.then(oe=>{z.status="fulfilled",z.value=oe,y(["resolve",[$],oe])}).catch(oe=>{z.status="rejected",z.reason=oe,y(["reject",[$],oe])});else{!On.has(z)&&r(z)&&(j=c(z));const oe=!_o.has(j)&&On.get(j);oe&&b($,oe)}return Reflect.set(P,$,j,W),y(["set",[$],z,N]),!0}});o.set(u,l);const m=[_,S,s,v];return On.set(l,m),Reflect.ownKeys(u).forEach(P=>{const $=Object.getOwnPropertyDescriptor(u,P);"value"in $&&(l[P]=u[P],delete $.value,delete $.writable),Object.defineProperty(_,P,$)}),l})=>[c,On,_o,t,e,r,n,i,s,o,a],[rg]=tg();function In(t={}){return rg(t)}function Gn(t,e,r){const n=On.get(t);let i;const s=[],o=n[3];let a=!1;const u=o(h=>{if(s.push(h),r){e(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,u()}}function ng(t,e){const r=On.get(t),[n,i,s]=r;return s(n,i(),e)}const Xt=In({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),Nt={state:Xt,subscribe(t){return Gn(Xt,()=>t(Xt))},push(t,e){t!==Xt.view&&(Xt.view=t,e&&(Xt.data=e),Xt.history.push(t))},reset(t){Xt.view=t,Xt.history=[t]},replace(t){Xt.history.length>1&&(Xt.history[Xt.history.length-1]=t,Xt.view=t)},goBack(){if(Xt.history.length>1){Xt.history.pop();const[t]=Xt.history.slice(-1);Xt.view=t}},setData(t){Xt.data=t}},we={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return we.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const t=navigator.userAgent.toLowerCase();return we.isMobile()&&(t.includes("iphone")||t.includes("ipad"))},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},isArray(t){return Array.isArray(t)&&t.length>0},formatNativeUrl(t,e,r){if(we.isHttpUrl(t))return this.formatUniversalUrl(t,e,r);let n=t;n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},formatUniversalUrl(t,e,r){if(!we.isHttpUrl(t))return this.formatNativeUrl(t,e,r);let n=t;n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},async wait(t){return new Promise(e=>{setTimeout(e,t)})},openHref(t,e){window.open(t,e,"noreferrer noopener")},setWalletConnectDeepLink(t,e){try{localStorage.setItem(we.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(t){try{const[e]=t.split("?");localStorage.setItem(we.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(we.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(we.WCM_VERSION,"2.6.2")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var t;const e=(t=Nt.state.data)==null?void 0:t.Wallet;if(!e)throw new Error('Missing "Wallet" view data');return e}},ig=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),ar=In({enabled:ig,userSessionId:"",events:[],connectedWalletId:void 0}),Nu={state:ar,subscribe(t){return Gn(ar.events,()=>t(ng(ar.events[ar.events.length-1])))},initialize(){ar.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(ar.userSessionId=crypto.randomUUID())},setConnectedWalletId(t){ar.connectedWalletId=t},click(t){if(ar.enabled){const e={type:"CLICK",name:t.name,userSessionId:ar.userSessionId,timestamp:Date.now(),data:t};ar.events.push(e)}},track(t){if(ar.enabled){const e={type:"TRACK",name:t.name,userSessionId:ar.userSessionId,timestamp:Date.now(),data:t};ar.events.push(e)}},view(t){if(ar.enabled){const e={type:"VIEW",name:t.name,userSessionId:ar.userSessionId,timestamp:Date.now(),data:t};ar.events.push(e)}}},en=In({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),Vt={state:en,subscribe(t){return Gn(en,()=>t(en))},setChains(t){en.chains=t},setWalletConnectUri(t){en.walletConnectUri=t},setIsCustomDesktop(t){en.isCustomDesktop=t},setIsCustomMobile(t){en.isCustomMobile=t},setIsDataLoaded(t){en.isDataLoaded=t},setIsUiLoaded(t){en.isUiLoaded=t},setIsAuth(t){en.isAuth=t}},Eo=In({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),Rr={state:Eo,subscribe(t){return Gn(Eo,()=>t(Eo))},setConfig(t){var e,r;Nu.initialize(),Vt.setChains(t.chains),Vt.setIsAuth(!!t.enableAuthMode),Vt.setIsCustomMobile(!!((e=t.mobileWallets)!=null&&e.length)),Vt.setIsCustomDesktop(!!((r=t.desktopWallets)!=null&&r.length)),we.setModalVersionInStorage(),Object.assign(Eo,t)}};var sg=Object.defineProperty,Lu=Object.getOwnPropertySymbols,og=Object.prototype.hasOwnProperty,ag=Object.prototype.propertyIsEnumerable,Mu=(t,e,r)=>e in t?sg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,cg=(t,e)=>{for(var r in e||(e={}))og.call(e,r)&&Mu(t,r,e[r]);if(Lu)for(var r of Lu(e))ag.call(e,r)&&Mu(t,r,e[r]);return t};const Ha="https://explorer-api.walletconnect.com",Ka="wcm",Za="js-2.6.2";async function So(t,e){const r=cg({sdkType:Ka,sdkVersion:Za},e),n=new URL(t,Ha);return n.searchParams.append("projectId",Rr.state.projectId),Object.entries(r).forEach(([i,s])=>{s&&n.searchParams.append(i,String(s))}),(await fetch(n)).json()}const Qn={async getDesktopListings(t){return So("/w3m/v1/getDesktopListings",t)},async getMobileListings(t){return So("/w3m/v1/getMobileListings",t)},async getInjectedListings(t){return So("/w3m/v1/getInjectedListings",t)},async getAllListings(t){return So("/w3m/v1/getAllListings",t)},getWalletImageUrl(t){return`${Ha}/w3m/v1/getWalletImage/${t}?projectId=${Rr.state.projectId}&sdkType=${Ka}&sdkVersion=${Za}`},getAssetImageUrl(t){return`${Ha}/w3m/v1/getAssetImage/${t}?projectId=${Rr.state.projectId}&sdkType=${Ka}&sdkVersion=${Za}`}};var lg=Object.defineProperty,ku=Object.getOwnPropertySymbols,ug=Object.prototype.hasOwnProperty,hg=Object.prototype.propertyIsEnumerable,Fu=(t,e,r)=>e in t?lg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,dg=(t,e)=>{for(var r in e||(e={}))ug.call(e,r)&&Fu(t,r,e[r]);if(ku)for(var r of ku(e))hg.call(e,r)&&Fu(t,r,e[r]);return t};const Uu=we.isMobile(),tn=In({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),xr={state:tn,async getRecomendedWallets(){const{explorerRecommendedWalletIds:t,explorerExcludedWalletIds:e}=Rr.state;if(t==="NONE"||e==="ALL"&&!t)return tn.recomendedWallets;if(we.isArray(t)){const r={recommendedIds:t.join(",")},{listings:n}=await Qn.getAllListings(r),i=Object.values(n);i.sort((s,o)=>{const a=t.indexOf(s.id),c=t.indexOf(o.id);return a-c}),tn.recomendedWallets=i}else{const{chains:r,isAuth:n}=Vt.state,i=r==null?void 0:r.join(","),s=we.isArray(e),o={page:1,sdks:n?"auth_v1":void 0,entries:we.RECOMMENDED_WALLET_AMOUNT,chains:i,version:2,excludedIds:s?e.join(","):void 0},{listings:a}=Uu?await Qn.getMobileListings(o):await Qn.getDesktopListings(o);tn.recomendedWallets=Object.values(a)}return tn.recomendedWallets},async getWallets(t){const e=dg({},t),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:n}=Rr.state,{recomendedWallets:i}=tn;if(n==="ALL")return tn.wallets;i.length?e.excludedIds=i.map(f=>f.id).join(","):we.isArray(r)&&(e.excludedIds=r.join(",")),we.isArray(n)&&(e.excludedIds=[e.excludedIds,n].filter(Boolean).join(",")),Vt.state.isAuth&&(e.sdks="auth_v1");const{page:s,search:o}=t,{listings:a,total:c}=Uu?await Qn.getMobileListings(e):await Qn.getDesktopListings(e),u=Object.values(a),h=o?"search":"wallets";return tn[h]={listings:[...tn[h].listings,...u],total:c,page:s??1},{listings:u,total:c}},getWalletImageUrl(t){return Qn.getWalletImageUrl(t)},getAssetImageUrl(t){return Qn.getAssetImageUrl(t)},resetSearch(){tn.search={listings:[],total:0,page:1}}},Ci=In({open:!1}),Yn={state:Ci,subscribe(t){return Gn(Ci,()=>t(Ci))},async open(t){return new Promise(e=>{const{isUiLoaded:r,isDataLoaded:n}=Vt.state;if(we.removeWalletConnectDeepLink(),Vt.setWalletConnectUri(t==null?void 0:t.uri),Vt.setChains(t==null?void 0:t.chains),Nt.reset("ConnectWallet"),r&&n)Ci.open=!0,e();else{const i=setInterval(()=>{const s=Vt.state;s.isUiLoaded&&s.isDataLoaded&&(clearInterval(i),Ci.open=!0,e())},200)}})},close(){Ci.open=!1}};var fg=Object.defineProperty,ju=Object.getOwnPropertySymbols,pg=Object.prototype.hasOwnProperty,gg=Object.prototype.propertyIsEnumerable,Bu=(t,e,r)=>e in t?fg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mg=(t,e)=>{for(var r in e||(e={}))pg.call(e,r)&&Bu(t,r,e[r]);if(ju)for(var r of ju(e))gg.call(e,r)&&Bu(t,r,e[r]);return t};function yg(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const as=In({themeMode:yg()?"dark":"light"}),Dn={state:as,subscribe(t){return Gn(as,()=>t(as))},setThemeConfig(t){const{themeMode:e,themeVariables:r}=t;e&&(as.themeMode=e),r&&(as.themeVariables=mg({},r))}},Jn=In({open:!1,message:"",variant:"success"}),An={state:Jn,subscribe(t){return Gn(Jn,()=>t(Jn))},openToast(t,e){Jn.open=!0,Jn.message=t,Jn.variant=e},closeToast(){Jn.open=!1}};let vg=class{constructor(e){this.openModal=Yn.open,this.closeModal=Yn.close,this.subscribeModal=Yn.subscribe,this.setTheme=Dn.setThemeConfig,Dn.setThemeConfig(e),Rr.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.resolve().then(()=>Nx);const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),Vt.setIsUiLoaded(!0)}}};var rn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ga(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Qa={exports:{}},Oi=typeof Reflect=="object"?Reflect:null,qu=Oi&&typeof Oi.apply=="function"?Oi.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},xo;Oi&&typeof Oi.ownKeys=="function"?xo=Oi.ownKeys:Object.getOwnPropertySymbols?xo=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:xo=function(e){return Object.getOwnPropertyNames(e)};function wg(t){console&&console.warn&&console.warn(t)}var zu=Number.isNaN||function(e){return e!==e};function yt(){yt.init.call(this)}Qa.exports=yt,Qa.exports.once=Sg,yt.EventEmitter=yt,yt.prototype._events=void 0,yt.prototype._eventsCount=0,yt.prototype._maxListeners=void 0;var Wu=10;function Co(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(yt,"defaultMaxListeners",{enumerable:!0,get:function(){return Wu},set:function(t){if(typeof t!="number"||t<0||zu(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Wu=t}}),yt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},yt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||zu(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Vu(t){return t._maxListeners===void 0?yt.defaultMaxListeners:t._maxListeners}yt.prototype.getMaxListeners=function(){return Vu(this)},yt.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")qu(c,this,r);else for(var u=c.length,h=Qu(c,u),n=0;n<u;++n)qu(h[n],this,r);return!0};function Hu(t,e,r,n){var i,s,o;if(Co(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=Vu(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,wg(a)}return t}yt.prototype.addListener=function(e,r){return Hu(this,e,r,!1)},yt.prototype.on=yt.prototype.addListener,yt.prototype.prependListener=function(e,r){return Hu(this,e,r,!0)};function bg(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ku(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=bg.bind(n);return i.listener=r,n.wrapFn=i,i}yt.prototype.once=function(e,r){return Co(r),this.on(e,Ku(this,e,r)),this},yt.prototype.prependOnceListener=function(e,r){return Co(r),this.prependListener(e,Ku(this,e,r)),this},yt.prototype.removeListener=function(e,r){var n,i,s,o,a;if(Co(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():_g(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this},yt.prototype.off=yt.prototype.removeListener,yt.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Zu(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?Eg(i):Qu(i,i.length)}yt.prototype.listeners=function(e){return Zu(this,e,!0)},yt.prototype.rawListeners=function(e){return Zu(this,e,!1)},yt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Gu.call(t,e)},yt.prototype.listenerCount=Gu;function Gu(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}yt.prototype.eventNames=function(){return this._eventsCount>0?xo(this._events):[]};function Qu(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function _g(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Eg(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Sg(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Yu(t,e,s,{once:!0}),e!=="error"&&xg(t,i,{once:!0})})}function xg(t,e,r){typeof t.on=="function"&&Yu(t,"error",e,r)}function Yu(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Fr=Qa.exports;const Ya=cs(Fr);var Oo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Io(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ju={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,i,s){function o(u,h){if(!i[u]){if(!n[u]){var f=typeof Io=="function"&&Io;if(!h&&f)return f(u,!0);if(a)return a(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var y=i[u]={exports:{}};n[u][0].call(y.exports,function(w){var S=n[u][1][w];return o(S||w)},y,y.exports,r,n,i,s)}return i[u].exports}for(var a=typeof Io=="function"&&Io,c=0;c<s.length;c++)o(s[c]);return o}({1:[function(r,n,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var c=0,u=new o(w),h=s.document.createTextNode("");u.observe(h,{characterData:!0}),a=function(){h.data=c=++c%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=w,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var E=s.document.createElement("script");E.onreadystatechange=function(){w(),E.onreadystatechange=null,E.parentNode.removeChild(E),E=null},s.document.documentElement.appendChild(E)}:a=function(){setTimeout(w,0)};var p,y=[];function w(){p=!0;for(var E,I,b=y.length;b;){for(I=y,y=[],E=-1;++E<b;)I[E]();b=y.length}p=!1}n.exports=S;function S(E){y.push(E)===1&&!p&&a()}}).call(this,typeof Oo<"u"?Oo:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,n,i){var s=r(1);function o(){}var a={},c=["REJECTED"],u=["FULFILLED"],h=["PENDING"];n.exports=f;function f(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,_!==o&&S(this,_)}f.prototype.catch=function(_){return this.then(null,_)},f.prototype.then=function(_,g){if(typeof _!="function"&&this.state===u||typeof g!="function"&&this.state===c)return this;var l=new this.constructor(o);if(this.state!==h){var m=this.state===u?_:g;y(l,m,this.outcome)}else this.queue.push(new p(l,_,g));return l};function p(_,g,l){this.promise=_,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof l=="function"&&(this.onRejected=l,this.callRejected=this.otherCallRejected)}p.prototype.callFulfilled=function(_){a.resolve(this.promise,_)},p.prototype.otherCallFulfilled=function(_){y(this.promise,this.onFulfilled,_)},p.prototype.callRejected=function(_){a.reject(this.promise,_)},p.prototype.otherCallRejected=function(_){y(this.promise,this.onRejected,_)};function y(_,g,l){s(function(){var m;try{m=g(l)}catch(P){return a.reject(_,P)}m===_?a.reject(_,new TypeError("Cannot resolve promise with itself")):a.resolve(_,m)})}a.resolve=function(_,g){var l=E(w,g);if(l.status==="error")return a.reject(_,l.value);var m=l.value;if(m)S(_,m);else{_.state=u,_.outcome=g;for(var P=-1,$=_.queue.length;++P<$;)_.queue[P].callFulfilled(g)}return _},a.reject=function(_,g){_.state=c,_.outcome=g;for(var l=-1,m=_.queue.length;++l<m;)_.queue[l].callRejected(g);return _};function w(_){var g=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof g=="function")return function(){g.apply(_,arguments)}}function S(_,g){var l=!1;function m(W){l||(l=!0,a.reject(_,W))}function P(W){l||(l=!0,a.resolve(_,W))}function $(){g(P,m)}var z=E($);z.status==="error"&&m(z.value)}function E(_,g){var l={};try{l.value=_(g),l.status="success"}catch(m){l.status="error",l.value=m}return l}f.resolve=I;function I(_){return _ instanceof this?_:a.resolve(new this(o),_)}f.reject=b;function b(_){var g=new this(o);return a.reject(g,_)}f.all=C;function C(_){var g=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var l=_.length,m=!1;if(!l)return this.resolve([]);for(var P=new Array(l),$=0,z=-1,W=new this(o);++z<l;)G(_[z],z);return W;function G(N,j){g.resolve(N).then(oe,function(Y){m||(m=!0,a.reject(W,Y))});function oe(Y){P[j]=Y,++$===l&&!m&&(m=!0,a.resolve(W,P))}}}f.race=v;function v(_){var g=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var l=_.length,m=!1;if(!l)return this.resolve([]);for(var P=-1,$=new this(o);++P<l;)z(_[P]);return $;function z(W){g.resolve(W).then(function(G){m||(m=!0,a.resolve($,G))},function(G){m||(m=!0,a.reject($,G))})}}},{1:1}],3:[function(r,n,i){(function(s){typeof s.Promise!="function"&&(s.Promise=r(2))}).call(this,typeof Oo<"u"?Oo:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,n,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x};function o(x,A){if(!(x instanceof A))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var c=a();function u(){try{if(!c||!c.open)return!1;var x=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),A=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!x||A)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function h(x,A){x=x||[],A=A||{};try{return new Blob(x,A)}catch(U){if(U.name!=="TypeError")throw U;for(var D=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,F=new D,L=0;L<x.length;L+=1)F.append(x[L]);return F.getBlob(A.type)}}typeof Promise>"u"&&r(3);var f=Promise;function p(x,A){A&&x.then(function(D){A(null,D)},function(D){A(D)})}function y(x,A,D){typeof A=="function"&&x.then(A),typeof D=="function"&&x.catch(D)}function w(x){return typeof x!="string"&&(console.warn(x+" used as a key, but it is not a string."),x=String(x)),x}function S(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var E="local-forage-detect-blob-support",I=void 0,b={},C=Object.prototype.toString,v="readonly",_="readwrite";function g(x){for(var A=x.length,D=new ArrayBuffer(A),F=new Uint8Array(D),L=0;L<A;L++)F[L]=x.charCodeAt(L);return D}function l(x){return new f(function(A){var D=x.transaction(E,_),F=h([""]);D.objectStore(E).put(F,"key"),D.onabort=function(L){L.preventDefault(),L.stopPropagation(),A(!1)},D.oncomplete=function(){var L=navigator.userAgent.match(/Chrome\/(\d+)/),U=navigator.userAgent.match(/Edge\//);A(U||!L||parseInt(L[1],10)>=43)}}).catch(function(){return!1})}function m(x){return typeof I=="boolean"?f.resolve(I):l(x).then(function(A){return I=A,I})}function P(x){var A=b[x.name],D={};D.promise=new f(function(F,L){D.resolve=F,D.reject=L}),A.deferredOperations.push(D),A.dbReady?A.dbReady=A.dbReady.then(function(){return D.promise}):A.dbReady=D.promise}function $(x){var A=b[x.name],D=A.deferredOperations.pop();if(D)return D.resolve(),D.promise}function z(x,A){var D=b[x.name],F=D.deferredOperations.pop();if(F)return F.reject(A),F.promise}function W(x,A){return new f(function(D,F){if(b[x.name]=b[x.name]||xe(),x.db)if(A)P(x),x.db.close();else return D(x.db);var L=[x.name];A&&L.push(x.version);var U=c.open.apply(c,L);A&&(U.onupgradeneeded=function(V){var te=U.result;try{te.createObjectStore(x.storeName),V.oldVersion<=1&&te.createObjectStore(E)}catch(se){if(se.name==="ConstraintError")console.warn('The database "'+x.name+'" has been upgraded from version '+V.oldVersion+" to version "+V.newVersion+', but the storage "'+x.storeName+'" already exists.');else throw se}}),U.onerror=function(V){V.preventDefault(),F(U.error)},U.onsuccess=function(){var V=U.result;V.onversionchange=function(te){te.target.close()},D(V),$(x)}})}function G(x){return W(x,!1)}function N(x){return W(x,!0)}function j(x,A){if(!x.db)return!0;var D=!x.db.objectStoreNames.contains(x.storeName),F=x.version<x.db.version,L=x.version>x.db.version;if(F&&(x.version!==A&&console.warn('The database "'+x.name+`" can't be downgraded from version `+x.db.version+" to version "+x.version+"."),x.version=x.db.version),L||D){if(D){var U=x.db.version+1;U>x.version&&(x.version=U)}return!0}return!1}function oe(x){return new f(function(A,D){var F=new FileReader;F.onerror=D,F.onloadend=function(L){var U=btoa(L.target.result||"");A({__local_forage_encoded_blob:!0,data:U,type:x.type})},F.readAsBinaryString(x)})}function Y(x){var A=g(atob(x.data));return h([A],{type:x.type})}function Z(x){return x&&x.__local_forage_encoded_blob}function X(x){var A=this,D=A._initReady().then(function(){var F=b[A._dbInfo.name];if(F&&F.dbReady)return F.dbReady});return y(D,x,x),D}function K(x){P(x);for(var A=b[x.name],D=A.forages,F=0;F<D.length;F++){var L=D[F];L._dbInfo.db&&(L._dbInfo.db.close(),L._dbInfo.db=null)}return x.db=null,G(x).then(function(U){return x.db=U,j(x)?N(x):U}).then(function(U){x.db=A.db=U;for(var V=0;V<D.length;V++)D[V]._dbInfo.db=U}).catch(function(U){throw z(x,U),U})}function ee(x,A,D,F){F===void 0&&(F=1);try{var L=x.db.transaction(x.storeName,A);D(null,L)}catch(U){if(F>0&&(!x.db||U.name==="InvalidStateError"||U.name==="NotFoundError"))return f.resolve().then(function(){if(!x.db||U.name==="NotFoundError"&&!x.db.objectStoreNames.contains(x.storeName)&&x.version<=x.db.version)return x.db&&(x.version=x.db.version+1),N(x)}).then(function(){return K(x).then(function(){ee(x,A,D,F-1)})}).catch(D);D(U)}}function xe(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ne(x){var A=this,D={db:null};if(x)for(var F in x)D[F]=x[F];var L=b[D.name];L||(L=xe(),b[D.name]=L),L.forages.push(A),A._initReady||(A._initReady=A.ready,A.ready=X);var U=[];function V(){return f.resolve()}for(var te=0;te<L.forages.length;te++){var se=L.forages[te];se!==A&&U.push(se._initReady().catch(V))}var ie=L.forages.slice(0);return f.all(U).then(function(){return D.db=L.db,G(D)}).then(function(re){return D.db=re,j(D,A._defaultConfig.version)?N(D):re}).then(function(re){D.db=L.db=re,A._dbInfo=D;for(var ve=0;ve<ie.length;ve++){var Qe=ie[ve];Qe!==A&&(Qe._dbInfo.db=D.db,Qe._dbInfo.version=D.version)}})}function Ee(x,A){var D=this;x=w(x);var F=new f(function(L,U){D.ready().then(function(){ee(D._dbInfo,v,function(V,te){if(V)return U(V);try{var se=te.objectStore(D._dbInfo.storeName),ie=se.get(x);ie.onsuccess=function(){var re=ie.result;re===void 0&&(re=null),Z(re)&&(re=Y(re)),L(re)},ie.onerror=function(){U(ie.error)}}catch(re){U(re)}})}).catch(U)});return p(F,A),F}function fe(x,A){var D=this,F=new f(function(L,U){D.ready().then(function(){ee(D._dbInfo,v,function(V,te){if(V)return U(V);try{var se=te.objectStore(D._dbInfo.storeName),ie=se.openCursor(),re=1;ie.onsuccess=function(){var ve=ie.result;if(ve){var Qe=ve.value;Z(Qe)&&(Qe=Y(Qe));var gt=x(Qe,ve.key,re++);gt!==void 0?L(gt):ve.continue()}else L()},ie.onerror=function(){U(ie.error)}}catch(ve){U(ve)}})}).catch(U)});return p(F,A),F}function _e(x,A,D){var F=this;x=w(x);var L=new f(function(U,V){var te;F.ready().then(function(){return te=F._dbInfo,C.call(A)==="[object Blob]"?m(te.db).then(function(se){return se?A:oe(A)}):A}).then(function(se){ee(F._dbInfo,_,function(ie,re){if(ie)return V(ie);try{var ve=re.objectStore(F._dbInfo.storeName);se===null&&(se=void 0);var Qe=ve.put(se,x);re.oncomplete=function(){se===void 0&&(se=null),U(se)},re.onabort=re.onerror=function(){var gt=Qe.error?Qe.error:Qe.transaction.error;V(gt)}}catch(gt){V(gt)}})}).catch(V)});return p(L,D),L}function q(x,A){var D=this;x=w(x);var F=new f(function(L,U){D.ready().then(function(){ee(D._dbInfo,_,function(V,te){if(V)return U(V);try{var se=te.objectStore(D._dbInfo.storeName),ie=se.delete(x);te.oncomplete=function(){L()},te.onerror=function(){U(ie.error)},te.onabort=function(){var re=ie.error?ie.error:ie.transaction.error;U(re)}}catch(re){U(re)}})}).catch(U)});return p(F,A),F}function B(x){var A=this,D=new f(function(F,L){A.ready().then(function(){ee(A._dbInfo,_,function(U,V){if(U)return L(U);try{var te=V.objectStore(A._dbInfo.storeName),se=te.clear();V.oncomplete=function(){F()},V.onabort=V.onerror=function(){var ie=se.error?se.error:se.transaction.error;L(ie)}}catch(ie){L(ie)}})}).catch(L)});return p(D,x),D}function M(x){var A=this,D=new f(function(F,L){A.ready().then(function(){ee(A._dbInfo,v,function(U,V){if(U)return L(U);try{var te=V.objectStore(A._dbInfo.storeName),se=te.count();se.onsuccess=function(){F(se.result)},se.onerror=function(){L(se.error)}}catch(ie){L(ie)}})}).catch(L)});return p(D,x),D}function d(x,A){var D=this,F=new f(function(L,U){if(x<0){L(null);return}D.ready().then(function(){ee(D._dbInfo,v,function(V,te){if(V)return U(V);try{var se=te.objectStore(D._dbInfo.storeName),ie=!1,re=se.openKeyCursor();re.onsuccess=function(){var ve=re.result;if(!ve){L(null);return}x===0||ie?L(ve.key):(ie=!0,ve.advance(x))},re.onerror=function(){U(re.error)}}catch(ve){U(ve)}})}).catch(U)});return p(F,A),F}function R(x){var A=this,D=new f(function(F,L){A.ready().then(function(){ee(A._dbInfo,v,function(U,V){if(U)return L(U);try{var te=V.objectStore(A._dbInfo.storeName),se=te.openKeyCursor(),ie=[];se.onsuccess=function(){var re=se.result;if(!re){F(ie);return}ie.push(re.key),re.continue()},se.onerror=function(){L(se.error)}}catch(re){L(re)}})}).catch(L)});return p(D,x),D}function ce(x,A){A=S.apply(this,arguments);var D=this.config();x=typeof x!="function"&&x||{},x.name||(x.name=x.name||D.name,x.storeName=x.storeName||D.storeName);var F=this,L;if(!x.name)L=f.reject("Invalid arguments");else{var U=x.name===D.name&&F._dbInfo.db,V=U?f.resolve(F._dbInfo.db):G(x).then(function(te){var se=b[x.name],ie=se.forages;se.db=te;for(var re=0;re<ie.length;re++)ie[re]._dbInfo.db=te;return te});x.storeName?L=V.then(function(te){if(te.objectStoreNames.contains(x.storeName)){var se=te.version+1;P(x);var ie=b[x.name],re=ie.forages;te.close();for(var ve=0;ve<re.length;ve++){var Qe=re[ve];Qe._dbInfo.db=null,Qe._dbInfo.version=se}var gt=new f(function(lt,Ot){var ft=c.open(x.name,se);ft.onerror=function(Tr){var wo=ft.result;wo.close(),Ot(Tr)},ft.onupgradeneeded=function(){var Tr=ft.result;Tr.deleteObjectStore(x.storeName)},ft.onsuccess=function(){var Tr=ft.result;Tr.close(),lt(Tr)}});return gt.then(function(lt){ie.db=lt;for(var Ot=0;Ot<re.length;Ot++){var ft=re[Ot];ft._dbInfo.db=lt,$(ft._dbInfo)}}).catch(function(lt){throw(z(x,lt)||f.resolve()).catch(function(){}),lt})}}):L=V.then(function(te){P(x);var se=b[x.name],ie=se.forages;te.close();for(var re=0;re<ie.length;re++){var ve=ie[re];ve._dbInfo.db=null}var Qe=new f(function(gt,lt){var Ot=c.deleteDatabase(x.name);Ot.onerror=function(){var ft=Ot.result;ft&&ft.close(),lt(Ot.error)},Ot.onblocked=function(){console.warn('dropInstance blocked for database "'+x.name+'" until all open connections are closed')},Ot.onsuccess=function(){var ft=Ot.result;ft&&ft.close(),gt(ft)}});return Qe.then(function(gt){se.db=gt;for(var lt=0;lt<ie.length;lt++){var Ot=ie[lt];$(Ot._dbInfo)}}).catch(function(gt){throw(z(x,gt)||f.resolve()).catch(function(){}),gt})})}return p(L,A),L}var de={_driver:"asyncStorage",_initStorage:ne,_support:u(),iterate:fe,getItem:Ee,setItem:_e,removeItem:q,clear:B,length:M,key:d,keys:R,dropInstance:ce};function We(){return typeof openDatabase=="function"}var De="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Me="~~local_forage_type~",Xe=/^~~local_forage_type~([^~]+)~/,pt="__lfsc__:",ht=pt.length,Ve="arbf",Be="blob",$e="si08",ke="ui08",Ne="uic8",Te="si16",Ae="si32",Se="ur16",Fe="ui32",qe="fl32",Ie="fl64",He=ht+Ve.length,et=Object.prototype.toString;function nt(x){var A=x.length*.75,D=x.length,F,L=0,U,V,te,se;x[x.length-1]==="="&&(A--,x[x.length-2]==="="&&A--);var ie=new ArrayBuffer(A),re=new Uint8Array(ie);for(F=0;F<D;F+=4)U=De.indexOf(x[F]),V=De.indexOf(x[F+1]),te=De.indexOf(x[F+2]),se=De.indexOf(x[F+3]),re[L++]=U<<2|V>>4,re[L++]=(V&15)<<4|te>>2,re[L++]=(te&3)<<6|se&63;return ie}function tt(x){var A=new Uint8Array(x),D="",F;for(F=0;F<A.length;F+=3)D+=De[A[F]>>2],D+=De[(A[F]&3)<<4|A[F+1]>>4],D+=De[(A[F+1]&15)<<2|A[F+2]>>6],D+=De[A[F+2]&63];return A.length%3===2?D=D.substring(0,D.length-1)+"=":A.length%3===1&&(D=D.substring(0,D.length-2)+"=="),D}function it(x,A){var D="";if(x&&(D=et.call(x)),x&&(D==="[object ArrayBuffer]"||x.buffer&&et.call(x.buffer)==="[object ArrayBuffer]")){var F,L=pt;x instanceof ArrayBuffer?(F=x,L+=Ve):(F=x.buffer,D==="[object Int8Array]"?L+=$e:D==="[object Uint8Array]"?L+=ke:D==="[object Uint8ClampedArray]"?L+=Ne:D==="[object Int16Array]"?L+=Te:D==="[object Uint16Array]"?L+=Se:D==="[object Int32Array]"?L+=Ae:D==="[object Uint32Array]"?L+=Fe:D==="[object Float32Array]"?L+=qe:D==="[object Float64Array]"?L+=Ie:A(new Error("Failed to get type for BinaryArray"))),A(L+tt(F))}else if(D==="[object Blob]"){var U=new FileReader;U.onload=function(){var V=Me+x.type+"~"+tt(this.result);A(pt+Be+V)},U.readAsArrayBuffer(x)}else try{A(JSON.stringify(x))}catch(V){console.error("Couldn't convert value into a JSON string: ",x),A(null,V)}}function Sr(x){if(x.substring(0,ht)!==pt)return JSON.parse(x);var A=x.substring(He),D=x.substring(ht,He),F;if(D===Be&&Xe.test(A)){var L=A.match(Xe);F=L[1],A=A.substring(L[0].length)}var U=nt(A);switch(D){case Ve:return U;case Be:return h([U],{type:F});case $e:return new Int8Array(U);case ke:return new Uint8Array(U);case Ne:return new Uint8ClampedArray(U);case Te:return new Int16Array(U);case Se:return new Uint16Array(U);case Ae:return new Int32Array(U);case Fe:return new Uint32Array(U);case qe:return new Float32Array(U);case Ie:return new Float64Array(U);default:throw new Error("Unkown type: "+D)}}var fr={serialize:it,deserialize:Sr,stringToBuffer:nt,bufferToString:tt};function Mr(x,A,D,F){x.executeSql("CREATE TABLE IF NOT EXISTS "+A.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],D,F)}function Qt(x){var A=this,D={db:null};if(x)for(var F in x)D[F]=typeof x[F]!="string"?x[F].toString():x[F];var L=new f(function(U,V){try{D.db=openDatabase(D.name,String(D.version),D.description,D.size)}catch(te){return V(te)}D.db.transaction(function(te){Mr(te,D,function(){A._dbInfo=D,U()},function(se,ie){V(ie)})},V)});return D.serializer=fr,L}function Yt(x,A,D,F,L,U){x.executeSql(D,F,L,function(V,te){te.code===te.SYNTAX_ERR?V.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[A.storeName],function(se,ie){ie.rows.length?U(se,te):Mr(se,A,function(){se.executeSql(D,F,L,U)},U)},U):U(V,te)},U)}function Ar(x,A){var D=this;x=w(x);var F=new f(function(L,U){D.ready().then(function(){var V=D._dbInfo;V.db.transaction(function(te){Yt(te,V,"SELECT * FROM "+V.storeName+" WHERE key = ? LIMIT 1",[x],function(se,ie){var re=ie.rows.length?ie.rows.item(0).value:null;re&&(re=V.serializer.deserialize(re)),L(re)},function(se,ie){U(ie)})})}).catch(U)});return p(F,A),F}function dn(x,A){var D=this,F=new f(function(L,U){D.ready().then(function(){var V=D._dbInfo;V.db.transaction(function(te){Yt(te,V,"SELECT * FROM "+V.storeName,[],function(se,ie){for(var re=ie.rows,ve=re.length,Qe=0;Qe<ve;Qe++){var gt=re.item(Qe),lt=gt.value;if(lt&&(lt=V.serializer.deserialize(lt)),lt=x(lt,gt.key,Qe+1),lt!==void 0){L(lt);return}}L()},function(se,ie){U(ie)})})}).catch(U)});return p(F,A),F}function wt(x,A,D,F){var L=this;x=w(x);var U=new f(function(V,te){L.ready().then(function(){A===void 0&&(A=null);var se=A,ie=L._dbInfo;ie.serializer.serialize(A,function(re,ve){ve?te(ve):ie.db.transaction(function(Qe){Yt(Qe,ie,"INSERT OR REPLACE INTO "+ie.storeName+" (key, value) VALUES (?, ?)",[x,re],function(){V(se)},function(gt,lt){te(lt)})},function(Qe){if(Qe.code===Qe.QUOTA_ERR){if(F>0){V(wt.apply(L,[x,se,D,F-1]));return}te(Qe)}})})}).catch(te)});return p(U,D),U}function bt(x,A,D){return wt.apply(this,[x,A,D,1])}function At(x,A){var D=this;x=w(x);var F=new f(function(L,U){D.ready().then(function(){var V=D._dbInfo;V.db.transaction(function(te){Yt(te,V,"DELETE FROM "+V.storeName+" WHERE key = ?",[x],function(){L()},function(se,ie){U(ie)})})}).catch(U)});return p(F,A),F}function xt(x){var A=this,D=new f(function(F,L){A.ready().then(function(){var U=A._dbInfo;U.db.transaction(function(V){Yt(V,U,"DELETE FROM "+U.storeName,[],function(){F()},function(te,se){L(se)})})}).catch(L)});return p(D,x),D}function Tt(x){var A=this,D=new f(function(F,L){A.ready().then(function(){var U=A._dbInfo;U.db.transaction(function(V){Yt(V,U,"SELECT COUNT(key) as c FROM "+U.storeName,[],function(te,se){var ie=se.rows.item(0).c;F(ie)},function(te,se){L(se)})})}).catch(L)});return p(D,x),D}function _t(x,A){var D=this,F=new f(function(L,U){D.ready().then(function(){var V=D._dbInfo;V.db.transaction(function(te){Yt(te,V,"SELECT key FROM "+V.storeName+" WHERE id = ? LIMIT 1",[x+1],function(se,ie){var re=ie.rows.length?ie.rows.item(0).key:null;L(re)},function(se,ie){U(ie)})})}).catch(U)});return p(F,A),F}function Mt(x){var A=this,D=new f(function(F,L){A.ready().then(function(){var U=A._dbInfo;U.db.transaction(function(V){Yt(V,U,"SELECT key FROM "+U.storeName,[],function(te,se){for(var ie=[],re=0;re<se.rows.length;re++)ie.push(se.rows.item(re).key);F(ie)},function(te,se){L(se)})})}).catch(L)});return p(D,x),D}function jt(x){return new f(function(A,D){x.transaction(function(F){F.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(L,U){for(var V=[],te=0;te<U.rows.length;te++)V.push(U.rows.item(te).name);A({db:x,storeNames:V})},function(L,U){D(U)})},function(F){D(F)})})}function Bt(x,A){A=S.apply(this,arguments);var D=this.config();x=typeof x!="function"&&x||{},x.name||(x.name=x.name||D.name,x.storeName=x.storeName||D.storeName);var F=this,L;return x.name?L=new f(function(U){var V;x.name===D.name?V=F._dbInfo.db:V=openDatabase(x.name,"","",0),x.storeName?U({db:V,storeNames:[x.storeName]}):U(jt(V))}).then(function(U){return new f(function(V,te){U.db.transaction(function(se){function ie(gt){return new f(function(lt,Ot){se.executeSql("DROP TABLE IF EXISTS "+gt,[],function(){lt()},function(ft,Tr){Ot(Tr)})})}for(var re=[],ve=0,Qe=U.storeNames.length;ve<Qe;ve++)re.push(ie(U.storeNames[ve]));f.all(re).then(function(){V()}).catch(function(gt){te(gt)})},function(se){te(se)})})}):L=f.reject("Invalid arguments"),p(L,A),L}var kt={_driver:"webSQLStorage",_initStorage:Qt,_support:We(),iterate:dn,getItem:Ar,setItem:bt,removeItem:At,clear:xt,length:Tt,key:_t,keys:Mt,dropInstance:Bt};function qt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Rt(x,A){var D=x.name+"/";return x.storeName!==A.storeName&&(D+=x.storeName+"/"),D}function Pt(){var x="_localforage_support_test";try{return localStorage.setItem(x,!0),localStorage.removeItem(x),!1}catch{return!0}}function vt(){return!Pt()||localStorage.length>0}function T(x){var A=this,D={};if(x)for(var F in x)D[F]=x[F];return D.keyPrefix=Rt(x,A._defaultConfig),vt()?(A._dbInfo=D,D.serializer=fr,f.resolve()):f.reject()}function H(x){var A=this,D=A.ready().then(function(){for(var F=A._dbInfo.keyPrefix,L=localStorage.length-1;L>=0;L--){var U=localStorage.key(L);U.indexOf(F)===0&&localStorage.removeItem(U)}});return p(D,x),D}function ue(x,A){var D=this;x=w(x);var F=D.ready().then(function(){var L=D._dbInfo,U=localStorage.getItem(L.keyPrefix+x);return U&&(U=L.serializer.deserialize(U)),U});return p(F,A),F}function Ce(x,A){var D=this,F=D.ready().then(function(){for(var L=D._dbInfo,U=L.keyPrefix,V=U.length,te=localStorage.length,se=1,ie=0;ie<te;ie++){var re=localStorage.key(ie);if(re.indexOf(U)===0){var ve=localStorage.getItem(re);if(ve&&(ve=L.serializer.deserialize(ve)),ve=x(ve,re.substring(V),se++),ve!==void 0)return ve}}});return p(F,A),F}function st(x,A){var D=this,F=D.ready().then(function(){var L=D._dbInfo,U;try{U=localStorage.key(x)}catch{U=null}return U&&(U=U.substring(L.keyPrefix.length)),U});return p(F,A),F}function Ge(x){var A=this,D=A.ready().then(function(){for(var F=A._dbInfo,L=localStorage.length,U=[],V=0;V<L;V++){var te=localStorage.key(V);te.indexOf(F.keyPrefix)===0&&U.push(te.substring(F.keyPrefix.length))}return U});return p(D,x),D}function Je(x){var A=this,D=A.keys().then(function(F){return F.length});return p(D,x),D}function Ke(x,A){var D=this;x=w(x);var F=D.ready().then(function(){var L=D._dbInfo;localStorage.removeItem(L.keyPrefix+x)});return p(F,A),F}function Jt(x,A,D){var F=this;x=w(x);var L=F.ready().then(function(){A===void 0&&(A=null);var U=A;return new f(function(V,te){var se=F._dbInfo;se.serializer.serialize(A,function(ie,re){if(re)te(re);else try{localStorage.setItem(se.keyPrefix+x,ie),V(U)}catch(ve){(ve.name==="QuotaExceededError"||ve.name==="NS_ERROR_DOM_QUOTA_REACHED")&&te(ve),te(ve)}})})});return p(L,D),L}function Ct(x,A){if(A=S.apply(this,arguments),x=typeof x!="function"&&x||{},!x.name){var D=this.config();x.name=x.name||D.name,x.storeName=x.storeName||D.storeName}var F=this,L;return x.name?L=new f(function(U){x.storeName?U(Rt(x,F._defaultConfig)):U(x.name+"/")}).then(function(U){for(var V=localStorage.length-1;V>=0;V--){var te=localStorage.key(V);te.indexOf(U)===0&&localStorage.removeItem(te)}}):L=f.reject("Invalid arguments"),p(L,A),L}var $t={_driver:"localStorageWrapper",_initStorage:T,_support:qt(),iterate:Ce,getItem:ue,setItem:Jt,removeItem:Ke,clear:H,length:Je,key:st,keys:Ge,dropInstance:Ct},zt=function(x,A){return x===A||typeof x=="number"&&typeof A=="number"&&isNaN(x)&&isNaN(A)},fn=function(x,A){for(var D=x.length,F=0;F<D;){if(zt(x[F],A))return!0;F++}return!1},Ei=Array.isArray||function(x){return Object.prototype.toString.call(x)==="[object Array]"},sr={},Ua={},Kn={INDEXEDDB:de,WEBSQL:kt,LOCALSTORAGE:$t},ss=[Kn.INDEXEDDB._driver,Kn.WEBSQL._driver,Kn.LOCALSTORAGE._driver],os=["dropInstance"],yo=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(os),pn={description:"",driver:ss.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ou(x,A){x[A]=function(){var D=arguments;return x.ready().then(function(){return x[A].apply(x,D)})}}function vo(){for(var x=1;x<arguments.length;x++){var A=arguments[x];if(A)for(var D in A)A.hasOwnProperty(D)&&(Ei(A[D])?arguments[0][D]=A[D].slice():arguments[0][D]=A[D])}return arguments[0]}var Iu=function(){function x(A){o(this,x);for(var D in Kn)if(Kn.hasOwnProperty(D)){var F=Kn[D],L=F._driver;this[D]=L,sr[L]||this.defineDriver(F)}this._defaultConfig=vo({},pn),this._config=vo({},this._defaultConfig,A),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return x.prototype.config=function(A){if((typeof A>"u"?"undefined":s(A))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var D in A){if(D==="storeName"&&(A[D]=A[D].replace(/\W/g,"_")),D==="version"&&typeof A[D]!="number")return new Error("Database version must be a number.");this._config[D]=A[D]}return"driver"in A&&A.driver?this.setDriver(this._config.driver):!0}else return typeof A=="string"?this._config[A]:this._config},x.prototype.defineDriver=function(A,D,F){var L=new f(function(U,V){try{var te=A._driver,se=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!A._driver){V(se);return}for(var ie=yo.concat("_initStorage"),re=0,ve=ie.length;re<ve;re++){var Qe=ie[re],gt=!fn(os,Qe);if((gt||A[Qe])&&typeof A[Qe]!="function"){V(se);return}}var lt=function(){for(var ft=function(Au){return function(){var Tu=new Error("Method "+Au+" is not implemented by the current driver"),ja=f.reject(Tu);return p(ja,arguments[arguments.length-1]),ja}},Tr=0,wo=os.length;Tr<wo;Tr++){var zr=os[Tr];A[zr]||(A[zr]=ft(zr))}};lt();var Ot=function(ft){sr[te]&&console.info("Redefining LocalForage driver: "+te),sr[te]=A,Ua[te]=ft,U()};"_support"in A?A._support&&typeof A._support=="function"?A._support().then(Ot,V):Ot(!!A._support):Ot(!0)}catch(ft){V(ft)}});return y(L,D,F),L},x.prototype.driver=function(){return this._driver||null},x.prototype.getDriver=function(A,D,F){var L=sr[A]?f.resolve(sr[A]):f.reject(new Error("Driver not found."));return y(L,D,F),L},x.prototype.getSerializer=function(A){var D=f.resolve(fr);return y(D,A),D},x.prototype.ready=function(A){var D=this,F=D._driverSet.then(function(){return D._ready===null&&(D._ready=D._initDriver()),D._ready});return y(F,A,A),F},x.prototype.setDriver=function(A,D,F){var L=this;Ei(A)||(A=[A]);var U=this._getSupportedDrivers(A);function V(){L._config.driver=L.driver()}function te(re){return L._extend(re),V(),L._ready=L._initStorage(L._config),L._ready}function se(re){return function(){var ve=0;function Qe(){for(;ve<re.length;){var gt=re[ve];return ve++,L._dbInfo=null,L._ready=null,L.getDriver(gt).then(te).catch(Qe)}V();var lt=new Error("No available storage method found.");return L._driverSet=f.reject(lt),L._driverSet}return Qe()}}var ie=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=ie.then(function(){var re=U[0];return L._dbInfo=null,L._ready=null,L.getDriver(re).then(function(ve){L._driver=ve._driver,V(),L._wrapLibraryMethodsWithReady(),L._initDriver=se(U)})}).catch(function(){V();var re=new Error("No available storage method found.");return L._driverSet=f.reject(re),L._driverSet}),y(this._driverSet,D,F),this._driverSet},x.prototype.supports=function(A){return!!Ua[A]},x.prototype._extend=function(A){vo(this,A)},x.prototype._getSupportedDrivers=function(A){for(var D=[],F=0,L=A.length;F<L;F++){var U=A[F];this.supports(U)&&D.push(U)}return D},x.prototype._wrapLibraryMethodsWithReady=function(){for(var A=0,D=yo.length;A<D;A++)Ou(this,yo[A])},x.prototype.createInstance=function(A){return new x(A)},x}(),Du=new Iu;n.exports=Du},{3:3}]},{},[4])(4)})})(Ju);var Og=Ju.exports,ls=Cg(Og);class Ig{constructor(){this.getKeys=async()=>await ls.keys(),this.getEntries=async()=>{let e=[];return(await this.getKeys()).forEach(async r=>e.push(await ls.getItem(r))),e},this.getItem=async e=>await ls.getItem(e)??void 0,this.setItem=async(e,r)=>{await ls.setItem(e,r)},this.removeItem=async e=>{await ls.removeItem(e)}}}let Dg=class{constructor(){const e=new Ig;this.storage=e}async getKeys(){return this.storage.getKeys()}async getEntries(){return this.storage.getEntries()}async getItem(e){return this.storage.getItem(e)}async setItem(e,r){return this.storage.setItem(e,r)}async removeItem(e){return this.storage.removeItem(e)}};var Ii={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Ja=function(t,e){return Ja=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Ja(t,e)};function Ag(t,e){Ja(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Xa=function(){return Xa=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Xa.apply(this,arguments)};function Tg(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Rg(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function Pg(t,e){return function(r,n){e(r,n,t)}}function $g(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Ng(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(f){o(f)}}function c(h){try{u(n.throw(h))}catch(f){o(f)}}function u(h){h.done?s(h.value):i(h.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function Lg(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(h){return c([u,h])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(h){u=[6,h],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Mg(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function kg(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function ec(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xu(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function Fg(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Xu(arguments[e]));return t}function Ug(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function us(t){return this instanceof us?(this.v=t,this):new us(t)}function jg(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(p){n[p]&&(i[p]=function(y){return new Promise(function(w,S){s.push([p,y,w,S])>1||a(p,y)})})}function a(p,y){try{c(n[p](y))}catch(w){f(s[0][3],w)}}function c(p){p.value instanceof us?Promise.resolve(p.value.v).then(u,h):f(s[0][2],p)}function u(p){a("next",p)}function h(p){a("throw",p)}function f(p,y){p(y),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Bg(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:us(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function qg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof ec=="function"?ec(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}function zg(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Wg(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Vg(t){return t&&t.__esModule?t:{default:t}}function Hg(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Kg(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const nn=Ga(Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Xa},__asyncDelegator:Bg,__asyncGenerator:jg,__asyncValues:qg,__await:us,__awaiter:Ng,__classPrivateFieldGet:Hg,__classPrivateFieldSet:Kg,__createBinding:Mg,__decorate:Rg,__exportStar:kg,__extends:Ag,__generator:Lg,__importDefault:Vg,__importStar:Wg,__makeTemplateObject:zg,__metadata:$g,__param:Pg,__read:Xu,__rest:Tg,__spread:Fg,__spreadArrays:Ug,__values:ec},Symbol.toStringTag,{value:"Module"})));var hs={},ye={},tc={},ds={},eh;function Zg(){if(eh)return ds;eh=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return ds.delay=t,ds}var Xn={},rc={},ei={},th;function Gg(){return th||(th=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.ONE_THOUSAND=ei.ONE_HUNDRED=void 0,ei.ONE_HUNDRED=100,ei.ONE_THOUSAND=1e3),ei}var nc={},rh;function Qg(){return rh||(rh=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(nc)),nc}var nh;function ih(){return nh||(nh=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nn;e.__exportStar(Gg(),t),e.__exportStar(Qg(),t)}(rc)),rc}var sh;function Yg(){if(sh)return Xn;sh=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.fromMiliseconds=Xn.toMiliseconds=void 0;const t=ih();function e(n){return n*t.ONE_THOUSAND}Xn.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return Xn.fromMiliseconds=r,Xn}var oh;function Jg(){return oh||(oh=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nn;e.__exportStar(Zg(),t),e.__exportStar(Yg(),t)}(tc)),tc}var Di={},ah;function Xg(){if(ah)return Di;ah=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Di.Watch=t,Di.default=t,Di}var ic={},fs={},ch;function em(){if(ch)return fs;ch=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.IWatch=void 0;class t{}return fs.IWatch=t,fs}var lh;function tm(){return lh||(lh=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),nn.__exportStar(em(),t)}(ic)),ic}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nn;e.__exportStar(Jg(),t),e.__exportStar(Xg(),t),e.__exportStar(tm(),t),e.__exportStar(ih(),t)})(ye);var sc={},ps={};let Pr=class{};const rm=Ga(Object.freeze(Object.defineProperty({__proto__:null,IEvents:Pr},Symbol.toStringTag,{value:"Module"})));var uh;function nm(){if(uh)return ps;uh=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.IHeartBeat=void 0;const t=rm;class e extends t.IEvents{constructor(n){super()}}return ps.IHeartBeat=e,ps}var hh;function dh(){return hh||(hh=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),nn.__exportStar(nm(),t)}(sc)),sc}var oc={},ti={},fh;function im(){if(fh)return ti;fh=1,Object.defineProperty(ti,"__esModule",{value:!0}),ti.HEARTBEAT_EVENTS=ti.HEARTBEAT_INTERVAL=void 0;const t=ye;return ti.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,ti.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},ti}var ph;function gh(){return ph||(ph=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),nn.__exportStar(im(),t)}(oc)),oc}var mh;function sm(){if(mh)return hs;mh=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.HeartBeat=void 0;const t=nn,e=Fr,r=ye,n=dh(),i=gh();class s extends n.IHeartBeat{constructor(a){super(a),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=(a==null?void 0:a.interval)||i.HEARTBEAT_INTERVAL}static init(a){return t.__awaiter(this,void 0,void 0,function*(){const c=new s(a);return yield c.init(),c})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(a,c){this.events.on(a,c)}once(a,c){this.events.once(a,c)}off(a,c){this.events.off(a,c)}removeListener(a,c){this.events.removeListener(a,c)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return hs.HeartBeat=s,hs}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nn;e.__exportStar(sm(),t),e.__exportStar(dh(),t),e.__exportStar(gh(),t)})(Ii);var at={},ac,yh;function om(){if(yh)return ac;yh=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}ac=e;function e(r,n,i){var s=i&&i.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var c=new Array(a);c[0]=s(r);for(var u=1;u<a;u++)c[u]=s(n[u]);return c.join(" ")}if(typeof r!="string")return r;var h=n.length;if(h===0)return r;for(var f="",p=1-o,y=-1,w=r&&r.length||0,S=0;S<w;){if(r.charCodeAt(S)===37&&S+1<w){switch(y=y>-1?y:0,r.charCodeAt(S+1)){case 100:case 102:if(p>=h||n[p]==null)break;y<S&&(f+=r.slice(y,S)),f+=Number(n[p]),y=S+2,S++;break;case 105:if(p>=h||n[p]==null)break;y<S&&(f+=r.slice(y,S)),f+=Math.floor(Number(n[p])),y=S+2,S++;break;case 79:case 111:case 106:if(p>=h||n[p]===void 0)break;y<S&&(f+=r.slice(y,S));var E=typeof n[p];if(E==="string"){f+="'"+n[p]+"'",y=S+2,S++;break}if(E==="function"){f+=n[p].name||"<anonymous>",y=S+2,S++;break}f+=s(n[p]),y=S+2,S++;break;case 115:if(p>=h)break;y<S&&(f+=r.slice(y,S)),f+=String(n[p]),y=S+2,S++;break;case 37:y<S&&(f+=r.slice(y,S)),f+="%",y=S+2,S++,p--;break}++p}++S}return y===-1?r:(y<w&&(f+=r.slice(y)),f)}return ac}var cc,vh;function am(){if(vh)return cc;vh=1;const t=om();cc=i;const e=_().console||{},r={mapHttpRequest:w,mapHttpResponse:w,wrapRequestSerializer:S,wrapResponseSerializer:S,wrapErrorSerializer:S,req:w,res:w,err:p};function n(g,l){return Array.isArray(g)?g.filter(function(P){return P!=="!stdSerializers.err"}):g===!0?Object.keys(l):!1}function i(g){g=g||{},g.browser=g.browser||{};const l=g.browser.transmit;if(l&&typeof l.send!="function")throw Error("pino: transmit option must have a send function");const m=g.browser.write||e;g.browser.write&&(g.browser.asObject=!0);const P=g.serializers||{},$=n(g.browser.serialize,P);let z=g.browser.serialize;Array.isArray(g.browser.serialize)&&g.browser.serialize.indexOf("!stdSerializers.err")>-1&&(z=!1);const W=["error","fatal","warn","info","debug","trace"];typeof m=="function"&&(m.error=m.fatal=m.warn=m.info=m.debug=m.trace=m),g.enabled===!1&&(g.level="silent");const G=g.level||"info",N=Object.create(m);N.log||(N.log=E),Object.defineProperty(N,"levelVal",{get:oe}),Object.defineProperty(N,"level",{get:Y,set:Z});const j={transmit:l,serialize:$,asObject:g.browser.asObject,levels:W,timestamp:y(g)};N.levels=i.levels,N.level=G,N.setMaxListeners=N.getMaxListeners=N.emit=N.addListener=N.on=N.prependListener=N.once=N.prependOnceListener=N.removeListener=N.removeAllListeners=N.listeners=N.listenerCount=N.eventNames=N.write=N.flush=E,N.serializers=P,N._serialize=$,N._stdErrSerialize=z,N.child=X,l&&(N._logEvent=f());function oe(){return this.level==="silent"?1/0:this.levels.values[this.level]}function Y(){return this._level}function Z(K){if(K!=="silent"&&!this.levels.values[K])throw Error("unknown level "+K);this._level=K,s(j,N,"error","log"),s(j,N,"fatal","error"),s(j,N,"warn","error"),s(j,N,"info","log"),s(j,N,"debug","log"),s(j,N,"trace","log")}function X(K,ee){if(!K)throw new Error("missing bindings for child Pino");ee=ee||{},$&&K.serializers&&(ee.serializers=K.serializers);const xe=ee.serializers;if($&&xe){var ne=Object.assign({},P,xe),Ee=g.browser.serialize===!0?Object.keys(ne):$;delete K.serializers,c([K],Ee,ne,this._stdErrSerialize)}function fe(_e){this._childLevel=(_e._childLevel|0)+1,this.error=u(_e,K,"error"),this.fatal=u(_e,K,"fatal"),this.warn=u(_e,K,"warn"),this.info=u(_e,K,"info"),this.debug=u(_e,K,"debug"),this.trace=u(_e,K,"trace"),ne&&(this.serializers=ne,this._serialize=Ee),l&&(this._logEvent=f([].concat(_e._logEvent.bindings,K)))}return fe.prototype=this,new fe(this)}return N}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=r,i.stdTimeFunctions=Object.assign({},{nullTime:I,epochTime:b,unixTime:C,isoTime:v});function s(g,l,m,P){const $=Object.getPrototypeOf(l);l[m]=l.levelVal>l.levels.values[m]?E:$[m]?$[m]:e[m]||e[P]||E,o(g,l,m)}function o(g,l,m){!g.transmit&&l[m]===E||(l[m]=function(P){return function(){const z=g.timestamp(),W=new Array(arguments.length),G=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var N=0;N<W.length;N++)W[N]=arguments[N];if(g.serialize&&!g.asObject&&c(W,this._serialize,this.serializers,this._stdErrSerialize),g.asObject?P.call(G,a(this,m,W,z)):P.apply(G,W),g.transmit){const j=g.transmit.level||l.level,oe=i.levels.values[j],Y=i.levels.values[m];if(Y<oe)return;h(this,{ts:z,methodLevel:m,methodValue:Y,transmitLevel:j,transmitValue:i.levels.values[g.transmit.level||l.level],send:g.transmit.send,val:l.levelVal},W)}}}(l[m]))}function a(g,l,m,P){g._serialize&&c(m,g._serialize,g.serializers,g._stdErrSerialize);const $=m.slice();let z=$[0];const W={};P&&(W.time=P),W.level=i.levels.values[l];let G=(g._childLevel|0)+1;if(G<1&&(G=1),z!==null&&typeof z=="object"){for(;G--&&typeof $[0]=="object";)Object.assign(W,$.shift());z=$.length?t($.shift(),$):void 0}else typeof z=="string"&&(z=t($.shift(),$));return z!==void 0&&(W.msg=z),W}function c(g,l,m,P){for(const $ in g)if(P&&g[$]instanceof Error)g[$]=i.stdSerializers.err(g[$]);else if(typeof g[$]=="object"&&!Array.isArray(g[$]))for(const z in g[$])l&&l.indexOf(z)>-1&&z in m&&(g[$][z]=m[z](g[$][z]))}function u(g,l,m){return function(){const P=new Array(1+arguments.length);P[0]=l;for(var $=1;$<P.length;$++)P[$]=arguments[$-1];return g[m].apply(this,P)}}function h(g,l,m){const P=l.send,$=l.ts,z=l.methodLevel,W=l.methodValue,G=l.val,N=g._logEvent.bindings;c(m,g._serialize||Object.keys(g.serializers),g.serializers,g._stdErrSerialize===void 0?!0:g._stdErrSerialize),g._logEvent.ts=$,g._logEvent.messages=m.filter(function(j){return N.indexOf(j)===-1}),g._logEvent.level.label=z,g._logEvent.level.value=W,P(z,g._logEvent,G),g._logEvent=f(N)}function f(g){return{ts:0,messages:[],bindings:g||[],level:{label:"",value:0}}}function p(g){const l={type:g.constructor.name,msg:g.message,stack:g.stack};for(const m in g)l[m]===void 0&&(l[m]=g[m]);return l}function y(g){return typeof g.timestamp=="function"?g.timestamp:g.timestamp===!1?I:b}function w(){return{}}function S(g){return g}function E(){}function I(){return!1}function b(){return Date.now()}function C(){return Math.round(Date.now()/1e3)}function v(){return new Date(Date.now()).toISOString()}function _(){function g(l){return typeof l<"u"&&l}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return g(self)||g(window)||g(this)||{}}}return cc}var ri={},wh;function bh(){return wh||(wh=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.PINO_CUSTOM_CONTEXT_KEY=ri.PINO_LOGGER_DEFAULTS=void 0,ri.PINO_LOGGER_DEFAULTS={level:"info"},ri.PINO_CUSTOM_CONTEXT_KEY="custom_context"),ri}var mr={},_h;function cm(){if(_h)return mr;_h=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.generateChildLogger=mr.formatChildLoggerContext=mr.getLoggerContext=mr.setBrowserLoggerContext=mr.getBrowserLoggerContext=mr.getDefaultLoggerOptions=void 0;const t=bh();function e(a){return Object.assign(Object.assign({},a),{level:(a==null?void 0:a.level)||t.PINO_LOGGER_DEFAULTS.level})}mr.getDefaultLoggerOptions=e;function r(a,c=t.PINO_CUSTOM_CONTEXT_KEY){return a[c]||""}mr.getBrowserLoggerContext=r;function n(a,c,u=t.PINO_CUSTOM_CONTEXT_KEY){return a[u]=c,a}mr.setBrowserLoggerContext=n;function i(a,c=t.PINO_CUSTOM_CONTEXT_KEY){let u="";return typeof a.bindings>"u"?u=r(a,c):u=a.bindings().context||"",u}mr.getLoggerContext=i;function s(a,c,u=t.PINO_CUSTOM_CONTEXT_KEY){const h=i(a,u);return h.trim()?`${h}/${c}`:c}mr.formatChildLoggerContext=s;function o(a,c,u=t.PINO_CUSTOM_CONTEXT_KEY){const h=s(a,c,u),f=a.child({context:h});return n(f,h,u)}return mr.generateChildLogger=o,mr}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=nn,r=e.__importDefault(am());Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(bh(),t),e.__exportStar(cm(),t)})(at);let lm=class extends Pr{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},um=class extends Pr{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},hm=class{constructor(e,r){this.logger=e,this.core=r}},dm=class extends Pr{constructor(e,r){super(),this.relayer=e,this.logger=r}},fm=class extends Pr{constructor(e){super()}},pm=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},gm=class extends Pr{constructor(e,r){super(),this.relayer=e,this.logger=r}},mm=class extends Pr{constructor(e,r){super(),this.core=e,this.logger=r}},ym=class{constructor(e,r){this.projectId=e,this.logger=r}},vm=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},wm=class{constructor(e){this.client=e}};const bm=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),_m=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Eh(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return _m(t)}catch{return t}}function lc(t){return typeof t=="string"?t:bm(t)||""}var uc={},Ai={},Do={},Ao={};Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.BrowserRandomSource=void 0;const Sh=65536;class Em{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=Sh)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,Sh)));return r}}Ao.BrowserRandomSource=Em;function Sm(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var To={},$r={};Object.defineProperty($r,"__esModule",{value:!0});function xm(t){for(var e=0;e<t.length;e++)t[e]=0;return t}$r.wipe=xm;const Cm=Ga(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(To,"__esModule",{value:!0}),To.NodeRandomSource=void 0;const Om=$r;class Im{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Sm<"u"){const e=Cm;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,Om.wipe)(r),n}}To.NodeRandomSource=Im,Object.defineProperty(Do,"__esModule",{value:!0}),Do.SystemRandomSource=void 0;const Dm=Ao,Am=To;class Tm{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Dm.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Am.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Do.SystemRandomSource=Tm;var Le={},xh={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,c){var u=a>>>16&65535,h=a&65535,f=c>>>16&65535,p=c&65535;return h*p+(u*p+h*f<<16>>>0)|0}t.mul=Math.imul||e;function r(a,c){return a+c|0}t.add=r;function n(a,c){return a-c|0}t.sub=n;function i(a,c){return a<<c|a>>>32-c}t.rotl=i;function s(a,c){return a<<32-c|a>>>c}t.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||o,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(xh),Object.defineProperty(Le,"__esModule",{value:!0});var Ch=xh;function Rm(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}Le.readInt16BE=Rm;function Pm(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}Le.readUint16BE=Pm;function $m(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}Le.readInt16LE=$m;function Nm(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}Le.readUint16LE=Nm;function Oh(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}Le.writeUint16BE=Oh,Le.writeInt16BE=Oh;function Ih(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}Le.writeUint16LE=Ih,Le.writeInt16LE=Ih;function hc(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}Le.readInt32BE=hc;function dc(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}Le.readUint32BE=dc;function fc(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}Le.readInt32LE=fc;function pc(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}Le.readUint32LE=pc;function Ro(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}Le.writeUint32BE=Ro,Le.writeInt32BE=Ro;function Po(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}Le.writeUint32LE=Po,Le.writeInt32LE=Po;function Lm(t,e){e===void 0&&(e=0);var r=hc(t,e),n=hc(t,e+4);return r*4294967296+n-(n>>31)*4294967296}Le.readInt64BE=Lm;function Mm(t,e){e===void 0&&(e=0);var r=dc(t,e),n=dc(t,e+4);return r*4294967296+n}Le.readUint64BE=Mm;function km(t,e){e===void 0&&(e=0);var r=fc(t,e),n=fc(t,e+4);return n*4294967296+r-(r>>31)*4294967296}Le.readInt64LE=km;function Fm(t,e){e===void 0&&(e=0);var r=pc(t,e),n=pc(t,e+4);return n*4294967296+r}Le.readUint64LE=Fm;function Dh(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Ro(t/4294967296>>>0,e,r),Ro(t>>>0,e,r+4),e}Le.writeUint64BE=Dh,Le.writeInt64BE=Dh;function Ah(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Po(t>>>0,e,r),Po(t/4294967296>>>0,e,r+4),e}Le.writeUint64LE=Ah,Le.writeInt64LE=Ah;function Um(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}Le.readUintBE=Um;function jm(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}Le.readUintLE=jm;function Bm(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Ch.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}Le.writeUintBE=Bm;function qm(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Ch.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}Le.writeUintLE=qm;function zm(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}Le.readFloat32BE=zm;function Wm(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}Le.readFloat32LE=Wm;function Vm(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}Le.readFloat64BE=Vm;function Hm(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}Le.readFloat64LE=Hm;function Km(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}Le.writeFloat32BE=Km;function Zm(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}Le.writeFloat32LE=Zm;function Gm(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}Le.writeFloat64BE=Gm;function Qm(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}Le.writeFloat64LE=Qm,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=Do,r=Le,n=$r;t.defaultRandomSource=new e.SystemRandomSource;function i(u,h=t.defaultRandomSource){return h.randomBytes(u)}t.randomBytes=i;function s(u=t.defaultRandomSource){const h=i(4,u),f=(0,r.readUint32LE)(h);return(0,n.wipe)(h),f}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(u,h=o,f=t.defaultRandomSource){if(h.length<2)throw new Error("randomString charset is too short");if(h.length>256)throw new Error("randomString charset is too long");let p="";const y=h.length,w=256-256%y;for(;u>0;){const S=i(Math.ceil(u*256/w),f);for(let E=0;E<S.length&&u>0;E++){const I=S[E];I<w&&(p+=h.charAt(I%y),u--)}(0,n.wipe)(S)}return p}t.randomString=a;function c(u,h=o,f=t.defaultRandomSource){const p=Math.ceil(u/(Math.log(h.length)/Math.LN2));return a(p,h,f)}t.randomStringForEntropy=c}(Ai);var Th={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Le,r=$r;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(c,u){if(u===void 0&&(u=c.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var h=0;if(this._bytesHashed+=u,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&u>0;)this._buffer[this._bufferLength++]=c[h++],u--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(u>=this.blockSize&&(h=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,c,h,u),u%=this.blockSize);u>0;)this._buffer[this._bufferLength++]=c[h++],u--;return this},a.prototype.finish=function(c){if(!this._finished){var u=this._bytesHashed,h=this._bufferLength,f=u/536870912|0,p=u<<3,y=u%128<112?128:256;this._buffer[h]=128;for(var w=h+1;w<y-8;w++)this._buffer[w]=0;e.writeUint32BE(f,this._buffer,y-8),e.writeUint32BE(p,this._buffer,y-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,y),this._finished=!0}for(var w=0;w<this.digestLength/8;w++)e.writeUint32BE(this._stateHi[w],c,w*8),e.writeUint32BE(this._stateLo[w],c,w*8+4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._stateHi.set(c.stateHi),this._stateLo.set(c.stateLo),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.stateHi),r.wipe(c.stateLo),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,c,u,h,f,p,y){for(var w=u[0],S=u[1],E=u[2],I=u[3],b=u[4],C=u[5],v=u[6],_=u[7],g=h[0],l=h[1],m=h[2],P=h[3],$=h[4],z=h[5],W=h[6],G=h[7],N,j,oe,Y,Z,X,K,ee;y>=128;){for(var xe=0;xe<16;xe++){var ne=8*xe+p;a[xe]=e.readUint32BE(f,ne),c[xe]=e.readUint32BE(f,ne+4)}for(var xe=0;xe<80;xe++){var Ee=w,fe=S,_e=E,q=I,B=b,M=C,d=v,R=_,ce=g,de=l,We=m,De=P,Me=$,Xe=z,pt=W,ht=G;if(N=_,j=G,Z=j&65535,X=j>>>16,K=N&65535,ee=N>>>16,N=(b>>>14|$<<32-14)^(b>>>18|$<<32-18)^($>>>41-32|b<<32-(41-32)),j=($>>>14|b<<32-14)^($>>>18|b<<32-18)^(b>>>41-32|$<<32-(41-32)),Z+=j&65535,X+=j>>>16,K+=N&65535,ee+=N>>>16,N=b&C^~b&v,j=$&z^~$&W,Z+=j&65535,X+=j>>>16,K+=N&65535,ee+=N>>>16,N=i[xe*2],j=i[xe*2+1],Z+=j&65535,X+=j>>>16,K+=N&65535,ee+=N>>>16,N=a[xe%16],j=c[xe%16],Z+=j&65535,X+=j>>>16,K+=N&65535,ee+=N>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,oe=K&65535|ee<<16,Y=Z&65535|X<<16,N=oe,j=Y,Z=j&65535,X=j>>>16,K=N&65535,ee=N>>>16,N=(w>>>28|g<<32-28)^(g>>>34-32|w<<32-(34-32))^(g>>>39-32|w<<32-(39-32)),j=(g>>>28|w<<32-28)^(w>>>34-32|g<<32-(34-32))^(w>>>39-32|g<<32-(39-32)),Z+=j&65535,X+=j>>>16,K+=N&65535,ee+=N>>>16,N=w&S^w&E^S&E,j=g&l^g&m^l&m,Z+=j&65535,X+=j>>>16,K+=N&65535,ee+=N>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,R=K&65535|ee<<16,ht=Z&65535|X<<16,N=q,j=De,Z=j&65535,X=j>>>16,K=N&65535,ee=N>>>16,N=oe,j=Y,Z+=j&65535,X+=j>>>16,K+=N&65535,ee+=N>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,q=K&65535|ee<<16,De=Z&65535|X<<16,S=Ee,E=fe,I=_e,b=q,C=B,v=M,_=d,w=R,l=ce,m=de,P=We,$=De,z=Me,W=Xe,G=pt,g=ht,xe%16===15)for(var ne=0;ne<16;ne++)N=a[ne],j=c[ne],Z=j&65535,X=j>>>16,K=N&65535,ee=N>>>16,N=a[(ne+9)%16],j=c[(ne+9)%16],Z+=j&65535,X+=j>>>16,K+=N&65535,ee+=N>>>16,oe=a[(ne+1)%16],Y=c[(ne+1)%16],N=(oe>>>1|Y<<32-1)^(oe>>>8|Y<<32-8)^oe>>>7,j=(Y>>>1|oe<<32-1)^(Y>>>8|oe<<32-8)^(Y>>>7|oe<<32-7),Z+=j&65535,X+=j>>>16,K+=N&65535,ee+=N>>>16,oe=a[(ne+14)%16],Y=c[(ne+14)%16],N=(oe>>>19|Y<<32-19)^(Y>>>61-32|oe<<32-(61-32))^oe>>>6,j=(Y>>>19|oe<<32-19)^(oe>>>61-32|Y<<32-(61-32))^(Y>>>6|oe<<32-6),Z+=j&65535,X+=j>>>16,K+=N&65535,ee+=N>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,a[ne]=K&65535|ee<<16,c[ne]=Z&65535|X<<16}N=w,j=g,Z=j&65535,X=j>>>16,K=N&65535,ee=N>>>16,N=u[0],j=h[0],Z+=j&65535,X+=j>>>16,K+=N&65535,ee+=N>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[0]=w=K&65535|ee<<16,h[0]=g=Z&65535|X<<16,N=S,j=l,Z=j&65535,X=j>>>16,K=N&65535,ee=N>>>16,N=u[1],j=h[1],Z+=j&65535,X+=j>>>16,K+=N&65535,ee+=N>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[1]=S=K&65535|ee<<16,h[1]=l=Z&65535|X<<16,N=E,j=m,Z=j&65535,X=j>>>16,K=N&65535,ee=N>>>16,N=u[2],j=h[2],Z+=j&65535,X+=j>>>16,K+=N&65535,ee+=N>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[2]=E=K&65535|ee<<16,h[2]=m=Z&65535|X<<16,N=I,j=P,Z=j&65535,X=j>>>16,K=N&65535,ee=N>>>16,N=u[3],j=h[3],Z+=j&65535,X+=j>>>16,K+=N&65535,ee+=N>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[3]=I=K&65535|ee<<16,h[3]=P=Z&65535|X<<16,N=b,j=$,Z=j&65535,X=j>>>16,K=N&65535,ee=N>>>16,N=u[4],j=h[4],Z+=j&65535,X+=j>>>16,K+=N&65535,ee+=N>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[4]=b=K&65535|ee<<16,h[4]=$=Z&65535|X<<16,N=C,j=z,Z=j&65535,X=j>>>16,K=N&65535,ee=N>>>16,N=u[5],j=h[5],Z+=j&65535,X+=j>>>16,K+=N&65535,ee+=N>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[5]=C=K&65535|ee<<16,h[5]=z=Z&65535|X<<16,N=v,j=W,Z=j&65535,X=j>>>16,K=N&65535,ee=N>>>16,N=u[6],j=h[6],Z+=j&65535,X+=j>>>16,K+=N&65535,ee+=N>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[6]=v=K&65535|ee<<16,h[6]=W=Z&65535|X<<16,N=_,j=G,Z=j&65535,X=j>>>16,K=N&65535,ee=N>>>16,N=u[7],j=h[7],Z+=j&65535,X+=j>>>16,K+=N&65535,ee+=N>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[7]=_=K&65535|ee<<16,h[7]=G=Z&65535|X<<16,p+=128,y-=128}return p}function o(a){var c=new n;c.update(a);var u=c.digest();return c.clean(),u}t.hash=o})(Th),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=Ai,r=Th,n=$r;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(q){const B=new Float64Array(16);if(q)for(let M=0;M<q.length;M++)B[M]=q[M];return B}const s=new Uint8Array(32);s[0]=9;const o=i(),a=i([1]),c=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),h=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function y(q,B){for(let M=0;M<16;M++)q[M]=B[M]|0}function w(q){let B=1;for(let M=0;M<16;M++){let d=q[M]+B+65535;B=Math.floor(d/65536),q[M]=d-B*65536}q[0]+=B-1+37*(B-1)}function S(q,B,M){const d=~(M-1);for(let R=0;R<16;R++){const ce=d&(q[R]^B[R]);q[R]^=ce,B[R]^=ce}}function E(q,B){const M=i(),d=i();for(let R=0;R<16;R++)d[R]=B[R];w(d),w(d),w(d);for(let R=0;R<2;R++){M[0]=d[0]-65517;for(let de=1;de<15;de++)M[de]=d[de]-65535-(M[de-1]>>16&1),M[de-1]&=65535;M[15]=d[15]-32767-(M[14]>>16&1);const ce=M[15]>>16&1;M[14]&=65535,S(d,M,1-ce)}for(let R=0;R<16;R++)q[2*R]=d[R]&255,q[2*R+1]=d[R]>>8}function I(q,B){let M=0;for(let d=0;d<32;d++)M|=q[d]^B[d];return(1&M-1>>>8)-1}function b(q,B){const M=new Uint8Array(32),d=new Uint8Array(32);return E(M,q),E(d,B),I(M,d)}function C(q){const B=new Uint8Array(32);return E(B,q),B[0]&1}function v(q,B){for(let M=0;M<16;M++)q[M]=B[2*M]+(B[2*M+1]<<8);q[15]&=32767}function _(q,B,M){for(let d=0;d<16;d++)q[d]=B[d]+M[d]}function g(q,B,M){for(let d=0;d<16;d++)q[d]=B[d]-M[d]}function l(q,B,M){let d,R,ce=0,de=0,We=0,De=0,Me=0,Xe=0,pt=0,ht=0,Ve=0,Be=0,$e=0,ke=0,Ne=0,Te=0,Ae=0,Se=0,Fe=0,qe=0,Ie=0,He=0,et=0,nt=0,tt=0,it=0,Sr=0,fr=0,Mr=0,Qt=0,Yt=0,Ar=0,dn=0,wt=M[0],bt=M[1],At=M[2],xt=M[3],Tt=M[4],_t=M[5],Mt=M[6],jt=M[7],Bt=M[8],kt=M[9],qt=M[10],Rt=M[11],Pt=M[12],vt=M[13],T=M[14],H=M[15];d=B[0],ce+=d*wt,de+=d*bt,We+=d*At,De+=d*xt,Me+=d*Tt,Xe+=d*_t,pt+=d*Mt,ht+=d*jt,Ve+=d*Bt,Be+=d*kt,$e+=d*qt,ke+=d*Rt,Ne+=d*Pt,Te+=d*vt,Ae+=d*T,Se+=d*H,d=B[1],de+=d*wt,We+=d*bt,De+=d*At,Me+=d*xt,Xe+=d*Tt,pt+=d*_t,ht+=d*Mt,Ve+=d*jt,Be+=d*Bt,$e+=d*kt,ke+=d*qt,Ne+=d*Rt,Te+=d*Pt,Ae+=d*vt,Se+=d*T,Fe+=d*H,d=B[2],We+=d*wt,De+=d*bt,Me+=d*At,Xe+=d*xt,pt+=d*Tt,ht+=d*_t,Ve+=d*Mt,Be+=d*jt,$e+=d*Bt,ke+=d*kt,Ne+=d*qt,Te+=d*Rt,Ae+=d*Pt,Se+=d*vt,Fe+=d*T,qe+=d*H,d=B[3],De+=d*wt,Me+=d*bt,Xe+=d*At,pt+=d*xt,ht+=d*Tt,Ve+=d*_t,Be+=d*Mt,$e+=d*jt,ke+=d*Bt,Ne+=d*kt,Te+=d*qt,Ae+=d*Rt,Se+=d*Pt,Fe+=d*vt,qe+=d*T,Ie+=d*H,d=B[4],Me+=d*wt,Xe+=d*bt,pt+=d*At,ht+=d*xt,Ve+=d*Tt,Be+=d*_t,$e+=d*Mt,ke+=d*jt,Ne+=d*Bt,Te+=d*kt,Ae+=d*qt,Se+=d*Rt,Fe+=d*Pt,qe+=d*vt,Ie+=d*T,He+=d*H,d=B[5],Xe+=d*wt,pt+=d*bt,ht+=d*At,Ve+=d*xt,Be+=d*Tt,$e+=d*_t,ke+=d*Mt,Ne+=d*jt,Te+=d*Bt,Ae+=d*kt,Se+=d*qt,Fe+=d*Rt,qe+=d*Pt,Ie+=d*vt,He+=d*T,et+=d*H,d=B[6],pt+=d*wt,ht+=d*bt,Ve+=d*At,Be+=d*xt,$e+=d*Tt,ke+=d*_t,Ne+=d*Mt,Te+=d*jt,Ae+=d*Bt,Se+=d*kt,Fe+=d*qt,qe+=d*Rt,Ie+=d*Pt,He+=d*vt,et+=d*T,nt+=d*H,d=B[7],ht+=d*wt,Ve+=d*bt,Be+=d*At,$e+=d*xt,ke+=d*Tt,Ne+=d*_t,Te+=d*Mt,Ae+=d*jt,Se+=d*Bt,Fe+=d*kt,qe+=d*qt,Ie+=d*Rt,He+=d*Pt,et+=d*vt,nt+=d*T,tt+=d*H,d=B[8],Ve+=d*wt,Be+=d*bt,$e+=d*At,ke+=d*xt,Ne+=d*Tt,Te+=d*_t,Ae+=d*Mt,Se+=d*jt,Fe+=d*Bt,qe+=d*kt,Ie+=d*qt,He+=d*Rt,et+=d*Pt,nt+=d*vt,tt+=d*T,it+=d*H,d=B[9],Be+=d*wt,$e+=d*bt,ke+=d*At,Ne+=d*xt,Te+=d*Tt,Ae+=d*_t,Se+=d*Mt,Fe+=d*jt,qe+=d*Bt,Ie+=d*kt,He+=d*qt,et+=d*Rt,nt+=d*Pt,tt+=d*vt,it+=d*T,Sr+=d*H,d=B[10],$e+=d*wt,ke+=d*bt,Ne+=d*At,Te+=d*xt,Ae+=d*Tt,Se+=d*_t,Fe+=d*Mt,qe+=d*jt,Ie+=d*Bt,He+=d*kt,et+=d*qt,nt+=d*Rt,tt+=d*Pt,it+=d*vt,Sr+=d*T,fr+=d*H,d=B[11],ke+=d*wt,Ne+=d*bt,Te+=d*At,Ae+=d*xt,Se+=d*Tt,Fe+=d*_t,qe+=d*Mt,Ie+=d*jt,He+=d*Bt,et+=d*kt,nt+=d*qt,tt+=d*Rt,it+=d*Pt,Sr+=d*vt,fr+=d*T,Mr+=d*H,d=B[12],Ne+=d*wt,Te+=d*bt,Ae+=d*At,Se+=d*xt,Fe+=d*Tt,qe+=d*_t,Ie+=d*Mt,He+=d*jt,et+=d*Bt,nt+=d*kt,tt+=d*qt,it+=d*Rt,Sr+=d*Pt,fr+=d*vt,Mr+=d*T,Qt+=d*H,d=B[13],Te+=d*wt,Ae+=d*bt,Se+=d*At,Fe+=d*xt,qe+=d*Tt,Ie+=d*_t,He+=d*Mt,et+=d*jt,nt+=d*Bt,tt+=d*kt,it+=d*qt,Sr+=d*Rt,fr+=d*Pt,Mr+=d*vt,Qt+=d*T,Yt+=d*H,d=B[14],Ae+=d*wt,Se+=d*bt,Fe+=d*At,qe+=d*xt,Ie+=d*Tt,He+=d*_t,et+=d*Mt,nt+=d*jt,tt+=d*Bt,it+=d*kt,Sr+=d*qt,fr+=d*Rt,Mr+=d*Pt,Qt+=d*vt,Yt+=d*T,Ar+=d*H,d=B[15],Se+=d*wt,Fe+=d*bt,qe+=d*At,Ie+=d*xt,He+=d*Tt,et+=d*_t,nt+=d*Mt,tt+=d*jt,it+=d*Bt,Sr+=d*kt,fr+=d*qt,Mr+=d*Rt,Qt+=d*Pt,Yt+=d*vt,Ar+=d*T,dn+=d*H,ce+=38*Fe,de+=38*qe,We+=38*Ie,De+=38*He,Me+=38*et,Xe+=38*nt,pt+=38*tt,ht+=38*it,Ve+=38*Sr,Be+=38*fr,$e+=38*Mr,ke+=38*Qt,Ne+=38*Yt,Te+=38*Ar,Ae+=38*dn,R=1,d=ce+R+65535,R=Math.floor(d/65536),ce=d-R*65536,d=de+R+65535,R=Math.floor(d/65536),de=d-R*65536,d=We+R+65535,R=Math.floor(d/65536),We=d-R*65536,d=De+R+65535,R=Math.floor(d/65536),De=d-R*65536,d=Me+R+65535,R=Math.floor(d/65536),Me=d-R*65536,d=Xe+R+65535,R=Math.floor(d/65536),Xe=d-R*65536,d=pt+R+65535,R=Math.floor(d/65536),pt=d-R*65536,d=ht+R+65535,R=Math.floor(d/65536),ht=d-R*65536,d=Ve+R+65535,R=Math.floor(d/65536),Ve=d-R*65536,d=Be+R+65535,R=Math.floor(d/65536),Be=d-R*65536,d=$e+R+65535,R=Math.floor(d/65536),$e=d-R*65536,d=ke+R+65535,R=Math.floor(d/65536),ke=d-R*65536,d=Ne+R+65535,R=Math.floor(d/65536),Ne=d-R*65536,d=Te+R+65535,R=Math.floor(d/65536),Te=d-R*65536,d=Ae+R+65535,R=Math.floor(d/65536),Ae=d-R*65536,d=Se+R+65535,R=Math.floor(d/65536),Se=d-R*65536,ce+=R-1+37*(R-1),R=1,d=ce+R+65535,R=Math.floor(d/65536),ce=d-R*65536,d=de+R+65535,R=Math.floor(d/65536),de=d-R*65536,d=We+R+65535,R=Math.floor(d/65536),We=d-R*65536,d=De+R+65535,R=Math.floor(d/65536),De=d-R*65536,d=Me+R+65535,R=Math.floor(d/65536),Me=d-R*65536,d=Xe+R+65535,R=Math.floor(d/65536),Xe=d-R*65536,d=pt+R+65535,R=Math.floor(d/65536),pt=d-R*65536,d=ht+R+65535,R=Math.floor(d/65536),ht=d-R*65536,d=Ve+R+65535,R=Math.floor(d/65536),Ve=d-R*65536,d=Be+R+65535,R=Math.floor(d/65536),Be=d-R*65536,d=$e+R+65535,R=Math.floor(d/65536),$e=d-R*65536,d=ke+R+65535,R=Math.floor(d/65536),ke=d-R*65536,d=Ne+R+65535,R=Math.floor(d/65536),Ne=d-R*65536,d=Te+R+65535,R=Math.floor(d/65536),Te=d-R*65536,d=Ae+R+65535,R=Math.floor(d/65536),Ae=d-R*65536,d=Se+R+65535,R=Math.floor(d/65536),Se=d-R*65536,ce+=R-1+37*(R-1),q[0]=ce,q[1]=de,q[2]=We,q[3]=De,q[4]=Me,q[5]=Xe,q[6]=pt,q[7]=ht,q[8]=Ve,q[9]=Be,q[10]=$e,q[11]=ke,q[12]=Ne,q[13]=Te,q[14]=Ae,q[15]=Se}function m(q,B){l(q,B,B)}function P(q,B){const M=i();let d;for(d=0;d<16;d++)M[d]=B[d];for(d=253;d>=0;d--)m(M,M),d!==2&&d!==4&&l(M,M,B);for(d=0;d<16;d++)q[d]=M[d]}function $(q,B){const M=i();let d;for(d=0;d<16;d++)M[d]=B[d];for(d=250;d>=0;d--)m(M,M),d!==1&&l(M,M,B);for(d=0;d<16;d++)q[d]=M[d]}function z(q,B){const M=i(),d=i(),R=i(),ce=i(),de=i(),We=i(),De=i(),Me=i(),Xe=i();g(M,q[1],q[0]),g(Xe,B[1],B[0]),l(M,M,Xe),_(d,q[0],q[1]),_(Xe,B[0],B[1]),l(d,d,Xe),l(R,q[3],B[3]),l(R,R,u),l(ce,q[2],B[2]),_(ce,ce,ce),g(de,d,M),g(We,ce,R),_(De,ce,R),_(Me,d,M),l(q[0],de,We),l(q[1],Me,De),l(q[2],De,We),l(q[3],de,Me)}function W(q,B,M){for(let d=0;d<4;d++)S(q[d],B[d],M)}function G(q,B){const M=i(),d=i(),R=i();P(R,B[2]),l(M,B[0],R),l(d,B[1],R),E(q,d),q[31]^=C(M)<<7}function N(q,B,M){y(q[0],o),y(q[1],a),y(q[2],a),y(q[3],o);for(let d=255;d>=0;--d){const R=M[d/8|0]>>(d&7)&1;W(q,B,R),z(B,q),z(q,q),W(q,B,R)}}function j(q,B){const M=[i(),i(),i(),i()];y(M[0],h),y(M[1],f),y(M[2],a),l(M[3],h,f),N(q,M,B)}function oe(q){if(q.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const B=(0,r.hash)(q);B[0]&=248,B[31]&=127,B[31]|=64;const M=new Uint8Array(32),d=[i(),i(),i(),i()];j(d,B),G(M,d);const R=new Uint8Array(64);return R.set(q),R.set(M,32),{publicKey:M,secretKey:R}}t.generateKeyPairFromSeed=oe;function Y(q){const B=(0,e.randomBytes)(32,q),M=oe(B);return(0,n.wipe)(B),M}t.generateKeyPair=Y;function Z(q){if(q.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(q.subarray(32))}t.extractPublicKeyFromSecretKey=Z;const X=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function K(q,B){let M,d,R,ce;for(d=63;d>=32;--d){for(M=0,R=d-32,ce=d-12;R<ce;++R)B[R]+=M-16*B[d]*X[R-(d-32)],M=Math.floor((B[R]+128)/256),B[R]-=M*256;B[R]+=M,B[d]=0}for(M=0,R=0;R<32;R++)B[R]+=M-(B[31]>>4)*X[R],M=B[R]>>8,B[R]&=255;for(R=0;R<32;R++)B[R]-=M*X[R];for(d=0;d<32;d++)B[d+1]+=B[d]>>8,q[d]=B[d]&255}function ee(q){const B=new Float64Array(64);for(let M=0;M<64;M++)B[M]=q[M];for(let M=0;M<64;M++)q[M]=0;K(q,B)}function xe(q,B){const M=new Float64Array(64),d=[i(),i(),i(),i()],R=(0,r.hash)(q.subarray(0,32));R[0]&=248,R[31]&=127,R[31]|=64;const ce=new Uint8Array(64);ce.set(R.subarray(32),32);const de=new r.SHA512;de.update(ce.subarray(32)),de.update(B);const We=de.digest();de.clean(),ee(We),j(d,We),G(ce,d),de.reset(),de.update(ce.subarray(0,32)),de.update(q.subarray(32)),de.update(B);const De=de.digest();ee(De);for(let Me=0;Me<32;Me++)M[Me]=We[Me];for(let Me=0;Me<32;Me++)for(let Xe=0;Xe<32;Xe++)M[Me+Xe]+=De[Me]*R[Xe];return K(ce.subarray(32),M),ce}t.sign=xe;function ne(q,B){const M=i(),d=i(),R=i(),ce=i(),de=i(),We=i(),De=i();return y(q[2],a),v(q[1],B),m(R,q[1]),l(ce,R,c),g(R,R,q[2]),_(ce,q[2],ce),m(de,ce),m(We,de),l(De,We,de),l(M,De,R),l(M,M,ce),$(M,M),l(M,M,R),l(M,M,ce),l(M,M,ce),l(q[0],M,ce),m(d,q[0]),l(d,d,ce),b(d,R)&&l(q[0],q[0],p),m(d,q[0]),l(d,d,ce),b(d,R)?-1:(C(q[0])===B[31]>>7&&g(q[0],o,q[0]),l(q[3],q[0],q[1]),0)}function Ee(q,B,M){const d=new Uint8Array(32),R=[i(),i(),i(),i()],ce=[i(),i(),i(),i()];if(M.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(ne(ce,q))return!1;const de=new r.SHA512;de.update(M.subarray(0,32)),de.update(q),de.update(B);const We=de.digest();return ee(We),N(R,ce,We),j(ce,M.subarray(32)),z(R,ce),G(d,R),!I(M,d)}t.verify=Ee;function fe(q){let B=[i(),i(),i(),i()];if(ne(B,q))throw new Error("Ed25519: invalid public key");let M=i(),d=i(),R=B[1];_(M,a,R),g(d,a,R),P(d,d),l(M,M,d);let ce=new Uint8Array(32);return E(ce,M),ce}t.convertPublicKeyToX25519=fe;function _e(q){const B=(0,r.hash)(q.subarray(0,32));B[0]&=248,B[31]&=127,B[31]|=64;const M=new Uint8Array(B.subarray(0,32));return(0,n.wipe)(B),M}t.convertSecretKeyToX25519=_e}(uc);const Ym="EdDSA",Jm="JWT",Rh=".",Ph="base64url",Xm="utf8",e1="utf8",t1=":",r1="did",n1="key",$h="base58btc",i1="z",s1="K36",o1=32;function gc(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Nh(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?gc(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function mc(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=Nh(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return gc(r)}function a1(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function f(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var S=0,E=0,I=0,b=w.length;I!==b&&w[I]===0;)I++,S++;for(var C=(b-I)*h+1>>>0,v=new Uint8Array(C);I!==b;){for(var _=w[I],g=0,l=C-1;(_!==0||g<E)&&l!==-1;l--,g++)_+=256*v[l]>>>0,v[l]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");E=g,I++}for(var m=C-E;m!==C&&v[m]===0;)m++;for(var P=c.repeat(S);m<C;++m)P+=t.charAt(v[m]);return P}function p(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var S=0;if(w[S]!==" "){for(var E=0,I=0;w[S]===c;)E++,S++;for(var b=(w.length-S)*u+1>>>0,C=new Uint8Array(b);w[S];){var v=r[w.charCodeAt(S)];if(v===255)return;for(var _=0,g=b-1;(v!==0||_<I)&&g!==-1;g--,_++)v+=a*C[g]>>>0,C[g]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");I=_,S++}if(w[S]!==" "){for(var l=b-I;l!==b&&C[l]===0;)l++;for(var m=new Uint8Array(E+(b-l)),P=E;l!==b;)m[P++]=C[l++];return m}}}function y(w){var S=p(w);if(S)return S;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:p,decode:y}}var c1=a1,l1=c1;const u1=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},h1=t=>new TextEncoder().encode(t),d1=t=>new TextDecoder().decode(t);class f1{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class p1{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Lh(this,e)}}class g1{constructor(e){this.decoders=e}or(e){return Lh(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Lh=(t,e)=>new g1({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class m1{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new f1(e,r,n),this.decoder=new p1(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const $o=({name:t,prefix:e,encode:r,decode:n})=>new m1(t,e,r,n),gs=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=l1(r,e);return $o({prefix:t,name:e,encode:n,decode:s=>u1(i(s))})},y1=(t,e,r,n)=>{const i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let h=0;h<s;++h){const f=i[t[h]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},v1=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},nr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>$o({prefix:e,name:t,encode(i){return v1(i,n,r)},decode(i){return y1(i,n,r,t)}}),w1=$o({prefix:"\0",name:"identity",encode:t=>d1(t),decode:t=>h1(t)}),b1=Object.freeze(Object.defineProperty({__proto__:null,identity:w1},Symbol.toStringTag,{value:"Module"})),_1=nr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),E1=Object.freeze(Object.defineProperty({__proto__:null,base2:_1},Symbol.toStringTag,{value:"Module"})),S1=nr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),x1=Object.freeze(Object.defineProperty({__proto__:null,base8:S1},Symbol.toStringTag,{value:"Module"})),C1=gs({prefix:"9",name:"base10",alphabet:"0123456789"}),O1=Object.freeze(Object.defineProperty({__proto__:null,base10:C1},Symbol.toStringTag,{value:"Module"})),I1=nr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),D1=nr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),A1=Object.freeze(Object.defineProperty({__proto__:null,base16:I1,base16upper:D1},Symbol.toStringTag,{value:"Module"})),T1=nr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),R1=nr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),P1=nr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),$1=nr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),N1=nr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),L1=nr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),M1=nr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),k1=nr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),F1=nr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),U1=Object.freeze(Object.defineProperty({__proto__:null,base32:T1,base32hex:N1,base32hexpad:M1,base32hexpadupper:k1,base32hexupper:L1,base32pad:P1,base32padupper:$1,base32upper:R1,base32z:F1},Symbol.toStringTag,{value:"Module"})),j1=gs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),B1=gs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),q1=Object.freeze(Object.defineProperty({__proto__:null,base36:j1,base36upper:B1},Symbol.toStringTag,{value:"Module"})),z1=gs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),W1=gs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),V1=Object.freeze(Object.defineProperty({__proto__:null,base58btc:z1,base58flickr:W1},Symbol.toStringTag,{value:"Module"})),H1=nr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),K1=nr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Z1=nr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),G1=nr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Q1=Object.freeze(Object.defineProperty({__proto__:null,base64:H1,base64pad:K1,base64url:Z1,base64urlpad:G1},Symbol.toStringTag,{value:"Module"})),Mh=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Y1=Mh.reduce((t,e,r)=>(t[r]=e,t),[]),J1=Mh.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function X1(t){return t.reduce((e,r)=>(e+=Y1[r],e),"")}function ey(t){const e=[];for(const r of t){const n=J1[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const ty=$o({prefix:"🚀",name:"base256emoji",encode:X1,decode:ey}),ry=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:ty},Symbol.toStringTag,{value:"Module"}));new TextEncoder,new TextDecoder;const kh={...b1,...E1,...x1,...O1,...A1,...U1,...q1,...V1,...Q1,...ry};function Fh(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Uh=Fh("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),yc=Fh("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Nh(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),jh={utf8:Uh,"utf-8":Uh,hex:kh.base16,latin1:yc,ascii:yc,binary:yc,...kh};function yr(t,e="utf8"){const r=jh[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Cr(t,e="utf8"){const r=jh[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?gc(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function No(t){return yr(Cr(lc(t),Xm),Ph)}function Bh(t){const e=Cr(s1,$h),r=i1+yr(mc([e,t]),$h);return[r1,n1,r].join(t1)}function ny(t){return yr(t,Ph)}function iy(t){return Cr([No(t.header),No(t.payload)].join(Rh),e1)}function sy(t){return[No(t.header),No(t.payload),ny(t.signature)].join(Rh)}function qh(t=Ai.randomBytes(o1)){return uc.generateKeyPairFromSeed(t)}async function oy(t,e,r,n,i=ye.fromMiliseconds(Date.now())){const s={alg:Ym,typ:Jm},o=Bh(n.publicKey),a=i+r,c={iss:o,sub:t,aud:e,iat:i,exp:a},u=iy({header:s,payload:c}),h=uc.sign(n.secretKey,u);return sy({header:s,payload:c,signature:h})}var vc={},Lo={};Object.defineProperty(Lo,"__esModule",{value:!0});var cr=Le,wc=$r,ay=20;function cy(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],u=r[11]<<24|r[10]<<16|r[9]<<8|r[8],h=r[15]<<24|r[14]<<16|r[13]<<8|r[12],f=r[19]<<24|r[18]<<16|r[17]<<8|r[16],p=r[23]<<24|r[22]<<16|r[21]<<8|r[20],y=r[27]<<24|r[26]<<16|r[25]<<8|r[24],w=r[31]<<24|r[30]<<16|r[29]<<8|r[28],S=e[3]<<24|e[2]<<16|e[1]<<8|e[0],E=e[7]<<24|e[6]<<16|e[5]<<8|e[4],I=e[11]<<24|e[10]<<16|e[9]<<8|e[8],b=e[15]<<24|e[14]<<16|e[13]<<8|e[12],C=n,v=i,_=s,g=o,l=a,m=c,P=u,$=h,z=f,W=p,G=y,N=w,j=S,oe=E,Y=I,Z=b,X=0;X<ay;X+=2)C=C+l|0,j^=C,j=j>>>32-16|j<<16,z=z+j|0,l^=z,l=l>>>32-12|l<<12,v=v+m|0,oe^=v,oe=oe>>>32-16|oe<<16,W=W+oe|0,m^=W,m=m>>>32-12|m<<12,_=_+P|0,Y^=_,Y=Y>>>32-16|Y<<16,G=G+Y|0,P^=G,P=P>>>32-12|P<<12,g=g+$|0,Z^=g,Z=Z>>>32-16|Z<<16,N=N+Z|0,$^=N,$=$>>>32-12|$<<12,_=_+P|0,Y^=_,Y=Y>>>32-8|Y<<8,G=G+Y|0,P^=G,P=P>>>32-7|P<<7,g=g+$|0,Z^=g,Z=Z>>>32-8|Z<<8,N=N+Z|0,$^=N,$=$>>>32-7|$<<7,v=v+m|0,oe^=v,oe=oe>>>32-8|oe<<8,W=W+oe|0,m^=W,m=m>>>32-7|m<<7,C=C+l|0,j^=C,j=j>>>32-8|j<<8,z=z+j|0,l^=z,l=l>>>32-7|l<<7,C=C+m|0,Z^=C,Z=Z>>>32-16|Z<<16,G=G+Z|0,m^=G,m=m>>>32-12|m<<12,v=v+P|0,j^=v,j=j>>>32-16|j<<16,N=N+j|0,P^=N,P=P>>>32-12|P<<12,_=_+$|0,oe^=_,oe=oe>>>32-16|oe<<16,z=z+oe|0,$^=z,$=$>>>32-12|$<<12,g=g+l|0,Y^=g,Y=Y>>>32-16|Y<<16,W=W+Y|0,l^=W,l=l>>>32-12|l<<12,_=_+$|0,oe^=_,oe=oe>>>32-8|oe<<8,z=z+oe|0,$^=z,$=$>>>32-7|$<<7,g=g+l|0,Y^=g,Y=Y>>>32-8|Y<<8,W=W+Y|0,l^=W,l=l>>>32-7|l<<7,v=v+P|0,j^=v,j=j>>>32-8|j<<8,N=N+j|0,P^=N,P=P>>>32-7|P<<7,C=C+m|0,Z^=C,Z=Z>>>32-8|Z<<8,G=G+Z|0,m^=G,m=m>>>32-7|m<<7;cr.writeUint32LE(C+n|0,t,0),cr.writeUint32LE(v+i|0,t,4),cr.writeUint32LE(_+s|0,t,8),cr.writeUint32LE(g+o|0,t,12),cr.writeUint32LE(l+a|0,t,16),cr.writeUint32LE(m+c|0,t,20),cr.writeUint32LE(P+u|0,t,24),cr.writeUint32LE($+h|0,t,28),cr.writeUint32LE(z+f|0,t,32),cr.writeUint32LE(W+p|0,t,36),cr.writeUint32LE(G+y|0,t,40),cr.writeUint32LE(N+w|0,t,44),cr.writeUint32LE(j+S|0,t,48),cr.writeUint32LE(oe+E|0,t,52),cr.writeUint32LE(Y+I|0,t,56),cr.writeUint32LE(Z+b|0,t,60)}function zh(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=i}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){cy(a,s,t);for(var u=c;u<c+64&&u<r.length;u++)n[u]=r[u]^a[u-c];uy(s,0,o)}return wc.wipe(a),i===0&&wc.wipe(s),n}Lo.streamXOR=zh;function ly(t,e,r,n){return n===void 0&&(n=0),wc.wipe(r),zh(t,e,r,r,n)}Lo.stream=ly;function uy(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var Wh={},Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});function hy(t,e,r){return~(t-1)&e|t-1&r}Tn.select=hy;function dy(t,e){return(t|0)-(e|0)-1>>>31&1}Tn.lessOrEqual=dy;function Vh(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}Tn.compare=Vh;function fy(t,e){return t.length===0||e.length===0?!1:Vh(t,e)!==0}Tn.equal=fy,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Tn,r=$r;t.DIGEST_LENGTH=16;var n=function(){function o(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=a[0]|a[1]<<8;this._r[0]=c&8191;var u=a[2]|a[3]<<8;this._r[1]=(c>>>13|u<<3)&8191;var h=a[4]|a[5]<<8;this._r[2]=(u>>>10|h<<6)&7939;var f=a[6]|a[7]<<8;this._r[3]=(h>>>7|f<<9)&8191;var p=a[8]|a[9]<<8;this._r[4]=(f>>>4|p<<12)&255,this._r[5]=p>>>1&8190;var y=a[10]|a[11]<<8;this._r[6]=(p>>>14|y<<2)&8191;var w=a[12]|a[13]<<8;this._r[7]=(y>>>11|w<<5)&8065;var S=a[14]|a[15]<<8;this._r[8]=(w>>>8|S<<8)&8191,this._r[9]=S>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return o.prototype._blocks=function(a,c,u){for(var h=this._fin?0:2048,f=this._h[0],p=this._h[1],y=this._h[2],w=this._h[3],S=this._h[4],E=this._h[5],I=this._h[6],b=this._h[7],C=this._h[8],v=this._h[9],_=this._r[0],g=this._r[1],l=this._r[2],m=this._r[3],P=this._r[4],$=this._r[5],z=this._r[6],W=this._r[7],G=this._r[8],N=this._r[9];u>=16;){var j=a[c+0]|a[c+1]<<8;f+=j&8191;var oe=a[c+2]|a[c+3]<<8;p+=(j>>>13|oe<<3)&8191;var Y=a[c+4]|a[c+5]<<8;y+=(oe>>>10|Y<<6)&8191;var Z=a[c+6]|a[c+7]<<8;w+=(Y>>>7|Z<<9)&8191;var X=a[c+8]|a[c+9]<<8;S+=(Z>>>4|X<<12)&8191,E+=X>>>1&8191;var K=a[c+10]|a[c+11]<<8;I+=(X>>>14|K<<2)&8191;var ee=a[c+12]|a[c+13]<<8;b+=(K>>>11|ee<<5)&8191;var xe=a[c+14]|a[c+15]<<8;C+=(ee>>>8|xe<<8)&8191,v+=xe>>>5|h;var ne=0,Ee=ne;Ee+=f*_,Ee+=p*(5*N),Ee+=y*(5*G),Ee+=w*(5*W),Ee+=S*(5*z),ne=Ee>>>13,Ee&=8191,Ee+=E*(5*$),Ee+=I*(5*P),Ee+=b*(5*m),Ee+=C*(5*l),Ee+=v*(5*g),ne+=Ee>>>13,Ee&=8191;var fe=ne;fe+=f*g,fe+=p*_,fe+=y*(5*N),fe+=w*(5*G),fe+=S*(5*W),ne=fe>>>13,fe&=8191,fe+=E*(5*z),fe+=I*(5*$),fe+=b*(5*P),fe+=C*(5*m),fe+=v*(5*l),ne+=fe>>>13,fe&=8191;var _e=ne;_e+=f*l,_e+=p*g,_e+=y*_,_e+=w*(5*N),_e+=S*(5*G),ne=_e>>>13,_e&=8191,_e+=E*(5*W),_e+=I*(5*z),_e+=b*(5*$),_e+=C*(5*P),_e+=v*(5*m),ne+=_e>>>13,_e&=8191;var q=ne;q+=f*m,q+=p*l,q+=y*g,q+=w*_,q+=S*(5*N),ne=q>>>13,q&=8191,q+=E*(5*G),q+=I*(5*W),q+=b*(5*z),q+=C*(5*$),q+=v*(5*P),ne+=q>>>13,q&=8191;var B=ne;B+=f*P,B+=p*m,B+=y*l,B+=w*g,B+=S*_,ne=B>>>13,B&=8191,B+=E*(5*N),B+=I*(5*G),B+=b*(5*W),B+=C*(5*z),B+=v*(5*$),ne+=B>>>13,B&=8191;var M=ne;M+=f*$,M+=p*P,M+=y*m,M+=w*l,M+=S*g,ne=M>>>13,M&=8191,M+=E*_,M+=I*(5*N),M+=b*(5*G),M+=C*(5*W),M+=v*(5*z),ne+=M>>>13,M&=8191;var d=ne;d+=f*z,d+=p*$,d+=y*P,d+=w*m,d+=S*l,ne=d>>>13,d&=8191,d+=E*g,d+=I*_,d+=b*(5*N),d+=C*(5*G),d+=v*(5*W),ne+=d>>>13,d&=8191;var R=ne;R+=f*W,R+=p*z,R+=y*$,R+=w*P,R+=S*m,ne=R>>>13,R&=8191,R+=E*l,R+=I*g,R+=b*_,R+=C*(5*N),R+=v*(5*G),ne+=R>>>13,R&=8191;var ce=ne;ce+=f*G,ce+=p*W,ce+=y*z,ce+=w*$,ce+=S*P,ne=ce>>>13,ce&=8191,ce+=E*m,ce+=I*l,ce+=b*g,ce+=C*_,ce+=v*(5*N),ne+=ce>>>13,ce&=8191;var de=ne;de+=f*N,de+=p*G,de+=y*W,de+=w*z,de+=S*$,ne=de>>>13,de&=8191,de+=E*P,de+=I*m,de+=b*l,de+=C*g,de+=v*_,ne+=de>>>13,de&=8191,ne=(ne<<2)+ne|0,ne=ne+Ee|0,Ee=ne&8191,ne=ne>>>13,fe+=ne,f=Ee,p=fe,y=_e,w=q,S=B,E=M,I=d,b=R,C=ce,v=de,c+=16,u-=16}this._h[0]=f,this._h[1]=p,this._h[2]=y,this._h[3]=w,this._h[4]=S,this._h[5]=E,this._h[6]=I,this._h[7]=b,this._h[8]=C,this._h[9]=v},o.prototype.finish=function(a,c){c===void 0&&(c=0);var u=new Uint16Array(10),h,f,p,y;if(this._leftover){for(y=this._leftover,this._buffer[y++]=1;y<16;y++)this._buffer[y]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(h=this._h[1]>>>13,this._h[1]&=8191,y=2;y<10;y++)this._h[y]+=h,h=this._h[y]>>>13,this._h[y]&=8191;for(this._h[0]+=h*5,h=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=h,h=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=h,u[0]=this._h[0]+5,h=u[0]>>>13,u[0]&=8191,y=1;y<10;y++)u[y]=this._h[y]+h,h=u[y]>>>13,u[y]&=8191;for(u[9]-=8192,f=(h^1)-1,y=0;y<10;y++)u[y]&=f;for(f=~f,y=0;y<10;y++)this._h[y]=this._h[y]&f|u[y];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,p=this._h[0]+this._pad[0],this._h[0]=p&65535,y=1;y<8;y++)p=(this._h[y]+this._pad[y]|0)+(p>>>16)|0,this._h[y]=p&65535;return a[c+0]=this._h[0]>>>0,a[c+1]=this._h[0]>>>8,a[c+2]=this._h[1]>>>0,a[c+3]=this._h[1]>>>8,a[c+4]=this._h[2]>>>0,a[c+5]=this._h[2]>>>8,a[c+6]=this._h[3]>>>0,a[c+7]=this._h[3]>>>8,a[c+8]=this._h[4]>>>0,a[c+9]=this._h[4]>>>8,a[c+10]=this._h[5]>>>0,a[c+11]=this._h[5]>>>8,a[c+12]=this._h[6]>>>0,a[c+13]=this._h[6]>>>8,a[c+14]=this._h[7]>>>0,a[c+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(a){var c=0,u=a.length,h;if(this._leftover){h=16-this._leftover,h>u&&(h=u);for(var f=0;f<h;f++)this._buffer[this._leftover+f]=a[c+f];if(u-=h,c+=h,this._leftover+=h,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(u>=16&&(h=u-u%16,this._blocks(a,c,h),c+=h,u-=h),u){for(var f=0;f<u;f++)this._buffer[this._leftover+f]=a[c+f];this._leftover+=u}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},o.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o}();t.Poly1305=n;function i(o,a){var c=new n(o);c.update(a);var u=c.digest();return c.clean(),u}t.oneTimeAuth=i;function s(o,a){return o.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(o,a)}t.equal=s}(Wh),function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Lo,r=Wh,n=$r,i=Le,s=Tn;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var o=new Uint8Array(16),a=function(){function c(u){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,u.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(u)}return c.prototype.seal=function(u,h,f,p){if(u.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var y=new Uint8Array(16);y.set(u,y.length-u.length);var w=new Uint8Array(32);e.stream(this._key,y,w,4);var S=h.length+this.tagLength,E;if(p){if(p.length!==S)throw new Error("ChaCha20Poly1305: incorrect destination length");E=p}else E=new Uint8Array(S);return e.streamXOR(this._key,y,h,E,4),this._authenticate(E.subarray(E.length-this.tagLength,E.length),w,E.subarray(0,E.length-this.tagLength),f),n.wipe(y),E},c.prototype.open=function(u,h,f,p){if(u.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(h.length<this.tagLength)return null;var y=new Uint8Array(16);y.set(u,y.length-u.length);var w=new Uint8Array(32);e.stream(this._key,y,w,4);var S=new Uint8Array(this.tagLength);if(this._authenticate(S,w,h.subarray(0,h.length-this.tagLength),f),!s.equal(S,h.subarray(h.length-this.tagLength,h.length)))return null;var E=h.length-this.tagLength,I;if(p){if(p.length!==E)throw new Error("ChaCha20Poly1305: incorrect destination length");I=p}else I=new Uint8Array(E);return e.streamXOR(this._key,y,h.subarray(0,h.length-this.tagLength),I,4),n.wipe(y),I},c.prototype.clean=function(){return n.wipe(this._key),this},c.prototype._authenticate=function(u,h,f,p){var y=new r.Poly1305(h);p&&(y.update(p),p.length%16>0&&y.update(o.subarray(p.length%16))),y.update(f),f.length%16>0&&y.update(o.subarray(f.length%16));var w=new Uint8Array(8);p&&i.writeUint64LE(p.length,w),y.update(w),i.writeUint64LE(f.length,w),y.update(w);for(var S=y.digest(),E=0;E<S.length;E++)u[E]=S[E];y.clean(),n.wipe(S),n.wipe(w)},c}();t.ChaCha20Poly1305=a}(vc);var Hh={},ms={},bc={};Object.defineProperty(bc,"__esModule",{value:!0});function py(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}bc.isSerializableHash=py,Object.defineProperty(ms,"__esModule",{value:!0});var sn=bc,gy=Tn,my=$r,Kh=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),sn.isSerializableHash(this._inner)&&sn.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),my.wipe(n)}return t.prototype.reset=function(){if(!sn.isSerializableHash(this._inner)||!sn.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){sn.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),sn.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!sn.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!sn.isSerializableHash(this._inner)||!sn.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!sn.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();ms.HMAC=Kh;function yy(t,e,r){var n=new Kh(t,e);n.update(r);var i=n.digest();return n.clean(),i}ms.hmac=yy,ms.equal=gy.equal,Object.defineProperty(Hh,"__esModule",{value:!0});var Zh=ms,Gh=$r,vy=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=Zh.hmac(this._hash,n,r);this._hmac=new Zh.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),Gh.wipe(this._buffer),Gh.wipe(this._counter),this._bufpos=0},t}(),wy=Hh.HKDF=vy,Mo={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Le,r=$r;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},a.prototype.update=function(c,u){if(u===void 0&&(u=c.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var h=0;if(this._bytesHashed+=u,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&u>0;)this._buffer[this._bufferLength++]=c[h++],u--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(u>=this.blockSize&&(h=s(this._temp,this._state,c,h,u),u%=this.blockSize);u>0;)this._buffer[this._bufferLength++]=c[h++],u--;return this},a.prototype.finish=function(c){if(!this._finished){var u=this._bytesHashed,h=this._bufferLength,f=u/536870912|0,p=u<<3,y=u%64<56?64:128;this._buffer[h]=128;for(var w=h+1;w<y-8;w++)this._buffer[w]=0;e.writeUint32BE(f,this._buffer,y-8),e.writeUint32BE(p,this._buffer,y-4),s(this._temp,this._state,this._buffer,0,y),this._finished=!0}for(var w=0;w<this.digestLength/4;w++)e.writeUint32BE(this._state[w],c,w*4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._state.set(c.state),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.state),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(a,c,u,h,f){for(;f>=64;){for(var p=c[0],y=c[1],w=c[2],S=c[3],E=c[4],I=c[5],b=c[6],C=c[7],v=0;v<16;v++){var _=h+v*4;a[v]=e.readUint32BE(u,_)}for(var v=16;v<64;v++){var g=a[v-2],l=(g>>>17|g<<32-17)^(g>>>19|g<<32-19)^g>>>10;g=a[v-15];var m=(g>>>7|g<<32-7)^(g>>>18|g<<32-18)^g>>>3;a[v]=(l+a[v-7]|0)+(m+a[v-16]|0)}for(var v=0;v<64;v++){var l=(((E>>>6|E<<26)^(E>>>11|E<<21)^(E>>>25|E<<7))+(E&I^~E&b)|0)+(C+(i[v]+a[v]|0)|0)|0,m=((p>>>2|p<<32-2)^(p>>>13|p<<32-13)^(p>>>22|p<<32-22))+(p&y^p&w^y&w)|0;C=b,b=I,I=E,E=S+l|0,S=w,w=y,y=p,p=l+m|0}c[0]+=p,c[1]+=y,c[2]+=w,c[3]+=S,c[4]+=E,c[5]+=I,c[6]+=b,c[7]+=C,h+=64,f-=64}return h}function o(a){var c=new n;c.update(a);var u=c.digest();return c.clean(),u}t.hash=o})(Mo);var _c={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=Ai,r=$r;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(v){const _=new Float64Array(16);if(v)for(let g=0;g<v.length;g++)_[g]=v[g];return _}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function o(v){let _=1;for(let g=0;g<16;g++){let l=v[g]+_+65535;_=Math.floor(l/65536),v[g]=l-_*65536}v[0]+=_-1+37*(_-1)}function a(v,_,g){const l=~(g-1);for(let m=0;m<16;m++){const P=l&(v[m]^_[m]);v[m]^=P,_[m]^=P}}function c(v,_){const g=n(),l=n();for(let m=0;m<16;m++)l[m]=_[m];o(l),o(l),o(l);for(let m=0;m<2;m++){g[0]=l[0]-65517;for(let $=1;$<15;$++)g[$]=l[$]-65535-(g[$-1]>>16&1),g[$-1]&=65535;g[15]=l[15]-32767-(g[14]>>16&1);const P=g[15]>>16&1;g[14]&=65535,a(l,g,1-P)}for(let m=0;m<16;m++)v[2*m]=l[m]&255,v[2*m+1]=l[m]>>8}function u(v,_){for(let g=0;g<16;g++)v[g]=_[2*g]+(_[2*g+1]<<8);v[15]&=32767}function h(v,_,g){for(let l=0;l<16;l++)v[l]=_[l]+g[l]}function f(v,_,g){for(let l=0;l<16;l++)v[l]=_[l]-g[l]}function p(v,_,g){let l,m,P=0,$=0,z=0,W=0,G=0,N=0,j=0,oe=0,Y=0,Z=0,X=0,K=0,ee=0,xe=0,ne=0,Ee=0,fe=0,_e=0,q=0,B=0,M=0,d=0,R=0,ce=0,de=0,We=0,De=0,Me=0,Xe=0,pt=0,ht=0,Ve=g[0],Be=g[1],$e=g[2],ke=g[3],Ne=g[4],Te=g[5],Ae=g[6],Se=g[7],Fe=g[8],qe=g[9],Ie=g[10],He=g[11],et=g[12],nt=g[13],tt=g[14],it=g[15];l=_[0],P+=l*Ve,$+=l*Be,z+=l*$e,W+=l*ke,G+=l*Ne,N+=l*Te,j+=l*Ae,oe+=l*Se,Y+=l*Fe,Z+=l*qe,X+=l*Ie,K+=l*He,ee+=l*et,xe+=l*nt,ne+=l*tt,Ee+=l*it,l=_[1],$+=l*Ve,z+=l*Be,W+=l*$e,G+=l*ke,N+=l*Ne,j+=l*Te,oe+=l*Ae,Y+=l*Se,Z+=l*Fe,X+=l*qe,K+=l*Ie,ee+=l*He,xe+=l*et,ne+=l*nt,Ee+=l*tt,fe+=l*it,l=_[2],z+=l*Ve,W+=l*Be,G+=l*$e,N+=l*ke,j+=l*Ne,oe+=l*Te,Y+=l*Ae,Z+=l*Se,X+=l*Fe,K+=l*qe,ee+=l*Ie,xe+=l*He,ne+=l*et,Ee+=l*nt,fe+=l*tt,_e+=l*it,l=_[3],W+=l*Ve,G+=l*Be,N+=l*$e,j+=l*ke,oe+=l*Ne,Y+=l*Te,Z+=l*Ae,X+=l*Se,K+=l*Fe,ee+=l*qe,xe+=l*Ie,ne+=l*He,Ee+=l*et,fe+=l*nt,_e+=l*tt,q+=l*it,l=_[4],G+=l*Ve,N+=l*Be,j+=l*$e,oe+=l*ke,Y+=l*Ne,Z+=l*Te,X+=l*Ae,K+=l*Se,ee+=l*Fe,xe+=l*qe,ne+=l*Ie,Ee+=l*He,fe+=l*et,_e+=l*nt,q+=l*tt,B+=l*it,l=_[5],N+=l*Ve,j+=l*Be,oe+=l*$e,Y+=l*ke,Z+=l*Ne,X+=l*Te,K+=l*Ae,ee+=l*Se,xe+=l*Fe,ne+=l*qe,Ee+=l*Ie,fe+=l*He,_e+=l*et,q+=l*nt,B+=l*tt,M+=l*it,l=_[6],j+=l*Ve,oe+=l*Be,Y+=l*$e,Z+=l*ke,X+=l*Ne,K+=l*Te,ee+=l*Ae,xe+=l*Se,ne+=l*Fe,Ee+=l*qe,fe+=l*Ie,_e+=l*He,q+=l*et,B+=l*nt,M+=l*tt,d+=l*it,l=_[7],oe+=l*Ve,Y+=l*Be,Z+=l*$e,X+=l*ke,K+=l*Ne,ee+=l*Te,xe+=l*Ae,ne+=l*Se,Ee+=l*Fe,fe+=l*qe,_e+=l*Ie,q+=l*He,B+=l*et,M+=l*nt,d+=l*tt,R+=l*it,l=_[8],Y+=l*Ve,Z+=l*Be,X+=l*$e,K+=l*ke,ee+=l*Ne,xe+=l*Te,ne+=l*Ae,Ee+=l*Se,fe+=l*Fe,_e+=l*qe,q+=l*Ie,B+=l*He,M+=l*et,d+=l*nt,R+=l*tt,ce+=l*it,l=_[9],Z+=l*Ve,X+=l*Be,K+=l*$e,ee+=l*ke,xe+=l*Ne,ne+=l*Te,Ee+=l*Ae,fe+=l*Se,_e+=l*Fe,q+=l*qe,B+=l*Ie,M+=l*He,d+=l*et,R+=l*nt,ce+=l*tt,de+=l*it,l=_[10],X+=l*Ve,K+=l*Be,ee+=l*$e,xe+=l*ke,ne+=l*Ne,Ee+=l*Te,fe+=l*Ae,_e+=l*Se,q+=l*Fe,B+=l*qe,M+=l*Ie,d+=l*He,R+=l*et,ce+=l*nt,de+=l*tt,We+=l*it,l=_[11],K+=l*Ve,ee+=l*Be,xe+=l*$e,ne+=l*ke,Ee+=l*Ne,fe+=l*Te,_e+=l*Ae,q+=l*Se,B+=l*Fe,M+=l*qe,d+=l*Ie,R+=l*He,ce+=l*et,de+=l*nt,We+=l*tt,De+=l*it,l=_[12],ee+=l*Ve,xe+=l*Be,ne+=l*$e,Ee+=l*ke,fe+=l*Ne,_e+=l*Te,q+=l*Ae,B+=l*Se,M+=l*Fe,d+=l*qe,R+=l*Ie,ce+=l*He,de+=l*et,We+=l*nt,De+=l*tt,Me+=l*it,l=_[13],xe+=l*Ve,ne+=l*Be,Ee+=l*$e,fe+=l*ke,_e+=l*Ne,q+=l*Te,B+=l*Ae,M+=l*Se,d+=l*Fe,R+=l*qe,ce+=l*Ie,de+=l*He,We+=l*et,De+=l*nt,Me+=l*tt,Xe+=l*it,l=_[14],ne+=l*Ve,Ee+=l*Be,fe+=l*$e,_e+=l*ke,q+=l*Ne,B+=l*Te,M+=l*Ae,d+=l*Se,R+=l*Fe,ce+=l*qe,de+=l*Ie,We+=l*He,De+=l*et,Me+=l*nt,Xe+=l*tt,pt+=l*it,l=_[15],Ee+=l*Ve,fe+=l*Be,_e+=l*$e,q+=l*ke,B+=l*Ne,M+=l*Te,d+=l*Ae,R+=l*Se,ce+=l*Fe,de+=l*qe,We+=l*Ie,De+=l*He,Me+=l*et,Xe+=l*nt,pt+=l*tt,ht+=l*it,P+=38*fe,$+=38*_e,z+=38*q,W+=38*B,G+=38*M,N+=38*d,j+=38*R,oe+=38*ce,Y+=38*de,Z+=38*We,X+=38*De,K+=38*Me,ee+=38*Xe,xe+=38*pt,ne+=38*ht,m=1,l=P+m+65535,m=Math.floor(l/65536),P=l-m*65536,l=$+m+65535,m=Math.floor(l/65536),$=l-m*65536,l=z+m+65535,m=Math.floor(l/65536),z=l-m*65536,l=W+m+65535,m=Math.floor(l/65536),W=l-m*65536,l=G+m+65535,m=Math.floor(l/65536),G=l-m*65536,l=N+m+65535,m=Math.floor(l/65536),N=l-m*65536,l=j+m+65535,m=Math.floor(l/65536),j=l-m*65536,l=oe+m+65535,m=Math.floor(l/65536),oe=l-m*65536,l=Y+m+65535,m=Math.floor(l/65536),Y=l-m*65536,l=Z+m+65535,m=Math.floor(l/65536),Z=l-m*65536,l=X+m+65535,m=Math.floor(l/65536),X=l-m*65536,l=K+m+65535,m=Math.floor(l/65536),K=l-m*65536,l=ee+m+65535,m=Math.floor(l/65536),ee=l-m*65536,l=xe+m+65535,m=Math.floor(l/65536),xe=l-m*65536,l=ne+m+65535,m=Math.floor(l/65536),ne=l-m*65536,l=Ee+m+65535,m=Math.floor(l/65536),Ee=l-m*65536,P+=m-1+37*(m-1),m=1,l=P+m+65535,m=Math.floor(l/65536),P=l-m*65536,l=$+m+65535,m=Math.floor(l/65536),$=l-m*65536,l=z+m+65535,m=Math.floor(l/65536),z=l-m*65536,l=W+m+65535,m=Math.floor(l/65536),W=l-m*65536,l=G+m+65535,m=Math.floor(l/65536),G=l-m*65536,l=N+m+65535,m=Math.floor(l/65536),N=l-m*65536,l=j+m+65535,m=Math.floor(l/65536),j=l-m*65536,l=oe+m+65535,m=Math.floor(l/65536),oe=l-m*65536,l=Y+m+65535,m=Math.floor(l/65536),Y=l-m*65536,l=Z+m+65535,m=Math.floor(l/65536),Z=l-m*65536,l=X+m+65535,m=Math.floor(l/65536),X=l-m*65536,l=K+m+65535,m=Math.floor(l/65536),K=l-m*65536,l=ee+m+65535,m=Math.floor(l/65536),ee=l-m*65536,l=xe+m+65535,m=Math.floor(l/65536),xe=l-m*65536,l=ne+m+65535,m=Math.floor(l/65536),ne=l-m*65536,l=Ee+m+65535,m=Math.floor(l/65536),Ee=l-m*65536,P+=m-1+37*(m-1),v[0]=P,v[1]=$,v[2]=z,v[3]=W,v[4]=G,v[5]=N,v[6]=j,v[7]=oe,v[8]=Y,v[9]=Z,v[10]=X,v[11]=K,v[12]=ee,v[13]=xe,v[14]=ne,v[15]=Ee}function y(v,_){p(v,_,_)}function w(v,_){const g=n();for(let l=0;l<16;l++)g[l]=_[l];for(let l=253;l>=0;l--)y(g,g),l!==2&&l!==4&&p(g,g,_);for(let l=0;l<16;l++)v[l]=g[l]}function S(v,_){const g=new Uint8Array(32),l=new Float64Array(80),m=n(),P=n(),$=n(),z=n(),W=n(),G=n();for(let Y=0;Y<31;Y++)g[Y]=v[Y];g[31]=v[31]&127|64,g[0]&=248,u(l,_);for(let Y=0;Y<16;Y++)P[Y]=l[Y];m[0]=z[0]=1;for(let Y=254;Y>=0;--Y){const Z=g[Y>>>3]>>>(Y&7)&1;a(m,P,Z),a($,z,Z),h(W,m,$),f(m,m,$),h($,P,z),f(P,P,z),y(z,W),y(G,m),p(m,$,m),p($,P,W),h(W,m,$),f(m,m,$),y(P,m),f($,z,G),p(m,$,s),h(m,m,z),p($,$,m),p(m,z,G),p(z,P,l),y(P,W),a(m,P,Z),a($,z,Z)}for(let Y=0;Y<16;Y++)l[Y+16]=m[Y],l[Y+32]=$[Y],l[Y+48]=P[Y],l[Y+64]=z[Y];const N=l.subarray(32),j=l.subarray(16);w(N,N),p(j,j,N);const oe=new Uint8Array(32);return c(oe,j),oe}t.scalarMult=S;function E(v){return S(v,i)}t.scalarMultBase=E;function I(v){if(v.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const _=new Uint8Array(v);return{publicKey:E(_),secretKey:_}}t.generateKeyPairFromSeed=I;function b(v){const _=(0,e.randomBytes)(32,v),g=I(_);return(0,r.wipe)(_),g}t.generateKeyPair=b;function C(v,_,g=!1){if(v.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(_.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const l=S(v,_);if(g){let m=0;for(let P=0;P<l.length;P++)m|=l[P];if(m===0)throw new Error("X25519: invalid shared key")}return l}t.sharedKey=C})(_c);var Qh=globalThis&&globalThis.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},by=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),_y=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Ey=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),Sy=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),xy=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Cy=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Oy=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Yh=3,Iy=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Cy]],Jh=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Dy(t){return t?Xh(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new xy:typeof navigator<"u"?Xh(navigator.userAgent):Ry()}function Ay(t){return t!==""&&Iy.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function Xh(t){var e=Ay(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Sy;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<Yh&&(i=Qh(Qh([],i,!0),Py(Yh-i.length),!0)):i=[];var s=i.join("."),o=Ty(t),a=Oy.exec(t);return a&&a[1]?new Ey(r,s,o,a[1]):new by(r,s,o)}function Ty(t){for(var e=0,r=Jh.length;e<r;e++){var n=Jh[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function Ry(){var t=typeof process<"u"&&process.version;return t?new _y(process.version.slice(1)):null}function Py(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Et={};Object.defineProperty(Et,"__esModule",{value:!0}),Et.getLocalStorage=Et.getLocalStorageOrThrow=Et.getCrypto=Et.getCryptoOrThrow=td=Et.getLocation=Et.getLocationOrThrow=Ec=Et.getNavigator=Et.getNavigatorOrThrow=ed=Et.getDocument=Et.getDocumentOrThrow=Et.getFromWindowOrThrow=Et.getFromWindow=void 0;function ni(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Et.getFromWindow=ni;function Ti(t){const e=ni(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Et.getFromWindowOrThrow=Ti;function $y(){return Ti("document")}Et.getDocumentOrThrow=$y;function Ny(){return ni("document")}var ed=Et.getDocument=Ny;function Ly(){return Ti("navigator")}Et.getNavigatorOrThrow=Ly;function My(){return ni("navigator")}var Ec=Et.getNavigator=My;function ky(){return Ti("location")}Et.getLocationOrThrow=ky;function Fy(){return ni("location")}var td=Et.getLocation=Fy;function Uy(){return Ti("crypto")}Et.getCryptoOrThrow=Uy;function jy(){return ni("crypto")}Et.getCrypto=jy;function By(){return Ti("localStorage")}Et.getLocalStorageOrThrow=By;function qy(){return ni("localStorage")}Et.getLocalStorage=qy;var Sc={};Object.defineProperty(Sc,"__esModule",{value:!0});var rd=Sc.getWindowMetadata=void 0;const nd=Et;function zy(){let t,e;try{t=nd.getDocumentOrThrow(),e=nd.getLocationOrThrow()}catch{return null}function r(){const f=t.getElementsByTagName("link"),p=[];for(let y=0;y<f.length;y++){const w=f[y],S=w.getAttribute("rel");if(S&&S.toLowerCase().indexOf("icon")>-1){const E=w.getAttribute("href");if(E)if(E.toLowerCase().indexOf("https:")===-1&&E.toLowerCase().indexOf("http:")===-1&&E.indexOf("//")!==0){let I=e.protocol+"//"+e.host;if(E.indexOf("/")===0)I+=E;else{const b=e.pathname.split("/");b.pop();const C=b.join("/");I+=C+"/"+E}p.push(I)}else if(E.indexOf("//")===0){const I=e.protocol+E;p.push(I)}else p.push(E)}}return p}function n(...f){const p=t.getElementsByTagName("meta");for(let y=0;y<p.length;y++){const w=p[y],S=["itemprop","property","name"].map(E=>w.getAttribute(E)).filter(E=>E?f.includes(E):!1);if(S.length&&S){const E=w.getAttribute("content");if(E)return E}}return""}function i(){let f=n("name","og:site_name","og:title","twitter:title");return f||(f=t.title),f}function s(){return n("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=e.origin,u=r();return{description:a,url:c,icons:u,name:o}}rd=Sc.getWindowMetadata=zy;var ys={},Wy=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),id="%[a-f0-9]{2}",sd=new RegExp("("+id+")|([^%]+?)","gi"),od=new RegExp("("+id+")+","gi");function xc(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],xc(r),xc(n))}function Vy(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(sd)||[],r=1;r<e.length;r++)t=xc(e,r).join(""),e=t.match(sd)||[];return t}}function Hy(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=od.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=Vy(r[0]);n!==r[0]&&(e[r[0]]=n)}r=od.exec(t)}e["%C2"]="�";for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];t=t.replace(new RegExp(o,"g"),e[o])}return t}var Ky=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return Hy(t)}},Zy=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},Gy=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var o=n[s],a=t[o];(i?e.indexOf(o)!==-1:e(o,a,t))&&(r[o]=a)}return r};(function(t){const e=Wy,r=Ky,n=Zy,i=Gy,s=b=>b==null,o=Symbol("encodeFragmentIdentifier");function a(b){switch(b.arrayFormat){case"index":return C=>(v,_)=>{const g=v.length;return _===void 0||b.skipNull&&_===null||b.skipEmptyString&&_===""?v:_===null?[...v,[h(C,b),"[",g,"]"].join("")]:[...v,[h(C,b),"[",h(g,b),"]=",h(_,b)].join("")]};case"bracket":return C=>(v,_)=>_===void 0||b.skipNull&&_===null||b.skipEmptyString&&_===""?v:_===null?[...v,[h(C,b),"[]"].join("")]:[...v,[h(C,b),"[]=",h(_,b)].join("")];case"colon-list-separator":return C=>(v,_)=>_===void 0||b.skipNull&&_===null||b.skipEmptyString&&_===""?v:_===null?[...v,[h(C,b),":list="].join("")]:[...v,[h(C,b),":list=",h(_,b)].join("")];case"comma":case"separator":case"bracket-separator":{const C=b.arrayFormat==="bracket-separator"?"[]=":"=";return v=>(_,g)=>g===void 0||b.skipNull&&g===null||b.skipEmptyString&&g===""?_:(g=g===null?"":g,_.length===0?[[h(v,b),C,h(g,b)].join("")]:[[_,h(g,b)].join(b.arrayFormatSeparator)])}default:return C=>(v,_)=>_===void 0||b.skipNull&&_===null||b.skipEmptyString&&_===""?v:_===null?[...v,h(C,b)]:[...v,[h(C,b),"=",h(_,b)].join("")]}}function c(b){let C;switch(b.arrayFormat){case"index":return(v,_,g)=>{if(C=/\[(\d*)\]$/.exec(v),v=v.replace(/\[\d*\]$/,""),!C){g[v]=_;return}g[v]===void 0&&(g[v]={}),g[v][C[1]]=_};case"bracket":return(v,_,g)=>{if(C=/(\[\])$/.exec(v),v=v.replace(/\[\]$/,""),!C){g[v]=_;return}if(g[v]===void 0){g[v]=[_];return}g[v]=[].concat(g[v],_)};case"colon-list-separator":return(v,_,g)=>{if(C=/(:list)$/.exec(v),v=v.replace(/:list$/,""),!C){g[v]=_;return}if(g[v]===void 0){g[v]=[_];return}g[v]=[].concat(g[v],_)};case"comma":case"separator":return(v,_,g)=>{const l=typeof _=="string"&&_.includes(b.arrayFormatSeparator),m=typeof _=="string"&&!l&&f(_,b).includes(b.arrayFormatSeparator);_=m?f(_,b):_;const P=l||m?_.split(b.arrayFormatSeparator).map($=>f($,b)):_===null?_:f(_,b);g[v]=P};case"bracket-separator":return(v,_,g)=>{const l=/(\[\])$/.test(v);if(v=v.replace(/\[\]$/,""),!l){g[v]=_&&f(_,b);return}const m=_===null?[]:_.split(b.arrayFormatSeparator).map(P=>f(P,b));if(g[v]===void 0){g[v]=m;return}g[v]=[].concat(g[v],m)};default:return(v,_,g)=>{if(g[v]===void 0){g[v]=_;return}g[v]=[].concat(g[v],_)}}}function u(b){if(typeof b!="string"||b.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function h(b,C){return C.encode?C.strict?e(b):encodeURIComponent(b):b}function f(b,C){return C.decode?r(b):b}function p(b){return Array.isArray(b)?b.sort():typeof b=="object"?p(Object.keys(b)).sort((C,v)=>Number(C)-Number(v)).map(C=>b[C]):b}function y(b){const C=b.indexOf("#");return C!==-1&&(b=b.slice(0,C)),b}function w(b){let C="";const v=b.indexOf("#");return v!==-1&&(C=b.slice(v)),C}function S(b){b=y(b);const C=b.indexOf("?");return C===-1?"":b.slice(C+1)}function E(b,C){return C.parseNumbers&&!Number.isNaN(Number(b))&&typeof b=="string"&&b.trim()!==""?b=Number(b):C.parseBooleans&&b!==null&&(b.toLowerCase()==="true"||b.toLowerCase()==="false")&&(b=b.toLowerCase()==="true"),b}function I(b,C){C=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},C),u(C.arrayFormatSeparator);const v=c(C),_=Object.create(null);if(typeof b!="string"||(b=b.trim().replace(/^[?#&]/,""),!b))return _;for(const g of b.split("&")){if(g==="")continue;let[l,m]=n(C.decode?g.replace(/\+/g," "):g,"=");m=m===void 0?null:["comma","separator","bracket-separator"].includes(C.arrayFormat)?m:f(m,C),v(f(l,C),m,_)}for(const g of Object.keys(_)){const l=_[g];if(typeof l=="object"&&l!==null)for(const m of Object.keys(l))l[m]=E(l[m],C);else _[g]=E(l,C)}return C.sort===!1?_:(C.sort===!0?Object.keys(_).sort():Object.keys(_).sort(C.sort)).reduce((g,l)=>{const m=_[l];return m&&typeof m=="object"&&!Array.isArray(m)?g[l]=p(m):g[l]=m,g},Object.create(null))}t.extract=S,t.parse=I,t.stringify=(b,C)=>{if(!b)return"";C=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},C),u(C.arrayFormatSeparator);const v=m=>C.skipNull&&s(b[m])||C.skipEmptyString&&b[m]==="",_=a(C),g={};for(const m of Object.keys(b))v(m)||(g[m]=b[m]);const l=Object.keys(g);return C.sort!==!1&&l.sort(C.sort),l.map(m=>{const P=b[m];return P===void 0?"":P===null?h(m,C):Array.isArray(P)?P.length===0&&C.arrayFormat==="bracket-separator"?h(m,C)+"[]":P.reduce(_(m),[]).join("&"):h(m,C)+"="+h(P,C)}).filter(m=>m.length>0).join("&")},t.parseUrl=(b,C)=>{C=Object.assign({decode:!0},C);const[v,_]=n(b,"#");return Object.assign({url:v.split("?")[0]||"",query:I(S(b),C)},C&&C.parseFragmentIdentifier&&_?{fragmentIdentifier:f(_,C)}:{})},t.stringifyUrl=(b,C)=>{C=Object.assign({encode:!0,strict:!0,[o]:!0},C);const v=y(b.url).split("?")[0]||"",_=t.extract(b.url),g=t.parse(_,{sort:!1}),l=Object.assign(g,b.query);let m=t.stringify(l,C);m&&(m=`?${m}`);let P=w(b.url);return b.fragmentIdentifier&&(P=`#${C[o]?h(b.fragmentIdentifier,C):b.fragmentIdentifier}`),`${v}${m}${P}`},t.pick=(b,C,v)=>{v=Object.assign({parseFragmentIdentifier:!0,[o]:!1},v);const{url:_,query:g,fragmentIdentifier:l}=t.parseUrl(b,v);return t.stringifyUrl({url:_,query:i(g,C),fragmentIdentifier:l},v)},t.exclude=(b,C,v)=>{const _=Array.isArray(C)?g=>!C.includes(g):(g,l)=>!C(g,l);return t.pick(b,_,v)}})(ys);const Qy={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function ad(t,e){return t.includes(":")?[t]:e.chains||[]}const cd="base10",vr="base16",Cc="base64pad",Oc="utf8",ld=0,ii=1,Yy=0,ud=1,Ic=12,Dc=32;function Jy(){const t=_c.generateKeyPair();return{privateKey:yr(t.secretKey,vr),publicKey:yr(t.publicKey,vr)}}function Ac(){const t=Ai.randomBytes(Dc);return yr(t,vr)}function Xy(t,e){const r=_c.sharedKey(Cr(t,vr),Cr(e,vr)),n=new wy(Mo.SHA256,r).expand(Dc);return yr(n,vr)}function ev(t){const e=Mo.hash(Cr(t,vr));return yr(e,vr)}function Ri(t){const e=Mo.hash(Cr(t,Oc));return yr(e,vr)}function tv(t){return Cr(`${t}`,cd)}function vs(t){return Number(yr(t,cd))}function rv(t){const e=tv(typeof t.type<"u"?t.type:ld);if(vs(e)===ii&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Cr(t.senderPublicKey,vr):void 0,n=typeof t.iv<"u"?Cr(t.iv,vr):Ai.randomBytes(Ic),i=new vc.ChaCha20Poly1305(Cr(t.symKey,vr)).seal(n,Cr(t.message,Oc));return iv({type:e,sealed:i,iv:n,senderPublicKey:r})}function nv(t){const e=new vc.ChaCha20Poly1305(Cr(t.symKey,vr)),{sealed:r,iv:n}=ko(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return yr(i,Oc)}function iv(t){if(vs(t.type)===ii){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return yr(mc([t.type,t.senderPublicKey,t.iv,t.sealed]),Cc)}return yr(mc([t.type,t.iv,t.sealed]),Cc)}function ko(t){const e=Cr(t,Cc),r=e.slice(Yy,ud),n=ud;if(vs(r)===ii){const a=n+Dc,c=a+Ic,u=e.slice(n,a),h=e.slice(a,c),f=e.slice(c);return{type:r,sealed:f,iv:h,senderPublicKey:u}}const i=n+Ic,s=e.slice(n,i),o=e.slice(i);return{type:r,sealed:o,iv:s}}function sv(t,e){const r=ko(t);return hd({type:vs(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?yr(r.senderPublicKey,vr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function hd(t){const e=(t==null?void 0:t.type)||ld;if(e===ii){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function dd(t){return t.type===ii&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var ov=Object.defineProperty,fd=Object.getOwnPropertySymbols,av=Object.prototype.hasOwnProperty,cv=Object.prototype.propertyIsEnumerable,pd=(t,e,r)=>e in t?ov(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gd=(t,e)=>{for(var r in e||(e={}))av.call(e,r)&&pd(t,r,e[r]);if(fd)for(var r of fd(e))cv.call(e,r)&&pd(t,r,e[r]);return t};const lv="ReactNative",Nr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},uv="js";function Tc(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Fo(){return!ed()&&!!Ec()&&navigator.product===lv}function ws(){return!Tc()&&!!Ec()}function bs(){return Fo()?Nr.reactNative:Tc()?Nr.node:ws()?Nr.browser:Nr.unknown}function hv(t,e){let r=ys.parse(t);return r=gd(gd({},r),e),t=ys.stringify(r),t}function dv(){return rd()||{name:"",description:"",url:"",icons:[""]}}function fv(){if(bs()===Nr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=Dy();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function pv(){var t;const e=bs();return e===Nr.browser?[e,((t=td())==null?void 0:t.host)||"unknown"].join(":"):e}function gv(t,e,r){const n=fv(),i=pv();return[[t,e].join("-"),[uv,r].join("-"),n,i].join("/")}function mv({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o}){const a=r.split("?"),c=gv(t,e,n),u={auth:i,ua:c,projectId:s,useOnCloseEvent:o||void 0},h=hv(a[1]||"",u);return a[0]+"?"+h}function si(t,e){return t.filter(r=>e.includes(r)).length===t.length}function md(t){return Object.fromEntries(t.entries())}function yd(t){return new Map(Object.entries(t))}function Pi(t=ye.FIVE_MINUTES,e){const r=ye.toMiliseconds(t||ye.FIVE_MINUTES);let n,i,s;return{resolve:o=>{s&&n&&(clearTimeout(s),n(o))},reject:o=>{s&&i&&(clearTimeout(s),i(o))},done:()=>new Promise((o,a)=>{s=setTimeout(()=>{a(new Error(e))},r),n=o,i=a})}}function _s(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function vd(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function yv(t){return vd("topic",t)}function vv(t){return vd("id",t)}function wd(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Hr(t,e){return ye.fromMiliseconds((e||Date.now())+ye.toMiliseconds(t))}function Rn(t){return Date.now()>=ye.toMiliseconds(t)}function Ht(t,e){return`${t}${e?`:${e}`:""}`}async function wv({id:t,topic:e,wcDeepLink:r}){try{if(!r)return;const n=typeof r=="string"?JSON.parse(r):r;let i=n==null?void 0:n.href;if(typeof i!="string")return;i.endsWith("/")&&(i=i.slice(0,-1));const s=`${i}/wc?requestId=${t}&sessionTopic=${e}`,o=bs();o===Nr.browser?s.startsWith("https://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):o===Nr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(n){console.error(n)}}const bv="irn";function Rc(t){return(t==null?void 0:t.relay)||{protocol:bv}}function Uo(t){const e=Qy[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var _v=Object.defineProperty,bd=Object.getOwnPropertySymbols,Ev=Object.prototype.hasOwnProperty,Sv=Object.prototype.propertyIsEnumerable,_d=(t,e,r)=>e in t?_v(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xv=(t,e)=>{for(var r in e||(e={}))Ev.call(e,r)&&_d(t,r,e[r]);if(bd)for(var r of bd(e))Sv.call(e,r)&&_d(t,r,e[r]);return t};function Cv(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function Ov(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=ys.parse(s);return{protocol:n,topic:Iv(i[0]),version:parseInt(i[1],10),symKey:o.symKey,relay:Cv(o)}}function Iv(t){return t.startsWith("//")?t.substring(2):t}function Dv(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=r+e+i;t[i]&&(n[s]=t[i])}),n}function Av(t){return`${t.protocol}:${t.topic}@${t.version}?`+ys.stringify(xv({symKey:t.symKey},Dv(t.relay)))}function $i(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function Tv(t){const e=[];return Object.values(t).forEach(r=>{e.push(...$i(r.accounts))}),e}function Rv(t,e){const r=[];return Object.values(t).forEach(n=>{$i(n.accounts).includes(e)&&r.push(...n.methods)}),r}function Pv(t,e){const r=[];return Object.values(t).forEach(n=>{$i(n.accounts).includes(e)&&r.push(...n.events)}),r}function $v(t,e){const r=Bo(t,e);if(r)throw new Error(r.message);const n={};for(const[i,s]of Object.entries(t))n[i]={methods:s.methods,events:s.events,chains:s.accounts.map(o=>`${o.split(":")[0]}:${o.split(":")[1]}`)};return n}const Nv={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Lv={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function he(t,e){const{message:r,code:n}=Lv[t];return{message:e?`${r} ${e}`:r,code:n}}function Kt(t,e){const{message:r,code:n}=Nv[t];return{message:e?`${r} ${e}`:r,code:n}}function Es(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Ss(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function wr(t){return typeof t>"u"}function er(t,e){return e&&wr(t)?!0:typeof t=="string"&&!!t.trim().length}function Pc(t,e){return e&&wr(t)?!0:typeof t=="number"&&!isNaN(t)}function Mv(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return si(i,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:u}=t.namespaces[o],h=$i(a),f=r[o];(!si(ad(o,f),h)||!si(f.methods,c)||!si(f.events,u))&&(s=!1)}),s):!1}function jo(t){return er(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function kv(t){if(er(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&jo(r)}}return!1}function Fv(t){if(er(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function Uv(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function jv(t){return t==null?void 0:t.topic}function Bv(t,e){let r=null;return er(t==null?void 0:t.publicKey,!1)||(r=he("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function Ed(t){let e=!0;return Es(t)?t.length&&(e=t.every(r=>er(r,!1))):e=!1,e}function qv(t,e,r){let n=null;return Es(e)&&e.length?e.forEach(i=>{n||jo(i)||(n=Kt("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):jo(t)||(n=Kt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function zv(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=qv(i,ad(i,s),`${e} ${r}`);o&&(n=o)}),n}function Wv(t,e){let r=null;return Es(t)?t.forEach(n=>{r||kv(n)||(r=Kt("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=Kt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Vv(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Wv(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function Hv(t,e){let r=null;return Ed(t==null?void 0:t.methods)?Ed(t==null?void 0:t.events)||(r=Kt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Kt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function Sd(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Hv(n,`${e}, namespace`);i&&(r=i)}),r}function Kv(t,e,r){let n=null;if(t&&Ss(t)){const i=Sd(t,e);i&&(n=i);const s=zv(t,e,r);s&&(n=s)}else n=he("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function Bo(t,e){let r=null;if(t&&Ss(t)){const n=Sd(t,e);n&&(r=n);const i=Vv(t,e);i&&(r=i)}else r=he("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function xd(t){return er(t.protocol,!0)}function Zv(t,e){let r=!1;return e&&!t?r=!0:t&&Es(t)&&t.length&&t.forEach(n=>{r=xd(n)}),r}function Gv(t){return typeof t=="number"}function Or(t){return typeof t<"u"&&typeof t!==null}function Qv(t){return!(!t||typeof t!="object"||!t.code||!Pc(t.code,!1)||!t.message||!er(t.message,!1))}function Yv(t){return!(wr(t)||!er(t.method,!1))}function Jv(t){return!(wr(t)||wr(t.result)&&wr(t.error)||!Pc(t.id,!1)||!er(t.jsonrpc,!1))}function Xv(t){return!(wr(t)||!er(t.name,!1))}function Cd(t,e){return!(!jo(e)||!Tv(t).includes(e))}function ew(t,e,r){return er(r,!1)?Rv(t,e).includes(r):!1}function tw(t,e,r){return er(r,!1)?Pv(t,e).includes(r):!1}function Od(t,e,r){let n=null;const i=rw(t),s=nw(e),o=Object.keys(i),a=Object.keys(s),c=Id(Object.keys(t)),u=Id(Object.keys(e)),h=c.filter(f=>!u.includes(f));return h.length&&(n=he("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${h.toString()}
      Received: ${Object.keys(e).toString()}`)),si(o,a)||(n=he("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(f=>{if(!f.includes(":")||n)return;const p=$i(e[f].accounts);p.includes(f)||(n=he("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${f}
        Required: ${f}
        Approved: ${p.toString()}`))}),o.forEach(f=>{n||(si(i[f].methods,s[f].methods)?si(i[f].events,s[f].events)||(n=he("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${f}`)):n=he("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${f}`))}),n}function rw(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function Id(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function nw(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=$i(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function iw(t,e){return Pc(t,!1)&&t<=e.max&&t>=e.min}function Dd(){const t=bs();return new Promise(e=>{switch(t){case Nr.browser:e(sw());break;case Nr.reactNative:e(ow());break;case Nr.node:e(aw());break;default:e(!0)}})}function sw(){return ws()&&(navigator==null?void 0:navigator.onLine)}async function ow(){if(Fo()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function aw(){return!0}function cw(t){switch(bs()){case Nr.browser:lw(t);break;case Nr.reactNative:uw(t);break}}function lw(t){ws()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function uw(t){Fo()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const $c={};let qo=class{static get(e){return $c[e]}static set(e,r){$c[e]=r}static delete(e){delete $c[e]}};const hw="PARSE_ERROR",dw="INVALID_REQUEST",fw="METHOD_NOT_FOUND",pw="INVALID_PARAMS",Ad="INTERNAL_ERROR",Nc="SERVER_ERROR",gw=[-32700,-32600,-32601,-32602,-32603],xs={[hw]:{code:-32700,message:"Parse error"},[dw]:{code:-32600,message:"Invalid Request"},[fw]:{code:-32601,message:"Method not found"},[pw]:{code:-32602,message:"Invalid params"},[Ad]:{code:-32603,message:"Internal error"},[Nc]:{code:-32e3,message:"Server error"}},Td=Nc;function mw(t){return gw.includes(t)}function Rd(t){return Object.keys(xs).includes(t)?xs[t]:xs[Td]}function yw(t){const e=Object.values(xs).find(r=>r.code===t);return e||xs[Td]}function vw(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var Pd={},gn={},$d;function ww(){if($d)return gn;$d=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.isBrowserCryptoAvailable=gn.getSubtleCrypto=gn.getBrowerCrypto=void 0;function t(){return(rn==null?void 0:rn.crypto)||(rn==null?void 0:rn.msCrypto)||{}}gn.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}gn.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return gn.isBrowserCryptoAvailable=r,gn}var mn={},Nd;function bw(){if(Nd)return mn;Nd=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.isBrowser=mn.isNode=mn.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}mn.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}mn.isNode=e;function r(){return!t()&&!e()}return mn.isBrowser=r,mn}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nn;e.__exportStar(ww(),t),e.__exportStar(bw(),t)})(Pd);function Lc(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Ld(t=6){return BigInt(Lc(t))}function Cs(t,e,r){return{id:r||Lc(),jsonrpc:"2.0",method:t,params:e}}function Mc(t,e){return{id:t,jsonrpc:"2.0",result:e}}function kc(t,e,r){return{id:t,jsonrpc:"2.0",error:_w(e,r)}}function _w(t,e){return typeof t>"u"?Rd(Ad):(typeof t=="string"&&(t=Object.assign(Object.assign({},Rd(Nc)),{message:t})),typeof e<"u"&&(t.data=e),mw(t.code)&&(t=yw(t.code)),t)}class Ew{}class Sw extends Ew{constructor(){super()}}class xw extends Sw{constructor(e){super()}}const Cw="^wss?:";function Ow(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Iw(t,e){const r=Ow(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function Md(t){return Iw(t,Cw)}function Dw(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function kd(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Fc(t){return kd(t)&&"method"in t}function zo(t){return kd(t)&&(yn(t)||Kr(t))}function yn(t){return"result"in t}function Kr(t){return"error"in t}class Aw extends xw{constructor(e){super(e),this.events=new Fr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Cs(e.method,e.params||[],e.id||Ld().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Kr(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),zo(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Tw=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Rw=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Fd=t=>t.split("?")[0],Ud=10,Pw=Tw();class $w{constructor(e){if(this.url=e,this.events=new Fr.EventEmitter,this.registering=!1,!Md(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(lc(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!Md(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=Pd.isReactNative()?void 0:{rejectUnauthorized:!Dw(e)},s=new Pw(e,[],i);Rw()?s.onerror=o=>{const a=o;n(this.emitError(a.error))}:s.on("error",o=>{n(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Eh(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=kc(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return vw(e,Fd(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Ud&&this.events.setMaxListeners(Ud)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Fd(this.url)}`));return this.events.emit("register_error",r),r}}var Wo={exports:{}};Wo.exports,function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",h="[object Boolean]",f="[object Date]",p="[object Error]",y="[object Function]",w="[object GeneratorFunction]",S="[object Map]",E="[object Number]",I="[object Null]",b="[object Object]",C="[object Promise]",v="[object Proxy]",_="[object RegExp]",g="[object Set]",l="[object String]",m="[object Symbol]",P="[object Undefined]",$="[object WeakMap]",z="[object ArrayBuffer]",W="[object DataView]",G="[object Float32Array]",N="[object Float64Array]",j="[object Int8Array]",oe="[object Int16Array]",Y="[object Int32Array]",Z="[object Uint8Array]",X="[object Uint8ClampedArray]",K="[object Uint16Array]",ee="[object Uint32Array]",xe=/[\\^$.*+?()[\]{}|]/g,ne=/^\[object .+?Constructor\]$/,Ee=/^(?:0|[1-9]\d*)$/,fe={};fe[G]=fe[N]=fe[j]=fe[oe]=fe[Y]=fe[Z]=fe[X]=fe[K]=fe[ee]=!0,fe[a]=fe[c]=fe[z]=fe[h]=fe[W]=fe[f]=fe[p]=fe[y]=fe[S]=fe[E]=fe[b]=fe[_]=fe[g]=fe[l]=fe[$]=!1;var _e=typeof rn=="object"&&rn&&rn.Object===Object&&rn,q=typeof self=="object"&&self&&self.Object===Object&&self,B=_e||q||Function("return this")(),M=e&&!e.nodeType&&e,d=M&&!0&&t&&!t.nodeType&&t,R=d&&d.exports===M,ce=R&&_e.process,de=function(){try{return ce&&ce.binding&&ce.binding("util")}catch{}}(),We=de&&de.isTypedArray;function De(O,k){for(var Q=-1,me=O==null?0:O.length,It=0,ze=[];++Q<me;){var Wt=O[Q];k(Wt,Q,O)&&(ze[It++]=Wt)}return ze}function Me(O,k){for(var Q=-1,me=k.length,It=O.length;++Q<me;)O[It+Q]=k[Q];return O}function Xe(O,k){for(var Q=-1,me=O==null?0:O.length;++Q<me;)if(k(O[Q],Q,O))return!0;return!1}function pt(O,k){for(var Q=-1,me=Array(O);++Q<O;)me[Q]=k(Q);return me}function ht(O){return function(k){return O(k)}}function Ve(O,k){return O.has(k)}function Be(O,k){return O==null?void 0:O[k]}function $e(O){var k=-1,Q=Array(O.size);return O.forEach(function(me,It){Q[++k]=[It,me]}),Q}function ke(O,k){return function(Q){return O(k(Q))}}function Ne(O){var k=-1,Q=Array(O.size);return O.forEach(function(me){Q[++k]=me}),Q}var Te=Array.prototype,Ae=Function.prototype,Se=Object.prototype,Fe=B["__core-js_shared__"],qe=Ae.toString,Ie=Se.hasOwnProperty,He=function(){var O=/[^.]+$/.exec(Fe&&Fe.keys&&Fe.keys.IE_PROTO||"");return O?"Symbol(src)_1."+O:""}(),et=Se.toString,nt=RegExp("^"+qe.call(Ie).replace(xe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=R?B.Buffer:void 0,it=B.Symbol,Sr=B.Uint8Array,fr=Se.propertyIsEnumerable,Mr=Te.splice,Qt=it?it.toStringTag:void 0,Yt=Object.getOwnPropertySymbols,Ar=tt?tt.isBuffer:void 0,dn=ke(Object.keys,Object),wt=ft(B,"DataView"),bt=ft(B,"Map"),At=ft(B,"Promise"),xt=ft(B,"Set"),Tt=ft(B,"WeakMap"),_t=ft(Object,"create"),Mt=Si(wt),jt=Si(bt),Bt=Si(At),kt=Si(xt),qt=Si(Tt),Rt=it?it.prototype:void 0,Pt=Rt?Rt.valueOf:void 0;function vt(O){var k=-1,Q=O==null?0:O.length;for(this.clear();++k<Q;){var me=O[k];this.set(me[0],me[1])}}function T(){this.__data__=_t?_t(null):{},this.size=0}function H(O){var k=this.has(O)&&delete this.__data__[O];return this.size-=k?1:0,k}function ue(O){var k=this.__data__;if(_t){var Q=k[O];return Q===n?void 0:Q}return Ie.call(k,O)?k[O]:void 0}function Ce(O){var k=this.__data__;return _t?k[O]!==void 0:Ie.call(k,O)}function st(O,k){var Q=this.__data__;return this.size+=this.has(O)?0:1,Q[O]=_t&&k===void 0?n:k,this}vt.prototype.clear=T,vt.prototype.delete=H,vt.prototype.get=ue,vt.prototype.has=Ce,vt.prototype.set=st;function Ge(O){var k=-1,Q=O==null?0:O.length;for(this.clear();++k<Q;){var me=O[k];this.set(me[0],me[1])}}function Je(){this.__data__=[],this.size=0}function Ke(O){var k=this.__data__,Q=D(k,O);if(Q<0)return!1;var me=k.length-1;return Q==me?k.pop():Mr.call(k,Q,1),--this.size,!0}function Jt(O){var k=this.__data__,Q=D(k,O);return Q<0?void 0:k[Q][1]}function Ct(O){return D(this.__data__,O)>-1}function $t(O,k){var Q=this.__data__,me=D(Q,O);return me<0?(++this.size,Q.push([O,k])):Q[me][1]=k,this}Ge.prototype.clear=Je,Ge.prototype.delete=Ke,Ge.prototype.get=Jt,Ge.prototype.has=Ct,Ge.prototype.set=$t;function zt(O){var k=-1,Q=O==null?0:O.length;for(this.clear();++k<Q;){var me=O[k];this.set(me[0],me[1])}}function fn(){this.size=0,this.__data__={hash:new vt,map:new(bt||Ge),string:new vt}}function Ei(O){var k=Ot(this,O).delete(O);return this.size-=k?1:0,k}function sr(O){return Ot(this,O).get(O)}function Ua(O){return Ot(this,O).has(O)}function Kn(O,k){var Q=Ot(this,O),me=Q.size;return Q.set(O,k),this.size+=Q.size==me?0:1,this}zt.prototype.clear=fn,zt.prototype.delete=Ei,zt.prototype.get=sr,zt.prototype.has=Ua,zt.prototype.set=Kn;function ss(O){var k=-1,Q=O==null?0:O.length;for(this.__data__=new zt;++k<Q;)this.add(O[k])}function os(O){return this.__data__.set(O,n),this}function yo(O){return this.__data__.has(O)}ss.prototype.add=ss.prototype.push=os,ss.prototype.has=yo;function pn(O){var k=this.__data__=new Ge(O);this.size=k.size}function Ou(){this.__data__=new Ge,this.size=0}function vo(O){var k=this.__data__,Q=k.delete(O);return this.size=k.size,Q}function Iu(O){return this.__data__.get(O)}function Du(O){return this.__data__.has(O)}function x(O,k){var Q=this.__data__;if(Q instanceof Ge){var me=Q.__data__;if(!bt||me.length<r-1)return me.push([O,k]),this.size=++Q.size,this;Q=this.__data__=new zt(me)}return Q.set(O,k),this.size=Q.size,this}pn.prototype.clear=Ou,pn.prototype.delete=vo,pn.prototype.get=Iu,pn.prototype.has=Du,pn.prototype.set=x;function A(O,k){var Q=Ba(O),me=!Q&&kx(O),It=!Q&&!me&&Ru(O),ze=!Q&&!me&&!It&&H0(O),Wt=Q||me||It||ze,rr=Wt?pt(O.length,String):[],or=rr.length;for(var Ft in O)(k||Ie.call(O,Ft))&&!(Wt&&(Ft=="length"||It&&(Ft=="offset"||Ft=="parent")||ze&&(Ft=="buffer"||Ft=="byteLength"||Ft=="byteOffset")||Au(Ft,or)))&&rr.push(Ft);return rr}function D(O,k){for(var Q=O.length;Q--;)if(q0(O[Q][0],k))return Q;return-1}function F(O,k,Q){var me=k(O);return Ba(O)?me:Me(me,Q(O))}function L(O){return O==null?O===void 0?P:I:Qt&&Qt in Object(O)?Tr(O):Mx(O)}function U(O){return bo(O)&&L(O)==a}function V(O,k,Q,me,It){return O===k?!0:O==null||k==null||!bo(O)&&!bo(k)?O!==O&&k!==k:te(O,k,Q,me,V,It)}function te(O,k,Q,me,It,ze){var Wt=Ba(O),rr=Ba(k),or=Wt?c:zr(O),Ft=rr?c:zr(k);or=or==a?b:or,Ft=Ft==a?b:Ft;var kr=or==b,Xr=Ft==b,pr=or==Ft;if(pr&&Ru(O)){if(!Ru(k))return!1;Wt=!0,kr=!1}if(pr&&!kr)return ze||(ze=new pn),Wt||H0(O)?ve(O,k,Q,me,It,ze):Qe(O,k,or,Q,me,It,ze);if(!(Q&i)){var Wr=kr&&Ie.call(O,"__wrapped__"),Vr=Xr&&Ie.call(k,"__wrapped__");if(Wr||Vr){var Zn=Wr?O.value():O,Cn=Vr?k.value():k;return ze||(ze=new pn),It(Zn,Cn,Q,me,ze)}}return pr?(ze||(ze=new pn),gt(O,k,Q,me,It,ze)):!1}function se(O){if(!V0(O)||ja(O))return!1;var k=z0(O)?nt:ne;return k.test(Si(O))}function ie(O){return bo(O)&&W0(O.length)&&!!fe[L(O)]}function re(O){if(!Lx(O))return dn(O);var k=[];for(var Q in Object(O))Ie.call(O,Q)&&Q!="constructor"&&k.push(Q);return k}function ve(O,k,Q,me,It,ze){var Wt=Q&i,rr=O.length,or=k.length;if(rr!=or&&!(Wt&&or>rr))return!1;var Ft=ze.get(O);if(Ft&&ze.get(k))return Ft==k;var kr=-1,Xr=!0,pr=Q&s?new ss:void 0;for(ze.set(O,k),ze.set(k,O);++kr<rr;){var Wr=O[kr],Vr=k[kr];if(me)var Zn=Wt?me(Vr,Wr,kr,k,O,ze):me(Wr,Vr,kr,O,k,ze);if(Zn!==void 0){if(Zn)continue;Xr=!1;break}if(pr){if(!Xe(k,function(Cn,xi){if(!Ve(pr,xi)&&(Wr===Cn||It(Wr,Cn,Q,me,ze)))return pr.push(xi)})){Xr=!1;break}}else if(!(Wr===Vr||It(Wr,Vr,Q,me,ze))){Xr=!1;break}}return ze.delete(O),ze.delete(k),Xr}function Qe(O,k,Q,me,It,ze,Wt){switch(Q){case W:if(O.byteLength!=k.byteLength||O.byteOffset!=k.byteOffset)return!1;O=O.buffer,k=k.buffer;case z:return!(O.byteLength!=k.byteLength||!ze(new Sr(O),new Sr(k)));case h:case f:case E:return q0(+O,+k);case p:return O.name==k.name&&O.message==k.message;case _:case l:return O==k+"";case S:var rr=$e;case g:var or=me&i;if(rr||(rr=Ne),O.size!=k.size&&!or)return!1;var Ft=Wt.get(O);if(Ft)return Ft==k;me|=s,Wt.set(O,k);var kr=ve(rr(O),rr(k),me,It,ze,Wt);return Wt.delete(O),kr;case m:if(Pt)return Pt.call(O)==Pt.call(k)}return!1}function gt(O,k,Q,me,It,ze){var Wt=Q&i,rr=lt(O),or=rr.length,Ft=lt(k),kr=Ft.length;if(or!=kr&&!Wt)return!1;for(var Xr=or;Xr--;){var pr=rr[Xr];if(!(Wt?pr in k:Ie.call(k,pr)))return!1}var Wr=ze.get(O);if(Wr&&ze.get(k))return Wr==k;var Vr=!0;ze.set(O,k),ze.set(k,O);for(var Zn=Wt;++Xr<or;){pr=rr[Xr];var Cn=O[pr],xi=k[pr];if(me)var K0=Wt?me(xi,Cn,pr,k,O,ze):me(Cn,xi,pr,O,k,ze);if(!(K0===void 0?Cn===xi||It(Cn,xi,Q,me,ze):K0)){Vr=!1;break}Zn||(Zn=pr=="constructor")}if(Vr&&!Zn){var qa=O.constructor,za=k.constructor;qa!=za&&"constructor"in O&&"constructor"in k&&!(typeof qa=="function"&&qa instanceof qa&&typeof za=="function"&&za instanceof za)&&(Vr=!1)}return ze.delete(O),ze.delete(k),Vr}function lt(O){return F(O,jx,wo)}function Ot(O,k){var Q=O.__data__;return Tu(k)?Q[typeof k=="string"?"string":"hash"]:Q.map}function ft(O,k){var Q=Be(O,k);return se(Q)?Q:void 0}function Tr(O){var k=Ie.call(O,Qt),Q=O[Qt];try{O[Qt]=void 0;var me=!0}catch{}var It=et.call(O);return me&&(k?O[Qt]=Q:delete O[Qt]),It}var wo=Yt?function(O){return O==null?[]:(O=Object(O),De(Yt(O),function(k){return fr.call(O,k)}))}:Bx,zr=L;(wt&&zr(new wt(new ArrayBuffer(1)))!=W||bt&&zr(new bt)!=S||At&&zr(At.resolve())!=C||xt&&zr(new xt)!=g||Tt&&zr(new Tt)!=$)&&(zr=function(O){var k=L(O),Q=k==b?O.constructor:void 0,me=Q?Si(Q):"";if(me)switch(me){case Mt:return W;case jt:return S;case Bt:return C;case kt:return g;case qt:return $}return k});function Au(O,k){return k=k??o,!!k&&(typeof O=="number"||Ee.test(O))&&O>-1&&O%1==0&&O<k}function Tu(O){var k=typeof O;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?O!=="__proto__":O===null}function ja(O){return!!He&&He in O}function Lx(O){var k=O&&O.constructor,Q=typeof k=="function"&&k.prototype||Se;return O===Q}function Mx(O){return et.call(O)}function Si(O){if(O!=null){try{return qe.call(O)}catch{}try{return O+""}catch{}}return""}function q0(O,k){return O===k||O!==O&&k!==k}var kx=U(function(){return arguments}())?U:function(O){return bo(O)&&Ie.call(O,"callee")&&!fr.call(O,"callee")},Ba=Array.isArray;function Fx(O){return O!=null&&W0(O.length)&&!z0(O)}var Ru=Ar||qx;function Ux(O,k){return V(O,k)}function z0(O){if(!V0(O))return!1;var k=L(O);return k==y||k==w||k==u||k==v}function W0(O){return typeof O=="number"&&O>-1&&O%1==0&&O<=o}function V0(O){var k=typeof O;return O!=null&&(k=="object"||k=="function")}function bo(O){return O!=null&&typeof O=="object"}var H0=We?ht(We):ie;function jx(O){return Fx(O)?A(O):re(O)}function Bx(){return[]}function qx(){return!1}t.exports=Ux}(Wo,Wo.exports);var Nw=Wo.exports;const Lw=cs(Nw);function Mw(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function f(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var S=0,E=0,I=0,b=w.length;I!==b&&w[I]===0;)I++,S++;for(var C=(b-I)*h+1>>>0,v=new Uint8Array(C);I!==b;){for(var _=w[I],g=0,l=C-1;(_!==0||g<E)&&l!==-1;l--,g++)_+=256*v[l]>>>0,v[l]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");E=g,I++}for(var m=C-E;m!==C&&v[m]===0;)m++;for(var P=c.repeat(S);m<C;++m)P+=t.charAt(v[m]);return P}function p(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var S=0;if(w[S]!==" "){for(var E=0,I=0;w[S]===c;)E++,S++;for(var b=(w.length-S)*u+1>>>0,C=new Uint8Array(b);w[S];){var v=r[w.charCodeAt(S)];if(v===255)return;for(var _=0,g=b-1;(v!==0||_<I)&&g!==-1;g--,_++)v+=a*C[g]>>>0,C[g]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");I=_,S++}if(w[S]!==" "){for(var l=b-I;l!==b&&C[l]===0;)l++;for(var m=new Uint8Array(E+(b-l)),P=E;l!==b;)m[P++]=C[l++];return m}}}function y(w){var S=p(w);if(S)return S;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:p,decode:y}}var kw=Mw,Fw=kw;const jd=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Uw=t=>new TextEncoder().encode(t),jw=t=>new TextDecoder().decode(t);class Bw{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class qw{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Bd(this,e)}}class zw{constructor(e){this.decoders=e}or(e){return Bd(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Bd=(t,e)=>new zw({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Ww{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Bw(e,r,n),this.decoder=new qw(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Vo=({name:t,prefix:e,encode:r,decode:n})=>new Ww(t,e,r,n),Os=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Fw(r,e);return Vo({prefix:t,name:e,encode:n,decode:s=>jd(i(s))})},Vw=(t,e,r,n)=>{const i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let h=0;h<s;++h){const f=i[t[h]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Hw=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},ir=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Vo({prefix:e,name:t,encode(i){return Hw(i,n,r)},decode(i){return Vw(i,n,r,t)}}),Kw=Vo({prefix:"\0",name:"identity",encode:t=>jw(t),decode:t=>Uw(t)});var Zw=Object.freeze({__proto__:null,identity:Kw});const Gw=ir({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Qw=Object.freeze({__proto__:null,base2:Gw});const Yw=ir({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Jw=Object.freeze({__proto__:null,base8:Yw});const Xw=Os({prefix:"9",name:"base10",alphabet:"0123456789"});var eb=Object.freeze({__proto__:null,base10:Xw});const tb=ir({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),rb=ir({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var nb=Object.freeze({__proto__:null,base16:tb,base16upper:rb});const ib=ir({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),sb=ir({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ob=ir({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ab=ir({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),cb=ir({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),lb=ir({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ub=ir({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hb=ir({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),db=ir({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var fb=Object.freeze({__proto__:null,base32:ib,base32upper:sb,base32pad:ob,base32padupper:ab,base32hex:cb,base32hexupper:lb,base32hexpad:ub,base32hexpadupper:hb,base32z:db});const pb=Os({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),gb=Os({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var mb=Object.freeze({__proto__:null,base36:pb,base36upper:gb});const yb=Os({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),vb=Os({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var wb=Object.freeze({__proto__:null,base58btc:yb,base58flickr:vb});const bb=ir({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),_b=ir({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Eb=ir({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Sb=ir({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var xb=Object.freeze({__proto__:null,base64:bb,base64pad:_b,base64url:Eb,base64urlpad:Sb});const qd=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Cb=qd.reduce((t,e,r)=>(t[r]=e,t),[]),Ob=qd.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Ib(t){return t.reduce((e,r)=>(e+=Cb[r],e),"")}function Db(t){const e=[];for(const r of t){const n=Ob[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Ab=Vo({prefix:"🚀",name:"base256emoji",encode:Ib,decode:Db});var Tb=Object.freeze({__proto__:null,base256emoji:Ab}),Rb=Wd,zd=128,Pb=127,$b=~Pb,Nb=Math.pow(2,31);function Wd(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Nb;)e[r++]=t&255|zd,t/=128;for(;t&$b;)e[r++]=t&255|zd,t>>>=7;return e[r]=t|0,Wd.bytes=r-n+1,e}var Lb=Uc,Mb=128,Vd=127;function Uc(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Uc.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&Vd)<<i:(o&Vd)*Math.pow(2,i),i+=7}while(o>=Mb);return Uc.bytes=s-n,r}var kb=Math.pow(2,7),Fb=Math.pow(2,14),Ub=Math.pow(2,21),jb=Math.pow(2,28),Bb=Math.pow(2,35),qb=Math.pow(2,42),zb=Math.pow(2,49),Wb=Math.pow(2,56),Vb=Math.pow(2,63),Hb=function(t){return t<kb?1:t<Fb?2:t<Ub?3:t<jb?4:t<Bb?5:t<qb?6:t<zb?7:t<Wb?8:t<Vb?9:10},Kb={encode:Rb,decode:Lb,encodingLength:Hb},Hd=Kb;const Kd=(t,e,r=0)=>(Hd.encode(t,e,r),e),Zd=t=>Hd.encodingLength(t),jc=(t,e)=>{const r=e.byteLength,n=Zd(t),i=n+Zd(r),s=new Uint8Array(i+r);return Kd(t,s,0),Kd(r,s,n),s.set(e,i),new Zb(t,r,e,s)};class Zb{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const Gd=({name:t,code:e,encode:r})=>new Gb(t,e,r);class Gb{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?jc(this.code,r):r.then(n=>jc(this.code,n))}else throw Error("Unknown type, must be binary type")}}const Qd=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Qb=Gd({name:"sha2-256",code:18,encode:Qd("SHA-256")}),Yb=Gd({name:"sha2-512",code:19,encode:Qd("SHA-512")});var Jb=Object.freeze({__proto__:null,sha256:Qb,sha512:Yb});const Yd=0,Xb="identity",Jd=jd;var e2=Object.freeze({__proto__:null,identity:{code:Yd,name:Xb,encode:Jd,digest:t=>jc(Yd,Jd(t))}});new TextEncoder,new TextDecoder;const Xd={...Zw,...Qw,...Jw,...eb,...nb,...fb,...mb,...wb,...xb,...Tb};({...Jb,...e2});function ef(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function t2(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ef(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function tf(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const rf=tf("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Bc=tf("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=t2(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),r2={utf8:rf,"utf-8":rf,hex:Xd.base16,latin1:Bc,ascii:Bc,binary:Bc,...Xd};function n2(t,e="utf8"){const r=r2[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ef(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const nf="wc",i2=2,qc="core",Pn=`${nf}@2:${qc}:`,s2={name:qc,logger:"error"},o2={database:":memory:"},a2="crypto",sf="client_ed25519_seed",c2=ye.ONE_DAY,l2="keychain",u2="0.3",h2="messages",d2="0.3",f2=ye.SIX_HOURS,p2="publisher",of="irn",g2="error",af="wss://relay.walletconnect.com",cf="wss://relay.walletconnect.org",m2="relayer",lr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},y2="_subscription",vn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},v2=ye.ONE_SECOND,w2="2.10.0",b2=1e4,_2="0.3",E2="WALLETCONNECT_CLIENT_ID",on={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},S2="subscription",x2="0.3",C2=ye.FIVE_SECONDS*1e3,O2="pairing",I2="0.3",Is={wc_pairingDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:0},res:{ttl:ye.ONE_DAY,prompt:!1,tag:0}}},an={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},D2="history",A2="0.3",T2="expirer",Ur={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},R2="0.3",zc="verify-api",Ho="https://verify.walletconnect.com",lf="https://verify.walletconnect.org";let P2=class{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=l2,this.version=u2,this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=he("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=at.generateChildLogger(r,this.name)}get context(){return at.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,md(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?yd(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}},$2=class{constructor(e,r,n){this.core=e,this.logger=r,this.name=a2,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=qh(i);return Bh(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=Jy();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),o=qh(s),a=Ac();return await oy(a,i,c2,o)},this.generateSharedKey=(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=Xy(a,s);return this.setSymKey(c,o)},this.setSymKey=async(i,s)=>{this.isInitialized();const o=s||ev(i);return await this.keychain.set(o,i),o},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,o)=>{this.isInitialized();const a=hd(o),c=lc(s);if(dd(a)){const p=a.senderPublicKey,y=a.receiverPublicKey;i=await this.generateSharedKey(p,y)}const u=this.getSymKey(i),{type:h,senderPublicKey:f}=a;return rv({type:h,symKey:u,message:c,senderPublicKey:f})},this.decode=async(i,s,o)=>{this.isInitialized();const a=sv(s,o);if(dd(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;i=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(i),u=nv({symKey:c,encoded:s});return Eh(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}},this.getPayloadType=i=>{const s=ko(i);return vs(s.type)},this.getPayloadSenderPublicKey=i=>{const s=ko(i);return s.senderPublicKey?yr(s.senderPublicKey,vr):void 0},this.core=e,this.logger=at.generateChildLogger(r,this.name),this.keychain=n||new P2(this.core,this.logger)}get context(){return at.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(sf)}catch{e=Ac(),await this.keychain.set(sf,e)}return n2(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}},N2=class extends hm{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=h2,this.version=d2,this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=Ri(i);let o=this.messages.get(n);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(n,o),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),o=Ri(i);return typeof s[o]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=at.generateChildLogger(e,this.name),this.core=r}get context(){return at.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,md(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?yd(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}};class L2 extends dm{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new Fr.EventEmitter,this.name=p2,this.queue=new Map,this.publishTimeout=ye.toMiliseconds(ye.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{const a=(s==null?void 0:s.ttl)||f2,c=Rc(s),u=(s==null?void 0:s.prompt)||!1,h=(s==null?void 0:s.tag)||0,f=(s==null?void 0:s.id)||Ld().toString(),p={topic:n,message:i,opts:{ttl:a,relay:c,prompt:u,tag:h,id:f}},y=setTimeout(()=>this.queue.set(f,p),this.publishTimeout);try{await await _s(this.rpcPublish(n,i,a,c,u,h,f),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(f),this.relayer.events.emit(lr.publish,p)}catch(w){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw this.removeRequestFromQueue(f),w;return}finally{clearTimeout(y)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(a){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(a),a}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=at.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return at.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,s,o,a){var c,u,h,f;const p={method:Uo(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:o},id:a};return wr((c=p.params)==null?void 0:c.prompt)&&((u=p.params)==null||delete u.prompt),wr((h=p.params)==null?void 0:h.tag)&&((f=p.params)==null||delete f.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p}),this.relayer.request(p)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ii.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(lr.connection_stalled);return}this.checkQueue()}),this.relayer.on(lr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class M2{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var k2=Object.defineProperty,F2=Object.defineProperties,U2=Object.getOwnPropertyDescriptors,uf=Object.getOwnPropertySymbols,j2=Object.prototype.hasOwnProperty,B2=Object.prototype.propertyIsEnumerable,hf=(t,e,r)=>e in t?k2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ds=(t,e)=>{for(var r in e||(e={}))j2.call(e,r)&&hf(t,r,e[r]);if(uf)for(var r of uf(e))B2.call(e,r)&&hf(t,r,e[r]);return t},Wc=(t,e)=>F2(t,U2(e));let q2=class extends gm{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new M2,this.events=new Fr.EventEmitter,this.name=S2,this.version=x2,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Pn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=Rc(i),o={topic:n,relay:s};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s);return this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,s)=>{const o=new ye.Watch;o.start(this.pendingSubscriptionWatchLabel);const a=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),i(!0)),o.elapsed(this.pendingSubscriptionWatchLabel)>=C2&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),s(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=at.generateChildLogger(r,this.name),this.clientId=""}get context(){return at.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=Rc(n);await this.rpcUnsubscribe(e,r,i);const s=Kt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){const n={method:Uo(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await _s(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(lr.connection_stalled)}return Ri(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:Uo(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await _s(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(lr.connection_stalled)}}rpcUnsubscribe(e,r,n){const i={method:Uo(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,Wc(Ds({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Ds({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,Ds({},r)),this.topicMap.set(r.topic,e),this.events.emit(on.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=he("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(on.deleted,Wc(Ds({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(on.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(on.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=he("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);Es(r)&&this.onBatchSubscribe(r.map((n,i)=>Wc(Ds({},e[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Ii.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(lr.connect,async()=>{await this.onConnect()}),this.relayer.on(lr.disconnect,()=>{this.onDisconnect()}),this.events.on(on.created,async e=>{const r=on.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(on.deleted,async e=>{const r=on.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}};var z2=Object.defineProperty,df=Object.getOwnPropertySymbols,W2=Object.prototype.hasOwnProperty,V2=Object.prototype.propertyIsEnumerable,ff=(t,e,r)=>e in t?z2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,H2=(t,e)=>{for(var r in e||(e={}))W2.call(e,r)&&ff(t,r,e[r]);if(df)for(var r of df(e))V2.call(e,r)&&ff(t,r,e[r]);return t};let K2=class extends fm{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Fr.EventEmitter,this.name=m2,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(lr.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(lr.error,r)},this.registerProviderListeners=()=>{this.provider.on(vn.payload,this.onPayloadHandler),this.provider.on(vn.connect,this.onConnectHandler),this.provider.on(vn.disconnect,this.onDisconnectHandler),this.provider.on(vn.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?at.generateChildLogger(e.logger,this.name):at.pino(at.getDefaultLoggerOptions({level:e.logger||g2})),this.messages=new N2(this.logger,e.core),this.subscriber=new q2(this,this.logger),this.publisher=new L2(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||af,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${cf}...`),await this.restartTransport(cf)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},b2)}get context(){return at.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"";return i||(await Promise.all([new Promise(s=>{this.subscriber.once(on.created,o=>{o.topic===e&&s()})}),new Promise(async s=>{i=await this.subscriber.subscribe(e,r),s()})]),i)}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await _s(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(on.resubscribed,()=>{r()})}),new Promise(async(r,n)=>{try{await _s(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(i){n(i);return}r()})])}catch(r){this.logger.error(r);const n=r;if(!this.isConnectionStalled(n.message))throw r;this.provider.events.emit(vn.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Dd())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Aw(new $w(mv({sdkVersion:w2,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Fc(e)){if(!e.method.endsWith(y2))return;const r=e.params,{topic:n,message:i,publishedAt:s}=r.data,o={topic:n,message:i,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(H2({type:"event",event:r.id},o)),this.events.emit(r.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else zo(e)&&this.events.emit(lr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(lr.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Mc(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(vn.payload,this.onPayloadHandler),this.provider.off(vn.connect,this.onConnectHandler),this.provider.off(vn.disconnect,this.onDisconnectHandler),this.provider.off(vn.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(lr.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let e=await Dd();cw(async r=>{this.initialized&&e!==r&&(e=r,r?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(n=>this.logger.error(n))))})}onProviderDisconnect(){this.events.emit(lr.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},ye.toMiliseconds(v2)))}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var Z2=Object.defineProperty,pf=Object.getOwnPropertySymbols,G2=Object.prototype.hasOwnProperty,Q2=Object.prototype.propertyIsEnumerable,gf=(t,e,r)=>e in t?Z2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mf=(t,e)=>{for(var r in e||(e={}))G2.call(e,r)&&gf(t,r,e[r]);if(pf)for(var r of pf(e))Q2.call(e,r)&&gf(t,r,e[r]);return t};let Ko=class extends pm{constructor(e,r,n,i=Pn,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=_2,this.cached=[],this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!wr(o)?this.map.set(this.getKey(o),o):Uv(o)?this.map.set(o.id,o):jv(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>Lw(a[c],o[c]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=mf(mf({},this.getData(o)),a);this.map.set(o,c),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),await this.persist())},this.logger=at.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return at.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=he("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=he("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}},Y2=class{constructor(e,r){this.core=e,this.logger=r,this.name=O2,this.version=I2,this.events=new Ya,this.initialized=!1,this.storagePrefix=Pn,this.ignoredPayloadTypes=[ii],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=Ac(),i=await this.core.crypto.setSymKey(n),s=Hr(ye.FIVE_MINUTES),o={protocol:of},a={topic:i,expiry:s,relay:o,active:!1},c=Av({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:o});return await this.pairings.set(i,a),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:c}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:s,relay:o}=Ov(n.uri);if(this.pairings.keys.includes(i))throw new Error(`Pairing already exists: ${i}`);if(this.core.crypto.hasKeys(i))throw new Error(`Keychain already exists: ${i}`);const a=Hr(ye.FIVE_MINUTES),c={topic:i,relay:o,expiry:a,active:!1};return await this.pairings.set(i,c),await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:o}),this.core.expirer.set(i,a),n.activatePairing&&await this.activate({topic:i}),c},this.activate=async({topic:n})=>{this.isInitialized();const i=Hr(ye.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Pi();this.events.once(Ht("pairing_ping",s),({error:u})=>{u?c(u):a()}),await o()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Kt("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{const o=Cs(i,s),a=await this.core.crypto.encode(n,o),c=Is[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id},this.sendResult=async(n,i,s)=>{const o=Mc(n,s),a=await this.core.crypto.encode(i,o),c=await this.core.history.get(i,n),u=Is[c.request.method].res;await this.core.relayer.publish(i,a,u),await this.core.history.resolve(o)},this.sendError=async(n,i,s)=>{const o=kc(n,s),a=await this.core.crypto.encode(i,o),c=await this.core.history.get(i,n),u=Is[c.request.method]?Is[c.request.method].res:Is.unregistered_method.res;await this.core.relayer.publish(i,a,u),await this.core.history.resolve(o)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Kt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>Rn(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit("pairing_ping",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{yn(i)?this.events.emit(Ht("pairing_ping",s),{}):Kr(i)&&this.events.emit(Ht("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit("pairing_delete",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=Kt("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(Kt("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!Or(n)){const{message:i}=he("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!Fv(n.uri)){const{message:i}=he("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!Or(n)){const{message:s}=he("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!Or(n)){const{message:s}=he("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!er(n,!1)){const{message:i}=he("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=he("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(Rn(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=he("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=at.generateChildLogger(r,this.name),this.pairings=new Ko(this.core,this.logger,this.name,this.storagePrefix)}get context(){return at.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(lr.message,async e=>{const{topic:r,message:n}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);try{Fc(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):zo(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id))}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(Ur.expired,async e=>{const{topic:r}=wd(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}},J2=class extends um{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new Fr.EventEmitter,this.name=D2,this.version=A2,this.cached=[],this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:Hr(ye.THIRTY_DAYS)};this.records.set(o.id,o),this.events.emit(an.created,o)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Kr(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(an.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(an.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=at.generateChildLogger(r,this.name)}get context(){return at.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:Cs(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=he("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(an.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=he("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(an.created,e=>{const r=an.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(an.updated,e=>{const r=an.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(an.deleted,e=>{const r=an.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(Ii.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{ye.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}},X2=class extends mm{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new Fr.EventEmitter,this.name=T2,this.version=R2,this.cached=[],this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(Ur.created,{target:s,expiration:o})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Ur.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=at.generateChildLogger(r,this.name)}get context(){return at.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return yv(e);if(typeof e=="number")return vv(e);const{message:r}=he("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ur.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=he("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=he("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;ye.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Ur.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Ii.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Ur.created,e=>{const r=Ur.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Ur.expired,e=>{const r=Ur.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Ur.deleted,e=>{const r=Ur.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}},e_=class extends ym{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=zc,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async n=>{if(this.verifyDisabled||Fo()||!ws())return;const i=(n==null?void 0:n.verifyUrl)||Ho;this.verifyUrl!==i&&this.removeIframe(),this.verifyUrl=i;try{await this.createIframe()}catch(s){this.logger.warn(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.warn(s)}if(!this.initialized){this.removeIframe(),this.verifyUrl=lf;try{await this.createIframe()}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s),this.verifyDisabled=!0}}},this.register=async n=>{this.initialized?this.sendPost(n.attestationId):(this.addToQueue(n.attestationId),await this.init())},this.resolve=async n=>{if(this.isDevEnv)return"";const i=(n==null?void 0:n.verifyUrl)||Ho;let s="";try{s=await this.fetchAttestation(n.attestationId,i)}catch(o){this.logger.warn(`failed to resolve attestation: ${n.attestationId} from url: ${i}`),this.logger.warn(o),s=await this.fetchAttestation(n.attestationId,lf)}return s},this.fetchAttestation=async(n,i)=>{var s;this.logger.info(`resolving attestation: ${n} from url: ${i}`);const o=this.startAbortTimer(ye.ONE_SECOND*2),a=await fetch(`${i}/attestation/${n}`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?(s=await a.json())==null?void 0:s.origin:""},this.addToQueue=n=>{this.queue.push(n)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(n=>this.sendPost(n)),this.queue=[])},this.sendPost=n=>{var i;try{if(!this.iframe)return;(i=this.iframe.contentWindow)==null||i.postMessage(n,"*"),this.logger.info(`postMessage sent: ${n} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let n;const i=s=>{s.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",i),n())};await Promise.race([new Promise(s=>{if(document.getElementById(zc))return s();window.addEventListener("message",i);const o=document.createElement("iframe");o.id=zc,o.src=`${this.verifyUrl}/${this.projectId}`,o.style.display="none",document.body.append(o),this.iframe=o,n=s}),new Promise((s,o)=>setTimeout(()=>{window.removeEventListener("message",i),o("verify iframe load timeout")},ye.toMiliseconds(ye.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=at.generateChildLogger(r,this.name),this.verifyUrl=Ho,this.abortController=new AbortController,this.isDevEnv=Tc()&&process.env.IS_VITEST}get context(){return at.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ye.toMiliseconds(e))}};var t_=Object.defineProperty,yf=Object.getOwnPropertySymbols,r_=Object.prototype.hasOwnProperty,n_=Object.prototype.propertyIsEnumerable,vf=(t,e,r)=>e in t?t_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wf=(t,e)=>{for(var r in e||(e={}))r_.call(e,r)&&vf(t,r,e[r]);if(yf)for(var r of yf(e))n_.call(e,r)&&vf(t,r,e[r]);return t};const i_=class Z0 extends lm{constructor(e){super(e),this.protocol=nf,this.version=i2,this.name=qc,this.events=new Fr.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||af;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:at.pino(at.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||s2.logger}));this.logger=at.generateChildLogger(r,this.name),this.heartbeat=new Ii.HeartBeat,this.crypto=new $2(this,this.logger,e==null?void 0:e.keychain),this.history=new J2(this,this.logger),this.expirer=new X2(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Dg(wf(wf({},o2),e==null?void 0:e.storageOptions)),this.relayer=new K2({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Y2(this,this.logger),this.verify=new e_(this.projectId||"",this.logger)}static async init(e){const r=new Z0(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(E2,n),r}get context(){return at.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}},bf="wc",_f=2,Ef="client",Vc=`${bf}@${_f}:${Ef}:`,Hc={name:Ef,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Sf="WALLETCONNECT_DEEPLINK_CHOICE",s_="proposal",o_="Proposal expired",a_="session",Zo=ye.SEVEN_DAYS,c_="engine",As={wc_sessionPropose:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1115}}},Kc={min:ye.FIVE_MINUTES,max:ye.SEVEN_DAYS},wn={idle:"IDLE",active:"ACTIVE"},l_="request",u_=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var h_=Object.defineProperty,d_=Object.defineProperties,f_=Object.getOwnPropertyDescriptors,xf=Object.getOwnPropertySymbols,p_=Object.prototype.hasOwnProperty,g_=Object.prototype.propertyIsEnumerable,Cf=(t,e,r)=>e in t?h_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ir=(t,e)=>{for(var r in e||(e={}))p_.call(e,r)&&Cf(t,r,e[r]);if(xf)for(var r of xf(e))g_.call(e,r)&&Cf(t,r,e[r]);return t},Ts=(t,e)=>d_(t,f_(e));class m_ extends wm{constructor(e){super(e),this.name=c_,this.events=new Ya,this.initialized=!1,this.ignoredPayloadTypes=[ii],this.requestQueue={state:wn.idle,queue:[]},this.sessionRequestQueue={state:wn.idle,queue:[]},this.requestQueueDelay=ye.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(As)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ye.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const n=Ts(Ir({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:c}=n;let u=i,h,f=!1;if(u&&(f=this.client.core.pairing.pairings.get(u).active),!u||!f){const{topic:C,uri:v}=await this.client.core.pairing.create();u=C,h=v}const p=await this.client.core.crypto.generateKeyPair(),y=Ir({requiredNamespaces:s,optionalNamespaces:o,relays:c??[{protocol:of}],proposer:{publicKey:p,metadata:this.client.metadata}},a&&{sessionProperties:a}),{reject:w,resolve:S,done:E}=Pi(ye.FIVE_MINUTES,o_);if(this.events.once(Ht("session_connect"),async({error:C,session:v})=>{if(C)w(C);else if(v){v.self.publicKey=p;const _=Ts(Ir({},v),{requiredNamespaces:v.requiredNamespaces,optionalNamespaces:v.optionalNamespaces});await this.client.session.set(v.topic,_),await this.setExpiry(v.topic,v.expiry),u&&await this.client.core.pairing.updateMetadata({topic:u,metadata:v.peer.metadata}),S(_)}}),!u){const{message:C}=he("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(C)}const I=await this.sendRequest({topic:u,method:"wc_sessionPropose",params:y}),b=Hr(ye.FIVE_MINUTES);return await this.setProposal(I,Ir({id:I,expiry:b},y)),{uri:h,approval:E}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:i,namespaces:s,sessionProperties:o}=r,a=this.client.proposal.get(n);let{pairingTopic:c,proposer:u,requiredNamespaces:h,optionalNamespaces:f}=a;c=c||"",Ss(h)||(h=$v(s,"approve()"));const p=await this.client.core.crypto.generateKeyPair(),y=u.publicKey,w=await this.client.core.crypto.generateSharedKey(p,y);c&&n&&(await this.client.core.pairing.updateMetadata({topic:c,metadata:u.metadata}),await this.sendResult({id:n,topic:c,result:{relay:{protocol:i??"irn"},responderPublicKey:p}}),await this.client.proposal.delete(n,Kt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:c}));const S=Ir({relay:{protocol:i??"irn"},namespaces:s,requiredNamespaces:h,optionalNamespaces:f,pairingTopic:c,controller:{publicKey:p,metadata:this.client.metadata},expiry:Hr(Zo)},o&&{sessionProperties:o});await this.client.core.relayer.subscribe(w),await this.sendRequest({topic:w,method:"wc_sessionSettle",params:S,throwOnFailedPublish:!0});const E=Ts(Ir({},S),{topic:w,pairingTopic:c,acknowledged:!1,self:S.controller,peer:{publicKey:u.publicKey,metadata:u.metadata},controller:p});return await this.client.session.set(w,E),await this.setExpiry(w,Hr(Zo)),{topic:w,acknowledged:()=>new Promise(I=>setTimeout(()=>I(this.client.session.get(w)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:n,reason:i}=r,{pairingTopic:s}=this.client.proposal.get(n);s&&(await this.sendError(n,s,i),await this.client.proposal.delete(n,Kt("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:i}=r,s=await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i}}),{done:o,resolve:a,reject:c}=Pi();return this.events.once(Ht("session_update",s),({error:u})=>{u?c(u):a()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:o}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,i=await this.sendRequest({topic:n,method:"wc_sessionExtend",params:{}}),{done:s,resolve:o,reject:a}=Pi();return this.events.once(Ht("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,Hr(Zo)),{acknowledged:s}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:i,topic:s,expiry:o}=r,a=Lc(),{done:c,resolve:u,reject:h}=Pi(o);return this.events.once(Ht("session_request",a),({error:f,result:p})=>{f?h(f):u(p)}),await Promise.all([new Promise(async f=>{await this.sendRequest({clientRpcId:a,topic:s,method:"wc_sessionRequest",params:{request:i,chainId:n},expiry:o,throwOnFailedPublish:!0}).catch(p=>h(p)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:a}),f()}),new Promise(async f=>{const p=await this.client.core.storage.getItem(Sf);wv({id:a,topic:s,wcDeepLink:p}),f()}),c()]).then(f=>f[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i;yn(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0}):Kr(i)&&await this.sendError(s,n,i.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=await this.sendRequest({topic:n,method:"wc_sessionPing",params:{}}),{done:s,resolve:o,reject:a}=Pi();this.events.once(Ht("session_ping",i),({error:c})=>{c?a(c):o()}),await s()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r;await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;this.client.session.keys.includes(n)?(await this.sendRequest({topic:n,method:"wc_sessionDelete",params:Kt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>Mv(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(r,n)=>{const{self:i}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,Kt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(i.publicKey)&&await this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r),this.client.core.storage.removeItem(Sf).catch(s=>this.client.logger.warn(s))},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,Kt("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=wn.idle)},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{const n=As.wc_sessionRequest.req.ttl,{id:i,topic:s,params:o}=r;await this.client.pendingRequest.set(i,{id:i,topic:s,params:o}),n&&this.client.core.expirer.set(i,Hr(n))},this.sendRequest=async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u}=r,h=Cs(i,s,c);if(ws()&&u_.includes(i)){const y=Ri(JSON.stringify(h));this.client.core.verify.register({attestationId:y})}const f=await this.client.core.crypto.encode(n,h),p=As[i].req;return o&&(p.ttl=o),a&&(p.id=a),this.client.core.history.set(n,h),u?(p.internal=Ts(Ir({},p.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,f,p)):this.client.core.relayer.publish(n,f,p).catch(y=>this.client.logger.error(y)),h.id},this.sendResult=async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o}=r,a=Mc(n,s),c=await this.client.core.crypto.encode(i,a),u=await this.client.core.history.get(i,n),h=As[u.request.method].res;o?(h.internal=Ts(Ir({},h.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,c,h)):this.client.core.relayer.publish(i,c,h).catch(f=>this.client.logger.error(f)),await this.client.core.history.resolve(a)},this.sendError=async(r,n,i)=>{const s=kc(r,i),o=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,r),c=As[a.request.method].res;this.client.core.relayer.publish(n,o,c),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{Rn(i.expiry)&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Rn(i.expiry)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession(i)),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===wn.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=wn.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(n=>setTimeout(n,300))}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=wn.idle},this.processRequest=r=>{const{topic:n,payload:i}=r,s=i.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i}=r,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:i}=he("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.onSessionProposeRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidConnect(Ir({},n.params));const o=Hr(ye.FIVE_MINUTES),a=Ir({id:s,pairingTopic:r,expiry:o},i);await this.setProposal(s,a);const c=Ri(JSON.stringify(n)),u=await this.getVerifyContext(c,a.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:a,verifyContext:u})}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.onSessionProposeResponse=async(r,n)=>{const{id:i}=n;if(yn(n)){const{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const o=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const a=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});const c=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:c});const u=await this.client.core.crypto.generateSharedKey(a,c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:u});const h=await this.client.core.relayer.subscribe(u);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:r})}else Kr(n)&&(await this.client.proposal.delete(i,Kt("USER_DISCONNECTED")),this.events.emit(Ht("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:u,requiredNamespaces:h,optionalNamespaces:f,sessionProperties:p,pairingTopic:y}=n.params,w=Ir({topic:r,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:y,requiredNamespaces:h,optionalNamespaces:f,controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},p&&{sessionProperties:p});await this.sendResult({id:n.id,topic:r,result:!0}),this.events.emit(Ht("session_connect"),{session:w}),this.cleanupDuplicatePairings(w)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;yn(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Ht("session_approve",i),{})):Kr(n)&&(await this.client.session.delete(r,Kt("USER_DISCONNECTED")),this.events.emit(Ht("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=qo.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidUpdate(Ir({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0}),this.client.events.emit("session_update",{id:s,topic:r,params:i}),qo.set(o,s)}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.isRequestOutOfSync=(r,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n;yn(n)?this.events.emit(Ht("session_update",i),{}):Kr(n)&&this.events.emit(Ht("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Hr(Zo)),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n;yn(n)?this.events.emit(Ht("session_extend",i),{}):Kr(n)&&this.events.emit(Ht("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n;setTimeout(()=>{yn(n)?this.events.emit(Ht("session_ping",i),{}):Kr(n)&&this.events.emit(Ht("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(lr.publish,async()=>{s(await this.deleteSession(r))})}),this.sendResult({id:i,topic:r,result:!0})]),this.client.events.emit("session_delete",{id:i,topic:r})}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidRequest(Ir({topic:r},s)),await this.setPendingSessionRequest({id:i,topic:r,params:s}),this.addSessionRequestToSessionRequestQueue({id:i,topic:r,params:s}),await this.processSessionRequestQueue()}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n;yn(n)?this.events.emit(Ht("session_request",i),{result:n.result}):Kr(n)&&this.events.emit(Ht("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=qo.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(Ir({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),qo.set(o,i)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=wn.idle,this.processSessionRequestQueue()},ye.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=async()=>{if(this.sessionRequestQueue.state===wn.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{const{id:n,topic:i,params:s}=r,o=Ri(JSON.stringify(Cs("wc_sessionRequest",s,n))),a=this.client.session.get(i),c=await this.getVerifyContext(o,a.peer.metadata);this.sessionRequestQueue.state=wn.active,this.client.events.emit("session_request",{id:n,topic:i,params:s,verifyContext:c})}catch(n){this.client.logger.error(n)}},this.isValidConnect=async r=>{if(!Or(r)){const{message:c}=he("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(c)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(wr(n)||await this.isValidPairingTopic(n),!Zv(a,!0)){const{message:c}=he("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(c)}!wr(i)&&Ss(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!wr(s)&&Ss(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),wr(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=Kv(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!Or(r))throw new Error(he("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o}=r;await this.isValidProposalId(n);const a=this.client.proposal.get(n),c=Bo(i,"approve()");if(c)throw new Error(c.message);const u=Od(a.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!er(s,!0)){const{message:h}=he("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(h)}wr(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!Or(r)){const{message:s}=he("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(await this.isValidProposalId(n),!Qv(i)){const{message:s}=he("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!Or(r)){const{message:u}=he("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(u)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!xd(n)){const{message:u}=he("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=Bv(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Bo(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Rn(o)){const{message:u}=he("EXPIRED","onSessionSettleRequest()");throw new Error(u)}},this.isValidUpdate=async r=>{if(!Or(r)){const{message:c}=he("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=Bo(i,"update()");if(o)throw new Error(o.message);const a=Od(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!Or(r)){const{message:i}=he("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!Or(r)){const{message:c}=he("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:i,chainId:s,expiry:o}=r;await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!Cd(a,s)){const{message:c}=he("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!Yv(i)){const{message:c}=he("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!ew(a,s,i.method)){const{message:c}=he("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!iw(o,Kc)){const{message:c}=he("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Kc.min} and ${Kc.max}`);throw new Error(c)}},this.isValidRespond=async r=>{if(!Or(r)){const{message:s}=he("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(s)}const{topic:n,response:i}=r;if(await this.isValidSessionTopic(n),!Jv(i)){const{message:s}=he("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidPing=async r=>{if(!Or(r)){const{message:i}=he("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!Or(r)){const{message:a}=he("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!Cd(o,s)){const{message:a}=he("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!Xv(i)){const{message:a}=he("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!tw(o,s,i.name)){const{message:a}=he("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!Or(r)){const{message:i}=he("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(r,n)=>{const i={verified:{verifyUrl:n.verifyUrl||Ho,validation:"UNKNOWN",origin:n.url||""}};try{const s=await this.client.core.verify.resolve({attestationId:r,verifyUrl:n.verifyUrl});s&&(i.verified.origin=s,i.verified.validation=s===new URL(n.url).origin?"VALID":"INVALID")}catch(s){this.client.logger.error(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!er(i,!1)){const{message:s}=he("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}}async isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(lr.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(r,n);try{Fc(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):zo(i)?(await this.client.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.client.core.history.delete(r,i.id)):this.onRelayEventUnknownPayload({topic:r,payload:i})}catch(s){this.client.logger.error(s)}})}registerExpirerEvents(){this.client.core.expirer.on(Ur.expired,async e=>{const{topic:r,id:n}=wd(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,he("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(e){if(!er(e,!1)){const{message:r}=he("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=he("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Rn(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=he("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!er(e,!1)){const{message:r}=he("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=he("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Rn(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=he("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(er(e,!1)){const{message:r}=he("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=he("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!Gv(e)){const{message:r}=he("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=he("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Rn(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=he("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class y_ extends Ko{constructor(e,r){super(e,r,s_,Vc),this.core=e,this.logger=r}}class v_ extends Ko{constructor(e,r){super(e,r,a_,Vc),this.core=e,this.logger=r}}class w_ extends Ko{constructor(e,r){super(e,r,l_,Vc,n=>n.id),this.core=e,this.logger=r}}let b_=class G0 extends vm{constructor(e){super(e),this.protocol=bf,this.version=_f,this.name=Hc.name,this.events=new Fr.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(e==null?void 0:e.name)||Hc.name,this.metadata=(e==null?void 0:e.metadata)||dv();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:at.pino(at.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Hc.logger}));this.core=(e==null?void 0:e.core)||new i_(e),this.logger=at.generateChildLogger(r,this.name),this.session=new v_(this.core,this.logger),this.proposal=new y_(this.core,this.logger),this.pendingRequest=new w_(this.core,this.logger),this.engine=new m_(this)}static async init(e){const r=new G0(e);return await r.initialize(),r}get context(){return at.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var __=Object.defineProperty,E_=Object.defineProperties,S_=Object.getOwnPropertyDescriptors,Of=Object.getOwnPropertySymbols,x_=Object.prototype.hasOwnProperty,C_=Object.prototype.propertyIsEnumerable,If=(t,e,r)=>e in t?__(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,O_=(t,e)=>{for(var r in e||(e={}))x_.call(e,r)&&If(t,r,e[r]);if(Of)for(var r of Of(e))C_.call(e,r)&&If(t,r,e[r]);return t},I_=(t,e)=>E_(t,S_(e)),Zc=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Dt=(t,e,r)=>(Zc(t,e,"read from private field"),r?r.call(t):e.get(t)),oi=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Go=(t,e,r,n)=>(Zc(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),ur=(t,e,r)=>(Zc(t,e,"access private method"),r),ai,Ni,Rs,tr,Gc,Df,hr,br,Qc,Af;let D_=class{constructor(e){oi(this,Gc),oi(this,hr),oi(this,Qc),oi(this,ai,void 0),oi(this,Ni,void 0),oi(this,Rs,void 0),oi(this,tr,void 0),Go(this,ai,e),Go(this,Ni,ur(this,Gc,Df).call(this)),ur(this,hr,br).call(this)}async connect(e){const{requiredNamespaces:r,optionalNamespaces:n}=e;return new Promise(async(i,s)=>{await ur(this,hr,br).call(this);const o=Dt(this,Ni).subscribeModal(u=>{u.open||(o(),s(new Error("Modal closed")))}),{uri:a,approval:c}=await Dt(this,tr).connect(e);if(a){const u=new Set;r&&Object.values(r).forEach(({chains:h})=>{h&&h.forEach(f=>u.add(f))}),n&&Object.values(n).forEach(({chains:h})=>{h&&h.forEach(f=>u.add(f))}),await Dt(this,Ni).openModal({uri:a,chains:Array.from(u)})}try{const u=await c();i(u)}catch(u){s(u)}finally{o(),Dt(this,Ni).closeModal()}})}async disconnect(e){await ur(this,hr,br).call(this),await Dt(this,tr).disconnect(e)}async request(e){return await ur(this,hr,br).call(this),await Dt(this,tr).request(e)}async getSessions(){return await ur(this,hr,br).call(this),Dt(this,tr).session.getAll()}async getSession(){return await ur(this,hr,br).call(this),Dt(this,tr).session.getAll().at(-1)}async onSessionEvent(e){await ur(this,hr,br).call(this),Dt(this,tr).on("session_event",e)}async offSessionEvent(e){await ur(this,hr,br).call(this),Dt(this,tr).off("session_event",e)}async onSessionUpdate(e){await ur(this,hr,br).call(this),Dt(this,tr).on("session_update",e)}async offSessionUpdate(e){await ur(this,hr,br).call(this),Dt(this,tr).off("session_update",e)}async onSessionDelete(e){await ur(this,hr,br).call(this),Dt(this,tr).on("session_delete",e)}async offSessionDelete(e){await ur(this,hr,br).call(this),Dt(this,tr).off("session_delete",e)}async onSessionExpire(e){await ur(this,hr,br).call(this),Dt(this,tr).on("session_expire",e)}async offSessionExpire(e){await ur(this,hr,br).call(this),Dt(this,tr).off("session_expire",e)}};ai=new WeakMap,Ni=new WeakMap,Rs=new WeakMap,tr=new WeakMap,Gc=new WeakSet,Df=function(){const{modalOptions:t,projectId:e}=Dt(this,ai);return new vg(I_(O_({},t),{projectId:e}))},hr=new WeakSet,br=async function(){return Dt(this,tr)?!0:(!Dt(this,Rs)&&typeof window<"u"&&Go(this,Rs,ur(this,Qc,Af).call(this)),Dt(this,Rs))},Qc=new WeakSet,Af=async function(){Go(this,tr,await b_.init({metadata:Dt(this,ai).metadata,projectId:Dt(this,ai).projectId,relayUrl:Dt(this,ai).relayUrl}));const t=await Dt(this,tr).core.crypto.getClientId();try{localStorage.setItem("WCM_WALLETCONNECT_CLIENT_ID",t)}catch{console.info("Unable to set client id")}};const Qo=["decrypt","disconnect","getSelectedAccount","getBalance","getRecords","requestCreateEvent","getEvent","getEvents","createSharedState","importSharedState","requestSignature"],Ps=["aleo:1"],Yo=["chainChanged","accountSelected","selectedAccountSynced","sharedAccountSynced"],Tf="f0aaeffe71b636da453fce042d79d723",Rf={standaloneChains:Ps,enableExplorer:!1,enableAccountView:!0,enableNetworkView:!0,enableStandaloneMode:!0,mobileWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"puzzleapp://",universal:""}}],desktopWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"",universal:"https://walletconnect.puzzle.online/"}}],walletImages:{puzzle:"https://i.imgur.com/p9tHaFC.png"}},A_={requiredNamespaces:{aleo:{methods:Qo,chains:Ps,events:Yo}}};var Pf={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,u,h){this.fn=c,this.context=u,this.once=h||!1}function s(c,u,h,f,p){if(typeof h!="function")throw new TypeError("The listener must be a function");var y=new i(h,f||c,p),w=r?r+u:u;return c._events[w]?c._events[w].fn?c._events[w]=[c._events[w],y]:c._events[w].push(y):(c._events[w]=y,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],h,f;if(this._eventsCount===0)return u;for(f in h=this._events)e.call(h,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},a.prototype.listeners=function(u){var h=r?r+u:u,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,y=f.length,w=new Array(y);p<y;p++)w[p]=f[p].fn;return w},a.prototype.listenerCount=function(u){var h=r?r+u:u,f=this._events[h];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,h,f,p,y,w){var S=r?r+u:u;if(!this._events[S])return!1;var E=this._events[S],I=arguments.length,b,C;if(E.fn){switch(E.once&&this.removeListener(u,E.fn,void 0,!0),I){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,h),!0;case 3:return E.fn.call(E.context,h,f),!0;case 4:return E.fn.call(E.context,h,f,p),!0;case 5:return E.fn.call(E.context,h,f,p,y),!0;case 6:return E.fn.call(E.context,h,f,p,y,w),!0}for(C=1,b=new Array(I-1);C<I;C++)b[C-1]=arguments[C];E.fn.apply(E.context,b)}else{var v=E.length,_;for(C=0;C<v;C++)switch(E[C].once&&this.removeListener(u,E[C].fn,void 0,!0),I){case 1:E[C].fn.call(E[C].context);break;case 2:E[C].fn.call(E[C].context,h);break;case 3:E[C].fn.call(E[C].context,h,f);break;case 4:E[C].fn.call(E[C].context,h,f,p);break;default:if(!b)for(_=1,b=new Array(I-1);_<I;_++)b[_-1]=arguments[_];E[C].fn.apply(E[C].context,b)}}return!0},a.prototype.on=function(u,h,f){return s(this,u,h,f,!1)},a.prototype.once=function(u,h,f){return s(this,u,h,f,!0)},a.prototype.removeListener=function(u,h,f,p){var y=r?r+u:u;if(!this._events[y])return this;if(!h)return o(this,y),this;var w=this._events[y];if(w.fn)w.fn===h&&(!p||w.once)&&(!f||w.context===f)&&o(this,y);else{for(var S=0,E=[],I=w.length;S<I;S++)(w[S].fn!==h||p&&!w[S].once||f&&w[S].context!==f)&&E.push(w[S]);E.length?this._events[y]=E.length===1?E[0]:E:o(this,y)}return this},a.prototype.removeAllListeners=function(u){var h;return u?(h=r?r+u:u,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(Pf);var T_=Pf.exports;const R_=cs(T_),ci=new R_;let $s;function $f(t){$s=new D_({projectId:Tf,metadata:{name:t.dAppName,description:t.dAppDescription,url:t.dAppUrl,icons:[t.dAppIconURL]},modalOptions:{...Rf}}),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")}async function St(){return new Promise(t=>{if($s)t($s);else{const e=setInterval(()=>{$s&&(clearInterval(e),t($s))},200)}window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")})}var ct;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=n,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(ct||(ct={}));var Yc;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Yc||(Yc={}));const pe=ct.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),$n=t=>{switch(typeof t){case"undefined":return pe.undefined;case"string":return pe.string;case"number":return isNaN(t)?pe.nan:pe.number;case"boolean":return pe.boolean;case"function":return pe.function;case"bigint":return pe.bigint;case"symbol":return pe.symbol;case"object":return Array.isArray(t)?pe.array:t===null?pe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?pe.promise:typeof Map<"u"&&t instanceof Map?pe.map:typeof Set<"u"&&t instanceof Set?pe.set:typeof Date<"u"&&t instanceof Date?pe.date:pe.object;default:return pe.unknown}},ae=ct.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),P_=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Zr extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(s){return s.message},n={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,ct.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Zr.create=t=>new Zr(t);const Ns=(t,e)=>{let r;switch(t.code){case ae.invalid_type:t.received===pe.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case ae.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,ct.jsonStringifyReplacer)}`;break;case ae.unrecognized_keys:r=`Unrecognized key(s) in object: ${ct.joinValues(t.keys,", ")}`;break;case ae.invalid_union:r="Invalid input";break;case ae.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ct.joinValues(t.options)}`;break;case ae.invalid_enum_value:r=`Invalid enum value. Expected ${ct.joinValues(t.options)}, received '${t.received}'`;break;case ae.invalid_arguments:r="Invalid function arguments";break;case ae.invalid_return_type:r="Invalid function return type";break;case ae.invalid_date:r="Invalid date";break;case ae.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:ct.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case ae.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case ae.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case ae.custom:r="Invalid input";break;case ae.invalid_intersection_types:r="Intersection results could not be merged";break;case ae.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case ae.not_finite:r="Number must be finite";break;default:r=e.defaultError,ct.assertNever(t)}return{message:r}};let Nf=Ns;function $_(t){Nf=t}function Jo(){return Nf}const Xo=t=>{const{data:e,path:r,errorMaps:n,issueData:i}=t,s=[...r,...i.path||[]],o={...i,path:s};let a="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...i,path:s,message:i.message||a}},N_=[];function ge(t,e){const r=Xo({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Jo(),Ns].filter(n=>!!n)});t.common.issues.push(r)}class dr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if(i.status==="aborted")return Re;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const i of r)n.push({key:await i.key,value:await i.value});return dr.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Re;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),(typeof o.value<"u"||i.alwaysSet)&&(n[s.value]=o.value)}return{status:e.value,value:n}}}const Re=Object.freeze({status:"aborted"}),Lf=t=>({status:"dirty",value:t}),_r=t=>({status:"valid",value:t}),Jc=t=>t.status==="aborted",Xc=t=>t.status==="dirty",ea=t=>t.status==="valid",ta=t=>typeof Promise<"u"&&t instanceof Promise;var be;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(be||(be={}));class cn{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Mf=(t,e)=>{if(ea(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Zr(t.common.issues);return this._error=r,this._error}}};function Ue(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:i}}class Ze{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return $n(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:$n(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new dr,ctx:{common:e.parent.common,data:e.data,parsedType:$n(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(ta(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$n(e)},s=this._parseSync({data:e,path:i.path,parent:i});return Mf(i,s)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$n(e)},i=this._parse({data:e,path:n.path,parent:n}),s=await(ta(i)?i:Promise.resolve(i));return Mf(n,s)}refine(e,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:ae.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Yr({schema:this,typeName:Oe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return _n.create(this,this._def)}nullable(){return di.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Qr.create(this,this._def)}promise(){return Fi.create(this,this._def)}or(e){return Fs.create([this,e],this._def)}and(e){return Us.create(this,e,this._def)}transform(e){return new Yr({...Ue(this._def),schema:this,typeName:Oe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new Ws({...Ue(this._def),innerType:this,defaultValue:r,typeName:Oe.ZodDefault})}brand(){return new Ff({typeName:Oe.ZodBranded,type:this,...Ue(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new aa({...Ue(this._def),innerType:this,catchValue:r,typeName:Oe.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Vs.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const L_=/^c[^\s-]{8,}$/i,M_=/^[a-z][a-z0-9]*$/,k_=/[0-9A-HJKMNP-TV-Z]{26}/,F_=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,U_=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,j_=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,B_=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,q_=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,z_=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function W_(t,e){return!!((e==="v4"||!e)&&B_.test(t)||(e==="v6"||!e)&&q_.test(t))}class Gr extends Ze{constructor(){super(...arguments),this._regex=(e,r,n)=>this.refinement(i=>e.test(i),{validation:r,code:ae.invalid_string,...be.errToObj(n)}),this.nonempty=e=>this.min(1,be.errToObj(e)),this.trim=()=>new Gr({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Gr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Gr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==pe.string){const s=this._getOrReturnCtx(e);return ge(s,{code:ae.invalid_type,expected:pe.string,received:s.parsedType}),Re}const n=new dr;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?ge(i,{code:ae.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&ge(i,{code:ae.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")U_.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"email",code:ae.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")j_.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"emoji",code:ae.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")F_.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"uuid",code:ae.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")L_.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"cuid",code:ae.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")M_.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"cuid2",code:ae.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")k_.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"ulid",code:ae.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ge(i,{validation:"url",code:ae.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"regex",code:ae.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?z_(s).test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="ip"?W_(e.data,s.version)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"ip",code:ae.invalid_string,message:s.message}),n.dirty()):ct.assertNever(s);return{status:n.value,value:e.data}}_addCheck(e){return new Gr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...be.errToObj(e)})}url(e){return this._addCheck({kind:"url",...be.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...be.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...be.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...be.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...be.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...be.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...be.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,...be.errToObj(e==null?void 0:e.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...be.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...be.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...be.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...be.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...be.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...be.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...be.errToObj(r)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Gr.create=t=>{var e;return new Gr({checks:[],typeName:Oe.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ue(t)})};function V_(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class Nn extends Ze{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==pe.number){const s=this._getOrReturnCtx(e);return ge(s,{code:ae.invalid_type,expected:pe.number,received:s.parsedType}),Re}let n;const i=new dr;for(const s of this._def.checks)s.kind==="int"?ct.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?V_(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.not_finite,message:s.message}),i.dirty()):ct.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,be.toString(r))}gt(e,r){return this.setLimit("min",e,!1,be.toString(r))}lte(e,r){return this.setLimit("max",e,!0,be.toString(r))}lt(e,r){return this.setLimit("max",e,!1,be.toString(r))}setLimit(e,r,n,i){return new Nn({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:be.toString(i)}]})}_addCheck(e){return new Nn({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:be.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:be.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:be.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:be.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:be.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:be.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:be.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:be.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:be.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ct.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}Nn.create=t=>new Nn({checks:[],typeName:Oe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ue(t)});class Ln extends Ze{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==pe.bigint){const s=this._getOrReturnCtx(e);return ge(s,{code:ae.invalid_type,expected:pe.bigint,received:s.parsedType}),Re}let n;const i=new dr;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):ct.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,be.toString(r))}gt(e,r){return this.setLimit("min",e,!1,be.toString(r))}lte(e,r){return this.setLimit("max",e,!0,be.toString(r))}lt(e,r){return this.setLimit("max",e,!1,be.toString(r))}setLimit(e,r,n,i){return new Ln({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:be.toString(i)}]})}_addCheck(e){return new Ln({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:be.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:be.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:be.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:be.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:be.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Ln.create=t=>{var e;return new Ln({checks:[],typeName:Oe.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ue(t)})};class Ls extends Ze{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==pe.boolean){const n=this._getOrReturnCtx(e);return ge(n,{code:ae.invalid_type,expected:pe.boolean,received:n.parsedType}),Re}return _r(e.data)}}Ls.create=t=>new Ls({typeName:Oe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ue(t)});class li extends Ze{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==pe.date){const s=this._getOrReturnCtx(e);return ge(s,{code:ae.invalid_type,expected:pe.date,received:s.parsedType}),Re}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return ge(s,{code:ae.invalid_date}),Re}const n=new dr;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):ct.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new li({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:be.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:be.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}li.create=t=>new li({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Oe.ZodDate,...Ue(t)});class ra extends Ze{_parse(e){if(this._getType(e)!==pe.symbol){const n=this._getOrReturnCtx(e);return ge(n,{code:ae.invalid_type,expected:pe.symbol,received:n.parsedType}),Re}return _r(e.data)}}ra.create=t=>new ra({typeName:Oe.ZodSymbol,...Ue(t)});class Ms extends Ze{_parse(e){if(this._getType(e)!==pe.undefined){const n=this._getOrReturnCtx(e);return ge(n,{code:ae.invalid_type,expected:pe.undefined,received:n.parsedType}),Re}return _r(e.data)}}Ms.create=t=>new Ms({typeName:Oe.ZodUndefined,...Ue(t)});class ks extends Ze{_parse(e){if(this._getType(e)!==pe.null){const n=this._getOrReturnCtx(e);return ge(n,{code:ae.invalid_type,expected:pe.null,received:n.parsedType}),Re}return _r(e.data)}}ks.create=t=>new ks({typeName:Oe.ZodNull,...Ue(t)});class Li extends Ze{constructor(){super(...arguments),this._any=!0}_parse(e){return _r(e.data)}}Li.create=t=>new Li({typeName:Oe.ZodAny,...Ue(t)});class ui extends Ze{constructor(){super(...arguments),this._unknown=!0}_parse(e){return _r(e.data)}}ui.create=t=>new ui({typeName:Oe.ZodUnknown,...Ue(t)});class bn extends Ze{_parse(e){const r=this._getOrReturnCtx(e);return ge(r,{code:ae.invalid_type,expected:pe.never,received:r.parsedType}),Re}}bn.create=t=>new bn({typeName:Oe.ZodNever,...Ue(t)});class na extends Ze{_parse(e){if(this._getType(e)!==pe.undefined){const n=this._getOrReturnCtx(e);return ge(n,{code:ae.invalid_type,expected:pe.void,received:n.parsedType}),Re}return _r(e.data)}}na.create=t=>new na({typeName:Oe.ZodVoid,...Ue(t)});class Qr extends Ze{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==pe.array)return ge(r,{code:ae.invalid_type,expected:pe.array,received:r.parsedType}),Re;if(i.exactLength!==null){const o=r.data.length>i.exactLength.value,a=r.data.length<i.exactLength.value;(o||a)&&(ge(r,{code:o?ae.too_big:ae.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(ge(r,{code:ae.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(ge(r,{code:ae.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>i.type._parseAsync(new cn(r,o,r.path,a)))).then(o=>dr.mergeArray(n,o));const s=[...r.data].map((o,a)=>i.type._parseSync(new cn(r,o,r.path,a)));return dr.mergeArray(n,s)}get element(){return this._def.type}min(e,r){return new Qr({...this._def,minLength:{value:e,message:be.toString(r)}})}max(e,r){return new Qr({...this._def,maxLength:{value:e,message:be.toString(r)}})}length(e,r){return new Qr({...this._def,exactLength:{value:e,message:be.toString(r)}})}nonempty(e){return this.min(1,e)}}Qr.create=(t,e)=>new Qr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Oe.ZodArray,...Ue(e)});function Mi(t){if(t instanceof Lt){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=_n.create(Mi(n))}return new Lt({...t._def,shape:()=>e})}else return t instanceof Qr?new Qr({...t._def,type:Mi(t.element)}):t instanceof _n?_n.create(Mi(t.unwrap())):t instanceof di?di.create(Mi(t.unwrap())):t instanceof ln?ln.create(t.items.map(e=>Mi(e))):t}class Lt extends Ze{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=ct.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==pe.object){const u=this._getOrReturnCtx(e);return ge(u,{code:ae.invalid_type,expected:pe.object,received:u.parsedType}),Re}const{status:n,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof bn&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const h=s[u],f=i.data[u];c.push({key:{status:"valid",value:u},value:h._parse(new cn(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof bn){const u=this._def.unknownKeys;if(u==="passthrough")for(const h of a)c.push({key:{status:"valid",value:h},value:{status:"valid",value:i.data[h]}});else if(u==="strict")a.length>0&&(ge(i,{code:ae.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const h of a){const f=i.data[h];c.push({key:{status:"valid",value:h},value:u._parse(new cn(i,f,i.path,h)),alwaysSet:h in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const h of c){const f=await h.key;u.push({key:f,value:await h.value,alwaysSet:h.alwaysSet})}return u}).then(u=>dr.mergeObjectSync(n,u)):dr.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return be.errToObj,new Lt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,s,o,a;const c=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=be.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Lt({...this._def,unknownKeys:"strip"})}passthrough(){return new Lt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Lt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Lt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Oe.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Lt({...this._def,catchall:e})}pick(e){const r={};return ct.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new Lt({...this._def,shape:()=>r})}omit(e){const r={};return ct.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new Lt({...this._def,shape:()=>r})}deepPartial(){return Mi(this)}partial(e){const r={};return ct.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new Lt({...this._def,shape:()=>r})}required(e){const r={};return ct.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof _n;)s=s._def.innerType;r[n]=s}}),new Lt({...this._def,shape:()=>r})}keyof(){return kf(ct.objectKeys(this.shape))}}Lt.create=(t,e)=>new Lt({shape:()=>t,unknownKeys:"strip",catchall:bn.create(),typeName:Oe.ZodObject,...Ue(e)}),Lt.strictCreate=(t,e)=>new Lt({shape:()=>t,unknownKeys:"strict",catchall:bn.create(),typeName:Oe.ZodObject,...Ue(e)}),Lt.lazycreate=(t,e)=>new Lt({shape:t,unknownKeys:"strip",catchall:bn.create(),typeName:Oe.ZodObject,...Ue(e)});class Fs extends Ze{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Zr(a.ctx.common.issues));return ge(r,{code:ae.invalid_union,unionErrors:o}),Re}if(r.common.async)return Promise.all(n.map(async s=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},h=c._parseSync({data:r.data,path:r.path,parent:u});if(h.status==="valid")return h;h.status==="dirty"&&!s&&(s={result:h,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(c=>new Zr(c));return ge(r,{code:ae.invalid_union,unionErrors:a}),Re}}get options(){return this._def.options}}Fs.create=(t,e)=>new Fs({options:t,typeName:Oe.ZodUnion,...Ue(e)});const ia=t=>t instanceof Bs?ia(t.schema):t instanceof Yr?ia(t.innerType()):t instanceof qs?[t.value]:t instanceof Mn?t.options:t instanceof zs?Object.keys(t.enum):t instanceof Ws?ia(t._def.innerType):t instanceof Ms?[void 0]:t instanceof ks?[null]:null;class sa extends Ze{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==pe.object)return ge(r,{code:ae.invalid_type,expected:pe.object,received:r.parsedType}),Re;const n=this.discriminator,i=r.data[n],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(ge(r,{code:ae.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Re)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const i=new Map;for(const s of r){const o=ia(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new sa({typeName:Oe.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Ue(n)})}}function el(t,e){const r=$n(t),n=$n(e);if(t===e)return{valid:!0,data:t};if(r===pe.object&&n===pe.object){const i=ct.objectKeys(e),s=ct.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const c=el(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===pe.array&&n===pe.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],c=el(o,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return r===pe.date&&n===pe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Us extends Ze{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=(s,o)=>{if(Jc(s)||Jc(o))return Re;const a=el(s.value,o.value);return a.valid?((Xc(s)||Xc(o))&&r.dirty(),{status:r.value,value:a.data}):(ge(n,{code:ae.invalid_intersection_types}),Re)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Us.create=(t,e,r)=>new Us({left:t,right:e,typeName:Oe.ZodIntersection,...Ue(r)});class ln extends Ze{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==pe.array)return ge(n,{code:ae.invalid_type,expected:pe.array,received:n.parsedType}),Re;if(n.data.length<this._def.items.length)return ge(n,{code:ae.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Re;!this._def.rest&&n.data.length>this._def.items.length&&(ge(n,{code:ae.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new cn(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(s).then(o=>dr.mergeArray(r,o)):dr.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new ln({...this._def,rest:e})}}ln.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ln({items:t,typeName:Oe.ZodTuple,rest:null,...Ue(e)})};class js extends Ze{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==pe.object)return ge(n,{code:ae.invalid_type,expected:pe.object,received:n.parsedType}),Re;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in n.data)i.push({key:s._parse(new cn(n,a,n.path,a)),value:o._parse(new cn(n,n.data[a],n.path,a))});return n.common.async?dr.mergeObjectAsync(r,i):dr.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Ze?new js({keyType:e,valueType:r,typeName:Oe.ZodRecord,...Ue(n)}):new js({keyType:Gr.create(),valueType:e,typeName:Oe.ZodRecord,...Ue(r)})}}class oa extends Ze{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==pe.map)return ge(n,{code:ae.invalid_type,expected:pe.map,received:n.parsedType}),Re;const i=this._def.keyType,s=this._def.valueType,o=[...n.data.entries()].map(([a,c],u)=>({key:i._parse(new cn(n,a,n.path,[u,"key"])),value:s._parse(new cn(n,c,n.path,[u,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,h=await c.value;if(u.status==="aborted"||h.status==="aborted")return Re;(u.status==="dirty"||h.status==="dirty")&&r.dirty(),a.set(u.value,h.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,h=c.value;if(u.status==="aborted"||h.status==="aborted")return Re;(u.status==="dirty"||h.status==="dirty")&&r.dirty(),a.set(u.value,h.value)}return{status:r.value,value:a}}}}oa.create=(t,e,r)=>new oa({valueType:e,keyType:t,typeName:Oe.ZodMap,...Ue(r)});class hi extends Ze{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==pe.set)return ge(n,{code:ae.invalid_type,expected:pe.set,received:n.parsedType}),Re;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(ge(n,{code:ae.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(ge(n,{code:ae.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const s=this._def.valueType;function o(c){const u=new Set;for(const h of c){if(h.status==="aborted")return Re;h.status==="dirty"&&r.dirty(),u.add(h.value)}return{status:r.value,value:u}}const a=[...n.data.values()].map((c,u)=>s._parse(new cn(n,c,n.path,u)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new hi({...this._def,minSize:{value:e,message:be.toString(r)}})}max(e,r){return new hi({...this._def,maxSize:{value:e,message:be.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}hi.create=(t,e)=>new hi({valueType:t,minSize:null,maxSize:null,typeName:Oe.ZodSet,...Ue(e)});class ki extends Ze{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==pe.function)return ge(r,{code:ae.invalid_type,expected:pe.function,received:r.parsedType}),Re;function n(a,c){return Xo({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Jo(),Ns].filter(u=>!!u),issueData:{code:ae.invalid_arguments,argumentsError:c}})}function i(a,c){return Xo({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Jo(),Ns].filter(u=>!!u),issueData:{code:ae.invalid_return_type,returnTypeError:c}})}const s={errorMap:r.common.contextualErrorMap},o=r.data;return this._def.returns instanceof Fi?_r(async(...a)=>{const c=new Zr([]),u=await this._def.args.parseAsync(a,s).catch(p=>{throw c.addIssue(n(a,p)),c}),h=await o(...u);return await this._def.returns._def.type.parseAsync(h,s).catch(p=>{throw c.addIssue(i(h,p)),c})}):_r((...a)=>{const c=this._def.args.safeParse(a,s);if(!c.success)throw new Zr([n(a,c.error)]);const u=o(...c.data),h=this._def.returns.safeParse(u,s);if(!h.success)throw new Zr([i(u,h.error)]);return h.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ki({...this._def,args:ln.create(e).rest(ui.create())})}returns(e){return new ki({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new ki({args:e||ln.create([]).rest(ui.create()),returns:r||ui.create(),typeName:Oe.ZodFunction,...Ue(n)})}}class Bs extends Ze{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Bs.create=(t,e)=>new Bs({getter:t,typeName:Oe.ZodLazy,...Ue(e)});class qs extends Ze{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return ge(r,{received:r.data,code:ae.invalid_literal,expected:this._def.value}),Re}return{status:"valid",value:e.data}}get value(){return this._def.value}}qs.create=(t,e)=>new qs({value:t,typeName:Oe.ZodLiteral,...Ue(e)});function kf(t,e){return new Mn({values:t,typeName:Oe.ZodEnum,...Ue(e)})}class Mn extends Ze{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return ge(r,{expected:ct.joinValues(n),received:r.parsedType,code:ae.invalid_type}),Re}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return ge(r,{received:r.data,code:ae.invalid_enum_value,options:n}),Re}return _r(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return Mn.create(e)}exclude(e){return Mn.create(this.options.filter(r=>!e.includes(r)))}}Mn.create=kf;class zs extends Ze{_parse(e){const r=ct.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==pe.string&&n.parsedType!==pe.number){const i=ct.objectValues(r);return ge(n,{expected:ct.joinValues(i),received:n.parsedType,code:ae.invalid_type}),Re}if(r.indexOf(e.data)===-1){const i=ct.objectValues(r);return ge(n,{received:n.data,code:ae.invalid_enum_value,options:i}),Re}return _r(e.data)}get enum(){return this._def.values}}zs.create=(t,e)=>new zs({values:t,typeName:Oe.ZodNativeEnum,...Ue(e)});class Fi extends Ze{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==pe.promise&&r.common.async===!1)return ge(r,{code:ae.invalid_type,expected:pe.promise,received:r.parsedType}),Re;const n=r.parsedType===pe.promise?r.data:Promise.resolve(r.data);return _r(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Fi.create=(t,e)=>new Fi({type:t,typeName:Oe.ZodPromise,...Ue(e)});class Yr extends Ze{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Oe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null;if(i.type==="preprocess"){const o=i.transform(n.data);return n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}const s={addIssue:o=>{ge(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="refinement"){const o=a=>{const c=i.refinement(a,s);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Re:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?Re:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(i.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ea(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>ea(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:r.value,value:a})):o);ct.assertNever(i)}}Yr.create=(t,e,r)=>new Yr({schema:t,typeName:Oe.ZodEffects,effect:e,...Ue(r)}),Yr.createWithPreprocess=(t,e,r)=>new Yr({schema:e,effect:{type:"preprocess",transform:t},typeName:Oe.ZodEffects,...Ue(r)});class _n extends Ze{_parse(e){return this._getType(e)===pe.undefined?_r(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}_n.create=(t,e)=>new _n({innerType:t,typeName:Oe.ZodOptional,...Ue(e)});class di extends Ze{_parse(e){return this._getType(e)===pe.null?_r(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}di.create=(t,e)=>new di({innerType:t,typeName:Oe.ZodNullable,...Ue(e)});class Ws extends Ze{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===pe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Ws.create=(t,e)=>new Ws({innerType:t,typeName:Oe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ue(e)});class aa extends Ze{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return ta(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Zr(n.common.issues)}})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Zr(n.common.issues)}})}}removeCatch(){return this._def.innerType}}aa.create=(t,e)=>new aa({innerType:t,typeName:Oe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ue(e)});class ca extends Ze{_parse(e){if(this._getType(e)!==pe.nan){const n=this._getOrReturnCtx(e);return ge(n,{code:ae.invalid_type,expected:pe.nan,received:n.parsedType}),Re}return{status:"valid",value:e.data}}}ca.create=t=>new ca({typeName:Oe.ZodNaN,...Ue(t)});const H_=Symbol("zod_brand");class Ff extends Ze{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Vs extends Ze{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Re:s.status==="dirty"?(r.dirty(),Lf(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Re:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new Vs({in:e,out:r,typeName:Oe.ZodPipeline})}}const Uf=(t,e={},r)=>t?Li.create().superRefine((n,i)=>{var s,o;if(!t(n)){const a=typeof e=="function"?e(n):e,c=(o=(s=a.fatal)!==null&&s!==void 0?s:r)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...u,fatal:c})}}):Li.create(),K_={object:Lt.lazycreate};var Oe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(Oe||(Oe={}));const Z_=(t,e={message:`Input not instance of ${t.name}`})=>Uf(r=>r instanceof t,e),jf=Gr.create,Bf=Nn.create,G_=ca.create,Q_=Ln.create,qf=Ls.create,Y_=li.create,J_=ra.create,X_=Ms.create,e3=ks.create,t3=Li.create,r3=ui.create,n3=bn.create,i3=na.create,s3=Qr.create,o3=Lt.create,a3=Lt.strictCreate,c3=Fs.create,l3=sa.create,u3=Us.create,h3=ln.create,d3=js.create,f3=oa.create,p3=hi.create,g3=ki.create,m3=Bs.create,y3=qs.create,v3=Mn.create,w3=zs.create,b3=Fi.create,zf=Yr.create,_3=_n.create,E3=di.create,S3=Yr.createWithPreprocess,x3=Vs.create;var Jr=Object.freeze({__proto__:null,defaultErrorMap:Ns,setErrorMap:$_,getErrorMap:Jo,makeIssue:Xo,EMPTY_PATH:N_,addIssueToContext:ge,ParseStatus:dr,INVALID:Re,DIRTY:Lf,OK:_r,isAborted:Jc,isDirty:Xc,isValid:ea,isAsync:ta,get util(){return ct},get objectUtil(){return Yc},ZodParsedType:pe,getParsedType:$n,ZodType:Ze,ZodString:Gr,ZodNumber:Nn,ZodBigInt:Ln,ZodBoolean:Ls,ZodDate:li,ZodSymbol:ra,ZodUndefined:Ms,ZodNull:ks,ZodAny:Li,ZodUnknown:ui,ZodNever:bn,ZodVoid:na,ZodArray:Qr,ZodObject:Lt,ZodUnion:Fs,ZodDiscriminatedUnion:sa,ZodIntersection:Us,ZodTuple:ln,ZodRecord:js,ZodMap:oa,ZodSet:hi,ZodFunction:ki,ZodLazy:Bs,ZodLiteral:qs,ZodEnum:Mn,ZodNativeEnum:zs,ZodPromise:Fi,ZodEffects:Yr,ZodTransformer:Yr,ZodOptional:_n,ZodNullable:di,ZodDefault:Ws,ZodCatch:aa,ZodNaN:ca,BRAND:H_,ZodBranded:Ff,ZodPipeline:Vs,custom:Uf,Schema:Ze,ZodSchema:Ze,late:K_,get ZodFirstPartyTypeKind(){return Oe},coerce:{string:t=>Gr.create({...t,coerce:!0}),number:t=>Nn.create({...t,coerce:!0}),boolean:t=>Ls.create({...t,coerce:!0}),bigint:t=>Ln.create({...t,coerce:!0}),date:t=>li.create({...t,coerce:!0})},any:t3,array:s3,bigint:Q_,boolean:qf,date:Y_,discriminatedUnion:l3,effect:zf,enum:v3,function:g3,instanceof:Z_,intersection:u3,lazy:m3,literal:y3,map:f3,nan:G_,nativeEnum:w3,never:n3,null:e3,nullable:E3,number:Bf,object:o3,oboolean:()=>qf().optional(),onumber:()=>Bf().optional(),optional:_3,ostring:()=>jf().optional(),pipeline:x3,preprocess:S3,promise:b3,record:d3,set:p3,strictObject:a3,string:jf,symbol:J_,transformer:zf,tuple:h3,undefined:X_,union:c3,unknown:r3,void:i3,NEVER:Re,ZodIssueCode:ae,quotelessJson:P_,ZodError:Zr});const Wf=/^aleo1.{58}$/i,Vf=/^AViewKey1.{44}$/i,Hf=/^APrivateKey1.{47}$/i,Kf=/^at1.{60}$/i,Zf=/^\d+field$/,Gf=/^\d+u32$/,Qf=/^\d+u64$/,C3=Jr.string().regex(Wf),O3=Jr.string().regex(Vf),I3=Jr.string().regex(Hf),D3=Jr.string().regex(Kf),A3=Jr.string().regex(Zf),T3=Jr.string().regex(Gf),R3=Jr.string().regex(Qf);J.EventType=void 0,function(t){t.Deploy="Deploy",t.Execute="Execute",t.Send="Send",t.Receive="Receive",t.Join="Join",t.Split="Split",t.Shield="Shield",t.Unshield="Unshield"}(J.EventType||(J.EventType={})),J.EventStatus=void 0,function(t){t.Creating="Creating",t.Pending="Pending",t.Settled="Settled",t.Failed="Failed"}(J.EventStatus||(J.EventStatus={})),J.Visibility=void 0,function(t){t.Private="Private",t.Public="Public"}(J.Visibility||(J.Visibility={})),J.Network=void 0,function(t){t.AleoTestnet="AleoTestnet",t.AleoMainnet="AleoMainnet"}(J.Network||(J.Network={})),J.AssetType=void 0,function(t){t[t.ALEO=0]="ALEO"}(J.AssetType||(J.AssetType={}));const P3=Jr.nativeEnum(J.EventType),$3=Jr.nativeEnum(J.EventStatus),N3=Jr.nativeEnum(J.Network),L3=Jr.nativeEnum(J.Visibility);let M3=class extends Pr{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},k3=class{constructor(e,r,n){this.core=e,this.logger=r}},F3=class extends Pr{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},U3=class{constructor(e,r){this.logger=e,this.core=r}},j3=class extends Pr{constructor(e,r){super(),this.relayer=e,this.logger=r}},B3=class extends Pr{constructor(e){super()}},q3=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},z3=class{constructor(){this.map=new Map}},W3=class extends Pr{constructor(e,r){super(),this.relayer=e,this.logger=r}},V3=class{constructor(e,r){this.core=e,this.logger=r}},H3=class extends Pr{constructor(e,r){super(),this.core=e,this.logger=r}},K3=class{constructor(e,r){this.logger=e,this.core=r}},Z3=class{constructor(e,r){this.projectId=e,this.logger=r}},G3=class extends Ya{constructor(){super()}},Q3=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},Y3=class extends Fr.EventEmitter{constructor(){super()}},J3=class{constructor(e){this.client=e}};function tl(t){mt.useEffect(()=>(St().then(e=>{e.onSessionDelete(t)}),()=>{St().then(e=>{e.offSessionDelete(t)})}),[t])}function Yf(t){mt.useEffect(()=>(St().then(e=>{e.onSessionExpire(t)}),()=>{St().then(e=>{e.offSessionExpire(t)})}),[t])}function rl(t){mt.useEffect(()=>(St().then(e=>{e.onSessionUpdate(t)}),()=>{St().then(e=>{e.offSessionUpdate(t)})}),[t])}function jr(){const[t,e]=mt.useState(void 0);return tl(r=>{r.topic===(t==null?void 0:t.topic)&&e(void 0)}),rl(r=>{if(t&&r.topic===(t==null?void 0:t.topic)){const{namespaces:n}=r.params,i={...t,namespaces:n};e(i)}}),Yf(r=>{t&&r.topic===(t==null?void 0:t.topic)&&e(void 0)}),mt.useEffect(()=>{async function r(){const i=await(await St()).getSession();e(i)}return r(),ci.on("session_change",r),()=>{ci.off("session_change",r)}},[]),t}function Ui(t){mt.useEffect(()=>(St().then(e=>{e.onSessionEvent(t)}),()=>{St().then(e=>{e.offSessionEvent(t)})}),[t])}const Jf=t=>{let e;const r=new Set,n=(c,u)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const f=e;e=u??typeof h!="object"?h:Object.assign({},e,h),r.forEach(p=>p(e,f))}},i=()=>e,a={setState:n,getState:i,subscribe:c=>(r.add(c),()=>r.delete(c)),destroy:()=>{r.clear()}};return e=t(n,i,a),a},X3=t=>t?Jf(t):Jf;var nl={exports:{}},il={},la={exports:{}},sl={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xf;function eE(){if(Xf)return sl;Xf=1;var t=mt;function e(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(f,p){var y=p(),w=n({inst:{value:y,getSnapshot:p}}),S=w[0].inst,E=w[1];return s(function(){S.value=y,S.getSnapshot=p,c(S)&&E({inst:S})},[f,y,p]),i(function(){return c(S)&&E({inst:S}),f(function(){c(S)&&E({inst:S})})},[f]),o(y),y}function c(f){var p=f.getSnapshot;f=f.value;try{var y=p();return!r(f,y)}catch{return!0}}function u(f,p){return p()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return sl.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,sl}var ol={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ep;function tE(){return ep||(ep=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=mt,e=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function r(C){{for(var v=arguments.length,_=new Array(v>1?v-1:0),g=1;g<v;g++)_[g-1]=arguments[g];n("error",C,_)}}function n(C,v,_){{var g=e.ReactDebugCurrentFrame,l=g.getStackAddendum();l!==""&&(v+="%s",_=_.concat([l]));var m=_.map(function(P){return String(P)});m.unshift("Warning: "+v),Function.prototype.apply.call(console[C],console,m)}}function i(C,v){return C===v&&(C!==0||1/C===1/v)||C!==C&&v!==v}var s=typeof Object.is=="function"?Object.is:i,o=t.useState,a=t.useEffect,c=t.useLayoutEffect,u=t.useDebugValue,h=!1,f=!1;function p(C,v,_){h||t.startTransition!==void 0&&(h=!0,r("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var g=v();if(!f){var l=v();s(g,l)||(r("The result of getSnapshot should be cached to avoid an infinite loop"),f=!0)}var m=o({inst:{value:g,getSnapshot:v}}),P=m[0].inst,$=m[1];return c(function(){P.value=g,P.getSnapshot=v,y(P)&&$({inst:P})},[C,g,v]),a(function(){y(P)&&$({inst:P});var z=function(){y(P)&&$({inst:P})};return C(z)},[C]),u(g),g}function y(C){var v=C.getSnapshot,_=C.value;try{var g=v();return!s(_,g)}catch{return!0}}function w(C,v,_){return v()}var S=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",E=!S,I=E?w:p,b=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:I;ol.useSyncExternalStore=b,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),ol}var tp;function al(){return tp||(tp=1,process.env.NODE_ENV==="production"?la.exports=eE():la.exports=tE()),la.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rp;function rE(){if(rp)return il;rp=1;var t=mt,e=al();function r(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,c=t.useDebugValue;return il.useSyncExternalStoreWithSelector=function(u,h,f,p,y){var w=s(null);if(w.current===null){var S={hasValue:!1,value:null};w.current=S}else S=w.current;w=a(function(){function I(g){if(!b){if(b=!0,C=g,g=p(g),y!==void 0&&S.hasValue){var l=S.value;if(y(l,g))return v=l}return v=g}if(l=v,n(C,g))return l;var m=p(g);return y!==void 0&&y(l,m)?l:(C=g,v=m)}var b=!1,C,v,_=f===void 0?null:f;return[function(){return I(h())},_===null?void 0:function(){return I(_())}]},[h,f,p,y]);var E=i(u,w[0],w[1]);return o(function(){S.hasValue=!0,S.value=E},[E]),c(E),E},il}var cl={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var np;function nE(){return np||(np=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=mt,e=al();function r(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,c=t.useDebugValue;function u(h,f,p,y,w){var S=s(null),E;S.current===null?(E={hasValue:!1,value:null},S.current=E):E=S.current;var I=a(function(){var _=!1,g,l,m=function(W){if(!_){_=!0,g=W;var G=y(W);if(w!==void 0&&E.hasValue){var N=E.value;if(w(N,G))return l=N,N}return l=G,G}var j=g,oe=l;if(n(j,W))return oe;var Y=y(W);return w!==void 0&&w(oe,Y)?oe:(g=W,l=Y,Y)},P=p===void 0?null:p,$=function(){return m(f())},z=P===null?void 0:function(){return m(P())};return[$,z]},[f,p,y,w]),b=I[0],C=I[1],v=i(h,b,C);return o(function(){E.hasValue=!0,E.value=v},[v]),c(v),v}cl.useSyncExternalStoreWithSelector=u,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),cl}process.env.NODE_ENV==="production"?nl.exports=rE():nl.exports=nE();var iE=nl.exports;const sE=cs(iE),{useSyncExternalStoreWithSelector:oE}=sE;function aE(t,e=t.getState,r){const n=oE(t.subscribe,t.getState,t.getServerState||t.getState,e,r);return mt.useDebugValue(n),n}const ip=t=>{const e=typeof t=="function"?X3(t):t,r=(n,i)=>aE(e,n,i);return Object.assign(r,e),r},cE=t=>t?ip(t):ip;function lE(t,e){let r;try{r=t()}catch{return}return{getItem:i=>{var s;const o=c=>c===null?null:JSON.parse(c,e==null?void 0:e.reviver),a=(s=r.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>r.setItem(i,JSON.stringify(s,e==null?void 0:e.replacer)),removeItem:i=>r.removeItem(i)}}const Hs=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return Hs(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return Hs(n)(r)}}}},uE=(t,e)=>(r,n,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:E=>E,version:0,merge:(E,I)=>({...I,...E}),...e},o=!1;const a=new Set,c=new Set;let u;try{u=s.getStorage()}catch{}if(!u)return t((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...E)},n,i);const h=Hs(s.serialize),f=()=>{const E=s.partialize({...n()});let I;const b=h({state:E,version:s.version}).then(C=>u.setItem(s.name,C)).catch(C=>{I=C});if(I)throw I;return b},p=i.setState;i.setState=(E,I)=>{p(E,I),f()};const y=t((...E)=>{r(...E),f()},n,i);let w;const S=()=>{var E;if(!u)return;o=!1,a.forEach(b=>b(n()));const I=((E=s.onRehydrateStorage)==null?void 0:E.call(s,n()))||void 0;return Hs(u.getItem.bind(u))(s.name).then(b=>{if(b)return s.deserialize(b)}).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==s.version){if(s.migrate)return s.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var C;return w=s.merge(b,(C=n())!=null?C:y),r(w,!0),f()}).then(()=>{I==null||I(w,void 0),o=!0,c.forEach(b=>b(w))}).catch(b=>{I==null||I(void 0,b)})};return i.persist={setOptions:E=>{s={...s,...E},E.getStorage&&(u=E.getStorage())},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>S(),hasHydrated:()=>o,onHydrate:E=>(a.add(E),()=>{a.delete(E)}),onFinishHydration:E=>(c.add(E),()=>{c.delete(E)})},S(),w||y},hE=(t,e)=>(r,n,i)=>{let s={storage:lE(()=>localStorage),partialize:S=>S,version:0,merge:(S,E)=>({...E,...S}),...e},o=!1;const a=new Set,c=new Set;let u=s.storage;if(!u)return t((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...S)},n,i);const h=()=>{const S=s.partialize({...n()});return u.setItem(s.name,{state:S,version:s.version})},f=i.setState;i.setState=(S,E)=>{f(S,E),h()};const p=t((...S)=>{r(...S),h()},n,i);let y;const w=()=>{var S,E;if(!u)return;o=!1,a.forEach(b=>{var C;return b((C=n())!=null?C:p)});const I=((E=s.onRehydrateStorage)==null?void 0:E.call(s,(S=n())!=null?S:p))||void 0;return Hs(u.getItem.bind(u))(s.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==s.version){if(s.migrate)return s.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var C;return y=s.merge(b,(C=n())!=null?C:p),r(y,!0),h()}).then(()=>{I==null||I(y,void 0),y=n(),o=!0,c.forEach(b=>b(y))}).catch(b=>{I==null||I(void 0,b)})};return i.persist={setOptions:S=>{s={...s,...S},S.storage&&(u=S.storage)},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>w(),hasHydrated:()=>o,onHydrate:S=>(a.add(S),()=>{a.delete(S)}),onFinishHydration:S=>(c.add(S),()=>{c.delete(S)})},s.skipHydration||w(),y||p},dE=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?uE(t,e):hE(t,e),kn=cE()(dE((t,e)=>({account:void 0,chainId:"aleo:1",setAccount:r=>{t({account:r})},setChainId:r=>{t({chainId:r})},disconnect:()=>{t({account:void 0,chainId:void 0})}}),{name:"puzzle-wallet-store"}));class Ks{constructor(){this.listeners=[],this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.push(e),this.onSubscribe(),()=>{this.listeners=this.listeners.filter(r=>r!==e),this.onUnsubscribe()}}hasListeners(){return this.listeners.length>0}onSubscribe(){}onUnsubscribe(){}}const Zs=typeof window>"u"||"Deno"in window;function Br(){}function fE(t,e){return typeof t=="function"?t(e):t}function ll(t){return typeof t=="number"&&t>=0&&t!==1/0}function sp(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Gs(t,e,r){return ua(t)?typeof e=="function"?{...r,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function Fn(t,e,r){return ua(t)?[{...e,queryKey:t},r]:[t||{},e]}function op(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(ua(o)){if(n){if(e.queryHash!==ul(o,e.options))return!1}else if(!ji(e.queryKey,o))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||typeof i<"u"&&i!==e.state.fetchStatus||s&&!s(e))}function ap(t,e){const{exact:r,fetching:n,predicate:i,mutationKey:s}=t;if(ua(s)){if(!e.options.mutationKey)return!1;if(r){if(fi(e.options.mutationKey)!==fi(s))return!1}else if(!ji(e.options.mutationKey,s))return!1}return!(typeof n=="boolean"&&e.state.status==="loading"!==n||i&&!i(e))}function ul(t,e){return((e==null?void 0:e.queryKeyHashFn)||fi)(t)}function fi(t){return JSON.stringify(t,(e,r)=>hl(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function ji(t,e){return cp(t,e)}function cp(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!cp(t[r],e[r])):!1}function lp(t,e){if(t===e)return t;const r=hp(t)&&hp(e);if(r||hl(t)&&hl(e)){const n=r?t.length:Object.keys(t).length,i=r?e:Object.keys(e),s=i.length,o=r?[]:{};let a=0;for(let c=0;c<s;c++){const u=r?c:i[c];o[u]=lp(t[u],e[u]),o[u]===t[u]&&a++}return n===s&&a===n?t:o}return e}function up(t,e){if(t&&!e||e&&!t)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function hp(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function hl(t){if(!dp(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const r=e.prototype;return!(!dp(r)||!r.hasOwnProperty("isPrototypeOf"))}function dp(t){return Object.prototype.toString.call(t)==="[object Object]"}function ua(t){return Array.isArray(t)}function fp(t){return new Promise(e=>{setTimeout(e,t)})}function pp(t){fp(0).then(t)}function pE(){if(typeof AbortController=="function")return new AbortController}function dl(t,e,r){return r.isDataEqual!=null&&r.isDataEqual(t,e)?t:typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?lp(t,e):e}class gE extends Ks{constructor(){super(),this.setup=e=>{if(!Zs&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),window.addEventListener("focus",r,!1),()=>{window.removeEventListener("visibilitychange",r),window.removeEventListener("focus",r)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var r;this.setup=e,(r=this.cleanup)==null||r.call(this),this.cleanup=e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(e){this.focused=e,e&&this.onFocus()}onFocus(){this.listeners.forEach(e=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const ha=new gE;class mE extends Ks{constructor(){super(),this.setup=e=>{if(!Zs&&window.addEventListener){const r=()=>e();return window.addEventListener("online",r,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",r)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var r;this.setup=e,(r=this.cleanup)==null||r.call(this),this.cleanup=e(n=>{typeof n=="boolean"?this.setOnline(n):this.onOnline()})}setOnline(e){this.online=e,e&&this.onOnline()}onOnline(){this.listeners.forEach(e=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const da=new mE;function yE(t){return Math.min(1e3*2**t,3e4)}function fa(t){return(t??"online")==="online"?da.isOnline():!0}class gp{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function pa(t){return t instanceof gp}function mp(t){let e=!1,r=0,n=!1,i,s,o;const a=new Promise((E,I)=>{s=E,o=I}),c=E=>{n||(y(new gp(E)),t.abort==null||t.abort())},u=()=>{e=!0},h=()=>{e=!1},f=()=>!ha.isFocused()||t.networkMode!=="always"&&!da.isOnline(),p=E=>{n||(n=!0,t.onSuccess==null||t.onSuccess(E),i==null||i(),s(E))},y=E=>{n||(n=!0,t.onError==null||t.onError(E),i==null||i(),o(E))},w=()=>new Promise(E=>{i=I=>{const b=n||!f();return b&&E(I),b},t.onPause==null||t.onPause()}).then(()=>{i=void 0,n||t.onContinue==null||t.onContinue()}),S=()=>{if(n)return;let E;try{E=t.fn()}catch(I){E=Promise.reject(I)}Promise.resolve(E).then(p).catch(I=>{var b,C;if(n)return;const v=(b=t.retry)!=null?b:3,_=(C=t.retryDelay)!=null?C:yE,g=typeof _=="function"?_(r,I):_,l=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,I);if(e||!l){y(I);return}r++,t.onFail==null||t.onFail(r,I),fp(g).then(()=>{if(f())return w()}).then(()=>{e?y(I):S()})})};return fa(t.networkMode)?S():w().then(S),{promise:a,cancel:c,continue:()=>(i==null?void 0:i())?a:Promise.resolve(),cancelRetry:u,continueRetry:h}}const fl=console;function vE(){let t=[],e=0,r=h=>{h()},n=h=>{h()};const i=h=>{let f;e++;try{f=h()}finally{e--,e||a()}return f},s=h=>{e?t.push(h):pp(()=>{r(h)})},o=h=>(...f)=>{s(()=>{h(...f)})},a=()=>{const h=t;t=[],h.length&&pp(()=>{n(()=>{h.forEach(f=>{r(f)})})})};return{batch:i,batchCalls:o,schedule:s,setNotifyFunction:h=>{r=h},setBatchNotifyFunction:h=>{n=h}}}const Zt=vE();class yp{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ll(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(Zs?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class wE extends yp{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||fl,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||bE(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,r){const n=dl(this.state.data,e,this.options);return this.dispatch({data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){this.dispatch({type:"setState",state:e,setStateOptions:r})}cancel(e){var r;const n=this.promise;return(r=this.retryer)==null||r.cancel(e),n?n.then(Br).catch(Br):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!sp(this.state.dataUpdatedAt,e)}onFocus(){var e;const r=this.observers.find(n=>n.shouldFetchOnWindowFocus());r&&r.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const r=this.observers.find(n=>n.shouldFetchOnReconnect());r&&r.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.indexOf(e)===-1&&(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.indexOf(e)!==-1&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,r){var n,i;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&r!=null&&r.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var s;return(s=this.retryer)==null||s.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const y=this.observers.find(w=>w.options.queryFn);y&&this.setOptions(y.options)}Array.isArray(this.options.queryKey)||process.env.NODE_ENV!=="production"&&this.logger.error("As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']");const o=pE(),a={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},c=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>{if(o)return this.abortSignalConsumed=!0,o.signal}})};c(a);const u=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(a)):Promise.reject("Missing queryFn"),h={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:u};if(c(h),(n=this.options.behavior)==null||n.onFetch(h),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((i=h.fetchOptions)==null?void 0:i.meta)){var f;this.dispatch({type:"fetch",meta:(f=h.fetchOptions)==null?void 0:f.meta})}const p=y=>{if(pa(y)&&y.silent||this.dispatch({type:"error",error:y}),!pa(y)){var w,S,E,I;(w=(S=this.cache.config).onError)==null||w.call(S,y,this),(E=(I=this.cache.config).onSettled)==null||E.call(I,this.state.data,y,this),process.env.NODE_ENV!=="production"&&this.logger.error(y)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=mp({fn:h.fetchFn,abort:o==null?void 0:o.abort.bind(o),onSuccess:y=>{var w,S,E,I;if(typeof y>"u"){process.env.NODE_ENV!=="production"&&this.logger.error("Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: "+this.queryHash),p(new Error(this.queryHash+" data is undefined"));return}this.setData(y),(w=(S=this.cache.config).onSuccess)==null||w.call(S,y,this),(E=(I=this.cache.config).onSettled)==null||E.call(I,y,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:p,onFail:(y,w)=>{this.dispatch({type:"failed",failureCount:y,error:w})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const r=n=>{var i,s;switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(i=e.meta)!=null?i:null,fetchStatus:fa(this.options.networkMode)?"fetching":"paused",...!n.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:(s=e.dataUpdatedAt)!=null?s:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return pa(o)&&o.revert&&this.revertState?{...this.revertState}:{...n,error:o,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),Zt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function bE(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=typeof e<"u",n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"loading",fetchStatus:"idle"}}class _E extends Ks{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,r,n){var i;const s=r.queryKey,o=(i=r.queryHash)!=null?i:ul(s,r);let a=this.get(o);return a||(a=new wE({cache:this,logger:e.getLogger(),queryKey:s,queryHash:o,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const r=this.queriesMap[e.queryHash];r&&(e.destroy(),this.queries=this.queries.filter(n=>n!==e),r===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){Zt.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,r){const[n]=Fn(e,r);return typeof n.exact>"u"&&(n.exact=!0),this.queries.find(i=>op(n,i))}findAll(e,r){const[n]=Fn(e,r);return Object.keys(n).length>0?this.queries.filter(i=>op(n,i)):this.queries}notify(e){Zt.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Zt.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){Zt.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class EE extends yp{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||fl,this.observers=[],this.state=e.state||SE(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.indexOf(e)===-1&&(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(r=>r!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,r;return(e=(r=this.retryer)==null?void 0:r.continue())!=null?e:this.execute()}async execute(){const e=()=>{var l;return this.retryer=mp({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(m,P)=>{this.dispatch({type:"failed",failureCount:m,error:P})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(l=this.options.retry)!=null?l:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},r=this.state.status==="loading";try{var n,i,s,o,a,c,u,h;if(!r){var f,p,y,w;this.dispatch({type:"loading",variables:this.options.variables}),await((f=(p=this.mutationCache.config).onMutate)==null?void 0:f.call(p,this.state.variables,this));const m=await((y=(w=this.options).onMutate)==null?void 0:y.call(w,this.state.variables));m!==this.state.context&&this.dispatch({type:"loading",context:m,variables:this.state.variables})}const l=await e();return await((n=(i=this.mutationCache.config).onSuccess)==null?void 0:n.call(i,l,this.state.variables,this.state.context,this)),await((s=(o=this.options).onSuccess)==null?void 0:s.call(o,l,this.state.variables,this.state.context)),await((a=(c=this.mutationCache.config).onSettled)==null?void 0:a.call(c,l,null,this.state.variables,this.state.context,this)),await((u=(h=this.options).onSettled)==null?void 0:u.call(h,l,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:l}),l}catch(l){try{var S,E,I,b,C,v,_,g;throw await((S=(E=this.mutationCache.config).onError)==null?void 0:S.call(E,l,this.state.variables,this.state.context,this)),process.env.NODE_ENV!=="production"&&this.logger.error(l),await((I=(b=this.options).onError)==null?void 0:I.call(b,l,this.state.variables,this.state.context)),await((C=(v=this.mutationCache.config).onSettled)==null?void 0:C.call(v,void 0,l,this.state.variables,this.state.context,this)),await((_=(g=this.options).onSettled)==null?void 0:_.call(g,void 0,l,this.state.variables,this.state.context)),l}finally{this.dispatch({type:"error",error:l})}}}dispatch(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"loading":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!fa(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...n,...e.state}}};this.state=r(this.state),Zt.batch(()=>{this.observers.forEach(n=>{n.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function SE(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class xE extends Ks{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,r,n){const i=new EE({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(r),state:n,defaultOptions:r.mutationKey?e.getMutationDefaults(r.mutationKey):void 0});return this.add(i),i}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(r=>r!==e),this.notify({type:"removed",mutation:e})}clear(){Zt.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(r=>ap(e,r))}findAll(e){return this.mutations.filter(r=>ap(e,r))}notify(e){Zt.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const r=this.mutations.filter(n=>n.state.isPaused);return Zt.batch(()=>r.reduce((n,i)=>n.then(()=>i.continue().catch(Br)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function CE(){return{onFetch:t=>{t.fetchFn=()=>{var e,r,n,i,s,o;const a=(e=t.fetchOptions)==null||(r=e.meta)==null?void 0:r.refetchPage,c=(n=t.fetchOptions)==null||(i=n.meta)==null?void 0:i.fetchMore,u=c==null?void 0:c.pageParam,h=(c==null?void 0:c.direction)==="forward",f=(c==null?void 0:c.direction)==="backward",p=((s=t.state.data)==null?void 0:s.pages)||[],y=((o=t.state.data)==null?void 0:o.pageParams)||[];let w=y,S=!1;const E=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>{var l;if((l=t.signal)!=null&&l.aborted)S=!0;else{var m;(m=t.signal)==null||m.addEventListener("abort",()=>{S=!0})}return t.signal}})},I=t.options.queryFn||(()=>Promise.reject("Missing queryFn")),b=(g,l,m,P)=>(w=P?[l,...w]:[...w,l],P?[m,...g]:[...g,m]),C=(g,l,m,P)=>{if(S)return Promise.reject("Cancelled");if(typeof m>"u"&&!l&&g.length)return Promise.resolve(g);const $={queryKey:t.queryKey,pageParam:m,meta:t.options.meta};E($);const z=I($);return Promise.resolve(z).then(G=>b(g,m,G,P))};let v;if(!p.length)v=C([]);else if(h){const g=typeof u<"u",l=g?u:vp(t.options,p);v=C(p,g,l)}else if(f){const g=typeof u<"u",l=g?u:OE(t.options,p);v=C(p,g,l,!0)}else{w=[];const g=typeof t.options.getNextPageParam>"u";v=(a&&p[0]?a(p[0],0,p):!0)?C([],g,y[0]):Promise.resolve(b([],y[0],p[0]));for(let m=1;m<p.length;m++)v=v.then(P=>{if(a&&p[m]?a(p[m],m,p):!0){const z=g?y[m]:vp(t.options,P);return C(P,g,z)}return Promise.resolve(b(P,y[m],p[m]))})}return v.then(g=>({pages:g,pageParams:w}))}}}}function vp(t,e){return t.getNextPageParam==null?void 0:t.getNextPageParam(e[e.length-1],e)}function OE(t,e){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(e[0],e)}class IE{constructor(e={}){this.queryCache=e.queryCache||new _E,this.mutationCache=e.mutationCache||new xE,this.logger=e.logger||fl,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0,process.env.NODE_ENV!=="production"&&e.logger&&this.logger.error("Passing a custom logger has been deprecated and will be removed in the next major version.")}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=ha.subscribe(()=>{ha.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=da.subscribe(()=>{da.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,r;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(r=this.unsubscribeOnline)==null||r.call(this),this.unsubscribeOnline=void 0)}isFetching(e,r){const[n]=Fn(e,r);return n.fetchStatus="fetching",this.queryCache.findAll(n).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,r){var n;return(n=this.queryCache.find(e,r))==null?void 0:n.state.data}ensureQueryData(e,r,n){const i=Gs(e,r,n),s=this.getQueryData(i.queryKey);return s?Promise.resolve(s):this.fetchQuery(i)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:r,state:n})=>{const i=n.data;return[r,i]})}setQueryData(e,r,n){const i=this.queryCache.find(e),s=i==null?void 0:i.state.data,o=fE(r,s);if(typeof o>"u")return;const a=Gs(e),c=this.defaultQueryOptions(a);return this.queryCache.build(this,c).setData(o,{...n,manual:!0})}setQueriesData(e,r,n){return Zt.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,r,n)]))}getQueryState(e,r){var n;return(n=this.queryCache.find(e,r))==null?void 0:n.state}removeQueries(e,r){const[n]=Fn(e,r),i=this.queryCache;Zt.batch(()=>{i.findAll(n).forEach(s=>{i.remove(s)})})}resetQueries(e,r,n){const[i,s]=Fn(e,r,n),o=this.queryCache,a={type:"active",...i};return Zt.batch(()=>(o.findAll(i).forEach(c=>{c.reset()}),this.refetchQueries(a,s)))}cancelQueries(e,r,n){const[i,s={}]=Fn(e,r,n);typeof s.revert>"u"&&(s.revert=!0);const o=Zt.batch(()=>this.queryCache.findAll(i).map(a=>a.cancel(s)));return Promise.all(o).then(Br).catch(Br)}invalidateQueries(e,r,n){const[i,s]=Fn(e,r,n);return Zt.batch(()=>{var o,a;if(this.queryCache.findAll(i).forEach(u=>{u.invalidate()}),i.refetchType==="none")return Promise.resolve();const c={...i,type:(o=(a=i.refetchType)!=null?a:i.type)!=null?o:"active"};return this.refetchQueries(c,s)})}refetchQueries(e,r,n){const[i,s]=Fn(e,r,n),o=Zt.batch(()=>this.queryCache.findAll(i).filter(c=>!c.isDisabled()).map(c=>{var u;return c.fetch(void 0,{...s,cancelRefetch:(u=s==null?void 0:s.cancelRefetch)!=null?u:!0,meta:{refetchPage:i.refetchPage}})}));let a=Promise.all(o).then(Br);return s!=null&&s.throwOnError||(a=a.catch(Br)),a}fetchQuery(e,r,n){const i=Gs(e,r,n),s=this.defaultQueryOptions(i);typeof s.retry>"u"&&(s.retry=!1);const o=this.queryCache.build(this,s);return o.isStaleByTime(s.staleTime)?o.fetch(s):Promise.resolve(o.state.data)}prefetchQuery(e,r,n){return this.fetchQuery(e,r,n).then(Br).catch(Br)}fetchInfiniteQuery(e,r,n){const i=Gs(e,r,n);return i.behavior=CE(),this.fetchQuery(i)}prefetchInfiniteQuery(e,r,n){return this.fetchInfiniteQuery(e,r,n).then(Br).catch(Br)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,r){const n=this.queryDefaults.find(i=>fi(e)===fi(i.queryKey));n?n.defaultOptions=r:this.queryDefaults.push({queryKey:e,defaultOptions:r})}getQueryDefaults(e){if(!e)return;const r=this.queryDefaults.find(n=>ji(e,n.queryKey));return process.env.NODE_ENV!=="production"&&this.queryDefaults.filter(i=>ji(e,i.queryKey)).length>1&&this.logger.error("[QueryClient] Several query defaults match with key '"+JSON.stringify(e)+"'. The first matching query defaults are used. Please check how query defaults are registered. Order does matter here. cf. https://react-query.tanstack.com/reference/QueryClient#queryclientsetquerydefaults."),r==null?void 0:r.defaultOptions}setMutationDefaults(e,r){const n=this.mutationDefaults.find(i=>fi(e)===fi(i.mutationKey));n?n.defaultOptions=r:this.mutationDefaults.push({mutationKey:e,defaultOptions:r})}getMutationDefaults(e){if(!e)return;const r=this.mutationDefaults.find(n=>ji(e,n.mutationKey));return process.env.NODE_ENV!=="production"&&this.mutationDefaults.filter(i=>ji(e,i.mutationKey)).length>1&&this.logger.error("[QueryClient] Several mutation defaults match with key '"+JSON.stringify(e)+"'. The first matching mutation defaults are used. Please check how mutation defaults are registered. Order does matter here. cf. https://react-query.tanstack.com/reference/QueryClient#queryclientsetmutationdefaults."),r==null?void 0:r.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const r={...this.defaultOptions.queries,...this.getQueryDefaults(e==null?void 0:e.queryKey),...e,_defaulted:!0};return!r.queryHash&&r.queryKey&&(r.queryHash=ul(r.queryKey,r)),typeof r.refetchOnReconnect>"u"&&(r.refetchOnReconnect=r.networkMode!=="always"),typeof r.useErrorBoundary>"u"&&(r.useErrorBoundary=!!r.suspense),r}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e==null?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class DE extends Ks{constructor(e,r){super(),this.client=e,this.options=r,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(r)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.length===1&&(this.currentQuery.addObserver(this),wp(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.listeners.length||this.destroy()}shouldFetchOnReconnect(){return pl(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return pl(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=[],this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,r){const n=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),process.env.NODE_ENV!=="production"&&typeof(e==null?void 0:e.isDataEqual)<"u"&&this.client.getLogger().error("The isDataEqual option has been deprecated and will be removed in the next major version. You can achieve the same functionality by passing a function as the structuralSharing option"),up(n,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();const s=this.hasListeners();s&&bp(this.currentQuery,i,this.options,n)&&this.executeFetch(),this.updateResult(r),s&&(this.currentQuery!==i||this.options.enabled!==n.enabled||this.options.staleTime!==n.staleTime)&&this.updateStaleTimeout();const o=this.computeRefetchInterval();s&&(this.currentQuery!==i||this.options.enabled!==n.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)}getOptimisticResult(e){const r=this.client.getQueryCache().build(this.client,e);return this.createResult(r,e)}getCurrentResult(){return this.currentResult}trackResult(e){const r={};return Object.keys(e).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(n),e[n])})}),r}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...r}={}){return this.fetch({...r,meta:{refetchPage:e}})}fetchOptimistic(e){const r=this.client.defaultQueryOptions(e),n=this.client.getQueryCache().build(this.client,r);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,r))}fetch(e){var r;return this.executeFetch({...e,cancelRefetch:(r=e.cancelRefetch)!=null?r:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let r=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(Br)),r}updateStaleTimeout(){if(this.clearStaleTimeout(),Zs||this.currentResult.isStale||!ll(this.options.staleTime))return;const r=sp(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},r)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(Zs||this.options.enabled===!1||!ll(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||ha.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,r){const n=this.currentQuery,i=this.options,s=this.currentResult,o=this.currentResultState,a=this.currentResultOptions,c=e!==n,u=c?e.state:this.currentQueryInitialState,h=c?this.currentResult:this.previousQueryResult,{state:f}=e;let{dataUpdatedAt:p,error:y,errorUpdatedAt:w,fetchStatus:S,status:E}=f,I=!1,b=!1,C;if(r._optimisticResults){const m=this.hasListeners(),P=!m&&wp(e,r),$=m&&bp(e,n,r,i);(P||$)&&(S=fa(e.options.networkMode)?"fetching":"paused",p||(E="loading")),r._optimisticResults==="isRestoring"&&(S="idle")}if(r.keepPreviousData&&!f.dataUpdatedAt&&h!=null&&h.isSuccess&&E!=="error")C=h.data,p=h.dataUpdatedAt,E=h.status,I=!0;else if(r.select&&typeof f.data<"u")if(s&&f.data===(o==null?void 0:o.data)&&r.select===this.selectFn)C=this.selectResult;else try{this.selectFn=r.select,C=r.select(f.data),C=dl(s==null?void 0:s.data,C,r),this.selectResult=C,this.selectError=null}catch(m){process.env.NODE_ENV!=="production"&&this.client.getLogger().error(m),this.selectError=m}else C=f.data;if(typeof r.placeholderData<"u"&&typeof C>"u"&&E==="loading"){let m;if(s!=null&&s.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData))m=s.data;else if(m=typeof r.placeholderData=="function"?r.placeholderData():r.placeholderData,r.select&&typeof m<"u")try{m=r.select(m),this.selectError=null}catch(P){process.env.NODE_ENV!=="production"&&this.client.getLogger().error(P),this.selectError=P}typeof m<"u"&&(E="success",C=dl(s==null?void 0:s.data,m,r),b=!0)}this.selectError&&(y=this.selectError,C=this.selectResult,w=Date.now(),E="error");const v=S==="fetching",_=E==="loading",g=E==="error";return{status:E,fetchStatus:S,isLoading:_,isSuccess:E==="success",isError:g,isInitialLoading:_&&v,data:C,dataUpdatedAt:p,error:y,errorUpdatedAt:w,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:v,isRefetching:v&&!_,isLoadingError:g&&f.dataUpdatedAt===0,isPaused:S==="paused",isPlaceholderData:b,isPreviousData:I,isRefetchError:g&&f.dataUpdatedAt!==0,isStale:gl(e,r),refetch:this.refetch,remove:this.remove}}updateResult(e){const r=this.currentResult,n=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,up(n,r))return;this.currentResult=n;const i={cache:!0},s=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options;if(o==="all"||!o&&!this.trackedProps.size)return!0;const a=new Set(o??this.trackedProps);return this.options.useErrorBoundary&&a.add("error"),Object.keys(this.currentResult).some(c=>{const u=c;return this.currentResult[u]!==r[u]&&a.has(u)})};(e==null?void 0:e.listeners)!==!1&&s()&&(i.listeners=!0),this.notify({...i,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const r=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const r={};e.type==="success"?r.onSuccess=!e.manual:e.type==="error"&&!pa(e.error)&&(r.onError=!0),this.updateResult(r),this.hasListeners()&&this.updateTimers()}notify(e){Zt.batch(()=>{if(e.onSuccess){var r,n,i,s;(r=(n=this.options).onSuccess)==null||r.call(n,this.currentResult.data),(i=(s=this.options).onSettled)==null||i.call(s,this.currentResult.data,null)}else if(e.onError){var o,a,c,u;(o=(a=this.options).onError)==null||o.call(a,this.currentResult.error),(c=(u=this.options).onSettled)==null||c.call(u,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(h=>{h(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function AE(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function wp(t,e){return AE(t,e)||t.state.dataUpdatedAt>0&&pl(t,e,e.refetchOnMount)}function pl(t,e,r){if(e.enabled!==!1){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&gl(t,e)}return!1}function bp(t,e,r,n){return r.enabled!==!1&&(t!==e||n.enabled===!1)&&(!r.suspense||t.state.status!=="error")&&gl(t,r)}function gl(t,e){return t.isStaleByTime(e.staleTime)}var TE=al();const RE=TE.useSyncExternalStore,_p=gr.createContext(void 0),Ep=gr.createContext(!1);function Sp(t,e){return t||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=_p),window.ReactQueryClientContext):_p)}const PE=({context:t}={})=>{const e=gr.useContext(Sp(t,gr.useContext(Ep)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},$E=({client:t,children:e,context:r,contextSharing:n=!1})=>{gr.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),process.env.NODE_ENV!=="production"&&n&&t.getLogger().error("The contextSharing option has been deprecated and will be removed in the next major version");const i=Sp(r,n);return gr.createElement(Ep.Provider,{value:!r&&n},gr.createElement(i.Provider,{value:t},e))},xp=gr.createContext(!1),NE=()=>gr.useContext(xp);xp.Provider;function LE(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const ME=gr.createContext(LE()),kE=()=>gr.useContext(ME);function FE(t,e){return typeof t=="function"?t(...e):!!t}const UE=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},jE=t=>{gr.useEffect(()=>{t.clearReset()},[t])},BE=({result:t,errorResetBoundary:e,useErrorBoundary:r,query:n})=>t.isError&&!e.isReset()&&!t.isFetching&&FE(r,[t.error,n]),qE=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},zE=(t,e)=>t.isLoading&&t.isFetching&&!e,WE=(t,e,r)=>(t==null?void 0:t.suspense)&&zE(e,r),VE=(t,e,r)=>e.fetchOptimistic(t).then(({data:n})=>{t.onSuccess==null||t.onSuccess(n),t.onSettled==null||t.onSettled(n,null)}).catch(n=>{r.clearReset(),t.onError==null||t.onError(n),t.onSettled==null||t.onSettled(void 0,n)});function HE(t,e){const r=PE({context:t.context}),n=NE(),i=kE(),s=r.defaultQueryOptions(t);s._optimisticResults=n?"isRestoring":"optimistic",s.onError&&(s.onError=Zt.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=Zt.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=Zt.batchCalls(s.onSettled)),qE(s),UE(s,i),jE(i);const[o]=gr.useState(()=>new e(r,s)),a=o.getOptimisticResult(s);if(RE(gr.useCallback(c=>n?()=>{}:o.subscribe(Zt.batchCalls(c)),[o,n]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),gr.useEffect(()=>{o.setOptions(s,{listeners:!1})},[s,o]),WE(s,a,n))throw VE(s,o,i);if(BE({result:a,errorResetBoundary:i,useErrorBoundary:s.useErrorBoundary,query:o.getCurrentQuery()}))throw a.error;return s.notifyOnChangeProps?a:o.trackResult(a)}function KE(t,e,r){const n=Gs(t,e,r);return HE(n,DE)}function ml(){const[t,e]=mt.useState(void 0),[r,n]=mt.useState(void 0),[i,s]=mt.useState(!1);return{data:t,error:r,loading:i,setData:e,setError:n,setLoading:s}}async function Cp(t,e){const n=await(await St()).request(t);return n===void 0&&e?El.getQueryData(e):n}function ga({queryKey:t,wcParams:e,enabled:r,queryOptions:n}){return KE(t,()=>Cp(e,t),n??{staleTime:7500,refetchInterval:5e3,refetchIntervalInBackground:!0,enabled:r})}function Bi(t){const{data:e,error:r,loading:n,setData:i,setError:s,setLoading:o}=ml();async function a(c){try{o(!0),s(void 0);const u=await Cp(t??c);return i(u),u}catch(u){throw s(u),u}finally{o(!1)}}return{data:e,error:r,loading:n,request:a}}const yl=t=>t.length<5*2?t:`${t.slice(0,5+5)}...${t.slice(t.length-5,t.length)}`,ZE=()=>{const t=jr(),e="aleo:1",[r,n]=kn(u=>[u.account,u.setAccount]),{request:i,data:s,error:o,loading:a}=Bi({topic:t==null?void 0:t.topic,chainId:e,request:{jsonrpc:"2.0",method:"getSelectedAccount"}});Ui(({params:u,topic:h})=>{if(u.event.name==="accountSelected"&&t&&t.topic===h){const p=u.event.address,y=u.chainId.split(":")[0],w=u.chainId.split(":")[1];n({network:y,chainId:w,address:p,shortenedAddress:yl(p)})}}),rl(({params:u,topic:h})=>{const f=u.event.address,p=u.chainId.split(":")[0],y=u.chainId.split(":")[1];n({network:p,chainId:y,address:f,shortenedAddress:yl(f)})}),tl(({params:u,topic:h})=>{n(void 0)}),mt.useEffect(()=>{t&&!a&&i()},[t==null?void 0:t.topic]),mt.useEffect(()=>{if(s){const u=s,h=u==null?void 0:u.account;h&&n(h)}},[s]);const c=o?o.message:s&&s.error;return{account:r,error:c,loading:a}},GE=({address:t,multisig:e})=>{const r=jr(),[n]=kn(p=>[p.account]),i="aleo:1",{refetch:s,data:o,error:a,isLoading:c}=ga({queryKey:["useBalance",t??(n==null?void 0:n.address)??"",e],enabled:!!r&&!!n&&(e?!!t:!0),wcParams:{topic:r==null?void 0:r.topic,chainId:i,request:{jsonrpc:"2.0",method:"getBalance",params:{assetId:void 0,address:t}}}});Ui(({params:p,topic:y})=>{const w=p.event.name,S=p.event.address;["accountSelected","selectedAccountSynced","sharedAccountSynced"].includes(w)&&r&&r.topic===y&&S===(n==null?void 0:n.address)&&!c&&s()}),mt.useEffect(()=>{r&&!c&&s()},[r==null?void 0:r.topic]);const u=a?a.message:o&&o.error,h=o;return{balances:h==null?void 0:h.balances,error:u,loading:c}};function QE(){const{data:t,error:e,loading:r,setData:n,setError:i,setLoading:s}=ml();async function o(){try{s(!0),i(void 0);const c=await(await St()).connect({requiredNamespaces:{aleo:{methods:Qo,chains:Ps,events:Yo}}});return n(c),ci.emit("session_change"),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE"),c}catch(a){throw i(a),a}finally{s(!1)}}return{data:t,error:e,loading:r,connect:o}}const YE=()=>{const t=jr(),{request:e,data:r,error:n,loading:i}=Bi({topic:(t==null?void 0:t.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"createSharedState",params:{}}}),s=n?n.message:r&&r.error,o=r;return{createSharedState:()=>{e()},data:o==null?void 0:o.data,loading:i,error:s}};var vl={exports:{}},wl,Op;function JE(){if(Op)return wl;Op=1;var t=1e3,e=t*60,r=e*60,n=r*24,i=n*7,s=n*365.25;wl=function(h,f){f=f||{};var p=typeof h;if(p==="string"&&h.length>0)return o(h);if(p==="number"&&isFinite(h))return f.long?c(h):a(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))};function o(h){if(h=String(h),!(h.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(f){var p=parseFloat(f[1]),y=(f[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return p*s;case"weeks":case"week":case"w":return p*i;case"days":case"day":case"d":return p*n;case"hours":case"hour":case"hrs":case"hr":case"h":return p*r;case"minutes":case"minute":case"mins":case"min":case"m":return p*e;case"seconds":case"second":case"secs":case"sec":case"s":return p*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function a(h){var f=Math.abs(h);return f>=n?Math.round(h/n)+"d":f>=r?Math.round(h/r)+"h":f>=e?Math.round(h/e)+"m":f>=t?Math.round(h/t)+"s":h+"ms"}function c(h){var f=Math.abs(h);return f>=n?u(h,f,n,"day"):f>=r?u(h,f,r,"hour"):f>=e?u(h,f,e,"minute"):f>=t?u(h,f,t,"second"):h+" ms"}function u(h,f,p,y){var w=f>=p*1.5;return Math.round(h/p)+" "+y+(w?"s":"")}return wl}function XE(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=JE(),r.destroy=u,Object.keys(t).forEach(h=>{r[h]=t[h]}),r.names=[],r.skips=[],r.formatters={};function e(h){let f=0;for(let p=0;p<h.length;p++)f=(f<<5)-f+h.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(h){let f,p=null,y,w;function S(...E){if(!S.enabled)return;const I=S,b=Number(new Date),C=b-(f||b);I.diff=C,I.prev=f,I.curr=b,f=b,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let v=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(g,l)=>{if(g==="%%")return"%";v++;const m=r.formatters[l];if(typeof m=="function"){const P=E[v];g=m.call(I,P),E.splice(v,1),v--}return g}),r.formatArgs.call(I,E),(I.log||r.log).apply(I,E)}return S.namespace=h,S.useColors=r.useColors(),S.color=r.selectColor(h),S.extend=n,S.destroy=r.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(y!==r.namespaces&&(y=r.namespaces,w=r.enabled(h)),w),set:E=>{p=E}}),typeof r.init=="function"&&r.init(S),S}function n(h,f){const p=r(this.namespace+(typeof f>"u"?":":f)+h);return p.log=this.log,p}function i(h){r.save(h),r.namespaces=h,r.names=[],r.skips=[];let f;const p=(typeof h=="string"?h:"").split(/[\s,]+/),y=p.length;for(f=0;f<y;f++)p[f]&&(h=p[f].replace(/\*/g,".*?"),h[0]==="-"?r.skips.push(new RegExp("^"+h.slice(1)+"$")):r.names.push(new RegExp("^"+h+"$")))}function s(){const h=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),h}function o(h){if(h[h.length-1]==="*")return!0;let f,p;for(f=0,p=r.skips.length;f<p;f++)if(r.skips[f].test(h))return!1;for(f=0,p=r.names.length;f<p;f++)if(r.names[f].test(h))return!0;return!1}function a(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}function c(h){return h instanceof Error?h.stack||h.message:h}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var e5=XE;(function(t,e){e.formatArgs=n,e.save=i,e.load=s,e.useColors=r,e.storage=o(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let h=0,f=0;c[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(h++,p==="%c"&&(f=h))}),c.splice(f,0,u)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function s(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function o(){try{return localStorage}catch{}}t.exports=e5(e);const{formatters:a}=t.exports;a.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(vl,vl.exports);var t5=vl.exports;const bl=cs(t5)("wallet:sdk");bl.enabled=!0;const r5=t=>{bl("useDecrypt",t);const e=jr(),{request:r,data:n,error:i,loading:s}=Bi({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"decrypt",params:{ciphertexts:t}}}),o=i?i.message:n&&n.error,a=n;return{decrypt:()=>{t&&r()},plaintexts:a==null?void 0:a.plaintexts,loading:s,error:o}};function n5(){const t=jr(),{error:e,loading:r,setError:n,setLoading:i}=ml();async function s(){try{i(!0),n(void 0),await(await St()).disconnect({topic:t==null?void 0:t.topic,reason:Kt("USER_DISCONNECTED")}),ci.emit("session_change"),kn.setState({account:void 0})}catch(o){throw n(o),o}finally{i(!1)}}return{error:e,loading:r,disconnect:s}}const i5=({id:t,address:e,multisig:r=!1})=>{const n=jr(),[i]=kn(w=>[w.account]),{refetch:s,data:o,error:a,isLoading:c}=ga({queryKey:["useEvent",e??(i==null?void 0:i.address)??"",t??""],enabled:!!t&&!!n&&!!i&&(r?!!e:!0),wcParams:{topic:(n==null?void 0:n.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getEvent",params:{id:t,address:e}}}});Ui(({params:w,topic:S})=>{const E=w.event.name,I=w.event.address;E==="selectedAccountSynced"&&n&&n.topic===S&&I===(i==null?void 0:i.address)&&!c&&s()});const u=!!n&&!!i;mt.useEffect(()=>{u&&!c&&s()},[u]);const h=()=>{!!n&&!!i&&!c&&s()},f=a?a.message:o&&o.error,p=o,y=p==null?void 0:p.event;return{fetchEvent:h,event:y,error:f,loading:c}},s5=({filter:t,page:e})=>{const r=jr(),[n]=kn(w=>[w.account]);(t==null?void 0:t.programId)===""&&(t.programId=void 0);const{refetch:i,data:s,error:o,isLoading:a}=ga({queryKey:["useEvents",(n==null?void 0:n.address)??"",t,e],enabled:!!r&&!!n,wcParams:{topic:(r==null?void 0:r.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getEvents",params:{filter:t,page:e}}}});Ui(({id:w,params:S,topic:E})=>{const I=S.event.name,b=S.event.address;I==="selectedAccountSynced"&&r&&r.topic===E&&b===(n==null?void 0:n.address)&&!a&&i()});const c=!!r&&!!n;mt.useEffect(()=>{c&&!a&&i()},[c]);const u=()=>{!!r&&!!n&&!a&&i()},h=o?o.message:s&&s.error,f=s,p=f==null?void 0:f.events,y=(f==null?void 0:f.pageCount)??0;return{fetchPage:u,events:p,error:h,loading:a,page:e,pageCount:y}},o5=t=>{const e=jr(),{request:r,data:n,error:i,loading:s}=Bi({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"importSharedState",params:{seed:t}}}),o=i?i.message:n&&n.error,a=n;return{importSharedState:()=>{r()},data:a==null?void 0:a.data,loading:s,error:o}},a5=t=>{try{return JSON.stringify(t,null,2).replaceAll('"',"")??""}catch{return""}},c5=({address:t,multisig:e=!1,filter:r,page:n})=>{const i=jr(),[s,o]=kn(I=>[I.chainId,I.account]),{refetch:a,data:c,error:u,isLoading:h}=ga({queryKey:["useRecords",t??(o==null?void 0:o.address)??"",r,n],enabled:(e?!!t:!0)&&!!i&&!!o,wcParams:{topic:i==null?void 0:i.topic,chainId:s,request:{jsonrpc:"2.0",method:"getRecords",params:{address:t,filter:r,page:n}}}}),f=!!i&&!!o&&(e?!!t:!0);Ui(({params:I,topic:b})=>{const C=I.event.name,v=I.event.address;(C==="selectedAccountSynced"||C==="accountSelected"||C==="sharedAccountSynced"&&v===t)&&f&&i.topic===b&&a()}),mt.useEffect(()=>{f&&!h&&a()},[f]);const p=()=>{f&&!h&&a()},y=u?u.message:c&&c.error,w=c,S=w==null?void 0:w.records,E=(w==null?void 0:w.pageCount)??0;return{fetchPage:p,records:S,error:y,loading:h,page:n,pageCount:E}},l5=(t,e)=>{const r=jr(),{request:n,data:i,error:s,loading:o}=Bi({topic:(r==null?void 0:r.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"requestSignature",params:{message:t,address:e}}}),a=s?s.message:i&&i.error;return{requestSignature:()=>{n()},response:i,loading:o,error:a}},u5=t=>{const e=jr(),r=t==null?void 0:t.inputs.map(h=>typeof h=="string"?h:h.plaintext),{request:n,data:i,error:s,loading:o}=Bi({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"requestCreateEvent",params:{...t,inputs:r}}}),a=s?s.message:i&&i.error,c=i;return{createEvent:()=>{t&&(bl("useCreateEvent requesting...",t),n())},eventId:c==null?void 0:c.eventId,loading:o,error:a}},h5=async()=>{const t=await St(),e=await t.getSession(),r="aleo:1";if(!e||!r||!t)return{error:"no session, chainId, or connection"};try{const n=await t.request({topic:e==null?void 0:e.topic,chainId:r,request:{jsonrpc:"2.0",method:"getSelectedAccount"}});return kn.setState({account:n.account}),n}catch(n){const i=n.message;return console.error("getAccount error",i),{error:i}}},d5=async({address:t})=>{const e=await St(),r=await e.getSession(),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};try{return await e.request({topic:r==null?void 0:r.topic,chainId:n,request:{jsonrpc:"2.0",method:"getBalance",params:{assetId:void 0,address:t}}})}catch(i){const s=i.message;return console.error("getBalance error",s),{error:s}}},f5=async()=>{const t=await St();if(!t)throw new Error("call setConnection() first!");try{const e=await t.connect({requiredNamespaces:{aleo:{methods:Qo,chains:Ps,events:Yo}}});return ci.emit("session_change"),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE"),e}catch(e){console.error("connect error",e.message)}},p5=async t=>{const e=await St(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};const i=t==null?void 0:t.inputs.map(s=>typeof s=="string"?s:s.plaintext);try{return await e.request({topic:r.topic,chainId:n,request:{jsonrpc:"2.0",method:"requestCreateEvent",params:{...t,inputs:i}}})}catch(s){const o=s.message;return console.error("createEvent error",o),{error:o}}},g5=async()=>{const t=await St(),e=await(t==null?void 0:t.getSession()),r="aleo:1";if(!e||!r||!t)return{error:"no session, chainId, or connection"};try{return await t.request({topic:e.topic,chainId:r,request:{jsonrpc:"2.0",method:"createSharedState",params:{}}})}catch(n){const i=n.message;return console.error("createSharedState error",i),{error:i}}},m5=async t=>{const e=await St(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};try{return await e.request({topic:r.topic,chainId:n,request:{jsonrpc:"2.0",method:"decrypt",params:{ciphertexts:t}}})}catch(i){return console.error("decrypt error",i.message),{error:i.message}}},y5=async()=>{const t=await St(),e=await(t==null?void 0:t.getSession());if(!e||!t)return{error:"no session, or connection"};try{return await t.disconnect({reason:Kt("USER_DISCONNECTED"),topic:e.topic}),ci.emit("session_change"),kn.setState({account:void 0}),{}}catch(r){const n=r.message;return console.error("error disconnecting",n),{error:n}}},v5=async({id:t,address:e})=>{const r=await St(),n=await(r==null?void 0:r.getSession()),i="aleo:1";if(!n||!i||!r)return{event:void 0,error:"no session, chainId, or connection"};const s=async()=>await r.request({topic:(n==null?void 0:n.topic)??"",chainId:i,request:{jsonrpc:"2.0",method:"getEvent",params:{id:t,address:e}}});try{return await s()}catch(o){const a=o.message;return console.error("getEvents error",a),{error:a}}},w5=async t=>{const e=await St(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{events:void 0,error:"no session, chainId, or connection"};(t==null?void 0:t.programId)===""&&(t.programId=void 0);const i=async(s=0)=>await e.request({topic:(r==null?void 0:r.topic)??"",chainId:n,request:{jsonrpc:"2.0",method:"getEvents",params:{filter:t,page:s}}});try{return await i()}catch(s){const o=s.message;return console.error("getEvents error",o),{error:o}}},b5=async t=>{const e=await St(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};try{return await e.request({topic:(r==null?void 0:r.topic)??"",chainId:n,request:{jsonrpc:"2.0",method:"importSharedState",params:{seed:t}}})}catch(i){const s=i.message;return console.error("importSharedState error",s),{error:s}}},_5=async({address:t,filter:e,page:r=0})=>{const n=await St(),i=await(n==null?void 0:n.getSession()),s="aleo:1";if(!i||!s||!n)return{error:"no session, chainId, or connection"};const o=async(a=0)=>await n.request({topic:i.topic,chainId:s,request:{jsonrpc:"2.0",method:"getRecords",params:{address:t,filter:e,page:a}}});try{return await o()}catch(a){const c=a.message;return console.error("getRecords error",c),{error:c}}},E5=async({message:t,address:e})=>{const r=await St(),n=await(r==null?void 0:r.getSession()),i="aleo:1";if(!n||!i||!r)return{error:"no session, chainId, or connection"};try{return await r.request({topic:n.topic,chainId:i,request:{jsonrpc:"2.0",method:"requestSignature",params:{message:t,address:e}}})}catch(s){const o=s.message;return console.error("signature error",o),{error:o}}},S5=50;var _l={exports:{}},Qs={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ip;function x5(){if(Ip)return Qs;Ip=1;var t=mt,e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,c,u){var h,f={},p=null,y=null;u!==void 0&&(p=""+u),c.key!==void 0&&(p=""+c.key),c.ref!==void 0&&(y=c.ref);for(h in c)n.call(c,h)&&!s.hasOwnProperty(h)&&(f[h]=c[h]);if(a&&a.defaultProps)for(h in c=a.defaultProps,c)f[h]===void 0&&(f[h]=c[h]);return{$$typeof:e,type:a,key:p,ref:y,props:f,_owner:i.current}}return Qs.Fragment=r,Qs.jsx=o,Qs.jsxs=o,Qs}var Ys={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp;function C5(){return Dp||(Dp=1,process.env.NODE_ENV!=="production"&&function(){var t=mt,e=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),w=Symbol.iterator,S="@@iterator";function E(T){if(T===null||typeof T!="object")return null;var H=w&&T[w]||T[S];return typeof H=="function"?H:null}var I=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function b(T){{for(var H=arguments.length,ue=new Array(H>1?H-1:0),Ce=1;Ce<H;Ce++)ue[Ce-1]=arguments[Ce];C("error",T,ue)}}function C(T,H,ue){{var Ce=I.ReactDebugCurrentFrame,st=Ce.getStackAddendum();st!==""&&(H+="%s",ue=ue.concat([st]));var Ge=ue.map(function(Je){return String(Je)});Ge.unshift("Warning: "+H),Function.prototype.apply.call(console[T],console,Ge)}}var v=!1,_=!1,g=!1,l=!1,m=!1,P;P=Symbol.for("react.module.reference");function $(T){return!!(typeof T=="string"||typeof T=="function"||T===n||T===s||m||T===i||T===u||T===h||l||T===y||v||_||g||typeof T=="object"&&T!==null&&(T.$$typeof===p||T.$$typeof===f||T.$$typeof===o||T.$$typeof===a||T.$$typeof===c||T.$$typeof===P||T.getModuleId!==void 0))}function z(T,H,ue){var Ce=T.displayName;if(Ce)return Ce;var st=H.displayName||H.name||"";return st!==""?ue+"("+st+")":ue}function W(T){return T.displayName||"Context"}function G(T){if(T==null)return null;if(typeof T.tag=="number"&&b("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof T=="function")return T.displayName||T.name||null;if(typeof T=="string")return T;switch(T){case n:return"Fragment";case r:return"Portal";case s:return"Profiler";case i:return"StrictMode";case u:return"Suspense";case h:return"SuspenseList"}if(typeof T=="object")switch(T.$$typeof){case a:var H=T;return W(H)+".Consumer";case o:var ue=T;return W(ue._context)+".Provider";case c:return z(T,T.render,"ForwardRef");case f:var Ce=T.displayName||null;return Ce!==null?Ce:G(T.type)||"Memo";case p:{var st=T,Ge=st._payload,Je=st._init;try{return G(Je(Ge))}catch{return null}}}return null}var N=Object.assign,j=0,oe,Y,Z,X,K,ee,xe;function ne(){}ne.__reactDisabledLog=!0;function Ee(){{if(j===0){oe=console.log,Y=console.info,Z=console.warn,X=console.error,K=console.group,ee=console.groupCollapsed,xe=console.groupEnd;var T={configurable:!0,enumerable:!0,value:ne,writable:!0};Object.defineProperties(console,{info:T,log:T,warn:T,error:T,group:T,groupCollapsed:T,groupEnd:T})}j++}}function fe(){{if(j--,j===0){var T={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:N({},T,{value:oe}),info:N({},T,{value:Y}),warn:N({},T,{value:Z}),error:N({},T,{value:X}),group:N({},T,{value:K}),groupCollapsed:N({},T,{value:ee}),groupEnd:N({},T,{value:xe})})}j<0&&b("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var _e=I.ReactCurrentDispatcher,q;function B(T,H,ue){{if(q===void 0)try{throw Error()}catch(st){var Ce=st.stack.trim().match(/\n( *(at )?)/);q=Ce&&Ce[1]||""}return`
`+q+T}}var M=!1,d;{var R=typeof WeakMap=="function"?WeakMap:Map;d=new R}function ce(T,H){if(!T||M)return"";{var ue=d.get(T);if(ue!==void 0)return ue}var Ce;M=!0;var st=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Ge;Ge=_e.current,_e.current=null,Ee();try{if(H){var Je=function(){throw Error()};if(Object.defineProperty(Je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Je,[])}catch(sr){Ce=sr}Reflect.construct(T,[],Je)}else{try{Je.call()}catch(sr){Ce=sr}T.call(Je.prototype)}}else{try{throw Error()}catch(sr){Ce=sr}T()}}catch(sr){if(sr&&Ce&&typeof sr.stack=="string"){for(var Ke=sr.stack.split(`
`),Jt=Ce.stack.split(`
`),Ct=Ke.length-1,$t=Jt.length-1;Ct>=1&&$t>=0&&Ke[Ct]!==Jt[$t];)$t--;for(;Ct>=1&&$t>=0;Ct--,$t--)if(Ke[Ct]!==Jt[$t]){if(Ct!==1||$t!==1)do if(Ct--,$t--,$t<0||Ke[Ct]!==Jt[$t]){var zt=`
`+Ke[Ct].replace(" at new "," at ");return T.displayName&&zt.includes("<anonymous>")&&(zt=zt.replace("<anonymous>",T.displayName)),typeof T=="function"&&d.set(T,zt),zt}while(Ct>=1&&$t>=0);break}}}finally{M=!1,_e.current=Ge,fe(),Error.prepareStackTrace=st}var fn=T?T.displayName||T.name:"",Ei=fn?B(fn):"";return typeof T=="function"&&d.set(T,Ei),Ei}function de(T,H,ue){return ce(T,!1)}function We(T){var H=T.prototype;return!!(H&&H.isReactComponent)}function De(T,H,ue){if(T==null)return"";if(typeof T=="function")return ce(T,We(T));if(typeof T=="string")return B(T);switch(T){case u:return B("Suspense");case h:return B("SuspenseList")}if(typeof T=="object")switch(T.$$typeof){case c:return de(T.render);case f:return De(T.type,H,ue);case p:{var Ce=T,st=Ce._payload,Ge=Ce._init;try{return De(Ge(st),H,ue)}catch{}}}return""}var Me=Object.prototype.hasOwnProperty,Xe={},pt=I.ReactDebugCurrentFrame;function ht(T){if(T){var H=T._owner,ue=De(T.type,T._source,H?H.type:null);pt.setExtraStackFrame(ue)}else pt.setExtraStackFrame(null)}function Ve(T,H,ue,Ce,st){{var Ge=Function.call.bind(Me);for(var Je in T)if(Ge(T,Je)){var Ke=void 0;try{if(typeof T[Je]!="function"){var Jt=Error((Ce||"React class")+": "+ue+" type `"+Je+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof T[Je]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Jt.name="Invariant Violation",Jt}Ke=T[Je](H,Je,Ce,ue,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Ct){Ke=Ct}Ke&&!(Ke instanceof Error)&&(ht(st),b("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",Ce||"React class",ue,Je,typeof Ke),ht(null)),Ke instanceof Error&&!(Ke.message in Xe)&&(Xe[Ke.message]=!0,ht(st),b("Failed %s type: %s",ue,Ke.message),ht(null))}}}var Be=Array.isArray;function $e(T){return Be(T)}function ke(T){{var H=typeof Symbol=="function"&&Symbol.toStringTag,ue=H&&T[Symbol.toStringTag]||T.constructor.name||"Object";return ue}}function Ne(T){try{return Te(T),!1}catch{return!0}}function Te(T){return""+T}function Ae(T){if(Ne(T))return b("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",ke(T)),Te(T)}var Se=I.ReactCurrentOwner,Fe={key:!0,ref:!0,__self:!0,__source:!0},qe,Ie,He;He={};function et(T){if(Me.call(T,"ref")){var H=Object.getOwnPropertyDescriptor(T,"ref").get;if(H&&H.isReactWarning)return!1}return T.ref!==void 0}function nt(T){if(Me.call(T,"key")){var H=Object.getOwnPropertyDescriptor(T,"key").get;if(H&&H.isReactWarning)return!1}return T.key!==void 0}function tt(T,H){if(typeof T.ref=="string"&&Se.current&&H&&Se.current.stateNode!==H){var ue=G(Se.current.type);He[ue]||(b('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',G(Se.current.type),T.ref),He[ue]=!0)}}function it(T,H){{var ue=function(){qe||(qe=!0,b("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",H))};ue.isReactWarning=!0,Object.defineProperty(T,"key",{get:ue,configurable:!0})}}function Sr(T,H){{var ue=function(){Ie||(Ie=!0,b("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",H))};ue.isReactWarning=!0,Object.defineProperty(T,"ref",{get:ue,configurable:!0})}}var fr=function(T,H,ue,Ce,st,Ge,Je){var Ke={$$typeof:e,type:T,key:H,ref:ue,props:Je,_owner:Ge};return Ke._store={},Object.defineProperty(Ke._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Ke,"_self",{configurable:!1,enumerable:!1,writable:!1,value:Ce}),Object.defineProperty(Ke,"_source",{configurable:!1,enumerable:!1,writable:!1,value:st}),Object.freeze&&(Object.freeze(Ke.props),Object.freeze(Ke)),Ke};function Mr(T,H,ue,Ce,st){{var Ge,Je={},Ke=null,Jt=null;ue!==void 0&&(Ae(ue),Ke=""+ue),nt(H)&&(Ae(H.key),Ke=""+H.key),et(H)&&(Jt=H.ref,tt(H,st));for(Ge in H)Me.call(H,Ge)&&!Fe.hasOwnProperty(Ge)&&(Je[Ge]=H[Ge]);if(T&&T.defaultProps){var Ct=T.defaultProps;for(Ge in Ct)Je[Ge]===void 0&&(Je[Ge]=Ct[Ge])}if(Ke||Jt){var $t=typeof T=="function"?T.displayName||T.name||"Unknown":T;Ke&&it(Je,$t),Jt&&Sr(Je,$t)}return fr(T,Ke,Jt,st,Ce,Se.current,Je)}}var Qt=I.ReactCurrentOwner,Yt=I.ReactDebugCurrentFrame;function Ar(T){if(T){var H=T._owner,ue=De(T.type,T._source,H?H.type:null);Yt.setExtraStackFrame(ue)}else Yt.setExtraStackFrame(null)}var dn;dn=!1;function wt(T){return typeof T=="object"&&T!==null&&T.$$typeof===e}function bt(){{if(Qt.current){var T=G(Qt.current.type);if(T)return`

Check the render method of \``+T+"`."}return""}}function At(T){{if(T!==void 0){var H=T.fileName.replace(/^.*[\\\/]/,""),ue=T.lineNumber;return`

Check your code at `+H+":"+ue+"."}return""}}var xt={};function Tt(T){{var H=bt();if(!H){var ue=typeof T=="string"?T:T.displayName||T.name;ue&&(H=`

Check the top-level render call using <`+ue+">.")}return H}}function _t(T,H){{if(!T._store||T._store.validated||T.key!=null)return;T._store.validated=!0;var ue=Tt(H);if(xt[ue])return;xt[ue]=!0;var Ce="";T&&T._owner&&T._owner!==Qt.current&&(Ce=" It was passed a child from "+G(T._owner.type)+"."),Ar(T),b('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',ue,Ce),Ar(null)}}function Mt(T,H){{if(typeof T!="object")return;if($e(T))for(var ue=0;ue<T.length;ue++){var Ce=T[ue];wt(Ce)&&_t(Ce,H)}else if(wt(T))T._store&&(T._store.validated=!0);else if(T){var st=E(T);if(typeof st=="function"&&st!==T.entries)for(var Ge=st.call(T),Je;!(Je=Ge.next()).done;)wt(Je.value)&&_t(Je.value,H)}}}function jt(T){{var H=T.type;if(H==null||typeof H=="string")return;var ue;if(typeof H=="function")ue=H.propTypes;else if(typeof H=="object"&&(H.$$typeof===c||H.$$typeof===f))ue=H.propTypes;else return;if(ue){var Ce=G(H);Ve(ue,T.props,"prop",Ce,T)}else if(H.PropTypes!==void 0&&!dn){dn=!0;var st=G(H);b("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",st||"Unknown")}typeof H.getDefaultProps=="function"&&!H.getDefaultProps.isReactClassApproved&&b("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Bt(T){{for(var H=Object.keys(T.props),ue=0;ue<H.length;ue++){var Ce=H[ue];if(Ce!=="children"&&Ce!=="key"){Ar(T),b("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",Ce),Ar(null);break}}T.ref!==null&&(Ar(T),b("Invalid attribute `ref` supplied to `React.Fragment`."),Ar(null))}}function kt(T,H,ue,Ce,st,Ge){{var Je=$(T);if(!Je){var Ke="";(T===void 0||typeof T=="object"&&T!==null&&Object.keys(T).length===0)&&(Ke+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Jt=At(st);Jt?Ke+=Jt:Ke+=bt();var Ct;T===null?Ct="null":$e(T)?Ct="array":T!==void 0&&T.$$typeof===e?(Ct="<"+(G(T.type)||"Unknown")+" />",Ke=" Did you accidentally export a JSX literal instead of a component?"):Ct=typeof T,b("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Ct,Ke)}var $t=Mr(T,H,ue,st,Ge);if($t==null)return $t;if(Je){var zt=H.children;if(zt!==void 0)if(Ce)if($e(zt)){for(var fn=0;fn<zt.length;fn++)Mt(zt[fn],T);Object.freeze&&Object.freeze(zt)}else b("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Mt(zt,T)}return T===n?Bt($t):jt($t),$t}}function qt(T,H,ue){return kt(T,H,ue,!0)}function Rt(T,H,ue){return kt(T,H,ue,!1)}var Pt=Rt,vt=qt;Ys.Fragment=n,Ys.jsx=Pt,Ys.jsxs=vt}()),Ys}process.env.NODE_ENV==="production"?_l.exports=x5():_l.exports=C5();var O5=_l.exports;const El=new IE,I5=({dAppName:t,dAppDescription:e,dAppUrl:r,dAppIconURL:n,children:i})=>(mt.useEffect(()=>{$f({dAppName:t,dAppDescription:e,dAppUrl:r,dAppIconURL:n})},[]),O5.jsx($E,{client:El,children:i})),D5=["wc@2:client:0.3//proposal","wc@2:core:0.3//subscription","wc@2:core:0.3//keychain","wc@2:core:0.3//messages","wc@2:core:0.3//history","wc@2:client:0.3//session","wc@2:core:0.3//expirer","WCM_WALLETCONNECT_CLIENT_ID","wc@2:core:0.3//pairing","debug"],Ap=Y0.version;try{const t=localStorage.getItem("puzzle-sdk-version");Ap!==t&&(D5.forEach(e=>{localStorage.removeItem(e)}),localStorage.setItem("puzzle-sdk-version",Ap))}catch(t){console.error(t)}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ma=window,Sl=ma.ShadowRoot&&(ma.ShadyCSS===void 0||ma.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,xl=Symbol(),Tp=new WeakMap;let Rp=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==xl)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(Sl&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=Tp.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&Tp.set(r,e))}return e}toString(){return this.cssText}};const A5=t=>new Rp(typeof t=="string"?t:t+"",void 0,xl),ut=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,i,s)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new Rp(r,t,xl)},T5=(t,e)=>{Sl?t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet):e.forEach(r=>{const n=document.createElement("style"),i=ma.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)})},Pp=Sl?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return A5(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Cl;const ya=window,$p=ya.trustedTypes,R5=$p?$p.emptyScript:"",Np=ya.reactiveElementPolyfillSupport,Ol={toAttribute(t,e){switch(e){case Boolean:t=t?R5:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},Lp=(t,e)=>e!==t&&(e==e||t==t),Il={attribute:!0,type:String,converter:Ol,reflect:!1,hasChanged:Lp},Dl="finalized";let qi=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var r;this.finalize(),((r=this.h)!==null&&r!==void 0?r:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((r,n)=>{const i=this._$Ep(n,r);i!==void 0&&(this._$Ev.set(i,n),e.push(i))}),e}static createProperty(e,r=Il){if(r.state&&(r.attribute=!1),this.finalize(),this.elementProperties.set(e,r),!r.noAccessor&&!this.prototype.hasOwnProperty(e)){const n=typeof e=="symbol"?Symbol():"__"+e,i=this.getPropertyDescriptor(e,n,r);i!==void 0&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){return{get(){return this[r]},set(i){const s=this[e];this[r]=i,this.requestUpdate(e,s,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||Il}static finalize(){if(this.hasOwnProperty(Dl))return!1;this[Dl]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const r=this.properties,n=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(const i of n)this.createProperty(i,r[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const i of n)r.unshift(Pp(i))}else e!==void 0&&r.push(Pp(e));return r}static _$Ep(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(r=>r(this))}addController(e){var r,n;((r=this._$ES)!==null&&r!==void 0?r:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)===null||n===void 0||n.call(e))}removeController(e){var r;(r=this._$ES)===null||r===void 0||r.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,r)=>{this.hasOwnProperty(r)&&(this._$Ei.set(r,this[r]),delete this[r])})}createRenderRoot(){var e;const r=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return T5(r,this.constructor.elementStyles),r}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostConnected)===null||n===void 0?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostDisconnected)===null||n===void 0?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$EO(e,r,n=Il){var i;const s=this.constructor._$Ep(e,n);if(s!==void 0&&n.reflect===!0){const o=(((i=n.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?n.converter:Ol).toAttribute(r,n.type);this._$El=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$El=null}}_$AK(e,r){var n;const i=this.constructor,s=i._$Ev.get(e);if(s!==void 0&&this._$El!==s){const o=i.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((n=o.converter)===null||n===void 0?void 0:n.fromAttribute)!==void 0?o.converter:Ol;this._$El=s,this[s]=a.fromAttribute(r,o.type),this._$El=null}}requestUpdate(e,r,n){let i=!0;e!==void 0&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||Lp)(this[e],r)?(this._$AL.has(e)||this._$AL.set(e,r),n.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,s)=>this[s]=i),this._$Ei=void 0);let r=!1;const n=this._$AL;try{r=this.shouldUpdate(n),r?(this.willUpdate(n),(e=this._$ES)===null||e===void 0||e.forEach(i=>{var s;return(s=i.hostUpdate)===null||s===void 0?void 0:s.call(i)}),this.update(n)):this._$Ek()}catch(i){throw r=!1,this._$Ek(),i}r&&this._$AE(n)}willUpdate(e){}_$AE(e){var r;(r=this._$ES)===null||r===void 0||r.forEach(n=>{var i;return(i=n.hostUpdated)===null||i===void 0?void 0:i.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((r,n)=>this._$EO(n,this[n],r)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};qi[Dl]=!0,qi.elementProperties=new Map,qi.elementStyles=[],qi.shadowRootOptions={mode:"open"},Np==null||Np({ReactiveElement:qi}),((Cl=ya.reactiveElementVersions)!==null&&Cl!==void 0?Cl:ya.reactiveElementVersions=[]).push("1.6.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Al;const va=window,zi=va.trustedTypes,Mp=zi?zi.createPolicy("lit-html",{createHTML:t=>t}):void 0,Tl="$lit$",Un=`lit$${(Math.random()+"").slice(9)}$`,kp="?"+Un,P5=`<${kp}>`,pi=document,Js=()=>pi.createComment(""),Xs=t=>t===null||typeof t!="object"&&typeof t!="function",Fp=Array.isArray,$5=t=>Fp(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Rl=`[ 	
\f\r]`,eo=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Up=/-->/g,jp=/>/g,gi=RegExp(`>|${Rl}(?:([^\\s"'>=/]+)(${Rl}*=${Rl}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Bp=/'/g,qp=/"/g,zp=/^(?:script|style|textarea|title)$/i,Wp=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),le=Wp(1),Ut=Wp(2),mi=Symbol.for("lit-noChange"),Gt=Symbol.for("lit-nothing"),Vp=new WeakMap,yi=pi.createTreeWalker(pi,129,null,!1);function Hp(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Mp!==void 0?Mp.createHTML(e):e}const N5=(t,e)=>{const r=t.length-1,n=[];let i,s=e===2?"<svg>":"",o=eo;for(let a=0;a<r;a++){const c=t[a];let u,h,f=-1,p=0;for(;p<c.length&&(o.lastIndex=p,h=o.exec(c),h!==null);)p=o.lastIndex,o===eo?h[1]==="!--"?o=Up:h[1]!==void 0?o=jp:h[2]!==void 0?(zp.test(h[2])&&(i=RegExp("</"+h[2],"g")),o=gi):h[3]!==void 0&&(o=gi):o===gi?h[0]===">"?(o=i??eo,f=-1):h[1]===void 0?f=-2:(f=o.lastIndex-h[2].length,u=h[1],o=h[3]===void 0?gi:h[3]==='"'?qp:Bp):o===qp||o===Bp?o=gi:o===Up||o===jp?o=eo:(o=gi,i=void 0);const y=o===gi&&t[a+1].startsWith("/>")?" ":"";s+=o===eo?c+P5:f>=0?(n.push(u),c.slice(0,f)+Tl+c.slice(f)+Un+y):c+Un+(f===-2?(n.push(void 0),a):y)}return[Hp(t,s+(t[r]||"<?>")+(e===2?"</svg>":"")),n]};class to{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[u,h]=N5(e,r);if(this.el=to.createElement(u,n),yi.currentNode=this.el.content,r===2){const f=this.el.content,p=f.firstChild;p.remove(),f.append(...p.childNodes)}for(;(i=yi.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes()){const f=[];for(const p of i.getAttributeNames())if(p.endsWith(Tl)||p.startsWith(Un)){const y=h[o++];if(f.push(p),y!==void 0){const w=i.getAttribute(y.toLowerCase()+Tl).split(Un),S=/([.?@])?(.*)/.exec(y);c.push({type:1,index:s,name:S[2],strings:w,ctor:S[1]==="."?M5:S[1]==="?"?F5:S[1]==="@"?U5:wa})}else c.push({type:6,index:s})}for(const p of f)i.removeAttribute(p)}if(zp.test(i.tagName)){const f=i.textContent.split(Un),p=f.length-1;if(p>0){i.textContent=zi?zi.emptyScript:"";for(let y=0;y<p;y++)i.append(f[y],Js()),yi.nextNode(),c.push({type:2,index:++s});i.append(f[p],Js())}}}else if(i.nodeType===8)if(i.data===kp)c.push({type:2,index:s});else{let f=-1;for(;(f=i.data.indexOf(Un,f+1))!==-1;)c.push({type:7,index:s}),f+=Un.length-1}s++}}static createElement(e,r){const n=pi.createElement("template");return n.innerHTML=e,n}}function Wi(t,e,r=t,n){var i,s,o,a;if(e===mi)return e;let c=n!==void 0?(i=r._$Co)===null||i===void 0?void 0:i[n]:r._$Cl;const u=Xs(e)?void 0:e._$litDirective$;return(c==null?void 0:c.constructor)!==u&&((s=c==null?void 0:c._$AO)===null||s===void 0||s.call(c,!1),u===void 0?c=void 0:(c=new u(t),c._$AT(t,r,n)),n!==void 0?((o=(a=r)._$Co)!==null&&o!==void 0?o:a._$Co=[])[n]=c:r._$Cl=c),c!==void 0&&(e=Wi(t,c._$AS(t,e.values),c,n)),e}class L5{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var r;const{el:{content:n},parts:i}=this._$AD,s=((r=e==null?void 0:e.creationScope)!==null&&r!==void 0?r:pi).importNode(n,!0);yi.currentNode=s;let o=yi.nextNode(),a=0,c=0,u=i[0];for(;u!==void 0;){if(a===u.index){let h;u.type===2?h=new ro(o,o.nextSibling,this,e):u.type===1?h=new u.ctor(o,u.name,u.strings,this,e):u.type===6&&(h=new j5(o,this,e)),this._$AV.push(h),u=i[++c]}a!==(u==null?void 0:u.index)&&(o=yi.nextNode(),a++)}return yi.currentNode=pi,s}v(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class ro{constructor(e,r,n,i){var s;this.type=2,this._$AH=Gt,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cp=(s=i==null?void 0:i.isConnected)===null||s===void 0||s}get _$AU(){var e,r;return(r=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&r!==void 0?r:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Wi(this,e,r),Xs(e)?e===Gt||e==null||e===""?(this._$AH!==Gt&&this._$AR(),this._$AH=Gt):e!==this._$AH&&e!==mi&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):$5(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==Gt&&Xs(this._$AH)?this._$AA.nextSibling.data=e:this.$(pi.createTextNode(e)),this._$AH=e}g(e){var r;const{values:n,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=to.createElement(Hp(i.h,i.h[0]),this.options)),i);if(((r=this._$AH)===null||r===void 0?void 0:r._$AD)===s)this._$AH.v(n);else{const o=new L5(s,this),a=o.u(this.options);o.v(n),this.$(a),this._$AH=o}}_$AC(e){let r=Vp.get(e.strings);return r===void 0&&Vp.set(e.strings,r=new to(e)),r}T(e){Fp(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const s of e)i===r.length?r.push(n=new ro(this.k(Js()),this.k(Js()),this,this.options)):n=r[i],n._$AI(s),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,r);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var r;this._$AM===void 0&&(this._$Cp=e,(r=this._$AP)===null||r===void 0||r.call(this,e))}}class wa{constructor(e,r,n,i,s){this.type=1,this._$AH=Gt,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Gt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,r=this,n,i){const s=this.strings;let o=!1;if(s===void 0)e=Wi(this,e,r,0),o=!Xs(e)||e!==this._$AH&&e!==mi,o&&(this._$AH=e);else{const a=e;let c,u;for(e=s[0],c=0;c<s.length-1;c++)u=Wi(this,a[n+c],r,c),u===mi&&(u=this._$AH[c]),o||(o=!Xs(u)||u!==this._$AH[c]),u===Gt?e=Gt:e!==Gt&&(e+=(u??"")+s[c+1]),this._$AH[c]=u}o&&!i&&this.j(e)}j(e){e===Gt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class M5 extends wa{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Gt?void 0:e}}const k5=zi?zi.emptyScript:"";let F5=class extends wa{constructor(){super(...arguments),this.type=4}j(e){e&&e!==Gt?this.element.setAttribute(this.name,k5):this.element.removeAttribute(this.name)}};class U5 extends wa{constructor(e,r,n,i,s){super(e,r,n,i,s),this.type=5}_$AI(e,r=this){var n;if((e=(n=Wi(this,e,r,0))!==null&&n!==void 0?n:Gt)===mi)return;const i=this._$AH,s=e===Gt&&i!==Gt||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,o=e!==Gt&&(i===Gt||s);s&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,n;typeof this._$AH=="function"?this._$AH.call((n=(r=this.options)===null||r===void 0?void 0:r.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}let j5=class{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Wi(this,e)}};const Kp=va.litHtmlPolyfillSupport;Kp==null||Kp(to,ro),((Al=va.litHtmlVersions)!==null&&Al!==void 0?Al:va.litHtmlVersions=[]).push("2.8.0");const B5=(t,e,r)=>{var n,i;const s=(n=r==null?void 0:r.renderBefore)!==null&&n!==void 0?n:e;let o=s._$litPart$;if(o===void 0){const a=(i=r==null?void 0:r.renderBefore)!==null&&i!==void 0?i:null;s._$litPart$=o=new ro(e.insertBefore(Js(),a),a,void 0,r??{})}return o._$AI(t),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Pl,$l;class Ye extends qi{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,r;const n=super.createRenderRoot();return(e=(r=this.renderOptions).renderBefore)!==null&&e!==void 0||(r.renderBefore=n.firstChild),n}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=B5(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return mi}}Ye.finalized=!0,Ye._$litElement$=!0,(Pl=globalThis.litElementHydrateSupport)===null||Pl===void 0||Pl.call(globalThis,{LitElement:Ye});const Zp=globalThis.litElementPolyfillSupport;Zp==null||Zp({LitElement:Ye}),(($l=globalThis.litElementVersions)!==null&&$l!==void 0?$l:globalThis.litElementVersions=[]).push("3.3.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ot=t=>e=>typeof e=="function"?((r,n)=>(customElements.define(r,n),n))(t,e):((r,n)=>{const{kind:i,elements:s}=n;return{kind:i,elements:s,finisher(o){customElements.define(r,o)}}})(t,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const q5=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(r){r.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}},z5=(t,e,r)=>{e.constructor.createProperty(r,t)};function je(t){return(e,r)=>r!==void 0?z5(t,e,r):q5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Dr(t){return je({...t,state:!0})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Nl;((Nl=window.HTMLSlotElement)===null||Nl===void 0?void 0:Nl.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const W5={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},V5=t=>(...e)=>({_$litDirective$:t,values:e});class H5{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,n){this._$Ct=e,this._$AM=r,this._$Ci=n}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const En=V5(class extends H5{constructor(t){var e;if(super(t),t.type!==W5.ATTRIBUTE||t.name!=="class"||((e=t.strings)===null||e===void 0?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,n;if(this.it===void 0){this.it=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!(!((r=this.nt)===null||r===void 0)&&r.has(s))&&this.it.add(s);return this.render(e)}const i=t.element.classList;this.it.forEach(s=>{s in e||(i.remove(s),this.it.delete(s))});for(const s in e){const o=!!e[s];o===this.it.has(s)||!((n=this.nt)===null||n===void 0)&&n.has(s)||(o?(i.add(s),this.it.add(s)):(i.remove(s),this.it.delete(s)))}return mi}});function K5(t,e){t.indexOf(e)===-1&&t.push(e)}const Gp=(t,e,r)=>Math.min(Math.max(r,t),e),qr={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},ba=t=>typeof t=="number",Vi=t=>Array.isArray(t)&&!ba(t[0]),Z5=(t,e,r)=>{const n=e-t;return((r-t)%n+n)%n+t};function G5(t,e){return Vi(t)?t[Z5(0,t.length,e)]:t}const Qp=(t,e,r)=>-r*t+r*e+t,Yp=()=>{},jn=t=>t,Ll=(t,e,r)=>e-t===0?1:(r-t)/(e-t);function Jp(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=Ll(0,e,n);t.push(Qp(r,1,i))}}function Q5(t){const e=[0];return Jp(e,t-1),e}function Y5(t,e=Q5(t.length),r=jn){const n=t.length,i=n-e.length;return i>0&&Jp(e,i),s=>{let o=0;for(;o<n-2&&!(s<e[o+1]);o++);let a=Gp(0,1,Ll(e[o],e[o+1],s));return a=G5(r,o)(a),Qp(t[o],t[o+1],a)}}const Xp=t=>Array.isArray(t)&&ba(t[0]),Ml=t=>typeof t=="object"&&!!t.createAnimation,Hi=t=>typeof t=="function",J5=t=>typeof t=="string",no={ms:t=>t*1e3,s:t=>t/1e3},e0=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,X5=1e-7,e6=12;function t6(t,e,r,n,i){let s,o,a=0;do o=e+(r-e)/2,s=e0(o,n,i)-t,s>0?r=o:e=o;while(Math.abs(s)>X5&&++a<e6);return o}function io(t,e,r,n){if(t===e&&r===n)return jn;const i=s=>t6(s,0,1,t,r);return s=>s===0||s===1?s:e0(i(s),e,n)}const r6=(t,e="end")=>r=>{r=e==="end"?Math.min(r,.999):Math.max(r,.001);const n=r*t,i=e==="end"?Math.floor(n):Math.ceil(n);return Gp(0,1,i/t)},t0={ease:io(.25,.1,.25,1),"ease-in":io(.42,0,1,1),"ease-in-out":io(.42,0,.58,1),"ease-out":io(0,0,.58,1)},n6=/\((.*?)\)/;function r0(t){if(Hi(t))return t;if(Xp(t))return io(...t);if(t0[t])return t0[t];if(t.startsWith("steps")){const e=n6.exec(t);if(e){const r=e[1].split(",");return r6(parseFloat(r[0]),r[1].trim())}}return jn}class n0{constructor(e,r=[0,1],{easing:n,duration:i=qr.duration,delay:s=qr.delay,endDelay:o=qr.endDelay,repeat:a=qr.repeat,offset:c,direction:u="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=jn,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((f,p)=>{this.resolve=f,this.reject=p}),n=n||qr.easing,Ml(n)){const f=n.createAnimation(r);n=f.easing,r=f.keyframes||r,i=f.duration||i}this.repeat=a,this.easing=Vi(n)?jn:r0(n),this.updateDuration(i);const h=Y5(r,c,Vi(n)?n.map(r0):jn);this.tick=f=>{var p;s=s;let y=0;this.pauseTime!==void 0?y=this.pauseTime:y=(f-this.startTime)*this.rate,this.t=y,y/=1e3,y=Math.max(y-s,0),this.playState==="finished"&&this.pauseTime===void 0&&(y=this.totalDuration);const w=y/this.duration;let S=Math.floor(w),E=w%1;!E&&w>=1&&(E=1),E===1&&S--;const I=S%2;(u==="reverse"||u==="alternate"&&I||u==="alternate-reverse"&&!I)&&(E=1-E);const b=y>=this.totalDuration?1:Math.min(E,1),C=h(this.easing(b));e(C),this.pauseTime===void 0&&(this.playState==="finished"||y>=this.totalDuration+o)?(this.playState="finished",(p=this.resolve)===null||p===void 0||p.call(this,C)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const e=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(e=this.reject)===null||e===void 0||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){this.pauseTime!==void 0||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}var kl=function(){};process.env.NODE_ENV!=="production"&&(kl=function(t,e){if(!t)throw new Error(e)});class i6{setAnimation(e){this.animation=e,e==null||e.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const Fl=new WeakMap;function i0(t){return Fl.has(t)||Fl.set(t,{transforms:[],values:new Map}),Fl.get(t)}function s6(t,e){return t.has(e)||t.set(e,new i6),t.get(e)}const o6=["","X","Y","Z"],a6=["translate","scale","rotate","skew"],_a={x:"translateX",y:"translateY",z:"translateZ"},s0={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},c6={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:s0,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:jn},skew:s0},so=new Map,Ul=t=>`--motion-${t}`,Ea=["x","y","z"];a6.forEach(t=>{o6.forEach(e=>{Ea.push(t+e),so.set(Ul(t+e),c6[t])})});const l6=(t,e)=>Ea.indexOf(t)-Ea.indexOf(e),u6=new Set(Ea),o0=t=>u6.has(t),h6=(t,e)=>{_a[e]&&(e=_a[e]);const{transforms:r}=i0(t);K5(r,e),t.style.transform=d6(r)},d6=t=>t.sort(l6).reduce(f6,"").trim(),f6=(t,e)=>`${t} ${e}(var(${Ul(e)}))`,jl=t=>t.startsWith("--"),a0=new Set;function p6(t){if(!a0.has(t)){a0.add(t);try{const{syntax:e,initialValue:r}=so.has(t)?so.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:r})}catch{}}}const Bl=(t,e)=>document.createElement("div").animate(t,e),c0={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{Bl({opacity:[1]})}catch{return!1}return!0},finished:()=>!!Bl({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{Bl({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},ql={},Ki={};for(const t in c0)Ki[t]=()=>(ql[t]===void 0&&(ql[t]=c0[t]()),ql[t]);const g6=.015,m6=(t,e)=>{let r="";const n=Math.round(e/g6);for(let i=0;i<n;i++)r+=t(Ll(0,n-1,i))+", ";return r.substring(0,r.length-2)},l0=(t,e)=>Hi(t)?Ki.linearEasing()?`linear(${m6(t,e)})`:qr.easing:Xp(t)?y6(t):t,y6=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`;function v6(t,e){for(let r=0;r<t.length;r++)t[r]===null&&(t[r]=r?t[r-1]:e());return t}const w6=t=>Array.isArray(t)?t:[t];function zl(t){return _a[t]&&(t=_a[t]),o0(t)?Ul(t):t}const Sa={get:(t,e)=>{e=zl(e);let r=jl(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!r&&r!==0){const n=so.get(e);n&&(r=n.initialValue)}return r},set:(t,e,r)=>{e=zl(e),jl(e)?t.style.setProperty(e,r):t.style[e]=r}};function u0(t,e=!0){if(!(!t||t.playState==="finished"))try{t.stop?t.stop():(e&&t.commitStyles(),t.cancel())}catch{}}function b6(t,e){var r;let n=(e==null?void 0:e.toDefaultUnit)||jn;const i=t[t.length-1];if(J5(i)){const s=((r=i.match(/(-?[\d.]+)([a-z%]*)/))===null||r===void 0?void 0:r[2])||"";s&&(n=o=>o+s)}return n}function _6(){return window.__MOTION_DEV_TOOLS_RECORD}function E6(t,e,r,n={},i){const s=_6(),o=n.record!==!1&&s;let a,{duration:c=qr.duration,delay:u=qr.delay,endDelay:h=qr.endDelay,repeat:f=qr.repeat,easing:p=qr.easing,persist:y=!1,direction:w,offset:S,allowWebkitAcceleration:E=!1}=n;const I=i0(t),b=o0(e);let C=Ki.waapi();b&&h6(t,e);const v=zl(e),_=s6(I.values,v),g=so.get(v);return u0(_.animation,!(Ml(p)&&_.generator)&&n.record!==!1),()=>{const l=()=>{var $,z;return(z=($=Sa.get(t,v))!==null&&$!==void 0?$:g==null?void 0:g.initialValue)!==null&&z!==void 0?z:0};let m=v6(w6(r),l);const P=b6(m,g);if(Ml(p)){const $=p.createAnimation(m,e!=="opacity",l,v,_);p=$.easing,m=$.keyframes||m,c=$.duration||c}if(jl(v)&&(Ki.cssRegisterProperty()?p6(v):C=!1),b&&!Ki.linearEasing()&&(Hi(p)||Vi(p)&&p.some(Hi))&&(C=!1),C){g&&(m=m.map(W=>ba(W)?g.toDefaultUnit(W):W)),m.length===1&&(!Ki.partialKeyframes()||o)&&m.unshift(l());const $={delay:no.ms(u),duration:no.ms(c),endDelay:no.ms(h),easing:Vi(p)?void 0:l0(p,c),direction:w,iterations:f+1,fill:"both"};a=t.animate({[v]:m,offset:S,easing:Vi(p)?p.map(W=>l0(W,c)):void 0},$),a.finished||(a.finished=new Promise((W,G)=>{a.onfinish=W,a.oncancel=G}));const z=m[m.length-1];a.finished.then(()=>{y||(Sa.set(t,v,z),a.cancel())}).catch(Yp),E||(a.playbackRate=1.000001)}else if(i&&b)m=m.map($=>typeof $=="string"?parseFloat($):$),m.length===1&&m.unshift(parseFloat(l())),a=new i($=>{Sa.set(t,v,P?P($):$)},m,Object.assign(Object.assign({},n),{duration:c,easing:p}));else{const $=m[m.length-1];Sa.set(t,v,g&&ba($)?g.toDefaultUnit($):$)}return o&&s(t,e,m,{duration:c,delay:u,easing:p,repeat:f,offset:S},"motion-one"),_.setAnimation(a),a}}const S6=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);function x6(t,e){var r;return typeof t=="string"?e?((r=e[t])!==null&&r!==void 0||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t||[])}const C6=t=>t(),h0=(t,e,r=qr.duration)=>new Proxy({animations:t.map(C6).filter(Boolean),duration:r,options:e},I6),O6=t=>t.animations[0],I6={get:(t,e)=>{const r=O6(t);switch(e){case"duration":return t.duration;case"currentTime":return no.s((r==null?void 0:r[e])||0);case"playbackRate":case"playState":return r==null?void 0:r[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(D6)).catch(Yp)),t.finished;case"stop":return()=>{t.animations.forEach(n=>u0(n))};case"forEachNative":return n=>{t.animations.forEach(i=>n(i,t))};default:return typeof(r==null?void 0:r[e])>"u"?void 0:()=>t.animations.forEach(n=>n[e]())}},set:(t,e,r)=>{switch(e){case"currentTime":r=no.ms(r);case"currentTime":case"playbackRate":for(let n=0;n<t.animations.length;n++)t.animations[n][e]=r;return!0}return!1}},D6=t=>t.finished;function A6(t,e,r){return Hi(t)?t(e,r):t}function T6(t){return function(r,n,i={}){r=x6(r);const s=r.length;kl(!!s,"No valid element provided."),kl(!!n,"No keyframes defined.");const o=[];for(let a=0;a<s;a++){const c=r[a];for(const u in n){const h=S6(i,u);h.delay=A6(h.delay,a,s);const f=E6(c,u,n[u],h,t);o.push(f)}}return h0(o,i,i.duration)}}const R6=T6(n0);function P6(t,e={}){return h0([()=>{const r=new n0(t,[0,1],e);return r.finished.catch(()=>{}),r}],e,e.duration)}function vi(t,e,r){return(Hi(t)?P6:R6)(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Er=t=>t??Gt;var oo={},$6=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},d0={},Lr={};let Wl;const N6=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Lr.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},Lr.getSymbolTotalCodewords=function(e){return N6[e]},Lr.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e},Lr.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Wl=e},Lr.isKanjiModeEnabled=function(){return typeof Wl<"u"},Lr.toSJIS=function(e){return Wl(e)};var xa={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(xa);function f0(){this.buffer=[],this.length=0}f0.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var L6=f0;function ao(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}ao.prototype.set=function(t,e,r,n){const i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)},ao.prototype.get=function(t,e){return this.data[t*this.size+e]},ao.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r},ao.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var M6=ao,p0={};(function(t){const e=Lr.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(n){const i=[],s=t.getRowColCoords(n),o=s.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||i.push([s[a],s[c]]);return i}})(p0);var g0={};const k6=Lr.getSymbolSize,m0=7;g0.getPositions=function(e){const r=k6(e);return[[0,0],[r-m0,0],[0,r-m0]]};var y0={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,c=0,u=null,h=null;for(let f=0;f<s;f++){a=c=0,u=h=null;for(let p=0;p<s;p++){let y=i.get(f,p);y===u?a++:(a>=5&&(o+=e.N1+(a-5)),u=y,a=1),y=i.get(p,f),y===h?c++:(c>=5&&(o+=e.N1+(c-5)),h=y,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let c=0;c<s-1;c++){const u=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(u===4||u===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,c=0;for(let u=0;u<s;u++){a=c=0;for(let h=0;h<s;h++)a=a<<1&2047|i.get(u,h),h>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|i.get(h,u),h>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(n,i,s){switch(n){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)s.isReserved(c,a)||s.xor(c,a,r(i,c,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let u=0;u<o;u++){s(u),t.applyMask(u,i);const h=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(u,i),h<c&&(c=h,a=u)}return a}})(y0);var Ca={};const Bn=xa,Oa=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ia=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Ca.getBlocksCount=function(e,r){switch(r){case Bn.L:return Oa[(e-1)*4+0];case Bn.M:return Oa[(e-1)*4+1];case Bn.Q:return Oa[(e-1)*4+2];case Bn.H:return Oa[(e-1)*4+3];default:return}},Ca.getTotalCodewordsCount=function(e,r){switch(r){case Bn.L:return Ia[(e-1)*4+0];case Bn.M:return Ia[(e-1)*4+1];case Bn.Q:return Ia[(e-1)*4+2];case Bn.H:return Ia[(e-1)*4+3];default:return}};var v0={},Da={};const co=new Uint8Array(512),Aa=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)co[r]=e,Aa[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)co[r]=co[r-255]})(),Da.log=function(e){if(e<1)throw new Error("log("+e+")");return Aa[e]},Da.exp=function(e){return co[e]},Da.mul=function(e,r){return e===0||r===0?0:co[Aa[e]+Aa[r]]},function(t){const e=Da;t.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(n[o],i[a]);return s},t.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}}(v0);const w0=v0;function Vl(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Vl.prototype.initialize=function(e){this.degree=e,this.genPoly=w0.generateECPolynomial(this.degree)},Vl.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=w0.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(n,i),s}return n};var F6=Vl,b0={},qn={},Hl={};Hl.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var un={};const _0="[0-9]+",U6="[A-Z $%*+\\-./:]+";let lo="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";lo=lo.replace(/u/g,"\\u");const j6="(?:(?![A-Z0-9 $%*+\\-./:]|"+lo+`)(?:.|[\r
]))+`;un.KANJI=new RegExp(lo,"g"),un.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),un.BYTE=new RegExp(j6,"g"),un.NUMERIC=new RegExp(_0,"g"),un.ALPHANUMERIC=new RegExp(U6,"g");const B6=new RegExp("^"+lo+"$"),q6=new RegExp("^"+_0+"$"),z6=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");un.testKanji=function(e){return B6.test(e)},un.testNumeric=function(e){return q6.test(e)},un.testAlphanumeric=function(e){return z6.test(e)},function(t){const e=Hl,r=un;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return n(s)}catch{return o}}}(qn),function(t){const e=Lr,r=Ca,n=xa,i=qn,s=Hl,o=7973,a=e.getBCHDigit(o);function c(p,y,w){for(let S=1;S<=40;S++)if(y<=t.getCapacity(S,w,p))return S}function u(p,y){return i.getCharCountIndicator(p,y)+4}function h(p,y){let w=0;return p.forEach(function(S){const E=u(S.mode,y);w+=E+S.getBitsLength()}),w}function f(p,y){for(let w=1;w<=40;w++)if(h(p,w)<=t.getCapacity(w,y,i.MIXED))return w}t.from=function(y,w){return s.isValid(y)?parseInt(y,10):w},t.getCapacity=function(y,w,S){if(!s.isValid(y))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=i.BYTE);const E=e.getSymbolTotalCodewords(y),I=r.getTotalCodewordsCount(y,w),b=(E-I)*8;if(S===i.MIXED)return b;const C=b-u(S,y);switch(S){case i.NUMERIC:return Math.floor(C/10*3);case i.ALPHANUMERIC:return Math.floor(C/11*2);case i.KANJI:return Math.floor(C/13);case i.BYTE:default:return Math.floor(C/8)}},t.getBestVersionForData=function(y,w){let S;const E=n.from(w,n.M);if(Array.isArray(y)){if(y.length>1)return f(y,E);if(y.length===0)return 1;S=y[0]}else S=y;return c(S.mode,S.getLength(),E)},t.getEncodedBits=function(y){if(!s.isValid(y)||y<7)throw new Error("Invalid QR Code version");let w=y<<12;for(;e.getBCHDigit(w)-a>=0;)w^=o<<e.getBCHDigit(w)-a;return y<<12|w}}(b0);var E0={};const Kl=Lr,S0=1335,W6=21522,x0=Kl.getBCHDigit(S0);E0.getEncodedBits=function(e,r){const n=e.bit<<3|r;let i=n<<10;for(;Kl.getBCHDigit(i)-x0>=0;)i^=S0<<Kl.getBCHDigit(i)-x0;return(n<<10|i)^W6};var C0={};const V6=qn;function Zi(t){this.mode=V6.NUMERIC,this.data=t.toString()}Zi.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},Zi.prototype.getLength=function(){return this.data.length},Zi.prototype.getBitsLength=function(){return Zi.getBitsLength(this.data.length)},Zi.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);const s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};var H6=Zi;const K6=qn,Zl=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Gi(t){this.mode=K6.ALPHANUMERIC,this.data=t}Gi.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},Gi.prototype.getLength=function(){return this.data.length},Gi.prototype.getBitsLength=function(){return Gi.getBitsLength(this.data.length)},Gi.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=Zl.indexOf(this.data[r])*45;n+=Zl.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(Zl.indexOf(this.data[r]),6)};var Z6=Gi,G6=function(e){for(var r=[],n=e.length,i=0;i<n;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&n>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){r.push(s);continue}if(s<2048){r.push(s>>6|192),r.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128);continue}if(s>=65536&&s<=1114111){r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const Q6=G6,Y6=qn;function Qi(t){this.mode=Y6.BYTE,typeof t=="string"&&(t=Q6(t)),this.data=new Uint8Array(t)}Qi.getBitsLength=function(e){return e*8},Qi.prototype.getLength=function(){return this.data.length},Qi.prototype.getBitsLength=function(){return Qi.getBitsLength(this.data.length)},Qi.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var J6=Qi;const X6=qn,e4=Lr;function Yi(t){this.mode=X6.KANJI,this.data=t}Yi.getBitsLength=function(e){return e*13},Yi.prototype.getLength=function(){return this.data.length},Yi.prototype.getBitsLength=function(){return Yi.getBitsLength(this.data.length)},Yi.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=e4.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var t4=Yi,O0={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,i){var s={},o={};o[n]=0;var a=e.PriorityQueue.make();a.push(n,0);for(var c,u,h,f,p,y,w,S,E;!a.empty();){c=a.pop(),u=c.value,f=c.cost,p=r[u]||{};for(h in p)p.hasOwnProperty(h)&&(y=p[h],w=f+y,S=o[h],E=typeof o[h]>"u",(E||S>w)&&(o[h]=w,a.push(h,w),s[h]=u))}if(typeof i<"u"&&typeof o[i]>"u"){var I=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(I)}return s},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],s=n;s;)i.push(s),r[s],s=r[s];return i.reverse(),i},find_path:function(r,n,i){var s=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},s;r=r||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(O0);var r4=O0.exports;(function(t){const e=qn,r=H6,n=Z6,i=J6,s=t4,o=un,a=Lr,c=r4;function u(I){return unescape(encodeURIComponent(I)).length}function h(I,b,C){const v=[];let _;for(;(_=I.exec(C))!==null;)v.push({data:_[0],index:_.index,mode:b,length:_[0].length});return v}function f(I){const b=h(o.NUMERIC,e.NUMERIC,I),C=h(o.ALPHANUMERIC,e.ALPHANUMERIC,I);let v,_;return a.isKanjiModeEnabled()?(v=h(o.BYTE,e.BYTE,I),_=h(o.KANJI,e.KANJI,I)):(v=h(o.BYTE_KANJI,e.BYTE,I),_=[]),b.concat(C,v,_).sort(function(l,m){return l.index-m.index}).map(function(l){return{data:l.data,mode:l.mode,length:l.length}})}function p(I,b){switch(b){case e.NUMERIC:return r.getBitsLength(I);case e.ALPHANUMERIC:return n.getBitsLength(I);case e.KANJI:return s.getBitsLength(I);case e.BYTE:return i.getBitsLength(I)}}function y(I){return I.reduce(function(b,C){const v=b.length-1>=0?b[b.length-1]:null;return v&&v.mode===C.mode?(b[b.length-1].data+=C.data,b):(b.push(C),b)},[])}function w(I){const b=[];for(let C=0;C<I.length;C++){const v=I[C];switch(v.mode){case e.NUMERIC:b.push([v,{data:v.data,mode:e.ALPHANUMERIC,length:v.length},{data:v.data,mode:e.BYTE,length:v.length}]);break;case e.ALPHANUMERIC:b.push([v,{data:v.data,mode:e.BYTE,length:v.length}]);break;case e.KANJI:b.push([v,{data:v.data,mode:e.BYTE,length:u(v.data)}]);break;case e.BYTE:b.push([{data:v.data,mode:e.BYTE,length:u(v.data)}])}}return b}function S(I,b){const C={},v={start:{}};let _=["start"];for(let g=0;g<I.length;g++){const l=I[g],m=[];for(let P=0;P<l.length;P++){const $=l[P],z=""+g+P;m.push(z),C[z]={node:$,lastCount:0},v[z]={};for(let W=0;W<_.length;W++){const G=_[W];C[G]&&C[G].node.mode===$.mode?(v[G][z]=p(C[G].lastCount+$.length,$.mode)-p(C[G].lastCount,$.mode),C[G].lastCount+=$.length):(C[G]&&(C[G].lastCount=$.length),v[G][z]=p($.length,$.mode)+4+e.getCharCountIndicator($.mode,b))}}_=m}for(let g=0;g<_.length;g++)v[_[g]].end=0;return{map:v,table:C}}function E(I,b){let C;const v=e.getBestModeForData(I);if(C=e.from(b,v),C!==e.BYTE&&C.bit<v.bit)throw new Error('"'+I+'" cannot be encoded with mode '+e.toString(C)+`.
 Suggested mode is: `+e.toString(v));switch(C===e.KANJI&&!a.isKanjiModeEnabled()&&(C=e.BYTE),C){case e.NUMERIC:return new r(I);case e.ALPHANUMERIC:return new n(I);case e.KANJI:return new s(I);case e.BYTE:return new i(I)}}t.fromArray=function(b){return b.reduce(function(C,v){return typeof v=="string"?C.push(E(v,null)):v.data&&C.push(E(v.data,v.mode)),C},[])},t.fromString=function(b,C){const v=f(b,a.isKanjiModeEnabled()),_=w(v),g=S(_,C),l=c.find_path(g.map,"start","end"),m=[];for(let P=1;P<l.length-1;P++)m.push(g.table[l[P]].node);return t.fromArray(y(m))},t.rawSplit=function(b){return t.fromArray(f(b,a.isKanjiModeEnabled()))}})(C0);const Ta=Lr,Gl=xa,n4=L6,i4=M6,s4=p0,o4=g0,Ql=y0,Yl=Ca,a4=F6,Ra=b0,c4=E0,l4=qn,Jl=C0;function u4(t,e){const r=t.size,n=o4.getPositions(e);for(let i=0;i<n.length;i++){const s=n[i][0],o=n[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||r<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(s+a,o+c,!0,!0):t.set(s+a,o+c,!1,!0))}}function h4(t){const e=t.size;for(let r=8;r<e-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function d4(t,e){const r=s4.getPositions(e);for(let n=0;n<r.length;n++){const i=r[n][0],s=r[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function f4(t,e){const r=t.size,n=Ra.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+r-8-3,o=(n>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function Xl(t,e,r){const n=t.size,i=c4.getEncodedBits(e,r);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(n-15+s,8,o,!0),s<8?t.set(8,n-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(n-8,8,1,!0)}function p4(t,e){const r=t.size;let n=-1,i=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,a-c)){let u=!1;o<e.length&&(u=(e[o]>>>s&1)===1),t.set(i,a-c,u),s--,s===-1&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function g4(t,e,r){const n=new n4;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),l4.getCharCountIndicator(c.mode,t)),c.write(n)});const i=Ta.getSymbolTotalCodewords(t),s=Yl.getTotalCodewordsCount(t,e),o=(i-s)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let c=0;c<a;c++)n.put(c%2?17:236,8);return m4(n,t,e)}function m4(t,e,r){const n=Ta.getSymbolTotalCodewords(e),i=Yl.getTotalCodewordsCount(e,r),s=n-i,o=Yl.getBlocksCount(e,r),a=n%o,c=o-a,u=Math.floor(n/o),h=Math.floor(s/o),f=h+1,p=u-h,y=new a4(p);let w=0;const S=new Array(o),E=new Array(o);let I=0;const b=new Uint8Array(t.buffer);for(let l=0;l<o;l++){const m=l<c?h:f;S[l]=b.slice(w,w+m),E[l]=y.encode(S[l]),w+=m,I=Math.max(I,m)}const C=new Uint8Array(n);let v=0,_,g;for(_=0;_<I;_++)for(g=0;g<o;g++)_<S[g].length&&(C[v++]=S[g][_]);for(_=0;_<p;_++)for(g=0;g<o;g++)C[v++]=E[g][_];return C}function y4(t,e,r,n){let i;if(Array.isArray(t))i=Jl.fromArray(t);else if(typeof t=="string"){let u=e;if(!u){const h=Jl.rawSplit(t);u=Ra.getBestVersionForData(h,r)}i=Jl.fromString(t,u||40)}else throw new Error("Invalid data");const s=Ra.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=g4(e,r,i),a=Ta.getSymbolSize(e),c=new i4(a);return u4(c,e),h4(c),d4(c,e),Xl(c,r,0),e>=7&&f4(c,e),p4(c,o),isNaN(n)&&(n=Ql.getBestMask(c,Xl.bind(null,c,r))),Ql.applyMask(n,c),Xl(c,r,n),{modules:c,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}d0.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=Gl.M,i,s;return typeof r<"u"&&(n=Gl.from(r.errorCorrectionLevel,Gl.M),i=Ra.from(r.version),s=Ql.from(r.maskPattern),r.toSJISFunc&&Ta.setToSJISFunction(r.toSJISFunc)),y4(e,i,n,s)};var I0={},eu={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const s=t.getScale(n,i);return Math.floor((n+i.margin*2)*s)},t.qrToImageData=function(n,i,s){const o=i.modules.size,a=i.modules.data,c=t.getScale(o,s),u=Math.floor((o+s.margin*2)*c),h=s.margin*c,f=[s.color.light,s.color.dark];for(let p=0;p<u;p++)for(let y=0;y<u;y++){let w=(p*u+y)*4,S=s.color.light;if(p>=h&&y>=h&&p<u-h&&y<u-h){const E=Math.floor((p-h)/c),I=Math.floor((y-h)/c);S=f[a[E*o+I]?1:0]}n[w++]=S.r,n[w++]=S.g,n[w++]=S.b,n[w]=S.a}}})(eu),function(t){const e=eu;function r(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let c=a,u=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(u=n()),c=e.getOptions(c);const h=e.getImageWidth(s.modules.size,c),f=u.getContext("2d"),p=f.createImageData(h,h);return e.qrToImageData(p.data,s,c),r(f,u,h),f.putImageData(p,0,0),u},t.renderToDataURL=function(s,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const u=t.render(s,o,c),h=c.type||"image/png",f=c.rendererOpts||{};return u.toDataURL(h,f.quality)}}(I0);var D0={};const v4=eu;function A0(t,e){const r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function tu(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function w4(t,e,r){let n="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),u=Math.floor(a/e);!c&&!s&&(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(n+=s?tu("M",c+r,.5+u+r):tu("m",i,0),i=0,s=!1),c+1<e&&t[a+1]||(n+=tu("h",o),o=0)):i++}return n}D0.render=function(e,r,n){const i=v4.getOptions(r),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,c=i.color.light.a?"<path "+A0(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",u="<path "+A0(i.color.dark,"stroke")+' d="'+w4(o,s,i.margin)+'"/>',h='viewBox="0 0 '+a+" "+a+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+h+' shape-rendering="crispEdges">'+c+u+`</svg>
`;return typeof n=="function"&&n(null,p),p};const b4=$6,ru=d0,T0=I0,_4=D0;function nu(t,e,r,n,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!b4())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(c,u){try{const h=ru.create(r,n);c(t(h,e,n))}catch(h){u(h)}})}try{const c=ru.create(r,n);i(null,t(c,e,n))}catch(c){i(c)}}oo.create=ru.create,oo.toCanvas=nu.bind(null,T0.render),oo.toDataURL=nu.bind(null,T0.renderToDataURL),oo.toString=nu.bind(null,function(t,e,r){return _4.render(t,r)});var E4=Object.defineProperty,R0=Object.getOwnPropertySymbols,S4=Object.prototype.hasOwnProperty,x4=Object.prototype.propertyIsEnumerable,P0=(t,e,r)=>e in t?E4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,iu=(t,e)=>{for(var r in e||(e={}))S4.call(e,r)&&P0(t,r,e[r]);if(R0)for(var r of R0(e))x4.call(e,r)&&P0(t,r,e[r]);return t};function C4(){var t;const e=(t=Dn.state.themeMode)!=null?t:"dark",r={light:{foreground:{1:"rgb(20,20,20)",2:"rgb(121,134,134)",3:"rgb(158,169,169)"},background:{1:"rgb(255,255,255)",2:"rgb(241,243,243)",3:"rgb(228,231,231)"},overlay:"rgba(0,0,0,0.1)"},dark:{foreground:{1:"rgb(228,231,231)",2:"rgb(148,158,158)",3:"rgb(110,119,119)"},background:{1:"rgb(20,20,20)",2:"rgb(39,42,42)",3:"rgb(59,64,64)"},overlay:"rgba(255,255,255,0.1)"}}[e];return{"--wcm-color-fg-1":r.foreground[1],"--wcm-color-fg-2":r.foreground[2],"--wcm-color-fg-3":r.foreground[3],"--wcm-color-bg-1":r.background[1],"--wcm-color-bg-2":r.background[2],"--wcm-color-bg-3":r.background[3],"--wcm-color-overlay":r.overlay}}function $0(){return{"--wcm-accent-color":"#3396FF","--wcm-accent-fill-color":"#FFFFFF","--wcm-z-index":"89","--wcm-background-color":"#3396FF","--wcm-background-border-radius":"8px","--wcm-container-border-radius":"30px","--wcm-wallet-icon-border-radius":"15px","--wcm-wallet-icon-large-border-radius":"30px","--wcm-wallet-icon-small-border-radius":"7px","--wcm-input-border-radius":"28px","--wcm-button-border-radius":"10px","--wcm-notification-border-radius":"36px","--wcm-secondary-button-border-radius":"28px","--wcm-icon-button-border-radius":"50%","--wcm-button-hover-highlight-border-radius":"10px","--wcm-text-big-bold-size":"20px","--wcm-text-big-bold-weight":"600","--wcm-text-big-bold-line-height":"24px","--wcm-text-big-bold-letter-spacing":"-0.03em","--wcm-text-big-bold-text-transform":"none","--wcm-text-xsmall-bold-size":"10px","--wcm-text-xsmall-bold-weight":"700","--wcm-text-xsmall-bold-line-height":"12px","--wcm-text-xsmall-bold-letter-spacing":"0.02em","--wcm-text-xsmall-bold-text-transform":"uppercase","--wcm-text-xsmall-regular-size":"12px","--wcm-text-xsmall-regular-weight":"600","--wcm-text-xsmall-regular-line-height":"14px","--wcm-text-xsmall-regular-letter-spacing":"-0.03em","--wcm-text-xsmall-regular-text-transform":"none","--wcm-text-small-thin-size":"14px","--wcm-text-small-thin-weight":"500","--wcm-text-small-thin-line-height":"16px","--wcm-text-small-thin-letter-spacing":"-0.03em","--wcm-text-small-thin-text-transform":"none","--wcm-text-small-regular-size":"14px","--wcm-text-small-regular-weight":"600","--wcm-text-small-regular-line-height":"16px","--wcm-text-small-regular-letter-spacing":"-0.03em","--wcm-text-small-regular-text-transform":"none","--wcm-text-medium-regular-size":"16px","--wcm-text-medium-regular-weight":"600","--wcm-text-medium-regular-line-height":"20px","--wcm-text-medium-regular-letter-spacing":"-0.03em","--wcm-text-medium-regular-text-transform":"none","--wcm-font-family":"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', sans-serif","--wcm-font-feature-settings":"'tnum' on, 'lnum' on, 'case' on","--wcm-success-color":"rgb(38,181,98)","--wcm-error-color":"rgb(242, 90, 103)","--wcm-overlay-background-color":"rgba(0, 0, 0, 0.3)","--wcm-overlay-backdrop-filter":"none"}}const rt={getPreset(t){return $0()[t]},setTheme(){const t=document.querySelector(":root"),{themeVariables:e}=Dn.state;if(t){const r=iu(iu(iu({},C4()),$0()),e);Object.entries(r).forEach(([n,i])=>t.style.setProperty(n,i))}},globalCss:ut`*,::after,::before{margin:0;padding:0;box-sizing:border-box;font-style:normal;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;backface-visibility:hidden}button{cursor:pointer;display:flex;justify-content:center;align-items:center;position:relative;border:none;background-color:transparent;transition:all .2s ease}@media (hover:hover) and (pointer:fine){button:active{transition:all .1s ease;transform:scale(.93)}}button::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;transition:background-color,.2s ease}button:disabled{cursor:not-allowed}button svg,button wcm-text{position:relative;z-index:1}input{border:none;outline:0;appearance:none}img{display:block}::selection{color:var(--wcm-accent-fill-color);background:var(--wcm-accent-color)}`},O4=ut`button{border-radius:var(--wcm-secondary-button-border-radius);height:28px;padding:0 10px;background-color:var(--wcm-accent-color)}button path{fill:var(--wcm-accent-fill-color)}button::after{border-radius:inherit;border:1px solid var(--wcm-color-overlay)}button:disabled::after{background-color:transparent}.wcm-icon-left svg{margin-right:5px}.wcm-icon-right svg{margin-left:5px}button:active::after{background-color:var(--wcm-color-overlay)}.wcm-ghost,.wcm-ghost:active::after,.wcm-outline{background-color:transparent}.wcm-ghost:active{opacity:.5}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}.wcm-ghost:hover::after{background-color:transparent}.wcm-ghost:hover{opacity:.5}}button:disabled{background-color:var(--wcm-color-bg-3);pointer-events:none}.wcm-ghost::after{border-color:transparent}.wcm-ghost path{fill:var(--wcm-color-fg-2)}.wcm-outline path{fill:var(--wcm-accent-color)}.wcm-outline:disabled{background-color:transparent;opacity:.5}`;var I4=Object.defineProperty,D4=Object.getOwnPropertyDescriptor,Ji=(t,e,r,n)=>{for(var i=n>1?void 0:n?D4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&I4(e,r,i),i};let zn=class extends Ye{constructor(){super(...arguments),this.disabled=!1,this.iconLeft=void 0,this.iconRight=void 0,this.onClick=()=>null,this.variant="default"}render(){const t={"wcm-icon-left":this.iconLeft!==void 0,"wcm-icon-right":this.iconRight!==void 0,"wcm-ghost":this.variant==="ghost","wcm-outline":this.variant==="outline"};let e="inverse";return this.variant==="ghost"&&(e="secondary"),this.variant==="outline"&&(e="accent"),le`<button class="${En(t)}" ?disabled="${this.disabled}" @click="${this.onClick}">${this.iconLeft}<wcm-text variant="small-regular" color="${e}"><slot></slot></wcm-text>${this.iconRight}</button>`}};zn.styles=[rt.globalCss,O4],Ji([je({type:Boolean})],zn.prototype,"disabled",2),Ji([je()],zn.prototype,"iconLeft",2),Ji([je()],zn.prototype,"iconRight",2),Ji([je()],zn.prototype,"onClick",2),Ji([je()],zn.prototype,"variant",2),zn=Ji([ot("wcm-button")],zn);const A4=ut`:host{display:inline-block}button{padding:0 15px 1px;height:40px;border-radius:var(--wcm-button-border-radius);color:var(--wcm-accent-fill-color);background-color:var(--wcm-accent-color)}button::after{content:'';top:0;bottom:0;left:0;right:0;position:absolute;background-color:transparent;border-radius:inherit;transition:background-color .2s ease;border:1px solid var(--wcm-color-overlay)}button:active::after{background-color:var(--wcm-color-overlay)}button:disabled{padding-bottom:0;background-color:var(--wcm-color-bg-3);color:var(--wcm-color-fg-3)}.wcm-secondary{color:var(--wcm-accent-color);background-color:transparent}.wcm-secondary::after{display:none}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}}`;var T4=Object.defineProperty,R4=Object.getOwnPropertyDescriptor,su=(t,e,r,n)=>{for(var i=n>1?void 0:n?R4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&T4(e,r,i),i};let uo=class extends Ye{constructor(){super(...arguments),this.disabled=!1,this.variant="primary"}render(){const t={"wcm-secondary":this.variant==="secondary"};return le`<button ?disabled="${this.disabled}" class="${En(t)}"><slot></slot></button>`}};uo.styles=[rt.globalCss,A4],su([je({type:Boolean})],uo.prototype,"disabled",2),su([je()],uo.prototype,"variant",2),uo=su([ot("wcm-button-big")],uo);const P4=ut`:host{background-color:var(--wcm-color-bg-2);border-top:1px solid var(--wcm-color-bg-3)}div{padding:10px 20px;display:inherit;flex-direction:inherit;align-items:inherit;width:inherit;justify-content:inherit}`;var $4=Object.defineProperty,N4=Object.getOwnPropertyDescriptor,L4=(t,e,r,n)=>{for(var i=n>1?void 0:n?N4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&$4(e,r,i),i};let ou=class extends Ye{render(){return le`<div><slot></slot></div>`}};ou.styles=[rt.globalCss,P4],ou=L4([ot("wcm-info-footer")],ou);const dt={CROSS_ICON:Ut`<svg width="12" height="12" viewBox="0 0 12 12"><path d="M9.94 11A.75.75 0 1 0 11 9.94L7.414 6.353a.5.5 0 0 1 0-.708L11 2.061A.75.75 0 1 0 9.94 1L6.353 4.586a.5.5 0 0 1-.708 0L2.061 1A.75.75 0 0 0 1 2.06l3.586 3.586a.5.5 0 0 1 0 .708L1 9.939A.75.75 0 1 0 2.06 11l3.586-3.586a.5.5 0 0 1 .708 0L9.939 11Z" fill="#fff"/></svg>`,WALLET_CONNECT_LOGO:Ut`<svg width="178" height="29" viewBox="0 0 178 29" id="wcm-wc-logo"><path d="M10.683 7.926c5.284-5.17 13.85-5.17 19.134 0l.636.623a.652.652 0 0 1 0 .936l-2.176 2.129a.343.343 0 0 1-.478 0l-.875-.857c-3.686-3.607-9.662-3.607-13.348 0l-.937.918a.343.343 0 0 1-.479 0l-2.175-2.13a.652.652 0 0 1 0-.936l.698-.683Zm23.633 4.403 1.935 1.895a.652.652 0 0 1 0 .936l-8.73 8.543a.687.687 0 0 1-.956 0L20.37 17.64a.172.172 0 0 0-.239 0l-6.195 6.063a.687.687 0 0 1-.957 0l-8.73-8.543a.652.652 0 0 1 0-.936l1.936-1.895a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .239 0l6.195-6.064a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .24 0l6.195-6.064a.687.687 0 0 1 .956 0ZM48.093 20.948l2.338-9.355c.139-.515.258-1.07.416-1.942.12.872.258 1.427.357 1.942l2.022 9.355h4.181l3.528-13.874h-3.21l-1.943 8.523a24.825 24.825 0 0 0-.456 2.457c-.158-.931-.317-1.625-.495-2.438l-1.883-8.542h-4.201l-2.042 8.542a41.204 41.204 0 0 0-.475 2.438 41.208 41.208 0 0 0-.476-2.438l-1.903-8.542h-3.349l3.508 13.874h4.083ZM63.33 21.304c1.585 0 2.596-.654 3.11-1.605-.059.297-.078.595-.078.892v.357h2.655V15.22c0-2.735-1.248-4.32-4.3-4.32-2.636 0-4.36 1.466-4.52 3.487h2.914c.1-.891.734-1.426 1.705-1.426.911 0 1.407.515 1.407 1.11 0 .435-.258.693-1.03.792l-1.388.159c-2.061.257-3.825 1.01-3.825 3.19 0 1.982 1.645 3.092 3.35 3.092Zm.891-2.041c-.773 0-1.348-.436-1.348-1.19 0-.733.655-1.09 1.645-1.268l.674-.119c.575-.118.892-.218 1.09-.396v.912c0 1.228-.892 2.06-2.06 2.06ZM70.398 7.074v13.874h2.874V7.074h-2.874ZM74.934 7.074v13.874h2.874V7.074h-2.874ZM84.08 21.304c2.735 0 4.5-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922H81.92ZM94.92 21.146c.633 0 1.248-.1 1.525-.179v-2.18c-.218.04-.475.06-.693.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.338v-2.24h-2.338V7.788H91.47v3.448H89.37v2.24h2.1v4.201c0 2.3 1.15 3.469 3.45 3.469ZM104.62 21.304c3.924 0 6.302-2.299 6.599-5.608h-3.111c-.238 1.803-1.506 3.032-3.369 3.032-2.2 0-3.746-1.784-3.746-4.796 0-2.953 1.605-4.638 3.805-4.638 1.883 0 2.953 1.15 3.171 2.834h3.191c-.317-3.448-2.854-5.41-6.342-5.41-3.984 0-7.036 2.695-7.036 7.214 0 4.677 2.676 7.372 6.838 7.372ZM117.449 21.304c2.993 0 5.114-1.882 5.114-5.172 0-3.23-2.121-5.233-5.114-5.233-2.972 0-5.093 2.002-5.093 5.233 0 3.29 2.101 5.172 5.093 5.172Zm0-2.22c-1.327 0-2.18-1.09-2.18-2.952 0-1.903.892-2.973 2.18-2.973 1.308 0 2.2 1.07 2.2 2.973 0 1.862-.872 2.953-2.2 2.953ZM126.569 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.229-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM137.464 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.228-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM149.949 21.304c2.735 0 4.499-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922h-3.984ZM160.876 21.304c3.013 0 4.658-1.645 4.975-4.201h-2.874c-.099 1.07-.713 1.982-2.001 1.982-1.309 0-2.2-1.21-2.2-2.993 0-1.942 1.03-2.933 2.259-2.933 1.209 0 1.803.872 1.883 1.882h2.873c-.218-2.358-1.823-4.142-4.776-4.142-2.874 0-5.153 1.903-5.153 5.193 0 3.25 1.923 5.212 5.014 5.212ZM172.067 21.146c.634 0 1.248-.1 1.526-.179v-2.18c-.218.04-.476.06-.694.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.339v-2.24h-2.339V7.788h-2.854v3.448h-2.1v2.24h2.1v4.201c0 2.3 1.15 3.469 3.449 3.469Z" fill="#fff"/></svg>`,WALLET_CONNECT_ICON:Ut`<svg width="28" height="20" viewBox="0 0 28 20"><g clip-path="url(#a)"><path d="M7.386 6.482c3.653-3.576 9.575-3.576 13.228 0l.44.43a.451.451 0 0 1 0 .648L19.55 9.033a.237.237 0 0 1-.33 0l-.606-.592c-2.548-2.496-6.68-2.496-9.228 0l-.648.634a.237.237 0 0 1-.33 0L6.902 7.602a.451.451 0 0 1 0-.647l.483-.473Zm16.338 3.046 1.339 1.31a.451.451 0 0 1 0 .648l-6.035 5.909a.475.475 0 0 1-.662 0L14.083 13.2a.119.119 0 0 0-.166 0l-4.283 4.194a.475.475 0 0 1-.662 0l-6.035-5.91a.451.451 0 0 1 0-.647l1.338-1.31a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0Z" fill="#000000"/></g><defs><clipPath id="a"><path fill="#ffffff" d="M0 0h28v20H0z"/></clipPath></defs></svg>`,WALLET_CONNECT_ICON_COLORED:Ut`<svg width="96" height="96" fill="none"><path fill="#fff" d="M25.322 33.597c12.525-12.263 32.83-12.263 45.355 0l1.507 1.476a1.547 1.547 0 0 1 0 2.22l-5.156 5.048a.814.814 0 0 1-1.134 0l-2.074-2.03c-8.737-8.555-22.903-8.555-31.64 0l-2.222 2.175a.814.814 0 0 1-1.134 0l-5.156-5.049a1.547 1.547 0 0 1 0-2.22l1.654-1.62Zm56.019 10.44 4.589 4.494a1.547 1.547 0 0 1 0 2.22l-20.693 20.26a1.628 1.628 0 0 1-2.267 0L48.283 56.632a.407.407 0 0 0-.567 0L33.03 71.012a1.628 1.628 0 0 1-2.268 0L10.07 50.75a1.547 1.547 0 0 1 0-2.22l4.59-4.494a1.628 1.628 0 0 1 2.267 0l14.687 14.38c.156.153.41.153.567 0l14.685-14.38a1.628 1.628 0 0 1 2.268 0l14.687 14.38c.156.153.41.153.567 0l14.686-14.38a1.628 1.628 0 0 1 2.268 0Z"/><path stroke="#000" d="M25.672 33.954c12.33-12.072 32.325-12.072 44.655 0l1.508 1.476a1.047 1.047 0 0 1 0 1.506l-5.157 5.048a.314.314 0 0 1-.434 0l-2.074-2.03c-8.932-8.746-23.409-8.746-32.34 0l-2.222 2.174a.314.314 0 0 1-.434 0l-5.157-5.048a1.047 1.047 0 0 1 0-1.506l1.655-1.62Zm55.319 10.44 4.59 4.494a1.047 1.047 0 0 1 0 1.506l-20.694 20.26a1.128 1.128 0 0 1-1.568 0l-14.686-14.38a.907.907 0 0 0-1.267 0L32.68 70.655a1.128 1.128 0 0 1-1.568 0L10.42 50.394a1.047 1.047 0 0 1 0-1.506l4.59-4.493a1.128 1.128 0 0 1 1.567 0l14.687 14.379a.907.907 0 0 0 1.266 0l-.35-.357.35.357 14.686-14.38a1.128 1.128 0 0 1 1.568 0l14.687 14.38a.907.907 0 0 0 1.267 0l14.686-14.38a1.128 1.128 0 0 1 1.568 0Z"/></svg>`,BACK_ICON:Ut`<svg width="10" height="18" viewBox="0 0 10 18"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.735.179a.75.75 0 0 1 .087 1.057L2.92 8.192a1.25 1.25 0 0 0 0 1.617l5.902 6.956a.75.75 0 1 1-1.144.97L1.776 10.78a2.75 2.75 0 0 1 0-3.559L7.678.265A.75.75 0 0 1 8.735.18Z" fill="#fff"/></svg>`,COPY_ICON:Ut`<svg width="24" height="24" fill="none"><path fill="#fff" fill-rule="evenodd" d="M7.01 7.01c.03-1.545.138-2.5.535-3.28A5 5 0 0 1 9.73 1.545C10.8 1 12.2 1 15 1c2.8 0 4.2 0 5.27.545a5 5 0 0 1 2.185 2.185C23 4.8 23 6.2 23 9c0 2.8 0 4.2-.545 5.27a5 5 0 0 1-2.185 2.185c-.78.397-1.735.505-3.28.534l-.001.01c-.03 1.54-.138 2.493-.534 3.27a5 5 0 0 1-2.185 2.186C13.2 23 11.8 23 9 23c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C1 19.2 1 17.8 1 15c0-2.8 0-4.2.545-5.27A5 5 0 0 1 3.73 7.545C4.508 7.149 5.46 7.04 7 7.01h.01ZM15 15.5c-1.425 0-2.403-.001-3.162-.063-.74-.06-1.139-.172-1.427-.319a3.5 3.5 0 0 1-1.53-1.529c-.146-.288-.257-.686-.318-1.427C8.501 11.403 8.5 10.425 8.5 9c0-1.425.001-2.403.063-3.162.06-.74.172-1.139.318-1.427a3.5 3.5 0 0 1 1.53-1.53c.288-.146.686-.257 1.427-.318.759-.062 1.737-.063 3.162-.063 1.425 0 2.403.001 3.162.063.74.06 1.139.172 1.427.318a3.5 3.5 0 0 1 1.53 1.53c.146.288.257.686.318 1.427.062.759.063 1.737.063 3.162 0 1.425-.001 2.403-.063 3.162-.06.74-.172 1.139-.319 1.427a3.5 3.5 0 0 1-1.529 1.53c-.288.146-.686.257-1.427.318-.759.062-1.737.063-3.162.063ZM7 8.511c-.444.009-.825.025-1.162.052-.74.06-1.139.172-1.427.318a3.5 3.5 0 0 0-1.53 1.53c-.146.288-.257.686-.318 1.427-.062.759-.063 1.737-.063 3.162 0 1.425.001 2.403.063 3.162.06.74.172 1.139.318 1.427a3.5 3.5 0 0 0 1.53 1.53c.288.146.686.257 1.427.318.759.062 1.737.063 3.162.063 1.425 0 2.403-.001 3.162-.063.74-.06 1.139-.172 1.427-.319a3.5 3.5 0 0 0 1.53-1.53c.146-.287.257-.685.318-1.426.027-.337.043-.718.052-1.162H15c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C7 13.2 7 11.8 7 9v-.489Z" clip-rule="evenodd"/></svg>`,RETRY_ICON:Ut`<svg width="15" height="16" viewBox="0 0 15 16"><path d="M6.464 2.03A.75.75 0 0 0 5.403.97L2.08 4.293a1 1 0 0 0 0 1.414L5.403 9.03a.75.75 0 0 0 1.06-1.06L4.672 6.177a.25.25 0 0 1 .177-.427h2.085a4 4 0 1 1-3.93 4.746c-.077-.407-.405-.746-.82-.746-.414 0-.755.338-.7.748a5.501 5.501 0 1 0 5.45-6.248H4.848a.25.25 0 0 1-.177-.427L6.464 2.03Z" fill="#fff"/></svg>`,DESKTOP_ICON:Ut`<svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C2.204 1 3.13 1 4.98 1h6.04c1.85 0 2.775 0 3.466.394a3 3 0 0 1 1.12 1.12C16 3.204 16 4.13 16 5.98v1.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C13.796 12 12.87 12 11.02 12H4.98c-1.85 0-2.775 0-3.466-.394a3 3 0 0 1-1.12-1.12C0 9.796 0 8.87 0 7.02V5.98ZM4.98 2.5h6.04c.953 0 1.568.001 2.034.043.446.04.608.108.69.154a1.5 1.5 0 0 1 .559.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033v1.04c0 .952-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.046-.243.114-.69.154-.466.042-1.08.043-2.033.043H4.98c-.952 0-1.568-.001-2.034-.043-.446-.04-.608-.108-.69-.154a1.5 1.5 0 0 1-.559-.56c-.046-.08-.114-.243-.154-.69-.042-.465-.043-1.08-.043-2.033V5.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.046.243-.114.69-.154.465-.042 1.08-.043 2.033-.043Z" fill="#fff"/><path d="M4 14.25a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,MOBILE_ICON:Ut`<svg width="16" height="16" viewBox="0 0 16 16"><path d="M6.75 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C5.204 0 6.136 0 8 0s2.795 0 3.486.394a3 3 0 0 1 1.12 1.12C13 2.204 13 3.13 13 4.98v6.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C10.796 16 9.864 16 8 16s-2.795 0-3.486-.394a3 3 0 0 1-1.12-1.12C3 13.796 3 12.87 3 11.02V4.98Zm8.5 0v6.04c0 .953-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.045-.242.113-.693.154-.47.042-1.091.043-2.05.043-.959 0-1.58-.001-2.05-.043-.45-.04-.613-.109-.693-.154a1.5 1.5 0 0 1-.56-.56c-.046-.08-.114-.243-.154-.69-.042-.466-.043-1.08-.043-2.033V4.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.045.243-.113.693-.154C6.42 1.501 7.041 1.5 8 1.5c.959 0 1.58.001 2.05.043.45.04.613.109.693.154a1.5 1.5 0 0 1 .56.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033Z" fill="#fff"/></svg>`,ARROW_DOWN_ICON:Ut`<svg width="14" height="14" viewBox="0 0 14 14"><path d="M2.28 7.47a.75.75 0 0 0-1.06 1.06l5.25 5.25a.75.75 0 0 0 1.06 0l5.25-5.25a.75.75 0 0 0-1.06-1.06l-3.544 3.543a.25.25 0 0 1-.426-.177V.75a.75.75 0 0 0-1.5 0v10.086a.25.25 0 0 1-.427.176L2.28 7.47Z" fill="#fff"/></svg>`,ARROW_UP_RIGHT_ICON:Ut`<svg width="15" height="14" fill="none"><path d="M4.5 1.75A.75.75 0 0 1 5.25 1H12a1.5 1.5 0 0 1 1.5 1.5v6.75a.75.75 0 0 1-1.5 0V4.164a.25.25 0 0 0-.427-.176L4.061 11.5A.75.75 0 0 1 3 10.44l7.513-7.513a.25.25 0 0 0-.177-.427H5.25a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,ARROW_RIGHT_ICON:Ut`<svg width="6" height="14" viewBox="0 0 6 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.181 1.099a.75.75 0 0 1 1.024.279l2.433 4.258a2.75 2.75 0 0 1 0 2.729l-2.433 4.257a.75.75 0 1 1-1.303-.744L4.335 7.62a1.25 1.25 0 0 0 0-1.24L1.902 2.122a.75.75 0 0 1 .28-1.023Z" fill="#fff"/></svg>`,QRCODE_ICON:Ut`<svg width="25" height="24" viewBox="0 0 25 24"><path d="M23.748 9a.748.748 0 0 0 .748-.752c-.018-2.596-.128-4.07-.784-5.22a6 6 0 0 0-2.24-2.24c-1.15-.656-2.624-.766-5.22-.784a.748.748 0 0 0-.752.748c0 .414.335.749.748.752 1.015.007 1.82.028 2.494.088.995.09 1.561.256 1.988.5.7.398 1.28.978 1.679 1.678.243.427.41.993.498 1.988.061.675.082 1.479.09 2.493a.753.753 0 0 0 .75.749ZM3.527.788C4.677.132 6.152.022 8.747.004A.748.748 0 0 1 9.5.752a.753.753 0 0 1-.749.752c-1.014.007-1.818.028-2.493.088-.995.09-1.561.256-1.988.5-.7.398-1.28.978-1.679 1.678-.243.427-.41.993-.499 1.988-.06.675-.081 1.479-.088 2.493A.753.753 0 0 1 1.252 9a.748.748 0 0 1-.748-.752c.018-2.596.128-4.07.784-5.22a6 6 0 0 1 2.24-2.24ZM1.252 15a.748.748 0 0 0-.748.752c.018 2.596.128 4.07.784 5.22a6 6 0 0 0 2.24 2.24c1.15.656 2.624.766 5.22.784a.748.748 0 0 0 .752-.748.753.753 0 0 0-.749-.752c-1.014-.007-1.818-.028-2.493-.089-.995-.089-1.561-.255-1.988-.498a4.5 4.5 0 0 1-1.679-1.68c-.243-.426-.41-.992-.499-1.987-.06-.675-.081-1.479-.088-2.493A.753.753 0 0 0 1.252 15ZM22.996 15.749a.753.753 0 0 1 .752-.749c.415 0 .751.338.748.752-.018 2.596-.128 4.07-.784 5.22a6 6 0 0 1-2.24 2.24c-1.15.656-2.624.766-5.22.784a.748.748 0 0 1-.752-.748c0-.414.335-.749.748-.752 1.015-.007 1.82-.028 2.494-.089.995-.089 1.561-.255 1.988-.498a4.5 4.5 0 0 0 1.679-1.68c.243-.426.41-.992.498-1.987.061-.675.082-1.479.09-2.493Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 4a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 11h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 4H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM13.5 6.5A2.5 2.5 0 0 1 16 4h2a2.5 2.5 0 0 1 2.5 2.5v2A2.5 2.5 0 0 1 18 11h-2a2.5 2.5 0 0 1-2.5-2.5v-2Zm2.5-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1ZM7 13a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 20h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 13H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Z" fill="#fff"/><path d="M13.5 15.5c0-.465 0-.697.038-.89a2 2 0 0 1 1.572-1.572C15.303 13 15.535 13 16 13v2.5h-2.5ZM18 13c.465 0 .697 0 .89.038a2 2 0 0 1 1.572 1.572c.038.193.038.425.038.89H18V13ZM18 17.5h2.5c0 .465 0 .697-.038.89a2 2 0 0 1-1.572 1.572C18.697 20 18.465 20 18 20v-2.5ZM13.5 17.5H16V20c-.465 0-.697 0-.89-.038a2 2 0 0 1-1.572-1.572c-.038-.193-.038-.425-.038-.89Z" fill="#fff"/></svg>`,SCAN_ICON:Ut`<svg width="16" height="16" fill="none"><path fill="#fff" d="M10 15.216c0 .422.347.763.768.74 1.202-.064 2.025-.222 2.71-.613a5.001 5.001 0 0 0 1.865-1.866c.39-.684.549-1.507.613-2.709a.735.735 0 0 0-.74-.768.768.768 0 0 0-.76.732c-.009.157-.02.306-.032.447-.073.812-.206 1.244-.384 1.555-.31.545-.761.996-1.306 1.306-.311.178-.743.311-1.555.384-.141.013-.29.023-.447.032a.768.768 0 0 0-.732.76ZM10 .784c0 .407.325.737.732.76.157.009.306.02.447.032.812.073 1.244.206 1.555.384a3.5 3.5 0 0 1 1.306 1.306c.178.311.311.743.384 1.555.013.142.023.29.032.447a.768.768 0 0 0 .76.732.734.734 0 0 0 .74-.768c-.064-1.202-.222-2.025-.613-2.71A5 5 0 0 0 13.477.658c-.684-.39-1.507-.549-2.709-.613a.735.735 0 0 0-.768.74ZM5.232.044A.735.735 0 0 1 6 .784a.768.768 0 0 1-.732.76c-.157.009-.305.02-.447.032-.812.073-1.244.206-1.555.384A3.5 3.5 0 0 0 1.96 3.266c-.178.311-.311.743-.384 1.555-.013.142-.023.29-.032.447A.768.768 0 0 1 .784 6a.735.735 0 0 1-.74-.768c.064-1.202.222-2.025.613-2.71A5 5 0 0 1 2.523.658C3.207.267 4.03.108 5.233.044ZM5.268 14.456a.768.768 0 0 1 .732.76.734.734 0 0 1-.768.74c-1.202-.064-2.025-.222-2.71-.613a5 5 0 0 1-1.865-1.866c-.39-.684-.549-1.507-.613-2.709A.735.735 0 0 1 .784 10c.407 0 .737.325.76.732.009.157.02.306.032.447.073.812.206 1.244.384 1.555a3.5 3.5 0 0 0 1.306 1.306c.311.178.743.311 1.555.384.142.013.29.023.447.032Z"/></svg>`,CHECKMARK_ICON:Ut`<svg width="13" height="12" viewBox="0 0 13 12"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.155.132a.75.75 0 0 1 .232 1.035L5.821 11.535a1 1 0 0 1-1.626.09L.665 7.21a.75.75 0 1 1 1.17-.937L4.71 9.867a.25.25 0 0 0 .406-.023L11.12.364a.75.75 0 0 1 1.035-.232Z" fill="#fff"/></svg>`,SEARCH_ICON:Ut`<svg width="20" height="21"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.432 13.992c-.354-.353-.91-.382-1.35-.146a5.5 5.5 0 1 1 2.265-2.265c-.237.441-.208.997.145 1.35l3.296 3.296a.75.75 0 1 1-1.06 1.061l-3.296-3.296Zm.06-5a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z" fill="#949E9E"/></svg>`,WALLET_PLACEHOLDER:Ut`<svg width="60" height="60" fill="none" viewBox="0 0 60 60"><g clip-path="url(#q)"><path id="wallet-placeholder-fill" fill="#fff" d="M0 24.9c0-9.251 0-13.877 1.97-17.332a15 15 0 0 1 5.598-5.597C11.023 0 15.648 0 24.9 0h10.2c9.252 0 13.877 0 17.332 1.97a15 15 0 0 1 5.597 5.598C60 11.023 60 15.648 60 24.9v10.2c0 9.252 0 13.877-1.97 17.332a15.001 15.001 0 0 1-5.598 5.597C48.977 60 44.352 60 35.1 60H24.9c-9.251 0-13.877 0-17.332-1.97a15 15 0 0 1-5.597-5.598C0 48.977 0 44.352 0 35.1V24.9Z"/><path id="wallet-placeholder-dash" stroke="#000" stroke-dasharray="4 4" stroke-width="1.5" d="M.04 41.708a231.598 231.598 0 0 1-.039-4.403l.75-.001L.75 35.1v-2.55H0v-5.1h.75V24.9l.001-2.204h-.75c.003-1.617.011-3.077.039-4.404l.75.016c.034-1.65.099-3.08.218-4.343l-.746-.07c.158-1.678.412-3.083.82-4.316l.713.236c.224-.679.497-1.296.827-1.875a14.25 14.25 0 0 1 1.05-1.585L3.076 5.9A15 15 0 0 1 5.9 3.076l.455.596a14.25 14.25 0 0 1 1.585-1.05c.579-.33 1.196-.603 1.875-.827l-.236-.712C10.812.674 12.217.42 13.895.262l.07.746C15.23.89 16.66.824 18.308.79l-.016-.75C19.62.012 21.08.004 22.695.001l.001.75L24.9.75h2.55V0h5.1v.75h2.55l2.204.001v-.75c1.617.003 3.077.011 4.404.039l-.016.75c1.65.034 3.08.099 4.343.218l.07-.746c1.678.158 3.083.412 4.316.82l-.236.713c.679.224 1.296.497 1.875.827a14.24 14.24 0 0 1 1.585 1.05l.455-.596A14.999 14.999 0 0 1 56.924 5.9l-.596.455c.384.502.735 1.032 1.05 1.585.33.579.602 1.196.827 1.875l.712-.236c.409 1.233.663 2.638.822 4.316l-.747.07c.119 1.264.184 2.694.218 4.343l.75-.016c.028 1.327.036 2.787.039 4.403l-.75.001.001 2.204v2.55H60v5.1h-.75v2.55l-.001 2.204h.75a231.431 231.431 0 0 1-.039 4.404l-.75-.016c-.034 1.65-.099 3.08-.218 4.343l.747.07c-.159 1.678-.413 3.083-.822 4.316l-.712-.236a10.255 10.255 0 0 1-.827 1.875 14.242 14.242 0 0 1-1.05 1.585l.596.455a14.997 14.997 0 0 1-2.824 2.824l-.455-.596c-.502.384-1.032.735-1.585 1.05-.579.33-1.196.602-1.875.827l.236.712c-1.233.409-2.638.663-4.316.822l-.07-.747c-1.264.119-2.694.184-4.343.218l.016.75c-1.327.028-2.787.036-4.403.039l-.001-.75-2.204.001h-2.55V60h-5.1v-.75H24.9l-2.204-.001v.75a231.431 231.431 0 0 1-4.404-.039l.016-.75c-1.65-.034-3.08-.099-4.343-.218l-.07.747c-1.678-.159-3.083-.413-4.316-.822l.236-.712a10.258 10.258 0 0 1-1.875-.827 14.252 14.252 0 0 1-1.585-1.05l-.455.596A14.999 14.999 0 0 1 3.076 54.1l.596-.455a14.24 14.24 0 0 1-1.05-1.585 10.259 10.259 0 0 1-.827-1.875l-.712.236C.674 49.188.42 47.783.262 46.105l.746-.07C.89 44.77.824 43.34.79 41.692l-.75.016Z"/><path fill="#fff" fill-rule="evenodd" d="M35.643 32.145c-.297-.743-.445-1.114-.401-1.275a.42.42 0 0 1 .182-.27c.134-.1.463-.1 1.123-.1.742 0 1.499.046 2.236-.05a6 6 0 0 0 5.166-5.166c.051-.39.051-.855.051-1.784 0-.928 0-1.393-.051-1.783a6 6 0 0 0-5.166-5.165c-.39-.052-.854-.052-1.783-.052h-7.72c-4.934 0-7.401 0-9.244 1.051a8 8 0 0 0-2.985 2.986C16.057 22.28 16.003 24.58 16 29 15.998 31.075 16 33.15 16 35.224A7.778 7.778 0 0 0 23.778 43H28.5c1.394 0 2.09 0 2.67-.116a6 6 0 0 0 4.715-4.714c.115-.58.115-1.301.115-2.744 0-1.31 0-1.964-.114-2.49a4.998 4.998 0 0 0-.243-.792Z" clip-rule="evenodd"/><path fill="#9EA9A9" fill-rule="evenodd" d="M37 18h-7.72c-2.494 0-4.266.002-5.647.126-1.361.122-2.197.354-2.854.728a6.5 6.5 0 0 0-2.425 2.426c-.375.657-.607 1.492-.729 2.853-.11 1.233-.123 2.777-.125 4.867 0 .7 0 1.05.097 1.181.096.13.182.181.343.2.163.02.518-.18 1.229-.581a6.195 6.195 0 0 1 3.053-.8H37c.977 0 1.32-.003 1.587-.038a4.5 4.5 0 0 0 3.874-3.874c.036-.268.039-.611.039-1.588 0-.976-.003-1.319-.038-1.587a4.5 4.5 0 0 0-3.875-3.874C38.32 18.004 37.977 18 37 18Zm-7.364 12.5h-7.414a4.722 4.722 0 0 0-4.722 4.723 6.278 6.278 0 0 0 6.278 6.278H28.5c1.466 0 1.98-.008 2.378-.087a4.5 4.5 0 0 0 3.535-3.536c.08-.397.087-.933.087-2.451 0-1.391-.009-1.843-.08-2.17a3.5 3.5 0 0 0-2.676-2.676c-.328-.072-.762-.08-2.108-.08Z" clip-rule="evenodd"/></g><defs><clipPath id="q"><path fill="#fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>`,GLOBE_ICON:Ut`<svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="#fff" fill-rule="evenodd" d="M15.5 8a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0Zm-2.113.75c.301 0 .535.264.47.558a6.01 6.01 0 0 1-2.867 3.896c-.203.116-.42-.103-.334-.32.409-1.018.691-2.274.797-3.657a.512.512 0 0 1 .507-.477h1.427Zm.47-2.058c.065.294-.169.558-.47.558H11.96a.512.512 0 0 1-.507-.477c-.106-1.383-.389-2.638-.797-3.656-.087-.217.13-.437.333-.32a6.01 6.01 0 0 1 2.868 3.895Zm-4.402.558c.286 0 .515-.24.49-.525-.121-1.361-.429-2.534-.83-3.393-.279-.6-.549-.93-.753-1.112a.535.535 0 0 0-.724 0c-.204.182-.474.513-.754 1.112-.4.859-.708 2.032-.828 3.393a.486.486 0 0 0 .49.525h2.909Zm-5.415 0c.267 0 .486-.21.507-.477.106-1.383.389-2.638.797-3.656.087-.217-.13-.437-.333-.32a6.01 6.01 0 0 0-2.868 3.895c-.065.294.169.558.47.558H4.04ZM2.143 9.308c-.065-.294.169-.558.47-.558H4.04c.267 0 .486.21.507.477.106 1.383.389 2.639.797 3.657.087.217-.13.436-.333.32a6.01 6.01 0 0 1-2.868-3.896Zm3.913-.033a.486.486 0 0 1 .49-.525h2.909c.286 0 .515.24.49.525-.121 1.361-.428 2.535-.83 3.394-.279.6-.549.93-.753 1.112a.535.535 0 0 1-.724 0c-.204-.182-.474-.513-.754-1.112-.4-.859-.708-2.033-.828-3.394Z" clip-rule="evenodd"/></svg>`},M4=ut`.wcm-toolbar-placeholder{top:0;bottom:0;left:0;right:0;width:100%;position:absolute;display:block;pointer-events:none;height:100px;border-radius:calc(var(--wcm-background-border-radius) * .9);background-color:var(--wcm-background-color);background-position:center;background-size:cover}.wcm-toolbar{height:38px;display:flex;position:relative;margin:5px 15px 5px 5px;justify-content:space-between;align-items:center}.wcm-toolbar img,.wcm-toolbar svg{height:28px;object-position:left center;object-fit:contain}#wcm-wc-logo path{fill:var(--wcm-accent-fill-color)}button{width:28px;height:28px;border-radius:var(--wcm-icon-button-border-radius);border:0;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:var(--wcm-color-bg-1);box-shadow:0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-bg-2)}button svg{display:block;object-position:center}button path{fill:var(--wcm-color-fg-1)}.wcm-toolbar div{display:flex}@media(hover:hover){button:hover{background-color:var(--wcm-color-bg-2)}}`;var k4=Object.defineProperty,F4=Object.getOwnPropertyDescriptor,U4=(t,e,r,n)=>{for(var i=n>1?void 0:n?F4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&k4(e,r,i),i};let au=class extends Ye{render(){return le`<div class="wcm-toolbar-placeholder"></div><div class="wcm-toolbar">${dt.WALLET_CONNECT_LOGO} <button @click="${Yn.close}">${dt.CROSS_ICON}</button></div>`}};au.styles=[rt.globalCss,M4],au=U4([ot("wcm-modal-backcard")],au);const j4=ut`main{padding:20px;padding-top:0;width:100%}`;var B4=Object.defineProperty,q4=Object.getOwnPropertyDescriptor,z4=(t,e,r,n)=>{for(var i=n>1?void 0:n?q4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&B4(e,r,i),i};let cu=class extends Ye{render(){return le`<main><slot></slot></main>`}};cu.styles=[rt.globalCss,j4],cu=z4([ot("wcm-modal-content")],cu);const W4=ut`footer{padding:10px;display:flex;flex-direction:column;align-items:inherit;justify-content:inherit;border-top:1px solid var(--wcm-color-bg-2)}`;var V4=Object.defineProperty,H4=Object.getOwnPropertyDescriptor,K4=(t,e,r,n)=>{for(var i=n>1?void 0:n?H4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&V4(e,r,i),i};let lu=class extends Ye{render(){return le`<footer><slot></slot></footer>`}};lu.styles=[rt.globalCss,W4],lu=K4([ot("wcm-modal-footer")],lu);const Z4=ut`header{display:flex;justify-content:center;align-items:center;padding:20px;position:relative}.wcm-border{border-bottom:1px solid var(--wcm-color-bg-2);margin-bottom:20px}header button{padding:15px 20px}header button:active{opacity:.5}@media(hover:hover){header button:hover{opacity:.5}}.wcm-back-btn{position:absolute;left:0}.wcm-action-btn{position:absolute;right:0}path{fill:var(--wcm-accent-color)}`;var G4=Object.defineProperty,Q4=Object.getOwnPropertyDescriptor,ho=(t,e,r,n)=>{for(var i=n>1?void 0:n?Q4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&G4(e,r,i),i};let wi=class extends Ye{constructor(){super(...arguments),this.title="",this.onAction=void 0,this.actionIcon=void 0,this.border=!1}backBtnTemplate(){return le`<button class="wcm-back-btn" @click="${Nt.goBack}">${dt.BACK_ICON}</button>`}actionBtnTemplate(){return le`<button class="wcm-action-btn" @click="${this.onAction}">${this.actionIcon}</button>`}render(){const t={"wcm-border":this.border},e=Nt.state.history.length>1,r=this.title?le`<wcm-text variant="big-bold">${this.title}</wcm-text>`:le`<slot></slot>`;return le`<header class="${En(t)}">${e?this.backBtnTemplate():null} ${r} ${this.onAction?this.actionBtnTemplate():null}</header>`}};wi.styles=[rt.globalCss,Z4],ho([je()],wi.prototype,"title",2),ho([je()],wi.prototype,"onAction",2),ho([je()],wi.prototype,"actionIcon",2),ho([je({type:Boolean})],wi.prototype,"border",2),wi=ho([ot("wcm-modal-header")],wi);const Pe={MOBILE_BREAKPOINT:600,WCM_RECENT_WALLET_DATA:"WCM_RECENT_WALLET_DATA",EXPLORER_WALLET_URL:"https://explorer.walletconnect.com/?type=wallet",getShadowRootElement(t,e){const r=t.renderRoot.querySelector(e);if(!r)throw new Error(`${e} not found`);return r},getWalletIcon({id:t,image_id:e}){const{walletImages:r}=Rr.state;return r!=null&&r[t]?r[t]:e?xr.getWalletImageUrl(e):""},getWalletName(t,e=!1){return e&&t.length>8?`${t.substring(0,8)}..`:t},isMobileAnimation(){return window.innerWidth<=Pe.MOBILE_BREAKPOINT},async preloadImage(t){const e=new Promise((r,n)=>{const i=new Image;i.onload=r,i.onerror=n,i.crossOrigin="anonymous",i.src=t});return Promise.race([e,we.wait(3e3)])},getErrorMessage(t){return t instanceof Error?t.message:"Unknown Error"},debounce(t,e=500){let r;return(...n)=>{function i(){t(...n)}r&&clearTimeout(r),r=setTimeout(i,e)}},handleMobileLinking(t){const{walletConnectUri:e}=Vt.state,{mobile:r,name:n}=t,i=r==null?void 0:r.native,s=r==null?void 0:r.universal;Pe.setRecentWallet(t);function o(a){let c="";i?c=we.formatUniversalUrl(i,a,n):s&&(c=we.formatNativeUrl(s,a,n)),we.openHref(c,"_self")}e&&o(e)},handleAndroidLinking(){const{walletConnectUri:t}=Vt.state;t&&(we.setWalletConnectAndroidDeepLink(t),we.openHref(t,"_self"))},async handleUriCopy(){const{walletConnectUri:t}=Vt.state;if(t)try{await navigator.clipboard.writeText(t),An.openToast("Link copied","success")}catch{An.openToast("Failed to copy","error")}},getCustomImageUrls(){const{walletImages:t}=Rr.state,e=Object.values(t??{});return Object.values(e)},truncate(t,e=8){return t.length<=e?t:`${t.substring(0,4)}...${t.substring(t.length-4)}`},setRecentWallet(t){try{localStorage.setItem(Pe.WCM_RECENT_WALLET_DATA,JSON.stringify(t))}catch{console.info("Unable to set recent wallet")}},getRecentWallet(){try{const t=localStorage.getItem(Pe.WCM_RECENT_WALLET_DATA);return t?JSON.parse(t):void 0}catch{console.info("Unable to get recent wallet")}},caseSafeIncludes(t,e){return t.toUpperCase().includes(e.toUpperCase())},openWalletExplorerUrl(){we.openHref(Pe.EXPLORER_WALLET_URL,"_blank")},getCachedRouterWalletPlatforms(){const{desktop:t,mobile:e}=we.getWalletRouterData(),r=!!(t!=null&&t.native),n=!!(t!=null&&t.universal),i=!!(e!=null&&e.native)||!!(e!=null&&e.universal);return{isDesktop:r,isMobile:i,isWeb:n}},goToConnectingView(t){Nt.setData({Wallet:t});const e=we.isMobile(),{isDesktop:r,isWeb:n,isMobile:i}=Pe.getCachedRouterWalletPlatforms();e?i?Nt.push("MobileConnecting"):n?Nt.push("WebConnecting"):Nt.push("InstallWallet"):r?Nt.push("DesktopConnecting"):n?Nt.push("WebConnecting"):i?Nt.push("MobileQrcodeConnecting"):Nt.push("InstallWallet")}},Y4=ut`.wcm-router{overflow:hidden;will-change:transform}.wcm-content{display:flex;flex-direction:column}`;var J4=Object.defineProperty,X4=Object.getOwnPropertyDescriptor,uu=(t,e,r,n)=>{for(var i=n>1?void 0:n?X4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&J4(e,r,i),i};let fo=class extends Ye{constructor(){super(),this.view=Nt.state.view,this.prevView=Nt.state.view,this.unsubscribe=void 0,this.oldHeight="0px",this.resizeObserver=void 0,this.unsubscribe=Nt.subscribe(t=>{this.view!==t.view&&this.onChangeRoute()})}firstUpdated(){this.resizeObserver=new ResizeObserver(([t])=>{const e=`${t.contentRect.height}px`;this.oldHeight!=="0px"&&vi(this.routerEl,{height:[this.oldHeight,e]},{duration:.2}),this.oldHeight=e}),this.resizeObserver.observe(this.contentEl)}disconnectedCallback(){var t,e;(t=this.unsubscribe)==null||t.call(this),(e=this.resizeObserver)==null||e.disconnect()}get routerEl(){return Pe.getShadowRootElement(this,".wcm-router")}get contentEl(){return Pe.getShadowRootElement(this,".wcm-content")}viewTemplate(){switch(this.view){case"ConnectWallet":return le`<wcm-connect-wallet-view></wcm-connect-wallet-view>`;case"DesktopConnecting":return le`<wcm-desktop-connecting-view></wcm-desktop-connecting-view>`;case"MobileConnecting":return le`<wcm-mobile-connecting-view></wcm-mobile-connecting-view>`;case"WebConnecting":return le`<wcm-web-connecting-view></wcm-web-connecting-view>`;case"MobileQrcodeConnecting":return le`<wcm-mobile-qr-connecting-view></wcm-mobile-qr-connecting-view>`;case"WalletExplorer":return le`<wcm-wallet-explorer-view></wcm-wallet-explorer-view>`;case"Qrcode":return le`<wcm-qrcode-view></wcm-qrcode-view>`;case"InstallWallet":return le`<wcm-install-wallet-view></wcm-install-wallet-view>`;default:return le`<div>Not Found</div>`}}async onChangeRoute(){await vi(this.routerEl,{opacity:[1,0],scale:[1,1.02]},{duration:.15,delay:.1}).finished,this.view=Nt.state.view,vi(this.routerEl,{opacity:[0,1],scale:[.99,1]},{duration:.37,delay:.05})}render(){return le`<div class="wcm-router"><div class="wcm-content">${this.viewTemplate()}</div></div>`}};fo.styles=[rt.globalCss,Y4],uu([Dr()],fo.prototype,"view",2),uu([Dr()],fo.prototype,"prevView",2),fo=uu([ot("wcm-modal-router")],fo);const eS=ut`div{height:36px;width:max-content;display:flex;justify-content:center;align-items:center;padding:9px 15px 11px;position:absolute;top:12px;box-shadow:0 6px 14px -6px rgba(10,16,31,.3),0 10px 32px -4px rgba(10,16,31,.15);z-index:2;left:50%;transform:translateX(-50%);pointer-events:none;backdrop-filter:blur(20px) saturate(1.8);-webkit-backdrop-filter:blur(20px) saturate(1.8);border-radius:var(--wcm-notification-border-radius);border:1px solid var(--wcm-color-overlay);background-color:var(--wcm-color-overlay)}svg{margin-right:5px}@-moz-document url-prefix(){div{background-color:var(--wcm-color-bg-3)}}.wcm-success path{fill:var(--wcm-accent-color)}.wcm-error path{fill:var(--wcm-error-color)}`;var tS=Object.defineProperty,rS=Object.getOwnPropertyDescriptor,N0=(t,e,r,n)=>{for(var i=n>1?void 0:n?rS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&tS(e,r,i),i};let Pa=class extends Ye{constructor(){super(),this.open=!1,this.unsubscribe=void 0,this.timeout=void 0,this.unsubscribe=An.subscribe(t=>{t.open?(this.open=!0,this.timeout=setTimeout(()=>An.closeToast(),2200)):(this.open=!1,clearTimeout(this.timeout))})}disconnectedCallback(){var t;(t=this.unsubscribe)==null||t.call(this),clearTimeout(this.timeout),An.closeToast()}render(){const{message:t,variant:e}=An.state,r={"wcm-success":e==="success","wcm-error":e==="error"};return this.open?le`<div class="${En(r)}">${e==="success"?dt.CHECKMARK_ICON:null} ${e==="error"?dt.CROSS_ICON:null}<wcm-text variant="small-regular">${t}</wcm-text></div>`:null}};Pa.styles=[rt.globalCss,eS],N0([Dr()],Pa.prototype,"open",2),Pa=N0([ot("wcm-modal-toast")],Pa);const nS=.1,L0=2.5,Sn=7;function hu(t,e,r){return t===e?!1:(t-e<0?e-t:t-e)<=r+nS}function iS(t,e){const r=Array.prototype.slice.call(oo.create(t,{errorCorrectionLevel:e}).modules.data,0),n=Math.sqrt(r.length);return r.reduce((i,s,o)=>(o%n===0?i.push([s]):i[i.length-1].push(s))&&i,[])}const sS={generate(t,e,r){const n="#141414",i="#ffffff",s=[],o=iS(t,"Q"),a=e/o.length,c=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];c.forEach(({x:w,y:S})=>{const E=(o.length-Sn)*a*w,I=(o.length-Sn)*a*S,b=.45;for(let C=0;C<c.length;C+=1){const v=a*(Sn-C*2);s.push(Ut`<rect fill="${C%2===0?n:i}" height="${v}" rx="${v*b}" ry="${v*b}" width="${v}" x="${E+a*C}" y="${I+a*C}">`)}});const u=Math.floor((r+25)/a),h=o.length/2-u/2,f=o.length/2+u/2-1,p=[];o.forEach((w,S)=>{w.forEach((E,I)=>{if(o[S][I]&&!(S<Sn&&I<Sn||S>o.length-(Sn+1)&&I<Sn||S<Sn&&I>o.length-(Sn+1))&&!(S>h&&S<f&&I>h&&I<f)){const b=S*a+a/2,C=I*a+a/2;p.push([b,C])}})});const y={};return p.forEach(([w,S])=>{y[w]?y[w].push(S):y[w]=[S]}),Object.entries(y).map(([w,S])=>{const E=S.filter(I=>S.every(b=>!hu(I,b,a)));return[Number(w),E]}).forEach(([w,S])=>{S.forEach(E=>{s.push(Ut`<circle cx="${w}" cy="${E}" fill="${n}" r="${a/L0}">`)})}),Object.entries(y).filter(([w,S])=>S.length>1).map(([w,S])=>{const E=S.filter(I=>S.some(b=>hu(I,b,a)));return[Number(w),E]}).map(([w,S])=>{S.sort((I,b)=>I<b?-1:1);const E=[];for(const I of S){const b=E.find(C=>C.some(v=>hu(I,v,a)));b?b.push(I):E.push([I])}return[w,E.map(I=>[I[0],I[I.length-1]])]}).forEach(([w,S])=>{S.forEach(([E,I])=>{s.push(Ut`<line x1="${w}" x2="${w}" y1="${E}" y2="${I}" stroke="${n}" stroke-width="${a/(L0/2)}" stroke-linecap="round">`)})}),s}},oS=ut`@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}div{position:relative;user-select:none;display:block;overflow:hidden;aspect-ratio:1/1;animation:fadeIn ease .2s}.wcm-dark{background-color:#fff;border-radius:var(--wcm-container-border-radius);padding:18px;box-shadow:0 2px 5px #000}svg:first-child,wcm-wallet-image{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{width:25%;height:25%;border-radius:var(--wcm-wallet-icon-border-radius)}svg:first-child{transform:translateY(-50%) translateX(-50%) scale(.9)}svg:first-child path:first-child{fill:var(--wcm-accent-color)}svg:first-child path:last-child{stroke:var(--wcm-color-overlay)}`;var aS=Object.defineProperty,cS=Object.getOwnPropertyDescriptor,Xi=(t,e,r,n)=>{for(var i=n>1?void 0:n?cS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&aS(e,r,i),i};let xn=class extends Ye{constructor(){super(...arguments),this.uri="",this.size=0,this.imageId=void 0,this.walletId=void 0,this.imageUrl=void 0}svgTemplate(){const t=Dn.state.themeMode==="light"?this.size:this.size-36;return Ut`<svg height="${t}" width="${t}">${sS.generate(this.uri,t,t/4)}</svg>`}render(){const t={"wcm-dark":Dn.state.themeMode==="dark"};return le`<div style="${`width: ${this.size}px`}" class="${En(t)}">${this.walletId||this.imageUrl?le`<wcm-wallet-image walletId="${Er(this.walletId)}" imageId="${Er(this.imageId)}" imageUrl="${Er(this.imageUrl)}"></wcm-wallet-image>`:dt.WALLET_CONNECT_ICON_COLORED} ${this.svgTemplate()}</div>`}};xn.styles=[rt.globalCss,oS],Xi([je()],xn.prototype,"uri",2),Xi([je({type:Number})],xn.prototype,"size",2),Xi([je()],xn.prototype,"imageId",2),Xi([je()],xn.prototype,"walletId",2),Xi([je()],xn.prototype,"imageUrl",2),xn=Xi([ot("wcm-qrcode")],xn);const lS=ut`:host{position:relative;height:28px;width:80%}input{width:100%;height:100%;line-height:28px!important;border-radius:var(--wcm-input-border-radius);font-style:normal;font-family:-apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,'Helvetica Neue',sans-serif;font-feature-settings:'case' on;font-weight:500;font-size:16px;letter-spacing:-.03em;padding:0 10px 0 34px;transition:.2s all ease;color:var(--wcm-color-fg-1);background-color:var(--wcm-color-bg-3);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay);caret-color:var(--wcm-accent-color)}input::placeholder{color:var(--wcm-color-fg-2)}svg{left:10px;top:4px;pointer-events:none;position:absolute;width:20px;height:20px}input:focus-within{box-shadow:inset 0 0 0 1px var(--wcm-accent-color)}path{fill:var(--wcm-color-fg-2)}`;var uS=Object.defineProperty,hS=Object.getOwnPropertyDescriptor,M0=(t,e,r,n)=>{for(var i=n>1?void 0:n?hS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&uS(e,r,i),i};let $a=class extends Ye{constructor(){super(...arguments),this.onChange=()=>null}render(){return le`<input type="text" @input="${this.onChange}" placeholder="Search wallets"> ${dt.SEARCH_ICON}`}};$a.styles=[rt.globalCss,lS],M0([je()],$a.prototype,"onChange",2),$a=M0([ot("wcm-search-input")],$a);const dS=ut`@keyframes rotate{100%{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}svg{animation:rotate 2s linear infinite;display:flex;justify-content:center;align-items:center}svg circle{stroke-linecap:round;animation:dash 1.5s ease infinite;stroke:var(--wcm-accent-color)}`;var fS=Object.defineProperty,pS=Object.getOwnPropertyDescriptor,gS=(t,e,r,n)=>{for(var i=n>1?void 0:n?pS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&fS(e,r,i),i};let du=class extends Ye{render(){return le`<svg viewBox="0 0 50 50" width="24" height="24"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4" stroke="#fff"/></svg>`}};du.styles=[rt.globalCss,dS],du=gS([ot("wcm-spinner")],du);const mS=ut`span{font-style:normal;font-family:var(--wcm-font-family);font-feature-settings:var(--wcm-font-feature-settings)}.wcm-xsmall-bold{font-family:var(--wcm-text-xsmall-bold-font-family);font-weight:var(--wcm-text-xsmall-bold-weight);font-size:var(--wcm-text-xsmall-bold-size);line-height:var(--wcm-text-xsmall-bold-line-height);letter-spacing:var(--wcm-text-xsmall-bold-letter-spacing);text-transform:var(--wcm-text-xsmall-bold-text-transform)}.wcm-xsmall-regular{font-family:var(--wcm-text-xsmall-regular-font-family);font-weight:var(--wcm-text-xsmall-regular-weight);font-size:var(--wcm-text-xsmall-regular-size);line-height:var(--wcm-text-xsmall-regular-line-height);letter-spacing:var(--wcm-text-xsmall-regular-letter-spacing);text-transform:var(--wcm-text-xsmall-regular-text-transform)}.wcm-small-thin{font-family:var(--wcm-text-small-thin-font-family);font-weight:var(--wcm-text-small-thin-weight);font-size:var(--wcm-text-small-thin-size);line-height:var(--wcm-text-small-thin-line-height);letter-spacing:var(--wcm-text-small-thin-letter-spacing);text-transform:var(--wcm-text-small-thin-text-transform)}.wcm-small-regular{font-family:var(--wcm-text-small-regular-font-family);font-weight:var(--wcm-text-small-regular-weight);font-size:var(--wcm-text-small-regular-size);line-height:var(--wcm-text-small-regular-line-height);letter-spacing:var(--wcm-text-small-regular-letter-spacing);text-transform:var(--wcm-text-small-regular-text-transform)}.wcm-medium-regular{font-family:var(--wcm-text-medium-regular-font-family);font-weight:var(--wcm-text-medium-regular-weight);font-size:var(--wcm-text-medium-regular-size);line-height:var(--wcm-text-medium-regular-line-height);letter-spacing:var(--wcm-text-medium-regular-letter-spacing);text-transform:var(--wcm-text-medium-regular-text-transform)}.wcm-big-bold{font-family:var(--wcm-text-big-bold-font-family);font-weight:var(--wcm-text-big-bold-weight);font-size:var(--wcm-text-big-bold-size);line-height:var(--wcm-text-big-bold-line-height);letter-spacing:var(--wcm-text-big-bold-letter-spacing);text-transform:var(--wcm-text-big-bold-text-transform)}:host(*){color:var(--wcm-color-fg-1)}.wcm-color-primary{color:var(--wcm-color-fg-1)}.wcm-color-secondary{color:var(--wcm-color-fg-2)}.wcm-color-tertiary{color:var(--wcm-color-fg-3)}.wcm-color-inverse{color:var(--wcm-accent-fill-color)}.wcm-color-accnt{color:var(--wcm-accent-color)}.wcm-color-error{color:var(--wcm-error-color)}`;var yS=Object.defineProperty,vS=Object.getOwnPropertyDescriptor,fu=(t,e,r,n)=>{for(var i=n>1?void 0:n?vS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&yS(e,r,i),i};let po=class extends Ye{constructor(){super(...arguments),this.variant="medium-regular",this.color="primary"}render(){const t={"wcm-big-bold":this.variant==="big-bold","wcm-medium-regular":this.variant==="medium-regular","wcm-small-regular":this.variant==="small-regular","wcm-small-thin":this.variant==="small-thin","wcm-xsmall-regular":this.variant==="xsmall-regular","wcm-xsmall-bold":this.variant==="xsmall-bold","wcm-color-primary":this.color==="primary","wcm-color-secondary":this.color==="secondary","wcm-color-tertiary":this.color==="tertiary","wcm-color-inverse":this.color==="inverse","wcm-color-accnt":this.color==="accent","wcm-color-error":this.color==="error"};return le`<span><slot class="${En(t)}"></slot></span>`}};po.styles=[rt.globalCss,mS],fu([je()],po.prototype,"variant",2),fu([je()],po.prototype,"color",2),po=fu([ot("wcm-text")],po);const wS=ut`button{width:100%;height:100%;border-radius:var(--wcm-button-hover-highlight-border-radius);display:flex;align-items:flex-start}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}button>div{width:80px;padding:5px 0;display:flex;flex-direction:column;align-items:center}wcm-text{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}wcm-wallet-image{height:60px;width:60px;transition:all .2s ease;border-radius:var(--wcm-wallet-icon-border-radius);margin-bottom:5px}.wcm-sublabel{margin-top:2px}`;var bS=Object.defineProperty,_S=Object.getOwnPropertyDescriptor,Wn=(t,e,r,n)=>{for(var i=n>1?void 0:n?_S(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&bS(e,r,i),i};let hn=class extends Ye{constructor(){super(...arguments),this.onClick=()=>null,this.name="",this.walletId="",this.label=void 0,this.imageId=void 0,this.installed=!1,this.recent=!1}sublabelTemplate(){return this.recent?le`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">RECENT</wcm-text>`:this.installed?le`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">INSTALLED</wcm-text>`:null}handleClick(){Nu.click({name:"WALLET_BUTTON",walletId:this.walletId}),this.onClick()}render(){var t;return le`<button @click="${this.handleClick.bind(this)}"><div><wcm-wallet-image walletId="${this.walletId}" imageId="${Er(this.imageId)}"></wcm-wallet-image><wcm-text variant="xsmall-regular">${(t=this.label)!=null?t:Pe.getWalletName(this.name,!0)}</wcm-text>${this.sublabelTemplate()}</div></button>`}};hn.styles=[rt.globalCss,wS],Wn([je()],hn.prototype,"onClick",2),Wn([je()],hn.prototype,"name",2),Wn([je()],hn.prototype,"walletId",2),Wn([je()],hn.prototype,"label",2),Wn([je()],hn.prototype,"imageId",2),Wn([je({type:Boolean})],hn.prototype,"installed",2),Wn([je({type:Boolean})],hn.prototype,"recent",2),hn=Wn([ot("wcm-wallet-button")],hn);const ES=ut`:host{display:block}div{overflow:hidden;position:relative;border-radius:inherit;width:100%;height:100%;background-color:var(--wcm-color-overlay)}svg{position:relative;width:100%;height:100%}div::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;border-radius:inherit;border:1px solid var(--wcm-color-overlay)}div img{width:100%;height:100%;object-fit:cover;object-position:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var SS=Object.defineProperty,xS=Object.getOwnPropertyDescriptor,Na=(t,e,r,n)=>{for(var i=n>1?void 0:n?xS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&SS(e,r,i),i};let es=class extends Ye{constructor(){super(...arguments),this.walletId="",this.imageId=void 0,this.imageUrl=void 0}render(){var t;const e=(t=this.imageUrl)!=null&&t.length?this.imageUrl:Pe.getWalletIcon({id:this.walletId,image_id:this.imageId});return le`${e.length?le`<div><img crossorigin="anonymous" src="${e}" alt="${this.id}"></div>`:dt.WALLET_PLACEHOLDER}`}};es.styles=[rt.globalCss,ES],Na([je()],es.prototype,"walletId",2),Na([je()],es.prototype,"imageId",2),Na([je()],es.prototype,"imageUrl",2),es=Na([ot("wcm-wallet-image")],es);var CS=Object.defineProperty,OS=Object.getOwnPropertyDescriptor,k0=(t,e,r,n)=>{for(var i=n>1?void 0:n?OS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&CS(e,r,i),i};let pu=class extends Ye{constructor(){super(),this.preload=!0,this.preloadData()}async loadImages(t){try{t!=null&&t.length&&await Promise.all(t.map(async e=>Pe.preloadImage(e)))}catch{console.info("Unsuccessful attempt at preloading some images",t)}}async preloadListings(){if(Rr.state.enableExplorer){await xr.getRecomendedWallets(),Vt.setIsDataLoaded(!0);const{recomendedWallets:t}=xr.state,e=t.map(r=>Pe.getWalletIcon(r));await this.loadImages(e)}else Vt.setIsDataLoaded(!0)}async preloadCustomImages(){const t=Pe.getCustomImageUrls();await this.loadImages(t)}async preloadData(){try{this.preload&&(this.preload=!1,await Promise.all([this.preloadListings(),this.preloadCustomImages()]))}catch(t){console.error(t),An.openToast("Failed preloading","error")}}};k0([Dr()],pu.prototype,"preload",2),pu=k0([ot("wcm-explorer-context")],pu);var IS=Object.defineProperty,DS=Object.getOwnPropertyDescriptor,AS=(t,e,r,n)=>{for(var i=n>1?void 0:n?DS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&IS(e,r,i),i};let F0=class extends Ye{constructor(){super(),this.unsubscribeTheme=void 0,rt.setTheme(),this.unsubscribeTheme=Dn.subscribe(rt.setTheme)}disconnectedCallback(){var t;(t=this.unsubscribeTheme)==null||t.call(this)}};F0=AS([ot("wcm-theme-context")],F0);const TS=ut`@keyframes scroll{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(calc(-70px * 9),0,0)}}.wcm-slider{position:relative;overflow-x:hidden;padding:10px 0;margin:0 -20px;width:calc(100% + 40px)}.wcm-track{display:flex;width:calc(70px * 18);animation:scroll 20s linear infinite;opacity:.7}.wcm-track svg{margin:0 5px}wcm-wallet-image{width:60px;height:60px;margin:0 5px;border-radius:var(--wcm-wallet-icon-border-radius)}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-title{display:flex;align-items:center;margin-bottom:10px}.wcm-title svg{margin-right:6px}.wcm-title path{fill:var(--wcm-accent-color)}wcm-modal-footer .wcm-title{padding:0 10px}wcm-button-big{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);filter:drop-shadow(0 0 17px var(--wcm-color-bg-1))}wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-info-footer wcm-text{text-align:center;margin-bottom:15px}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var RS=Object.defineProperty,PS=Object.getOwnPropertyDescriptor,$S=(t,e,r,n)=>{for(var i=n>1?void 0:n?PS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&RS(e,r,i),i};let gu=class extends Ye{onGoToQrcode(){Nt.push("Qrcode")}render(){const{recomendedWallets:t}=xr.state,e=[...t,...t],r=we.RECOMMENDED_WALLET_AMOUNT*2;return le`<wcm-modal-header title="Connect your wallet" .onAction="${this.onGoToQrcode}" .actionIcon="${dt.QRCODE_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-title">${dt.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">WalletConnect</wcm-text></div><div class="wcm-slider"><div class="wcm-track">${[...Array(r)].map((n,i)=>{const s=e[i%e.length];return s?le`<wcm-wallet-image walletId="${s.id}" imageId="${s.image_id}"></wcm-wallet-image>`:dt.WALLET_PLACEHOLDER})}</div><wcm-button-big @click="${Pe.handleAndroidLinking}"><wcm-text variant="medium-regular" color="inverse">Select Wallet</wcm-text></wcm-button-big></div></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">Choose WalletConnect to see supported apps on your device</wcm-text></wcm-info-footer>`}};gu.styles=[rt.globalCss,TS],gu=$S([ot("wcm-android-wallet-selection")],gu);const NS=ut`@keyframes loading{to{stroke-dashoffset:0}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(1px,0,0)}30%,50%,70%{transform:translate3d(-2px,0,0)}40%,60%{transform:translate3d(2px,0,0)}}:host{display:flex;flex-direction:column;align-items:center}div{position:relative;width:110px;height:110px;display:flex;justify-content:center;align-items:center;margin:40px 0 20px 0;transform:translate3d(0,0,0)}svg{position:absolute;width:110px;height:110px;fill:none;stroke:transparent;stroke-linecap:round;stroke-width:2px;top:0;left:0}use{stroke:var(--wcm-accent-color);animation:loading 1s linear infinite}wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:90px;height:90px}wcm-text{margin-bottom:40px}.wcm-error svg{stroke:var(--wcm-error-color)}.wcm-error use{display:none}.wcm-error{animation:shake .4s cubic-bezier(.36,.07,.19,.97) both}.wcm-stale svg,.wcm-stale use{display:none}`;var LS=Object.defineProperty,MS=Object.getOwnPropertyDescriptor,ts=(t,e,r,n)=>{for(var i=n>1?void 0:n?MS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&LS(e,r,i),i};let Vn=class extends Ye{constructor(){super(...arguments),this.walletId=void 0,this.imageId=void 0,this.isError=!1,this.isStale=!1,this.label=""}svgLoaderTemplate(){var t,e;const r=(e=(t=Dn.state.themeVariables)==null?void 0:t["--wcm-wallet-icon-large-border-radius"])!=null?e:rt.getPreset("--wcm-wallet-icon-large-border-radius");let n=0;r.includes("%")?n=88/100*parseInt(r,10):n=parseInt(r,10),n*=1.17;const i=317-n*1.57,s=425-n*1.8;return le`<svg viewBox="0 0 110 110" width="110" height="110"><rect id="wcm-loader" x="2" y="2" width="106" height="106" rx="${n}"/><use xlink:href="#wcm-loader" stroke-dasharray="106 ${i}" stroke-dashoffset="${s}"></use></svg>`}render(){const t={"wcm-error":this.isError,"wcm-stale":this.isStale};return le`<div class="${En(t)}">${this.svgLoaderTemplate()}<wcm-wallet-image walletId="${Er(this.walletId)}" imageId="${Er(this.imageId)}"></wcm-wallet-image></div><wcm-text variant="medium-regular" color="${this.isError?"error":"primary"}">${this.isError?"Connection declined":this.label}</wcm-text>`}};Vn.styles=[rt.globalCss,NS],ts([je()],Vn.prototype,"walletId",2),ts([je()],Vn.prototype,"imageId",2),ts([je({type:Boolean})],Vn.prototype,"isError",2),ts([je({type:Boolean})],Vn.prototype,"isStale",2),ts([je()],Vn.prototype,"label",2),Vn=ts([ot("wcm-connector-waiting")],Vn);const rs={manualWallets(){var t,e;const{mobileWallets:r,desktopWallets:n}=Rr.state,i=(t=rs.recentWallet())==null?void 0:t.id,s=we.isMobile()?r:n,o=s==null?void 0:s.filter(a=>i!==a.id);return(e=we.isMobile()?o==null?void 0:o.map(({id:a,name:c,links:u})=>({id:a,name:c,mobile:u,links:u})):o==null?void 0:o.map(({id:a,name:c,links:u})=>({id:a,name:c,desktop:u,links:u})))!=null?e:[]},recentWallet(){return Pe.getRecentWallet()},recomendedWallets(t=!1){var e;const r=t||(e=rs.recentWallet())==null?void 0:e.id,{recomendedWallets:n}=xr.state;return n.filter(i=>r!==i.id)}},Hn={onConnecting(t){Pe.goToConnectingView(t)},manualWalletsTemplate(){return rs.manualWallets().map(t=>le`<wcm-wallet-button walletId="${t.id}" name="${t.name}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`)},recomendedWalletsTemplate(t=!1){return rs.recomendedWallets(t).map(e=>le`<wcm-wallet-button name="${e.name}" walletId="${e.id}" imageId="${e.image_id}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`)},recentWalletTemplate(){const t=rs.recentWallet();if(t)return le`<wcm-wallet-button name="${t.name}" walletId="${t.id}" imageId="${Er(t.image_id)}" .recent="${!0}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`}},kS=ut`.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-desktop-title,.wcm-mobile-title{display:flex;align-items:center}.wcm-mobile-title{justify-content:space-between;margin-bottom:20px;margin-top:-10px}.wcm-desktop-title{margin-bottom:10px;padding:0 10px}.wcm-subtitle{display:flex;align-items:center}.wcm-subtitle:last-child path{fill:var(--wcm-color-fg-3)}.wcm-desktop-title svg,.wcm-mobile-title svg{margin-right:6px}.wcm-desktop-title path,.wcm-mobile-title path{fill:var(--wcm-accent-color)}`;var FS=Object.defineProperty,US=Object.getOwnPropertyDescriptor,jS=(t,e,r,n)=>{for(var i=n>1?void 0:n?US(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&FS(e,r,i),i};let mu=class extends Ye{render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Rr.state,r=t!=="ALL"&&e,n=Hn.manualWalletsTemplate(),i=Hn.recomendedWalletsTemplate();let s=[Hn.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>4||r;let a=[];o?a=s.slice(0,3):a=s;const c=!!a.length;return le`<wcm-modal-header .border="${!0}" title="Connect your wallet" .onAction="${Pe.handleUriCopy}" .actionIcon="${dt.COPY_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-mobile-title"><div class="wcm-subtitle">${dt.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">Mobile</wcm-text></div><div class="wcm-subtitle">${dt.SCAN_ICON}<wcm-text variant="small-regular" color="secondary">Scan with your wallet</wcm-text></div></div><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>${c?le`<wcm-modal-footer><div class="wcm-desktop-title">${dt.DESKTOP_ICON}<wcm-text variant="small-regular" color="accent">Desktop</wcm-text></div><div class="wcm-grid">${a} ${o?le`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-footer>`:null}`}};mu.styles=[rt.globalCss,kS],mu=jS([ot("wcm-desktop-wallet-selection")],mu);const BS=ut`div{background-color:var(--wcm-color-bg-2);padding:10px 20px 15px 20px;border-top:1px solid var(--wcm-color-bg-3);text-align:center}a{color:var(--wcm-accent-color);text-decoration:none;transition:opacity .2s ease-in-out;display:inline}a:active{opacity:.8}@media(hover:hover){a:hover{opacity:.8}}`;var qS=Object.defineProperty,zS=Object.getOwnPropertyDescriptor,WS=(t,e,r,n)=>{for(var i=n>1?void 0:n?zS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&qS(e,r,i),i};let yu=class extends Ye{render(){const{termsOfServiceUrl:t,privacyPolicyUrl:e}=Rr.state;return t??e?le`<div><wcm-text variant="small-regular" color="secondary">By connecting your wallet to this app, you agree to the app's ${t?le`<a href="${t}" target="_blank" rel="noopener noreferrer">Terms of Service</a>`:null} ${t&&e?"and":null} ${e?le`<a href="${e}" target="_blank" rel="noopener noreferrer">Privacy Policy</a>`:null}</wcm-text></div>`:null}};yu.styles=[rt.globalCss,BS],yu=WS([ot("wcm-legal-notice")],yu);const VS=ut`div{display:grid;grid-template-columns:repeat(4,80px);margin:0 -10px;justify-content:space-between;row-gap:10px}`;var HS=Object.defineProperty,KS=Object.getOwnPropertyDescriptor,ZS=(t,e,r,n)=>{for(var i=n>1?void 0:n?KS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&HS(e,r,i),i};let vu=class extends Ye{onQrcode(){Nt.push("Qrcode")}render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Rr.state,r=t!=="ALL"&&e,n=Hn.manualWalletsTemplate(),i=Hn.recomendedWalletsTemplate();let s=[Hn.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>8||r;let a=[];o?a=s.slice(0,7):a=s;const c=!!a.length;return le`<wcm-modal-header title="Connect your wallet" .onAction="${this.onQrcode}" .actionIcon="${dt.QRCODE_ICON}"></wcm-modal-header>${c?le`<wcm-modal-content><div>${a} ${o?le`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-content>`:null}`}};vu.styles=[rt.globalCss,VS],vu=ZS([ot("wcm-mobile-wallet-selection")],vu);const GS=ut`:host{all:initial}.wcm-overlay{top:0;bottom:0;left:0;right:0;position:fixed;z-index:var(--wcm-z-index);overflow:hidden;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;background-color:var(--wcm-overlay-background-color);backdrop-filter:var(--wcm-overlay-backdrop-filter)}@media(max-height:720px) and (orientation:landscape){.wcm-overlay{overflow:scroll;align-items:flex-start;padding:20px 0}}.wcm-active{pointer-events:auto}.wcm-container{position:relative;max-width:360px;width:100%;outline:0;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) var(--wcm-container-border-radius) var(--wcm-container-border-radius);border:1px solid var(--wcm-color-overlay);overflow:hidden}.wcm-card{width:100%;position:relative;border-radius:var(--wcm-container-border-radius);overflow:hidden;box-shadow:0 6px 14px -6px rgba(10,16,31,.12),0 10px 32px -4px rgba(10,16,31,.1),0 0 0 1px var(--wcm-color-overlay);background-color:var(--wcm-color-bg-1);color:var(--wcm-color-fg-1)}@media(max-width:600px){.wcm-container{max-width:440px;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) 0 0}.wcm-card{border-radius:var(--wcm-container-border-radius) var(--wcm-container-border-radius) 0 0}.wcm-overlay{align-items:flex-end}}@media(max-width:440px){.wcm-container{border:0}}`;var QS=Object.defineProperty,YS=Object.getOwnPropertyDescriptor,wu=(t,e,r,n)=>{for(var i=n>1?void 0:n?YS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&QS(e,r,i),i};let ns=class extends Ye{constructor(){super(),this.open=!1,this.active=!1,this.unsubscribeModal=void 0,this.abortController=void 0,this.unsubscribeModal=Yn.subscribe(t=>{t.open?this.onOpenModalEvent():this.onCloseModalEvent()})}disconnectedCallback(){var t;(t=this.unsubscribeModal)==null||t.call(this)}get overlayEl(){return Pe.getShadowRootElement(this,".wcm-overlay")}get containerEl(){return Pe.getShadowRootElement(this,".wcm-container")}toggleBodyScroll(t){if(document.querySelector("body"))if(t){const e=document.getElementById("wcm-styles");e==null||e.remove()}else document.head.insertAdjacentHTML("beforeend",'<style id="wcm-styles">html,body{touch-action:none;overflow:hidden;overscroll-behavior:contain;}</style>')}onCloseModal(t){t.target===t.currentTarget&&Yn.close()}onOpenModalEvent(){this.toggleBodyScroll(!1),this.addKeyboardEvents(),this.open=!0,setTimeout(async()=>{const t=Pe.isMobileAnimation()?{y:["50vh","0vh"]}:{scale:[.98,1]},e=.1,r=.2;await Promise.all([vi(this.overlayEl,{opacity:[0,1]},{delay:e,duration:r}).finished,vi(this.containerEl,t,{delay:e,duration:r}).finished]),this.active=!0},0)}async onCloseModalEvent(){this.toggleBodyScroll(!0),this.removeKeyboardEvents();const t=Pe.isMobileAnimation()?{y:["0vh","50vh"]}:{scale:[1,.98]},e=.2;await Promise.all([vi(this.overlayEl,{opacity:[1,0]},{duration:e}).finished,vi(this.containerEl,t,{duration:e}).finished]),this.containerEl.removeAttribute("style"),this.active=!1,this.open=!1}addKeyboardEvents(){this.abortController=new AbortController,window.addEventListener("keydown",t=>{var e;t.key==="Escape"?Yn.close():t.key==="Tab"&&((e=t.target)!=null&&e.tagName.includes("wcm-")||this.containerEl.focus())},this.abortController),this.containerEl.focus()}removeKeyboardEvents(){var t;(t=this.abortController)==null||t.abort(),this.abortController=void 0}render(){const t={"wcm-overlay":!0,"wcm-active":this.active};return le`<wcm-explorer-context></wcm-explorer-context><wcm-theme-context></wcm-theme-context><div id="wcm-modal" class="${En(t)}" @click="${this.onCloseModal}" role="alertdialog" aria-modal="true"><div class="wcm-container" tabindex="0">${this.open?le`<wcm-modal-backcard></wcm-modal-backcard><div class="wcm-card"><wcm-modal-router></wcm-modal-router><wcm-modal-toast></wcm-modal-toast></div>`:null}</div></div>`}};ns.styles=[rt.globalCss,GS],wu([Dr()],ns.prototype,"open",2),wu([Dr()],ns.prototype,"active",2),ns=wu([ot("wcm-modal")],ns);const JS=ut`div{display:flex;margin-top:15px}slot{display:inline-block;margin:0 5px}wcm-button{margin:0 5px}`;var XS=Object.defineProperty,ex=Object.getOwnPropertyDescriptor,go=(t,e,r,n)=>{for(var i=n>1?void 0:n?ex(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&XS(e,r,i),i};let bi=class extends Ye{constructor(){super(...arguments),this.isMobile=!1,this.isDesktop=!1,this.isWeb=!1,this.isRetry=!1}onMobile(){we.isMobile()?Nt.replace("MobileConnecting"):Nt.replace("MobileQrcodeConnecting")}onDesktop(){Nt.replace("DesktopConnecting")}onWeb(){Nt.replace("WebConnecting")}render(){return le`<div>${this.isRetry?le`<slot></slot>`:null} ${this.isMobile?le`<wcm-button .onClick="${this.onMobile}" .iconLeft="${dt.MOBILE_ICON}" variant="outline">Mobile</wcm-button>`:null} ${this.isDesktop?le`<wcm-button .onClick="${this.onDesktop}" .iconLeft="${dt.DESKTOP_ICON}" variant="outline">Desktop</wcm-button>`:null} ${this.isWeb?le`<wcm-button .onClick="${this.onWeb}" .iconLeft="${dt.GLOBE_ICON}" variant="outline">Web</wcm-button>`:null}</div>`}};bi.styles=[rt.globalCss,JS],go([je({type:Boolean})],bi.prototype,"isMobile",2),go([je({type:Boolean})],bi.prototype,"isDesktop",2),go([je({type:Boolean})],bi.prototype,"isWeb",2),go([je({type:Boolean})],bi.prototype,"isRetry",2),bi=go([ot("wcm-platform-selection")],bi);const tx=ut`button{display:flex;flex-direction:column;padding:5px 10px;border-radius:var(--wcm-button-hover-highlight-border-radius);height:100%;justify-content:flex-start}.wcm-icons{width:60px;height:60px;display:flex;flex-wrap:wrap;padding:7px;border-radius:var(--wcm-wallet-icon-border-radius);justify-content:space-between;align-items:center;margin-bottom:5px;background-color:var(--wcm-color-bg-2);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}.wcm-icons img{width:21px;height:21px;object-fit:cover;object-position:center;border-radius:calc(var(--wcm-wallet-icon-border-radius)/ 2);border:1px solid var(--wcm-color-overlay)}.wcm-icons svg{width:21px;height:21px}.wcm-icons img:nth-child(1),.wcm-icons img:nth-child(2),.wcm-icons svg:nth-child(1),.wcm-icons svg:nth-child(2){margin-bottom:4px}wcm-text{width:100%;text-align:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var rx=Object.defineProperty,nx=Object.getOwnPropertyDescriptor,ix=(t,e,r,n)=>{for(var i=n>1?void 0:n?nx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&rx(e,r,i),i};let bu=class extends Ye{onClick(){Nt.push("WalletExplorer")}render(){const{recomendedWallets:t}=xr.state,e=rs.manualWallets(),r=[...t,...e].reverse().slice(0,4);return le`<button @click="${this.onClick}"><div class="wcm-icons">${r.map(n=>{const i=Pe.getWalletIcon(n);if(i)return le`<img crossorigin="anonymous" src="${i}">`;const s=Pe.getWalletIcon({id:n.id});return s?le`<img crossorigin="anonymous" src="${s}">`:dt.WALLET_PLACEHOLDER})} ${[...Array(4-r.length)].map(()=>dt.WALLET_PLACEHOLDER)}</div><wcm-text variant="xsmall-regular">View All</wcm-text></button>`}};bu.styles=[rt.globalCss,tx],bu=ix([ot("wcm-view-all-wallets-button")],bu);const sx=ut`.wcm-qr-container{width:100%;display:flex;justify-content:center;align-items:center;aspect-ratio:1/1}`;var ox=Object.defineProperty,ax=Object.getOwnPropertyDescriptor,La=(t,e,r,n)=>{for(var i=n>1?void 0:n?ax(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&ox(e,r,i),i};let is=class extends Ye{constructor(){super(),this.walletId="",this.imageId="",this.uri="",setTimeout(()=>{const{walletConnectUri:t}=Vt.state;this.uri=t},0)}get overlayEl(){return Pe.getShadowRootElement(this,".wcm-qr-container")}render(){return le`<div class="wcm-qr-container">${this.uri?le`<wcm-qrcode size="${this.overlayEl.offsetWidth}" uri="${this.uri}" walletId="${Er(this.walletId)}" imageId="${Er(this.imageId)}"></wcm-qrcode>`:le`<wcm-spinner></wcm-spinner>`}</div>`}};is.styles=[rt.globalCss,sx],La([je()],is.prototype,"walletId",2),La([je()],is.prototype,"imageId",2),La([Dr()],is.prototype,"uri",2),is=La([ot("wcm-walletconnect-qr")],is);var cx=Object.defineProperty,lx=Object.getOwnPropertyDescriptor,ux=(t,e,r,n)=>{for(var i=n>1?void 0:n?lx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&cx(e,r,i),i};let _u=class extends Ye{viewTemplate(){return we.isAndroid()?le`<wcm-android-wallet-selection></wcm-android-wallet-selection>`:we.isMobile()?le`<wcm-mobile-wallet-selection></wcm-mobile-wallet-selection>`:le`<wcm-desktop-wallet-selection></wcm-desktop-wallet-selection>`}render(){return le`${this.viewTemplate()}<wcm-legal-notice></wcm-legal-notice>`}};_u.styles=[rt.globalCss],_u=ux([ot("wcm-connect-wallet-view")],_u);const hx=ut`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var dx=Object.defineProperty,fx=Object.getOwnPropertyDescriptor,U0=(t,e,r,n)=>{for(var i=n>1?void 0:n?fx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&dx(e,r,i),i};let Ma=class extends Ye{constructor(){super(),this.isError=!1,this.openDesktopApp()}onFormatAndRedirect(t){const{desktop:e,name:r}=we.getWalletRouterData(),n=e==null?void 0:e.native;if(n){const i=we.formatNativeUrl(n,t,r);we.openHref(i,"_self")}}openDesktopApp(){const{walletConnectUri:t}=Vt.state,e=we.getWalletRouterData();Pe.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=we.getWalletRouterData(),{isMobile:n,isWeb:i}=Pe.getCachedRouterWalletPlatforms();return le`<wcm-modal-header title="${t}" .onAction="${Pe.handleUriCopy}" .actionIcon="${dt.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Er(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Connection can continue loading if ${t} is not installed on your device`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isWeb="${i}" .isRetry="${!0}"><wcm-button .onClick="${this.openDesktopApp.bind(this)}" .iconRight="${dt.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Ma.styles=[rt.globalCss,hx],U0([Dr()],Ma.prototype,"isError",2),Ma=U0([ot("wcm-desktop-connecting-view")],Ma);const px=ut`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}wcm-button{margin-top:15px}`;var gx=Object.defineProperty,mx=Object.getOwnPropertyDescriptor,yx=(t,e,r,n)=>{for(var i=n>1?void 0:n?mx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&gx(e,r,i),i};let Eu=class extends Ye{onInstall(t){t&&we.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,homepage:n}=we.getWalletRouterData();return le`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Er(r)}" label="Not Detected" .isStale="${!0}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Download ${t} to continue. If multiple browser extensions are installed, disable non ${t} ones and try again`}</wcm-text><wcm-button .onClick="${()=>this.onInstall(n)}" .iconLeft="${dt.ARROW_DOWN_ICON}">Download</wcm-button></wcm-info-footer>`}};Eu.styles=[rt.globalCss,px],Eu=yx([ot("wcm-install-wallet-view")],Eu);const vx=ut`wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:96px;height:96px;margin-bottom:20px}wcm-info-footer{display:flex;width:100%}.wcm-app-store{justify-content:space-between}.wcm-app-store wcm-wallet-image{margin-right:10px;margin-bottom:0;width:28px;height:28px;border-radius:var(--wcm-wallet-icon-small-border-radius)}.wcm-app-store div{display:flex;align-items:center}.wcm-app-store wcm-button{margin-right:-10px}.wcm-note{flex-direction:column;align-items:center;padding:5px 0}.wcm-note wcm-text{text-align:center}wcm-platform-selection{margin-top:-15px}.wcm-note wcm-text{margin-top:15px}.wcm-note wcm-text span{color:var(--wcm-accent-color)}`;var wx=Object.defineProperty,bx=Object.getOwnPropertyDescriptor,j0=(t,e,r,n)=>{for(var i=n>1?void 0:n?bx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&wx(e,r,i),i};let ka=class extends Ye{constructor(){super(),this.isError=!1,this.openMobileApp()}onFormatAndRedirect(t,e=!1){const{mobile:r,name:n}=we.getWalletRouterData(),i=r==null?void 0:r.native,s=r==null?void 0:r.universal;if(i&&!e){const o=we.formatNativeUrl(i,t,n);we.openHref(o,"_self")}else if(s){const o=we.formatUniversalUrl(s,t,n);we.openHref(o,"_self")}}openMobileApp(t=!1){const{walletConnectUri:e}=Vt.state,r=we.getWalletRouterData();Pe.setRecentWallet(r),e&&this.onFormatAndRedirect(e,t)}onGoToAppStore(t){t&&we.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,app:n,mobile:i}=we.getWalletRouterData(),{isWeb:s}=Pe.getCachedRouterWalletPlatforms(),o=n==null?void 0:n.ios,a=i==null?void 0:i.universal;return le`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Er(r)}" label="Tap 'Open' to continue…" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer class="wcm-note"><wcm-platform-selection .isWeb="${s}" .isRetry="${!0}"><wcm-button .onClick="${()=>this.openMobileApp(!1)}" .iconRight="${dt.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection>${a?le`<wcm-text color="secondary" variant="small-thin">Still doesn't work? <span tabindex="0" @click="${()=>this.openMobileApp(!0)}">Try this alternate link</span></wcm-text>`:null}</wcm-info-footer><wcm-info-footer class="wcm-app-store"><div><wcm-wallet-image walletId="${e}" imageId="${Er(r)}"></wcm-wallet-image><wcm-text>${`Get ${t}`}</wcm-text></div><wcm-button .iconRight="${dt.ARROW_RIGHT_ICON}" .onClick="${()=>this.onGoToAppStore(o)}" variant="ghost">App Store</wcm-button></wcm-info-footer>`}};ka.styles=[rt.globalCss,vx],j0([Dr()],ka.prototype,"isError",2),ka=j0([ot("wcm-mobile-connecting-view")],ka);const _x=ut`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var Ex=Object.defineProperty,Sx=Object.getOwnPropertyDescriptor,xx=(t,e,r,n)=>{for(var i=n>1?void 0:n?Sx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Ex(e,r,i),i};let Su=class extends Ye{render(){const{name:t,id:e,image_id:r}=we.getWalletRouterData(),{isDesktop:n,isWeb:i}=Pe.getCachedRouterWalletPlatforms();return le`<wcm-modal-header title="${t}" .onAction="${Pe.handleUriCopy}" .actionIcon="${dt.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr walletId="${e}" imageId="${Er(r)}"></wcm-walletconnect-qr></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Scan this QR Code with your phone's camera or inside ${t} app`}</wcm-text><wcm-platform-selection .isDesktop="${n}" .isWeb="${i}"></wcm-platform-selection></wcm-info-footer>`}};Su.styles=[rt.globalCss,_x],Su=xx([ot("wcm-mobile-qr-connecting-view")],Su);var Cx=Object.defineProperty,Ox=Object.getOwnPropertyDescriptor,Ix=(t,e,r,n)=>{for(var i=n>1?void 0:n?Ox(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Cx(e,r,i),i};let xu=class extends Ye{render(){return le`<wcm-modal-header title="Scan the code" .onAction="${Pe.handleUriCopy}" .actionIcon="${dt.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>`}};xu.styles=[rt.globalCss],xu=Ix([ot("wcm-qrcode-view")],xu);const Dx=ut`wcm-modal-content{height:clamp(200px,60vh,600px);display:block;overflow:scroll;scrollbar-width:none;position:relative;margin-top:1px}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between;margin:-15px -10px;padding-top:20px}wcm-modal-content::after,wcm-modal-content::before{content:'';position:fixed;pointer-events:none;z-index:1;width:100%;height:20px;opacity:1}wcm-modal-content::before{box-shadow:0 -1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(var(--wcm-color-bg-1),rgba(255,255,255,0))}wcm-modal-content::after{box-shadow:0 1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(rgba(255,255,255,0),var(--wcm-color-bg-1));top:calc(100% - 20px)}wcm-modal-content::-webkit-scrollbar{display:none}.wcm-placeholder-block{display:flex;justify-content:center;align-items:center;height:100px;overflow:hidden}.wcm-empty,.wcm-loading{display:flex}.wcm-loading .wcm-placeholder-block{height:100%}.wcm-end-reached .wcm-placeholder-block{height:0;opacity:0}.wcm-empty .wcm-placeholder-block{opacity:1;height:100%}wcm-wallet-button{margin:calc((100% - 60px)/ 3) 0}`;var Ax=Object.defineProperty,Tx=Object.getOwnPropertyDescriptor,mo=(t,e,r,n)=>{for(var i=n>1?void 0:n?Tx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Ax(e,r,i),i};const Cu=40;let _i=class extends Ye{constructor(){super(...arguments),this.loading=!xr.state.wallets.listings.length,this.firstFetch=!xr.state.wallets.listings.length,this.search="",this.endReached=!1,this.intersectionObserver=void 0,this.searchDebounce=Pe.debounce(t=>{t.length>=1?(this.firstFetch=!0,this.endReached=!1,this.search=t,xr.resetSearch(),this.fetchWallets()):this.search&&(this.search="",this.endReached=this.isLastPage(),xr.resetSearch())})}firstUpdated(){this.createPaginationObserver()}disconnectedCallback(){var t;(t=this.intersectionObserver)==null||t.disconnect()}get placeholderEl(){return Pe.getShadowRootElement(this,".wcm-placeholder-block")}createPaginationObserver(){this.intersectionObserver=new IntersectionObserver(([t])=>{t.isIntersecting&&!(this.search&&this.firstFetch)&&this.fetchWallets()}),this.intersectionObserver.observe(this.placeholderEl)}isLastPage(){const{wallets:t,search:e}=xr.state,{listings:r,total:n}=this.search?e:t;return n<=Cu||r.length>=n}async fetchWallets(){var t;const{wallets:e,search:r}=xr.state,{listings:n,total:i,page:s}=this.search?r:e;if(!this.endReached&&(this.firstFetch||i>Cu&&n.length<i))try{this.loading=!0;const o=(t=Vt.state.chains)==null?void 0:t.join(","),{listings:a}=await xr.getWallets({page:this.firstFetch?1:s+1,entries:Cu,search:this.search,version:2,chains:o}),c=a.map(u=>Pe.getWalletIcon(u));await Promise.all([...c.map(async u=>Pe.preloadImage(u)),we.wait(300)]),this.endReached=this.isLastPage()}catch(o){console.error(o),An.openToast(Pe.getErrorMessage(o),"error")}finally{this.loading=!1,this.firstFetch=!1}}onConnect(t){we.isAndroid()?Pe.handleMobileLinking(t):Pe.goToConnectingView(t)}onSearchChange(t){const{value:e}=t.target;this.searchDebounce(e)}render(){const{wallets:t,search:e}=xr.state,{listings:r}=this.search?e:t,n=this.loading&&!r.length,i=this.search.length>=3;let s=Hn.manualWalletsTemplate(),o=Hn.recomendedWalletsTemplate(!0);i&&(s=s.filter(({values:u})=>Pe.caseSafeIncludes(u[0],this.search)),o=o.filter(({values:u})=>Pe.caseSafeIncludes(u[0],this.search)));const a=!this.loading&&!r.length&&!o.length,c={"wcm-loading":n,"wcm-end-reached":this.endReached||!this.loading,"wcm-empty":a};return le`<wcm-modal-header><wcm-search-input .onChange="${this.onSearchChange.bind(this)}"></wcm-search-input></wcm-modal-header><wcm-modal-content class="${En(c)}"><div class="wcm-grid">${n?null:s} ${n?null:o} ${n?null:r.map(u=>le`${u?le`<wcm-wallet-button imageId="${u.image_id}" name="${u.name}" walletId="${u.id}" .onClick="${()=>this.onConnect(u)}"></wcm-wallet-button>`:null}`)}</div><div class="wcm-placeholder-block">${a?le`<wcm-text variant="big-bold" color="secondary">No results found</wcm-text>`:null} ${!a&&this.loading?le`<wcm-spinner></wcm-spinner>`:null}</div></wcm-modal-content>`}};_i.styles=[rt.globalCss,Dx],mo([Dr()],_i.prototype,"loading",2),mo([Dr()],_i.prototype,"firstFetch",2),mo([Dr()],_i.prototype,"search",2),mo([Dr()],_i.prototype,"endReached",2),_i=mo([ot("wcm-wallet-explorer-view")],_i);const Rx=ut`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var Px=Object.defineProperty,$x=Object.getOwnPropertyDescriptor,B0=(t,e,r,n)=>{for(var i=n>1?void 0:n?$x(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Px(e,r,i),i};let Fa=class extends Ye{constructor(){super(),this.isError=!1,this.openWebWallet()}onFormatAndRedirect(t){const{desktop:e,name:r}=we.getWalletRouterData(),n=e==null?void 0:e.universal;if(n){const i=we.formatUniversalUrl(n,t,r);we.openHref(i,"_blank")}}openWebWallet(){const{walletConnectUri:t}=Vt.state,e=we.getWalletRouterData();Pe.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=we.getWalletRouterData(),{isMobile:n,isDesktop:i}=Pe.getCachedRouterWalletPlatforms(),s=we.isMobile();return le`<wcm-modal-header title="${t}" .onAction="${Pe.handleUriCopy}" .actionIcon="${dt.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Er(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`${t} web app has opened in a new tab. Go there, accept the connection, and come back`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isDesktop="${s?!1:i}" .isRetry="${!0}"><wcm-button .onClick="${this.openWebWallet.bind(this)}" .iconRight="${dt.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Fa.styles=[rt.globalCss,Rx],B0([Dr()],Fa.prototype,"isError",2),Fa=B0([ot("wcm-web-connecting-view")],Fa);const Nx=Object.freeze(Object.defineProperty({__proto__:null,get WcmModal(){return ns},get WcmQrCode(){return xn}},Symbol.toStringTag,{value:"Module"}));J.ICore=M3,J.ICrypto=k3,J.IEngine=J3,J.IEngineEvents=Y3,J.IExpirer=H3,J.IJsonRpcHistory=F3,J.IKeyChain=V3,J.IMessageTracker=U3,J.IPairing=K3,J.IPublisher=j3,J.IRelayer=B3,J.ISignClient=Q3,J.ISignClientEvents=G3,J.IStore=q3,J.ISubscriber=W3,J.ISubscriberTopicMap=z3,J.IVerify=Z3,J.PAGE_SIZE=S5,J.PuzzleWalletProvider=I5,J.aleoAddressRegex=Wf,J.aleoFieldRegex=Zf,J.aleoPrivateKeyRegex=Hf,J.aleoTransactionIdRegex=Kf,J.aleoU32=Gf,J.aleoU64=Qf,J.aleoViewKeyRegex=Vf,J.configureConnection=$f,J.connect=f5,J.createSharedState=g5,J.decrypt=m5,J.disconnect=y5,J.emitter=ci,J.getAccount=h5,J.getBalance=d5,J.getEvent=v5,J.getEvents=w5,J.getFormattedRecordPlaintext=a5,J.getRecords=_5,J.getWalletConnectModalSignClient=St,J.importSharedState=b5,J.projectId=Tf,J.queryClient=El,J.requestCreateEvent=p5,J.requestSignature=E5,J.shortenAddress=yl,J.signClient_puzzleProps=A_,J.useAccount=ZE,J.useBalance=GE,J.useConnect=QE,J.useCreateSharedState=YE,J.useDecrypt=r5,J.useDisconnect=n5,J.useEvent=i5,J.useEvents=s5,J.useImportSharedState=o5,J.useOnSessionDelete=tl,J.useOnSessionEvent=Ui,J.useOnSessionExpire=Yf,J.useOnSessionUpdate=rl,J.useRecords=c5,J.useRequestCreateEvent=u5,J.useRequestSignature=l5,J.useSession=jr,J.wc_aleo_chains=Ps,J.wc_aleo_methods=Qo,J.wc_events=Yo,J.web3modal_puzzle_props=Rf,J.zodAddress=C3,J.zodEventStatus=$3,J.zodEventType=P3,J.zodField=A3,J.zodNetwork=N3,J.zodPrivateKey=I3,J.zodTransactionId=D3,J.zodU32=T3,J.zodU64=R3,J.zodViewKey=O3,J.zodVisibility=L3,Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})});
