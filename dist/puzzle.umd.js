(function(G,fe){typeof exports=="object"&&typeof module<"u"?fe(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],fe):(G=typeof globalThis<"u"?globalThis:G||self,fe(G["@puzzlehq/sdk"]={},G.React))})(this,function(G,fe){"use strict";const of={name:"@puzzlehq/sdk",displayName:"Puzzle SDK",version:"0.1.35",description:"Your portal to privacy",main:"./dist/puzzle.umd.js",module:"./dist/puzzle.es.js",types:"./dist/types/src/index.d.ts",exports:{".":{import:"./dist/puzzle.es.js",require:"./dist/puzzle.umd.js",types:"./dist/types/src/index.d.ts"}},type:"module",scripts:{build:"vite build && tsc --declaration --emitDeclarationOnly --outDir dist/types"},dependencies:{"@tanstack/react-query":"^4.29.5","@trpc/client":"^10.9.0","@trpc/react-query":"^10.9.0","@trpc/server":"^10.8.1","@types/debug":"^4.1.7","@walletconnect/modal-sign-html":"^2.6.2","@walletconnect/types":"^2.9.0","@walletconnect/utils":"^2.9.2",debug:"^4.3.4",immer:"^9.0.19",mitt:"^3.0.1",react:"^18.2.0",ws:"^8.13.0",zustand:"^4.3.9"},devDependencies:{"@puzzlehq/types":"1.0.4","@types/chrome":"^0.0.228","@types/node":"^18.11.18","@types/react":"^18.0.27","@types/react-dom":"^18.0.10",typescript:"^4.9.4",vite:"^4.4.7"},repository:{type:"git",url:"git+https://github.com/puzzlehq/puzzle-sdk.git"},keywords:["puzzle","aleo","aztec","web3","crypto\\"],author:"Puzzle",license:"ISC",bugs:{url:"https://github.com/puzzlehq/puzzle-sdk/issues"},homepage:"https://github.com/puzzlehq/puzzle-sdk#readme"},af=Symbol(),bc=Object.getPrototypeOf,Js=new WeakMap,cf=t=>t&&(Js.has(t)?Js.get(t):bc(t)===Object.prototype||bc(t)===Array.prototype),lf=t=>cf(t)&&t[af]||null,_c=(t,e=!0)=>{Js.set(t,e)},Zs=t=>typeof t=="object"&&t!==null,br=new WeakMap,Bi=new WeakSet,uf=(t=Object.is,e=(u,d)=>new Proxy(u,d),r=u=>Zs(u)&&!Bi.has(u)&&(Array.isArray(u)||!(Symbol.iterator in u))&&!(u instanceof WeakMap)&&!(u instanceof WeakSet)&&!(u instanceof Error)&&!(u instanceof Number)&&!(u instanceof Date)&&!(u instanceof String)&&!(u instanceof RegExp)&&!(u instanceof ArrayBuffer),n=u=>{switch(u.status){case"fulfilled":return u.value;case"rejected":throw u.reason;default:throw u}},i=new WeakMap,s=(u,d,f=n)=>{const g=i.get(u);if((g==null?void 0:g[0])===d)return g[1];const y=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u));return _c(y,!0),i.set(u,[d,y]),Reflect.ownKeys(u).forEach(_=>{if(Object.getOwnPropertyDescriptor(y,_))return;const b=Reflect.get(u,_),C={value:b,enumerable:!0,configurable:!0};if(Bi.has(b))_c(b,!1);else if(b instanceof Promise)delete C.value,C.get=()=>f(b);else if(br.has(b)){const[I,v]=br.get(b);C.value=s(I,v(),f)}Object.defineProperty(y,_,C)}),Object.preventExtensions(y)},o=new WeakMap,a=[1,1],c=u=>{if(!Zs(u))throw new Error("object required");const d=o.get(u);if(d)return d;let f=a[0];const g=new Set,y=(R,O=++a[0])=>{f!==O&&(f=O,g.forEach(M=>M(R,O)))};let _=a[1];const b=(R=++a[1])=>(_!==R&&!g.size&&(_=R,I.forEach(([O])=>{const M=O[1](R);M>f&&(f=M)})),f),C=R=>(O,M)=>{const k=[...O];k[1]=[R,...k[1]],y(k,M)},I=new Map,v=(R,O)=>{if(g.size){const M=O[3](C(R));I.set(R,[O,M])}else I.set(R,[O])},E=R=>{var O;const M=I.get(R);M&&(I.delete(R),(O=M[1])==null||O.call(M))},w=R=>(g.add(R),g.size===1&&I.forEach(([M,k],W)=>{const A=M[3](C(W));I.set(W,[M,A])}),()=>{g.delete(R),g.size===0&&I.forEach(([M,k],W)=>{k&&(k(),I.set(W,[M]))})}),x=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u)),l=e(x,{deleteProperty(R,O){const M=Reflect.get(R,O);E(O);const k=Reflect.deleteProperty(R,O);return k&&y(["delete",[O],M]),k},set(R,O,M,k){const W=Reflect.has(R,O),A=Reflect.get(R,O,k);if(W&&(t(A,M)||o.has(M)&&t(A,o.get(M))))return!0;E(O),Zs(M)&&(M=lf(M)||M);let N=M;if(M instanceof Promise)M.then(V=>{M.status="fulfilled",M.value=V,y(["resolve",[O],V])}).catch(V=>{M.status="rejected",M.reason=V,y(["reject",[O],V])});else{!br.has(M)&&r(M)&&(N=c(M));const V=!Bi.has(N)&&br.get(N);V&&v(O,V)}return Reflect.set(R,O,N,k),y(["set",[O],M,A]),!0}});o.set(u,l);const m=[x,b,s,w];return br.set(l,m),Reflect.ownKeys(u).forEach(R=>{const O=Object.getOwnPropertyDescriptor(u,R);"value"in O&&(l[R]=u[R],delete O.value,delete O.writable),Object.defineProperty(x,R,O)}),l})=>[c,br,Bi,t,e,r,n,i,s,o,a],[hf]=uf();function _r(t={}){return hf(t)}function kr(t,e,r){const n=br.get(t);let i;const s=[],o=n[3];let a=!1;const u=o(d=>{if(s.push(d),r){e(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,u()}}function df(t,e){const r=br.get(t),[n,i,s]=r;return s(n,i(),e)}const ot=_r({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),ze={state:ot,subscribe(t){return kr(ot,()=>t(ot))},push(t,e){t!==ot.view&&(ot.view=t,e&&(ot.data=e),ot.history.push(t))},reset(t){ot.view=t,ot.history=[t]},replace(t){ot.history.length>1&&(ot.history[ot.history.length-1]=t,ot.view=t)},goBack(){if(ot.history.length>1){ot.history.pop();const[t]=ot.history.slice(-1);ot.view=t}},setData(t){ot.data=t}},te={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return te.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const t=navigator.userAgent.toLowerCase();return te.isMobile()&&(t.includes("iphone")||t.includes("ipad"))},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},isArray(t){return Array.isArray(t)&&t.length>0},formatNativeUrl(t,e,r){if(te.isHttpUrl(t))return this.formatUniversalUrl(t,e,r);let n=t;n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},formatUniversalUrl(t,e,r){if(!te.isHttpUrl(t))return this.formatNativeUrl(t,e,r);let n=t;n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},async wait(t){return new Promise(e=>{setTimeout(e,t)})},openHref(t,e){window.open(t,e,"noreferrer noopener")},setWalletConnectDeepLink(t,e){try{localStorage.setItem(te.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(t){try{const[e]=t.split("?");localStorage.setItem(te.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(te.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(te.WCM_VERSION,"2.6.2")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var t;const e=(t=ze.state.data)==null?void 0:t.Wallet;if(!e)throw new Error('Missing "Wallet" view data');return e}},ff=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),bt=_r({enabled:ff,userSessionId:"",events:[],connectedWalletId:void 0}),Ec={state:bt,subscribe(t){return kr(bt.events,()=>t(df(bt.events[bt.events.length-1])))},initialize(){bt.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(bt.userSessionId=crypto.randomUUID())},setConnectedWalletId(t){bt.connectedWalletId=t},click(t){if(bt.enabled){const e={type:"CLICK",name:t.name,userSessionId:bt.userSessionId,timestamp:Date.now(),data:t};bt.events.push(e)}},track(t){if(bt.enabled){const e={type:"TRACK",name:t.name,userSessionId:bt.userSessionId,timestamp:Date.now(),data:t};bt.events.push(e)}},view(t){if(bt.enabled){const e={type:"VIEW",name:t.name,userSessionId:bt.userSessionId,timestamp:Date.now(),data:t};bt.events.push(e)}}},rr=_r({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),Ye={state:rr,subscribe(t){return kr(rr,()=>t(rr))},setChains(t){rr.chains=t},setWalletConnectUri(t){rr.walletConnectUri=t},setIsCustomDesktop(t){rr.isCustomDesktop=t},setIsCustomMobile(t){rr.isCustomMobile=t},setIsDataLoaded(t){rr.isDataLoaded=t},setIsUiLoaded(t){rr.isUiLoaded=t},setIsAuth(t){rr.isAuth=t}},zi=_r({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),Ut={state:zi,subscribe(t){return kr(zi,()=>t(zi))},setConfig(t){var e,r;Ec.initialize(),Ye.setChains(t.chains),Ye.setIsAuth(!!t.enableAuthMode),Ye.setIsCustomMobile(!!((e=t.mobileWallets)!=null&&e.length)),Ye.setIsCustomDesktop(!!((r=t.desktopWallets)!=null&&r.length)),te.setModalVersionInStorage(),Object.assign(zi,t)}};var pf=Object.defineProperty,Sc=Object.getOwnPropertySymbols,gf=Object.prototype.hasOwnProperty,mf=Object.prototype.propertyIsEnumerable,xc=(t,e,r)=>e in t?pf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wf=(t,e)=>{for(var r in e||(e={}))gf.call(e,r)&&xc(t,r,e[r]);if(Sc)for(var r of Sc(e))mf.call(e,r)&&xc(t,r,e[r]);return t};const Qs="https://explorer-api.walletconnect.com",Xs="wcm",eo="js-2.6.2";async function qi(t,e){const r=wf({sdkType:Xs,sdkVersion:eo},e),n=new URL(t,Qs);return n.searchParams.append("projectId",Ut.state.projectId),Object.entries(r).forEach(([i,s])=>{s&&n.searchParams.append(i,String(s))}),(await fetch(n)).json()}const Br={async getDesktopListings(t){return qi("/w3m/v1/getDesktopListings",t)},async getMobileListings(t){return qi("/w3m/v1/getMobileListings",t)},async getInjectedListings(t){return qi("/w3m/v1/getInjectedListings",t)},async getAllListings(t){return qi("/w3m/v1/getAllListings",t)},getWalletImageUrl(t){return`${Qs}/w3m/v1/getWalletImage/${t}?projectId=${Ut.state.projectId}&sdkType=${Xs}&sdkVersion=${eo}`},getAssetImageUrl(t){return`${Qs}/w3m/v1/getAssetImage/${t}?projectId=${Ut.state.projectId}&sdkType=${Xs}&sdkVersion=${eo}`}};var yf=Object.defineProperty,Cc=Object.getOwnPropertySymbols,vf=Object.prototype.hasOwnProperty,bf=Object.prototype.propertyIsEnumerable,Dc=(t,e,r)=>e in t?yf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_f=(t,e)=>{for(var r in e||(e={}))vf.call(e,r)&&Dc(t,r,e[r]);if(Cc)for(var r of Cc(e))bf.call(e,r)&&Dc(t,r,e[r]);return t};const Ic=te.isMobile(),nr=_r({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),Rt={state:nr,async getRecomendedWallets(){const{explorerRecommendedWalletIds:t,explorerExcludedWalletIds:e}=Ut.state;if(t==="NONE"||e==="ALL"&&!t)return nr.recomendedWallets;if(te.isArray(t)){const r={recommendedIds:t.join(",")},{listings:n}=await Br.getAllListings(r),i=Object.values(n);i.sort((s,o)=>{const a=t.indexOf(s.id),c=t.indexOf(o.id);return a-c}),nr.recomendedWallets=i}else{const{chains:r,isAuth:n}=Ye.state,i=r==null?void 0:r.join(","),s=te.isArray(e),o={page:1,sdks:n?"auth_v1":void 0,entries:te.RECOMMENDED_WALLET_AMOUNT,chains:i,version:2,excludedIds:s?e.join(","):void 0},{listings:a}=Ic?await Br.getMobileListings(o):await Br.getDesktopListings(o);nr.recomendedWallets=Object.values(a)}return nr.recomendedWallets},async getWallets(t){const e=_f({},t),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:n}=Ut.state,{recomendedWallets:i}=nr;if(n==="ALL")return nr.wallets;i.length?e.excludedIds=i.map(f=>f.id).join(","):te.isArray(r)&&(e.excludedIds=r.join(",")),te.isArray(n)&&(e.excludedIds=[e.excludedIds,n].filter(Boolean).join(",")),Ye.state.isAuth&&(e.sdks="auth_v1");const{page:s,search:o}=t,{listings:a,total:c}=Ic?await Br.getMobileListings(e):await Br.getDesktopListings(e),u=Object.values(a),d=o?"search":"wallets";return nr[d]={listings:[...nr[d].listings,...u],total:c,page:s??1},{listings:u,total:c}},getWalletImageUrl(t){return Br.getWalletImageUrl(t)},getAssetImageUrl(t){return Br.getAssetImageUrl(t)},resetSearch(){nr.search={listings:[],total:0,page:1}}},fn=_r({open:!1}),zr={state:fn,subscribe(t){return kr(fn,()=>t(fn))},async open(t){return new Promise(e=>{const{isUiLoaded:r,isDataLoaded:n}=Ye.state;if(te.removeWalletConnectDeepLink(),Ye.setWalletConnectUri(t==null?void 0:t.uri),Ye.setChains(t==null?void 0:t.chains),ze.reset("ConnectWallet"),r&&n)fn.open=!0,e();else{const i=setInterval(()=>{const s=Ye.state;s.isUiLoaded&&s.isDataLoaded&&(clearInterval(i),fn.open=!0,e())},200)}})},close(){fn.open=!1}};var Ef=Object.defineProperty,Oc=Object.getOwnPropertySymbols,Sf=Object.prototype.hasOwnProperty,xf=Object.prototype.propertyIsEnumerable,Ac=(t,e,r)=>e in t?Ef(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Cf=(t,e)=>{for(var r in e||(e={}))Sf.call(e,r)&&Ac(t,r,e[r]);if(Oc)for(var r of Oc(e))xf.call(e,r)&&Ac(t,r,e[r]);return t};function Df(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const zn=_r({themeMode:Df()?"dark":"light"}),Er={state:zn,subscribe(t){return kr(zn,()=>t(zn))},setThemeConfig(t){const{themeMode:e,themeVariables:r}=t;e&&(zn.themeMode=e),r&&(zn.themeVariables=Cf({},r))}},qr=_r({open:!1,message:"",variant:"success"}),Sr={state:qr,subscribe(t){return kr(qr,()=>t(qr))},openToast(t,e){qr.open=!0,qr.message=t,qr.variant=e},closeToast(){qr.open=!1}};let If=class{constructor(e){this.openModal=zr.open,this.closeModal=zr.close,this.subscribeModal=zr.subscribe,this.setTheme=Er.setThemeConfig,Er.setThemeConfig(e),Ut.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.resolve().then(()=>n_);const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),Ye.setIsUiLoaded(!0)}}};var Ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function to(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var ro={exports:{}},pn=typeof Reflect=="object"?Reflect:null,$c=pn&&typeof pn.apply=="function"?pn.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Wi;pn&&typeof pn.ownKeys=="function"?Wi=pn.ownKeys:Object.getOwnPropertySymbols?Wi=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Wi=function(e){return Object.getOwnPropertyNames(e)};function Of(t){console&&console.warn&&console.warn(t)}var Tc=Number.isNaN||function(e){return e!==e};function Me(){Me.init.call(this)}ro.exports=Me,ro.exports.once=Rf,Me.EventEmitter=Me,Me.prototype._events=void 0,Me.prototype._eventsCount=0,Me.prototype._maxListeners=void 0;var Rc=10;function Vi(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Me,"defaultMaxListeners",{enumerable:!0,get:function(){return Rc},set:function(t){if(typeof t!="number"||t<0||Tc(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Rc=t}}),Me.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Me.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Tc(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Pc(t){return t._maxListeners===void 0?Me.defaultMaxListeners:t._maxListeners}Me.prototype.getMaxListeners=function(){return Pc(this)},Me.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")$c(c,this,r);else for(var u=c.length,d=Fc(c,u),n=0;n<u;++n)$c(d[n],this,r);return!0};function Nc(t,e,r,n){var i,s,o;if(Vi(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=Pc(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Of(a)}return t}Me.prototype.addListener=function(e,r){return Nc(this,e,r,!1)},Me.prototype.on=Me.prototype.addListener,Me.prototype.prependListener=function(e,r){return Nc(this,e,r,!0)};function Af(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Lc(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=Af.bind(n);return i.listener=r,n.wrapFn=i,i}Me.prototype.once=function(e,r){return Vi(r),this.on(e,Lc(this,e,r)),this},Me.prototype.prependOnceListener=function(e,r){return Vi(r),this.prependListener(e,Lc(this,e,r)),this},Me.prototype.removeListener=function(e,r){var n,i,s,o,a;if(Vi(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():$f(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this},Me.prototype.off=Me.prototype.removeListener,Me.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Mc(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?Tf(i):Fc(i,i.length)}Me.prototype.listeners=function(e){return Mc(this,e,!0)},Me.prototype.rawListeners=function(e){return Mc(this,e,!1)},Me.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Uc.call(t,e)},Me.prototype.listenerCount=Uc;function Uc(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Me.prototype.eventNames=function(){return this._eventsCount>0?Wi(this._events):[]};function Fc(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function $f(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Tf(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Rf(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}jc(t,e,s,{once:!0}),e!=="error"&&Pf(t,i,{once:!0})})}function Pf(t,e,r){typeof t.on=="function"&&jc(t,"error",e,r)}function jc(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Wt=ro.exports;const no=Hi(Wt);var Ki={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var io=function(t,e){return io=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},io(t,e)};function Nf(t,e){io(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var so=function(){return so=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},so.apply(this,arguments)};function Lf(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Mf(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function Uf(t,e){return function(r,n){e(r,n,t)}}function Ff(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function jf(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):i(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function kf(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Bf(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function zf(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function oo(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function kc(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function qf(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(kc(arguments[e]));return t}function Hf(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function qn(t){return this instanceof qn?(this.v=t,this):new qn(t)}function Wf(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(g){n[g]&&(i[g]=function(y){return new Promise(function(_,b){s.push([g,y,_,b])>1||a(g,y)})})}function a(g,y){try{c(n[g](y))}catch(_){f(s[0][3],_)}}function c(g){g.value instanceof qn?Promise.resolve(g.value.v).then(u,d):f(s[0][2],g)}function u(g){a("next",g)}function d(g){a("throw",g)}function f(g,y){g(y),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Vf(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:qn(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function Kf(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof oo=="function"?oo(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}function Gf(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Yf(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Jf(t){return t&&t.__esModule?t:{default:t}}function Zf(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Qf(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const Vt=to(Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return so},__asyncDelegator:Vf,__asyncGenerator:Wf,__asyncValues:Kf,__await:qn,__awaiter:jf,__classPrivateFieldGet:Zf,__classPrivateFieldSet:Qf,__createBinding:Bf,__decorate:Mf,__exportStar:zf,__extends:Nf,__generator:kf,__importDefault:Jf,__importStar:Yf,__makeTemplateObject:Gf,__metadata:Ff,__param:Uf,__read:kc,__rest:Lf,__spread:qf,__spreadArrays:Hf,__values:oo},Symbol.toStringTag,{value:"Module"})));var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});function Xf(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}Hn.safeJsonParse=Xf;function e0(t){return typeof t=="string"?t:JSON.stringify(t,(e,r)=>typeof r>"u"?null:r)}Hn.safeJsonStringify=e0;var Wn={exports:{}},Bc;function t0(){return Bc||(Bc=1,function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Ft<"u"&&Ft.localStorage?Wn.exports=Ft.localStorage:typeof window<"u"&&window.localStorage?Wn.exports=window.localStorage:Wn.exports=new e}()),Wn.exports}var ao={},Vn={},zc;function r0(){if(zc)return Vn;zc=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.IKeyValueStorage=void 0;class t{}return Vn.IKeyValueStorage=t,Vn}var Kn={},qc;function n0(){if(qc)return Kn;qc=1,Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.parseEntry=void 0;const t=Hn;function e(r){var n;return[r[0],t.safeJsonParse((n=r[1])!==null&&n!==void 0?n:"")]}return Kn.parseEntry=e,Kn}var Hc;function i0(){return Hc||(Hc=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Vt;e.__exportStar(r0(),t),e.__exportStar(n0(),t)}(ao)),ao}Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.KeyValueStorage=void 0;const gn=Vt,Wc=Hn,s0=gn.__importDefault(t0()),o0=i0();class Vc{constructor(){this.localStorage=s0.default}getKeys(){return gn.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return gn.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(o0.parseEntry)})}getItem(e){return gn.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return Wc.safeJsonParse(r)})}setItem(e,r){return gn.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,Wc.safeJsonStringify(r))})}removeItem(e){return gn.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}Ki.KeyValueStorage=Vc;var a0=Ki.default=Vc,mn={},Gn={},ee={},co={},Yn={},Kc;function c0(){if(Kc)return Yn;Kc=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Yn.delay=t,Yn}var Hr={},lo={},Wr={},Gc;function l0(){return Gc||(Gc=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.ONE_THOUSAND=Wr.ONE_HUNDRED=void 0,Wr.ONE_HUNDRED=100,Wr.ONE_THOUSAND=1e3),Wr}var uo={},Yc;function u0(){return Yc||(Yc=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(uo)),uo}var Jc;function Zc(){return Jc||(Jc=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Vt;e.__exportStar(l0(),t),e.__exportStar(u0(),t)}(lo)),lo}var Qc;function h0(){if(Qc)return Hr;Qc=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.fromMiliseconds=Hr.toMiliseconds=void 0;const t=Zc();function e(n){return n*t.ONE_THOUSAND}Hr.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return Hr.fromMiliseconds=r,Hr}var Xc;function d0(){return Xc||(Xc=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Vt;e.__exportStar(c0(),t),e.__exportStar(h0(),t)}(co)),co}var wn={},el;function f0(){if(el)return wn;el=1,Object.defineProperty(wn,"__esModule",{value:!0}),wn.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return wn.Watch=t,wn.default=t,wn}var ho={},Jn={},tl;function p0(){if(tl)return Jn;tl=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.IWatch=void 0;class t{}return Jn.IWatch=t,Jn}var rl;function g0(){return rl||(rl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Vt.__exportStar(p0(),t)}(ho)),ho}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Vt;e.__exportStar(d0(),t),e.__exportStar(f0(),t),e.__exportStar(g0(),t),e.__exportStar(Zc(),t)})(ee);var fo={},Zn={};let jt=class{};const m0=to(Object.freeze(Object.defineProperty({__proto__:null,IEvents:jt},Symbol.toStringTag,{value:"Module"})));var nl;function w0(){if(nl)return Zn;nl=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.IHeartBeat=void 0;const t=m0;class e extends t.IEvents{constructor(n){super()}}return Zn.IHeartBeat=e,Zn}var il;function sl(){return il||(il=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Vt.__exportStar(w0(),t)}(fo)),fo}var po={},Vr={},ol;function y0(){if(ol)return Vr;ol=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.HEARTBEAT_EVENTS=Vr.HEARTBEAT_INTERVAL=void 0;const t=ee;return Vr.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,Vr.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Vr}var al;function cl(){return al||(al=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Vt.__exportStar(y0(),t)}(po)),po}var ll;function v0(){if(ll)return Gn;ll=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.HeartBeat=void 0;const t=Vt,e=Wt,r=ee,n=sl(),i=cl();class s extends n.IHeartBeat{constructor(a){super(a),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=(a==null?void 0:a.interval)||i.HEARTBEAT_INTERVAL}static init(a){return t.__awaiter(this,void 0,void 0,function*(){const c=new s(a);return yield c.init(),c})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(a,c){this.events.on(a,c)}once(a,c){this.events.once(a,c)}off(a,c){this.events.off(a,c)}removeListener(a,c){this.events.removeListener(a,c)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return Gn.HeartBeat=s,Gn}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Vt;e.__exportStar(v0(),t),e.__exportStar(sl(),t),e.__exportStar(cl(),t)})(mn);var De={},go,ul;function b0(){if(ul)return go;ul=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}go=e;function e(r,n,i){var s=i&&i.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var c=new Array(a);c[0]=s(r);for(var u=1;u<a;u++)c[u]=s(n[u]);return c.join(" ")}if(typeof r!="string")return r;var d=n.length;if(d===0)return r;for(var f="",g=1-o,y=-1,_=r&&r.length||0,b=0;b<_;){if(r.charCodeAt(b)===37&&b+1<_){switch(y=y>-1?y:0,r.charCodeAt(b+1)){case 100:case 102:if(g>=d||n[g]==null)break;y<b&&(f+=r.slice(y,b)),f+=Number(n[g]),y=b+2,b++;break;case 105:if(g>=d||n[g]==null)break;y<b&&(f+=r.slice(y,b)),f+=Math.floor(Number(n[g])),y=b+2,b++;break;case 79:case 111:case 106:if(g>=d||n[g]===void 0)break;y<b&&(f+=r.slice(y,b));var C=typeof n[g];if(C==="string"){f+="'"+n[g]+"'",y=b+2,b++;break}if(C==="function"){f+=n[g].name||"<anonymous>",y=b+2,b++;break}f+=s(n[g]),y=b+2,b++;break;case 115:if(g>=d)break;y<b&&(f+=r.slice(y,b)),f+=String(n[g]),y=b+2,b++;break;case 37:y<b&&(f+=r.slice(y,b)),f+="%",y=b+2,b++,g--;break}++g}++b}return y===-1?r:(y<_&&(f+=r.slice(y)),f)}return go}var mo,hl;function _0(){if(hl)return mo;hl=1;const t=b0();mo=i;const e=x().console||{},r={mapHttpRequest:_,mapHttpResponse:_,wrapRequestSerializer:b,wrapResponseSerializer:b,wrapErrorSerializer:b,req:_,res:_,err:g};function n(p,l){return Array.isArray(p)?p.filter(function(R){return R!=="!stdSerializers.err"}):p===!0?Object.keys(l):!1}function i(p){p=p||{},p.browser=p.browser||{};const l=p.browser.transmit;if(l&&typeof l.send!="function")throw Error("pino: transmit option must have a send function");const m=p.browser.write||e;p.browser.write&&(p.browser.asObject=!0);const R=p.serializers||{},O=n(p.browser.serialize,R);let M=p.browser.serialize;Array.isArray(p.browser.serialize)&&p.browser.serialize.indexOf("!stdSerializers.err")>-1&&(M=!1);const k=["error","fatal","warn","info","debug","trace"];typeof m=="function"&&(m.error=m.fatal=m.warn=m.info=m.debug=m.trace=m),p.enabled===!1&&(p.level="silent");const W=p.level||"info",A=Object.create(m);A.log||(A.log=C),Object.defineProperty(A,"levelVal",{get:V}),Object.defineProperty(A,"level",{get:z,set:F});const N={transmit:l,serialize:O,asObject:p.browser.asObject,levels:k,timestamp:y(p)};A.levels=i.levels,A.level=W,A.setMaxListeners=A.getMaxListeners=A.emit=A.addListener=A.on=A.prependListener=A.once=A.prependOnceListener=A.removeListener=A.removeAllListeners=A.listeners=A.listenerCount=A.eventNames=A.write=A.flush=C,A.serializers=R,A._serialize=O,A._stdErrSerialize=M,A.child=B,l&&(A._logEvent=f());function V(){return this.level==="silent"?1/0:this.levels.values[this.level]}function z(){return this._level}function F(U){if(U!=="silent"&&!this.levels.values[U])throw Error("unknown level "+U);this._level=U,s(N,A,"error","log"),s(N,A,"fatal","error"),s(N,A,"warn","error"),s(N,A,"info","log"),s(N,A,"debug","log"),s(N,A,"trace","log")}function B(U,q){if(!U)throw new Error("missing bindings for child Pino");q=q||{},O&&U.serializers&&(q.serializers=U.serializers);const se=q.serializers;if(O&&se){var H=Object.assign({},R,se),re=p.browser.serialize===!0?Object.keys(H):O;delete U.serializers,c([U],re,H,this._stdErrSerialize)}function Q(ne){this._childLevel=(ne._childLevel|0)+1,this.error=u(ne,U,"error"),this.fatal=u(ne,U,"fatal"),this.warn=u(ne,U,"warn"),this.info=u(ne,U,"info"),this.debug=u(ne,U,"debug"),this.trace=u(ne,U,"trace"),H&&(this.serializers=H,this._serialize=re),l&&(this._logEvent=f([].concat(ne._logEvent.bindings,U)))}return Q.prototype=this,new Q(this)}return A}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=r,i.stdTimeFunctions=Object.assign({},{nullTime:I,epochTime:v,unixTime:E,isoTime:w});function s(p,l,m,R){const O=Object.getPrototypeOf(l);l[m]=l.levelVal>l.levels.values[m]?C:O[m]?O[m]:e[m]||e[R]||C,o(p,l,m)}function o(p,l,m){!p.transmit&&l[m]===C||(l[m]=function(R){return function(){const M=p.timestamp(),k=new Array(arguments.length),W=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var A=0;A<k.length;A++)k[A]=arguments[A];if(p.serialize&&!p.asObject&&c(k,this._serialize,this.serializers,this._stdErrSerialize),p.asObject?R.call(W,a(this,m,k,M)):R.apply(W,k),p.transmit){const N=p.transmit.level||l.level,V=i.levels.values[N],z=i.levels.values[m];if(z<V)return;d(this,{ts:M,methodLevel:m,methodValue:z,transmitLevel:N,transmitValue:i.levels.values[p.transmit.level||l.level],send:p.transmit.send,val:l.levelVal},k)}}}(l[m]))}function a(p,l,m,R){p._serialize&&c(m,p._serialize,p.serializers,p._stdErrSerialize);const O=m.slice();let M=O[0];const k={};R&&(k.time=R),k.level=i.levels.values[l];let W=(p._childLevel|0)+1;if(W<1&&(W=1),M!==null&&typeof M=="object"){for(;W--&&typeof O[0]=="object";)Object.assign(k,O.shift());M=O.length?t(O.shift(),O):void 0}else typeof M=="string"&&(M=t(O.shift(),O));return M!==void 0&&(k.msg=M),k}function c(p,l,m,R){for(const O in p)if(R&&p[O]instanceof Error)p[O]=i.stdSerializers.err(p[O]);else if(typeof p[O]=="object"&&!Array.isArray(p[O]))for(const M in p[O])l&&l.indexOf(M)>-1&&M in m&&(p[O][M]=m[M](p[O][M]))}function u(p,l,m){return function(){const R=new Array(1+arguments.length);R[0]=l;for(var O=1;O<R.length;O++)R[O]=arguments[O-1];return p[m].apply(this,R)}}function d(p,l,m){const R=l.send,O=l.ts,M=l.methodLevel,k=l.methodValue,W=l.val,A=p._logEvent.bindings;c(m,p._serialize||Object.keys(p.serializers),p.serializers,p._stdErrSerialize===void 0?!0:p._stdErrSerialize),p._logEvent.ts=O,p._logEvent.messages=m.filter(function(N){return A.indexOf(N)===-1}),p._logEvent.level.label=M,p._logEvent.level.value=k,R(M,p._logEvent,W),p._logEvent=f(A)}function f(p){return{ts:0,messages:[],bindings:p||[],level:{label:"",value:0}}}function g(p){const l={type:p.constructor.name,msg:p.message,stack:p.stack};for(const m in p)l[m]===void 0&&(l[m]=p[m]);return l}function y(p){return typeof p.timestamp=="function"?p.timestamp:p.timestamp===!1?I:v}function _(){return{}}function b(p){return p}function C(){}function I(){return!1}function v(){return Date.now()}function E(){return Math.round(Date.now()/1e3)}function w(){return new Date(Date.now()).toISOString()}function x(){function p(l){return typeof l<"u"&&l}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return p(self)||p(window)||p(this)||{}}}return mo}var Kr={},dl;function fl(){return dl||(dl=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.PINO_CUSTOM_CONTEXT_KEY=Kr.PINO_LOGGER_DEFAULTS=void 0,Kr.PINO_LOGGER_DEFAULTS={level:"info"},Kr.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Kr}var Dt={},pl;function E0(){if(pl)return Dt;pl=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.generateChildLogger=Dt.formatChildLoggerContext=Dt.getLoggerContext=Dt.setBrowserLoggerContext=Dt.getBrowserLoggerContext=Dt.getDefaultLoggerOptions=void 0;const t=fl();function e(a){return Object.assign(Object.assign({},a),{level:(a==null?void 0:a.level)||t.PINO_LOGGER_DEFAULTS.level})}Dt.getDefaultLoggerOptions=e;function r(a,c=t.PINO_CUSTOM_CONTEXT_KEY){return a[c]||""}Dt.getBrowserLoggerContext=r;function n(a,c,u=t.PINO_CUSTOM_CONTEXT_KEY){return a[u]=c,a}Dt.setBrowserLoggerContext=n;function i(a,c=t.PINO_CUSTOM_CONTEXT_KEY){let u="";return typeof a.bindings>"u"?u=r(a,c):u=a.bindings().context||"",u}Dt.getLoggerContext=i;function s(a,c,u=t.PINO_CUSTOM_CONTEXT_KEY){const d=i(a,u);return d.trim()?`${d}/${c}`:c}Dt.formatChildLoggerContext=s;function o(a,c,u=t.PINO_CUSTOM_CONTEXT_KEY){const d=s(a,c,u),f=a.child({context:d});return n(f,d,u)}return Dt.generateChildLogger=o,Dt}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=Vt,r=e.__importDefault(_0());Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(fl(),t),e.__exportStar(E0(),t)})(De);let S0=class extends jt{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},x0=class extends jt{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},C0=class{constructor(e,r){this.logger=e,this.core=r}},D0=class extends jt{constructor(e,r){super(),this.relayer=e,this.logger=r}},I0=class extends jt{constructor(e){super()}},O0=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},A0=class extends jt{constructor(e,r){super(),this.relayer=e,this.logger=r}},$0=class extends jt{constructor(e,r){super(),this.core=e,this.logger=r}},T0=class{constructor(e,r){this.projectId=e,this.logger=r}},R0=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},P0=class{constructor(e){this.client=e}};const N0=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),L0=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function gl(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return L0(t)}catch{return t}}function wo(t){return typeof t=="string"?t:N0(t)||""}var yo={},yn={},Gi={},Yi={};Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.BrowserRandomSource=void 0;const ml=65536;class M0{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=ml)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,ml)));return r}}Yi.BrowserRandomSource=M0;function U0(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ji={},kt={};Object.defineProperty(kt,"__esModule",{value:!0});function F0(t){for(var e=0;e<t.length;e++)t[e]=0;return t}kt.wipe=F0;const j0=to(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.NodeRandomSource=void 0;const k0=kt;class B0{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof U0<"u"){const e=j0;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,k0.wipe)(r),n}}Ji.NodeRandomSource=B0,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.SystemRandomSource=void 0;const z0=Yi,q0=Ji;class H0{constructor(){if(this.isAvailable=!1,this.name="",this._source=new z0.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new q0.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Gi.SystemRandomSource=H0;var ae={},wl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,c){var u=a>>>16&65535,d=a&65535,f=c>>>16&65535,g=c&65535;return d*g+(u*g+d*f<<16>>>0)|0}t.mul=Math.imul||e;function r(a,c){return a+c|0}t.add=r;function n(a,c){return a-c|0}t.sub=n;function i(a,c){return a<<c|a>>>32-c}t.rotl=i;function s(a,c){return a<<32-c|a>>>c}t.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||o,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(wl),Object.defineProperty(ae,"__esModule",{value:!0});var yl=wl;function W0(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}ae.readInt16BE=W0;function V0(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}ae.readUint16BE=V0;function K0(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}ae.readInt16LE=K0;function G0(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}ae.readUint16LE=G0;function vl(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}ae.writeUint16BE=vl,ae.writeInt16BE=vl;function bl(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}ae.writeUint16LE=bl,ae.writeInt16LE=bl;function vo(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}ae.readInt32BE=vo;function bo(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}ae.readUint32BE=bo;function _o(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}ae.readInt32LE=_o;function Eo(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}ae.readUint32LE=Eo;function Zi(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}ae.writeUint32BE=Zi,ae.writeInt32BE=Zi;function Qi(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}ae.writeUint32LE=Qi,ae.writeInt32LE=Qi;function Y0(t,e){e===void 0&&(e=0);var r=vo(t,e),n=vo(t,e+4);return r*4294967296+n-(n>>31)*4294967296}ae.readInt64BE=Y0;function J0(t,e){e===void 0&&(e=0);var r=bo(t,e),n=bo(t,e+4);return r*4294967296+n}ae.readUint64BE=J0;function Z0(t,e){e===void 0&&(e=0);var r=_o(t,e),n=_o(t,e+4);return n*4294967296+r-(r>>31)*4294967296}ae.readInt64LE=Z0;function Q0(t,e){e===void 0&&(e=0);var r=Eo(t,e),n=Eo(t,e+4);return n*4294967296+r}ae.readUint64LE=Q0;function _l(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Zi(t/4294967296>>>0,e,r),Zi(t>>>0,e,r+4),e}ae.writeUint64BE=_l,ae.writeInt64BE=_l;function El(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Qi(t>>>0,e,r),Qi(t/4294967296>>>0,e,r+4),e}ae.writeUint64LE=El,ae.writeInt64LE=El;function X0(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}ae.readUintBE=X0;function e1(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}ae.readUintLE=e1;function t1(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!yl.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}ae.writeUintBE=t1;function r1(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!yl.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}ae.writeUintLE=r1;function n1(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}ae.readFloat32BE=n1;function i1(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}ae.readFloat32LE=i1;function s1(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}ae.readFloat64BE=s1;function o1(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}ae.readFloat64LE=o1;function a1(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}ae.writeFloat32BE=a1;function c1(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}ae.writeFloat32LE=c1;function l1(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}ae.writeFloat64BE=l1;function u1(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}ae.writeFloat64LE=u1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=Gi,r=ae,n=kt;t.defaultRandomSource=new e.SystemRandomSource;function i(u,d=t.defaultRandomSource){return d.randomBytes(u)}t.randomBytes=i;function s(u=t.defaultRandomSource){const d=i(4,u),f=(0,r.readUint32LE)(d);return(0,n.wipe)(d),f}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(u,d=o,f=t.defaultRandomSource){if(d.length<2)throw new Error("randomString charset is too short");if(d.length>256)throw new Error("randomString charset is too long");let g="";const y=d.length,_=256-256%y;for(;u>0;){const b=i(Math.ceil(u*256/_),f);for(let C=0;C<b.length&&u>0;C++){const I=b[C];I<_&&(g+=d.charAt(I%y),u--)}(0,n.wipe)(b)}return g}t.randomString=a;function c(u,d=o,f=t.defaultRandomSource){const g=Math.ceil(u/(Math.log(d.length)/Math.LN2));return a(g,d,f)}t.randomStringForEntropy=c}(yn);var Sl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ae,r=kt;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(c,u){if(u===void 0&&(u=c.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var d=0;if(this._bytesHashed+=u,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&u>0;)this._buffer[this._bufferLength++]=c[d++],u--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(u>=this.blockSize&&(d=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,c,d,u),u%=this.blockSize);u>0;)this._buffer[this._bufferLength++]=c[d++],u--;return this},a.prototype.finish=function(c){if(!this._finished){var u=this._bytesHashed,d=this._bufferLength,f=u/536870912|0,g=u<<3,y=u%128<112?128:256;this._buffer[d]=128;for(var _=d+1;_<y-8;_++)this._buffer[_]=0;e.writeUint32BE(f,this._buffer,y-8),e.writeUint32BE(g,this._buffer,y-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,y),this._finished=!0}for(var _=0;_<this.digestLength/8;_++)e.writeUint32BE(this._stateHi[_],c,_*8),e.writeUint32BE(this._stateLo[_],c,_*8+4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._stateHi.set(c.stateHi),this._stateLo.set(c.stateLo),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.stateHi),r.wipe(c.stateLo),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,c,u,d,f,g,y){for(var _=u[0],b=u[1],C=u[2],I=u[3],v=u[4],E=u[5],w=u[6],x=u[7],p=d[0],l=d[1],m=d[2],R=d[3],O=d[4],M=d[5],k=d[6],W=d[7],A,N,V,z,F,B,U,q;y>=128;){for(var se=0;se<16;se++){var H=8*se+g;a[se]=e.readUint32BE(f,H),c[se]=e.readUint32BE(f,H+4)}for(var se=0;se<80;se++){var re=_,Q=b,ne=C,L=I,P=v,$=E,h=w,D=x,K=p,Z=l,ye=m,Ie=R,_e=O,Te=M,Je=k,We=W;if(A=x,N=W,F=N&65535,B=N>>>16,U=A&65535,q=A>>>16,A=(v>>>14|O<<32-14)^(v>>>18|O<<32-18)^(O>>>41-32|v<<32-(41-32)),N=(O>>>14|v<<32-14)^(O>>>18|v<<32-18)^(v>>>41-32|O<<32-(41-32)),F+=N&65535,B+=N>>>16,U+=A&65535,q+=A>>>16,A=v&E^~v&w,N=O&M^~O&k,F+=N&65535,B+=N>>>16,U+=A&65535,q+=A>>>16,A=i[se*2],N=i[se*2+1],F+=N&65535,B+=N>>>16,U+=A&65535,q+=A>>>16,A=a[se%16],N=c[se%16],F+=N&65535,B+=N>>>16,U+=A&65535,q+=A>>>16,B+=F>>>16,U+=B>>>16,q+=U>>>16,V=U&65535|q<<16,z=F&65535|B<<16,A=V,N=z,F=N&65535,B=N>>>16,U=A&65535,q=A>>>16,A=(_>>>28|p<<32-28)^(p>>>34-32|_<<32-(34-32))^(p>>>39-32|_<<32-(39-32)),N=(p>>>28|_<<32-28)^(_>>>34-32|p<<32-(34-32))^(_>>>39-32|p<<32-(39-32)),F+=N&65535,B+=N>>>16,U+=A&65535,q+=A>>>16,A=_&b^_&C^b&C,N=p&l^p&m^l&m,F+=N&65535,B+=N>>>16,U+=A&65535,q+=A>>>16,B+=F>>>16,U+=B>>>16,q+=U>>>16,D=U&65535|q<<16,We=F&65535|B<<16,A=L,N=Ie,F=N&65535,B=N>>>16,U=A&65535,q=A>>>16,A=V,N=z,F+=N&65535,B+=N>>>16,U+=A&65535,q+=A>>>16,B+=F>>>16,U+=B>>>16,q+=U>>>16,L=U&65535|q<<16,Ie=F&65535|B<<16,b=re,C=Q,I=ne,v=L,E=P,w=$,x=h,_=D,l=K,m=Z,R=ye,O=Ie,M=_e,k=Te,W=Je,p=We,se%16===15)for(var H=0;H<16;H++)A=a[H],N=c[H],F=N&65535,B=N>>>16,U=A&65535,q=A>>>16,A=a[(H+9)%16],N=c[(H+9)%16],F+=N&65535,B+=N>>>16,U+=A&65535,q+=A>>>16,V=a[(H+1)%16],z=c[(H+1)%16],A=(V>>>1|z<<32-1)^(V>>>8|z<<32-8)^V>>>7,N=(z>>>1|V<<32-1)^(z>>>8|V<<32-8)^(z>>>7|V<<32-7),F+=N&65535,B+=N>>>16,U+=A&65535,q+=A>>>16,V=a[(H+14)%16],z=c[(H+14)%16],A=(V>>>19|z<<32-19)^(z>>>61-32|V<<32-(61-32))^V>>>6,N=(z>>>19|V<<32-19)^(V>>>61-32|z<<32-(61-32))^(z>>>6|V<<32-6),F+=N&65535,B+=N>>>16,U+=A&65535,q+=A>>>16,B+=F>>>16,U+=B>>>16,q+=U>>>16,a[H]=U&65535|q<<16,c[H]=F&65535|B<<16}A=_,N=p,F=N&65535,B=N>>>16,U=A&65535,q=A>>>16,A=u[0],N=d[0],F+=N&65535,B+=N>>>16,U+=A&65535,q+=A>>>16,B+=F>>>16,U+=B>>>16,q+=U>>>16,u[0]=_=U&65535|q<<16,d[0]=p=F&65535|B<<16,A=b,N=l,F=N&65535,B=N>>>16,U=A&65535,q=A>>>16,A=u[1],N=d[1],F+=N&65535,B+=N>>>16,U+=A&65535,q+=A>>>16,B+=F>>>16,U+=B>>>16,q+=U>>>16,u[1]=b=U&65535|q<<16,d[1]=l=F&65535|B<<16,A=C,N=m,F=N&65535,B=N>>>16,U=A&65535,q=A>>>16,A=u[2],N=d[2],F+=N&65535,B+=N>>>16,U+=A&65535,q+=A>>>16,B+=F>>>16,U+=B>>>16,q+=U>>>16,u[2]=C=U&65535|q<<16,d[2]=m=F&65535|B<<16,A=I,N=R,F=N&65535,B=N>>>16,U=A&65535,q=A>>>16,A=u[3],N=d[3],F+=N&65535,B+=N>>>16,U+=A&65535,q+=A>>>16,B+=F>>>16,U+=B>>>16,q+=U>>>16,u[3]=I=U&65535|q<<16,d[3]=R=F&65535|B<<16,A=v,N=O,F=N&65535,B=N>>>16,U=A&65535,q=A>>>16,A=u[4],N=d[4],F+=N&65535,B+=N>>>16,U+=A&65535,q+=A>>>16,B+=F>>>16,U+=B>>>16,q+=U>>>16,u[4]=v=U&65535|q<<16,d[4]=O=F&65535|B<<16,A=E,N=M,F=N&65535,B=N>>>16,U=A&65535,q=A>>>16,A=u[5],N=d[5],F+=N&65535,B+=N>>>16,U+=A&65535,q+=A>>>16,B+=F>>>16,U+=B>>>16,q+=U>>>16,u[5]=E=U&65535|q<<16,d[5]=M=F&65535|B<<16,A=w,N=k,F=N&65535,B=N>>>16,U=A&65535,q=A>>>16,A=u[6],N=d[6],F+=N&65535,B+=N>>>16,U+=A&65535,q+=A>>>16,B+=F>>>16,U+=B>>>16,q+=U>>>16,u[6]=w=U&65535|q<<16,d[6]=k=F&65535|B<<16,A=x,N=W,F=N&65535,B=N>>>16,U=A&65535,q=A>>>16,A=u[7],N=d[7],F+=N&65535,B+=N>>>16,U+=A&65535,q+=A>>>16,B+=F>>>16,U+=B>>>16,q+=U>>>16,u[7]=x=U&65535|q<<16,d[7]=W=F&65535|B<<16,g+=128,y-=128}return g}function o(a){var c=new n;c.update(a);var u=c.digest();return c.clean(),u}t.hash=o})(Sl),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=yn,r=Sl,n=kt;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(L){const P=new Float64Array(16);if(L)for(let $=0;$<L.length;$++)P[$]=L[$];return P}const s=new Uint8Array(32);s[0]=9;const o=i(),a=i([1]),c=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),g=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function y(L,P){for(let $=0;$<16;$++)L[$]=P[$]|0}function _(L){let P=1;for(let $=0;$<16;$++){let h=L[$]+P+65535;P=Math.floor(h/65536),L[$]=h-P*65536}L[0]+=P-1+37*(P-1)}function b(L,P,$){const h=~($-1);for(let D=0;D<16;D++){const K=h&(L[D]^P[D]);L[D]^=K,P[D]^=K}}function C(L,P){const $=i(),h=i();for(let D=0;D<16;D++)h[D]=P[D];_(h),_(h),_(h);for(let D=0;D<2;D++){$[0]=h[0]-65517;for(let Z=1;Z<15;Z++)$[Z]=h[Z]-65535-($[Z-1]>>16&1),$[Z-1]&=65535;$[15]=h[15]-32767-($[14]>>16&1);const K=$[15]>>16&1;$[14]&=65535,b(h,$,1-K)}for(let D=0;D<16;D++)L[2*D]=h[D]&255,L[2*D+1]=h[D]>>8}function I(L,P){let $=0;for(let h=0;h<32;h++)$|=L[h]^P[h];return(1&$-1>>>8)-1}function v(L,P){const $=new Uint8Array(32),h=new Uint8Array(32);return C($,L),C(h,P),I($,h)}function E(L){const P=new Uint8Array(32);return C(P,L),P[0]&1}function w(L,P){for(let $=0;$<16;$++)L[$]=P[2*$]+(P[2*$+1]<<8);L[15]&=32767}function x(L,P,$){for(let h=0;h<16;h++)L[h]=P[h]+$[h]}function p(L,P,$){for(let h=0;h<16;h++)L[h]=P[h]-$[h]}function l(L,P,$){let h,D,K=0,Z=0,ye=0,Ie=0,_e=0,Te=0,Je=0,We=0,Ce=0,Ee=0,ve=0,me=0,ge=0,de=0,he=0,oe=0,we=0,Se=0,ce=0,Oe=0,Ae=0,Ne=0,Le=0,Re=0,er=0,lr=0,Mr=0,qt=0,ln=0,Fi=0,qs=0,Xe=$[0],Ve=$[1],et=$[2],tt=$[3],rt=$[4],Ke=$[5],lt=$[6],ut=$[7],ht=$[8],dt=$[9],ft=$[10],st=$[11],nt=$[12],Be=$[13],pt=$[14],gt=$[15];h=P[0],K+=h*Xe,Z+=h*Ve,ye+=h*et,Ie+=h*tt,_e+=h*rt,Te+=h*Ke,Je+=h*lt,We+=h*ut,Ce+=h*ht,Ee+=h*dt,ve+=h*ft,me+=h*st,ge+=h*nt,de+=h*Be,he+=h*pt,oe+=h*gt,h=P[1],Z+=h*Xe,ye+=h*Ve,Ie+=h*et,_e+=h*tt,Te+=h*rt,Je+=h*Ke,We+=h*lt,Ce+=h*ut,Ee+=h*ht,ve+=h*dt,me+=h*ft,ge+=h*st,de+=h*nt,he+=h*Be,oe+=h*pt,we+=h*gt,h=P[2],ye+=h*Xe,Ie+=h*Ve,_e+=h*et,Te+=h*tt,Je+=h*rt,We+=h*Ke,Ce+=h*lt,Ee+=h*ut,ve+=h*ht,me+=h*dt,ge+=h*ft,de+=h*st,he+=h*nt,oe+=h*Be,we+=h*pt,Se+=h*gt,h=P[3],Ie+=h*Xe,_e+=h*Ve,Te+=h*et,Je+=h*tt,We+=h*rt,Ce+=h*Ke,Ee+=h*lt,ve+=h*ut,me+=h*ht,ge+=h*dt,de+=h*ft,he+=h*st,oe+=h*nt,we+=h*Be,Se+=h*pt,ce+=h*gt,h=P[4],_e+=h*Xe,Te+=h*Ve,Je+=h*et,We+=h*tt,Ce+=h*rt,Ee+=h*Ke,ve+=h*lt,me+=h*ut,ge+=h*ht,de+=h*dt,he+=h*ft,oe+=h*st,we+=h*nt,Se+=h*Be,ce+=h*pt,Oe+=h*gt,h=P[5],Te+=h*Xe,Je+=h*Ve,We+=h*et,Ce+=h*tt,Ee+=h*rt,ve+=h*Ke,me+=h*lt,ge+=h*ut,de+=h*ht,he+=h*dt,oe+=h*ft,we+=h*st,Se+=h*nt,ce+=h*Be,Oe+=h*pt,Ae+=h*gt,h=P[6],Je+=h*Xe,We+=h*Ve,Ce+=h*et,Ee+=h*tt,ve+=h*rt,me+=h*Ke,ge+=h*lt,de+=h*ut,he+=h*ht,oe+=h*dt,we+=h*ft,Se+=h*st,ce+=h*nt,Oe+=h*Be,Ae+=h*pt,Ne+=h*gt,h=P[7],We+=h*Xe,Ce+=h*Ve,Ee+=h*et,ve+=h*tt,me+=h*rt,ge+=h*Ke,de+=h*lt,he+=h*ut,oe+=h*ht,we+=h*dt,Se+=h*ft,ce+=h*st,Oe+=h*nt,Ae+=h*Be,Ne+=h*pt,Le+=h*gt,h=P[8],Ce+=h*Xe,Ee+=h*Ve,ve+=h*et,me+=h*tt,ge+=h*rt,de+=h*Ke,he+=h*lt,oe+=h*ut,we+=h*ht,Se+=h*dt,ce+=h*ft,Oe+=h*st,Ae+=h*nt,Ne+=h*Be,Le+=h*pt,Re+=h*gt,h=P[9],Ee+=h*Xe,ve+=h*Ve,me+=h*et,ge+=h*tt,de+=h*rt,he+=h*Ke,oe+=h*lt,we+=h*ut,Se+=h*ht,ce+=h*dt,Oe+=h*ft,Ae+=h*st,Ne+=h*nt,Le+=h*Be,Re+=h*pt,er+=h*gt,h=P[10],ve+=h*Xe,me+=h*Ve,ge+=h*et,de+=h*tt,he+=h*rt,oe+=h*Ke,we+=h*lt,Se+=h*ut,ce+=h*ht,Oe+=h*dt,Ae+=h*ft,Ne+=h*st,Le+=h*nt,Re+=h*Be,er+=h*pt,lr+=h*gt,h=P[11],me+=h*Xe,ge+=h*Ve,de+=h*et,he+=h*tt,oe+=h*rt,we+=h*Ke,Se+=h*lt,ce+=h*ut,Oe+=h*ht,Ae+=h*dt,Ne+=h*ft,Le+=h*st,Re+=h*nt,er+=h*Be,lr+=h*pt,Mr+=h*gt,h=P[12],ge+=h*Xe,de+=h*Ve,he+=h*et,oe+=h*tt,we+=h*rt,Se+=h*Ke,ce+=h*lt,Oe+=h*ut,Ae+=h*ht,Ne+=h*dt,Le+=h*ft,Re+=h*st,er+=h*nt,lr+=h*Be,Mr+=h*pt,qt+=h*gt,h=P[13],de+=h*Xe,he+=h*Ve,oe+=h*et,we+=h*tt,Se+=h*rt,ce+=h*Ke,Oe+=h*lt,Ae+=h*ut,Ne+=h*ht,Le+=h*dt,Re+=h*ft,er+=h*st,lr+=h*nt,Mr+=h*Be,qt+=h*pt,ln+=h*gt,h=P[14],he+=h*Xe,oe+=h*Ve,we+=h*et,Se+=h*tt,ce+=h*rt,Oe+=h*Ke,Ae+=h*lt,Ne+=h*ut,Le+=h*ht,Re+=h*dt,er+=h*ft,lr+=h*st,Mr+=h*nt,qt+=h*Be,ln+=h*pt,Fi+=h*gt,h=P[15],oe+=h*Xe,we+=h*Ve,Se+=h*et,ce+=h*tt,Oe+=h*rt,Ae+=h*Ke,Ne+=h*lt,Le+=h*ut,Re+=h*ht,er+=h*dt,lr+=h*ft,Mr+=h*st,qt+=h*nt,ln+=h*Be,Fi+=h*pt,qs+=h*gt,K+=38*we,Z+=38*Se,ye+=38*ce,Ie+=38*Oe,_e+=38*Ae,Te+=38*Ne,Je+=38*Le,We+=38*Re,Ce+=38*er,Ee+=38*lr,ve+=38*Mr,me+=38*qt,ge+=38*ln,de+=38*Fi,he+=38*qs,D=1,h=K+D+65535,D=Math.floor(h/65536),K=h-D*65536,h=Z+D+65535,D=Math.floor(h/65536),Z=h-D*65536,h=ye+D+65535,D=Math.floor(h/65536),ye=h-D*65536,h=Ie+D+65535,D=Math.floor(h/65536),Ie=h-D*65536,h=_e+D+65535,D=Math.floor(h/65536),_e=h-D*65536,h=Te+D+65535,D=Math.floor(h/65536),Te=h-D*65536,h=Je+D+65535,D=Math.floor(h/65536),Je=h-D*65536,h=We+D+65535,D=Math.floor(h/65536),We=h-D*65536,h=Ce+D+65535,D=Math.floor(h/65536),Ce=h-D*65536,h=Ee+D+65535,D=Math.floor(h/65536),Ee=h-D*65536,h=ve+D+65535,D=Math.floor(h/65536),ve=h-D*65536,h=me+D+65535,D=Math.floor(h/65536),me=h-D*65536,h=ge+D+65535,D=Math.floor(h/65536),ge=h-D*65536,h=de+D+65535,D=Math.floor(h/65536),de=h-D*65536,h=he+D+65535,D=Math.floor(h/65536),he=h-D*65536,h=oe+D+65535,D=Math.floor(h/65536),oe=h-D*65536,K+=D-1+37*(D-1),D=1,h=K+D+65535,D=Math.floor(h/65536),K=h-D*65536,h=Z+D+65535,D=Math.floor(h/65536),Z=h-D*65536,h=ye+D+65535,D=Math.floor(h/65536),ye=h-D*65536,h=Ie+D+65535,D=Math.floor(h/65536),Ie=h-D*65536,h=_e+D+65535,D=Math.floor(h/65536),_e=h-D*65536,h=Te+D+65535,D=Math.floor(h/65536),Te=h-D*65536,h=Je+D+65535,D=Math.floor(h/65536),Je=h-D*65536,h=We+D+65535,D=Math.floor(h/65536),We=h-D*65536,h=Ce+D+65535,D=Math.floor(h/65536),Ce=h-D*65536,h=Ee+D+65535,D=Math.floor(h/65536),Ee=h-D*65536,h=ve+D+65535,D=Math.floor(h/65536),ve=h-D*65536,h=me+D+65535,D=Math.floor(h/65536),me=h-D*65536,h=ge+D+65535,D=Math.floor(h/65536),ge=h-D*65536,h=de+D+65535,D=Math.floor(h/65536),de=h-D*65536,h=he+D+65535,D=Math.floor(h/65536),he=h-D*65536,h=oe+D+65535,D=Math.floor(h/65536),oe=h-D*65536,K+=D-1+37*(D-1),L[0]=K,L[1]=Z,L[2]=ye,L[3]=Ie,L[4]=_e,L[5]=Te,L[6]=Je,L[7]=We,L[8]=Ce,L[9]=Ee,L[10]=ve,L[11]=me,L[12]=ge,L[13]=de,L[14]=he,L[15]=oe}function m(L,P){l(L,P,P)}function R(L,P){const $=i();let h;for(h=0;h<16;h++)$[h]=P[h];for(h=253;h>=0;h--)m($,$),h!==2&&h!==4&&l($,$,P);for(h=0;h<16;h++)L[h]=$[h]}function O(L,P){const $=i();let h;for(h=0;h<16;h++)$[h]=P[h];for(h=250;h>=0;h--)m($,$),h!==1&&l($,$,P);for(h=0;h<16;h++)L[h]=$[h]}function M(L,P){const $=i(),h=i(),D=i(),K=i(),Z=i(),ye=i(),Ie=i(),_e=i(),Te=i();p($,L[1],L[0]),p(Te,P[1],P[0]),l($,$,Te),x(h,L[0],L[1]),x(Te,P[0],P[1]),l(h,h,Te),l(D,L[3],P[3]),l(D,D,u),l(K,L[2],P[2]),x(K,K,K),p(Z,h,$),p(ye,K,D),x(Ie,K,D),x(_e,h,$),l(L[0],Z,ye),l(L[1],_e,Ie),l(L[2],Ie,ye),l(L[3],Z,_e)}function k(L,P,$){for(let h=0;h<4;h++)b(L[h],P[h],$)}function W(L,P){const $=i(),h=i(),D=i();R(D,P[2]),l($,P[0],D),l(h,P[1],D),C(L,h),L[31]^=E($)<<7}function A(L,P,$){y(L[0],o),y(L[1],a),y(L[2],a),y(L[3],o);for(let h=255;h>=0;--h){const D=$[h/8|0]>>(h&7)&1;k(L,P,D),M(P,L),M(L,L),k(L,P,D)}}function N(L,P){const $=[i(),i(),i(),i()];y($[0],d),y($[1],f),y($[2],a),l($[3],d,f),A(L,$,P)}function V(L){if(L.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const P=(0,r.hash)(L);P[0]&=248,P[31]&=127,P[31]|=64;const $=new Uint8Array(32),h=[i(),i(),i(),i()];N(h,P),W($,h);const D=new Uint8Array(64);return D.set(L),D.set($,32),{publicKey:$,secretKey:D}}t.generateKeyPairFromSeed=V;function z(L){const P=(0,e.randomBytes)(32,L),$=V(P);return(0,n.wipe)(P),$}t.generateKeyPair=z;function F(L){if(L.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(L.subarray(32))}t.extractPublicKeyFromSecretKey=F;const B=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function U(L,P){let $,h,D,K;for(h=63;h>=32;--h){for($=0,D=h-32,K=h-12;D<K;++D)P[D]+=$-16*P[h]*B[D-(h-32)],$=Math.floor((P[D]+128)/256),P[D]-=$*256;P[D]+=$,P[h]=0}for($=0,D=0;D<32;D++)P[D]+=$-(P[31]>>4)*B[D],$=P[D]>>8,P[D]&=255;for(D=0;D<32;D++)P[D]-=$*B[D];for(h=0;h<32;h++)P[h+1]+=P[h]>>8,L[h]=P[h]&255}function q(L){const P=new Float64Array(64);for(let $=0;$<64;$++)P[$]=L[$];for(let $=0;$<64;$++)L[$]=0;U(L,P)}function se(L,P){const $=new Float64Array(64),h=[i(),i(),i(),i()],D=(0,r.hash)(L.subarray(0,32));D[0]&=248,D[31]&=127,D[31]|=64;const K=new Uint8Array(64);K.set(D.subarray(32),32);const Z=new r.SHA512;Z.update(K.subarray(32)),Z.update(P);const ye=Z.digest();Z.clean(),q(ye),N(h,ye),W(K,h),Z.reset(),Z.update(K.subarray(0,32)),Z.update(L.subarray(32)),Z.update(P);const Ie=Z.digest();q(Ie);for(let _e=0;_e<32;_e++)$[_e]=ye[_e];for(let _e=0;_e<32;_e++)for(let Te=0;Te<32;Te++)$[_e+Te]+=Ie[_e]*D[Te];return U(K.subarray(32),$),K}t.sign=se;function H(L,P){const $=i(),h=i(),D=i(),K=i(),Z=i(),ye=i(),Ie=i();return y(L[2],a),w(L[1],P),m(D,L[1]),l(K,D,c),p(D,D,L[2]),x(K,L[2],K),m(Z,K),m(ye,Z),l(Ie,ye,Z),l($,Ie,D),l($,$,K),O($,$),l($,$,D),l($,$,K),l($,$,K),l(L[0],$,K),m(h,L[0]),l(h,h,K),v(h,D)&&l(L[0],L[0],g),m(h,L[0]),l(h,h,K),v(h,D)?-1:(E(L[0])===P[31]>>7&&p(L[0],o,L[0]),l(L[3],L[0],L[1]),0)}function re(L,P,$){const h=new Uint8Array(32),D=[i(),i(),i(),i()],K=[i(),i(),i(),i()];if($.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(H(K,L))return!1;const Z=new r.SHA512;Z.update($.subarray(0,32)),Z.update(L),Z.update(P);const ye=Z.digest();return q(ye),A(D,K,ye),N(K,$.subarray(32)),M(D,K),W(h,D),!I($,h)}t.verify=re;function Q(L){let P=[i(),i(),i(),i()];if(H(P,L))throw new Error("Ed25519: invalid public key");let $=i(),h=i(),D=P[1];x($,a,D),p(h,a,D),R(h,h),l($,$,h);let K=new Uint8Array(32);return C(K,$),K}t.convertPublicKeyToX25519=Q;function ne(L){const P=(0,r.hash)(L.subarray(0,32));P[0]&=248,P[31]&=127,P[31]|=64;const $=new Uint8Array(P.subarray(0,32));return(0,n.wipe)(P),$}t.convertSecretKeyToX25519=ne}(yo);const h1="EdDSA",d1="JWT",xl=".",Cl="base64url",f1="utf8",p1="utf8",g1=":",m1="did",w1="key",Dl="base58btc",y1="z",v1="K36",b1=32;function So(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Il(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?So(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function xo(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=Il(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return So(r)}function _1(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function f(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var b=0,C=0,I=0,v=_.length;I!==v&&_[I]===0;)I++,b++;for(var E=(v-I)*d+1>>>0,w=new Uint8Array(E);I!==v;){for(var x=_[I],p=0,l=E-1;(x!==0||p<C)&&l!==-1;l--,p++)x+=256*w[l]>>>0,w[l]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");C=p,I++}for(var m=E-C;m!==E&&w[m]===0;)m++;for(var R=c.repeat(b);m<E;++m)R+=t.charAt(w[m]);return R}function g(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var b=0;if(_[b]!==" "){for(var C=0,I=0;_[b]===c;)C++,b++;for(var v=(_.length-b)*u+1>>>0,E=new Uint8Array(v);_[b];){var w=r[_.charCodeAt(b)];if(w===255)return;for(var x=0,p=v-1;(w!==0||x<I)&&p!==-1;p--,x++)w+=a*E[p]>>>0,E[p]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");I=x,b++}if(_[b]!==" "){for(var l=v-I;l!==v&&E[l]===0;)l++;for(var m=new Uint8Array(C+(v-l)),R=C;l!==v;)m[R++]=E[l++];return m}}}function y(_){var b=g(_);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:g,decode:y}}var E1=_1,S1=E1;const x1=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},C1=t=>new TextEncoder().encode(t),D1=t=>new TextDecoder().decode(t);class I1{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class O1{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Ol(this,e)}}class A1{constructor(e){this.decoders=e}or(e){return Ol(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ol=(t,e)=>new A1({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class $1{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new I1(e,r,n),this.decoder=new O1(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Xi=({name:t,prefix:e,encode:r,decode:n})=>new $1(t,e,r,n),Qn=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=S1(r,e);return Xi({prefix:t,name:e,encode:n,decode:s=>x1(i(s))})},T1=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let d=0;d<s;++d){const f=i[t[d]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},R1=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},wt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Xi({prefix:e,name:t,encode(i){return R1(i,n,r)},decode(i){return T1(i,n,r,t)}}),P1=Xi({prefix:"\0",name:"identity",encode:t=>D1(t),decode:t=>C1(t)}),N1=Object.freeze(Object.defineProperty({__proto__:null,identity:P1},Symbol.toStringTag,{value:"Module"})),L1=wt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),M1=Object.freeze(Object.defineProperty({__proto__:null,base2:L1},Symbol.toStringTag,{value:"Module"})),U1=wt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),F1=Object.freeze(Object.defineProperty({__proto__:null,base8:U1},Symbol.toStringTag,{value:"Module"})),j1=Qn({prefix:"9",name:"base10",alphabet:"0123456789"}),k1=Object.freeze(Object.defineProperty({__proto__:null,base10:j1},Symbol.toStringTag,{value:"Module"})),B1=wt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),z1=wt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),q1=Object.freeze(Object.defineProperty({__proto__:null,base16:B1,base16upper:z1},Symbol.toStringTag,{value:"Module"})),H1=wt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),W1=wt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),V1=wt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),K1=wt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),G1=wt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Y1=wt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),J1=wt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Z1=wt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Q1=wt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),X1=Object.freeze(Object.defineProperty({__proto__:null,base32:H1,base32hex:G1,base32hexpad:J1,base32hexpadupper:Z1,base32hexupper:Y1,base32pad:V1,base32padupper:K1,base32upper:W1,base32z:Q1},Symbol.toStringTag,{value:"Module"})),ep=Qn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),tp=Qn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),rp=Object.freeze(Object.defineProperty({__proto__:null,base36:ep,base36upper:tp},Symbol.toStringTag,{value:"Module"})),np=Qn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ip=Qn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),sp=Object.freeze(Object.defineProperty({__proto__:null,base58btc:np,base58flickr:ip},Symbol.toStringTag,{value:"Module"})),op=wt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ap=wt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),cp=wt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),lp=wt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),up=Object.freeze(Object.defineProperty({__proto__:null,base64:op,base64pad:ap,base64url:cp,base64urlpad:lp},Symbol.toStringTag,{value:"Module"})),Al=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),hp=Al.reduce((t,e,r)=>(t[r]=e,t),[]),dp=Al.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function fp(t){return t.reduce((e,r)=>(e+=hp[r],e),"")}function pp(t){const e=[];for(const r of t){const n=dp[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const gp=Xi({prefix:"🚀",name:"base256emoji",encode:fp,decode:pp}),mp=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:gp},Symbol.toStringTag,{value:"Module"}));new TextEncoder,new TextDecoder;const $l={...N1,...M1,...F1,...k1,...q1,...X1,...rp,...sp,...up,...mp};function Tl(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Rl=Tl("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Co=Tl("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Il(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Pl={utf8:Rl,"utf-8":Rl,hex:$l.base16,latin1:Co,ascii:Co,binary:Co,...$l};function It(t,e="utf8"){const r=Pl[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Pt(t,e="utf8"){const r=Pl[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?So(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function es(t){return It(Pt(wo(t),f1),Cl)}function Nl(t){const e=Pt(v1,Dl),r=y1+It(xo([e,t]),Dl);return[m1,w1,r].join(g1)}function wp(t){return It(t,Cl)}function yp(t){return Pt([es(t.header),es(t.payload)].join(xl),p1)}function vp(t){return[es(t.header),es(t.payload),wp(t.signature)].join(xl)}function Ll(t=yn.randomBytes(b1)){return yo.generateKeyPairFromSeed(t)}async function bp(t,e,r,n,i=ee.fromMiliseconds(Date.now())){const s={alg:h1,typ:d1},o=Nl(n.publicKey),a=i+r,c={iss:o,sub:t,aud:e,iat:i,exp:a},u=yp({header:s,payload:c}),d=yo.sign(n.secretKey,u);return vp({header:s,payload:c,signature:d})}var Do={},ts={};Object.defineProperty(ts,"__esModule",{value:!0});var _t=ae,Io=kt,_p=20;function Ep(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],u=r[11]<<24|r[10]<<16|r[9]<<8|r[8],d=r[15]<<24|r[14]<<16|r[13]<<8|r[12],f=r[19]<<24|r[18]<<16|r[17]<<8|r[16],g=r[23]<<24|r[22]<<16|r[21]<<8|r[20],y=r[27]<<24|r[26]<<16|r[25]<<8|r[24],_=r[31]<<24|r[30]<<16|r[29]<<8|r[28],b=e[3]<<24|e[2]<<16|e[1]<<8|e[0],C=e[7]<<24|e[6]<<16|e[5]<<8|e[4],I=e[11]<<24|e[10]<<16|e[9]<<8|e[8],v=e[15]<<24|e[14]<<16|e[13]<<8|e[12],E=n,w=i,x=s,p=o,l=a,m=c,R=u,O=d,M=f,k=g,W=y,A=_,N=b,V=C,z=I,F=v,B=0;B<_p;B+=2)E=E+l|0,N^=E,N=N>>>32-16|N<<16,M=M+N|0,l^=M,l=l>>>32-12|l<<12,w=w+m|0,V^=w,V=V>>>32-16|V<<16,k=k+V|0,m^=k,m=m>>>32-12|m<<12,x=x+R|0,z^=x,z=z>>>32-16|z<<16,W=W+z|0,R^=W,R=R>>>32-12|R<<12,p=p+O|0,F^=p,F=F>>>32-16|F<<16,A=A+F|0,O^=A,O=O>>>32-12|O<<12,x=x+R|0,z^=x,z=z>>>32-8|z<<8,W=W+z|0,R^=W,R=R>>>32-7|R<<7,p=p+O|0,F^=p,F=F>>>32-8|F<<8,A=A+F|0,O^=A,O=O>>>32-7|O<<7,w=w+m|0,V^=w,V=V>>>32-8|V<<8,k=k+V|0,m^=k,m=m>>>32-7|m<<7,E=E+l|0,N^=E,N=N>>>32-8|N<<8,M=M+N|0,l^=M,l=l>>>32-7|l<<7,E=E+m|0,F^=E,F=F>>>32-16|F<<16,W=W+F|0,m^=W,m=m>>>32-12|m<<12,w=w+R|0,N^=w,N=N>>>32-16|N<<16,A=A+N|0,R^=A,R=R>>>32-12|R<<12,x=x+O|0,V^=x,V=V>>>32-16|V<<16,M=M+V|0,O^=M,O=O>>>32-12|O<<12,p=p+l|0,z^=p,z=z>>>32-16|z<<16,k=k+z|0,l^=k,l=l>>>32-12|l<<12,x=x+O|0,V^=x,V=V>>>32-8|V<<8,M=M+V|0,O^=M,O=O>>>32-7|O<<7,p=p+l|0,z^=p,z=z>>>32-8|z<<8,k=k+z|0,l^=k,l=l>>>32-7|l<<7,w=w+R|0,N^=w,N=N>>>32-8|N<<8,A=A+N|0,R^=A,R=R>>>32-7|R<<7,E=E+m|0,F^=E,F=F>>>32-8|F<<8,W=W+F|0,m^=W,m=m>>>32-7|m<<7;_t.writeUint32LE(E+n|0,t,0),_t.writeUint32LE(w+i|0,t,4),_t.writeUint32LE(x+s|0,t,8),_t.writeUint32LE(p+o|0,t,12),_t.writeUint32LE(l+a|0,t,16),_t.writeUint32LE(m+c|0,t,20),_t.writeUint32LE(R+u|0,t,24),_t.writeUint32LE(O+d|0,t,28),_t.writeUint32LE(M+f|0,t,32),_t.writeUint32LE(k+g|0,t,36),_t.writeUint32LE(W+y|0,t,40),_t.writeUint32LE(A+_|0,t,44),_t.writeUint32LE(N+b|0,t,48),_t.writeUint32LE(V+C|0,t,52),_t.writeUint32LE(z+I|0,t,56),_t.writeUint32LE(F+v|0,t,60)}function Ml(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=i}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){Ep(a,s,t);for(var u=c;u<c+64&&u<r.length;u++)n[u]=r[u]^a[u-c];xp(s,0,o)}return Io.wipe(a),i===0&&Io.wipe(s),n}ts.streamXOR=Ml;function Sp(t,e,r,n){return n===void 0&&(n=0),Io.wipe(r),Ml(t,e,r,r,n)}ts.stream=Sp;function xp(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var Ul={},xr={};Object.defineProperty(xr,"__esModule",{value:!0});function Cp(t,e,r){return~(t-1)&e|t-1&r}xr.select=Cp;function Dp(t,e){return(t|0)-(e|0)-1>>>31&1}xr.lessOrEqual=Dp;function Fl(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}xr.compare=Fl;function Ip(t,e){return t.length===0||e.length===0?!1:Fl(t,e)!==0}xr.equal=Ip,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=xr,r=kt;t.DIGEST_LENGTH=16;var n=function(){function o(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=a[0]|a[1]<<8;this._r[0]=c&8191;var u=a[2]|a[3]<<8;this._r[1]=(c>>>13|u<<3)&8191;var d=a[4]|a[5]<<8;this._r[2]=(u>>>10|d<<6)&7939;var f=a[6]|a[7]<<8;this._r[3]=(d>>>7|f<<9)&8191;var g=a[8]|a[9]<<8;this._r[4]=(f>>>4|g<<12)&255,this._r[5]=g>>>1&8190;var y=a[10]|a[11]<<8;this._r[6]=(g>>>14|y<<2)&8191;var _=a[12]|a[13]<<8;this._r[7]=(y>>>11|_<<5)&8065;var b=a[14]|a[15]<<8;this._r[8]=(_>>>8|b<<8)&8191,this._r[9]=b>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return o.prototype._blocks=function(a,c,u){for(var d=this._fin?0:2048,f=this._h[0],g=this._h[1],y=this._h[2],_=this._h[3],b=this._h[4],C=this._h[5],I=this._h[6],v=this._h[7],E=this._h[8],w=this._h[9],x=this._r[0],p=this._r[1],l=this._r[2],m=this._r[3],R=this._r[4],O=this._r[5],M=this._r[6],k=this._r[7],W=this._r[8],A=this._r[9];u>=16;){var N=a[c+0]|a[c+1]<<8;f+=N&8191;var V=a[c+2]|a[c+3]<<8;g+=(N>>>13|V<<3)&8191;var z=a[c+4]|a[c+5]<<8;y+=(V>>>10|z<<6)&8191;var F=a[c+6]|a[c+7]<<8;_+=(z>>>7|F<<9)&8191;var B=a[c+8]|a[c+9]<<8;b+=(F>>>4|B<<12)&8191,C+=B>>>1&8191;var U=a[c+10]|a[c+11]<<8;I+=(B>>>14|U<<2)&8191;var q=a[c+12]|a[c+13]<<8;v+=(U>>>11|q<<5)&8191;var se=a[c+14]|a[c+15]<<8;E+=(q>>>8|se<<8)&8191,w+=se>>>5|d;var H=0,re=H;re+=f*x,re+=g*(5*A),re+=y*(5*W),re+=_*(5*k),re+=b*(5*M),H=re>>>13,re&=8191,re+=C*(5*O),re+=I*(5*R),re+=v*(5*m),re+=E*(5*l),re+=w*(5*p),H+=re>>>13,re&=8191;var Q=H;Q+=f*p,Q+=g*x,Q+=y*(5*A),Q+=_*(5*W),Q+=b*(5*k),H=Q>>>13,Q&=8191,Q+=C*(5*M),Q+=I*(5*O),Q+=v*(5*R),Q+=E*(5*m),Q+=w*(5*l),H+=Q>>>13,Q&=8191;var ne=H;ne+=f*l,ne+=g*p,ne+=y*x,ne+=_*(5*A),ne+=b*(5*W),H=ne>>>13,ne&=8191,ne+=C*(5*k),ne+=I*(5*M),ne+=v*(5*O),ne+=E*(5*R),ne+=w*(5*m),H+=ne>>>13,ne&=8191;var L=H;L+=f*m,L+=g*l,L+=y*p,L+=_*x,L+=b*(5*A),H=L>>>13,L&=8191,L+=C*(5*W),L+=I*(5*k),L+=v*(5*M),L+=E*(5*O),L+=w*(5*R),H+=L>>>13,L&=8191;var P=H;P+=f*R,P+=g*m,P+=y*l,P+=_*p,P+=b*x,H=P>>>13,P&=8191,P+=C*(5*A),P+=I*(5*W),P+=v*(5*k),P+=E*(5*M),P+=w*(5*O),H+=P>>>13,P&=8191;var $=H;$+=f*O,$+=g*R,$+=y*m,$+=_*l,$+=b*p,H=$>>>13,$&=8191,$+=C*x,$+=I*(5*A),$+=v*(5*W),$+=E*(5*k),$+=w*(5*M),H+=$>>>13,$&=8191;var h=H;h+=f*M,h+=g*O,h+=y*R,h+=_*m,h+=b*l,H=h>>>13,h&=8191,h+=C*p,h+=I*x,h+=v*(5*A),h+=E*(5*W),h+=w*(5*k),H+=h>>>13,h&=8191;var D=H;D+=f*k,D+=g*M,D+=y*O,D+=_*R,D+=b*m,H=D>>>13,D&=8191,D+=C*l,D+=I*p,D+=v*x,D+=E*(5*A),D+=w*(5*W),H+=D>>>13,D&=8191;var K=H;K+=f*W,K+=g*k,K+=y*M,K+=_*O,K+=b*R,H=K>>>13,K&=8191,K+=C*m,K+=I*l,K+=v*p,K+=E*x,K+=w*(5*A),H+=K>>>13,K&=8191;var Z=H;Z+=f*A,Z+=g*W,Z+=y*k,Z+=_*M,Z+=b*O,H=Z>>>13,Z&=8191,Z+=C*R,Z+=I*m,Z+=v*l,Z+=E*p,Z+=w*x,H+=Z>>>13,Z&=8191,H=(H<<2)+H|0,H=H+re|0,re=H&8191,H=H>>>13,Q+=H,f=re,g=Q,y=ne,_=L,b=P,C=$,I=h,v=D,E=K,w=Z,c+=16,u-=16}this._h[0]=f,this._h[1]=g,this._h[2]=y,this._h[3]=_,this._h[4]=b,this._h[5]=C,this._h[6]=I,this._h[7]=v,this._h[8]=E,this._h[9]=w},o.prototype.finish=function(a,c){c===void 0&&(c=0);var u=new Uint16Array(10),d,f,g,y;if(this._leftover){for(y=this._leftover,this._buffer[y++]=1;y<16;y++)this._buffer[y]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(d=this._h[1]>>>13,this._h[1]&=8191,y=2;y<10;y++)this._h[y]+=d,d=this._h[y]>>>13,this._h[y]&=8191;for(this._h[0]+=d*5,d=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=d,d=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=d,u[0]=this._h[0]+5,d=u[0]>>>13,u[0]&=8191,y=1;y<10;y++)u[y]=this._h[y]+d,d=u[y]>>>13,u[y]&=8191;for(u[9]-=8192,f=(d^1)-1,y=0;y<10;y++)u[y]&=f;for(f=~f,y=0;y<10;y++)this._h[y]=this._h[y]&f|u[y];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,g=this._h[0]+this._pad[0],this._h[0]=g&65535,y=1;y<8;y++)g=(this._h[y]+this._pad[y]|0)+(g>>>16)|0,this._h[y]=g&65535;return a[c+0]=this._h[0]>>>0,a[c+1]=this._h[0]>>>8,a[c+2]=this._h[1]>>>0,a[c+3]=this._h[1]>>>8,a[c+4]=this._h[2]>>>0,a[c+5]=this._h[2]>>>8,a[c+6]=this._h[3]>>>0,a[c+7]=this._h[3]>>>8,a[c+8]=this._h[4]>>>0,a[c+9]=this._h[4]>>>8,a[c+10]=this._h[5]>>>0,a[c+11]=this._h[5]>>>8,a[c+12]=this._h[6]>>>0,a[c+13]=this._h[6]>>>8,a[c+14]=this._h[7]>>>0,a[c+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(a){var c=0,u=a.length,d;if(this._leftover){d=16-this._leftover,d>u&&(d=u);for(var f=0;f<d;f++)this._buffer[this._leftover+f]=a[c+f];if(u-=d,c+=d,this._leftover+=d,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(u>=16&&(d=u-u%16,this._blocks(a,c,d),c+=d,u-=d),u){for(var f=0;f<u;f++)this._buffer[this._leftover+f]=a[c+f];this._leftover+=u}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},o.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o}();t.Poly1305=n;function i(o,a){var c=new n(o);c.update(a);var u=c.digest();return c.clean(),u}t.oneTimeAuth=i;function s(o,a){return o.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(o,a)}t.equal=s}(Ul),function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ts,r=Ul,n=kt,i=ae,s=xr;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var o=new Uint8Array(16),a=function(){function c(u){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,u.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(u)}return c.prototype.seal=function(u,d,f,g){if(u.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var y=new Uint8Array(16);y.set(u,y.length-u.length);var _=new Uint8Array(32);e.stream(this._key,y,_,4);var b=d.length+this.tagLength,C;if(g){if(g.length!==b)throw new Error("ChaCha20Poly1305: incorrect destination length");C=g}else C=new Uint8Array(b);return e.streamXOR(this._key,y,d,C,4),this._authenticate(C.subarray(C.length-this.tagLength,C.length),_,C.subarray(0,C.length-this.tagLength),f),n.wipe(y),C},c.prototype.open=function(u,d,f,g){if(u.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(d.length<this.tagLength)return null;var y=new Uint8Array(16);y.set(u,y.length-u.length);var _=new Uint8Array(32);e.stream(this._key,y,_,4);var b=new Uint8Array(this.tagLength);if(this._authenticate(b,_,d.subarray(0,d.length-this.tagLength),f),!s.equal(b,d.subarray(d.length-this.tagLength,d.length)))return null;var C=d.length-this.tagLength,I;if(g){if(g.length!==C)throw new Error("ChaCha20Poly1305: incorrect destination length");I=g}else I=new Uint8Array(C);return e.streamXOR(this._key,y,d.subarray(0,d.length-this.tagLength),I,4),n.wipe(y),I},c.prototype.clean=function(){return n.wipe(this._key),this},c.prototype._authenticate=function(u,d,f,g){var y=new r.Poly1305(d);g&&(y.update(g),g.length%16>0&&y.update(o.subarray(g.length%16))),y.update(f),f.length%16>0&&y.update(o.subarray(f.length%16));var _=new Uint8Array(8);g&&i.writeUint64LE(g.length,_),y.update(_),i.writeUint64LE(f.length,_),y.update(_);for(var b=y.digest(),C=0;C<b.length;C++)u[C]=b[C];y.clean(),n.wipe(b),n.wipe(_)},c}();t.ChaCha20Poly1305=a}(Do);var jl={},Xn={},Oo={};Object.defineProperty(Oo,"__esModule",{value:!0});function Op(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}Oo.isSerializableHash=Op,Object.defineProperty(Xn,"__esModule",{value:!0});var ir=Oo,Ap=xr,$p=kt,kl=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),ir.isSerializableHash(this._inner)&&ir.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),$p.wipe(n)}return t.prototype.reset=function(){if(!ir.isSerializableHash(this._inner)||!ir.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){ir.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),ir.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!ir.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!ir.isSerializableHash(this._inner)||!ir.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!ir.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();Xn.HMAC=kl;function Tp(t,e,r){var n=new kl(t,e);n.update(r);var i=n.digest();return n.clean(),i}Xn.hmac=Tp,Xn.equal=Ap.equal,Object.defineProperty(jl,"__esModule",{value:!0});var Bl=Xn,zl=kt,Rp=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=Bl.hmac(this._hash,n,r);this._hmac=new Bl.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),zl.wipe(this._buffer),zl.wipe(this._counter),this._bufpos=0},t}(),Pp=jl.HKDF=Rp,rs={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ae,r=kt;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},a.prototype.update=function(c,u){if(u===void 0&&(u=c.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var d=0;if(this._bytesHashed+=u,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&u>0;)this._buffer[this._bufferLength++]=c[d++],u--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(u>=this.blockSize&&(d=s(this._temp,this._state,c,d,u),u%=this.blockSize);u>0;)this._buffer[this._bufferLength++]=c[d++],u--;return this},a.prototype.finish=function(c){if(!this._finished){var u=this._bytesHashed,d=this._bufferLength,f=u/536870912|0,g=u<<3,y=u%64<56?64:128;this._buffer[d]=128;for(var _=d+1;_<y-8;_++)this._buffer[_]=0;e.writeUint32BE(f,this._buffer,y-8),e.writeUint32BE(g,this._buffer,y-4),s(this._temp,this._state,this._buffer,0,y),this._finished=!0}for(var _=0;_<this.digestLength/4;_++)e.writeUint32BE(this._state[_],c,_*4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._state.set(c.state),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.state),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(a,c,u,d,f){for(;f>=64;){for(var g=c[0],y=c[1],_=c[2],b=c[3],C=c[4],I=c[5],v=c[6],E=c[7],w=0;w<16;w++){var x=d+w*4;a[w]=e.readUint32BE(u,x)}for(var w=16;w<64;w++){var p=a[w-2],l=(p>>>17|p<<32-17)^(p>>>19|p<<32-19)^p>>>10;p=a[w-15];var m=(p>>>7|p<<32-7)^(p>>>18|p<<32-18)^p>>>3;a[w]=(l+a[w-7]|0)+(m+a[w-16]|0)}for(var w=0;w<64;w++){var l=(((C>>>6|C<<26)^(C>>>11|C<<21)^(C>>>25|C<<7))+(C&I^~C&v)|0)+(E+(i[w]+a[w]|0)|0)|0,m=((g>>>2|g<<32-2)^(g>>>13|g<<32-13)^(g>>>22|g<<32-22))+(g&y^g&_^y&_)|0;E=v,v=I,I=C,C=b+l|0,b=_,_=y,y=g,g=l+m|0}c[0]+=g,c[1]+=y,c[2]+=_,c[3]+=b,c[4]+=C,c[5]+=I,c[6]+=v,c[7]+=E,d+=64,f-=64}return d}function o(a){var c=new n;c.update(a);var u=c.digest();return c.clean(),u}t.hash=o})(rs);var Ao={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=yn,r=kt;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(w){const x=new Float64Array(16);if(w)for(let p=0;p<w.length;p++)x[p]=w[p];return x}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function o(w){let x=1;for(let p=0;p<16;p++){let l=w[p]+x+65535;x=Math.floor(l/65536),w[p]=l-x*65536}w[0]+=x-1+37*(x-1)}function a(w,x,p){const l=~(p-1);for(let m=0;m<16;m++){const R=l&(w[m]^x[m]);w[m]^=R,x[m]^=R}}function c(w,x){const p=n(),l=n();for(let m=0;m<16;m++)l[m]=x[m];o(l),o(l),o(l);for(let m=0;m<2;m++){p[0]=l[0]-65517;for(let O=1;O<15;O++)p[O]=l[O]-65535-(p[O-1]>>16&1),p[O-1]&=65535;p[15]=l[15]-32767-(p[14]>>16&1);const R=p[15]>>16&1;p[14]&=65535,a(l,p,1-R)}for(let m=0;m<16;m++)w[2*m]=l[m]&255,w[2*m+1]=l[m]>>8}function u(w,x){for(let p=0;p<16;p++)w[p]=x[2*p]+(x[2*p+1]<<8);w[15]&=32767}function d(w,x,p){for(let l=0;l<16;l++)w[l]=x[l]+p[l]}function f(w,x,p){for(let l=0;l<16;l++)w[l]=x[l]-p[l]}function g(w,x,p){let l,m,R=0,O=0,M=0,k=0,W=0,A=0,N=0,V=0,z=0,F=0,B=0,U=0,q=0,se=0,H=0,re=0,Q=0,ne=0,L=0,P=0,$=0,h=0,D=0,K=0,Z=0,ye=0,Ie=0,_e=0,Te=0,Je=0,We=0,Ce=p[0],Ee=p[1],ve=p[2],me=p[3],ge=p[4],de=p[5],he=p[6],oe=p[7],we=p[8],Se=p[9],ce=p[10],Oe=p[11],Ae=p[12],Ne=p[13],Le=p[14],Re=p[15];l=x[0],R+=l*Ce,O+=l*Ee,M+=l*ve,k+=l*me,W+=l*ge,A+=l*de,N+=l*he,V+=l*oe,z+=l*we,F+=l*Se,B+=l*ce,U+=l*Oe,q+=l*Ae,se+=l*Ne,H+=l*Le,re+=l*Re,l=x[1],O+=l*Ce,M+=l*Ee,k+=l*ve,W+=l*me,A+=l*ge,N+=l*de,V+=l*he,z+=l*oe,F+=l*we,B+=l*Se,U+=l*ce,q+=l*Oe,se+=l*Ae,H+=l*Ne,re+=l*Le,Q+=l*Re,l=x[2],M+=l*Ce,k+=l*Ee,W+=l*ve,A+=l*me,N+=l*ge,V+=l*de,z+=l*he,F+=l*oe,B+=l*we,U+=l*Se,q+=l*ce,se+=l*Oe,H+=l*Ae,re+=l*Ne,Q+=l*Le,ne+=l*Re,l=x[3],k+=l*Ce,W+=l*Ee,A+=l*ve,N+=l*me,V+=l*ge,z+=l*de,F+=l*he,B+=l*oe,U+=l*we,q+=l*Se,se+=l*ce,H+=l*Oe,re+=l*Ae,Q+=l*Ne,ne+=l*Le,L+=l*Re,l=x[4],W+=l*Ce,A+=l*Ee,N+=l*ve,V+=l*me,z+=l*ge,F+=l*de,B+=l*he,U+=l*oe,q+=l*we,se+=l*Se,H+=l*ce,re+=l*Oe,Q+=l*Ae,ne+=l*Ne,L+=l*Le,P+=l*Re,l=x[5],A+=l*Ce,N+=l*Ee,V+=l*ve,z+=l*me,F+=l*ge,B+=l*de,U+=l*he,q+=l*oe,se+=l*we,H+=l*Se,re+=l*ce,Q+=l*Oe,ne+=l*Ae,L+=l*Ne,P+=l*Le,$+=l*Re,l=x[6],N+=l*Ce,V+=l*Ee,z+=l*ve,F+=l*me,B+=l*ge,U+=l*de,q+=l*he,se+=l*oe,H+=l*we,re+=l*Se,Q+=l*ce,ne+=l*Oe,L+=l*Ae,P+=l*Ne,$+=l*Le,h+=l*Re,l=x[7],V+=l*Ce,z+=l*Ee,F+=l*ve,B+=l*me,U+=l*ge,q+=l*de,se+=l*he,H+=l*oe,re+=l*we,Q+=l*Se,ne+=l*ce,L+=l*Oe,P+=l*Ae,$+=l*Ne,h+=l*Le,D+=l*Re,l=x[8],z+=l*Ce,F+=l*Ee,B+=l*ve,U+=l*me,q+=l*ge,se+=l*de,H+=l*he,re+=l*oe,Q+=l*we,ne+=l*Se,L+=l*ce,P+=l*Oe,$+=l*Ae,h+=l*Ne,D+=l*Le,K+=l*Re,l=x[9],F+=l*Ce,B+=l*Ee,U+=l*ve,q+=l*me,se+=l*ge,H+=l*de,re+=l*he,Q+=l*oe,ne+=l*we,L+=l*Se,P+=l*ce,$+=l*Oe,h+=l*Ae,D+=l*Ne,K+=l*Le,Z+=l*Re,l=x[10],B+=l*Ce,U+=l*Ee,q+=l*ve,se+=l*me,H+=l*ge,re+=l*de,Q+=l*he,ne+=l*oe,L+=l*we,P+=l*Se,$+=l*ce,h+=l*Oe,D+=l*Ae,K+=l*Ne,Z+=l*Le,ye+=l*Re,l=x[11],U+=l*Ce,q+=l*Ee,se+=l*ve,H+=l*me,re+=l*ge,Q+=l*de,ne+=l*he,L+=l*oe,P+=l*we,$+=l*Se,h+=l*ce,D+=l*Oe,K+=l*Ae,Z+=l*Ne,ye+=l*Le,Ie+=l*Re,l=x[12],q+=l*Ce,se+=l*Ee,H+=l*ve,re+=l*me,Q+=l*ge,ne+=l*de,L+=l*he,P+=l*oe,$+=l*we,h+=l*Se,D+=l*ce,K+=l*Oe,Z+=l*Ae,ye+=l*Ne,Ie+=l*Le,_e+=l*Re,l=x[13],se+=l*Ce,H+=l*Ee,re+=l*ve,Q+=l*me,ne+=l*ge,L+=l*de,P+=l*he,$+=l*oe,h+=l*we,D+=l*Se,K+=l*ce,Z+=l*Oe,ye+=l*Ae,Ie+=l*Ne,_e+=l*Le,Te+=l*Re,l=x[14],H+=l*Ce,re+=l*Ee,Q+=l*ve,ne+=l*me,L+=l*ge,P+=l*de,$+=l*he,h+=l*oe,D+=l*we,K+=l*Se,Z+=l*ce,ye+=l*Oe,Ie+=l*Ae,_e+=l*Ne,Te+=l*Le,Je+=l*Re,l=x[15],re+=l*Ce,Q+=l*Ee,ne+=l*ve,L+=l*me,P+=l*ge,$+=l*de,h+=l*he,D+=l*oe,K+=l*we,Z+=l*Se,ye+=l*ce,Ie+=l*Oe,_e+=l*Ae,Te+=l*Ne,Je+=l*Le,We+=l*Re,R+=38*Q,O+=38*ne,M+=38*L,k+=38*P,W+=38*$,A+=38*h,N+=38*D,V+=38*K,z+=38*Z,F+=38*ye,B+=38*Ie,U+=38*_e,q+=38*Te,se+=38*Je,H+=38*We,m=1,l=R+m+65535,m=Math.floor(l/65536),R=l-m*65536,l=O+m+65535,m=Math.floor(l/65536),O=l-m*65536,l=M+m+65535,m=Math.floor(l/65536),M=l-m*65536,l=k+m+65535,m=Math.floor(l/65536),k=l-m*65536,l=W+m+65535,m=Math.floor(l/65536),W=l-m*65536,l=A+m+65535,m=Math.floor(l/65536),A=l-m*65536,l=N+m+65535,m=Math.floor(l/65536),N=l-m*65536,l=V+m+65535,m=Math.floor(l/65536),V=l-m*65536,l=z+m+65535,m=Math.floor(l/65536),z=l-m*65536,l=F+m+65535,m=Math.floor(l/65536),F=l-m*65536,l=B+m+65535,m=Math.floor(l/65536),B=l-m*65536,l=U+m+65535,m=Math.floor(l/65536),U=l-m*65536,l=q+m+65535,m=Math.floor(l/65536),q=l-m*65536,l=se+m+65535,m=Math.floor(l/65536),se=l-m*65536,l=H+m+65535,m=Math.floor(l/65536),H=l-m*65536,l=re+m+65535,m=Math.floor(l/65536),re=l-m*65536,R+=m-1+37*(m-1),m=1,l=R+m+65535,m=Math.floor(l/65536),R=l-m*65536,l=O+m+65535,m=Math.floor(l/65536),O=l-m*65536,l=M+m+65535,m=Math.floor(l/65536),M=l-m*65536,l=k+m+65535,m=Math.floor(l/65536),k=l-m*65536,l=W+m+65535,m=Math.floor(l/65536),W=l-m*65536,l=A+m+65535,m=Math.floor(l/65536),A=l-m*65536,l=N+m+65535,m=Math.floor(l/65536),N=l-m*65536,l=V+m+65535,m=Math.floor(l/65536),V=l-m*65536,l=z+m+65535,m=Math.floor(l/65536),z=l-m*65536,l=F+m+65535,m=Math.floor(l/65536),F=l-m*65536,l=B+m+65535,m=Math.floor(l/65536),B=l-m*65536,l=U+m+65535,m=Math.floor(l/65536),U=l-m*65536,l=q+m+65535,m=Math.floor(l/65536),q=l-m*65536,l=se+m+65535,m=Math.floor(l/65536),se=l-m*65536,l=H+m+65535,m=Math.floor(l/65536),H=l-m*65536,l=re+m+65535,m=Math.floor(l/65536),re=l-m*65536,R+=m-1+37*(m-1),w[0]=R,w[1]=O,w[2]=M,w[3]=k,w[4]=W,w[5]=A,w[6]=N,w[7]=V,w[8]=z,w[9]=F,w[10]=B,w[11]=U,w[12]=q,w[13]=se,w[14]=H,w[15]=re}function y(w,x){g(w,x,x)}function _(w,x){const p=n();for(let l=0;l<16;l++)p[l]=x[l];for(let l=253;l>=0;l--)y(p,p),l!==2&&l!==4&&g(p,p,x);for(let l=0;l<16;l++)w[l]=p[l]}function b(w,x){const p=new Uint8Array(32),l=new Float64Array(80),m=n(),R=n(),O=n(),M=n(),k=n(),W=n();for(let z=0;z<31;z++)p[z]=w[z];p[31]=w[31]&127|64,p[0]&=248,u(l,x);for(let z=0;z<16;z++)R[z]=l[z];m[0]=M[0]=1;for(let z=254;z>=0;--z){const F=p[z>>>3]>>>(z&7)&1;a(m,R,F),a(O,M,F),d(k,m,O),f(m,m,O),d(O,R,M),f(R,R,M),y(M,k),y(W,m),g(m,O,m),g(O,R,k),d(k,m,O),f(m,m,O),y(R,m),f(O,M,W),g(m,O,s),d(m,m,M),g(O,O,m),g(m,M,W),g(M,R,l),y(R,k),a(m,R,F),a(O,M,F)}for(let z=0;z<16;z++)l[z+16]=m[z],l[z+32]=O[z],l[z+48]=R[z],l[z+64]=M[z];const A=l.subarray(32),N=l.subarray(16);_(A,A),g(N,N,A);const V=new Uint8Array(32);return c(V,N),V}t.scalarMult=b;function C(w){return b(w,i)}t.scalarMultBase=C;function I(w){if(w.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const x=new Uint8Array(w);return{publicKey:C(x),secretKey:x}}t.generateKeyPairFromSeed=I;function v(w){const x=(0,e.randomBytes)(32,w),p=I(x);return(0,r.wipe)(x),p}t.generateKeyPair=v;function E(w,x,p=!1){if(w.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(x.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const l=b(w,x);if(p){let m=0;for(let R=0;R<l.length;R++)m|=l[R];if(m===0)throw new Error("X25519: invalid shared key")}return l}t.sharedKey=E})(Ao);var ql=globalThis&&globalThis.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},Np=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),Lp=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Mp=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),Up=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Fp=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),jp=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,kp=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Hl=3,Bp=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",jp]],Wl=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function zp(t){return t?Vl(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Fp:typeof navigator<"u"?Vl(navigator.userAgent):Wp()}function qp(t){return t!==""&&Bp.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function Vl(t){var e=qp(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Up;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<Hl&&(i=ql(ql([],i,!0),Vp(Hl-i.length),!0)):i=[];var s=i.join("."),o=Hp(t),a=kp.exec(t);return a&&a[1]?new Mp(r,s,o,a[1]):new Np(r,s,o)}function Hp(t){for(var e=0,r=Wl.length;e<r;e++){var n=Wl[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function Wp(){var t=typeof process<"u"&&process.version;return t?new Lp(process.version.slice(1)):null}function Vp(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.getLocalStorage=Ue.getLocalStorageOrThrow=Ue.getCrypto=Ue.getCryptoOrThrow=Gl=Ue.getLocation=Ue.getLocationOrThrow=$o=Ue.getNavigator=Ue.getNavigatorOrThrow=Kl=Ue.getDocument=Ue.getDocumentOrThrow=Ue.getFromWindowOrThrow=Ue.getFromWindow=void 0;function Gr(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Ue.getFromWindow=Gr;function vn(t){const e=Gr(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Ue.getFromWindowOrThrow=vn;function Kp(){return vn("document")}Ue.getDocumentOrThrow=Kp;function Gp(){return Gr("document")}var Kl=Ue.getDocument=Gp;function Yp(){return vn("navigator")}Ue.getNavigatorOrThrow=Yp;function Jp(){return Gr("navigator")}var $o=Ue.getNavigator=Jp;function Zp(){return vn("location")}Ue.getLocationOrThrow=Zp;function Qp(){return Gr("location")}var Gl=Ue.getLocation=Qp;function Xp(){return vn("crypto")}Ue.getCryptoOrThrow=Xp;function eg(){return Gr("crypto")}Ue.getCrypto=eg;function tg(){return vn("localStorage")}Ue.getLocalStorageOrThrow=tg;function rg(){return Gr("localStorage")}Ue.getLocalStorage=rg;var To={};Object.defineProperty(To,"__esModule",{value:!0});var Yl=To.getWindowMetadata=void 0;const Jl=Ue;function ng(){let t,e;try{t=Jl.getDocumentOrThrow(),e=Jl.getLocationOrThrow()}catch{return null}function r(){const f=t.getElementsByTagName("link"),g=[];for(let y=0;y<f.length;y++){const _=f[y],b=_.getAttribute("rel");if(b&&b.toLowerCase().indexOf("icon")>-1){const C=_.getAttribute("href");if(C)if(C.toLowerCase().indexOf("https:")===-1&&C.toLowerCase().indexOf("http:")===-1&&C.indexOf("//")!==0){let I=e.protocol+"//"+e.host;if(C.indexOf("/")===0)I+=C;else{const v=e.pathname.split("/");v.pop();const E=v.join("/");I+=E+"/"+C}g.push(I)}else if(C.indexOf("//")===0){const I=e.protocol+C;g.push(I)}else g.push(C)}}return g}function n(...f){const g=t.getElementsByTagName("meta");for(let y=0;y<g.length;y++){const _=g[y],b=["itemprop","property","name"].map(C=>_.getAttribute(C)).filter(C=>C?f.includes(C):!1);if(b.length&&b){const C=_.getAttribute("content");if(C)return C}}return""}function i(){let f=n("name","og:site_name","og:title","twitter:title");return f||(f=t.title),f}function s(){return n("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=e.origin,u=r();return{description:a,url:c,icons:u,name:o}}Yl=To.getWindowMetadata=ng;var ei={},ig=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Zl="%[a-f0-9]{2}",Ql=new RegExp("("+Zl+")|([^%]+?)","gi"),Xl=new RegExp("("+Zl+")+","gi");function Ro(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],Ro(r),Ro(n))}function sg(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(Ql)||[],r=1;r<e.length;r++)t=Ro(e,r).join(""),e=t.match(Ql)||[];return t}}function og(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=Xl.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=sg(r[0]);n!==r[0]&&(e[r[0]]=n)}r=Xl.exec(t)}e["%C2"]="�";for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];t=t.replace(new RegExp(o,"g"),e[o])}return t}var ag=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return og(t)}},cg=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},lg=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var o=n[s],a=t[o];(i?e.indexOf(o)!==-1:e(o,a,t))&&(r[o]=a)}return r};(function(t){const e=ig,r=ag,n=cg,i=lg,s=v=>v==null,o=Symbol("encodeFragmentIdentifier");function a(v){switch(v.arrayFormat){case"index":return E=>(w,x)=>{const p=w.length;return x===void 0||v.skipNull&&x===null||v.skipEmptyString&&x===""?w:x===null?[...w,[d(E,v),"[",p,"]"].join("")]:[...w,[d(E,v),"[",d(p,v),"]=",d(x,v)].join("")]};case"bracket":return E=>(w,x)=>x===void 0||v.skipNull&&x===null||v.skipEmptyString&&x===""?w:x===null?[...w,[d(E,v),"[]"].join("")]:[...w,[d(E,v),"[]=",d(x,v)].join("")];case"colon-list-separator":return E=>(w,x)=>x===void 0||v.skipNull&&x===null||v.skipEmptyString&&x===""?w:x===null?[...w,[d(E,v),":list="].join("")]:[...w,[d(E,v),":list=",d(x,v)].join("")];case"comma":case"separator":case"bracket-separator":{const E=v.arrayFormat==="bracket-separator"?"[]=":"=";return w=>(x,p)=>p===void 0||v.skipNull&&p===null||v.skipEmptyString&&p===""?x:(p=p===null?"":p,x.length===0?[[d(w,v),E,d(p,v)].join("")]:[[x,d(p,v)].join(v.arrayFormatSeparator)])}default:return E=>(w,x)=>x===void 0||v.skipNull&&x===null||v.skipEmptyString&&x===""?w:x===null?[...w,d(E,v)]:[...w,[d(E,v),"=",d(x,v)].join("")]}}function c(v){let E;switch(v.arrayFormat){case"index":return(w,x,p)=>{if(E=/\[(\d*)\]$/.exec(w),w=w.replace(/\[\d*\]$/,""),!E){p[w]=x;return}p[w]===void 0&&(p[w]={}),p[w][E[1]]=x};case"bracket":return(w,x,p)=>{if(E=/(\[\])$/.exec(w),w=w.replace(/\[\]$/,""),!E){p[w]=x;return}if(p[w]===void 0){p[w]=[x];return}p[w]=[].concat(p[w],x)};case"colon-list-separator":return(w,x,p)=>{if(E=/(:list)$/.exec(w),w=w.replace(/:list$/,""),!E){p[w]=x;return}if(p[w]===void 0){p[w]=[x];return}p[w]=[].concat(p[w],x)};case"comma":case"separator":return(w,x,p)=>{const l=typeof x=="string"&&x.includes(v.arrayFormatSeparator),m=typeof x=="string"&&!l&&f(x,v).includes(v.arrayFormatSeparator);x=m?f(x,v):x;const R=l||m?x.split(v.arrayFormatSeparator).map(O=>f(O,v)):x===null?x:f(x,v);p[w]=R};case"bracket-separator":return(w,x,p)=>{const l=/(\[\])$/.test(w);if(w=w.replace(/\[\]$/,""),!l){p[w]=x&&f(x,v);return}const m=x===null?[]:x.split(v.arrayFormatSeparator).map(R=>f(R,v));if(p[w]===void 0){p[w]=m;return}p[w]=[].concat(p[w],m)};default:return(w,x,p)=>{if(p[w]===void 0){p[w]=x;return}p[w]=[].concat(p[w],x)}}}function u(v){if(typeof v!="string"||v.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(v,E){return E.encode?E.strict?e(v):encodeURIComponent(v):v}function f(v,E){return E.decode?r(v):v}function g(v){return Array.isArray(v)?v.sort():typeof v=="object"?g(Object.keys(v)).sort((E,w)=>Number(E)-Number(w)).map(E=>v[E]):v}function y(v){const E=v.indexOf("#");return E!==-1&&(v=v.slice(0,E)),v}function _(v){let E="";const w=v.indexOf("#");return w!==-1&&(E=v.slice(w)),E}function b(v){v=y(v);const E=v.indexOf("?");return E===-1?"":v.slice(E+1)}function C(v,E){return E.parseNumbers&&!Number.isNaN(Number(v))&&typeof v=="string"&&v.trim()!==""?v=Number(v):E.parseBooleans&&v!==null&&(v.toLowerCase()==="true"||v.toLowerCase()==="false")&&(v=v.toLowerCase()==="true"),v}function I(v,E){E=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},E),u(E.arrayFormatSeparator);const w=c(E),x=Object.create(null);if(typeof v!="string"||(v=v.trim().replace(/^[?#&]/,""),!v))return x;for(const p of v.split("&")){if(p==="")continue;let[l,m]=n(E.decode?p.replace(/\+/g," "):p,"=");m=m===void 0?null:["comma","separator","bracket-separator"].includes(E.arrayFormat)?m:f(m,E),w(f(l,E),m,x)}for(const p of Object.keys(x)){const l=x[p];if(typeof l=="object"&&l!==null)for(const m of Object.keys(l))l[m]=C(l[m],E);else x[p]=C(l,E)}return E.sort===!1?x:(E.sort===!0?Object.keys(x).sort():Object.keys(x).sort(E.sort)).reduce((p,l)=>{const m=x[l];return m&&typeof m=="object"&&!Array.isArray(m)?p[l]=g(m):p[l]=m,p},Object.create(null))}t.extract=b,t.parse=I,t.stringify=(v,E)=>{if(!v)return"";E=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},E),u(E.arrayFormatSeparator);const w=m=>E.skipNull&&s(v[m])||E.skipEmptyString&&v[m]==="",x=a(E),p={};for(const m of Object.keys(v))w(m)||(p[m]=v[m]);const l=Object.keys(p);return E.sort!==!1&&l.sort(E.sort),l.map(m=>{const R=v[m];return R===void 0?"":R===null?d(m,E):Array.isArray(R)?R.length===0&&E.arrayFormat==="bracket-separator"?d(m,E)+"[]":R.reduce(x(m),[]).join("&"):d(m,E)+"="+d(R,E)}).filter(m=>m.length>0).join("&")},t.parseUrl=(v,E)=>{E=Object.assign({decode:!0},E);const[w,x]=n(v,"#");return Object.assign({url:w.split("?")[0]||"",query:I(b(v),E)},E&&E.parseFragmentIdentifier&&x?{fragmentIdentifier:f(x,E)}:{})},t.stringifyUrl=(v,E)=>{E=Object.assign({encode:!0,strict:!0,[o]:!0},E);const w=y(v.url).split("?")[0]||"",x=t.extract(v.url),p=t.parse(x,{sort:!1}),l=Object.assign(p,v.query);let m=t.stringify(l,E);m&&(m=`?${m}`);let R=_(v.url);return v.fragmentIdentifier&&(R=`#${E[o]?d(v.fragmentIdentifier,E):v.fragmentIdentifier}`),`${w}${m}${R}`},t.pick=(v,E,w)=>{w=Object.assign({parseFragmentIdentifier:!0,[o]:!1},w);const{url:x,query:p,fragmentIdentifier:l}=t.parseUrl(v,w);return t.stringifyUrl({url:x,query:i(p,E),fragmentIdentifier:l},w)},t.exclude=(v,E,w)=>{const x=Array.isArray(E)?p=>!E.includes(p):(p,l)=>!E(p,l);return t.pick(v,x,w)}})(ei);const ug={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function eu(t,e){return t.includes(":")?[t]:e.chains||[]}const tu="base10",Ot="base16",Po="base64pad",No="utf8",ru=0,Yr=1,hg=0,nu=1,Lo=12,Mo=32;function dg(){const t=Ao.generateKeyPair();return{privateKey:It(t.secretKey,Ot),publicKey:It(t.publicKey,Ot)}}function Uo(){const t=yn.randomBytes(Mo);return It(t,Ot)}function fg(t,e){const r=Ao.sharedKey(Pt(t,Ot),Pt(e,Ot)),n=new Pp(rs.SHA256,r).expand(Mo);return It(n,Ot)}function pg(t){const e=rs.hash(Pt(t,Ot));return It(e,Ot)}function bn(t){const e=rs.hash(Pt(t,No));return It(e,Ot)}function gg(t){return Pt(`${t}`,tu)}function ti(t){return Number(It(t,tu))}function mg(t){const e=gg(typeof t.type<"u"?t.type:ru);if(ti(e)===Yr&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Pt(t.senderPublicKey,Ot):void 0,n=typeof t.iv<"u"?Pt(t.iv,Ot):yn.randomBytes(Lo),i=new Do.ChaCha20Poly1305(Pt(t.symKey,Ot)).seal(n,Pt(t.message,No));return yg({type:e,sealed:i,iv:n,senderPublicKey:r})}function wg(t){const e=new Do.ChaCha20Poly1305(Pt(t.symKey,Ot)),{sealed:r,iv:n}=ns(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return It(i,No)}function yg(t){if(ti(t.type)===Yr){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return It(xo([t.type,t.senderPublicKey,t.iv,t.sealed]),Po)}return It(xo([t.type,t.iv,t.sealed]),Po)}function ns(t){const e=Pt(t,Po),r=e.slice(hg,nu),n=nu;if(ti(r)===Yr){const a=n+Mo,c=a+Lo,u=e.slice(n,a),d=e.slice(a,c),f=e.slice(c);return{type:r,sealed:f,iv:d,senderPublicKey:u}}const i=n+Lo,s=e.slice(n,i),o=e.slice(i);return{type:r,sealed:o,iv:s}}function vg(t,e){const r=ns(t);return iu({type:ti(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?It(r.senderPublicKey,Ot):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function iu(t){const e=(t==null?void 0:t.type)||ru;if(e===Yr){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function su(t){return t.type===Yr&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var bg=Object.defineProperty,ou=Object.getOwnPropertySymbols,_g=Object.prototype.hasOwnProperty,Eg=Object.prototype.propertyIsEnumerable,au=(t,e,r)=>e in t?bg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,cu=(t,e)=>{for(var r in e||(e={}))_g.call(e,r)&&au(t,r,e[r]);if(ou)for(var r of ou(e))Eg.call(e,r)&&au(t,r,e[r]);return t};const Sg="ReactNative",Bt={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},xg="js";function Fo(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function is(){return!Kl()&&!!$o()&&navigator.product===Sg}function ri(){return!Fo()&&!!$o()}function ni(){return is()?Bt.reactNative:Fo()?Bt.node:ri()?Bt.browser:Bt.unknown}function Cg(t,e){let r=ei.parse(t);return r=cu(cu({},r),e),t=ei.stringify(r),t}function Dg(){return Yl()||{name:"",description:"",url:"",icons:[""]}}function Ig(){if(ni()===Bt.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=zp();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Og(){var t;const e=ni();return e===Bt.browser?[e,((t=Gl())==null?void 0:t.host)||"unknown"].join(":"):e}function Ag(t,e,r){const n=Ig(),i=Og();return[[t,e].join("-"),[xg,r].join("-"),n,i].join("/")}function $g({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o}){const a=r.split("?"),c=Ag(t,e,n),u={auth:i,ua:c,projectId:s,useOnCloseEvent:o||void 0},d=Cg(a[1]||"",u);return a[0]+"?"+d}function Jr(t,e){return t.filter(r=>e.includes(r)).length===t.length}function lu(t){return Object.fromEntries(t.entries())}function uu(t){return new Map(Object.entries(t))}function _n(t=ee.FIVE_MINUTES,e){const r=ee.toMiliseconds(t||ee.FIVE_MINUTES);let n,i,s;return{resolve:o=>{s&&n&&(clearTimeout(s),n(o))},reject:o=>{s&&i&&(clearTimeout(s),i(o))},done:()=>new Promise((o,a)=>{s=setTimeout(()=>{a(new Error(e))},r),n=o,i=a})}}function ii(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function hu(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Tg(t){return hu("topic",t)}function Rg(t){return hu("id",t)}function du(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Qt(t,e){return ee.fromMiliseconds((e||Date.now())+ee.toMiliseconds(t))}function Cr(t){return Date.now()>=ee.toMiliseconds(t)}function Ze(t,e){return`${t}${e?`:${e}`:""}`}async function Pg({id:t,topic:e,wcDeepLink:r}){try{if(!r)return;const n=typeof r=="string"?JSON.parse(r):r;let i=n==null?void 0:n.href;if(typeof i!="string")return;i.endsWith("/")&&(i=i.slice(0,-1));const s=`${i}/wc?requestId=${t}&sessionTopic=${e}`,o=ni();o===Bt.browser?s.startsWith("https://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):o===Bt.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(n){console.error(n)}}const Ng="irn";function jo(t){return(t==null?void 0:t.relay)||{protocol:Ng}}function ss(t){const e=ug[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var Lg=Object.defineProperty,fu=Object.getOwnPropertySymbols,Mg=Object.prototype.hasOwnProperty,Ug=Object.prototype.propertyIsEnumerable,pu=(t,e,r)=>e in t?Lg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fg=(t,e)=>{for(var r in e||(e={}))Mg.call(e,r)&&pu(t,r,e[r]);if(fu)for(var r of fu(e))Ug.call(e,r)&&pu(t,r,e[r]);return t};function jg(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function kg(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=ei.parse(s);return{protocol:n,topic:Bg(i[0]),version:parseInt(i[1],10),symKey:o.symKey,relay:jg(o)}}function Bg(t){return t.startsWith("//")?t.substring(2):t}function zg(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=r+e+i;t[i]&&(n[s]=t[i])}),n}function qg(t){return`${t.protocol}:${t.topic}@${t.version}?`+ei.stringify(Fg({symKey:t.symKey},zg(t.relay)))}function En(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function Hg(t){const e=[];return Object.values(t).forEach(r=>{e.push(...En(r.accounts))}),e}function Wg(t,e){const r=[];return Object.values(t).forEach(n=>{En(n.accounts).includes(e)&&r.push(...n.methods)}),r}function Vg(t,e){const r=[];return Object.values(t).forEach(n=>{En(n.accounts).includes(e)&&r.push(...n.events)}),r}function Kg(t,e){const r=as(t,e);if(r)throw new Error(r.message);const n={};for(const[i,s]of Object.entries(t))n[i]={methods:s.methods,events:s.events,chains:s.accounts.map(o=>`${o.split(":")[0]}:${o.split(":")[1]}`)};return n}const Gg={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Yg={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function J(t,e){const{message:r,code:n}=Yg[t];return{message:e?`${r} ${e}`:r,code:n}}function Qe(t,e){const{message:r,code:n}=Gg[t];return{message:e?`${r} ${e}`:r,code:n}}function si(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function oi(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function At(t){return typeof t>"u"}function at(t,e){return e&&At(t)?!0:typeof t=="string"&&!!t.trim().length}function ko(t,e){return e&&At(t)?!0:typeof t=="number"&&!isNaN(t)}function Jg(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return Jr(i,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:u}=t.namespaces[o],d=En(a),f=r[o];(!Jr(eu(o,f),d)||!Jr(f.methods,c)||!Jr(f.events,u))&&(s=!1)}),s):!1}function os(t){return at(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Zg(t){if(at(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&os(r)}}return!1}function Qg(t){if(at(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function Xg(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function em(t){return t==null?void 0:t.topic}function tm(t,e){let r=null;return at(t==null?void 0:t.publicKey,!1)||(r=J("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function gu(t){let e=!0;return si(t)?t.length&&(e=t.every(r=>at(r,!1))):e=!1,e}function rm(t,e,r){let n=null;return si(e)&&e.length?e.forEach(i=>{n||os(i)||(n=Qe("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):os(t)||(n=Qe("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function nm(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=rm(i,eu(i,s),`${e} ${r}`);o&&(n=o)}),n}function im(t,e){let r=null;return si(t)?t.forEach(n=>{r||Zg(n)||(r=Qe("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=Qe("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function sm(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=im(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function om(t,e){let r=null;return gu(t==null?void 0:t.methods)?gu(t==null?void 0:t.events)||(r=Qe("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Qe("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function mu(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=om(n,`${e}, namespace`);i&&(r=i)}),r}function am(t,e,r){let n=null;if(t&&oi(t)){const i=mu(t,e);i&&(n=i);const s=nm(t,e,r);s&&(n=s)}else n=J("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function as(t,e){let r=null;if(t&&oi(t)){const n=mu(t,e);n&&(r=n);const i=sm(t,e);i&&(r=i)}else r=J("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function wu(t){return at(t.protocol,!0)}function cm(t,e){let r=!1;return e&&!t?r=!0:t&&si(t)&&t.length&&t.forEach(n=>{r=wu(n)}),r}function lm(t){return typeof t=="number"}function Nt(t){return typeof t<"u"&&typeof t!==null}function um(t){return!(!t||typeof t!="object"||!t.code||!ko(t.code,!1)||!t.message||!at(t.message,!1))}function hm(t){return!(At(t)||!at(t.method,!1))}function dm(t){return!(At(t)||At(t.result)&&At(t.error)||!ko(t.id,!1)||!at(t.jsonrpc,!1))}function fm(t){return!(At(t)||!at(t.name,!1))}function yu(t,e){return!(!os(e)||!Hg(t).includes(e))}function pm(t,e,r){return at(r,!1)?Wg(t,e).includes(r):!1}function gm(t,e,r){return at(r,!1)?Vg(t,e).includes(r):!1}function vu(t,e,r){let n=null;const i=mm(t),s=wm(e),o=Object.keys(i),a=Object.keys(s),c=bu(Object.keys(t)),u=bu(Object.keys(e)),d=c.filter(f=>!u.includes(f));return d.length&&(n=J("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${d.toString()}
      Received: ${Object.keys(e).toString()}`)),Jr(o,a)||(n=J("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(f=>{if(!f.includes(":")||n)return;const g=En(e[f].accounts);g.includes(f)||(n=J("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${f}
        Required: ${f}
        Approved: ${g.toString()}`))}),o.forEach(f=>{n||(Jr(i[f].methods,s[f].methods)?Jr(i[f].events,s[f].events)||(n=J("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${f}`)):n=J("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${f}`))}),n}function mm(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function bu(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function wm(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=En(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function ym(t,e){return ko(t,!1)&&t<=e.max&&t>=e.min}function _u(){const t=ni();return new Promise(e=>{switch(t){case Bt.browser:e(vm());break;case Bt.reactNative:e(bm());break;case Bt.node:e(_m());break;default:e(!0)}})}function vm(){return ri()&&(navigator==null?void 0:navigator.onLine)}async function bm(){if(is()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function _m(){return!0}function Em(t){switch(ni()){case Bt.browser:Sm(t);break;case Bt.reactNative:xm(t);break}}function Sm(t){ri()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function xm(t){is()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const Bo={};let cs=class{static get(e){return Bo[e]}static set(e,r){Bo[e]=r}static delete(e){delete Bo[e]}};const Cm="PARSE_ERROR",Dm="INVALID_REQUEST",Im="METHOD_NOT_FOUND",Om="INVALID_PARAMS",Eu="INTERNAL_ERROR",zo="SERVER_ERROR",Am=[-32700,-32600,-32601,-32602,-32603],ai={[Cm]:{code:-32700,message:"Parse error"},[Dm]:{code:-32600,message:"Invalid Request"},[Im]:{code:-32601,message:"Method not found"},[Om]:{code:-32602,message:"Invalid params"},[Eu]:{code:-32603,message:"Internal error"},[zo]:{code:-32e3,message:"Server error"}},Su=zo;function $m(t){return Am.includes(t)}function xu(t){return Object.keys(ai).includes(t)?ai[t]:ai[Su]}function Tm(t){const e=Object.values(ai).find(r=>r.code===t);return e||ai[Su]}function Rm(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var Cu={},ur={},Du;function Pm(){if(Du)return ur;Du=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.isBrowserCryptoAvailable=ur.getSubtleCrypto=ur.getBrowerCrypto=void 0;function t(){return(Ft==null?void 0:Ft.crypto)||(Ft==null?void 0:Ft.msCrypto)||{}}ur.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}ur.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return ur.isBrowserCryptoAvailable=r,ur}var hr={},Iu;function Nm(){if(Iu)return hr;Iu=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.isBrowser=hr.isNode=hr.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}hr.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}hr.isNode=e;function r(){return!t()&&!e()}return hr.isBrowser=r,hr}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Vt;e.__exportStar(Pm(),t),e.__exportStar(Nm(),t)})(Cu);function qo(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Ou(t=6){return BigInt(qo(t))}function ci(t,e,r){return{id:r||qo(),jsonrpc:"2.0",method:t,params:e}}function Ho(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Wo(t,e,r){return{id:t,jsonrpc:"2.0",error:Lm(e,r)}}function Lm(t,e){return typeof t>"u"?xu(Eu):(typeof t=="string"&&(t=Object.assign(Object.assign({},xu(zo)),{message:t})),typeof e<"u"&&(t.data=e),$m(t.code)&&(t=Tm(t.code)),t)}class Mm{}class Um extends Mm{constructor(){super()}}class Fm extends Um{constructor(e){super()}}const jm="^wss?:";function km(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Bm(t,e){const r=km(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function Au(t){return Bm(t,jm)}function zm(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function $u(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Vo(t){return $u(t)&&"method"in t}function ls(t){return $u(t)&&(dr(t)||Xt(t))}function dr(t){return"result"in t}function Xt(t){return"error"in t}class qm extends Fm{constructor(e){super(e),this.events=new Wt.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(ci(e.method,e.params||[],e.id||Ou().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Xt(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),ls(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Hm=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Wm=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Tu=t=>t.split("?")[0],Ru=10,Vm=Hm();class Km{constructor(e){if(this.url=e,this.events=new Wt.EventEmitter,this.registering=!1,!Au(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(wo(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!Au(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=Cu.isReactNative()?void 0:{rejectUnauthorized:!zm(e)},s=new Vm(e,[],i);Wm()?s.onerror=o=>{const a=o;n(this.emitError(a.error))}:s.on("error",o=>{n(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?gl(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=Wo(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return Rm(e,Tu(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Ru&&this.events.setMaxListeners(Ru)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Tu(this.url)}`));return this.events.emit("register_error",r),r}}var us={exports:{}};us.exports,function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",d="[object Boolean]",f="[object Date]",g="[object Error]",y="[object Function]",_="[object GeneratorFunction]",b="[object Map]",C="[object Number]",I="[object Null]",v="[object Object]",E="[object Promise]",w="[object Proxy]",x="[object RegExp]",p="[object Set]",l="[object String]",m="[object Symbol]",R="[object Undefined]",O="[object WeakMap]",M="[object ArrayBuffer]",k="[object DataView]",W="[object Float32Array]",A="[object Float64Array]",N="[object Int8Array]",V="[object Int16Array]",z="[object Int32Array]",F="[object Uint8Array]",B="[object Uint8ClampedArray]",U="[object Uint16Array]",q="[object Uint32Array]",se=/[\\^$.*+?()[\]{}|]/g,H=/^\[object .+?Constructor\]$/,re=/^(?:0|[1-9]\d*)$/,Q={};Q[W]=Q[A]=Q[N]=Q[V]=Q[z]=Q[F]=Q[B]=Q[U]=Q[q]=!0,Q[a]=Q[c]=Q[M]=Q[d]=Q[k]=Q[f]=Q[g]=Q[y]=Q[b]=Q[C]=Q[v]=Q[x]=Q[p]=Q[l]=Q[O]=!1;var ne=typeof Ft=="object"&&Ft&&Ft.Object===Object&&Ft,L=typeof self=="object"&&self&&self.Object===Object&&self,P=ne||L||Function("return this")(),$=e&&!e.nodeType&&e,h=$&&!0&&t&&!t.nodeType&&t,D=h&&h.exports===$,K=D&&ne.process,Z=function(){try{return K&&K.binding&&K.binding("util")}catch{}}(),ye=Z&&Z.isTypedArray;function Ie(S,T){for(var j=-1,X=S==null?0:S.length,je=0,ue=[];++j<X;){var Ge=S[j];T(Ge,j,S)&&(ue[je++]=Ge)}return ue}function _e(S,T){for(var j=-1,X=T.length,je=S.length;++j<X;)S[je+j]=T[j];return S}function Te(S,T){for(var j=-1,X=S==null?0:S.length;++j<X;)if(T(S[j],j,S))return!0;return!1}function Je(S,T){for(var j=-1,X=Array(S);++j<S;)X[j]=T(j);return X}function We(S){return function(T){return S(T)}}function Ce(S,T){return S.has(T)}function Ee(S,T){return S==null?void 0:S[T]}function ve(S){var T=-1,j=Array(S.size);return S.forEach(function(X,je){j[++T]=[je,X]}),j}function me(S,T){return function(j){return S(T(j))}}function ge(S){var T=-1,j=Array(S.size);return S.forEach(function(X){j[++T]=X}),j}var de=Array.prototype,he=Function.prototype,oe=Object.prototype,we=P["__core-js_shared__"],Se=he.toString,ce=oe.hasOwnProperty,Oe=function(){var S=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||"");return S?"Symbol(src)_1."+S:""}(),Ae=oe.toString,Ne=RegExp("^"+Se.call(ce).replace(se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Le=D?P.Buffer:void 0,Re=P.Symbol,er=P.Uint8Array,lr=oe.propertyIsEnumerable,Mr=de.splice,qt=Re?Re.toStringTag:void 0,ln=Object.getOwnPropertySymbols,Fi=Le?Le.isBuffer:void 0,qs=me(Object.keys,Object),Xe=Bn(P,"DataView"),Ve=Bn(P,"Map"),et=Bn(P,"Promise"),tt=Bn(P,"Set"),rt=Bn(P,"WeakMap"),Ke=Bn(Object,"create"),lt=hn(Xe),ut=hn(Ve),ht=hn(et),dt=hn(tt),ft=hn(rt),st=Re?Re.prototype:void 0,nt=st?st.valueOf:void 0;function Be(S){var T=-1,j=S==null?0:S.length;for(this.clear();++T<j;){var X=S[T];this.set(X[0],X[1])}}function pt(){this.__data__=Ke?Ke(null):{},this.size=0}function gt(S){var T=this.has(S)&&delete this.__data__[S];return this.size-=T?1:0,T}function i_(S){var T=this.__data__;if(Ke){var j=T[S];return j===n?void 0:j}return ce.call(T,S)?T[S]:void 0}function s_(S){var T=this.__data__;return Ke?T[S]!==void 0:ce.call(T,S)}function o_(S,T){var j=this.__data__;return this.size+=this.has(S)?0:1,j[S]=Ke&&T===void 0?n:T,this}Be.prototype.clear=pt,Be.prototype.delete=gt,Be.prototype.get=i_,Be.prototype.has=s_,Be.prototype.set=o_;function yr(S){var T=-1,j=S==null?0:S.length;for(this.clear();++T<j;){var X=S[T];this.set(X[0],X[1])}}function a_(){this.__data__=[],this.size=0}function c_(S){var T=this.__data__,j=Ws(T,S);if(j<0)return!1;var X=T.length-1;return j==X?T.pop():Mr.call(T,j,1),--this.size,!0}function l_(S){var T=this.__data__,j=Ws(T,S);return j<0?void 0:T[j][1]}function u_(S){return Ws(this.__data__,S)>-1}function h_(S,T){var j=this.__data__,X=Ws(j,S);return X<0?(++this.size,j.push([S,T])):j[X][1]=T,this}yr.prototype.clear=a_,yr.prototype.delete=c_,yr.prototype.get=l_,yr.prototype.has=u_,yr.prototype.set=h_;function un(S){var T=-1,j=S==null?0:S.length;for(this.clear();++T<j;){var X=S[T];this.set(X[0],X[1])}}function d_(){this.size=0,this.__data__={hash:new Be,map:new(Ve||yr),string:new Be}}function f_(S){var T=Vs(this,S).delete(S);return this.size-=T?1:0,T}function p_(S){return Vs(this,S).get(S)}function g_(S){return Vs(this,S).has(S)}function m_(S,T){var j=Vs(this,S),X=j.size;return j.set(S,T),this.size+=j.size==X?0:1,this}un.prototype.clear=d_,un.prototype.delete=f_,un.prototype.get=p_,un.prototype.has=g_,un.prototype.set=m_;function Hs(S){var T=-1,j=S==null?0:S.length;for(this.__data__=new un;++T<j;)this.add(S[T])}function w_(S){return this.__data__.set(S,n),this}function y_(S){return this.__data__.has(S)}Hs.prototype.add=Hs.prototype.push=w_,Hs.prototype.has=y_;function Ur(S){var T=this.__data__=new yr(S);this.size=T.size}function v_(){this.__data__=new yr,this.size=0}function b_(S){var T=this.__data__,j=T.delete(S);return this.size=T.size,j}function __(S){return this.__data__.get(S)}function E_(S){return this.__data__.has(S)}function S_(S,T){var j=this.__data__;if(j instanceof yr){var X=j.__data__;if(!Ve||X.length<r-1)return X.push([S,T]),this.size=++j.size,this;j=this.__data__=new un(X)}return j.set(S,T),this.size=j.size,this}Ur.prototype.clear=v_,Ur.prototype.delete=b_,Ur.prototype.get=__,Ur.prototype.has=E_,Ur.prototype.set=S_;function x_(S,T){var j=Ks(S),X=!j&&j_(S),je=!j&&!X&&vc(S),ue=!j&&!X&&!je&&tf(S),Ge=j||X||je||ue,mt=Ge?Je(S.length,String):[],vt=mt.length;for(var qe in S)(T||ce.call(S,qe))&&!(Ge&&(qe=="length"||je&&(qe=="offset"||qe=="parent")||ue&&(qe=="buffer"||qe=="byteLength"||qe=="byteOffset")||N_(qe,vt)))&&mt.push(qe);return mt}function Ws(S,T){for(var j=S.length;j--;)if(Zd(S[j][0],T))return j;return-1}function C_(S,T,j){var X=T(S);return Ks(S)?X:_e(X,j(S))}function ji(S){return S==null?S===void 0?R:I:qt&&qt in Object(S)?R_(S):F_(S)}function Kd(S){return ki(S)&&ji(S)==a}function Gd(S,T,j,X,je){return S===T?!0:S==null||T==null||!ki(S)&&!ki(T)?S!==S&&T!==T:D_(S,T,j,X,Gd,je)}function D_(S,T,j,X,je,ue){var Ge=Ks(S),mt=Ks(T),vt=Ge?c:Fr(S),qe=mt?c:Fr(T);vt=vt==a?v:vt,qe=qe==a?v:qe;var Ht=vt==v,tr=qe==v,Ct=vt==qe;if(Ct&&vc(S)){if(!vc(T))return!1;Ge=!0,Ht=!1}if(Ct&&!Ht)return ue||(ue=new Ur),Ge||tf(S)?Yd(S,T,j,X,je,ue):$_(S,T,vt,j,X,je,ue);if(!(j&i)){var Jt=Ht&&ce.call(S,"__wrapped__"),Zt=tr&&ce.call(T,"__wrapped__");if(Jt||Zt){var jr=Jt?S.value():S,vr=Zt?T.value():T;return ue||(ue=new Ur),je(jr,vr,j,X,ue)}}return Ct?(ue||(ue=new Ur),T_(S,T,j,X,je,ue)):!1}function I_(S){if(!ef(S)||M_(S))return!1;var T=Qd(S)?Ne:H;return T.test(hn(S))}function O_(S){return ki(S)&&Xd(S.length)&&!!Q[ji(S)]}function A_(S){if(!U_(S))return qs(S);var T=[];for(var j in Object(S))ce.call(S,j)&&j!="constructor"&&T.push(j);return T}function Yd(S,T,j,X,je,ue){var Ge=j&i,mt=S.length,vt=T.length;if(mt!=vt&&!(Ge&&vt>mt))return!1;var qe=ue.get(S);if(qe&&ue.get(T))return qe==T;var Ht=-1,tr=!0,Ct=j&s?new Hs:void 0;for(ue.set(S,T),ue.set(T,S);++Ht<mt;){var Jt=S[Ht],Zt=T[Ht];if(X)var jr=Ge?X(Zt,Jt,Ht,T,S,ue):X(Jt,Zt,Ht,S,T,ue);if(jr!==void 0){if(jr)continue;tr=!1;break}if(Ct){if(!Te(T,function(vr,dn){if(!Ce(Ct,dn)&&(Jt===vr||je(Jt,vr,j,X,ue)))return Ct.push(dn)})){tr=!1;break}}else if(!(Jt===Zt||je(Jt,Zt,j,X,ue))){tr=!1;break}}return ue.delete(S),ue.delete(T),tr}function $_(S,T,j,X,je,ue,Ge){switch(j){case k:if(S.byteLength!=T.byteLength||S.byteOffset!=T.byteOffset)return!1;S=S.buffer,T=T.buffer;case M:return!(S.byteLength!=T.byteLength||!ue(new er(S),new er(T)));case d:case f:case C:return Zd(+S,+T);case g:return S.name==T.name&&S.message==T.message;case x:case l:return S==T+"";case b:var mt=ve;case p:var vt=X&i;if(mt||(mt=ge),S.size!=T.size&&!vt)return!1;var qe=Ge.get(S);if(qe)return qe==T;X|=s,Ge.set(S,T);var Ht=Yd(mt(S),mt(T),X,je,ue,Ge);return Ge.delete(S),Ht;case m:if(nt)return nt.call(S)==nt.call(T)}return!1}function T_(S,T,j,X,je,ue){var Ge=j&i,mt=Jd(S),vt=mt.length,qe=Jd(T),Ht=qe.length;if(vt!=Ht&&!Ge)return!1;for(var tr=vt;tr--;){var Ct=mt[tr];if(!(Ge?Ct in T:ce.call(T,Ct)))return!1}var Jt=ue.get(S);if(Jt&&ue.get(T))return Jt==T;var Zt=!0;ue.set(S,T),ue.set(T,S);for(var jr=Ge;++tr<vt;){Ct=mt[tr];var vr=S[Ct],dn=T[Ct];if(X)var rf=Ge?X(dn,vr,Ct,T,S,ue):X(vr,dn,Ct,S,T,ue);if(!(rf===void 0?vr===dn||je(vr,dn,j,X,ue):rf)){Zt=!1;break}jr||(jr=Ct=="constructor")}if(Zt&&!jr){var Gs=S.constructor,Ys=T.constructor;Gs!=Ys&&"constructor"in S&&"constructor"in T&&!(typeof Gs=="function"&&Gs instanceof Gs&&typeof Ys=="function"&&Ys instanceof Ys)&&(Zt=!1)}return ue.delete(S),ue.delete(T),Zt}function Jd(S){return C_(S,z_,P_)}function Vs(S,T){var j=S.__data__;return L_(T)?j[typeof T=="string"?"string":"hash"]:j.map}function Bn(S,T){var j=Ee(S,T);return I_(j)?j:void 0}function R_(S){var T=ce.call(S,qt),j=S[qt];try{S[qt]=void 0;var X=!0}catch{}var je=Ae.call(S);return X&&(T?S[qt]=j:delete S[qt]),je}var P_=ln?function(S){return S==null?[]:(S=Object(S),Ie(ln(S),function(T){return lr.call(S,T)}))}:q_,Fr=ji;(Xe&&Fr(new Xe(new ArrayBuffer(1)))!=k||Ve&&Fr(new Ve)!=b||et&&Fr(et.resolve())!=E||tt&&Fr(new tt)!=p||rt&&Fr(new rt)!=O)&&(Fr=function(S){var T=ji(S),j=T==v?S.constructor:void 0,X=j?hn(j):"";if(X)switch(X){case lt:return k;case ut:return b;case ht:return E;case dt:return p;case ft:return O}return T});function N_(S,T){return T=T??o,!!T&&(typeof S=="number"||re.test(S))&&S>-1&&S%1==0&&S<T}function L_(S){var T=typeof S;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?S!=="__proto__":S===null}function M_(S){return!!Oe&&Oe in S}function U_(S){var T=S&&S.constructor,j=typeof T=="function"&&T.prototype||oe;return S===j}function F_(S){return Ae.call(S)}function hn(S){if(S!=null){try{return Se.call(S)}catch{}try{return S+""}catch{}}return""}function Zd(S,T){return S===T||S!==S&&T!==T}var j_=Kd(function(){return arguments}())?Kd:function(S){return ki(S)&&ce.call(S,"callee")&&!lr.call(S,"callee")},Ks=Array.isArray;function k_(S){return S!=null&&Xd(S.length)&&!Qd(S)}var vc=Fi||H_;function B_(S,T){return Gd(S,T)}function Qd(S){if(!ef(S))return!1;var T=ji(S);return T==y||T==_||T==u||T==w}function Xd(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=o}function ef(S){var T=typeof S;return S!=null&&(T=="object"||T=="function")}function ki(S){return S!=null&&typeof S=="object"}var tf=ye?We(ye):O_;function z_(S){return k_(S)?x_(S):A_(S)}function q_(){return[]}function H_(){return!1}t.exports=B_}(us,us.exports);var Gm=us.exports;const Ym=Hi(Gm);function Jm(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function f(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var b=0,C=0,I=0,v=_.length;I!==v&&_[I]===0;)I++,b++;for(var E=(v-I)*d+1>>>0,w=new Uint8Array(E);I!==v;){for(var x=_[I],p=0,l=E-1;(x!==0||p<C)&&l!==-1;l--,p++)x+=256*w[l]>>>0,w[l]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");C=p,I++}for(var m=E-C;m!==E&&w[m]===0;)m++;for(var R=c.repeat(b);m<E;++m)R+=t.charAt(w[m]);return R}function g(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var b=0;if(_[b]!==" "){for(var C=0,I=0;_[b]===c;)C++,b++;for(var v=(_.length-b)*u+1>>>0,E=new Uint8Array(v);_[b];){var w=r[_.charCodeAt(b)];if(w===255)return;for(var x=0,p=v-1;(w!==0||x<I)&&p!==-1;p--,x++)w+=a*E[p]>>>0,E[p]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");I=x,b++}if(_[b]!==" "){for(var l=v-I;l!==v&&E[l]===0;)l++;for(var m=new Uint8Array(C+(v-l)),R=C;l!==v;)m[R++]=E[l++];return m}}}function y(_){var b=g(_);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:g,decode:y}}var Zm=Jm,Qm=Zm;const Pu=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Xm=t=>new TextEncoder().encode(t),ew=t=>new TextDecoder().decode(t);class tw{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class rw{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Nu(this,e)}}class nw{constructor(e){this.decoders=e}or(e){return Nu(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Nu=(t,e)=>new nw({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class iw{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new tw(e,r,n),this.decoder=new rw(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const hs=({name:t,prefix:e,encode:r,decode:n})=>new iw(t,e,r,n),li=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Qm(r,e);return hs({prefix:t,name:e,encode:n,decode:s=>Pu(i(s))})},sw=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let d=0;d<s;++d){const f=i[t[d]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},ow=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},yt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>hs({prefix:e,name:t,encode(i){return ow(i,n,r)},decode(i){return sw(i,n,r,t)}}),aw=hs({prefix:"\0",name:"identity",encode:t=>ew(t),decode:t=>Xm(t)});var cw=Object.freeze({__proto__:null,identity:aw});const lw=yt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var uw=Object.freeze({__proto__:null,base2:lw});const hw=yt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var dw=Object.freeze({__proto__:null,base8:hw});const fw=li({prefix:"9",name:"base10",alphabet:"0123456789"});var pw=Object.freeze({__proto__:null,base10:fw});const gw=yt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),mw=yt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ww=Object.freeze({__proto__:null,base16:gw,base16upper:mw});const yw=yt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),vw=yt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),bw=yt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),_w=yt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ew=yt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Sw=yt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),xw=yt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Cw=yt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Dw=yt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Iw=Object.freeze({__proto__:null,base32:yw,base32upper:vw,base32pad:bw,base32padupper:_w,base32hex:Ew,base32hexupper:Sw,base32hexpad:xw,base32hexpadupper:Cw,base32z:Dw});const Ow=li({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Aw=li({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var $w=Object.freeze({__proto__:null,base36:Ow,base36upper:Aw});const Tw=li({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Rw=li({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Pw=Object.freeze({__proto__:null,base58btc:Tw,base58flickr:Rw});const Nw=yt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Lw=yt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Mw=yt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Uw=yt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Fw=Object.freeze({__proto__:null,base64:Nw,base64pad:Lw,base64url:Mw,base64urlpad:Uw});const Lu=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),jw=Lu.reduce((t,e,r)=>(t[r]=e,t),[]),kw=Lu.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Bw(t){return t.reduce((e,r)=>(e+=jw[r],e),"")}function zw(t){const e=[];for(const r of t){const n=kw[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const qw=hs({prefix:"🚀",name:"base256emoji",encode:Bw,decode:zw});var Hw=Object.freeze({__proto__:null,base256emoji:qw}),Ww=Uu,Mu=128,Vw=127,Kw=~Vw,Gw=Math.pow(2,31);function Uu(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Gw;)e[r++]=t&255|Mu,t/=128;for(;t&Kw;)e[r++]=t&255|Mu,t>>>=7;return e[r]=t|0,Uu.bytes=r-n+1,e}var Yw=Ko,Jw=128,Fu=127;function Ko(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Ko.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&Fu)<<i:(o&Fu)*Math.pow(2,i),i+=7}while(o>=Jw);return Ko.bytes=s-n,r}var Zw=Math.pow(2,7),Qw=Math.pow(2,14),Xw=Math.pow(2,21),ey=Math.pow(2,28),ty=Math.pow(2,35),ry=Math.pow(2,42),ny=Math.pow(2,49),iy=Math.pow(2,56),sy=Math.pow(2,63),oy=function(t){return t<Zw?1:t<Qw?2:t<Xw?3:t<ey?4:t<ty?5:t<ry?6:t<ny?7:t<iy?8:t<sy?9:10},ay={encode:Ww,decode:Yw,encodingLength:oy},ju=ay;const ku=(t,e,r=0)=>(ju.encode(t,e,r),e),Bu=t=>ju.encodingLength(t),Go=(t,e)=>{const r=e.byteLength,n=Bu(t),i=n+Bu(r),s=new Uint8Array(i+r);return ku(t,s,0),ku(r,s,n),s.set(e,i),new cy(t,r,e,s)};class cy{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const zu=({name:t,code:e,encode:r})=>new ly(t,e,r);class ly{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Go(this.code,r):r.then(n=>Go(this.code,n))}else throw Error("Unknown type, must be binary type")}}const qu=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),uy=zu({name:"sha2-256",code:18,encode:qu("SHA-256")}),hy=zu({name:"sha2-512",code:19,encode:qu("SHA-512")});var dy=Object.freeze({__proto__:null,sha256:uy,sha512:hy});const Hu=0,fy="identity",Wu=Pu;var py=Object.freeze({__proto__:null,identity:{code:Hu,name:fy,encode:Wu,digest:t=>Go(Hu,Wu(t))}});new TextEncoder,new TextDecoder;const Vu={...cw,...uw,...dw,...pw,...ww,...Iw,...$w,...Pw,...Fw,...Hw};({...dy,...py});function Ku(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function gy(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ku(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Gu(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Yu=Gu("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Yo=Gu("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=gy(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),my={utf8:Yu,"utf-8":Yu,hex:Vu.base16,latin1:Yo,ascii:Yo,binary:Yo,...Vu};function wy(t,e="utf8"){const r=my[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ku(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const Ju="wc",yy=2,Jo="core",Dr=`${Ju}@2:${Jo}:`,vy={name:Jo,logger:"error"},by={database:":memory:"},_y="crypto",Zu="client_ed25519_seed",Ey=ee.ONE_DAY,Sy="keychain",xy="0.3",Cy="messages",Dy="0.3",Iy=ee.SIX_HOURS,Oy="publisher",Qu="irn",Ay="error",Xu="wss://relay.walletconnect.com",eh="wss://relay.walletconnect.org",$y="relayer",Et={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Ty="_subscription",fr={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Ry=ee.ONE_SECOND,Py="2.10.0",Ny=1e4,Ly="0.3",My="WALLETCONNECT_CLIENT_ID",sr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Uy="subscription",Fy="0.3",jy=ee.FIVE_SECONDS*1e3,ky="pairing",By="0.3",ui={wc_pairingDelete:{req:{ttl:ee.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ee.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ee.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ee.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ee.ONE_DAY,prompt:!1,tag:0},res:{ttl:ee.ONE_DAY,prompt:!1,tag:0}}},or={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},zy="history",qy="0.3",Hy="expirer",Kt={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Wy="0.3",Zo="verify-api",ds="https://verify.walletconnect.com",th="https://verify.walletconnect.org";let Vy=class{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=Sy,this.version=xy,this.initialized=!1,this.storagePrefix=Dr,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=J("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=De.generateChildLogger(r,this.name)}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,lu(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?uu(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}},Ky=class{constructor(e,r,n){this.core=e,this.logger=r,this.name=_y,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=Ll(i);return Nl(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=dg();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),o=Ll(s),a=Uo();return await bp(a,i,Ey,o)},this.generateSharedKey=(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=fg(a,s);return this.setSymKey(c,o)},this.setSymKey=async(i,s)=>{this.isInitialized();const o=s||pg(i);return await this.keychain.set(o,i),o},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,o)=>{this.isInitialized();const a=iu(o),c=wo(s);if(su(a)){const g=a.senderPublicKey,y=a.receiverPublicKey;i=await this.generateSharedKey(g,y)}const u=this.getSymKey(i),{type:d,senderPublicKey:f}=a;return mg({type:d,symKey:u,message:c,senderPublicKey:f})},this.decode=async(i,s,o)=>{this.isInitialized();const a=vg(s,o);if(su(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;i=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(i),u=wg({symKey:c,encoded:s});return gl(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}},this.getPayloadType=i=>{const s=ns(i);return ti(s.type)},this.getPayloadSenderPublicKey=i=>{const s=ns(i);return s.senderPublicKey?It(s.senderPublicKey,Ot):void 0},this.core=e,this.logger=De.generateChildLogger(r,this.name),this.keychain=n||new Vy(this.core,this.logger)}get context(){return De.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Zu)}catch{e=Uo(),await this.keychain.set(Zu,e)}return wy(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}},Gy=class extends C0{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=Cy,this.version=Dy,this.initialized=!1,this.storagePrefix=Dr,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=bn(i);let o=this.messages.get(n);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(n,o),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),o=bn(i);return typeof s[o]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=De.generateChildLogger(e,this.name),this.core=r}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,lu(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?uu(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}};class Yy extends D0{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new Wt.EventEmitter,this.name=Oy,this.queue=new Map,this.publishTimeout=ee.toMiliseconds(ee.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{const a=(s==null?void 0:s.ttl)||Iy,c=jo(s),u=(s==null?void 0:s.prompt)||!1,d=(s==null?void 0:s.tag)||0,f=(s==null?void 0:s.id)||Ou().toString(),g={topic:n,message:i,opts:{ttl:a,relay:c,prompt:u,tag:d,id:f}},y=setTimeout(()=>this.queue.set(f,g),this.publishTimeout);try{await await ii(this.rpcPublish(n,i,a,c,u,d,f),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(f),this.relayer.events.emit(Et.publish,g)}catch(_){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw this.removeRequestFromQueue(f),_;return}finally{clearTimeout(y)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(a){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(a),a}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=De.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return De.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,s,o,a){var c,u,d,f;const g={method:ss(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:o},id:a};return At((c=g.params)==null?void 0:c.prompt)&&((u=g.params)==null||delete u.prompt),At((d=g.params)==null?void 0:d.tag)&&((f=g.params)==null||delete f.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:g}),this.relayer.request(g)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(mn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Et.connection_stalled);return}this.checkQueue()}),this.relayer.on(Et.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class Jy{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Zy=Object.defineProperty,Qy=Object.defineProperties,Xy=Object.getOwnPropertyDescriptors,rh=Object.getOwnPropertySymbols,ev=Object.prototype.hasOwnProperty,tv=Object.prototype.propertyIsEnumerable,nh=(t,e,r)=>e in t?Zy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hi=(t,e)=>{for(var r in e||(e={}))ev.call(e,r)&&nh(t,r,e[r]);if(rh)for(var r of rh(e))tv.call(e,r)&&nh(t,r,e[r]);return t},Qo=(t,e)=>Qy(t,Xy(e));let rv=class extends A0{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new Jy,this.events=new Wt.EventEmitter,this.name=Uy,this.version=Fy,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Dr,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=jo(i),o={topic:n,relay:s};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s);return this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,s)=>{const o=new ee.Watch;o.start(this.pendingSubscriptionWatchLabel);const a=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),i(!0)),o.elapsed(this.pendingSubscriptionWatchLabel)>=jy&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),s(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=De.generateChildLogger(r,this.name),this.clientId=""}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=jo(n);await this.rpcUnsubscribe(e,r,i);const s=Qe("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){const n={method:ss(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await ii(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Et.connection_stalled)}return bn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:ss(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await ii(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Et.connection_stalled)}}rpcUnsubscribe(e,r,n){const i={method:ss(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,Qo(hi({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,hi({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,hi({},r)),this.topicMap.set(r.topic,e),this.events.emit(sr.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=J("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(sr.deleted,Qo(hi({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(sr.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(sr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);si(r)&&this.onBatchSubscribe(r.map((n,i)=>Qo(hi({},e[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(mn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Et.connect,async()=>{await this.onConnect()}),this.relayer.on(Et.disconnect,()=>{this.onDisconnect()}),this.events.on(sr.created,async e=>{const r=sr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(sr.deleted,async e=>{const r=sr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}};var nv=Object.defineProperty,ih=Object.getOwnPropertySymbols,iv=Object.prototype.hasOwnProperty,sv=Object.prototype.propertyIsEnumerable,sh=(t,e,r)=>e in t?nv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ov=(t,e)=>{for(var r in e||(e={}))iv.call(e,r)&&sh(t,r,e[r]);if(ih)for(var r of ih(e))sv.call(e,r)&&sh(t,r,e[r]);return t};let av=class extends I0{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Wt.EventEmitter,this.name=$y,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(Et.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(Et.error,r)},this.registerProviderListeners=()=>{this.provider.on(fr.payload,this.onPayloadHandler),this.provider.on(fr.connect,this.onConnectHandler),this.provider.on(fr.disconnect,this.onDisconnectHandler),this.provider.on(fr.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?De.generateChildLogger(e.logger,this.name):De.pino(De.getDefaultLoggerOptions({level:e.logger||Ay})),this.messages=new Gy(this.logger,e.core),this.subscriber=new rv(this,this.logger),this.publisher=new Yy(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Xu,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${eh}...`),await this.restartTransport(eh)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},Ny)}get context(){return De.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"";return i||(await Promise.all([new Promise(s=>{this.subscriber.once(sr.created,o=>{o.topic===e&&s()})}),new Promise(async s=>{i=await this.subscriber.subscribe(e,r),s()})]),i)}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await ii(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(sr.resubscribed,()=>{r()})}),new Promise(async(r,n)=>{try{await ii(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(i){n(i);return}r()})])}catch(r){this.logger.error(r);const n=r;if(!this.isConnectionStalled(n.message))throw r;this.provider.events.emit(fr.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await _u())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new qm(new Km($g({sdkVersion:Py,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Vo(e)){if(!e.method.endsWith(Ty))return;const r=e.params,{topic:n,message:i,publishedAt:s}=r.data,o={topic:n,message:i,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(ov({type:"event",event:r.id},o)),this.events.emit(r.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else ls(e)&&this.events.emit(Et.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Et.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Ho(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(fr.payload,this.onPayloadHandler),this.provider.off(fr.connect,this.onConnectHandler),this.provider.off(fr.disconnect,this.onDisconnectHandler),this.provider.off(fr.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Et.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let e=await _u();Em(async r=>{this.initialized&&e!==r&&(e=r,r?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(n=>this.logger.error(n))))})}onProviderDisconnect(){this.events.emit(Et.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},ee.toMiliseconds(Ry)))}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var cv=Object.defineProperty,oh=Object.getOwnPropertySymbols,lv=Object.prototype.hasOwnProperty,uv=Object.prototype.propertyIsEnumerable,ah=(t,e,r)=>e in t?cv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ch=(t,e)=>{for(var r in e||(e={}))lv.call(e,r)&&ah(t,r,e[r]);if(oh)for(var r of oh(e))uv.call(e,r)&&ah(t,r,e[r]);return t};let fs=class extends O0{constructor(e,r,n,i=Dr,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=Ly,this.cached=[],this.initialized=!1,this.storagePrefix=Dr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!At(o)?this.map.set(this.getKey(o),o):Xg(o)?this.map.set(o.id,o):em(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>Ym(a[c],o[c]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=ch(ch({},this.getData(o)),a);this.map.set(o,c),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),await this.persist())},this.logger=De.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=J("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}},hv=class{constructor(e,r){this.core=e,this.logger=r,this.name=ky,this.version=By,this.events=new no,this.initialized=!1,this.storagePrefix=Dr,this.ignoredPayloadTypes=[Yr],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=Uo(),i=await this.core.crypto.setSymKey(n),s=Qt(ee.FIVE_MINUTES),o={protocol:Qu},a={topic:i,expiry:s,relay:o,active:!1},c=qg({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:o});return await this.pairings.set(i,a),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:c}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:s,relay:o}=kg(n.uri);if(this.pairings.keys.includes(i))throw new Error(`Pairing already exists: ${i}`);if(this.core.crypto.hasKeys(i))throw new Error(`Keychain already exists: ${i}`);const a=Qt(ee.FIVE_MINUTES),c={topic:i,relay:o,expiry:a,active:!1};return await this.pairings.set(i,c),await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:o}),this.core.expirer.set(i,a),n.activatePairing&&await this.activate({topic:i}),c},this.activate=async({topic:n})=>{this.isInitialized();const i=Qt(ee.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=_n();this.events.once(Ze("pairing_ping",s),({error:u})=>{u?c(u):a()}),await o()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Qe("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{const o=ci(i,s),a=await this.core.crypto.encode(n,o),c=ui[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id},this.sendResult=async(n,i,s)=>{const o=Ho(n,s),a=await this.core.crypto.encode(i,o),c=await this.core.history.get(i,n),u=ui[c.request.method].res;await this.core.relayer.publish(i,a,u),await this.core.history.resolve(o)},this.sendError=async(n,i,s)=>{const o=Wo(n,s),a=await this.core.crypto.encode(i,o),c=await this.core.history.get(i,n),u=ui[c.request.method]?ui[c.request.method].res:ui.unregistered_method.res;await this.core.relayer.publish(i,a,u),await this.core.history.resolve(o)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Qe("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>Cr(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit("pairing_ping",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{dr(i)?this.events.emit(Ze("pairing_ping",s),{}):Xt(i)&&this.events.emit(Ze("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit("pairing_delete",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=Qe("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(Qe("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!Nt(n)){const{message:i}=J("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!Qg(n.uri)){const{message:i}=J("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!Nt(n)){const{message:s}=J("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!Nt(n)){const{message:s}=J("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!at(n,!1)){const{message:i}=J("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=J("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(Cr(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=J("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=De.generateChildLogger(r,this.name),this.pairings=new fs(this.core,this.logger,this.name,this.storagePrefix)}get context(){return De.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Et.message,async e=>{const{topic:r,message:n}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);try{Vo(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):ls(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id))}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(Kt.expired,async e=>{const{topic:r}=du(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}},dv=class extends x0{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new Wt.EventEmitter,this.name=zy,this.version=qy,this.cached=[],this.initialized=!1,this.storagePrefix=Dr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:Qt(ee.THIRTY_DAYS)};this.records.set(o.id,o),this.events.emit(or.created,o)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Xt(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(or.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(or.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=De.generateChildLogger(r,this.name)}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:ci(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=J("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(or.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(or.created,e=>{const r=or.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(or.updated,e=>{const r=or.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(or.deleted,e=>{const r=or.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(mn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{ee.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}},fv=class extends $0{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new Wt.EventEmitter,this.name=Hy,this.version=Wy,this.cached=[],this.initialized=!1,this.storagePrefix=Dr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(Kt.created,{target:s,expiration:o})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Kt.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=De.generateChildLogger(r,this.name)}get context(){return De.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Tg(e);if(typeof e=="number")return Rg(e);const{message:r}=J("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Kt.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=J("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;ee.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Kt.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(mn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Kt.created,e=>{const r=Kt.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Kt.expired,e=>{const r=Kt.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Kt.deleted,e=>{const r=Kt.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}},pv=class extends T0{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=Zo,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async n=>{if(this.verifyDisabled||is()||!ri())return;const i=(n==null?void 0:n.verifyUrl)||ds;this.verifyUrl!==i&&this.removeIframe(),this.verifyUrl=i;try{await this.createIframe()}catch(s){this.logger.warn(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.warn(s)}if(!this.initialized){this.removeIframe(),this.verifyUrl=th;try{await this.createIframe()}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s),this.verifyDisabled=!0}}},this.register=async n=>{this.initialized?this.sendPost(n.attestationId):(this.addToQueue(n.attestationId),await this.init())},this.resolve=async n=>{if(this.isDevEnv)return"";const i=(n==null?void 0:n.verifyUrl)||ds;let s="";try{s=await this.fetchAttestation(n.attestationId,i)}catch(o){this.logger.warn(`failed to resolve attestation: ${n.attestationId} from url: ${i}`),this.logger.warn(o),s=await this.fetchAttestation(n.attestationId,th)}return s},this.fetchAttestation=async(n,i)=>{var s;this.logger.info(`resolving attestation: ${n} from url: ${i}`);const o=this.startAbortTimer(ee.ONE_SECOND*2),a=await fetch(`${i}/attestation/${n}`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?(s=await a.json())==null?void 0:s.origin:""},this.addToQueue=n=>{this.queue.push(n)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(n=>this.sendPost(n)),this.queue=[])},this.sendPost=n=>{var i;try{if(!this.iframe)return;(i=this.iframe.contentWindow)==null||i.postMessage(n,"*"),this.logger.info(`postMessage sent: ${n} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let n;const i=s=>{s.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",i),n())};await Promise.race([new Promise(s=>{if(document.getElementById(Zo))return s();window.addEventListener("message",i);const o=document.createElement("iframe");o.id=Zo,o.src=`${this.verifyUrl}/${this.projectId}`,o.style.display="none",document.body.append(o),this.iframe=o,n=s}),new Promise((s,o)=>setTimeout(()=>{window.removeEventListener("message",i),o("verify iframe load timeout")},ee.toMiliseconds(ee.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=De.generateChildLogger(r,this.name),this.verifyUrl=ds,this.abortController=new AbortController,this.isDevEnv=Fo()&&process.env.IS_VITEST}get context(){return De.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ee.toMiliseconds(e))}};var gv=Object.defineProperty,lh=Object.getOwnPropertySymbols,mv=Object.prototype.hasOwnProperty,wv=Object.prototype.propertyIsEnumerable,uh=(t,e,r)=>e in t?gv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hh=(t,e)=>{for(var r in e||(e={}))mv.call(e,r)&&uh(t,r,e[r]);if(lh)for(var r of lh(e))wv.call(e,r)&&uh(t,r,e[r]);return t};const yv=class nf extends S0{constructor(e){super(e),this.protocol=Ju,this.version=yy,this.name=Jo,this.events=new Wt.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Xu;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:De.pino(De.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||vy.logger}));this.logger=De.generateChildLogger(r,this.name),this.heartbeat=new mn.HeartBeat,this.crypto=new Ky(this,this.logger,e==null?void 0:e.keychain),this.history=new dv(this,this.logger),this.expirer=new fv(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new a0(hh(hh({},by),e==null?void 0:e.storageOptions)),this.relayer=new av({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new hv(this,this.logger),this.verify=new pv(this.projectId||"",this.logger)}static async init(e){const r=new nf(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(My,n),r}get context(){return De.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}},dh="wc",fh=2,ph="client",Xo=`${dh}@${fh}:${ph}:`,ea={name:ph,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},gh="WALLETCONNECT_DEEPLINK_CHOICE",vv="proposal",bv="Proposal expired",_v="session",ps=ee.SEVEN_DAYS,Ev="engine",di={wc_sessionPropose:{req:{ttl:ee.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ee.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ee.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ee.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ee.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ee.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ee.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ee.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ee.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ee.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ee.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ee.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ee.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ee.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ee.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ee.THIRTY_SECONDS,prompt:!1,tag:1115}}},ta={min:ee.FIVE_MINUTES,max:ee.SEVEN_DAYS},pr={idle:"IDLE",active:"ACTIVE"},Sv="request",xv=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var Cv=Object.defineProperty,Dv=Object.defineProperties,Iv=Object.getOwnPropertyDescriptors,mh=Object.getOwnPropertySymbols,Ov=Object.prototype.hasOwnProperty,Av=Object.prototype.propertyIsEnumerable,wh=(t,e,r)=>e in t?Cv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Lt=(t,e)=>{for(var r in e||(e={}))Ov.call(e,r)&&wh(t,r,e[r]);if(mh)for(var r of mh(e))Av.call(e,r)&&wh(t,r,e[r]);return t},fi=(t,e)=>Dv(t,Iv(e));class $v extends P0{constructor(e){super(e),this.name=Ev,this.events=new no,this.initialized=!1,this.ignoredPayloadTypes=[Yr],this.requestQueue={state:pr.idle,queue:[]},this.sessionRequestQueue={state:pr.idle,queue:[]},this.requestQueueDelay=ee.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(di)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ee.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const n=fi(Lt({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:c}=n;let u=i,d,f=!1;if(u&&(f=this.client.core.pairing.pairings.get(u).active),!u||!f){const{topic:E,uri:w}=await this.client.core.pairing.create();u=E,d=w}const g=await this.client.core.crypto.generateKeyPair(),y=Lt({requiredNamespaces:s,optionalNamespaces:o,relays:c??[{protocol:Qu}],proposer:{publicKey:g,metadata:this.client.metadata}},a&&{sessionProperties:a}),{reject:_,resolve:b,done:C}=_n(ee.FIVE_MINUTES,bv);if(this.events.once(Ze("session_connect"),async({error:E,session:w})=>{if(E)_(E);else if(w){w.self.publicKey=g;const x=fi(Lt({},w),{requiredNamespaces:w.requiredNamespaces,optionalNamespaces:w.optionalNamespaces});await this.client.session.set(w.topic,x),await this.setExpiry(w.topic,w.expiry),u&&await this.client.core.pairing.updateMetadata({topic:u,metadata:w.peer.metadata}),b(x)}}),!u){const{message:E}=J("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(E)}const I=await this.sendRequest({topic:u,method:"wc_sessionPropose",params:y}),v=Qt(ee.FIVE_MINUTES);return await this.setProposal(I,Lt({id:I,expiry:v},y)),{uri:d,approval:C}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:i,namespaces:s,sessionProperties:o}=r,a=this.client.proposal.get(n);let{pairingTopic:c,proposer:u,requiredNamespaces:d,optionalNamespaces:f}=a;c=c||"",oi(d)||(d=Kg(s,"approve()"));const g=await this.client.core.crypto.generateKeyPair(),y=u.publicKey,_=await this.client.core.crypto.generateSharedKey(g,y);c&&n&&(await this.client.core.pairing.updateMetadata({topic:c,metadata:u.metadata}),await this.sendResult({id:n,topic:c,result:{relay:{protocol:i??"irn"},responderPublicKey:g}}),await this.client.proposal.delete(n,Qe("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:c}));const b=Lt({relay:{protocol:i??"irn"},namespaces:s,requiredNamespaces:d,optionalNamespaces:f,pairingTopic:c,controller:{publicKey:g,metadata:this.client.metadata},expiry:Qt(ps)},o&&{sessionProperties:o});await this.client.core.relayer.subscribe(_),await this.sendRequest({topic:_,method:"wc_sessionSettle",params:b,throwOnFailedPublish:!0});const C=fi(Lt({},b),{topic:_,pairingTopic:c,acknowledged:!1,self:b.controller,peer:{publicKey:u.publicKey,metadata:u.metadata},controller:g});return await this.client.session.set(_,C),await this.setExpiry(_,Qt(ps)),{topic:_,acknowledged:()=>new Promise(I=>setTimeout(()=>I(this.client.session.get(_)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:n,reason:i}=r,{pairingTopic:s}=this.client.proposal.get(n);s&&(await this.sendError(n,s,i),await this.client.proposal.delete(n,Qe("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:i}=r,s=await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i}}),{done:o,resolve:a,reject:c}=_n();return this.events.once(Ze("session_update",s),({error:u})=>{u?c(u):a()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:o}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,i=await this.sendRequest({topic:n,method:"wc_sessionExtend",params:{}}),{done:s,resolve:o,reject:a}=_n();return this.events.once(Ze("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,Qt(ps)),{acknowledged:s}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:i,topic:s,expiry:o}=r,a=qo(),{done:c,resolve:u,reject:d}=_n(o);return this.events.once(Ze("session_request",a),({error:f,result:g})=>{f?d(f):u(g)}),await Promise.all([new Promise(async f=>{await this.sendRequest({clientRpcId:a,topic:s,method:"wc_sessionRequest",params:{request:i,chainId:n},expiry:o,throwOnFailedPublish:!0}).catch(g=>d(g)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:a}),f()}),new Promise(async f=>{const g=await this.client.core.storage.getItem(gh);Pg({id:a,topic:s,wcDeepLink:g}),f()}),c()]).then(f=>f[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i;dr(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0}):Xt(i)&&await this.sendError(s,n,i.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=await this.sendRequest({topic:n,method:"wc_sessionPing",params:{}}),{done:s,resolve:o,reject:a}=_n();this.events.once(Ze("session_ping",i),({error:c})=>{c?a(c):o()}),await s()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r;await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;this.client.session.keys.includes(n)?(await this.sendRequest({topic:n,method:"wc_sessionDelete",params:Qe("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>Jg(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(r,n)=>{const{self:i}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,Qe("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(i.publicKey)&&await this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r),this.client.core.storage.removeItem(gh).catch(s=>this.client.logger.warn(s))},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,Qe("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=pr.idle)},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{const n=di.wc_sessionRequest.req.ttl,{id:i,topic:s,params:o}=r;await this.client.pendingRequest.set(i,{id:i,topic:s,params:o}),n&&this.client.core.expirer.set(i,Qt(n))},this.sendRequest=async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u}=r,d=ci(i,s,c);if(ri()&&xv.includes(i)){const y=bn(JSON.stringify(d));this.client.core.verify.register({attestationId:y})}const f=await this.client.core.crypto.encode(n,d),g=di[i].req;return o&&(g.ttl=o),a&&(g.id=a),this.client.core.history.set(n,d),u?(g.internal=fi(Lt({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,f,g)):this.client.core.relayer.publish(n,f,g).catch(y=>this.client.logger.error(y)),d.id},this.sendResult=async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o}=r,a=Ho(n,s),c=await this.client.core.crypto.encode(i,a),u=await this.client.core.history.get(i,n),d=di[u.request.method].res;o?(d.internal=fi(Lt({},d.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,c,d)):this.client.core.relayer.publish(i,c,d).catch(f=>this.client.logger.error(f)),await this.client.core.history.resolve(a)},this.sendError=async(r,n,i)=>{const s=Wo(r,i),o=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,r),c=di[a.request.method].res;this.client.core.relayer.publish(n,o,c),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{Cr(i.expiry)&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Cr(i.expiry)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession(i)),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===pr.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=pr.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(n=>setTimeout(n,300))}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=pr.idle},this.processRequest=r=>{const{topic:n,payload:i}=r,s=i.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i}=r,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:i}=J("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.onSessionProposeRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidConnect(Lt({},n.params));const o=Qt(ee.FIVE_MINUTES),a=Lt({id:s,pairingTopic:r,expiry:o},i);await this.setProposal(s,a);const c=bn(JSON.stringify(n)),u=await this.getVerifyContext(c,a.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:a,verifyContext:u})}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.onSessionProposeResponse=async(r,n)=>{const{id:i}=n;if(dr(n)){const{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const o=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const a=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});const c=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:c});const u=await this.client.core.crypto.generateSharedKey(a,c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:u});const d=await this.client.core.relayer.subscribe(u);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else Xt(n)&&(await this.client.proposal.delete(i,Qe("USER_DISCONNECTED")),this.events.emit(Ze("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:u,requiredNamespaces:d,optionalNamespaces:f,sessionProperties:g,pairingTopic:y}=n.params,_=Lt({topic:r,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:y,requiredNamespaces:d,optionalNamespaces:f,controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},g&&{sessionProperties:g});await this.sendResult({id:n.id,topic:r,result:!0}),this.events.emit(Ze("session_connect"),{session:_}),this.cleanupDuplicatePairings(_)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;dr(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Ze("session_approve",i),{})):Xt(n)&&(await this.client.session.delete(r,Qe("USER_DISCONNECTED")),this.events.emit(Ze("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=cs.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidUpdate(Lt({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0}),this.client.events.emit("session_update",{id:s,topic:r,params:i}),cs.set(o,s)}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.isRequestOutOfSync=(r,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n;dr(n)?this.events.emit(Ze("session_update",i),{}):Xt(n)&&this.events.emit(Ze("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Qt(ps)),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n;dr(n)?this.events.emit(Ze("session_extend",i),{}):Xt(n)&&this.events.emit(Ze("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n;setTimeout(()=>{dr(n)?this.events.emit(Ze("session_ping",i),{}):Xt(n)&&this.events.emit(Ze("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(Et.publish,async()=>{s(await this.deleteSession(r))})}),this.sendResult({id:i,topic:r,result:!0})]),this.client.events.emit("session_delete",{id:i,topic:r})}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidRequest(Lt({topic:r},s)),await this.setPendingSessionRequest({id:i,topic:r,params:s}),this.addSessionRequestToSessionRequestQueue({id:i,topic:r,params:s}),await this.processSessionRequestQueue()}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n;dr(n)?this.events.emit(Ze("session_request",i),{result:n.result}):Xt(n)&&this.events.emit(Ze("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=cs.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(Lt({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),cs.set(o,i)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=pr.idle,this.processSessionRequestQueue()},ee.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=async()=>{if(this.sessionRequestQueue.state===pr.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{const{id:n,topic:i,params:s}=r,o=bn(JSON.stringify(ci("wc_sessionRequest",s,n))),a=this.client.session.get(i),c=await this.getVerifyContext(o,a.peer.metadata);this.sessionRequestQueue.state=pr.active,this.client.events.emit("session_request",{id:n,topic:i,params:s,verifyContext:c})}catch(n){this.client.logger.error(n)}},this.isValidConnect=async r=>{if(!Nt(r)){const{message:c}=J("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(c)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(At(n)||await this.isValidPairingTopic(n),!cm(a,!0)){const{message:c}=J("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(c)}!At(i)&&oi(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!At(s)&&oi(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),At(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=am(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!Nt(r))throw new Error(J("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o}=r;await this.isValidProposalId(n);const a=this.client.proposal.get(n),c=as(i,"approve()");if(c)throw new Error(c.message);const u=vu(a.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!at(s,!0)){const{message:d}=J("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}At(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!Nt(r)){const{message:s}=J("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(await this.isValidProposalId(n),!um(i)){const{message:s}=J("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!Nt(r)){const{message:u}=J("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(u)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!wu(n)){const{message:u}=J("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=tm(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=as(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Cr(o)){const{message:u}=J("EXPIRED","onSessionSettleRequest()");throw new Error(u)}},this.isValidUpdate=async r=>{if(!Nt(r)){const{message:c}=J("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=as(i,"update()");if(o)throw new Error(o.message);const a=vu(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!Nt(r)){const{message:i}=J("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!Nt(r)){const{message:c}=J("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:i,chainId:s,expiry:o}=r;await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!yu(a,s)){const{message:c}=J("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!hm(i)){const{message:c}=J("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!pm(a,s,i.method)){const{message:c}=J("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!ym(o,ta)){const{message:c}=J("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${ta.min} and ${ta.max}`);throw new Error(c)}},this.isValidRespond=async r=>{if(!Nt(r)){const{message:s}=J("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(s)}const{topic:n,response:i}=r;if(await this.isValidSessionTopic(n),!dm(i)){const{message:s}=J("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidPing=async r=>{if(!Nt(r)){const{message:i}=J("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!Nt(r)){const{message:a}=J("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!yu(o,s)){const{message:a}=J("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!fm(i)){const{message:a}=J("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!gm(o,s,i.name)){const{message:a}=J("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!Nt(r)){const{message:i}=J("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(r,n)=>{const i={verified:{verifyUrl:n.verifyUrl||ds,validation:"UNKNOWN",origin:n.url||""}};try{const s=await this.client.core.verify.resolve({attestationId:r,verifyUrl:n.verifyUrl});s&&(i.verified.origin=s,i.verified.validation=s===new URL(n.url).origin?"VALID":"INVALID")}catch(s){this.client.logger.error(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!at(i,!1)){const{message:s}=J("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}}async isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Et.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(r,n);try{Vo(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):ls(i)?(await this.client.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.client.core.history.delete(r,i.id)):this.onRelayEventUnknownPayload({topic:r,payload:i})}catch(s){this.client.logger.error(s)}})}registerExpirerEvents(){this.client.core.expirer.on(Kt.expired,async e=>{const{topic:r,id:n}=du(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,J("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(e){if(!at(e,!1)){const{message:r}=J("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=J("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Cr(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=J("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!at(e,!1)){const{message:r}=J("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=J("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Cr(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=J("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(at(e,!1)){const{message:r}=J("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=J("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!lm(e)){const{message:r}=J("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=J("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Cr(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=J("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class Tv extends fs{constructor(e,r){super(e,r,vv,Xo),this.core=e,this.logger=r}}class Rv extends fs{constructor(e,r){super(e,r,_v,Xo),this.core=e,this.logger=r}}class Pv extends fs{constructor(e,r){super(e,r,Sv,Xo,n=>n.id),this.core=e,this.logger=r}}let Nv=class sf extends R0{constructor(e){super(e),this.protocol=dh,this.version=fh,this.name=ea.name,this.events=new Wt.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(e==null?void 0:e.name)||ea.name,this.metadata=(e==null?void 0:e.metadata)||Dg();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:De.pino(De.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||ea.logger}));this.core=(e==null?void 0:e.core)||new yv(e),this.logger=De.generateChildLogger(r,this.name),this.session=new Rv(this.core,this.logger),this.proposal=new Tv(this.core,this.logger),this.pendingRequest=new Pv(this.core,this.logger),this.engine=new $v(this)}static async init(e){const r=new sf(e);return await r.initialize(),r}get context(){return De.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Lv=Object.defineProperty,Mv=Object.defineProperties,Uv=Object.getOwnPropertyDescriptors,yh=Object.getOwnPropertySymbols,Fv=Object.prototype.hasOwnProperty,jv=Object.prototype.propertyIsEnumerable,vh=(t,e,r)=>e in t?Lv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,kv=(t,e)=>{for(var r in e||(e={}))Fv.call(e,r)&&vh(t,r,e[r]);if(yh)for(var r of yh(e))jv.call(e,r)&&vh(t,r,e[r]);return t},Bv=(t,e)=>Mv(t,Uv(e)),ra=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},ke=(t,e,r)=>(ra(t,e,"read from private field"),r?r.call(t):e.get(t)),Zr=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},gs=(t,e,r,n)=>(ra(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),St=(t,e,r)=>(ra(t,e,"access private method"),r),Qr,Sn,pi,ct,na,bh,xt,$t,ia,_h;let zv=class{constructor(e){Zr(this,na),Zr(this,xt),Zr(this,ia),Zr(this,Qr,void 0),Zr(this,Sn,void 0),Zr(this,pi,void 0),Zr(this,ct,void 0),gs(this,Qr,e),gs(this,Sn,St(this,na,bh).call(this)),St(this,xt,$t).call(this)}async connect(e){const{requiredNamespaces:r,optionalNamespaces:n}=e;return new Promise(async(i,s)=>{await St(this,xt,$t).call(this);const o=ke(this,Sn).subscribeModal(u=>{u.open||(o(),s(new Error("Modal closed")))}),{uri:a,approval:c}=await ke(this,ct).connect(e);if(a){const u=new Set;r&&Object.values(r).forEach(({chains:d})=>{d&&d.forEach(f=>u.add(f))}),n&&Object.values(n).forEach(({chains:d})=>{d&&d.forEach(f=>u.add(f))}),await ke(this,Sn).openModal({uri:a,chains:Array.from(u)})}try{const u=await c();i(u)}catch(u){s(u)}finally{o(),ke(this,Sn).closeModal()}})}async disconnect(e){await St(this,xt,$t).call(this),await ke(this,ct).disconnect(e)}async request(e){return await St(this,xt,$t).call(this),await ke(this,ct).request(e)}async getSessions(){return await St(this,xt,$t).call(this),ke(this,ct).session.getAll()}async getSession(){return await St(this,xt,$t).call(this),ke(this,ct).session.getAll().at(-1)}async onSessionEvent(e){await St(this,xt,$t).call(this),ke(this,ct).on("session_event",e)}async offSessionEvent(e){await St(this,xt,$t).call(this),ke(this,ct).off("session_event",e)}async onSessionUpdate(e){await St(this,xt,$t).call(this),ke(this,ct).on("session_update",e)}async offSessionUpdate(e){await St(this,xt,$t).call(this),ke(this,ct).off("session_update",e)}async onSessionDelete(e){await St(this,xt,$t).call(this),ke(this,ct).on("session_delete",e)}async offSessionDelete(e){await St(this,xt,$t).call(this),ke(this,ct).off("session_delete",e)}async onSessionExpire(e){await St(this,xt,$t).call(this),ke(this,ct).on("session_expire",e)}async offSessionExpire(e){await St(this,xt,$t).call(this),ke(this,ct).off("session_expire",e)}};Qr=new WeakMap,Sn=new WeakMap,pi=new WeakMap,ct=new WeakMap,na=new WeakSet,bh=function(){const{modalOptions:t,projectId:e}=ke(this,Qr);return new If(Bv(kv({},t),{projectId:e}))},xt=new WeakSet,$t=async function(){return ke(this,ct)?!0:(!ke(this,pi)&&typeof window<"u"&&gs(this,pi,St(this,ia,_h).call(this)),ke(this,pi))},ia=new WeakSet,_h=async function(){gs(this,ct,await Nv.init({metadata:ke(this,Qr).metadata,projectId:ke(this,Qr).projectId,relayUrl:ke(this,Qr).relayUrl}));const t=await ke(this,ct).core.crypto.getClientId();try{localStorage.setItem("WCM_WALLETCONNECT_CLIENT_ID",t)}catch{console.info("Unable to set client id")}};const ms=["decrypt","disconnect","getSelectedAccount","getBalance","getRecords","requestCreateEvent","getEvents","createSharedState","importSharedState","requestSignature"],gi=["aleo:1"],ws=["chainChanged","accountSelected","accountSynced"],Eh="f0aaeffe71b636da453fce042d79d723",Sh={standaloneChains:gi,enableExplorer:!1,enableAccountView:!0,enableNetworkView:!0,enableStandaloneMode:!0,mobileWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"puzzleapp://",universal:""}}],desktopWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"",universal:"https://walletconnect.puzzle.online/"}}],walletImages:{puzzle:"https://i.imgur.com/p9tHaFC.png"}},qv={requiredNamespaces:{aleo:{methods:ms,chains:gi,events:ws}}};function Hv(t){return{all:t=t||new Map,on:function(e,r){var n=t.get(e);n?n.push(r):t.set(e,[r])},off:function(e,r){var n=t.get(e);n&&(r?n.splice(n.indexOf(r)>>>0,1):t.set(e,[]))},emit:function(e,r){var n=t.get(e);n&&n.slice().map(function(i){i(r)}),(n=t.get("*"))&&n.slice().map(function(i){i(e,r)})}}}const xh=t=>{let e;const r=new Set,n=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const f=e;e=u??typeof d!="object"?d:Object.assign({},e,d),r.forEach(g=>g(e,f))}},i=()=>e,a={setState:n,getState:i,subscribe:c=>(r.add(c),()=>r.delete(c)),destroy:()=>{r.clear()}};return e=t(n,i,a),a},Wv=t=>t?xh(t):xh;var sa={exports:{}},oa={},ys={exports:{}},aa={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ch;function Vv(){if(Ch)return aa;Ch=1;var t=fe;function e(f,g){return f===g&&(f!==0||1/f===1/g)||f!==f&&g!==g}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(f,g){var y=g(),_=n({inst:{value:y,getSnapshot:g}}),b=_[0].inst,C=_[1];return s(function(){b.value=y,b.getSnapshot=g,c(b)&&C({inst:b})},[f,y,g]),i(function(){return c(b)&&C({inst:b}),f(function(){c(b)&&C({inst:b})})},[f]),o(y),y}function c(f){var g=f.getSnapshot;f=f.value;try{var y=g();return!r(f,y)}catch{return!0}}function u(f,g){return g()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return aa.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,aa}var ca={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dh;function Kv(){return Dh||(Dh=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=fe,e=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function r(E){{for(var w=arguments.length,x=new Array(w>1?w-1:0),p=1;p<w;p++)x[p-1]=arguments[p];n("error",E,x)}}function n(E,w,x){{var p=e.ReactDebugCurrentFrame,l=p.getStackAddendum();l!==""&&(w+="%s",x=x.concat([l]));var m=x.map(function(R){return String(R)});m.unshift("Warning: "+w),Function.prototype.apply.call(console[E],console,m)}}function i(E,w){return E===w&&(E!==0||1/E===1/w)||E!==E&&w!==w}var s=typeof Object.is=="function"?Object.is:i,o=t.useState,a=t.useEffect,c=t.useLayoutEffect,u=t.useDebugValue,d=!1,f=!1;function g(E,w,x){d||t.startTransition!==void 0&&(d=!0,r("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var p=w();if(!f){var l=w();s(p,l)||(r("The result of getSnapshot should be cached to avoid an infinite loop"),f=!0)}var m=o({inst:{value:p,getSnapshot:w}}),R=m[0].inst,O=m[1];return c(function(){R.value=p,R.getSnapshot=w,y(R)&&O({inst:R})},[E,p,w]),a(function(){y(R)&&O({inst:R});var M=function(){y(R)&&O({inst:R})};return E(M)},[E]),u(p),p}function y(E){var w=E.getSnapshot,x=E.value;try{var p=w();return!s(x,p)}catch{return!0}}function _(E,w,x){return w()}var b=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",C=!b,I=C?_:g,v=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:I;ca.useSyncExternalStore=v,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),ca}var Ih;function Oh(){return Ih||(Ih=1,process.env.NODE_ENV==="production"?ys.exports=Vv():ys.exports=Kv()),ys.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ah;function Gv(){if(Ah)return oa;Ah=1;var t=fe,e=Oh();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,c=t.useDebugValue;return oa.useSyncExternalStoreWithSelector=function(u,d,f,g,y){var _=s(null);if(_.current===null){var b={hasValue:!1,value:null};_.current=b}else b=_.current;_=a(function(){function I(p){if(!v){if(v=!0,E=p,p=g(p),y!==void 0&&b.hasValue){var l=b.value;if(y(l,p))return w=l}return w=p}if(l=w,n(E,p))return l;var m=g(p);return y!==void 0&&y(l,m)?l:(E=p,w=m)}var v=!1,E,w,x=f===void 0?null:f;return[function(){return I(d())},x===null?void 0:function(){return I(x())}]},[d,f,g,y]);var C=i(u,_[0],_[1]);return o(function(){b.hasValue=!0,b.value=C},[C]),c(C),C},oa}var la={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $h;function Yv(){return $h||($h=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=fe,e=Oh();function r(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,c=t.useDebugValue;function u(d,f,g,y,_){var b=s(null),C;b.current===null?(C={hasValue:!1,value:null},b.current=C):C=b.current;var I=a(function(){var x=!1,p,l,m=function(k){if(!x){x=!0,p=k;var W=y(k);if(_!==void 0&&C.hasValue){var A=C.value;if(_(A,W))return l=A,A}return l=W,W}var N=p,V=l;if(n(N,k))return V;var z=y(k);return _!==void 0&&_(V,z)?V:(p=k,l=z,z)},R=g===void 0?null:g,O=function(){return m(f())},M=R===null?void 0:function(){return m(R())};return[O,M]},[f,g,y,_]),v=I[0],E=I[1],w=i(d,v,E);return o(function(){C.hasValue=!0,C.value=w},[w]),c(w),w}la.useSyncExternalStoreWithSelector=u,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),la}process.env.NODE_ENV==="production"?sa.exports=Gv():sa.exports=Yv();var Jv=sa.exports;const Zv=Hi(Jv),{useSyncExternalStoreWithSelector:Qv}=Zv;function Xv(t,e=t.getState,r){const n=Qv(t.subscribe,t.getState,t.getServerState||t.getState,e,r);return fe.useDebugValue(n),n}const Th=t=>{const e=typeof t=="function"?Wv(t):t,r=(n,i)=>Xv(e,n,i);return Object.assign(r,e),r},eb=t=>t?Th(t):Th;function tb(t,e){let r;try{r=t()}catch{return}return{getItem:i=>{var s;const o=c=>c===null?null:JSON.parse(c,e==null?void 0:e.reviver),a=(s=r.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>r.setItem(i,JSON.stringify(s,e==null?void 0:e.replacer)),removeItem:i=>r.removeItem(i)}}const mi=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return mi(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return mi(n)(r)}}}},rb=(t,e)=>(r,n,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:C=>C,version:0,merge:(C,I)=>({...I,...C}),...e},o=!1;const a=new Set,c=new Set;let u;try{u=s.getStorage()}catch{}if(!u)return t((...C)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...C)},n,i);const d=mi(s.serialize),f=()=>{const C=s.partialize({...n()});let I;const v=d({state:C,version:s.version}).then(E=>u.setItem(s.name,E)).catch(E=>{I=E});if(I)throw I;return v},g=i.setState;i.setState=(C,I)=>{g(C,I),f()};const y=t((...C)=>{r(...C),f()},n,i);let _;const b=()=>{var C;if(!u)return;o=!1,a.forEach(v=>v(n()));const I=((C=s.onRehydrateStorage)==null?void 0:C.call(s,n()))||void 0;return mi(u.getItem.bind(u))(s.name).then(v=>{if(v)return s.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==s.version){if(s.migrate)return s.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var E;return _=s.merge(v,(E=n())!=null?E:y),r(_,!0),f()}).then(()=>{I==null||I(_,void 0),o=!0,c.forEach(v=>v(_))}).catch(v=>{I==null||I(void 0,v)})};return i.persist={setOptions:C=>{s={...s,...C},C.getStorage&&(u=C.getStorage())},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>b(),hasHydrated:()=>o,onHydrate:C=>(a.add(C),()=>{a.delete(C)}),onFinishHydration:C=>(c.add(C),()=>{c.delete(C)})},b(),_||y},nb=(t,e)=>(r,n,i)=>{let s={storage:tb(()=>localStorage),partialize:b=>b,version:0,merge:(b,C)=>({...C,...b}),...e},o=!1;const a=new Set,c=new Set;let u=s.storage;if(!u)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...b)},n,i);const d=()=>{const b=s.partialize({...n()});return u.setItem(s.name,{state:b,version:s.version})},f=i.setState;i.setState=(b,C)=>{f(b,C),d()};const g=t((...b)=>{r(...b),d()},n,i);let y;const _=()=>{var b,C;if(!u)return;o=!1,a.forEach(v=>{var E;return v((E=n())!=null?E:g)});const I=((C=s.onRehydrateStorage)==null?void 0:C.call(s,(b=n())!=null?b:g))||void 0;return mi(u.getItem.bind(u))(s.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==s.version){if(s.migrate)return s.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var E;return y=s.merge(v,(E=n())!=null?E:g),r(y,!0),d()}).then(()=>{I==null||I(y,void 0),y=n(),o=!0,c.forEach(v=>v(y))}).catch(v=>{I==null||I(void 0,v)})};return i.persist={setOptions:b=>{s={...s,...b},b.storage&&(u=b.storage)},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>_(),hasHydrated:()=>o,onHydrate:b=>(a.add(b),()=>{a.delete(b)}),onFinishHydration:b=>(c.add(b),()=>{c.delete(b)})},s.skipHydration||_(),y||g},ib=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?rb(t,e):nb(t,e),wi=eb()(ib((t,e)=>({account:void 0,chainId:"aleo:1",setAccount:r=>{t({account:r})},setChainId:r=>{t({chainId:r})},disconnect:()=>{t({account:void 0,chainId:void 0})}}),{name:"puzzle-wallet-store"})),Xr=Hv();let yi;function sb(t){yi=new zv({projectId:Eh,metadata:{name:t.dAppName,description:t.dAppDescription,url:t.dAppUrl,icons:[t.dAppIconURL]},modalOptions:{...Sh}}),wi.setState({account:void 0}),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")}async function Fe(){return new Promise(t=>{if(yi)t(yi);else{const e=setInterval(()=>{yi&&(clearInterval(e),t(yi))},200)}window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")})}G.EventType=void 0,function(t){t.Unknown="Unknown",t.Deploy="Deploy",t.Execute="Execute",t.Send="Send",t.Receive="Receive",t.Join="Join",t.Split="Split",t.Shield="Shield",t.Unshield="Unshield"}(G.EventType||(G.EventType={})),G.EventStatus=void 0,function(t){t.Creating="Creating",t.Pending="Pending",t.Settled="Settled",t.Failed="Failed"}(G.EventStatus||(G.EventStatus={})),G.Visibility=void 0,function(t){t.Private="Private",t.Public="Public"}(G.Visibility||(G.Visibility={})),G.Network=void 0,function(t){t.AleoTestnet="AleoTestnet",t.AleoMainnet="AleoMainnet"}(G.Network||(G.Network={})),G.AssetType=void 0,function(t){t[t.ALEO=0]="ALEO"}(G.AssetType||(G.AssetType={}));let ob=class extends jt{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},ab=class{constructor(e,r,n){this.core=e,this.logger=r}},cb=class extends jt{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},lb=class{constructor(e,r){this.logger=e,this.core=r}},ub=class extends jt{constructor(e,r){super(),this.relayer=e,this.logger=r}},hb=class extends jt{constructor(e){super()}},db=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},fb=class{constructor(){this.map=new Map}},pb=class extends jt{constructor(e,r){super(),this.relayer=e,this.logger=r}},gb=class{constructor(e,r){this.core=e,this.logger=r}},mb=class extends jt{constructor(e,r){super(),this.core=e,this.logger=r}},wb=class{constructor(e,r){this.logger=e,this.core=r}},yb=class{constructor(e,r){this.projectId=e,this.logger=r}},vb=class extends no{constructor(){super()}},bb=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},_b=class extends Wt.EventEmitter{constructor(){super()}},Eb=class{constructor(e){this.client=e}};function vs(t){fe.useEffect(()=>(Fe().then(e=>{e.onSessionDelete(t)}),()=>{Fe().then(e=>{e.offSessionDelete(t)})}),[t])}function Rh(t){fe.useEffect(()=>(Fe().then(e=>{e.onSessionExpire(t)}),()=>{Fe().then(e=>{e.offSessionExpire(t)})}),[t])}function ua(t){fe.useEffect(()=>(Fe().then(e=>{e.onSessionUpdate(t)}),()=>{Fe().then(e=>{e.offSessionUpdate(t)})}),[t])}function Gt(){const[t,e]=fe.useState(void 0);return vs(r=>{r.topic===(t==null?void 0:t.topic)&&e(void 0)}),ua(r=>{if(t&&r.topic===(t==null?void 0:t.topic)){const{namespaces:n}=r.params,i={...t,namespaces:n};e(i)}}),Rh(r=>{t&&r.topic===(t==null?void 0:t.topic)&&e(void 0)}),fe.useEffect(()=>{async function r(){const i=await(await Fe()).getSession();e(i)}return r(),Xr.on("session_change",r),()=>{Xr.off("session_change",r)}},[]),t}function vi(t){fe.useEffect(()=>(Fe().then(e=>{e.onSessionEvent(t)}),()=>{Fe().then(e=>{e.offSessionEvent(t)})}),[t])}const ha=t=>t.length<5*2?t:`${t.slice(0,5+5)}...${t.slice(t.length-5,t.length)}`,da=()=>{const t=Gt(),e="aleo:1",[r,n]=wi(u=>[u.account,u.setAccount]),[i,s]=fe.useState(void 0),[o,a]=fe.useState(!1),c=async()=>{if(!t){a(!1);return}try{a(!0);const d=await(await Fe()).request({topic:t==null?void 0:t.topic,chainId:e,request:{id:1,jsonrpc:"2.0",method:"getSelectedAccount"}});n(d.account),s(d.error)}catch(u){s(u.message)}finally{a(!1)}};return vi(({params:u,topic:d})=>{const f=u.event.name;if((f==="accountSelected"||f==="accountSynced")&&t&&t.topic===d){const g=u.event.data,y=u.chainId.split(":")[0],_=u.chainId.split(":")[1];n({network:y,chainId:_,address:g,shortenedAddress:ha(g)})}}),ua(({params:u,topic:d})=>{const f=u.event.data,g=u.chainId.split(":")[0],y=u.chainId.split(":")[1];n({network:g,chainId:y,address:f,shortenedAddress:ha(f)})}),vs(({params:u,topic:d})=>{n(void 0)}),fe.useEffect(()=>{t&&!o&&c()},[t]),{account:r,error:i,loading:o}},Sb=()=>{const t=Gt(),e="aleo:1",[r,n]=fe.useState(void 0),[i,s]=fe.useState(void 0),[o,a]=fe.useState(!1),c=async()=>{try{a(!0);const d=await(await Fe()).request({topic:t==null?void 0:t.topic,chainId:e,request:{id:1,jsonrpc:"2.0",method:"getBalance",params:{assetId:void 0}}});n(d.balances),s(d.error)}catch(u){s(u.message)}finally{a(!1)}};return vi(({params:u,topic:d})=>{const f=u.event.name;(f==="accountSynced"||f==="accountSelected")&&t&&t.topic===d&&!o&&c()}),vs(({params:u,topic:d})=>{n(void 0)}),fe.useEffect(()=>{t&&!o&&c(),t||n(void 0)},[t]),{balances:r,error:i,loading:o}};function xb(){const[t,e]=fe.useState(void 0),[r,n]=fe.useState(),[i,s]=fe.useState(!1);async function o(){try{s(!0),n(void 0);const c=await(await Fe()).connect({requiredNamespaces:{aleo:{methods:ms,chains:gi,events:ws}}});return e(c),Xr.emit("session_change"),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE"),c}catch(a){throw n(a),a}finally{s(!1)}}return{data:t,error:r,loading:i,connect:o}}function Ir(t){const[e,r]=fe.useState(void 0),[n,i]=fe.useState(void 0),[s,o]=fe.useState(!1);async function a(c){try{o(!0),i(void 0);const d=await(await Fe()).request(c??t);return r(d),d}catch(u){throw i(u),u}finally{o(!1)}}return{data:e,error:n,loading:s,request:a}}const Cb=t=>{const e=Gt(),r=t==null?void 0:t.inputs.map(d=>typeof d=="string"?d:d.plaintext),{request:n,data:i,error:s,loading:o}=Ir({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{id:1,jsonrpc:"2.0",method:"requestCreateEvent",params:{...t,inputs:r}}}),a=s?s.message:i&&i.error,c=i;return{createEvent:()=>{t&&n()},eventID:c==null?void 0:c.eventId,loading:o,error:a}},Db=()=>{const t=Gt(),{request:e,data:r,error:n,loading:i}=Ir({topic:(t==null?void 0:t.topic)??"",chainId:"aleo:1",request:{id:1,jsonrpc:"2.0",method:"createSharedState",params:{}}}),s=n?n.message:r&&r.error,o=r;return{createSharedState:()=>{e()},data:o==null?void 0:o.data,loading:i,error:s}};var fa={exports:{}},pa,Ph;function Ib(){if(Ph)return pa;Ph=1;var t=1e3,e=t*60,r=e*60,n=r*24,i=n*7,s=n*365.25;pa=function(d,f){f=f||{};var g=typeof d;if(g==="string"&&d.length>0)return o(d);if(g==="number"&&isFinite(d))return f.long?c(d):a(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function o(d){if(d=String(d),!(d.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(f){var g=parseFloat(f[1]),y=(f[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return g*s;case"weeks":case"week":case"w":return g*i;case"days":case"day":case"d":return g*n;case"hours":case"hour":case"hrs":case"hr":case"h":return g*r;case"minutes":case"minute":case"mins":case"min":case"m":return g*e;case"seconds":case"second":case"secs":case"sec":case"s":return g*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function a(d){var f=Math.abs(d);return f>=n?Math.round(d/n)+"d":f>=r?Math.round(d/r)+"h":f>=e?Math.round(d/e)+"m":f>=t?Math.round(d/t)+"s":d+"ms"}function c(d){var f=Math.abs(d);return f>=n?u(d,f,n,"day"):f>=r?u(d,f,r,"hour"):f>=e?u(d,f,e,"minute"):f>=t?u(d,f,t,"second"):d+" ms"}function u(d,f,g,y){var _=f>=g*1.5;return Math.round(d/g)+" "+y+(_?"s":"")}return pa}function Ob(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=Ib(),r.destroy=u,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let f=0;for(let g=0;g<d.length;g++)f=(f<<5)-f+d.charCodeAt(g),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(d){let f,g=null,y,_;function b(...C){if(!b.enabled)return;const I=b,v=Number(new Date),E=v-(f||v);I.diff=E,I.prev=f,I.curr=v,f=v,C[0]=r.coerce(C[0]),typeof C[0]!="string"&&C.unshift("%O");let w=0;C[0]=C[0].replace(/%([a-zA-Z%])/g,(p,l)=>{if(p==="%%")return"%";w++;const m=r.formatters[l];if(typeof m=="function"){const R=C[w];p=m.call(I,R),C.splice(w,1),w--}return p}),r.formatArgs.call(I,C),(I.log||r.log).apply(I,C)}return b.namespace=d,b.useColors=r.useColors(),b.color=r.selectColor(d),b.extend=n,b.destroy=r.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(y!==r.namespaces&&(y=r.namespaces,_=r.enabled(d)),_),set:C=>{g=C}}),typeof r.init=="function"&&r.init(b),b}function n(d,f){const g=r(this.namespace+(typeof f>"u"?":":f)+d);return g.log=this.log,g}function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let f;const g=(typeof d=="string"?d:"").split(/[\s,]+/),y=g.length;for(f=0;f<y;f++)g[f]&&(d=g[f].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function s(){const d=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),d}function o(d){if(d[d.length-1]==="*")return!0;let f,g;for(f=0,g=r.skips.length;f<g;f++)if(r.skips[f].test(d))return!1;for(f=0,g=r.names.length;f<g;f++)if(r.names[f].test(d))return!0;return!1}function a(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function c(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var Ab=Ob;(function(t,e){e.formatArgs=n,e.save=i,e.load=s,e.useColors=r,e.storage=o(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let d=0,f=0;c[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(d++,g==="%c"&&(f=d))}),c.splice(f,0,u)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function s(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function o(){try{return localStorage}catch{}}t.exports=Ab(e);const{formatters:a}=t.exports;a.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(fa,fa.exports);var $b=fa.exports;const ga=Hi($b)("wallet:sdk");ga.enabled=!0;const Tb=t=>{ga("useDecrypt",t);const e=Gt(),{request:r,data:n,error:i,loading:s}=Ir({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{id:1,jsonrpc:"2.0",method:"decrypt",params:{ciphertexts:t}}}),o=i?i.message:n&&n.error,a=n;return{decrypt:()=>{t&&r()},plaintexts:a==null?void 0:a.plaintexts,loading:s,error:o}};function Rb(){const t=Gt(),[e,r]=fe.useState(),[n,i]=fe.useState(!1);async function s(){try{i(!0),r(void 0),await(await Fe()).disconnect({topic:t==null?void 0:t.topic,reason:Qe("USER_DISCONNECTED")}),Xr.emit("session_change"),wi.setState({account:void 0})}catch(o){throw r(o),o}finally{i(!1)}}return{error:e,loading:n,disconnect:s}}const Pb=({filter:t,page:e})=>{const r=Gt(),{account:n}=da();(t==null?void 0:t.programId)===""&&(t.programId=void 0);const{request:i,data:s,error:o,loading:a}=Ir({topic:(r==null?void 0:r.topic)??"",chainId:"aleo:1",request:{id:1,jsonrpc:"2.0",method:"getEvents",params:{filter:t,page:e}}});vi(({id:_,params:b,topic:C})=>{b.event.name==="accountSynced"&&r&&r.topic===C&&!a&&i()});const c=!!r&&!!n;fe.useEffect(()=>{c&&!a&&i()},[c,n]);const u=()=>{!!r&&!!n&&!a&&i()},d=o?o.message:s&&s.error,f=s,g=f==null?void 0:f.events,y=(f==null?void 0:f.pageCount)??0;return{fetchPage:u,events:g,error:d,loading:a,page:e,pageCount:y}},Nb=t=>{const e=Gt(),{request:r,data:n,error:i,loading:s}=Ir({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{id:1,jsonrpc:"2.0",method:"importSharedState",params:{seed:t}}}),o=i?i.message:n&&n.error,a=n;return{importSharedState:()=>{r()},data:a==null?void 0:a.data,loading:s,error:o}},Lb=t=>{try{return JSON.stringify(t,null,2).replaceAll('"',"")??""}catch{return""}},Mb=({address:t,filter:e})=>{const r=Gt(),{account:n}=da(),[i,s]=fe.useState(0),[o,a]=fe.useState([]),[c,u]=fe.useState(!0),d=fe.useMemo(()=>!!r&&!!n,[r,n]);(e==null?void 0:e.programId)===""&&(e.programId=void 0),console.log("filter, page",{filter:e,page:i});const{request:f,data:g,error:y}=Ir({topic:r==null?void 0:r.topic,chainId:"aleo:1",request:{id:1,jsonrpc:"2.0",method:"getRecords",params:{address:t,filter:e,page:i}}}),_=y?y.message:g&&g.error,b=g,C=(b==null?void 0:b.pageCount)??0,I=fe.useCallback(async()=>{f()},[f]);fe.useEffect(()=>{d&&c&&(console.log("running request"),I())},[i,d,c]),fe.useEffect(()=>{console.log("response useEffect"),g?(console.log("fetched records",g.records),a(E=>[...E,...g.records]),i<g.pageCount-1?(console.log("setting page",i+1),s(E=>E+1)):(console.log("done"),u(!1))):console.log("could not fetch records",g)},[g]),vi(({params:E,topic:w})=>{E.event.name==="accountSynced"&&r&&r.topic===w&&!c&&v()});const v=()=>{u(!0),a([]),s(0)};return{records:o,error:_,loading:i!==C-1,refetch:v}},Ub=t=>{const e=Gt(),r=t==null?void 0:t.inputs.map(d=>typeof d=="string"?d:d.plaintext),{request:n,data:i,error:s,loading:o}=Ir({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{id:1,jsonrpc:"2.0",method:"requestCreateEvent",params:{...t,inputs:r}}}),a=s?s.message:i&&i.error,c=i;return{requestCreateEvent:()=>{t&&(ga("useRequestCreateEvent requesting...",t),n())},eventId:c==null?void 0:c.eventId,error:a,loading:o}},Fb=(t,e)=>{const r=Gt(),{request:n,data:i,error:s,loading:o}=Ir({topic:(r==null?void 0:r.topic)??"",chainId:"aleo:1",request:{id:1,jsonrpc:"2.0",method:"requestSignature",params:{message:t,address:e}}}),a=s?s.message:i&&i.error;return{requestSignature:()=>{n()},response:i,loading:o,error:a}},jb=async()=>{const t=await Fe(),e=await t.getSession(),r="aleo:1";if(!e||!r||!t)return{error:"no session, chainId, or connection"};try{const n=await t.request({topic:e==null?void 0:e.topic,chainId:r,request:{id:1,jsonrpc:"2.0",method:"getSelectedAccount"}});return wi.setState({account:n.account}),n}catch(n){const i=n.message;return console.error("getAccount error",i),{error:i}}},kb=async()=>{const t=await Fe(),e=await t.getSession(),r="aleo:1";if(!e||!r||!t)return{error:"no session, chainId, or connection"};try{return await t.request({topic:e==null?void 0:e.topic,chainId:r,request:{id:1,jsonrpc:"2.0",method:"getBalance",params:{assetId:void 0}}})}catch(n){const i=n.message;return console.error("getBalance error",i),{error:i}}},Bb=async()=>{const t=await Fe();if(!t)throw new Error("call setConnection() first!");try{const e=await t.connect({requiredNamespaces:{aleo:{methods:ms,chains:gi,events:ws}}});return Xr.emit("session_change"),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE"),e}catch(e){console.error("connect error",e.message)}},zb=async t=>{const e=await Fe(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};const i=t==null?void 0:t.inputs.map(s=>typeof s=="string"?s:s.plaintext);try{return await e.request({topic:r.topic,chainId:n,request:{id:1,jsonrpc:"2.0",method:"requestCreateEvent",params:{...t,inputs:i}}})}catch(s){const o=s.message;return console.error("createEvent error",o),{error:o}}},qb=async()=>{const t=await Fe(),e=await(t==null?void 0:t.getSession()),r="aleo:1";if(!e||!r||!t)return{error:"no session, chainId, or connection"};try{return await t.request({topic:e.topic,chainId:r,request:{id:1,jsonrpc:"2.0",method:"createSharedState",params:{}}})}catch(n){const i=n.message;return console.error("createSharedState error",i),{error:i}}},Hb=async t=>{const e=await Fe(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};try{return await e.request({topic:r.topic,chainId:n,request:{id:1,jsonrpc:"2.0",method:"decrypt",params:{ciphertexts:t}}})}catch(i){return console.error("decrypt error",i.message),{error:i.message}}},Wb=async()=>{const t=await Fe(),e=await(t==null?void 0:t.getSession());if(!e||!t)return{error:"no session, or connection"};try{return await t.disconnect({reason:Qe("USER_DISCONNECTED"),topic:e.topic}),Xr.emit("session_change"),wi.setState({account:void 0}),{}}catch(r){const n=r.message;return console.error("error disconnecting",n),{error:n}}},Vb=async t=>{const e=await Fe(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{events:void 0,error:"no session, chainId, or connection"};(t==null?void 0:t.programId)===""&&(t.programId=void 0);const i=async(s=0)=>await e.request({topic:(r==null?void 0:r.topic)??"",chainId:n,request:{id:1,jsonrpc:"2.0",method:"getEvents",params:{filter:t,page:s}}});try{return await i()}catch(s){const o=s.message;return console.error("getEvents error",o),{error:o}}},Kb=async t=>{const e=await Fe(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};try{return await e.request({topic:(r==null?void 0:r.topic)??"",chainId:n,request:{id:1,jsonrpc:"2.0",method:"importSharedState",params:{seed:t}}})}catch(i){const s=i.message;return console.error("importSharedState error",s),{error:s}}},Gb=async({address:t,filter:e,page:r=0})=>{const n=await Fe(),i=await(n==null?void 0:n.getSession()),s="aleo:1";if(!i||!s||!n)return{error:"no session, chainId, or connection"};(e==null?void 0:e.programId)===""&&(e.programId=void 0);const o=async(a=0)=>await n.request({topic:i.topic,chainId:s,request:{id:1,jsonrpc:"2.0",method:"getRecords",params:{address:t,filter:e,page:a}}});try{return await o()}catch(a){const c=a.message;return console.error("getRecords error",c),{error:c}}},Yb=async({message:t,address:e})=>{const r=await Fe(),n=await(r==null?void 0:r.getSession()),i="aleo:1";if(!n||!i||!r)return{error:"no session, chainId, or connection"};try{return await r.request({topic:n.topic,chainId:i,request:{id:1,jsonrpc:"2.0",method:"requestSignature",params:{message:t,address:e}}})}catch(s){const o=s.message;return console.error("signature error",o),{error:o}}},Jb=50,Zb=["wc@2:client:0.3//proposal","wc@2:core:0.3//subscription","wc@2:core:0.3//keychain","wc@2:core:0.3//messages","wc@2:core:0.3//history","wc@2:client:0.3//session","wc@2:core:0.3//expirer","WCM_WALLETCONNECT_CLIENT_ID","wc@2:core:0.3//pairing","debug"],Nh=of.version;try{const t=localStorage.getItem("puzzle-sdk-version");Nh!==t&&(Zb.forEach(e=>{localStorage.removeItem(e)}),localStorage.setItem("puzzle-sdk-version",Nh))}catch(t){console.error(t)}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const bs=window,ma=bs.ShadowRoot&&(bs.ShadyCSS===void 0||bs.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,wa=Symbol(),Lh=new WeakMap;let Mh=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==wa)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(ma&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=Lh.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&Lh.set(r,e))}return e}toString(){return this.cssText}};const Qb=t=>new Mh(typeof t=="string"?t:t+"",void 0,wa),$e=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,i,s)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new Mh(r,t,wa)},Xb=(t,e)=>{ma?t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet):e.forEach(r=>{const n=document.createElement("style"),i=bs.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)})},Uh=ma?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return Qb(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var ya;const _s=window,Fh=_s.trustedTypes,e2=Fh?Fh.emptyScript:"",jh=_s.reactiveElementPolyfillSupport,va={toAttribute(t,e){switch(e){case Boolean:t=t?e2:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},kh=(t,e)=>e!==t&&(e==e||t==t),ba={attribute:!0,type:String,converter:va,reflect:!1,hasChanged:kh},_a="finalized";let xn=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var r;this.finalize(),((r=this.h)!==null&&r!==void 0?r:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((r,n)=>{const i=this._$Ep(n,r);i!==void 0&&(this._$Ev.set(i,n),e.push(i))}),e}static createProperty(e,r=ba){if(r.state&&(r.attribute=!1),this.finalize(),this.elementProperties.set(e,r),!r.noAccessor&&!this.prototype.hasOwnProperty(e)){const n=typeof e=="symbol"?Symbol():"__"+e,i=this.getPropertyDescriptor(e,n,r);i!==void 0&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){return{get(){return this[r]},set(i){const s=this[e];this[r]=i,this.requestUpdate(e,s,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||ba}static finalize(){if(this.hasOwnProperty(_a))return!1;this[_a]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const r=this.properties,n=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(const i of n)this.createProperty(i,r[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const i of n)r.unshift(Uh(i))}else e!==void 0&&r.push(Uh(e));return r}static _$Ep(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(r=>r(this))}addController(e){var r,n;((r=this._$ES)!==null&&r!==void 0?r:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)===null||n===void 0||n.call(e))}removeController(e){var r;(r=this._$ES)===null||r===void 0||r.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,r)=>{this.hasOwnProperty(r)&&(this._$Ei.set(r,this[r]),delete this[r])})}createRenderRoot(){var e;const r=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return Xb(r,this.constructor.elementStyles),r}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostConnected)===null||n===void 0?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostDisconnected)===null||n===void 0?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$EO(e,r,n=ba){var i;const s=this.constructor._$Ep(e,n);if(s!==void 0&&n.reflect===!0){const o=(((i=n.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?n.converter:va).toAttribute(r,n.type);this._$El=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$El=null}}_$AK(e,r){var n;const i=this.constructor,s=i._$Ev.get(e);if(s!==void 0&&this._$El!==s){const o=i.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((n=o.converter)===null||n===void 0?void 0:n.fromAttribute)!==void 0?o.converter:va;this._$El=s,this[s]=a.fromAttribute(r,o.type),this._$El=null}}requestUpdate(e,r,n){let i=!0;e!==void 0&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||kh)(this[e],r)?(this._$AL.has(e)||this._$AL.set(e,r),n.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,s)=>this[s]=i),this._$Ei=void 0);let r=!1;const n=this._$AL;try{r=this.shouldUpdate(n),r?(this.willUpdate(n),(e=this._$ES)===null||e===void 0||e.forEach(i=>{var s;return(s=i.hostUpdate)===null||s===void 0?void 0:s.call(i)}),this.update(n)):this._$Ek()}catch(i){throw r=!1,this._$Ek(),i}r&&this._$AE(n)}willUpdate(e){}_$AE(e){var r;(r=this._$ES)===null||r===void 0||r.forEach(n=>{var i;return(i=n.hostUpdated)===null||i===void 0?void 0:i.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((r,n)=>this._$EO(n,this[n],r)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};xn[_a]=!0,xn.elementProperties=new Map,xn.elementStyles=[],xn.shadowRootOptions={mode:"open"},jh==null||jh({ReactiveElement:xn}),((ya=_s.reactiveElementVersions)!==null&&ya!==void 0?ya:_s.reactiveElementVersions=[]).push("1.6.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Ea;const Es=window,Cn=Es.trustedTypes,Bh=Cn?Cn.createPolicy("lit-html",{createHTML:t=>t}):void 0,Sa="$lit$",Or=`lit$${(Math.random()+"").slice(9)}$`,zh="?"+Or,t2=`<${zh}>`,en=document,bi=()=>en.createComment(""),_i=t=>t===null||typeof t!="object"&&typeof t!="function",qh=Array.isArray,r2=t=>qh(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",xa=`[ 	
\f\r]`,Ei=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Hh=/-->/g,Wh=/>/g,tn=RegExp(`>|${xa}(?:([^\\s"'>=/]+)(${xa}*=${xa}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Vh=/'/g,Kh=/"/g,Gh=/^(?:script|style|textarea|title)$/i,Yh=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),Y=Yh(1),He=Yh(2),rn=Symbol.for("lit-noChange"),it=Symbol.for("lit-nothing"),Jh=new WeakMap,nn=en.createTreeWalker(en,129,null,!1);function Zh(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Bh!==void 0?Bh.createHTML(e):e}const n2=(t,e)=>{const r=t.length-1,n=[];let i,s=e===2?"<svg>":"",o=Ei;for(let a=0;a<r;a++){const c=t[a];let u,d,f=-1,g=0;for(;g<c.length&&(o.lastIndex=g,d=o.exec(c),d!==null);)g=o.lastIndex,o===Ei?d[1]==="!--"?o=Hh:d[1]!==void 0?o=Wh:d[2]!==void 0?(Gh.test(d[2])&&(i=RegExp("</"+d[2],"g")),o=tn):d[3]!==void 0&&(o=tn):o===tn?d[0]===">"?(o=i??Ei,f=-1):d[1]===void 0?f=-2:(f=o.lastIndex-d[2].length,u=d[1],o=d[3]===void 0?tn:d[3]==='"'?Kh:Vh):o===Kh||o===Vh?o=tn:o===Hh||o===Wh?o=Ei:(o=tn,i=void 0);const y=o===tn&&t[a+1].startsWith("/>")?" ":"";s+=o===Ei?c+t2:f>=0?(n.push(u),c.slice(0,f)+Sa+c.slice(f)+Or+y):c+Or+(f===-2?(n.push(void 0),a):y)}return[Zh(t,s+(t[r]||"<?>")+(e===2?"</svg>":"")),n]};class Si{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[u,d]=n2(e,r);if(this.el=Si.createElement(u,n),nn.currentNode=this.el.content,r===2){const f=this.el.content,g=f.firstChild;g.remove(),f.append(...g.childNodes)}for(;(i=nn.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes()){const f=[];for(const g of i.getAttributeNames())if(g.endsWith(Sa)||g.startsWith(Or)){const y=d[o++];if(f.push(g),y!==void 0){const _=i.getAttribute(y.toLowerCase()+Sa).split(Or),b=/([.?@])?(.*)/.exec(y);c.push({type:1,index:s,name:b[2],strings:_,ctor:b[1]==="."?s2:b[1]==="?"?a2:b[1]==="@"?c2:Ss})}else c.push({type:6,index:s})}for(const g of f)i.removeAttribute(g)}if(Gh.test(i.tagName)){const f=i.textContent.split(Or),g=f.length-1;if(g>0){i.textContent=Cn?Cn.emptyScript:"";for(let y=0;y<g;y++)i.append(f[y],bi()),nn.nextNode(),c.push({type:2,index:++s});i.append(f[g],bi())}}}else if(i.nodeType===8)if(i.data===zh)c.push({type:2,index:s});else{let f=-1;for(;(f=i.data.indexOf(Or,f+1))!==-1;)c.push({type:7,index:s}),f+=Or.length-1}s++}}static createElement(e,r){const n=en.createElement("template");return n.innerHTML=e,n}}function Dn(t,e,r=t,n){var i,s,o,a;if(e===rn)return e;let c=n!==void 0?(i=r._$Co)===null||i===void 0?void 0:i[n]:r._$Cl;const u=_i(e)?void 0:e._$litDirective$;return(c==null?void 0:c.constructor)!==u&&((s=c==null?void 0:c._$AO)===null||s===void 0||s.call(c,!1),u===void 0?c=void 0:(c=new u(t),c._$AT(t,r,n)),n!==void 0?((o=(a=r)._$Co)!==null&&o!==void 0?o:a._$Co=[])[n]=c:r._$Cl=c),c!==void 0&&(e=Dn(t,c._$AS(t,e.values),c,n)),e}class i2{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var r;const{el:{content:n},parts:i}=this._$AD,s=((r=e==null?void 0:e.creationScope)!==null&&r!==void 0?r:en).importNode(n,!0);nn.currentNode=s;let o=nn.nextNode(),a=0,c=0,u=i[0];for(;u!==void 0;){if(a===u.index){let d;u.type===2?d=new xi(o,o.nextSibling,this,e):u.type===1?d=new u.ctor(o,u.name,u.strings,this,e):u.type===6&&(d=new l2(o,this,e)),this._$AV.push(d),u=i[++c]}a!==(u==null?void 0:u.index)&&(o=nn.nextNode(),a++)}return nn.currentNode=en,s}v(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class xi{constructor(e,r,n,i){var s;this.type=2,this._$AH=it,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cp=(s=i==null?void 0:i.isConnected)===null||s===void 0||s}get _$AU(){var e,r;return(r=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&r!==void 0?r:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Dn(this,e,r),_i(e)?e===it||e==null||e===""?(this._$AH!==it&&this._$AR(),this._$AH=it):e!==this._$AH&&e!==rn&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):r2(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==it&&_i(this._$AH)?this._$AA.nextSibling.data=e:this.$(en.createTextNode(e)),this._$AH=e}g(e){var r;const{values:n,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=Si.createElement(Zh(i.h,i.h[0]),this.options)),i);if(((r=this._$AH)===null||r===void 0?void 0:r._$AD)===s)this._$AH.v(n);else{const o=new i2(s,this),a=o.u(this.options);o.v(n),this.$(a),this._$AH=o}}_$AC(e){let r=Jh.get(e.strings);return r===void 0&&Jh.set(e.strings,r=new Si(e)),r}T(e){qh(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const s of e)i===r.length?r.push(n=new xi(this.k(bi()),this.k(bi()),this,this.options)):n=r[i],n._$AI(s),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,r);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var r;this._$AM===void 0&&(this._$Cp=e,(r=this._$AP)===null||r===void 0||r.call(this,e))}}class Ss{constructor(e,r,n,i,s){this.type=1,this._$AH=it,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=it}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,r=this,n,i){const s=this.strings;let o=!1;if(s===void 0)e=Dn(this,e,r,0),o=!_i(e)||e!==this._$AH&&e!==rn,o&&(this._$AH=e);else{const a=e;let c,u;for(e=s[0],c=0;c<s.length-1;c++)u=Dn(this,a[n+c],r,c),u===rn&&(u=this._$AH[c]),o||(o=!_i(u)||u!==this._$AH[c]),u===it?e=it:e!==it&&(e+=(u??"")+s[c+1]),this._$AH[c]=u}o&&!i&&this.j(e)}j(e){e===it?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class s2 extends Ss{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===it?void 0:e}}const o2=Cn?Cn.emptyScript:"";let a2=class extends Ss{constructor(){super(...arguments),this.type=4}j(e){e&&e!==it?this.element.setAttribute(this.name,o2):this.element.removeAttribute(this.name)}};class c2 extends Ss{constructor(e,r,n,i,s){super(e,r,n,i,s),this.type=5}_$AI(e,r=this){var n;if((e=(n=Dn(this,e,r,0))!==null&&n!==void 0?n:it)===rn)return;const i=this._$AH,s=e===it&&i!==it||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,o=e!==it&&(i===it||s);s&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,n;typeof this._$AH=="function"?this._$AH.call((n=(r=this.options)===null||r===void 0?void 0:r.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}let l2=class{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Dn(this,e)}};const Qh=Es.litHtmlPolyfillSupport;Qh==null||Qh(Si,xi),((Ea=Es.litHtmlVersions)!==null&&Ea!==void 0?Ea:Es.litHtmlVersions=[]).push("2.8.0");const u2=(t,e,r)=>{var n,i;const s=(n=r==null?void 0:r.renderBefore)!==null&&n!==void 0?n:e;let o=s._$litPart$;if(o===void 0){const a=(i=r==null?void 0:r.renderBefore)!==null&&i!==void 0?i:null;s._$litPart$=o=new xi(e.insertBefore(bi(),a),a,void 0,r??{})}return o._$AI(t),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Ca,Da;class pe extends xn{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,r;const n=super.createRenderRoot();return(e=(r=this.renderOptions).renderBefore)!==null&&e!==void 0||(r.renderBefore=n.firstChild),n}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=u2(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return rn}}pe.finalized=!0,pe._$litElement$=!0,(Ca=globalThis.litElementHydrateSupport)===null||Ca===void 0||Ca.call(globalThis,{LitElement:pe});const Xh=globalThis.litElementPolyfillSupport;Xh==null||Xh({LitElement:pe}),((Da=globalThis.litElementVersions)!==null&&Da!==void 0?Da:globalThis.litElementVersions=[]).push("3.3.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const xe=t=>e=>typeof e=="function"?((r,n)=>(customElements.define(r,n),n))(t,e):((r,n)=>{const{kind:i,elements:s}=n;return{kind:i,elements:s,finisher(o){customElements.define(r,o)}}})(t,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const h2=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(r){r.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}},d2=(t,e,r)=>{e.constructor.createProperty(r,t)};function le(t){return(e,r)=>r!==void 0?d2(t,e,r):h2(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Mt(t){return le({...t,state:!0})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Ia;((Ia=window.HTMLSlotElement)===null||Ia===void 0?void 0:Ia.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const f2={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},p2=t=>(...e)=>({_$litDirective$:t,values:e});class g2{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,n){this._$Ct=e,this._$AM=r,this._$Ci=n}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const gr=p2(class extends g2{constructor(t){var e;if(super(t),t.type!==f2.ATTRIBUTE||t.name!=="class"||((e=t.strings)===null||e===void 0?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,n;if(this.it===void 0){this.it=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!(!((r=this.nt)===null||r===void 0)&&r.has(s))&&this.it.add(s);return this.render(e)}const i=t.element.classList;this.it.forEach(s=>{s in e||(i.remove(s),this.it.delete(s))});for(const s in e){const o=!!e[s];o===this.it.has(s)||!((n=this.nt)===null||n===void 0)&&n.has(s)||(o?(i.add(s),this.it.add(s)):(i.remove(s),this.it.delete(s)))}return rn}});function m2(t,e){t.indexOf(e)===-1&&t.push(e)}const ed=(t,e,r)=>Math.min(Math.max(r,t),e),Yt={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},xs=t=>typeof t=="number",In=t=>Array.isArray(t)&&!xs(t[0]),w2=(t,e,r)=>{const n=e-t;return((r-t)%n+n)%n+t};function y2(t,e){return In(t)?t[w2(0,t.length,e)]:t}const td=(t,e,r)=>-r*t+r*e+t,rd=()=>{},Ar=t=>t,Oa=(t,e,r)=>e-t===0?1:(r-t)/(e-t);function nd(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=Oa(0,e,n);t.push(td(r,1,i))}}function v2(t){const e=[0];return nd(e,t-1),e}function b2(t,e=v2(t.length),r=Ar){const n=t.length,i=n-e.length;return i>0&&nd(e,i),s=>{let o=0;for(;o<n-2&&!(s<e[o+1]);o++);let a=ed(0,1,Oa(e[o],e[o+1],s));return a=y2(r,o)(a),td(t[o],t[o+1],a)}}const id=t=>Array.isArray(t)&&xs(t[0]),Aa=t=>typeof t=="object"&&!!t.createAnimation,On=t=>typeof t=="function",_2=t=>typeof t=="string",Ci={ms:t=>t*1e3,s:t=>t/1e3},sd=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,E2=1e-7,S2=12;function x2(t,e,r,n,i){let s,o,a=0;do o=e+(r-e)/2,s=sd(o,n,i)-t,s>0?r=o:e=o;while(Math.abs(s)>E2&&++a<S2);return o}function Di(t,e,r,n){if(t===e&&r===n)return Ar;const i=s=>x2(s,0,1,t,r);return s=>s===0||s===1?s:sd(i(s),e,n)}const C2=(t,e="end")=>r=>{r=e==="end"?Math.min(r,.999):Math.max(r,.001);const n=r*t,i=e==="end"?Math.floor(n):Math.ceil(n);return ed(0,1,i/t)},od={ease:Di(.25,.1,.25,1),"ease-in":Di(.42,0,1,1),"ease-in-out":Di(.42,0,.58,1),"ease-out":Di(0,0,.58,1)},D2=/\((.*?)\)/;function ad(t){if(On(t))return t;if(id(t))return Di(...t);if(od[t])return od[t];if(t.startsWith("steps")){const e=D2.exec(t);if(e){const r=e[1].split(",");return C2(parseFloat(r[0]),r[1].trim())}}return Ar}class cd{constructor(e,r=[0,1],{easing:n,duration:i=Yt.duration,delay:s=Yt.delay,endDelay:o=Yt.endDelay,repeat:a=Yt.repeat,offset:c,direction:u="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=Ar,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((f,g)=>{this.resolve=f,this.reject=g}),n=n||Yt.easing,Aa(n)){const f=n.createAnimation(r);n=f.easing,r=f.keyframes||r,i=f.duration||i}this.repeat=a,this.easing=In(n)?Ar:ad(n),this.updateDuration(i);const d=b2(r,c,In(n)?n.map(ad):Ar);this.tick=f=>{var g;s=s;let y=0;this.pauseTime!==void 0?y=this.pauseTime:y=(f-this.startTime)*this.rate,this.t=y,y/=1e3,y=Math.max(y-s,0),this.playState==="finished"&&this.pauseTime===void 0&&(y=this.totalDuration);const _=y/this.duration;let b=Math.floor(_),C=_%1;!C&&_>=1&&(C=1),C===1&&b--;const I=b%2;(u==="reverse"||u==="alternate"&&I||u==="alternate-reverse"&&!I)&&(C=1-C);const v=y>=this.totalDuration?1:Math.min(C,1),E=d(this.easing(v));e(E),this.pauseTime===void 0&&(this.playState==="finished"||y>=this.totalDuration+o)?(this.playState="finished",(g=this.resolve)===null||g===void 0||g.call(this,E)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const e=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(e=this.reject)===null||e===void 0||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){this.pauseTime!==void 0||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}var $a=function(){};process.env.NODE_ENV!=="production"&&($a=function(t,e){if(!t)throw new Error(e)});class I2{setAnimation(e){this.animation=e,e==null||e.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const Ta=new WeakMap;function ld(t){return Ta.has(t)||Ta.set(t,{transforms:[],values:new Map}),Ta.get(t)}function O2(t,e){return t.has(e)||t.set(e,new I2),t.get(e)}const A2=["","X","Y","Z"],$2=["translate","scale","rotate","skew"],Cs={x:"translateX",y:"translateY",z:"translateZ"},ud={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},T2={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:ud,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:Ar},skew:ud},Ii=new Map,Ra=t=>`--motion-${t}`,Ds=["x","y","z"];$2.forEach(t=>{A2.forEach(e=>{Ds.push(t+e),Ii.set(Ra(t+e),T2[t])})});const R2=(t,e)=>Ds.indexOf(t)-Ds.indexOf(e),P2=new Set(Ds),hd=t=>P2.has(t),N2=(t,e)=>{Cs[e]&&(e=Cs[e]);const{transforms:r}=ld(t);m2(r,e),t.style.transform=L2(r)},L2=t=>t.sort(R2).reduce(M2,"").trim(),M2=(t,e)=>`${t} ${e}(var(${Ra(e)}))`,Pa=t=>t.startsWith("--"),dd=new Set;function U2(t){if(!dd.has(t)){dd.add(t);try{const{syntax:e,initialValue:r}=Ii.has(t)?Ii.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:r})}catch{}}}const Na=(t,e)=>document.createElement("div").animate(t,e),fd={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{Na({opacity:[1]})}catch{return!1}return!0},finished:()=>!!Na({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{Na({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},La={},An={};for(const t in fd)An[t]=()=>(La[t]===void 0&&(La[t]=fd[t]()),La[t]);const F2=.015,j2=(t,e)=>{let r="";const n=Math.round(e/F2);for(let i=0;i<n;i++)r+=t(Oa(0,n-1,i))+", ";return r.substring(0,r.length-2)},pd=(t,e)=>On(t)?An.linearEasing()?`linear(${j2(t,e)})`:Yt.easing:id(t)?k2(t):t,k2=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`;function B2(t,e){for(let r=0;r<t.length;r++)t[r]===null&&(t[r]=r?t[r-1]:e());return t}const z2=t=>Array.isArray(t)?t:[t];function Ma(t){return Cs[t]&&(t=Cs[t]),hd(t)?Ra(t):t}const Is={get:(t,e)=>{e=Ma(e);let r=Pa(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!r&&r!==0){const n=Ii.get(e);n&&(r=n.initialValue)}return r},set:(t,e,r)=>{e=Ma(e),Pa(e)?t.style.setProperty(e,r):t.style[e]=r}};function gd(t,e=!0){if(!(!t||t.playState==="finished"))try{t.stop?t.stop():(e&&t.commitStyles(),t.cancel())}catch{}}function q2(t,e){var r;let n=(e==null?void 0:e.toDefaultUnit)||Ar;const i=t[t.length-1];if(_2(i)){const s=((r=i.match(/(-?[\d.]+)([a-z%]*)/))===null||r===void 0?void 0:r[2])||"";s&&(n=o=>o+s)}return n}function H2(){return window.__MOTION_DEV_TOOLS_RECORD}function W2(t,e,r,n={},i){const s=H2(),o=n.record!==!1&&s;let a,{duration:c=Yt.duration,delay:u=Yt.delay,endDelay:d=Yt.endDelay,repeat:f=Yt.repeat,easing:g=Yt.easing,persist:y=!1,direction:_,offset:b,allowWebkitAcceleration:C=!1}=n;const I=ld(t),v=hd(e);let E=An.waapi();v&&N2(t,e);const w=Ma(e),x=O2(I.values,w),p=Ii.get(w);return gd(x.animation,!(Aa(g)&&x.generator)&&n.record!==!1),()=>{const l=()=>{var O,M;return(M=(O=Is.get(t,w))!==null&&O!==void 0?O:p==null?void 0:p.initialValue)!==null&&M!==void 0?M:0};let m=B2(z2(r),l);const R=q2(m,p);if(Aa(g)){const O=g.createAnimation(m,e!=="opacity",l,w,x);g=O.easing,m=O.keyframes||m,c=O.duration||c}if(Pa(w)&&(An.cssRegisterProperty()?U2(w):E=!1),v&&!An.linearEasing()&&(On(g)||In(g)&&g.some(On))&&(E=!1),E){p&&(m=m.map(k=>xs(k)?p.toDefaultUnit(k):k)),m.length===1&&(!An.partialKeyframes()||o)&&m.unshift(l());const O={delay:Ci.ms(u),duration:Ci.ms(c),endDelay:Ci.ms(d),easing:In(g)?void 0:pd(g,c),direction:_,iterations:f+1,fill:"both"};a=t.animate({[w]:m,offset:b,easing:In(g)?g.map(k=>pd(k,c)):void 0},O),a.finished||(a.finished=new Promise((k,W)=>{a.onfinish=k,a.oncancel=W}));const M=m[m.length-1];a.finished.then(()=>{y||(Is.set(t,w,M),a.cancel())}).catch(rd),C||(a.playbackRate=1.000001)}else if(i&&v)m=m.map(O=>typeof O=="string"?parseFloat(O):O),m.length===1&&m.unshift(parseFloat(l())),a=new i(O=>{Is.set(t,w,R?R(O):O)},m,Object.assign(Object.assign({},n),{duration:c,easing:g}));else{const O=m[m.length-1];Is.set(t,w,p&&xs(O)?p.toDefaultUnit(O):O)}return o&&s(t,e,m,{duration:c,delay:u,easing:g,repeat:f,offset:b},"motion-one"),x.setAnimation(a),a}}const V2=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);function K2(t,e){var r;return typeof t=="string"?e?((r=e[t])!==null&&r!==void 0||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t||[])}const G2=t=>t(),md=(t,e,r=Yt.duration)=>new Proxy({animations:t.map(G2).filter(Boolean),duration:r,options:e},J2),Y2=t=>t.animations[0],J2={get:(t,e)=>{const r=Y2(t);switch(e){case"duration":return t.duration;case"currentTime":return Ci.s((r==null?void 0:r[e])||0);case"playbackRate":case"playState":return r==null?void 0:r[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(Z2)).catch(rd)),t.finished;case"stop":return()=>{t.animations.forEach(n=>gd(n))};case"forEachNative":return n=>{t.animations.forEach(i=>n(i,t))};default:return typeof(r==null?void 0:r[e])>"u"?void 0:()=>t.animations.forEach(n=>n[e]())}},set:(t,e,r)=>{switch(e){case"currentTime":r=Ci.ms(r);case"currentTime":case"playbackRate":for(let n=0;n<t.animations.length;n++)t.animations[n][e]=r;return!0}return!1}},Z2=t=>t.finished;function Q2(t,e,r){return On(t)?t(e,r):t}function X2(t){return function(r,n,i={}){r=K2(r);const s=r.length;$a(!!s,"No valid element provided."),$a(!!n,"No keyframes defined.");const o=[];for(let a=0;a<s;a++){const c=r[a];for(const u in n){const d=V2(i,u);d.delay=Q2(d.delay,a,s);const f=W2(c,u,n[u],d,t);o.push(f)}}return md(o,i,i.duration)}}const e3=X2(cd);function t3(t,e={}){return md([()=>{const r=new cd(t,[0,1],e);return r.finished.catch(()=>{}),r}],e,e.duration)}function sn(t,e,r){return(On(t)?t3:e3)(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Tt=t=>t??it;var Oi={},r3=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},wd={},zt={};let Ua;const n3=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];zt.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},zt.getSymbolTotalCodewords=function(e){return n3[e]},zt.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e},zt.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Ua=e},zt.isKanjiModeEnabled=function(){return typeof Ua<"u"},zt.toSJIS=function(e){return Ua(e)};var Os={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(Os);function yd(){this.buffer=[],this.length=0}yd.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var i3=yd;function Ai(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Ai.prototype.set=function(t,e,r,n){const i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)},Ai.prototype.get=function(t,e){return this.data[t*this.size+e]},Ai.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r},Ai.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var s3=Ai,vd={};(function(t){const e=zt.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(n){const i=[],s=t.getRowColCoords(n),o=s.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||i.push([s[a],s[c]]);return i}})(vd);var bd={};const o3=zt.getSymbolSize,_d=7;bd.getPositions=function(e){const r=o3(e);return[[0,0],[r-_d,0],[0,r-_d]]};var Ed={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,c=0,u=null,d=null;for(let f=0;f<s;f++){a=c=0,u=d=null;for(let g=0;g<s;g++){let y=i.get(f,g);y===u?a++:(a>=5&&(o+=e.N1+(a-5)),u=y,a=1),y=i.get(g,f),y===d?c++:(c>=5&&(o+=e.N1+(c-5)),d=y,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let c=0;c<s-1;c++){const u=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(u===4||u===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,c=0;for(let u=0;u<s;u++){a=c=0;for(let d=0;d<s;d++)a=a<<1&2047|i.get(u,d),d>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|i.get(d,u),d>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(n,i,s){switch(n){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)s.isReserved(c,a)||s.xor(c,a,r(i,c,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let u=0;u<o;u++){s(u),t.applyMask(u,i);const d=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(u,i),d<c&&(c=d,a=u)}return a}})(Ed);var As={};const $r=Os,$s=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ts=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];As.getBlocksCount=function(e,r){switch(r){case $r.L:return $s[(e-1)*4+0];case $r.M:return $s[(e-1)*4+1];case $r.Q:return $s[(e-1)*4+2];case $r.H:return $s[(e-1)*4+3];default:return}},As.getTotalCodewordsCount=function(e,r){switch(r){case $r.L:return Ts[(e-1)*4+0];case $r.M:return Ts[(e-1)*4+1];case $r.Q:return Ts[(e-1)*4+2];case $r.H:return Ts[(e-1)*4+3];default:return}};var Sd={},Rs={};const $i=new Uint8Array(512),Ps=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)$i[r]=e,Ps[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)$i[r]=$i[r-255]})(),Rs.log=function(e){if(e<1)throw new Error("log("+e+")");return Ps[e]},Rs.exp=function(e){return $i[e]},Rs.mul=function(e,r){return e===0||r===0?0:$i[Ps[e]+Ps[r]]},function(t){const e=Rs;t.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(n[o],i[a]);return s},t.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}}(Sd);const xd=Sd;function Fa(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Fa.prototype.initialize=function(e){this.degree=e,this.genPoly=xd.generateECPolynomial(this.degree)},Fa.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=xd.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(n,i),s}return n};var a3=Fa,Cd={},Tr={},ja={};ja.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var ar={};const Dd="[0-9]+",c3="[A-Z $%*+\\-./:]+";let Ti="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Ti=Ti.replace(/u/g,"\\u");const l3="(?:(?![A-Z0-9 $%*+\\-./:]|"+Ti+`)(?:.|[\r
]))+`;ar.KANJI=new RegExp(Ti,"g"),ar.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),ar.BYTE=new RegExp(l3,"g"),ar.NUMERIC=new RegExp(Dd,"g"),ar.ALPHANUMERIC=new RegExp(c3,"g");const u3=new RegExp("^"+Ti+"$"),h3=new RegExp("^"+Dd+"$"),d3=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");ar.testKanji=function(e){return u3.test(e)},ar.testNumeric=function(e){return h3.test(e)},ar.testAlphanumeric=function(e){return d3.test(e)},function(t){const e=ja,r=ar;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return n(s)}catch{return o}}}(Tr),function(t){const e=zt,r=As,n=Os,i=Tr,s=ja,o=7973,a=e.getBCHDigit(o);function c(g,y,_){for(let b=1;b<=40;b++)if(y<=t.getCapacity(b,_,g))return b}function u(g,y){return i.getCharCountIndicator(g,y)+4}function d(g,y){let _=0;return g.forEach(function(b){const C=u(b.mode,y);_+=C+b.getBitsLength()}),_}function f(g,y){for(let _=1;_<=40;_++)if(d(g,_)<=t.getCapacity(_,y,i.MIXED))return _}t.from=function(y,_){return s.isValid(y)?parseInt(y,10):_},t.getCapacity=function(y,_,b){if(!s.isValid(y))throw new Error("Invalid QR Code version");typeof b>"u"&&(b=i.BYTE);const C=e.getSymbolTotalCodewords(y),I=r.getTotalCodewordsCount(y,_),v=(C-I)*8;if(b===i.MIXED)return v;const E=v-u(b,y);switch(b){case i.NUMERIC:return Math.floor(E/10*3);case i.ALPHANUMERIC:return Math.floor(E/11*2);case i.KANJI:return Math.floor(E/13);case i.BYTE:default:return Math.floor(E/8)}},t.getBestVersionForData=function(y,_){let b;const C=n.from(_,n.M);if(Array.isArray(y)){if(y.length>1)return f(y,C);if(y.length===0)return 1;b=y[0]}else b=y;return c(b.mode,b.getLength(),C)},t.getEncodedBits=function(y){if(!s.isValid(y)||y<7)throw new Error("Invalid QR Code version");let _=y<<12;for(;e.getBCHDigit(_)-a>=0;)_^=o<<e.getBCHDigit(_)-a;return y<<12|_}}(Cd);var Id={};const ka=zt,Od=1335,f3=21522,Ad=ka.getBCHDigit(Od);Id.getEncodedBits=function(e,r){const n=e.bit<<3|r;let i=n<<10;for(;ka.getBCHDigit(i)-Ad>=0;)i^=Od<<ka.getBCHDigit(i)-Ad;return(n<<10|i)^f3};var $d={};const p3=Tr;function $n(t){this.mode=p3.NUMERIC,this.data=t.toString()}$n.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},$n.prototype.getLength=function(){return this.data.length},$n.prototype.getBitsLength=function(){return $n.getBitsLength(this.data.length)},$n.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);const s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};var g3=$n;const m3=Tr,Ba=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Tn(t){this.mode=m3.ALPHANUMERIC,this.data=t}Tn.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},Tn.prototype.getLength=function(){return this.data.length},Tn.prototype.getBitsLength=function(){return Tn.getBitsLength(this.data.length)},Tn.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=Ba.indexOf(this.data[r])*45;n+=Ba.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(Ba.indexOf(this.data[r]),6)};var w3=Tn,y3=function(e){for(var r=[],n=e.length,i=0;i<n;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&n>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){r.push(s);continue}if(s<2048){r.push(s>>6|192),r.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128);continue}if(s>=65536&&s<=1114111){r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const v3=y3,b3=Tr;function Rn(t){this.mode=b3.BYTE,typeof t=="string"&&(t=v3(t)),this.data=new Uint8Array(t)}Rn.getBitsLength=function(e){return e*8},Rn.prototype.getLength=function(){return this.data.length},Rn.prototype.getBitsLength=function(){return Rn.getBitsLength(this.data.length)},Rn.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var _3=Rn;const E3=Tr,S3=zt;function Pn(t){this.mode=E3.KANJI,this.data=t}Pn.getBitsLength=function(e){return e*13},Pn.prototype.getLength=function(){return this.data.length},Pn.prototype.getBitsLength=function(){return Pn.getBitsLength(this.data.length)},Pn.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=S3.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var x3=Pn,Td={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,i){var s={},o={};o[n]=0;var a=e.PriorityQueue.make();a.push(n,0);for(var c,u,d,f,g,y,_,b,C;!a.empty();){c=a.pop(),u=c.value,f=c.cost,g=r[u]||{};for(d in g)g.hasOwnProperty(d)&&(y=g[d],_=f+y,b=o[d],C=typeof o[d]>"u",(C||b>_)&&(o[d]=_,a.push(d,_),s[d]=u))}if(typeof i<"u"&&typeof o[i]>"u"){var I=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(I)}return s},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],s=n;s;)i.push(s),r[s],s=r[s];return i.reverse(),i},find_path:function(r,n,i){var s=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},s;r=r||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(Td);var C3=Td.exports;(function(t){const e=Tr,r=g3,n=w3,i=_3,s=x3,o=ar,a=zt,c=C3;function u(I){return unescape(encodeURIComponent(I)).length}function d(I,v,E){const w=[];let x;for(;(x=I.exec(E))!==null;)w.push({data:x[0],index:x.index,mode:v,length:x[0].length});return w}function f(I){const v=d(o.NUMERIC,e.NUMERIC,I),E=d(o.ALPHANUMERIC,e.ALPHANUMERIC,I);let w,x;return a.isKanjiModeEnabled()?(w=d(o.BYTE,e.BYTE,I),x=d(o.KANJI,e.KANJI,I)):(w=d(o.BYTE_KANJI,e.BYTE,I),x=[]),v.concat(E,w,x).sort(function(l,m){return l.index-m.index}).map(function(l){return{data:l.data,mode:l.mode,length:l.length}})}function g(I,v){switch(v){case e.NUMERIC:return r.getBitsLength(I);case e.ALPHANUMERIC:return n.getBitsLength(I);case e.KANJI:return s.getBitsLength(I);case e.BYTE:return i.getBitsLength(I)}}function y(I){return I.reduce(function(v,E){const w=v.length-1>=0?v[v.length-1]:null;return w&&w.mode===E.mode?(v[v.length-1].data+=E.data,v):(v.push(E),v)},[])}function _(I){const v=[];for(let E=0;E<I.length;E++){const w=I[E];switch(w.mode){case e.NUMERIC:v.push([w,{data:w.data,mode:e.ALPHANUMERIC,length:w.length},{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.ALPHANUMERIC:v.push([w,{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.KANJI:v.push([w,{data:w.data,mode:e.BYTE,length:u(w.data)}]);break;case e.BYTE:v.push([{data:w.data,mode:e.BYTE,length:u(w.data)}])}}return v}function b(I,v){const E={},w={start:{}};let x=["start"];for(let p=0;p<I.length;p++){const l=I[p],m=[];for(let R=0;R<l.length;R++){const O=l[R],M=""+p+R;m.push(M),E[M]={node:O,lastCount:0},w[M]={};for(let k=0;k<x.length;k++){const W=x[k];E[W]&&E[W].node.mode===O.mode?(w[W][M]=g(E[W].lastCount+O.length,O.mode)-g(E[W].lastCount,O.mode),E[W].lastCount+=O.length):(E[W]&&(E[W].lastCount=O.length),w[W][M]=g(O.length,O.mode)+4+e.getCharCountIndicator(O.mode,v))}}x=m}for(let p=0;p<x.length;p++)w[x[p]].end=0;return{map:w,table:E}}function C(I,v){let E;const w=e.getBestModeForData(I);if(E=e.from(v,w),E!==e.BYTE&&E.bit<w.bit)throw new Error('"'+I+'" cannot be encoded with mode '+e.toString(E)+`.
 Suggested mode is: `+e.toString(w));switch(E===e.KANJI&&!a.isKanjiModeEnabled()&&(E=e.BYTE),E){case e.NUMERIC:return new r(I);case e.ALPHANUMERIC:return new n(I);case e.KANJI:return new s(I);case e.BYTE:return new i(I)}}t.fromArray=function(v){return v.reduce(function(E,w){return typeof w=="string"?E.push(C(w,null)):w.data&&E.push(C(w.data,w.mode)),E},[])},t.fromString=function(v,E){const w=f(v,a.isKanjiModeEnabled()),x=_(w),p=b(x,E),l=c.find_path(p.map,"start","end"),m=[];for(let R=1;R<l.length-1;R++)m.push(p.table[l[R]].node);return t.fromArray(y(m))},t.rawSplit=function(v){return t.fromArray(f(v,a.isKanjiModeEnabled()))}})($d);const Ns=zt,za=Os,D3=i3,I3=s3,O3=vd,A3=bd,qa=Ed,Ha=As,$3=a3,Ls=Cd,T3=Id,R3=Tr,Wa=$d;function P3(t,e){const r=t.size,n=A3.getPositions(e);for(let i=0;i<n.length;i++){const s=n[i][0],o=n[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||r<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(s+a,o+c,!0,!0):t.set(s+a,o+c,!1,!0))}}function N3(t){const e=t.size;for(let r=8;r<e-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function L3(t,e){const r=O3.getPositions(e);for(let n=0;n<r.length;n++){const i=r[n][0],s=r[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function M3(t,e){const r=t.size,n=Ls.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+r-8-3,o=(n>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function Va(t,e,r){const n=t.size,i=T3.getEncodedBits(e,r);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(n-15+s,8,o,!0),s<8?t.set(8,n-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(n-8,8,1,!0)}function U3(t,e){const r=t.size;let n=-1,i=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,a-c)){let u=!1;o<e.length&&(u=(e[o]>>>s&1)===1),t.set(i,a-c,u),s--,s===-1&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function F3(t,e,r){const n=new D3;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),R3.getCharCountIndicator(c.mode,t)),c.write(n)});const i=Ns.getSymbolTotalCodewords(t),s=Ha.getTotalCodewordsCount(t,e),o=(i-s)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let c=0;c<a;c++)n.put(c%2?17:236,8);return j3(n,t,e)}function j3(t,e,r){const n=Ns.getSymbolTotalCodewords(e),i=Ha.getTotalCodewordsCount(e,r),s=n-i,o=Ha.getBlocksCount(e,r),a=n%o,c=o-a,u=Math.floor(n/o),d=Math.floor(s/o),f=d+1,g=u-d,y=new $3(g);let _=0;const b=new Array(o),C=new Array(o);let I=0;const v=new Uint8Array(t.buffer);for(let l=0;l<o;l++){const m=l<c?d:f;b[l]=v.slice(_,_+m),C[l]=y.encode(b[l]),_+=m,I=Math.max(I,m)}const E=new Uint8Array(n);let w=0,x,p;for(x=0;x<I;x++)for(p=0;p<o;p++)x<b[p].length&&(E[w++]=b[p][x]);for(x=0;x<g;x++)for(p=0;p<o;p++)E[w++]=C[p][x];return E}function k3(t,e,r,n){let i;if(Array.isArray(t))i=Wa.fromArray(t);else if(typeof t=="string"){let u=e;if(!u){const d=Wa.rawSplit(t);u=Ls.getBestVersionForData(d,r)}i=Wa.fromString(t,u||40)}else throw new Error("Invalid data");const s=Ls.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=F3(e,r,i),a=Ns.getSymbolSize(e),c=new I3(a);return P3(c,e),N3(c),L3(c,e),Va(c,r,0),e>=7&&M3(c,e),U3(c,o),isNaN(n)&&(n=qa.getBestMask(c,Va.bind(null,c,r))),qa.applyMask(n,c),Va(c,r,n),{modules:c,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}wd.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=za.M,i,s;return typeof r<"u"&&(n=za.from(r.errorCorrectionLevel,za.M),i=Ls.from(r.version),s=qa.from(r.maskPattern),r.toSJISFunc&&Ns.setToSJISFunction(r.toSJISFunc)),k3(e,i,n,s)};var Rd={},Ka={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const s=t.getScale(n,i);return Math.floor((n+i.margin*2)*s)},t.qrToImageData=function(n,i,s){const o=i.modules.size,a=i.modules.data,c=t.getScale(o,s),u=Math.floor((o+s.margin*2)*c),d=s.margin*c,f=[s.color.light,s.color.dark];for(let g=0;g<u;g++)for(let y=0;y<u;y++){let _=(g*u+y)*4,b=s.color.light;if(g>=d&&y>=d&&g<u-d&&y<u-d){const C=Math.floor((g-d)/c),I=Math.floor((y-d)/c);b=f[a[C*o+I]?1:0]}n[_++]=b.r,n[_++]=b.g,n[_++]=b.b,n[_]=b.a}}})(Ka),function(t){const e=Ka;function r(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let c=a,u=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(u=n()),c=e.getOptions(c);const d=e.getImageWidth(s.modules.size,c),f=u.getContext("2d"),g=f.createImageData(d,d);return e.qrToImageData(g.data,s,c),r(f,u,d),f.putImageData(g,0,0),u},t.renderToDataURL=function(s,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const u=t.render(s,o,c),d=c.type||"image/png",f=c.rendererOpts||{};return u.toDataURL(d,f.quality)}}(Rd);var Pd={};const B3=Ka;function Nd(t,e){const r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function Ga(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function z3(t,e,r){let n="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),u=Math.floor(a/e);!c&&!s&&(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(n+=s?Ga("M",c+r,.5+u+r):Ga("m",i,0),i=0,s=!1),c+1<e&&t[a+1]||(n+=Ga("h",o),o=0)):i++}return n}Pd.render=function(e,r,n){const i=B3.getOptions(r),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,c=i.color.light.a?"<path "+Nd(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",u="<path "+Nd(i.color.dark,"stroke")+' d="'+z3(o,s,i.margin)+'"/>',d='viewBox="0 0 '+a+" "+a+'"',g='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+u+`</svg>
`;return typeof n=="function"&&n(null,g),g};const q3=r3,Ya=wd,Ld=Rd,H3=Pd;function Ja(t,e,r,n,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!q3())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(c,u){try{const d=Ya.create(r,n);c(t(d,e,n))}catch(d){u(d)}})}try{const c=Ya.create(r,n);i(null,t(c,e,n))}catch(c){i(c)}}Oi.create=Ya.create,Oi.toCanvas=Ja.bind(null,Ld.render),Oi.toDataURL=Ja.bind(null,Ld.renderToDataURL),Oi.toString=Ja.bind(null,function(t,e,r){return H3.render(t,r)});var W3=Object.defineProperty,Md=Object.getOwnPropertySymbols,V3=Object.prototype.hasOwnProperty,K3=Object.prototype.propertyIsEnumerable,Ud=(t,e,r)=>e in t?W3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Za=(t,e)=>{for(var r in e||(e={}))V3.call(e,r)&&Ud(t,r,e[r]);if(Md)for(var r of Md(e))K3.call(e,r)&&Ud(t,r,e[r]);return t};function G3(){var t;const e=(t=Er.state.themeMode)!=null?t:"dark",r={light:{foreground:{1:"rgb(20,20,20)",2:"rgb(121,134,134)",3:"rgb(158,169,169)"},background:{1:"rgb(255,255,255)",2:"rgb(241,243,243)",3:"rgb(228,231,231)"},overlay:"rgba(0,0,0,0.1)"},dark:{foreground:{1:"rgb(228,231,231)",2:"rgb(148,158,158)",3:"rgb(110,119,119)"},background:{1:"rgb(20,20,20)",2:"rgb(39,42,42)",3:"rgb(59,64,64)"},overlay:"rgba(255,255,255,0.1)"}}[e];return{"--wcm-color-fg-1":r.foreground[1],"--wcm-color-fg-2":r.foreground[2],"--wcm-color-fg-3":r.foreground[3],"--wcm-color-bg-1":r.background[1],"--wcm-color-bg-2":r.background[2],"--wcm-color-bg-3":r.background[3],"--wcm-color-overlay":r.overlay}}function Fd(){return{"--wcm-accent-color":"#3396FF","--wcm-accent-fill-color":"#FFFFFF","--wcm-z-index":"89","--wcm-background-color":"#3396FF","--wcm-background-border-radius":"8px","--wcm-container-border-radius":"30px","--wcm-wallet-icon-border-radius":"15px","--wcm-wallet-icon-large-border-radius":"30px","--wcm-wallet-icon-small-border-radius":"7px","--wcm-input-border-radius":"28px","--wcm-button-border-radius":"10px","--wcm-notification-border-radius":"36px","--wcm-secondary-button-border-radius":"28px","--wcm-icon-button-border-radius":"50%","--wcm-button-hover-highlight-border-radius":"10px","--wcm-text-big-bold-size":"20px","--wcm-text-big-bold-weight":"600","--wcm-text-big-bold-line-height":"24px","--wcm-text-big-bold-letter-spacing":"-0.03em","--wcm-text-big-bold-text-transform":"none","--wcm-text-xsmall-bold-size":"10px","--wcm-text-xsmall-bold-weight":"700","--wcm-text-xsmall-bold-line-height":"12px","--wcm-text-xsmall-bold-letter-spacing":"0.02em","--wcm-text-xsmall-bold-text-transform":"uppercase","--wcm-text-xsmall-regular-size":"12px","--wcm-text-xsmall-regular-weight":"600","--wcm-text-xsmall-regular-line-height":"14px","--wcm-text-xsmall-regular-letter-spacing":"-0.03em","--wcm-text-xsmall-regular-text-transform":"none","--wcm-text-small-thin-size":"14px","--wcm-text-small-thin-weight":"500","--wcm-text-small-thin-line-height":"16px","--wcm-text-small-thin-letter-spacing":"-0.03em","--wcm-text-small-thin-text-transform":"none","--wcm-text-small-regular-size":"14px","--wcm-text-small-regular-weight":"600","--wcm-text-small-regular-line-height":"16px","--wcm-text-small-regular-letter-spacing":"-0.03em","--wcm-text-small-regular-text-transform":"none","--wcm-text-medium-regular-size":"16px","--wcm-text-medium-regular-weight":"600","--wcm-text-medium-regular-line-height":"20px","--wcm-text-medium-regular-letter-spacing":"-0.03em","--wcm-text-medium-regular-text-transform":"none","--wcm-font-family":"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', sans-serif","--wcm-font-feature-settings":"'tnum' on, 'lnum' on, 'case' on","--wcm-success-color":"rgb(38,181,98)","--wcm-error-color":"rgb(242, 90, 103)","--wcm-overlay-background-color":"rgba(0, 0, 0, 0.3)","--wcm-overlay-backdrop-filter":"none"}}const be={getPreset(t){return Fd()[t]},setTheme(){const t=document.querySelector(":root"),{themeVariables:e}=Er.state;if(t){const r=Za(Za(Za({},G3()),Fd()),e);Object.entries(r).forEach(([n,i])=>t.style.setProperty(n,i))}},globalCss:$e`*,::after,::before{margin:0;padding:0;box-sizing:border-box;font-style:normal;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;backface-visibility:hidden}button{cursor:pointer;display:flex;justify-content:center;align-items:center;position:relative;border:none;background-color:transparent;transition:all .2s ease}@media (hover:hover) and (pointer:fine){button:active{transition:all .1s ease;transform:scale(.93)}}button::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;transition:background-color,.2s ease}button:disabled{cursor:not-allowed}button svg,button wcm-text{position:relative;z-index:1}input{border:none;outline:0;appearance:none}img{display:block}::selection{color:var(--wcm-accent-fill-color);background:var(--wcm-accent-color)}`},Y3=$e`button{border-radius:var(--wcm-secondary-button-border-radius);height:28px;padding:0 10px;background-color:var(--wcm-accent-color)}button path{fill:var(--wcm-accent-fill-color)}button::after{border-radius:inherit;border:1px solid var(--wcm-color-overlay)}button:disabled::after{background-color:transparent}.wcm-icon-left svg{margin-right:5px}.wcm-icon-right svg{margin-left:5px}button:active::after{background-color:var(--wcm-color-overlay)}.wcm-ghost,.wcm-ghost:active::after,.wcm-outline{background-color:transparent}.wcm-ghost:active{opacity:.5}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}.wcm-ghost:hover::after{background-color:transparent}.wcm-ghost:hover{opacity:.5}}button:disabled{background-color:var(--wcm-color-bg-3);pointer-events:none}.wcm-ghost::after{border-color:transparent}.wcm-ghost path{fill:var(--wcm-color-fg-2)}.wcm-outline path{fill:var(--wcm-accent-color)}.wcm-outline:disabled{background-color:transparent;opacity:.5}`;var J3=Object.defineProperty,Z3=Object.getOwnPropertyDescriptor,Nn=(t,e,r,n)=>{for(var i=n>1?void 0:n?Z3(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&J3(e,r,i),i};let Rr=class extends pe{constructor(){super(...arguments),this.disabled=!1,this.iconLeft=void 0,this.iconRight=void 0,this.onClick=()=>null,this.variant="default"}render(){const t={"wcm-icon-left":this.iconLeft!==void 0,"wcm-icon-right":this.iconRight!==void 0,"wcm-ghost":this.variant==="ghost","wcm-outline":this.variant==="outline"};let e="inverse";return this.variant==="ghost"&&(e="secondary"),this.variant==="outline"&&(e="accent"),Y`<button class="${gr(t)}" ?disabled="${this.disabled}" @click="${this.onClick}">${this.iconLeft}<wcm-text variant="small-regular" color="${e}"><slot></slot></wcm-text>${this.iconRight}</button>`}};Rr.styles=[be.globalCss,Y3],Nn([le({type:Boolean})],Rr.prototype,"disabled",2),Nn([le()],Rr.prototype,"iconLeft",2),Nn([le()],Rr.prototype,"iconRight",2),Nn([le()],Rr.prototype,"onClick",2),Nn([le()],Rr.prototype,"variant",2),Rr=Nn([xe("wcm-button")],Rr);const Q3=$e`:host{display:inline-block}button{padding:0 15px 1px;height:40px;border-radius:var(--wcm-button-border-radius);color:var(--wcm-accent-fill-color);background-color:var(--wcm-accent-color)}button::after{content:'';top:0;bottom:0;left:0;right:0;position:absolute;background-color:transparent;border-radius:inherit;transition:background-color .2s ease;border:1px solid var(--wcm-color-overlay)}button:active::after{background-color:var(--wcm-color-overlay)}button:disabled{padding-bottom:0;background-color:var(--wcm-color-bg-3);color:var(--wcm-color-fg-3)}.wcm-secondary{color:var(--wcm-accent-color);background-color:transparent}.wcm-secondary::after{display:none}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}}`;var X3=Object.defineProperty,e5=Object.getOwnPropertyDescriptor,Qa=(t,e,r,n)=>{for(var i=n>1?void 0:n?e5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&X3(e,r,i),i};let Ri=class extends pe{constructor(){super(...arguments),this.disabled=!1,this.variant="primary"}render(){const t={"wcm-secondary":this.variant==="secondary"};return Y`<button ?disabled="${this.disabled}" class="${gr(t)}"><slot></slot></button>`}};Ri.styles=[be.globalCss,Q3],Qa([le({type:Boolean})],Ri.prototype,"disabled",2),Qa([le()],Ri.prototype,"variant",2),Ri=Qa([xe("wcm-button-big")],Ri);const t5=$e`:host{background-color:var(--wcm-color-bg-2);border-top:1px solid var(--wcm-color-bg-3)}div{padding:10px 20px;display:inherit;flex-direction:inherit;align-items:inherit;width:inherit;justify-content:inherit}`;var r5=Object.defineProperty,n5=Object.getOwnPropertyDescriptor,i5=(t,e,r,n)=>{for(var i=n>1?void 0:n?n5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&r5(e,r,i),i};let Xa=class extends pe{render(){return Y`<div><slot></slot></div>`}};Xa.styles=[be.globalCss,t5],Xa=i5([xe("wcm-info-footer")],Xa);const Pe={CROSS_ICON:He`<svg width="12" height="12" viewBox="0 0 12 12"><path d="M9.94 11A.75.75 0 1 0 11 9.94L7.414 6.353a.5.5 0 0 1 0-.708L11 2.061A.75.75 0 1 0 9.94 1L6.353 4.586a.5.5 0 0 1-.708 0L2.061 1A.75.75 0 0 0 1 2.06l3.586 3.586a.5.5 0 0 1 0 .708L1 9.939A.75.75 0 1 0 2.06 11l3.586-3.586a.5.5 0 0 1 .708 0L9.939 11Z" fill="#fff"/></svg>`,WALLET_CONNECT_LOGO:He`<svg width="178" height="29" viewBox="0 0 178 29" id="wcm-wc-logo"><path d="M10.683 7.926c5.284-5.17 13.85-5.17 19.134 0l.636.623a.652.652 0 0 1 0 .936l-2.176 2.129a.343.343 0 0 1-.478 0l-.875-.857c-3.686-3.607-9.662-3.607-13.348 0l-.937.918a.343.343 0 0 1-.479 0l-2.175-2.13a.652.652 0 0 1 0-.936l.698-.683Zm23.633 4.403 1.935 1.895a.652.652 0 0 1 0 .936l-8.73 8.543a.687.687 0 0 1-.956 0L20.37 17.64a.172.172 0 0 0-.239 0l-6.195 6.063a.687.687 0 0 1-.957 0l-8.73-8.543a.652.652 0 0 1 0-.936l1.936-1.895a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .239 0l6.195-6.064a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .24 0l6.195-6.064a.687.687 0 0 1 .956 0ZM48.093 20.948l2.338-9.355c.139-.515.258-1.07.416-1.942.12.872.258 1.427.357 1.942l2.022 9.355h4.181l3.528-13.874h-3.21l-1.943 8.523a24.825 24.825 0 0 0-.456 2.457c-.158-.931-.317-1.625-.495-2.438l-1.883-8.542h-4.201l-2.042 8.542a41.204 41.204 0 0 0-.475 2.438 41.208 41.208 0 0 0-.476-2.438l-1.903-8.542h-3.349l3.508 13.874h4.083ZM63.33 21.304c1.585 0 2.596-.654 3.11-1.605-.059.297-.078.595-.078.892v.357h2.655V15.22c0-2.735-1.248-4.32-4.3-4.32-2.636 0-4.36 1.466-4.52 3.487h2.914c.1-.891.734-1.426 1.705-1.426.911 0 1.407.515 1.407 1.11 0 .435-.258.693-1.03.792l-1.388.159c-2.061.257-3.825 1.01-3.825 3.19 0 1.982 1.645 3.092 3.35 3.092Zm.891-2.041c-.773 0-1.348-.436-1.348-1.19 0-.733.655-1.09 1.645-1.268l.674-.119c.575-.118.892-.218 1.09-.396v.912c0 1.228-.892 2.06-2.06 2.06ZM70.398 7.074v13.874h2.874V7.074h-2.874ZM74.934 7.074v13.874h2.874V7.074h-2.874ZM84.08 21.304c2.735 0 4.5-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922H81.92ZM94.92 21.146c.633 0 1.248-.1 1.525-.179v-2.18c-.218.04-.475.06-.693.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.338v-2.24h-2.338V7.788H91.47v3.448H89.37v2.24h2.1v4.201c0 2.3 1.15 3.469 3.45 3.469ZM104.62 21.304c3.924 0 6.302-2.299 6.599-5.608h-3.111c-.238 1.803-1.506 3.032-3.369 3.032-2.2 0-3.746-1.784-3.746-4.796 0-2.953 1.605-4.638 3.805-4.638 1.883 0 2.953 1.15 3.171 2.834h3.191c-.317-3.448-2.854-5.41-6.342-5.41-3.984 0-7.036 2.695-7.036 7.214 0 4.677 2.676 7.372 6.838 7.372ZM117.449 21.304c2.993 0 5.114-1.882 5.114-5.172 0-3.23-2.121-5.233-5.114-5.233-2.972 0-5.093 2.002-5.093 5.233 0 3.29 2.101 5.172 5.093 5.172Zm0-2.22c-1.327 0-2.18-1.09-2.18-2.952 0-1.903.892-2.973 2.18-2.973 1.308 0 2.2 1.07 2.2 2.973 0 1.862-.872 2.953-2.2 2.953ZM126.569 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.229-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM137.464 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.228-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM149.949 21.304c2.735 0 4.499-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922h-3.984ZM160.876 21.304c3.013 0 4.658-1.645 4.975-4.201h-2.874c-.099 1.07-.713 1.982-2.001 1.982-1.309 0-2.2-1.21-2.2-2.993 0-1.942 1.03-2.933 2.259-2.933 1.209 0 1.803.872 1.883 1.882h2.873c-.218-2.358-1.823-4.142-4.776-4.142-2.874 0-5.153 1.903-5.153 5.193 0 3.25 1.923 5.212 5.014 5.212ZM172.067 21.146c.634 0 1.248-.1 1.526-.179v-2.18c-.218.04-.476.06-.694.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.339v-2.24h-2.339V7.788h-2.854v3.448h-2.1v2.24h2.1v4.201c0 2.3 1.15 3.469 3.449 3.469Z" fill="#fff"/></svg>`,WALLET_CONNECT_ICON:He`<svg width="28" height="20" viewBox="0 0 28 20"><g clip-path="url(#a)"><path d="M7.386 6.482c3.653-3.576 9.575-3.576 13.228 0l.44.43a.451.451 0 0 1 0 .648L19.55 9.033a.237.237 0 0 1-.33 0l-.606-.592c-2.548-2.496-6.68-2.496-9.228 0l-.648.634a.237.237 0 0 1-.33 0L6.902 7.602a.451.451 0 0 1 0-.647l.483-.473Zm16.338 3.046 1.339 1.31a.451.451 0 0 1 0 .648l-6.035 5.909a.475.475 0 0 1-.662 0L14.083 13.2a.119.119 0 0 0-.166 0l-4.283 4.194a.475.475 0 0 1-.662 0l-6.035-5.91a.451.451 0 0 1 0-.647l1.338-1.31a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0Z" fill="#000000"/></g><defs><clipPath id="a"><path fill="#ffffff" d="M0 0h28v20H0z"/></clipPath></defs></svg>`,WALLET_CONNECT_ICON_COLORED:He`<svg width="96" height="96" fill="none"><path fill="#fff" d="M25.322 33.597c12.525-12.263 32.83-12.263 45.355 0l1.507 1.476a1.547 1.547 0 0 1 0 2.22l-5.156 5.048a.814.814 0 0 1-1.134 0l-2.074-2.03c-8.737-8.555-22.903-8.555-31.64 0l-2.222 2.175a.814.814 0 0 1-1.134 0l-5.156-5.049a1.547 1.547 0 0 1 0-2.22l1.654-1.62Zm56.019 10.44 4.589 4.494a1.547 1.547 0 0 1 0 2.22l-20.693 20.26a1.628 1.628 0 0 1-2.267 0L48.283 56.632a.407.407 0 0 0-.567 0L33.03 71.012a1.628 1.628 0 0 1-2.268 0L10.07 50.75a1.547 1.547 0 0 1 0-2.22l4.59-4.494a1.628 1.628 0 0 1 2.267 0l14.687 14.38c.156.153.41.153.567 0l14.685-14.38a1.628 1.628 0 0 1 2.268 0l14.687 14.38c.156.153.41.153.567 0l14.686-14.38a1.628 1.628 0 0 1 2.268 0Z"/><path stroke="#000" d="M25.672 33.954c12.33-12.072 32.325-12.072 44.655 0l1.508 1.476a1.047 1.047 0 0 1 0 1.506l-5.157 5.048a.314.314 0 0 1-.434 0l-2.074-2.03c-8.932-8.746-23.409-8.746-32.34 0l-2.222 2.174a.314.314 0 0 1-.434 0l-5.157-5.048a1.047 1.047 0 0 1 0-1.506l1.655-1.62Zm55.319 10.44 4.59 4.494a1.047 1.047 0 0 1 0 1.506l-20.694 20.26a1.128 1.128 0 0 1-1.568 0l-14.686-14.38a.907.907 0 0 0-1.267 0L32.68 70.655a1.128 1.128 0 0 1-1.568 0L10.42 50.394a1.047 1.047 0 0 1 0-1.506l4.59-4.493a1.128 1.128 0 0 1 1.567 0l14.687 14.379a.907.907 0 0 0 1.266 0l-.35-.357.35.357 14.686-14.38a1.128 1.128 0 0 1 1.568 0l14.687 14.38a.907.907 0 0 0 1.267 0l14.686-14.38a1.128 1.128 0 0 1 1.568 0Z"/></svg>`,BACK_ICON:He`<svg width="10" height="18" viewBox="0 0 10 18"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.735.179a.75.75 0 0 1 .087 1.057L2.92 8.192a1.25 1.25 0 0 0 0 1.617l5.902 6.956a.75.75 0 1 1-1.144.97L1.776 10.78a2.75 2.75 0 0 1 0-3.559L7.678.265A.75.75 0 0 1 8.735.18Z" fill="#fff"/></svg>`,COPY_ICON:He`<svg width="24" height="24" fill="none"><path fill="#fff" fill-rule="evenodd" d="M7.01 7.01c.03-1.545.138-2.5.535-3.28A5 5 0 0 1 9.73 1.545C10.8 1 12.2 1 15 1c2.8 0 4.2 0 5.27.545a5 5 0 0 1 2.185 2.185C23 4.8 23 6.2 23 9c0 2.8 0 4.2-.545 5.27a5 5 0 0 1-2.185 2.185c-.78.397-1.735.505-3.28.534l-.001.01c-.03 1.54-.138 2.493-.534 3.27a5 5 0 0 1-2.185 2.186C13.2 23 11.8 23 9 23c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C1 19.2 1 17.8 1 15c0-2.8 0-4.2.545-5.27A5 5 0 0 1 3.73 7.545C4.508 7.149 5.46 7.04 7 7.01h.01ZM15 15.5c-1.425 0-2.403-.001-3.162-.063-.74-.06-1.139-.172-1.427-.319a3.5 3.5 0 0 1-1.53-1.529c-.146-.288-.257-.686-.318-1.427C8.501 11.403 8.5 10.425 8.5 9c0-1.425.001-2.403.063-3.162.06-.74.172-1.139.318-1.427a3.5 3.5 0 0 1 1.53-1.53c.288-.146.686-.257 1.427-.318.759-.062 1.737-.063 3.162-.063 1.425 0 2.403.001 3.162.063.74.06 1.139.172 1.427.318a3.5 3.5 0 0 1 1.53 1.53c.146.288.257.686.318 1.427.062.759.063 1.737.063 3.162 0 1.425-.001 2.403-.063 3.162-.06.74-.172 1.139-.319 1.427a3.5 3.5 0 0 1-1.529 1.53c-.288.146-.686.257-1.427.318-.759.062-1.737.063-3.162.063ZM7 8.511c-.444.009-.825.025-1.162.052-.74.06-1.139.172-1.427.318a3.5 3.5 0 0 0-1.53 1.53c-.146.288-.257.686-.318 1.427-.062.759-.063 1.737-.063 3.162 0 1.425.001 2.403.063 3.162.06.74.172 1.139.318 1.427a3.5 3.5 0 0 0 1.53 1.53c.288.146.686.257 1.427.318.759.062 1.737.063 3.162.063 1.425 0 2.403-.001 3.162-.063.74-.06 1.139-.172 1.427-.319a3.5 3.5 0 0 0 1.53-1.53c.146-.287.257-.685.318-1.426.027-.337.043-.718.052-1.162H15c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C7 13.2 7 11.8 7 9v-.489Z" clip-rule="evenodd"/></svg>`,RETRY_ICON:He`<svg width="15" height="16" viewBox="0 0 15 16"><path d="M6.464 2.03A.75.75 0 0 0 5.403.97L2.08 4.293a1 1 0 0 0 0 1.414L5.403 9.03a.75.75 0 0 0 1.06-1.06L4.672 6.177a.25.25 0 0 1 .177-.427h2.085a4 4 0 1 1-3.93 4.746c-.077-.407-.405-.746-.82-.746-.414 0-.755.338-.7.748a5.501 5.501 0 1 0 5.45-6.248H4.848a.25.25 0 0 1-.177-.427L6.464 2.03Z" fill="#fff"/></svg>`,DESKTOP_ICON:He`<svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C2.204 1 3.13 1 4.98 1h6.04c1.85 0 2.775 0 3.466.394a3 3 0 0 1 1.12 1.12C16 3.204 16 4.13 16 5.98v1.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C13.796 12 12.87 12 11.02 12H4.98c-1.85 0-2.775 0-3.466-.394a3 3 0 0 1-1.12-1.12C0 9.796 0 8.87 0 7.02V5.98ZM4.98 2.5h6.04c.953 0 1.568.001 2.034.043.446.04.608.108.69.154a1.5 1.5 0 0 1 .559.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033v1.04c0 .952-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.046-.243.114-.69.154-.466.042-1.08.043-2.033.043H4.98c-.952 0-1.568-.001-2.034-.043-.446-.04-.608-.108-.69-.154a1.5 1.5 0 0 1-.559-.56c-.046-.08-.114-.243-.154-.69-.042-.465-.043-1.08-.043-2.033V5.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.046.243-.114.69-.154.465-.042 1.08-.043 2.033-.043Z" fill="#fff"/><path d="M4 14.25a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,MOBILE_ICON:He`<svg width="16" height="16" viewBox="0 0 16 16"><path d="M6.75 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C5.204 0 6.136 0 8 0s2.795 0 3.486.394a3 3 0 0 1 1.12 1.12C13 2.204 13 3.13 13 4.98v6.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C10.796 16 9.864 16 8 16s-2.795 0-3.486-.394a3 3 0 0 1-1.12-1.12C3 13.796 3 12.87 3 11.02V4.98Zm8.5 0v6.04c0 .953-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.045-.242.113-.693.154-.47.042-1.091.043-2.05.043-.959 0-1.58-.001-2.05-.043-.45-.04-.613-.109-.693-.154a1.5 1.5 0 0 1-.56-.56c-.046-.08-.114-.243-.154-.69-.042-.466-.043-1.08-.043-2.033V4.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.045.243-.113.693-.154C6.42 1.501 7.041 1.5 8 1.5c.959 0 1.58.001 2.05.043.45.04.613.109.693.154a1.5 1.5 0 0 1 .56.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033Z" fill="#fff"/></svg>`,ARROW_DOWN_ICON:He`<svg width="14" height="14" viewBox="0 0 14 14"><path d="M2.28 7.47a.75.75 0 0 0-1.06 1.06l5.25 5.25a.75.75 0 0 0 1.06 0l5.25-5.25a.75.75 0 0 0-1.06-1.06l-3.544 3.543a.25.25 0 0 1-.426-.177V.75a.75.75 0 0 0-1.5 0v10.086a.25.25 0 0 1-.427.176L2.28 7.47Z" fill="#fff"/></svg>`,ARROW_UP_RIGHT_ICON:He`<svg width="15" height="14" fill="none"><path d="M4.5 1.75A.75.75 0 0 1 5.25 1H12a1.5 1.5 0 0 1 1.5 1.5v6.75a.75.75 0 0 1-1.5 0V4.164a.25.25 0 0 0-.427-.176L4.061 11.5A.75.75 0 0 1 3 10.44l7.513-7.513a.25.25 0 0 0-.177-.427H5.25a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,ARROW_RIGHT_ICON:He`<svg width="6" height="14" viewBox="0 0 6 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.181 1.099a.75.75 0 0 1 1.024.279l2.433 4.258a2.75 2.75 0 0 1 0 2.729l-2.433 4.257a.75.75 0 1 1-1.303-.744L4.335 7.62a1.25 1.25 0 0 0 0-1.24L1.902 2.122a.75.75 0 0 1 .28-1.023Z" fill="#fff"/></svg>`,QRCODE_ICON:He`<svg width="25" height="24" viewBox="0 0 25 24"><path d="M23.748 9a.748.748 0 0 0 .748-.752c-.018-2.596-.128-4.07-.784-5.22a6 6 0 0 0-2.24-2.24c-1.15-.656-2.624-.766-5.22-.784a.748.748 0 0 0-.752.748c0 .414.335.749.748.752 1.015.007 1.82.028 2.494.088.995.09 1.561.256 1.988.5.7.398 1.28.978 1.679 1.678.243.427.41.993.498 1.988.061.675.082 1.479.09 2.493a.753.753 0 0 0 .75.749ZM3.527.788C4.677.132 6.152.022 8.747.004A.748.748 0 0 1 9.5.752a.753.753 0 0 1-.749.752c-1.014.007-1.818.028-2.493.088-.995.09-1.561.256-1.988.5-.7.398-1.28.978-1.679 1.678-.243.427-.41.993-.499 1.988-.06.675-.081 1.479-.088 2.493A.753.753 0 0 1 1.252 9a.748.748 0 0 1-.748-.752c.018-2.596.128-4.07.784-5.22a6 6 0 0 1 2.24-2.24ZM1.252 15a.748.748 0 0 0-.748.752c.018 2.596.128 4.07.784 5.22a6 6 0 0 0 2.24 2.24c1.15.656 2.624.766 5.22.784a.748.748 0 0 0 .752-.748.753.753 0 0 0-.749-.752c-1.014-.007-1.818-.028-2.493-.089-.995-.089-1.561-.255-1.988-.498a4.5 4.5 0 0 1-1.679-1.68c-.243-.426-.41-.992-.499-1.987-.06-.675-.081-1.479-.088-2.493A.753.753 0 0 0 1.252 15ZM22.996 15.749a.753.753 0 0 1 .752-.749c.415 0 .751.338.748.752-.018 2.596-.128 4.07-.784 5.22a6 6 0 0 1-2.24 2.24c-1.15.656-2.624.766-5.22.784a.748.748 0 0 1-.752-.748c0-.414.335-.749.748-.752 1.015-.007 1.82-.028 2.494-.089.995-.089 1.561-.255 1.988-.498a4.5 4.5 0 0 0 1.679-1.68c.243-.426.41-.992.498-1.987.061-.675.082-1.479.09-2.493Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 4a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 11h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 4H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM13.5 6.5A2.5 2.5 0 0 1 16 4h2a2.5 2.5 0 0 1 2.5 2.5v2A2.5 2.5 0 0 1 18 11h-2a2.5 2.5 0 0 1-2.5-2.5v-2Zm2.5-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1ZM7 13a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 20h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 13H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Z" fill="#fff"/><path d="M13.5 15.5c0-.465 0-.697.038-.89a2 2 0 0 1 1.572-1.572C15.303 13 15.535 13 16 13v2.5h-2.5ZM18 13c.465 0 .697 0 .89.038a2 2 0 0 1 1.572 1.572c.038.193.038.425.038.89H18V13ZM18 17.5h2.5c0 .465 0 .697-.038.89a2 2 0 0 1-1.572 1.572C18.697 20 18.465 20 18 20v-2.5ZM13.5 17.5H16V20c-.465 0-.697 0-.89-.038a2 2 0 0 1-1.572-1.572c-.038-.193-.038-.425-.038-.89Z" fill="#fff"/></svg>`,SCAN_ICON:He`<svg width="16" height="16" fill="none"><path fill="#fff" d="M10 15.216c0 .422.347.763.768.74 1.202-.064 2.025-.222 2.71-.613a5.001 5.001 0 0 0 1.865-1.866c.39-.684.549-1.507.613-2.709a.735.735 0 0 0-.74-.768.768.768 0 0 0-.76.732c-.009.157-.02.306-.032.447-.073.812-.206 1.244-.384 1.555-.31.545-.761.996-1.306 1.306-.311.178-.743.311-1.555.384-.141.013-.29.023-.447.032a.768.768 0 0 0-.732.76ZM10 .784c0 .407.325.737.732.76.157.009.306.02.447.032.812.073 1.244.206 1.555.384a3.5 3.5 0 0 1 1.306 1.306c.178.311.311.743.384 1.555.013.142.023.29.032.447a.768.768 0 0 0 .76.732.734.734 0 0 0 .74-.768c-.064-1.202-.222-2.025-.613-2.71A5 5 0 0 0 13.477.658c-.684-.39-1.507-.549-2.709-.613a.735.735 0 0 0-.768.74ZM5.232.044A.735.735 0 0 1 6 .784a.768.768 0 0 1-.732.76c-.157.009-.305.02-.447.032-.812.073-1.244.206-1.555.384A3.5 3.5 0 0 0 1.96 3.266c-.178.311-.311.743-.384 1.555-.013.142-.023.29-.032.447A.768.768 0 0 1 .784 6a.735.735 0 0 1-.74-.768c.064-1.202.222-2.025.613-2.71A5 5 0 0 1 2.523.658C3.207.267 4.03.108 5.233.044ZM5.268 14.456a.768.768 0 0 1 .732.76.734.734 0 0 1-.768.74c-1.202-.064-2.025-.222-2.71-.613a5 5 0 0 1-1.865-1.866c-.39-.684-.549-1.507-.613-2.709A.735.735 0 0 1 .784 10c.407 0 .737.325.76.732.009.157.02.306.032.447.073.812.206 1.244.384 1.555a3.5 3.5 0 0 0 1.306 1.306c.311.178.743.311 1.555.384.142.013.29.023.447.032Z"/></svg>`,CHECKMARK_ICON:He`<svg width="13" height="12" viewBox="0 0 13 12"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.155.132a.75.75 0 0 1 .232 1.035L5.821 11.535a1 1 0 0 1-1.626.09L.665 7.21a.75.75 0 1 1 1.17-.937L4.71 9.867a.25.25 0 0 0 .406-.023L11.12.364a.75.75 0 0 1 1.035-.232Z" fill="#fff"/></svg>`,SEARCH_ICON:He`<svg width="20" height="21"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.432 13.992c-.354-.353-.91-.382-1.35-.146a5.5 5.5 0 1 1 2.265-2.265c-.237.441-.208.997.145 1.35l3.296 3.296a.75.75 0 1 1-1.06 1.061l-3.296-3.296Zm.06-5a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z" fill="#949E9E"/></svg>`,WALLET_PLACEHOLDER:He`<svg width="60" height="60" fill="none" viewBox="0 0 60 60"><g clip-path="url(#q)"><path id="wallet-placeholder-fill" fill="#fff" d="M0 24.9c0-9.251 0-13.877 1.97-17.332a15 15 0 0 1 5.598-5.597C11.023 0 15.648 0 24.9 0h10.2c9.252 0 13.877 0 17.332 1.97a15 15 0 0 1 5.597 5.598C60 11.023 60 15.648 60 24.9v10.2c0 9.252 0 13.877-1.97 17.332a15.001 15.001 0 0 1-5.598 5.597C48.977 60 44.352 60 35.1 60H24.9c-9.251 0-13.877 0-17.332-1.97a15 15 0 0 1-5.597-5.598C0 48.977 0 44.352 0 35.1V24.9Z"/><path id="wallet-placeholder-dash" stroke="#000" stroke-dasharray="4 4" stroke-width="1.5" d="M.04 41.708a231.598 231.598 0 0 1-.039-4.403l.75-.001L.75 35.1v-2.55H0v-5.1h.75V24.9l.001-2.204h-.75c.003-1.617.011-3.077.039-4.404l.75.016c.034-1.65.099-3.08.218-4.343l-.746-.07c.158-1.678.412-3.083.82-4.316l.713.236c.224-.679.497-1.296.827-1.875a14.25 14.25 0 0 1 1.05-1.585L3.076 5.9A15 15 0 0 1 5.9 3.076l.455.596a14.25 14.25 0 0 1 1.585-1.05c.579-.33 1.196-.603 1.875-.827l-.236-.712C10.812.674 12.217.42 13.895.262l.07.746C15.23.89 16.66.824 18.308.79l-.016-.75C19.62.012 21.08.004 22.695.001l.001.75L24.9.75h2.55V0h5.1v.75h2.55l2.204.001v-.75c1.617.003 3.077.011 4.404.039l-.016.75c1.65.034 3.08.099 4.343.218l.07-.746c1.678.158 3.083.412 4.316.82l-.236.713c.679.224 1.296.497 1.875.827a14.24 14.24 0 0 1 1.585 1.05l.455-.596A14.999 14.999 0 0 1 56.924 5.9l-.596.455c.384.502.735 1.032 1.05 1.585.33.579.602 1.196.827 1.875l.712-.236c.409 1.233.663 2.638.822 4.316l-.747.07c.119 1.264.184 2.694.218 4.343l.75-.016c.028 1.327.036 2.787.039 4.403l-.75.001.001 2.204v2.55H60v5.1h-.75v2.55l-.001 2.204h.75a231.431 231.431 0 0 1-.039 4.404l-.75-.016c-.034 1.65-.099 3.08-.218 4.343l.747.07c-.159 1.678-.413 3.083-.822 4.316l-.712-.236a10.255 10.255 0 0 1-.827 1.875 14.242 14.242 0 0 1-1.05 1.585l.596.455a14.997 14.997 0 0 1-2.824 2.824l-.455-.596c-.502.384-1.032.735-1.585 1.05-.579.33-1.196.602-1.875.827l.236.712c-1.233.409-2.638.663-4.316.822l-.07-.747c-1.264.119-2.694.184-4.343.218l.016.75c-1.327.028-2.787.036-4.403.039l-.001-.75-2.204.001h-2.55V60h-5.1v-.75H24.9l-2.204-.001v.75a231.431 231.431 0 0 1-4.404-.039l.016-.75c-1.65-.034-3.08-.099-4.343-.218l-.07.747c-1.678-.159-3.083-.413-4.316-.822l.236-.712a10.258 10.258 0 0 1-1.875-.827 14.252 14.252 0 0 1-1.585-1.05l-.455.596A14.999 14.999 0 0 1 3.076 54.1l.596-.455a14.24 14.24 0 0 1-1.05-1.585 10.259 10.259 0 0 1-.827-1.875l-.712.236C.674 49.188.42 47.783.262 46.105l.746-.07C.89 44.77.824 43.34.79 41.692l-.75.016Z"/><path fill="#fff" fill-rule="evenodd" d="M35.643 32.145c-.297-.743-.445-1.114-.401-1.275a.42.42 0 0 1 .182-.27c.134-.1.463-.1 1.123-.1.742 0 1.499.046 2.236-.05a6 6 0 0 0 5.166-5.166c.051-.39.051-.855.051-1.784 0-.928 0-1.393-.051-1.783a6 6 0 0 0-5.166-5.165c-.39-.052-.854-.052-1.783-.052h-7.72c-4.934 0-7.401 0-9.244 1.051a8 8 0 0 0-2.985 2.986C16.057 22.28 16.003 24.58 16 29 15.998 31.075 16 33.15 16 35.224A7.778 7.778 0 0 0 23.778 43H28.5c1.394 0 2.09 0 2.67-.116a6 6 0 0 0 4.715-4.714c.115-.58.115-1.301.115-2.744 0-1.31 0-1.964-.114-2.49a4.998 4.998 0 0 0-.243-.792Z" clip-rule="evenodd"/><path fill="#9EA9A9" fill-rule="evenodd" d="M37 18h-7.72c-2.494 0-4.266.002-5.647.126-1.361.122-2.197.354-2.854.728a6.5 6.5 0 0 0-2.425 2.426c-.375.657-.607 1.492-.729 2.853-.11 1.233-.123 2.777-.125 4.867 0 .7 0 1.05.097 1.181.096.13.182.181.343.2.163.02.518-.18 1.229-.581a6.195 6.195 0 0 1 3.053-.8H37c.977 0 1.32-.003 1.587-.038a4.5 4.5 0 0 0 3.874-3.874c.036-.268.039-.611.039-1.588 0-.976-.003-1.319-.038-1.587a4.5 4.5 0 0 0-3.875-3.874C38.32 18.004 37.977 18 37 18Zm-7.364 12.5h-7.414a4.722 4.722 0 0 0-4.722 4.723 6.278 6.278 0 0 0 6.278 6.278H28.5c1.466 0 1.98-.008 2.378-.087a4.5 4.5 0 0 0 3.535-3.536c.08-.397.087-.933.087-2.451 0-1.391-.009-1.843-.08-2.17a3.5 3.5 0 0 0-2.676-2.676c-.328-.072-.762-.08-2.108-.08Z" clip-rule="evenodd"/></g><defs><clipPath id="q"><path fill="#fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>`,GLOBE_ICON:He`<svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="#fff" fill-rule="evenodd" d="M15.5 8a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0Zm-2.113.75c.301 0 .535.264.47.558a6.01 6.01 0 0 1-2.867 3.896c-.203.116-.42-.103-.334-.32.409-1.018.691-2.274.797-3.657a.512.512 0 0 1 .507-.477h1.427Zm.47-2.058c.065.294-.169.558-.47.558H11.96a.512.512 0 0 1-.507-.477c-.106-1.383-.389-2.638-.797-3.656-.087-.217.13-.437.333-.32a6.01 6.01 0 0 1 2.868 3.895Zm-4.402.558c.286 0 .515-.24.49-.525-.121-1.361-.429-2.534-.83-3.393-.279-.6-.549-.93-.753-1.112a.535.535 0 0 0-.724 0c-.204.182-.474.513-.754 1.112-.4.859-.708 2.032-.828 3.393a.486.486 0 0 0 .49.525h2.909Zm-5.415 0c.267 0 .486-.21.507-.477.106-1.383.389-2.638.797-3.656.087-.217-.13-.437-.333-.32a6.01 6.01 0 0 0-2.868 3.895c-.065.294.169.558.47.558H4.04ZM2.143 9.308c-.065-.294.169-.558.47-.558H4.04c.267 0 .486.21.507.477.106 1.383.389 2.639.797 3.657.087.217-.13.436-.333.32a6.01 6.01 0 0 1-2.868-3.896Zm3.913-.033a.486.486 0 0 1 .49-.525h2.909c.286 0 .515.24.49.525-.121 1.361-.428 2.535-.83 3.394-.279.6-.549.93-.753 1.112a.535.535 0 0 1-.724 0c-.204-.182-.474-.513-.754-1.112-.4-.859-.708-2.033-.828-3.394Z" clip-rule="evenodd"/></svg>`},s5=$e`.wcm-toolbar-placeholder{top:0;bottom:0;left:0;right:0;width:100%;position:absolute;display:block;pointer-events:none;height:100px;border-radius:calc(var(--wcm-background-border-radius) * .9);background-color:var(--wcm-background-color);background-position:center;background-size:cover}.wcm-toolbar{height:38px;display:flex;position:relative;margin:5px 15px 5px 5px;justify-content:space-between;align-items:center}.wcm-toolbar img,.wcm-toolbar svg{height:28px;object-position:left center;object-fit:contain}#wcm-wc-logo path{fill:var(--wcm-accent-fill-color)}button{width:28px;height:28px;border-radius:var(--wcm-icon-button-border-radius);border:0;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:var(--wcm-color-bg-1);box-shadow:0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-bg-2)}button svg{display:block;object-position:center}button path{fill:var(--wcm-color-fg-1)}.wcm-toolbar div{display:flex}@media(hover:hover){button:hover{background-color:var(--wcm-color-bg-2)}}`;var o5=Object.defineProperty,a5=Object.getOwnPropertyDescriptor,c5=(t,e,r,n)=>{for(var i=n>1?void 0:n?a5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&o5(e,r,i),i};let ec=class extends pe{render(){return Y`<div class="wcm-toolbar-placeholder"></div><div class="wcm-toolbar">${Pe.WALLET_CONNECT_LOGO} <button @click="${zr.close}">${Pe.CROSS_ICON}</button></div>`}};ec.styles=[be.globalCss,s5],ec=c5([xe("wcm-modal-backcard")],ec);const l5=$e`main{padding:20px;padding-top:0;width:100%}`;var u5=Object.defineProperty,h5=Object.getOwnPropertyDescriptor,d5=(t,e,r,n)=>{for(var i=n>1?void 0:n?h5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&u5(e,r,i),i};let tc=class extends pe{render(){return Y`<main><slot></slot></main>`}};tc.styles=[be.globalCss,l5],tc=d5([xe("wcm-modal-content")],tc);const f5=$e`footer{padding:10px;display:flex;flex-direction:column;align-items:inherit;justify-content:inherit;border-top:1px solid var(--wcm-color-bg-2)}`;var p5=Object.defineProperty,g5=Object.getOwnPropertyDescriptor,m5=(t,e,r,n)=>{for(var i=n>1?void 0:n?g5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&p5(e,r,i),i};let rc=class extends pe{render(){return Y`<footer><slot></slot></footer>`}};rc.styles=[be.globalCss,f5],rc=m5([xe("wcm-modal-footer")],rc);const w5=$e`header{display:flex;justify-content:center;align-items:center;padding:20px;position:relative}.wcm-border{border-bottom:1px solid var(--wcm-color-bg-2);margin-bottom:20px}header button{padding:15px 20px}header button:active{opacity:.5}@media(hover:hover){header button:hover{opacity:.5}}.wcm-back-btn{position:absolute;left:0}.wcm-action-btn{position:absolute;right:0}path{fill:var(--wcm-accent-color)}`;var y5=Object.defineProperty,v5=Object.getOwnPropertyDescriptor,Pi=(t,e,r,n)=>{for(var i=n>1?void 0:n?v5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&y5(e,r,i),i};let on=class extends pe{constructor(){super(...arguments),this.title="",this.onAction=void 0,this.actionIcon=void 0,this.border=!1}backBtnTemplate(){return Y`<button class="wcm-back-btn" @click="${ze.goBack}">${Pe.BACK_ICON}</button>`}actionBtnTemplate(){return Y`<button class="wcm-action-btn" @click="${this.onAction}">${this.actionIcon}</button>`}render(){const t={"wcm-border":this.border},e=ze.state.history.length>1,r=this.title?Y`<wcm-text variant="big-bold">${this.title}</wcm-text>`:Y`<slot></slot>`;return Y`<header class="${gr(t)}">${e?this.backBtnTemplate():null} ${r} ${this.onAction?this.actionBtnTemplate():null}</header>`}};on.styles=[be.globalCss,w5],Pi([le()],on.prototype,"title",2),Pi([le()],on.prototype,"onAction",2),Pi([le()],on.prototype,"actionIcon",2),Pi([le({type:Boolean})],on.prototype,"border",2),on=Pi([xe("wcm-modal-header")],on);const ie={MOBILE_BREAKPOINT:600,WCM_RECENT_WALLET_DATA:"WCM_RECENT_WALLET_DATA",EXPLORER_WALLET_URL:"https://explorer.walletconnect.com/?type=wallet",getShadowRootElement(t,e){const r=t.renderRoot.querySelector(e);if(!r)throw new Error(`${e} not found`);return r},getWalletIcon({id:t,image_id:e}){const{walletImages:r}=Ut.state;return r!=null&&r[t]?r[t]:e?Rt.getWalletImageUrl(e):""},getWalletName(t,e=!1){return e&&t.length>8?`${t.substring(0,8)}..`:t},isMobileAnimation(){return window.innerWidth<=ie.MOBILE_BREAKPOINT},async preloadImage(t){const e=new Promise((r,n)=>{const i=new Image;i.onload=r,i.onerror=n,i.crossOrigin="anonymous",i.src=t});return Promise.race([e,te.wait(3e3)])},getErrorMessage(t){return t instanceof Error?t.message:"Unknown Error"},debounce(t,e=500){let r;return(...n)=>{function i(){t(...n)}r&&clearTimeout(r),r=setTimeout(i,e)}},handleMobileLinking(t){const{walletConnectUri:e}=Ye.state,{mobile:r,name:n}=t,i=r==null?void 0:r.native,s=r==null?void 0:r.universal;ie.setRecentWallet(t);function o(a){let c="";i?c=te.formatUniversalUrl(i,a,n):s&&(c=te.formatNativeUrl(s,a,n)),te.openHref(c,"_self")}e&&o(e)},handleAndroidLinking(){const{walletConnectUri:t}=Ye.state;t&&(te.setWalletConnectAndroidDeepLink(t),te.openHref(t,"_self"))},async handleUriCopy(){const{walletConnectUri:t}=Ye.state;if(t)try{await navigator.clipboard.writeText(t),Sr.openToast("Link copied","success")}catch{Sr.openToast("Failed to copy","error")}},getCustomImageUrls(){const{walletImages:t}=Ut.state,e=Object.values(t??{});return Object.values(e)},truncate(t,e=8){return t.length<=e?t:`${t.substring(0,4)}...${t.substring(t.length-4)}`},setRecentWallet(t){try{localStorage.setItem(ie.WCM_RECENT_WALLET_DATA,JSON.stringify(t))}catch{console.info("Unable to set recent wallet")}},getRecentWallet(){try{const t=localStorage.getItem(ie.WCM_RECENT_WALLET_DATA);return t?JSON.parse(t):void 0}catch{console.info("Unable to get recent wallet")}},caseSafeIncludes(t,e){return t.toUpperCase().includes(e.toUpperCase())},openWalletExplorerUrl(){te.openHref(ie.EXPLORER_WALLET_URL,"_blank")},getCachedRouterWalletPlatforms(){const{desktop:t,mobile:e}=te.getWalletRouterData(),r=!!(t!=null&&t.native),n=!!(t!=null&&t.universal),i=!!(e!=null&&e.native)||!!(e!=null&&e.universal);return{isDesktop:r,isMobile:i,isWeb:n}},goToConnectingView(t){ze.setData({Wallet:t});const e=te.isMobile(),{isDesktop:r,isWeb:n,isMobile:i}=ie.getCachedRouterWalletPlatforms();e?i?ze.push("MobileConnecting"):n?ze.push("WebConnecting"):ze.push("InstallWallet"):r?ze.push("DesktopConnecting"):n?ze.push("WebConnecting"):i?ze.push("MobileQrcodeConnecting"):ze.push("InstallWallet")}},b5=$e`.wcm-router{overflow:hidden;will-change:transform}.wcm-content{display:flex;flex-direction:column}`;var _5=Object.defineProperty,E5=Object.getOwnPropertyDescriptor,nc=(t,e,r,n)=>{for(var i=n>1?void 0:n?E5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&_5(e,r,i),i};let Ni=class extends pe{constructor(){super(),this.view=ze.state.view,this.prevView=ze.state.view,this.unsubscribe=void 0,this.oldHeight="0px",this.resizeObserver=void 0,this.unsubscribe=ze.subscribe(t=>{this.view!==t.view&&this.onChangeRoute()})}firstUpdated(){this.resizeObserver=new ResizeObserver(([t])=>{const e=`${t.contentRect.height}px`;this.oldHeight!=="0px"&&sn(this.routerEl,{height:[this.oldHeight,e]},{duration:.2}),this.oldHeight=e}),this.resizeObserver.observe(this.contentEl)}disconnectedCallback(){var t,e;(t=this.unsubscribe)==null||t.call(this),(e=this.resizeObserver)==null||e.disconnect()}get routerEl(){return ie.getShadowRootElement(this,".wcm-router")}get contentEl(){return ie.getShadowRootElement(this,".wcm-content")}viewTemplate(){switch(this.view){case"ConnectWallet":return Y`<wcm-connect-wallet-view></wcm-connect-wallet-view>`;case"DesktopConnecting":return Y`<wcm-desktop-connecting-view></wcm-desktop-connecting-view>`;case"MobileConnecting":return Y`<wcm-mobile-connecting-view></wcm-mobile-connecting-view>`;case"WebConnecting":return Y`<wcm-web-connecting-view></wcm-web-connecting-view>`;case"MobileQrcodeConnecting":return Y`<wcm-mobile-qr-connecting-view></wcm-mobile-qr-connecting-view>`;case"WalletExplorer":return Y`<wcm-wallet-explorer-view></wcm-wallet-explorer-view>`;case"Qrcode":return Y`<wcm-qrcode-view></wcm-qrcode-view>`;case"InstallWallet":return Y`<wcm-install-wallet-view></wcm-install-wallet-view>`;default:return Y`<div>Not Found</div>`}}async onChangeRoute(){await sn(this.routerEl,{opacity:[1,0],scale:[1,1.02]},{duration:.15,delay:.1}).finished,this.view=ze.state.view,sn(this.routerEl,{opacity:[0,1],scale:[.99,1]},{duration:.37,delay:.05})}render(){return Y`<div class="wcm-router"><div class="wcm-content">${this.viewTemplate()}</div></div>`}};Ni.styles=[be.globalCss,b5],nc([Mt()],Ni.prototype,"view",2),nc([Mt()],Ni.prototype,"prevView",2),Ni=nc([xe("wcm-modal-router")],Ni);const S5=$e`div{height:36px;width:max-content;display:flex;justify-content:center;align-items:center;padding:9px 15px 11px;position:absolute;top:12px;box-shadow:0 6px 14px -6px rgba(10,16,31,.3),0 10px 32px -4px rgba(10,16,31,.15);z-index:2;left:50%;transform:translateX(-50%);pointer-events:none;backdrop-filter:blur(20px) saturate(1.8);-webkit-backdrop-filter:blur(20px) saturate(1.8);border-radius:var(--wcm-notification-border-radius);border:1px solid var(--wcm-color-overlay);background-color:var(--wcm-color-overlay)}svg{margin-right:5px}@-moz-document url-prefix(){div{background-color:var(--wcm-color-bg-3)}}.wcm-success path{fill:var(--wcm-accent-color)}.wcm-error path{fill:var(--wcm-error-color)}`;var x5=Object.defineProperty,C5=Object.getOwnPropertyDescriptor,jd=(t,e,r,n)=>{for(var i=n>1?void 0:n?C5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&x5(e,r,i),i};let Ms=class extends pe{constructor(){super(),this.open=!1,this.unsubscribe=void 0,this.timeout=void 0,this.unsubscribe=Sr.subscribe(t=>{t.open?(this.open=!0,this.timeout=setTimeout(()=>Sr.closeToast(),2200)):(this.open=!1,clearTimeout(this.timeout))})}disconnectedCallback(){var t;(t=this.unsubscribe)==null||t.call(this),clearTimeout(this.timeout),Sr.closeToast()}render(){const{message:t,variant:e}=Sr.state,r={"wcm-success":e==="success","wcm-error":e==="error"};return this.open?Y`<div class="${gr(r)}">${e==="success"?Pe.CHECKMARK_ICON:null} ${e==="error"?Pe.CROSS_ICON:null}<wcm-text variant="small-regular">${t}</wcm-text></div>`:null}};Ms.styles=[be.globalCss,S5],jd([Mt()],Ms.prototype,"open",2),Ms=jd([xe("wcm-modal-toast")],Ms);const D5=.1,kd=2.5,mr=7;function ic(t,e,r){return t===e?!1:(t-e<0?e-t:t-e)<=r+D5}function I5(t,e){const r=Array.prototype.slice.call(Oi.create(t,{errorCorrectionLevel:e}).modules.data,0),n=Math.sqrt(r.length);return r.reduce((i,s,o)=>(o%n===0?i.push([s]):i[i.length-1].push(s))&&i,[])}const O5={generate(t,e,r){const n="#141414",i="#ffffff",s=[],o=I5(t,"Q"),a=e/o.length,c=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];c.forEach(({x:_,y:b})=>{const C=(o.length-mr)*a*_,I=(o.length-mr)*a*b,v=.45;for(let E=0;E<c.length;E+=1){const w=a*(mr-E*2);s.push(He`<rect fill="${E%2===0?n:i}" height="${w}" rx="${w*v}" ry="${w*v}" width="${w}" x="${C+a*E}" y="${I+a*E}">`)}});const u=Math.floor((r+25)/a),d=o.length/2-u/2,f=o.length/2+u/2-1,g=[];o.forEach((_,b)=>{_.forEach((C,I)=>{if(o[b][I]&&!(b<mr&&I<mr||b>o.length-(mr+1)&&I<mr||b<mr&&I>o.length-(mr+1))&&!(b>d&&b<f&&I>d&&I<f)){const v=b*a+a/2,E=I*a+a/2;g.push([v,E])}})});const y={};return g.forEach(([_,b])=>{y[_]?y[_].push(b):y[_]=[b]}),Object.entries(y).map(([_,b])=>{const C=b.filter(I=>b.every(v=>!ic(I,v,a)));return[Number(_),C]}).forEach(([_,b])=>{b.forEach(C=>{s.push(He`<circle cx="${_}" cy="${C}" fill="${n}" r="${a/kd}">`)})}),Object.entries(y).filter(([_,b])=>b.length>1).map(([_,b])=>{const C=b.filter(I=>b.some(v=>ic(I,v,a)));return[Number(_),C]}).map(([_,b])=>{b.sort((I,v)=>I<v?-1:1);const C=[];for(const I of b){const v=C.find(E=>E.some(w=>ic(I,w,a)));v?v.push(I):C.push([I])}return[_,C.map(I=>[I[0],I[I.length-1]])]}).forEach(([_,b])=>{b.forEach(([C,I])=>{s.push(He`<line x1="${_}" x2="${_}" y1="${C}" y2="${I}" stroke="${n}" stroke-width="${a/(kd/2)}" stroke-linecap="round">`)})}),s}},A5=$e`@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}div{position:relative;user-select:none;display:block;overflow:hidden;aspect-ratio:1/1;animation:fadeIn ease .2s}.wcm-dark{background-color:#fff;border-radius:var(--wcm-container-border-radius);padding:18px;box-shadow:0 2px 5px #000}svg:first-child,wcm-wallet-image{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{width:25%;height:25%;border-radius:var(--wcm-wallet-icon-border-radius)}svg:first-child{transform:translateY(-50%) translateX(-50%) scale(.9)}svg:first-child path:first-child{fill:var(--wcm-accent-color)}svg:first-child path:last-child{stroke:var(--wcm-color-overlay)}`;var $5=Object.defineProperty,T5=Object.getOwnPropertyDescriptor,Ln=(t,e,r,n)=>{for(var i=n>1?void 0:n?T5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&$5(e,r,i),i};let wr=class extends pe{constructor(){super(...arguments),this.uri="",this.size=0,this.imageId=void 0,this.walletId=void 0,this.imageUrl=void 0}svgTemplate(){const t=Er.state.themeMode==="light"?this.size:this.size-36;return He`<svg height="${t}" width="${t}">${O5.generate(this.uri,t,t/4)}</svg>`}render(){const t={"wcm-dark":Er.state.themeMode==="dark"};return Y`<div style="${`width: ${this.size}px`}" class="${gr(t)}">${this.walletId||this.imageUrl?Y`<wcm-wallet-image walletId="${Tt(this.walletId)}" imageId="${Tt(this.imageId)}" imageUrl="${Tt(this.imageUrl)}"></wcm-wallet-image>`:Pe.WALLET_CONNECT_ICON_COLORED} ${this.svgTemplate()}</div>`}};wr.styles=[be.globalCss,A5],Ln([le()],wr.prototype,"uri",2),Ln([le({type:Number})],wr.prototype,"size",2),Ln([le()],wr.prototype,"imageId",2),Ln([le()],wr.prototype,"walletId",2),Ln([le()],wr.prototype,"imageUrl",2),wr=Ln([xe("wcm-qrcode")],wr);const R5=$e`:host{position:relative;height:28px;width:80%}input{width:100%;height:100%;line-height:28px!important;border-radius:var(--wcm-input-border-radius);font-style:normal;font-family:-apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,'Helvetica Neue',sans-serif;font-feature-settings:'case' on;font-weight:500;font-size:16px;letter-spacing:-.03em;padding:0 10px 0 34px;transition:.2s all ease;color:var(--wcm-color-fg-1);background-color:var(--wcm-color-bg-3);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay);caret-color:var(--wcm-accent-color)}input::placeholder{color:var(--wcm-color-fg-2)}svg{left:10px;top:4px;pointer-events:none;position:absolute;width:20px;height:20px}input:focus-within{box-shadow:inset 0 0 0 1px var(--wcm-accent-color)}path{fill:var(--wcm-color-fg-2)}`;var P5=Object.defineProperty,N5=Object.getOwnPropertyDescriptor,Bd=(t,e,r,n)=>{for(var i=n>1?void 0:n?N5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&P5(e,r,i),i};let Us=class extends pe{constructor(){super(...arguments),this.onChange=()=>null}render(){return Y`<input type="text" @input="${this.onChange}" placeholder="Search wallets"> ${Pe.SEARCH_ICON}`}};Us.styles=[be.globalCss,R5],Bd([le()],Us.prototype,"onChange",2),Us=Bd([xe("wcm-search-input")],Us);const L5=$e`@keyframes rotate{100%{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}svg{animation:rotate 2s linear infinite;display:flex;justify-content:center;align-items:center}svg circle{stroke-linecap:round;animation:dash 1.5s ease infinite;stroke:var(--wcm-accent-color)}`;var M5=Object.defineProperty,U5=Object.getOwnPropertyDescriptor,F5=(t,e,r,n)=>{for(var i=n>1?void 0:n?U5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&M5(e,r,i),i};let sc=class extends pe{render(){return Y`<svg viewBox="0 0 50 50" width="24" height="24"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4" stroke="#fff"/></svg>`}};sc.styles=[be.globalCss,L5],sc=F5([xe("wcm-spinner")],sc);const j5=$e`span{font-style:normal;font-family:var(--wcm-font-family);font-feature-settings:var(--wcm-font-feature-settings)}.wcm-xsmall-bold{font-family:var(--wcm-text-xsmall-bold-font-family);font-weight:var(--wcm-text-xsmall-bold-weight);font-size:var(--wcm-text-xsmall-bold-size);line-height:var(--wcm-text-xsmall-bold-line-height);letter-spacing:var(--wcm-text-xsmall-bold-letter-spacing);text-transform:var(--wcm-text-xsmall-bold-text-transform)}.wcm-xsmall-regular{font-family:var(--wcm-text-xsmall-regular-font-family);font-weight:var(--wcm-text-xsmall-regular-weight);font-size:var(--wcm-text-xsmall-regular-size);line-height:var(--wcm-text-xsmall-regular-line-height);letter-spacing:var(--wcm-text-xsmall-regular-letter-spacing);text-transform:var(--wcm-text-xsmall-regular-text-transform)}.wcm-small-thin{font-family:var(--wcm-text-small-thin-font-family);font-weight:var(--wcm-text-small-thin-weight);font-size:var(--wcm-text-small-thin-size);line-height:var(--wcm-text-small-thin-line-height);letter-spacing:var(--wcm-text-small-thin-letter-spacing);text-transform:var(--wcm-text-small-thin-text-transform)}.wcm-small-regular{font-family:var(--wcm-text-small-regular-font-family);font-weight:var(--wcm-text-small-regular-weight);font-size:var(--wcm-text-small-regular-size);line-height:var(--wcm-text-small-regular-line-height);letter-spacing:var(--wcm-text-small-regular-letter-spacing);text-transform:var(--wcm-text-small-regular-text-transform)}.wcm-medium-regular{font-family:var(--wcm-text-medium-regular-font-family);font-weight:var(--wcm-text-medium-regular-weight);font-size:var(--wcm-text-medium-regular-size);line-height:var(--wcm-text-medium-regular-line-height);letter-spacing:var(--wcm-text-medium-regular-letter-spacing);text-transform:var(--wcm-text-medium-regular-text-transform)}.wcm-big-bold{font-family:var(--wcm-text-big-bold-font-family);font-weight:var(--wcm-text-big-bold-weight);font-size:var(--wcm-text-big-bold-size);line-height:var(--wcm-text-big-bold-line-height);letter-spacing:var(--wcm-text-big-bold-letter-spacing);text-transform:var(--wcm-text-big-bold-text-transform)}:host(*){color:var(--wcm-color-fg-1)}.wcm-color-primary{color:var(--wcm-color-fg-1)}.wcm-color-secondary{color:var(--wcm-color-fg-2)}.wcm-color-tertiary{color:var(--wcm-color-fg-3)}.wcm-color-inverse{color:var(--wcm-accent-fill-color)}.wcm-color-accnt{color:var(--wcm-accent-color)}.wcm-color-error{color:var(--wcm-error-color)}`;var k5=Object.defineProperty,B5=Object.getOwnPropertyDescriptor,oc=(t,e,r,n)=>{for(var i=n>1?void 0:n?B5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&k5(e,r,i),i};let Li=class extends pe{constructor(){super(...arguments),this.variant="medium-regular",this.color="primary"}render(){const t={"wcm-big-bold":this.variant==="big-bold","wcm-medium-regular":this.variant==="medium-regular","wcm-small-regular":this.variant==="small-regular","wcm-small-thin":this.variant==="small-thin","wcm-xsmall-regular":this.variant==="xsmall-regular","wcm-xsmall-bold":this.variant==="xsmall-bold","wcm-color-primary":this.color==="primary","wcm-color-secondary":this.color==="secondary","wcm-color-tertiary":this.color==="tertiary","wcm-color-inverse":this.color==="inverse","wcm-color-accnt":this.color==="accent","wcm-color-error":this.color==="error"};return Y`<span><slot class="${gr(t)}"></slot></span>`}};Li.styles=[be.globalCss,j5],oc([le()],Li.prototype,"variant",2),oc([le()],Li.prototype,"color",2),Li=oc([xe("wcm-text")],Li);const z5=$e`button{width:100%;height:100%;border-radius:var(--wcm-button-hover-highlight-border-radius);display:flex;align-items:flex-start}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}button>div{width:80px;padding:5px 0;display:flex;flex-direction:column;align-items:center}wcm-text{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}wcm-wallet-image{height:60px;width:60px;transition:all .2s ease;border-radius:var(--wcm-wallet-icon-border-radius);margin-bottom:5px}.wcm-sublabel{margin-top:2px}`;var q5=Object.defineProperty,H5=Object.getOwnPropertyDescriptor,Pr=(t,e,r,n)=>{for(var i=n>1?void 0:n?H5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&q5(e,r,i),i};let cr=class extends pe{constructor(){super(...arguments),this.onClick=()=>null,this.name="",this.walletId="",this.label=void 0,this.imageId=void 0,this.installed=!1,this.recent=!1}sublabelTemplate(){return this.recent?Y`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">RECENT</wcm-text>`:this.installed?Y`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">INSTALLED</wcm-text>`:null}handleClick(){Ec.click({name:"WALLET_BUTTON",walletId:this.walletId}),this.onClick()}render(){var t;return Y`<button @click="${this.handleClick.bind(this)}"><div><wcm-wallet-image walletId="${this.walletId}" imageId="${Tt(this.imageId)}"></wcm-wallet-image><wcm-text variant="xsmall-regular">${(t=this.label)!=null?t:ie.getWalletName(this.name,!0)}</wcm-text>${this.sublabelTemplate()}</div></button>`}};cr.styles=[be.globalCss,z5],Pr([le()],cr.prototype,"onClick",2),Pr([le()],cr.prototype,"name",2),Pr([le()],cr.prototype,"walletId",2),Pr([le()],cr.prototype,"label",2),Pr([le()],cr.prototype,"imageId",2),Pr([le({type:Boolean})],cr.prototype,"installed",2),Pr([le({type:Boolean})],cr.prototype,"recent",2),cr=Pr([xe("wcm-wallet-button")],cr);const W5=$e`:host{display:block}div{overflow:hidden;position:relative;border-radius:inherit;width:100%;height:100%;background-color:var(--wcm-color-overlay)}svg{position:relative;width:100%;height:100%}div::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;border-radius:inherit;border:1px solid var(--wcm-color-overlay)}div img{width:100%;height:100%;object-fit:cover;object-position:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var V5=Object.defineProperty,K5=Object.getOwnPropertyDescriptor,Fs=(t,e,r,n)=>{for(var i=n>1?void 0:n?K5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&V5(e,r,i),i};let Mn=class extends pe{constructor(){super(...arguments),this.walletId="",this.imageId=void 0,this.imageUrl=void 0}render(){var t;const e=(t=this.imageUrl)!=null&&t.length?this.imageUrl:ie.getWalletIcon({id:this.walletId,image_id:this.imageId});return Y`${e.length?Y`<div><img crossorigin="anonymous" src="${e}" alt="${this.id}"></div>`:Pe.WALLET_PLACEHOLDER}`}};Mn.styles=[be.globalCss,W5],Fs([le()],Mn.prototype,"walletId",2),Fs([le()],Mn.prototype,"imageId",2),Fs([le()],Mn.prototype,"imageUrl",2),Mn=Fs([xe("wcm-wallet-image")],Mn);var G5=Object.defineProperty,Y5=Object.getOwnPropertyDescriptor,zd=(t,e,r,n)=>{for(var i=n>1?void 0:n?Y5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&G5(e,r,i),i};let ac=class extends pe{constructor(){super(),this.preload=!0,this.preloadData()}async loadImages(t){try{t!=null&&t.length&&await Promise.all(t.map(async e=>ie.preloadImage(e)))}catch{console.info("Unsuccessful attempt at preloading some images",t)}}async preloadListings(){if(Ut.state.enableExplorer){await Rt.getRecomendedWallets(),Ye.setIsDataLoaded(!0);const{recomendedWallets:t}=Rt.state,e=t.map(r=>ie.getWalletIcon(r));await this.loadImages(e)}else Ye.setIsDataLoaded(!0)}async preloadCustomImages(){const t=ie.getCustomImageUrls();await this.loadImages(t)}async preloadData(){try{this.preload&&(this.preload=!1,await Promise.all([this.preloadListings(),this.preloadCustomImages()]))}catch(t){console.error(t),Sr.openToast("Failed preloading","error")}}};zd([Mt()],ac.prototype,"preload",2),ac=zd([xe("wcm-explorer-context")],ac);var J5=Object.defineProperty,Z5=Object.getOwnPropertyDescriptor,Q5=(t,e,r,n)=>{for(var i=n>1?void 0:n?Z5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&J5(e,r,i),i};let qd=class extends pe{constructor(){super(),this.unsubscribeTheme=void 0,be.setTheme(),this.unsubscribeTheme=Er.subscribe(be.setTheme)}disconnectedCallback(){var t;(t=this.unsubscribeTheme)==null||t.call(this)}};qd=Q5([xe("wcm-theme-context")],qd);const X5=$e`@keyframes scroll{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(calc(-70px * 9),0,0)}}.wcm-slider{position:relative;overflow-x:hidden;padding:10px 0;margin:0 -20px;width:calc(100% + 40px)}.wcm-track{display:flex;width:calc(70px * 18);animation:scroll 20s linear infinite;opacity:.7}.wcm-track svg{margin:0 5px}wcm-wallet-image{width:60px;height:60px;margin:0 5px;border-radius:var(--wcm-wallet-icon-border-radius)}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-title{display:flex;align-items:center;margin-bottom:10px}.wcm-title svg{margin-right:6px}.wcm-title path{fill:var(--wcm-accent-color)}wcm-modal-footer .wcm-title{padding:0 10px}wcm-button-big{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);filter:drop-shadow(0 0 17px var(--wcm-color-bg-1))}wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-info-footer wcm-text{text-align:center;margin-bottom:15px}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var e6=Object.defineProperty,t6=Object.getOwnPropertyDescriptor,r6=(t,e,r,n)=>{for(var i=n>1?void 0:n?t6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&e6(e,r,i),i};let cc=class extends pe{onGoToQrcode(){ze.push("Qrcode")}render(){const{recomendedWallets:t}=Rt.state,e=[...t,...t],r=te.RECOMMENDED_WALLET_AMOUNT*2;return Y`<wcm-modal-header title="Connect your wallet" .onAction="${this.onGoToQrcode}" .actionIcon="${Pe.QRCODE_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-title">${Pe.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">WalletConnect</wcm-text></div><div class="wcm-slider"><div class="wcm-track">${[...Array(r)].map((n,i)=>{const s=e[i%e.length];return s?Y`<wcm-wallet-image walletId="${s.id}" imageId="${s.image_id}"></wcm-wallet-image>`:Pe.WALLET_PLACEHOLDER})}</div><wcm-button-big @click="${ie.handleAndroidLinking}"><wcm-text variant="medium-regular" color="inverse">Select Wallet</wcm-text></wcm-button-big></div></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">Choose WalletConnect to see supported apps on your device</wcm-text></wcm-info-footer>`}};cc.styles=[be.globalCss,X5],cc=r6([xe("wcm-android-wallet-selection")],cc);const n6=$e`@keyframes loading{to{stroke-dashoffset:0}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(1px,0,0)}30%,50%,70%{transform:translate3d(-2px,0,0)}40%,60%{transform:translate3d(2px,0,0)}}:host{display:flex;flex-direction:column;align-items:center}div{position:relative;width:110px;height:110px;display:flex;justify-content:center;align-items:center;margin:40px 0 20px 0;transform:translate3d(0,0,0)}svg{position:absolute;width:110px;height:110px;fill:none;stroke:transparent;stroke-linecap:round;stroke-width:2px;top:0;left:0}use{stroke:var(--wcm-accent-color);animation:loading 1s linear infinite}wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:90px;height:90px}wcm-text{margin-bottom:40px}.wcm-error svg{stroke:var(--wcm-error-color)}.wcm-error use{display:none}.wcm-error{animation:shake .4s cubic-bezier(.36,.07,.19,.97) both}.wcm-stale svg,.wcm-stale use{display:none}`;var i6=Object.defineProperty,s6=Object.getOwnPropertyDescriptor,Un=(t,e,r,n)=>{for(var i=n>1?void 0:n?s6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&i6(e,r,i),i};let Nr=class extends pe{constructor(){super(...arguments),this.walletId=void 0,this.imageId=void 0,this.isError=!1,this.isStale=!1,this.label=""}svgLoaderTemplate(){var t,e;const r=(e=(t=Er.state.themeVariables)==null?void 0:t["--wcm-wallet-icon-large-border-radius"])!=null?e:be.getPreset("--wcm-wallet-icon-large-border-radius");let n=0;r.includes("%")?n=88/100*parseInt(r,10):n=parseInt(r,10),n*=1.17;const i=317-n*1.57,s=425-n*1.8;return Y`<svg viewBox="0 0 110 110" width="110" height="110"><rect id="wcm-loader" x="2" y="2" width="106" height="106" rx="${n}"/><use xlink:href="#wcm-loader" stroke-dasharray="106 ${i}" stroke-dashoffset="${s}"></use></svg>`}render(){const t={"wcm-error":this.isError,"wcm-stale":this.isStale};return Y`<div class="${gr(t)}">${this.svgLoaderTemplate()}<wcm-wallet-image walletId="${Tt(this.walletId)}" imageId="${Tt(this.imageId)}"></wcm-wallet-image></div><wcm-text variant="medium-regular" color="${this.isError?"error":"primary"}">${this.isError?"Connection declined":this.label}</wcm-text>`}};Nr.styles=[be.globalCss,n6],Un([le()],Nr.prototype,"walletId",2),Un([le()],Nr.prototype,"imageId",2),Un([le({type:Boolean})],Nr.prototype,"isError",2),Un([le({type:Boolean})],Nr.prototype,"isStale",2),Un([le()],Nr.prototype,"label",2),Nr=Un([xe("wcm-connector-waiting")],Nr);const Fn={manualWallets(){var t,e;const{mobileWallets:r,desktopWallets:n}=Ut.state,i=(t=Fn.recentWallet())==null?void 0:t.id,s=te.isMobile()?r:n,o=s==null?void 0:s.filter(a=>i!==a.id);return(e=te.isMobile()?o==null?void 0:o.map(({id:a,name:c,links:u})=>({id:a,name:c,mobile:u,links:u})):o==null?void 0:o.map(({id:a,name:c,links:u})=>({id:a,name:c,desktop:u,links:u})))!=null?e:[]},recentWallet(){return ie.getRecentWallet()},recomendedWallets(t=!1){var e;const r=t||(e=Fn.recentWallet())==null?void 0:e.id,{recomendedWallets:n}=Rt.state;return n.filter(i=>r!==i.id)}},Lr={onConnecting(t){ie.goToConnectingView(t)},manualWalletsTemplate(){return Fn.manualWallets().map(t=>Y`<wcm-wallet-button walletId="${t.id}" name="${t.name}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`)},recomendedWalletsTemplate(t=!1){return Fn.recomendedWallets(t).map(e=>Y`<wcm-wallet-button name="${e.name}" walletId="${e.id}" imageId="${e.image_id}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`)},recentWalletTemplate(){const t=Fn.recentWallet();if(t)return Y`<wcm-wallet-button name="${t.name}" walletId="${t.id}" imageId="${Tt(t.image_id)}" .recent="${!0}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`}},o6=$e`.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-desktop-title,.wcm-mobile-title{display:flex;align-items:center}.wcm-mobile-title{justify-content:space-between;margin-bottom:20px;margin-top:-10px}.wcm-desktop-title{margin-bottom:10px;padding:0 10px}.wcm-subtitle{display:flex;align-items:center}.wcm-subtitle:last-child path{fill:var(--wcm-color-fg-3)}.wcm-desktop-title svg,.wcm-mobile-title svg{margin-right:6px}.wcm-desktop-title path,.wcm-mobile-title path{fill:var(--wcm-accent-color)}`;var a6=Object.defineProperty,c6=Object.getOwnPropertyDescriptor,l6=(t,e,r,n)=>{for(var i=n>1?void 0:n?c6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&a6(e,r,i),i};let lc=class extends pe{render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Ut.state,r=t!=="ALL"&&e,n=Lr.manualWalletsTemplate(),i=Lr.recomendedWalletsTemplate();let s=[Lr.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>4||r;let a=[];o?a=s.slice(0,3):a=s;const c=!!a.length;return Y`<wcm-modal-header .border="${!0}" title="Connect your wallet" .onAction="${ie.handleUriCopy}" .actionIcon="${Pe.COPY_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-mobile-title"><div class="wcm-subtitle">${Pe.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">Mobile</wcm-text></div><div class="wcm-subtitle">${Pe.SCAN_ICON}<wcm-text variant="small-regular" color="secondary">Scan with your wallet</wcm-text></div></div><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>${c?Y`<wcm-modal-footer><div class="wcm-desktop-title">${Pe.DESKTOP_ICON}<wcm-text variant="small-regular" color="accent">Desktop</wcm-text></div><div class="wcm-grid">${a} ${o?Y`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-footer>`:null}`}};lc.styles=[be.globalCss,o6],lc=l6([xe("wcm-desktop-wallet-selection")],lc);const u6=$e`div{background-color:var(--wcm-color-bg-2);padding:10px 20px 15px 20px;border-top:1px solid var(--wcm-color-bg-3);text-align:center}a{color:var(--wcm-accent-color);text-decoration:none;transition:opacity .2s ease-in-out;display:inline}a:active{opacity:.8}@media(hover:hover){a:hover{opacity:.8}}`;var h6=Object.defineProperty,d6=Object.getOwnPropertyDescriptor,f6=(t,e,r,n)=>{for(var i=n>1?void 0:n?d6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&h6(e,r,i),i};let uc=class extends pe{render(){const{termsOfServiceUrl:t,privacyPolicyUrl:e}=Ut.state;return t??e?Y`<div><wcm-text variant="small-regular" color="secondary">By connecting your wallet to this app, you agree to the app's ${t?Y`<a href="${t}" target="_blank" rel="noopener noreferrer">Terms of Service</a>`:null} ${t&&e?"and":null} ${e?Y`<a href="${e}" target="_blank" rel="noopener noreferrer">Privacy Policy</a>`:null}</wcm-text></div>`:null}};uc.styles=[be.globalCss,u6],uc=f6([xe("wcm-legal-notice")],uc);const p6=$e`div{display:grid;grid-template-columns:repeat(4,80px);margin:0 -10px;justify-content:space-between;row-gap:10px}`;var g6=Object.defineProperty,m6=Object.getOwnPropertyDescriptor,w6=(t,e,r,n)=>{for(var i=n>1?void 0:n?m6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&g6(e,r,i),i};let hc=class extends pe{onQrcode(){ze.push("Qrcode")}render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Ut.state,r=t!=="ALL"&&e,n=Lr.manualWalletsTemplate(),i=Lr.recomendedWalletsTemplate();let s=[Lr.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>8||r;let a=[];o?a=s.slice(0,7):a=s;const c=!!a.length;return Y`<wcm-modal-header title="Connect your wallet" .onAction="${this.onQrcode}" .actionIcon="${Pe.QRCODE_ICON}"></wcm-modal-header>${c?Y`<wcm-modal-content><div>${a} ${o?Y`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-content>`:null}`}};hc.styles=[be.globalCss,p6],hc=w6([xe("wcm-mobile-wallet-selection")],hc);const y6=$e`:host{all:initial}.wcm-overlay{top:0;bottom:0;left:0;right:0;position:fixed;z-index:var(--wcm-z-index);overflow:hidden;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;background-color:var(--wcm-overlay-background-color);backdrop-filter:var(--wcm-overlay-backdrop-filter)}@media(max-height:720px) and (orientation:landscape){.wcm-overlay{overflow:scroll;align-items:flex-start;padding:20px 0}}.wcm-active{pointer-events:auto}.wcm-container{position:relative;max-width:360px;width:100%;outline:0;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) var(--wcm-container-border-radius) var(--wcm-container-border-radius);border:1px solid var(--wcm-color-overlay);overflow:hidden}.wcm-card{width:100%;position:relative;border-radius:var(--wcm-container-border-radius);overflow:hidden;box-shadow:0 6px 14px -6px rgba(10,16,31,.12),0 10px 32px -4px rgba(10,16,31,.1),0 0 0 1px var(--wcm-color-overlay);background-color:var(--wcm-color-bg-1);color:var(--wcm-color-fg-1)}@media(max-width:600px){.wcm-container{max-width:440px;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) 0 0}.wcm-card{border-radius:var(--wcm-container-border-radius) var(--wcm-container-border-radius) 0 0}.wcm-overlay{align-items:flex-end}}@media(max-width:440px){.wcm-container{border:0}}`;var v6=Object.defineProperty,b6=Object.getOwnPropertyDescriptor,dc=(t,e,r,n)=>{for(var i=n>1?void 0:n?b6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&v6(e,r,i),i};let jn=class extends pe{constructor(){super(),this.open=!1,this.active=!1,this.unsubscribeModal=void 0,this.abortController=void 0,this.unsubscribeModal=zr.subscribe(t=>{t.open?this.onOpenModalEvent():this.onCloseModalEvent()})}disconnectedCallback(){var t;(t=this.unsubscribeModal)==null||t.call(this)}get overlayEl(){return ie.getShadowRootElement(this,".wcm-overlay")}get containerEl(){return ie.getShadowRootElement(this,".wcm-container")}toggleBodyScroll(t){if(document.querySelector("body"))if(t){const e=document.getElementById("wcm-styles");e==null||e.remove()}else document.head.insertAdjacentHTML("beforeend",'<style id="wcm-styles">html,body{touch-action:none;overflow:hidden;overscroll-behavior:contain;}</style>')}onCloseModal(t){t.target===t.currentTarget&&zr.close()}onOpenModalEvent(){this.toggleBodyScroll(!1),this.addKeyboardEvents(),this.open=!0,setTimeout(async()=>{const t=ie.isMobileAnimation()?{y:["50vh","0vh"]}:{scale:[.98,1]},e=.1,r=.2;await Promise.all([sn(this.overlayEl,{opacity:[0,1]},{delay:e,duration:r}).finished,sn(this.containerEl,t,{delay:e,duration:r}).finished]),this.active=!0},0)}async onCloseModalEvent(){this.toggleBodyScroll(!0),this.removeKeyboardEvents();const t=ie.isMobileAnimation()?{y:["0vh","50vh"]}:{scale:[1,.98]},e=.2;await Promise.all([sn(this.overlayEl,{opacity:[1,0]},{duration:e}).finished,sn(this.containerEl,t,{duration:e}).finished]),this.containerEl.removeAttribute("style"),this.active=!1,this.open=!1}addKeyboardEvents(){this.abortController=new AbortController,window.addEventListener("keydown",t=>{var e;t.key==="Escape"?zr.close():t.key==="Tab"&&((e=t.target)!=null&&e.tagName.includes("wcm-")||this.containerEl.focus())},this.abortController),this.containerEl.focus()}removeKeyboardEvents(){var t;(t=this.abortController)==null||t.abort(),this.abortController=void 0}render(){const t={"wcm-overlay":!0,"wcm-active":this.active};return Y`<wcm-explorer-context></wcm-explorer-context><wcm-theme-context></wcm-theme-context><div id="wcm-modal" class="${gr(t)}" @click="${this.onCloseModal}" role="alertdialog" aria-modal="true"><div class="wcm-container" tabindex="0">${this.open?Y`<wcm-modal-backcard></wcm-modal-backcard><div class="wcm-card"><wcm-modal-router></wcm-modal-router><wcm-modal-toast></wcm-modal-toast></div>`:null}</div></div>`}};jn.styles=[be.globalCss,y6],dc([Mt()],jn.prototype,"open",2),dc([Mt()],jn.prototype,"active",2),jn=dc([xe("wcm-modal")],jn);const _6=$e`div{display:flex;margin-top:15px}slot{display:inline-block;margin:0 5px}wcm-button{margin:0 5px}`;var E6=Object.defineProperty,S6=Object.getOwnPropertyDescriptor,Mi=(t,e,r,n)=>{for(var i=n>1?void 0:n?S6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&E6(e,r,i),i};let an=class extends pe{constructor(){super(...arguments),this.isMobile=!1,this.isDesktop=!1,this.isWeb=!1,this.isRetry=!1}onMobile(){te.isMobile()?ze.replace("MobileConnecting"):ze.replace("MobileQrcodeConnecting")}onDesktop(){ze.replace("DesktopConnecting")}onWeb(){ze.replace("WebConnecting")}render(){return Y`<div>${this.isRetry?Y`<slot></slot>`:null} ${this.isMobile?Y`<wcm-button .onClick="${this.onMobile}" .iconLeft="${Pe.MOBILE_ICON}" variant="outline">Mobile</wcm-button>`:null} ${this.isDesktop?Y`<wcm-button .onClick="${this.onDesktop}" .iconLeft="${Pe.DESKTOP_ICON}" variant="outline">Desktop</wcm-button>`:null} ${this.isWeb?Y`<wcm-button .onClick="${this.onWeb}" .iconLeft="${Pe.GLOBE_ICON}" variant="outline">Web</wcm-button>`:null}</div>`}};an.styles=[be.globalCss,_6],Mi([le({type:Boolean})],an.prototype,"isMobile",2),Mi([le({type:Boolean})],an.prototype,"isDesktop",2),Mi([le({type:Boolean})],an.prototype,"isWeb",2),Mi([le({type:Boolean})],an.prototype,"isRetry",2),an=Mi([xe("wcm-platform-selection")],an);const x6=$e`button{display:flex;flex-direction:column;padding:5px 10px;border-radius:var(--wcm-button-hover-highlight-border-radius);height:100%;justify-content:flex-start}.wcm-icons{width:60px;height:60px;display:flex;flex-wrap:wrap;padding:7px;border-radius:var(--wcm-wallet-icon-border-radius);justify-content:space-between;align-items:center;margin-bottom:5px;background-color:var(--wcm-color-bg-2);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}.wcm-icons img{width:21px;height:21px;object-fit:cover;object-position:center;border-radius:calc(var(--wcm-wallet-icon-border-radius)/ 2);border:1px solid var(--wcm-color-overlay)}.wcm-icons svg{width:21px;height:21px}.wcm-icons img:nth-child(1),.wcm-icons img:nth-child(2),.wcm-icons svg:nth-child(1),.wcm-icons svg:nth-child(2){margin-bottom:4px}wcm-text{width:100%;text-align:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var C6=Object.defineProperty,D6=Object.getOwnPropertyDescriptor,I6=(t,e,r,n)=>{for(var i=n>1?void 0:n?D6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&C6(e,r,i),i};let fc=class extends pe{onClick(){ze.push("WalletExplorer")}render(){const{recomendedWallets:t}=Rt.state,e=Fn.manualWallets(),r=[...t,...e].reverse().slice(0,4);return Y`<button @click="${this.onClick}"><div class="wcm-icons">${r.map(n=>{const i=ie.getWalletIcon(n);if(i)return Y`<img crossorigin="anonymous" src="${i}">`;const s=ie.getWalletIcon({id:n.id});return s?Y`<img crossorigin="anonymous" src="${s}">`:Pe.WALLET_PLACEHOLDER})} ${[...Array(4-r.length)].map(()=>Pe.WALLET_PLACEHOLDER)}</div><wcm-text variant="xsmall-regular">View All</wcm-text></button>`}};fc.styles=[be.globalCss,x6],fc=I6([xe("wcm-view-all-wallets-button")],fc);const O6=$e`.wcm-qr-container{width:100%;display:flex;justify-content:center;align-items:center;aspect-ratio:1/1}`;var A6=Object.defineProperty,$6=Object.getOwnPropertyDescriptor,js=(t,e,r,n)=>{for(var i=n>1?void 0:n?$6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&A6(e,r,i),i};let kn=class extends pe{constructor(){super(),this.walletId="",this.imageId="",this.uri="",setTimeout(()=>{const{walletConnectUri:t}=Ye.state;this.uri=t},0)}get overlayEl(){return ie.getShadowRootElement(this,".wcm-qr-container")}render(){return Y`<div class="wcm-qr-container">${this.uri?Y`<wcm-qrcode size="${this.overlayEl.offsetWidth}" uri="${this.uri}" walletId="${Tt(this.walletId)}" imageId="${Tt(this.imageId)}"></wcm-qrcode>`:Y`<wcm-spinner></wcm-spinner>`}</div>`}};kn.styles=[be.globalCss,O6],js([le()],kn.prototype,"walletId",2),js([le()],kn.prototype,"imageId",2),js([Mt()],kn.prototype,"uri",2),kn=js([xe("wcm-walletconnect-qr")],kn);var T6=Object.defineProperty,R6=Object.getOwnPropertyDescriptor,P6=(t,e,r,n)=>{for(var i=n>1?void 0:n?R6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&T6(e,r,i),i};let pc=class extends pe{viewTemplate(){return te.isAndroid()?Y`<wcm-android-wallet-selection></wcm-android-wallet-selection>`:te.isMobile()?Y`<wcm-mobile-wallet-selection></wcm-mobile-wallet-selection>`:Y`<wcm-desktop-wallet-selection></wcm-desktop-wallet-selection>`}render(){return Y`${this.viewTemplate()}<wcm-legal-notice></wcm-legal-notice>`}};pc.styles=[be.globalCss],pc=P6([xe("wcm-connect-wallet-view")],pc);const N6=$e`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var L6=Object.defineProperty,M6=Object.getOwnPropertyDescriptor,Hd=(t,e,r,n)=>{for(var i=n>1?void 0:n?M6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&L6(e,r,i),i};let ks=class extends pe{constructor(){super(),this.isError=!1,this.openDesktopApp()}onFormatAndRedirect(t){const{desktop:e,name:r}=te.getWalletRouterData(),n=e==null?void 0:e.native;if(n){const i=te.formatNativeUrl(n,t,r);te.openHref(i,"_self")}}openDesktopApp(){const{walletConnectUri:t}=Ye.state,e=te.getWalletRouterData();ie.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=te.getWalletRouterData(),{isMobile:n,isWeb:i}=ie.getCachedRouterWalletPlatforms();return Y`<wcm-modal-header title="${t}" .onAction="${ie.handleUriCopy}" .actionIcon="${Pe.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Tt(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Connection can continue loading if ${t} is not installed on your device`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isWeb="${i}" .isRetry="${!0}"><wcm-button .onClick="${this.openDesktopApp.bind(this)}" .iconRight="${Pe.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};ks.styles=[be.globalCss,N6],Hd([Mt()],ks.prototype,"isError",2),ks=Hd([xe("wcm-desktop-connecting-view")],ks);const U6=$e`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}wcm-button{margin-top:15px}`;var F6=Object.defineProperty,j6=Object.getOwnPropertyDescriptor,k6=(t,e,r,n)=>{for(var i=n>1?void 0:n?j6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&F6(e,r,i),i};let gc=class extends pe{onInstall(t){t&&te.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,homepage:n}=te.getWalletRouterData();return Y`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Tt(r)}" label="Not Detected" .isStale="${!0}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Download ${t} to continue. If multiple browser extensions are installed, disable non ${t} ones and try again`}</wcm-text><wcm-button .onClick="${()=>this.onInstall(n)}" .iconLeft="${Pe.ARROW_DOWN_ICON}">Download</wcm-button></wcm-info-footer>`}};gc.styles=[be.globalCss,U6],gc=k6([xe("wcm-install-wallet-view")],gc);const B6=$e`wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:96px;height:96px;margin-bottom:20px}wcm-info-footer{display:flex;width:100%}.wcm-app-store{justify-content:space-between}.wcm-app-store wcm-wallet-image{margin-right:10px;margin-bottom:0;width:28px;height:28px;border-radius:var(--wcm-wallet-icon-small-border-radius)}.wcm-app-store div{display:flex;align-items:center}.wcm-app-store wcm-button{margin-right:-10px}.wcm-note{flex-direction:column;align-items:center;padding:5px 0}.wcm-note wcm-text{text-align:center}wcm-platform-selection{margin-top:-15px}.wcm-note wcm-text{margin-top:15px}.wcm-note wcm-text span{color:var(--wcm-accent-color)}`;var z6=Object.defineProperty,q6=Object.getOwnPropertyDescriptor,Wd=(t,e,r,n)=>{for(var i=n>1?void 0:n?q6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&z6(e,r,i),i};let Bs=class extends pe{constructor(){super(),this.isError=!1,this.openMobileApp()}onFormatAndRedirect(t,e=!1){const{mobile:r,name:n}=te.getWalletRouterData(),i=r==null?void 0:r.native,s=r==null?void 0:r.universal;if(i&&!e){const o=te.formatNativeUrl(i,t,n);te.openHref(o,"_self")}else if(s){const o=te.formatUniversalUrl(s,t,n);te.openHref(o,"_self")}}openMobileApp(t=!1){const{walletConnectUri:e}=Ye.state,r=te.getWalletRouterData();ie.setRecentWallet(r),e&&this.onFormatAndRedirect(e,t)}onGoToAppStore(t){t&&te.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,app:n,mobile:i}=te.getWalletRouterData(),{isWeb:s}=ie.getCachedRouterWalletPlatforms(),o=n==null?void 0:n.ios,a=i==null?void 0:i.universal;return Y`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Tt(r)}" label="Tap 'Open' to continue…" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer class="wcm-note"><wcm-platform-selection .isWeb="${s}" .isRetry="${!0}"><wcm-button .onClick="${()=>this.openMobileApp(!1)}" .iconRight="${Pe.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection>${a?Y`<wcm-text color="secondary" variant="small-thin">Still doesn't work? <span tabindex="0" @click="${()=>this.openMobileApp(!0)}">Try this alternate link</span></wcm-text>`:null}</wcm-info-footer><wcm-info-footer class="wcm-app-store"><div><wcm-wallet-image walletId="${e}" imageId="${Tt(r)}"></wcm-wallet-image><wcm-text>${`Get ${t}`}</wcm-text></div><wcm-button .iconRight="${Pe.ARROW_RIGHT_ICON}" .onClick="${()=>this.onGoToAppStore(o)}" variant="ghost">App Store</wcm-button></wcm-info-footer>`}};Bs.styles=[be.globalCss,B6],Wd([Mt()],Bs.prototype,"isError",2),Bs=Wd([xe("wcm-mobile-connecting-view")],Bs);const H6=$e`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var W6=Object.defineProperty,V6=Object.getOwnPropertyDescriptor,K6=(t,e,r,n)=>{for(var i=n>1?void 0:n?V6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&W6(e,r,i),i};let mc=class extends pe{render(){const{name:t,id:e,image_id:r}=te.getWalletRouterData(),{isDesktop:n,isWeb:i}=ie.getCachedRouterWalletPlatforms();return Y`<wcm-modal-header title="${t}" .onAction="${ie.handleUriCopy}" .actionIcon="${Pe.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr walletId="${e}" imageId="${Tt(r)}"></wcm-walletconnect-qr></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Scan this QR Code with your phone's camera or inside ${t} app`}</wcm-text><wcm-platform-selection .isDesktop="${n}" .isWeb="${i}"></wcm-platform-selection></wcm-info-footer>`}};mc.styles=[be.globalCss,H6],mc=K6([xe("wcm-mobile-qr-connecting-view")],mc);var G6=Object.defineProperty,Y6=Object.getOwnPropertyDescriptor,J6=(t,e,r,n)=>{for(var i=n>1?void 0:n?Y6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&G6(e,r,i),i};let wc=class extends pe{render(){return Y`<wcm-modal-header title="Scan the code" .onAction="${ie.handleUriCopy}" .actionIcon="${Pe.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>`}};wc.styles=[be.globalCss],wc=J6([xe("wcm-qrcode-view")],wc);const Z6=$e`wcm-modal-content{height:clamp(200px,60vh,600px);display:block;overflow:scroll;scrollbar-width:none;position:relative;margin-top:1px}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between;margin:-15px -10px;padding-top:20px}wcm-modal-content::after,wcm-modal-content::before{content:'';position:fixed;pointer-events:none;z-index:1;width:100%;height:20px;opacity:1}wcm-modal-content::before{box-shadow:0 -1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(var(--wcm-color-bg-1),rgba(255,255,255,0))}wcm-modal-content::after{box-shadow:0 1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(rgba(255,255,255,0),var(--wcm-color-bg-1));top:calc(100% - 20px)}wcm-modal-content::-webkit-scrollbar{display:none}.wcm-placeholder-block{display:flex;justify-content:center;align-items:center;height:100px;overflow:hidden}.wcm-empty,.wcm-loading{display:flex}.wcm-loading .wcm-placeholder-block{height:100%}.wcm-end-reached .wcm-placeholder-block{height:0;opacity:0}.wcm-empty .wcm-placeholder-block{opacity:1;height:100%}wcm-wallet-button{margin:calc((100% - 60px)/ 3) 0}`;var Q6=Object.defineProperty,X6=Object.getOwnPropertyDescriptor,Ui=(t,e,r,n)=>{for(var i=n>1?void 0:n?X6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Q6(e,r,i),i};const yc=40;let cn=class extends pe{constructor(){super(...arguments),this.loading=!Rt.state.wallets.listings.length,this.firstFetch=!Rt.state.wallets.listings.length,this.search="",this.endReached=!1,this.intersectionObserver=void 0,this.searchDebounce=ie.debounce(t=>{t.length>=1?(this.firstFetch=!0,this.endReached=!1,this.search=t,Rt.resetSearch(),this.fetchWallets()):this.search&&(this.search="",this.endReached=this.isLastPage(),Rt.resetSearch())})}firstUpdated(){this.createPaginationObserver()}disconnectedCallback(){var t;(t=this.intersectionObserver)==null||t.disconnect()}get placeholderEl(){return ie.getShadowRootElement(this,".wcm-placeholder-block")}createPaginationObserver(){this.intersectionObserver=new IntersectionObserver(([t])=>{t.isIntersecting&&!(this.search&&this.firstFetch)&&this.fetchWallets()}),this.intersectionObserver.observe(this.placeholderEl)}isLastPage(){const{wallets:t,search:e}=Rt.state,{listings:r,total:n}=this.search?e:t;return n<=yc||r.length>=n}async fetchWallets(){var t;const{wallets:e,search:r}=Rt.state,{listings:n,total:i,page:s}=this.search?r:e;if(!this.endReached&&(this.firstFetch||i>yc&&n.length<i))try{this.loading=!0;const o=(t=Ye.state.chains)==null?void 0:t.join(","),{listings:a}=await Rt.getWallets({page:this.firstFetch?1:s+1,entries:yc,search:this.search,version:2,chains:o}),c=a.map(u=>ie.getWalletIcon(u));await Promise.all([...c.map(async u=>ie.preloadImage(u)),te.wait(300)]),this.endReached=this.isLastPage()}catch(o){console.error(o),Sr.openToast(ie.getErrorMessage(o),"error")}finally{this.loading=!1,this.firstFetch=!1}}onConnect(t){te.isAndroid()?ie.handleMobileLinking(t):ie.goToConnectingView(t)}onSearchChange(t){const{value:e}=t.target;this.searchDebounce(e)}render(){const{wallets:t,search:e}=Rt.state,{listings:r}=this.search?e:t,n=this.loading&&!r.length,i=this.search.length>=3;let s=Lr.manualWalletsTemplate(),o=Lr.recomendedWalletsTemplate(!0);i&&(s=s.filter(({values:u})=>ie.caseSafeIncludes(u[0],this.search)),o=o.filter(({values:u})=>ie.caseSafeIncludes(u[0],this.search)));const a=!this.loading&&!r.length&&!o.length,c={"wcm-loading":n,"wcm-end-reached":this.endReached||!this.loading,"wcm-empty":a};return Y`<wcm-modal-header><wcm-search-input .onChange="${this.onSearchChange.bind(this)}"></wcm-search-input></wcm-modal-header><wcm-modal-content class="${gr(c)}"><div class="wcm-grid">${n?null:s} ${n?null:o} ${n?null:r.map(u=>Y`${u?Y`<wcm-wallet-button imageId="${u.image_id}" name="${u.name}" walletId="${u.id}" .onClick="${()=>this.onConnect(u)}"></wcm-wallet-button>`:null}`)}</div><div class="wcm-placeholder-block">${a?Y`<wcm-text variant="big-bold" color="secondary">No results found</wcm-text>`:null} ${!a&&this.loading?Y`<wcm-spinner></wcm-spinner>`:null}</div></wcm-modal-content>`}};cn.styles=[be.globalCss,Z6],Ui([Mt()],cn.prototype,"loading",2),Ui([Mt()],cn.prototype,"firstFetch",2),Ui([Mt()],cn.prototype,"search",2),Ui([Mt()],cn.prototype,"endReached",2),cn=Ui([xe("wcm-wallet-explorer-view")],cn);const e_=$e`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var t_=Object.defineProperty,r_=Object.getOwnPropertyDescriptor,Vd=(t,e,r,n)=>{for(var i=n>1?void 0:n?r_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&t_(e,r,i),i};let zs=class extends pe{constructor(){super(),this.isError=!1,this.openWebWallet()}onFormatAndRedirect(t){const{desktop:e,name:r}=te.getWalletRouterData(),n=e==null?void 0:e.universal;if(n){const i=te.formatUniversalUrl(n,t,r);te.openHref(i,"_blank")}}openWebWallet(){const{walletConnectUri:t}=Ye.state,e=te.getWalletRouterData();ie.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=te.getWalletRouterData(),{isMobile:n,isDesktop:i}=ie.getCachedRouterWalletPlatforms(),s=te.isMobile();return Y`<wcm-modal-header title="${t}" .onAction="${ie.handleUriCopy}" .actionIcon="${Pe.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Tt(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`${t} web app has opened in a new tab. Go there, accept the connection, and come back`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isDesktop="${s?!1:i}" .isRetry="${!0}"><wcm-button .onClick="${this.openWebWallet.bind(this)}" .iconRight="${Pe.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};zs.styles=[be.globalCss,e_],Vd([Mt()],zs.prototype,"isError",2),zs=Vd([xe("wcm-web-connecting-view")],zs);const n_=Object.freeze(Object.defineProperty({__proto__:null,get WcmModal(){return jn},get WcmQrCode(){return wr}},Symbol.toStringTag,{value:"Module"}));G.ICore=ob,G.ICrypto=ab,G.IEngine=Eb,G.IEngineEvents=_b,G.IExpirer=mb,G.IJsonRpcHistory=cb,G.IKeyChain=gb,G.IMessageTracker=lb,G.IPairing=wb,G.IPublisher=ub,G.IRelayer=hb,G.ISignClient=bb,G.ISignClientEvents=vb,G.IStore=db,G.ISubscriber=pb,G.ISubscriberTopicMap=fb,G.IVerify=yb,G.PAGE_SIZE=Jb,G.configureConnection=sb,G.connect=Bb,G.createSharedState=qb,G.decrypt=Hb,G.disconnect=Wb,G.emitter=Xr,G.getAccount=jb,G.getBalance=kb,G.getEvents=Vb,G.getFormattedRecordPlaintext=Lb,G.getRecords=Gb,G.getWalletConnectModalSignClient=Fe,G.importSharedState=Kb,G.projectId=Eh,G.requestCreateEvent=zb,G.requestSignature=Yb,G.shortenAddress=ha,G.signClient_puzzleProps=qv,G.useAccount=da,G.useBalance=Sb,G.useConnect=xb,G.useCreateEvent=Cb,G.useCreateSharedState=Db,G.useDecrypt=Tb,G.useDisconnect=Rb,G.useEvents=Pb,G.useImportSharedState=Nb,G.useOnSessionDelete=vs,G.useOnSessionEvent=vi,G.useOnSessionExpire=Rh,G.useOnSessionUpdate=ua,G.useRecords=Mb,G.useRequestCreateEvent=Ub,G.useRequestSignature=Fb,G.useSession=Gt,G.wc_aleo_chains=gi,G.wc_aleo_methods=ms,G.wc_events=ws,G.web3modal_puzzle_props=Sh,Object.defineProperty(G,Symbol.toStringTag,{value:"Module"})});
