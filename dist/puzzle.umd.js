(function(J,mt){typeof exports=="object"&&typeof module<"u"?mt(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],mt):(J=typeof globalThis<"u"?globalThis:J||self,mt(J["@puzzlehq/sdk"]=J["@puzzlehq/sdk"]||{},J.React))})(this,function(J,mt){"use strict";function J0(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:()=>t[r]})}}return e.default=t,Object.freeze(e)}const gr=J0(mt),X0={name:"@puzzlehq/sdk",displayName:"Puzzle SDK",version:"0.1.40",description:"Your portal to privacy",main:"./dist/puzzle.cjs.js",module:"./dist/puzzle.es.js",browser:"./dist/puzzle.umd.js",types:"./dist/types/src/index.d.ts",exports:{".":{import:"./dist/puzzle.es.js",require:"./dist/puzzle.cjs.js",browser:"./dist/puzzle.umd.js",types:"./dist/types/src/index.d.ts"}},type:"module",scripts:{build:"vite build && tsc --declaration --emitDeclarationOnly --outDir dist/types","type-check":"tsc --noEmit"},dependencies:{"@tanstack/react-query":"^4.29.5","@trpc/client":"^10.9.0","@trpc/react-query":"^10.9.0","@trpc/server":"^10.8.1","@types/debug":"^4.1.7","@walletconnect/modal-sign-html":"^2.6.2","@walletconnect/keyvaluestorage":"1.0.2","@walletconnect/types":"^2.9.0","@walletconnect/utils":"^2.9.0","@puzzlehq/types":"1.0.8",debug:"^4.3.4",eventemitter3:"^5.0.1",events:"^3.3.0",immer:"^9.0.19",react:"^18.2.0",ws:"^8.13.0",zustand:"^4.3.9"},devDependencies:{"@types/chrome":"^0.0.228","@types/node":"^18.11.18","@types/react":"^18.0.27","@types/react-dom":"^18.0.10",typescript:"^4.9.4",vite:"^4.4.7"},repository:{type:"git",url:"git+https://github.com/puzzlehq/puzzle-sdk.git"},keywords:["puzzle","aleo","aztec","web3","crypto\\"],author:"Puzzle",license:"ISC",bugs:{url:"https://github.com/puzzlehq/puzzle-sdk/issues"},homepage:"https://github.com/puzzlehq/puzzle-sdk#readme",pnpm:{patchedDependencies:{"@walletconnect/keyvaluestorage@1.0.2":"patches/@walletconnect__keyvaluestorage@1.0.2.patch"}}},eg=Symbol(),Nu=Object.getPrototypeOf,Wa=new WeakMap,tg=t=>t&&(Wa.has(t)?Wa.get(t):Nu(t)===Object.prototype||Nu(t)===Array.prototype),rg=t=>tg(t)&&t[eg]||null,$u=(t,e=!0)=>{Wa.set(t,e)},Va=t=>typeof t=="object"&&t!==null,On=new WeakMap,_o=new WeakSet,ng=(t=Object.is,e=(u,d)=>new Proxy(u,d),r=u=>Va(u)&&!_o.has(u)&&(Array.isArray(u)||!(Symbol.iterator in u))&&!(u instanceof WeakMap)&&!(u instanceof WeakSet)&&!(u instanceof Error)&&!(u instanceof Number)&&!(u instanceof Date)&&!(u instanceof String)&&!(u instanceof RegExp)&&!(u instanceof ArrayBuffer),n=u=>{switch(u.status){case"fulfilled":return u.value;case"rejected":throw u.reason;default:throw u}},i=new WeakMap,s=(u,d,f=n)=>{const p=i.get(u);if((p==null?void 0:p[0])===d)return p[1];const y=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u));return $u(y,!0),i.set(u,[d,y]),Reflect.ownKeys(u).forEach(w=>{if(Object.getOwnPropertyDescriptor(y,w))return;const S=Reflect.get(u,w),E={value:S,enumerable:!0,configurable:!0};if(_o.has(S))$u(S,!1);else if(S instanceof Promise)delete E.value,E.get=()=>f(S);else if(On.has(S)){const[D,b]=On.get(S);E.value=s(D,b(),f)}Object.defineProperty(y,w,E)}),Object.preventExtensions(y)},o=new WeakMap,a=[1,1],c=u=>{if(!Va(u))throw new Error("object required");const d=o.get(u);if(d)return d;let f=a[0];const p=new Set,y=(P,N=++a[0])=>{f!==N&&(f=N,p.forEach(z=>z(P,N)))};let w=a[1];const S=(P=++a[1])=>(w!==P&&!p.size&&(w=P,D.forEach(([N])=>{const z=N[1](P);z>f&&(f=z)})),f),E=P=>(N,z)=>{const W=[...N];W[1]=[P,...W[1]],y(W,z)},D=new Map,b=(P,N)=>{if(p.size){const z=N[3](E(P));D.set(P,[N,z])}else D.set(P,[N])},C=P=>{var N;const z=D.get(P);z&&(D.delete(P),(N=z[1])==null||N.call(z))},v=P=>(p.add(P),p.size===1&&D.forEach(([z,W],G)=>{const $=z[3](E(G));D.set(G,[z,$])}),()=>{p.delete(P),p.size===0&&D.forEach(([z,W],G)=>{W&&(W(),D.set(G,[z]))})}),_=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u)),l=e(_,{deleteProperty(P,N){const z=Reflect.get(P,N);C(N);const W=Reflect.deleteProperty(P,N);return W&&y(["delete",[N],z]),W},set(P,N,z,W){const G=Reflect.has(P,N),$=Reflect.get(P,N,W);if(G&&(t($,z)||o.has(z)&&t($,o.get(z))))return!0;C(N),Va(z)&&(z=rg(z)||z);let j=z;if(z instanceof Promise)z.then(oe=>{z.status="fulfilled",z.value=oe,y(["resolve",[N],oe])}).catch(oe=>{z.status="rejected",z.reason=oe,y(["reject",[N],oe])});else{!On.has(z)&&r(z)&&(j=c(z));const oe=!_o.has(j)&&On.get(j);oe&&b(N,oe)}return Reflect.set(P,N,j,W),y(["set",[N],z,$]),!0}});o.set(u,l);const m=[_,S,s,v];return On.set(l,m),Reflect.ownKeys(u).forEach(P=>{const N=Object.getOwnPropertyDescriptor(u,P);"value"in N&&(l[P]=u[P],delete N.value,delete N.writable),Object.defineProperty(_,P,N)}),l})=>[c,On,_o,t,e,r,n,i,s,o,a],[ig]=ng();function Dn(t={}){return ig(t)}function Gn(t,e,r){const n=On.get(t);let i;const s=[],o=n[3];let a=!1;const u=o(d=>{if(s.push(d),r){e(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,u()}}function sg(t,e){const r=On.get(t),[n,i,s]=r;return s(n,i(),e)}const Jt=Dn({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),$t={state:Jt,subscribe(t){return Gn(Jt,()=>t(Jt))},push(t,e){t!==Jt.view&&(Jt.view=t,e&&(Jt.data=e),Jt.history.push(t))},reset(t){Jt.view=t,Jt.history=[t]},replace(t){Jt.history.length>1&&(Jt.history[Jt.history.length-1]=t,Jt.view=t)},goBack(){if(Jt.history.length>1){Jt.history.pop();const[t]=Jt.history.slice(-1);Jt.view=t}},setData(t){Jt.data=t}},we={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return we.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const t=navigator.userAgent.toLowerCase();return we.isMobile()&&(t.includes("iphone")||t.includes("ipad"))},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},isArray(t){return Array.isArray(t)&&t.length>0},formatNativeUrl(t,e,r){if(we.isHttpUrl(t))return this.formatUniversalUrl(t,e,r);let n=t;n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},formatUniversalUrl(t,e,r){if(!we.isHttpUrl(t))return this.formatNativeUrl(t,e,r);let n=t;n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},async wait(t){return new Promise(e=>{setTimeout(e,t)})},openHref(t,e){window.open(t,e,"noreferrer noopener")},setWalletConnectDeepLink(t,e){try{localStorage.setItem(we.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(t){try{const[e]=t.split("?");localStorage.setItem(we.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(we.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(we.WCM_VERSION,"2.6.2")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var t;const e=(t=$t.state.data)==null?void 0:t.Wallet;if(!e)throw new Error('Missing "Wallet" view data');return e}},og=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),ar=Dn({enabled:og,userSessionId:"",events:[],connectedWalletId:void 0}),Lu={state:ar,subscribe(t){return Gn(ar.events,()=>t(sg(ar.events[ar.events.length-1])))},initialize(){ar.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(ar.userSessionId=crypto.randomUUID())},setConnectedWalletId(t){ar.connectedWalletId=t},click(t){if(ar.enabled){const e={type:"CLICK",name:t.name,userSessionId:ar.userSessionId,timestamp:Date.now(),data:t};ar.events.push(e)}},track(t){if(ar.enabled){const e={type:"TRACK",name:t.name,userSessionId:ar.userSessionId,timestamp:Date.now(),data:t};ar.events.push(e)}},view(t){if(ar.enabled){const e={type:"VIEW",name:t.name,userSessionId:ar.userSessionId,timestamp:Date.now(),data:t};ar.events.push(e)}}},en=Dn({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),Vt={state:en,subscribe(t){return Gn(en,()=>t(en))},setChains(t){en.chains=t},setWalletConnectUri(t){en.walletConnectUri=t},setIsCustomDesktop(t){en.isCustomDesktop=t},setIsCustomMobile(t){en.isCustomMobile=t},setIsDataLoaded(t){en.isDataLoaded=t},setIsUiLoaded(t){en.isUiLoaded=t},setIsAuth(t){en.isAuth=t}},Eo=Dn({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),Rr={state:Eo,subscribe(t){return Gn(Eo,()=>t(Eo))},setConfig(t){var e,r;Lu.initialize(),Vt.setChains(t.chains),Vt.setIsAuth(!!t.enableAuthMode),Vt.setIsCustomMobile(!!((e=t.mobileWallets)!=null&&e.length)),Vt.setIsCustomDesktop(!!((r=t.desktopWallets)!=null&&r.length)),we.setModalVersionInStorage(),Object.assign(Eo,t)}};var ag=Object.defineProperty,Mu=Object.getOwnPropertySymbols,cg=Object.prototype.hasOwnProperty,lg=Object.prototype.propertyIsEnumerable,ku=(t,e,r)=>e in t?ag(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ug=(t,e)=>{for(var r in e||(e={}))cg.call(e,r)&&ku(t,r,e[r]);if(Mu)for(var r of Mu(e))lg.call(e,r)&&ku(t,r,e[r]);return t};const Ha="https://explorer-api.walletconnect.com",Ka="wcm",Za="js-2.6.2";async function So(t,e){const r=ug({sdkType:Ka,sdkVersion:Za},e),n=new URL(t,Ha);return n.searchParams.append("projectId",Rr.state.projectId),Object.entries(r).forEach(([i,s])=>{s&&n.searchParams.append(i,String(s))}),(await fetch(n)).json()}const Qn={async getDesktopListings(t){return So("/w3m/v1/getDesktopListings",t)},async getMobileListings(t){return So("/w3m/v1/getMobileListings",t)},async getInjectedListings(t){return So("/w3m/v1/getInjectedListings",t)},async getAllListings(t){return So("/w3m/v1/getAllListings",t)},getWalletImageUrl(t){return`${Ha}/w3m/v1/getWalletImage/${t}?projectId=${Rr.state.projectId}&sdkType=${Ka}&sdkVersion=${Za}`},getAssetImageUrl(t){return`${Ha}/w3m/v1/getAssetImage/${t}?projectId=${Rr.state.projectId}&sdkType=${Ka}&sdkVersion=${Za}`}};var dg=Object.defineProperty,Uu=Object.getOwnPropertySymbols,hg=Object.prototype.hasOwnProperty,fg=Object.prototype.propertyIsEnumerable,Fu=(t,e,r)=>e in t?dg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pg=(t,e)=>{for(var r in e||(e={}))hg.call(e,r)&&Fu(t,r,e[r]);if(Uu)for(var r of Uu(e))fg.call(e,r)&&Fu(t,r,e[r]);return t};const ju=we.isMobile(),tn=Dn({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),xr={state:tn,async getRecomendedWallets(){const{explorerRecommendedWalletIds:t,explorerExcludedWalletIds:e}=Rr.state;if(t==="NONE"||e==="ALL"&&!t)return tn.recomendedWallets;if(we.isArray(t)){const r={recommendedIds:t.join(",")},{listings:n}=await Qn.getAllListings(r),i=Object.values(n);i.sort((s,o)=>{const a=t.indexOf(s.id),c=t.indexOf(o.id);return a-c}),tn.recomendedWallets=i}else{const{chains:r,isAuth:n}=Vt.state,i=r==null?void 0:r.join(","),s=we.isArray(e),o={page:1,sdks:n?"auth_v1":void 0,entries:we.RECOMMENDED_WALLET_AMOUNT,chains:i,version:2,excludedIds:s?e.join(","):void 0},{listings:a}=ju?await Qn.getMobileListings(o):await Qn.getDesktopListings(o);tn.recomendedWallets=Object.values(a)}return tn.recomendedWallets},async getWallets(t){const e=pg({},t),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:n}=Rr.state,{recomendedWallets:i}=tn;if(n==="ALL")return tn.wallets;i.length?e.excludedIds=i.map(f=>f.id).join(","):we.isArray(r)&&(e.excludedIds=r.join(",")),we.isArray(n)&&(e.excludedIds=[e.excludedIds,n].filter(Boolean).join(",")),Vt.state.isAuth&&(e.sdks="auth_v1");const{page:s,search:o}=t,{listings:a,total:c}=ju?await Qn.getMobileListings(e):await Qn.getDesktopListings(e),u=Object.values(a),d=o?"search":"wallets";return tn[d]={listings:[...tn[d].listings,...u],total:c,page:s??1},{listings:u,total:c}},getWalletImageUrl(t){return Qn.getWalletImageUrl(t)},getAssetImageUrl(t){return Qn.getAssetImageUrl(t)},resetSearch(){tn.search={listings:[],total:0,page:1}}},Ci=Dn({open:!1}),Yn={state:Ci,subscribe(t){return Gn(Ci,()=>t(Ci))},async open(t){return new Promise(e=>{const{isUiLoaded:r,isDataLoaded:n}=Vt.state;if(we.removeWalletConnectDeepLink(),Vt.setWalletConnectUri(t==null?void 0:t.uri),Vt.setChains(t==null?void 0:t.chains),$t.reset("ConnectWallet"),r&&n)Ci.open=!0,e();else{const i=setInterval(()=>{const s=Vt.state;s.isUiLoaded&&s.isDataLoaded&&(clearInterval(i),Ci.open=!0,e())},200)}})},close(){Ci.open=!1}};var gg=Object.defineProperty,Bu=Object.getOwnPropertySymbols,mg=Object.prototype.hasOwnProperty,yg=Object.prototype.propertyIsEnumerable,qu=(t,e,r)=>e in t?gg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vg=(t,e)=>{for(var r in e||(e={}))mg.call(e,r)&&qu(t,r,e[r]);if(Bu)for(var r of Bu(e))yg.call(e,r)&&qu(t,r,e[r]);return t};function wg(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const as=Dn({themeMode:wg()?"dark":"light"}),In={state:as,subscribe(t){return Gn(as,()=>t(as))},setThemeConfig(t){const{themeMode:e,themeVariables:r}=t;e&&(as.themeMode=e),r&&(as.themeVariables=vg({},r))}},Jn=Dn({open:!1,message:"",variant:"success"}),An={state:Jn,subscribe(t){return Gn(Jn,()=>t(Jn))},openToast(t,e){Jn.open=!0,Jn.message=t,Jn.variant=e},closeToast(){Jn.open=!1}};let bg=class{constructor(e){this.openModal=Yn.open,this.closeModal=Yn.close,this.subscribeModal=Yn.subscribe,this.setTheme=In.setThemeConfig,In.setThemeConfig(e),Rr.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.resolve().then(()=>Fx);const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),Vt.setIsUiLoaded(!0)}}};var rn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ga(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Qa={exports:{}},Oi=typeof Reflect=="object"?Reflect:null,zu=Oi&&typeof Oi.apply=="function"?Oi.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},xo;Oi&&typeof Oi.ownKeys=="function"?xo=Oi.ownKeys:Object.getOwnPropertySymbols?xo=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:xo=function(e){return Object.getOwnPropertyNames(e)};function _g(t){console&&console.warn&&console.warn(t)}var Wu=Number.isNaN||function(e){return e!==e};function yt(){yt.init.call(this)}Qa.exports=yt,Qa.exports.once=Cg,yt.EventEmitter=yt,yt.prototype._events=void 0,yt.prototype._eventsCount=0,yt.prototype._maxListeners=void 0;var Vu=10;function Co(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(yt,"defaultMaxListeners",{enumerable:!0,get:function(){return Vu},set:function(t){if(typeof t!="number"||t<0||Wu(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Vu=t}}),yt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},yt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Wu(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Hu(t){return t._maxListeners===void 0?yt.defaultMaxListeners:t._maxListeners}yt.prototype.getMaxListeners=function(){return Hu(this)},yt.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")zu(c,this,r);else for(var u=c.length,d=Yu(c,u),n=0;n<u;++n)zu(d[n],this,r);return!0};function Ku(t,e,r,n){var i,s,o;if(Co(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=Hu(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,_g(a)}return t}yt.prototype.addListener=function(e,r){return Ku(this,e,r,!1)},yt.prototype.on=yt.prototype.addListener,yt.prototype.prependListener=function(e,r){return Ku(this,e,r,!0)};function Eg(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Zu(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=Eg.bind(n);return i.listener=r,n.wrapFn=i,i}yt.prototype.once=function(e,r){return Co(r),this.on(e,Zu(this,e,r)),this},yt.prototype.prependOnceListener=function(e,r){return Co(r),this.prependListener(e,Zu(this,e,r)),this},yt.prototype.removeListener=function(e,r){var n,i,s,o,a;if(Co(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():Sg(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this},yt.prototype.off=yt.prototype.removeListener,yt.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Gu(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?xg(i):Yu(i,i.length)}yt.prototype.listeners=function(e){return Gu(this,e,!0)},yt.prototype.rawListeners=function(e){return Gu(this,e,!1)},yt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Qu.call(t,e)},yt.prototype.listenerCount=Qu;function Qu(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}yt.prototype.eventNames=function(){return this._eventsCount>0?xo(this._events):[]};function Yu(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Sg(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function xg(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Cg(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Ju(t,e,s,{once:!0}),e!=="error"&&Og(t,i,{once:!0})})}function Og(t,e,r){typeof t.on=="function"&&Ju(t,"error",e,r)}function Ju(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Ur=Qa.exports;const Ya=cs(Ur);var Oo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Do(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xu={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,i,s){function o(u,d){if(!i[u]){if(!n[u]){var f=typeof Do=="function"&&Do;if(!d&&f)return f(u,!0);if(a)return a(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var y=i[u]={exports:{}};n[u][0].call(y.exports,function(w){var S=n[u][1][w];return o(S||w)},y,y.exports,r,n,i,s)}return i[u].exports}for(var a=typeof Do=="function"&&Do,c=0;c<s.length;c++)o(s[c]);return o}({1:[function(r,n,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var c=0,u=new o(w),d=s.document.createTextNode("");u.observe(d,{characterData:!0}),a=function(){d.data=c=++c%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=w,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var E=s.document.createElement("script");E.onreadystatechange=function(){w(),E.onreadystatechange=null,E.parentNode.removeChild(E),E=null},s.document.documentElement.appendChild(E)}:a=function(){setTimeout(w,0)};var p,y=[];function w(){p=!0;for(var E,D,b=y.length;b;){for(D=y,y=[],E=-1;++E<b;)D[E]();b=y.length}p=!1}n.exports=S;function S(E){y.push(E)===1&&!p&&a()}}).call(this,typeof Oo<"u"?Oo:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,n,i){var s=r(1);function o(){}var a={},c=["REJECTED"],u=["FULFILLED"],d=["PENDING"];n.exports=f;function f(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,_!==o&&S(this,_)}f.prototype.catch=function(_){return this.then(null,_)},f.prototype.then=function(_,g){if(typeof _!="function"&&this.state===u||typeof g!="function"&&this.state===c)return this;var l=new this.constructor(o);if(this.state!==d){var m=this.state===u?_:g;y(l,m,this.outcome)}else this.queue.push(new p(l,_,g));return l};function p(_,g,l){this.promise=_,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof l=="function"&&(this.onRejected=l,this.callRejected=this.otherCallRejected)}p.prototype.callFulfilled=function(_){a.resolve(this.promise,_)},p.prototype.otherCallFulfilled=function(_){y(this.promise,this.onFulfilled,_)},p.prototype.callRejected=function(_){a.reject(this.promise,_)},p.prototype.otherCallRejected=function(_){y(this.promise,this.onRejected,_)};function y(_,g,l){s(function(){var m;try{m=g(l)}catch(P){return a.reject(_,P)}m===_?a.reject(_,new TypeError("Cannot resolve promise with itself")):a.resolve(_,m)})}a.resolve=function(_,g){var l=E(w,g);if(l.status==="error")return a.reject(_,l.value);var m=l.value;if(m)S(_,m);else{_.state=u,_.outcome=g;for(var P=-1,N=_.queue.length;++P<N;)_.queue[P].callFulfilled(g)}return _},a.reject=function(_,g){_.state=c,_.outcome=g;for(var l=-1,m=_.queue.length;++l<m;)_.queue[l].callRejected(g);return _};function w(_){var g=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof g=="function")return function(){g.apply(_,arguments)}}function S(_,g){var l=!1;function m(W){l||(l=!0,a.reject(_,W))}function P(W){l||(l=!0,a.resolve(_,W))}function N(){g(P,m)}var z=E(N);z.status==="error"&&m(z.value)}function E(_,g){var l={};try{l.value=_(g),l.status="success"}catch(m){l.status="error",l.value=m}return l}f.resolve=D;function D(_){return _ instanceof this?_:a.resolve(new this(o),_)}f.reject=b;function b(_){var g=new this(o);return a.reject(g,_)}f.all=C;function C(_){var g=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var l=_.length,m=!1;if(!l)return this.resolve([]);for(var P=new Array(l),N=0,z=-1,W=new this(o);++z<l;)G(_[z],z);return W;function G($,j){g.resolve($).then(oe,function(Y){m||(m=!0,a.reject(W,Y))});function oe(Y){P[j]=Y,++N===l&&!m&&(m=!0,a.resolve(W,P))}}}f.race=v;function v(_){var g=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var l=_.length,m=!1;if(!l)return this.resolve([]);for(var P=-1,N=new this(o);++P<l;)z(_[P]);return N;function z(W){g.resolve(W).then(function(G){m||(m=!0,a.resolve(N,G))},function(G){m||(m=!0,a.reject(N,G))})}}},{1:1}],3:[function(r,n,i){(function(s){typeof s.Promise!="function"&&(s.Promise=r(2))}).call(this,typeof Oo<"u"?Oo:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,n,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x};function o(x,A){if(!(x instanceof A))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var c=a();function u(){try{if(!c||!c.open)return!1;var x=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),A=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!x||A)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function d(x,A){x=x||[],A=A||{};try{return new Blob(x,A)}catch(F){if(F.name!=="TypeError")throw F;for(var I=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,U=new I,L=0;L<x.length;L+=1)U.append(x[L]);return U.getBlob(A.type)}}typeof Promise>"u"&&r(3);var f=Promise;function p(x,A){A&&x.then(function(I){A(null,I)},function(I){A(I)})}function y(x,A,I){typeof A=="function"&&x.then(A),typeof I=="function"&&x.catch(I)}function w(x){return typeof x!="string"&&(console.warn(x+" used as a key, but it is not a string."),x=String(x)),x}function S(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var E="local-forage-detect-blob-support",D=void 0,b={},C=Object.prototype.toString,v="readonly",_="readwrite";function g(x){for(var A=x.length,I=new ArrayBuffer(A),U=new Uint8Array(I),L=0;L<A;L++)U[L]=x.charCodeAt(L);return I}function l(x){return new f(function(A){var I=x.transaction(E,_),U=d([""]);I.objectStore(E).put(U,"key"),I.onabort=function(L){L.preventDefault(),L.stopPropagation(),A(!1)},I.oncomplete=function(){var L=navigator.userAgent.match(/Chrome\/(\d+)/),F=navigator.userAgent.match(/Edge\//);A(F||!L||parseInt(L[1],10)>=43)}}).catch(function(){return!1})}function m(x){return typeof D=="boolean"?f.resolve(D):l(x).then(function(A){return D=A,D})}function P(x){var A=b[x.name],I={};I.promise=new f(function(U,L){I.resolve=U,I.reject=L}),A.deferredOperations.push(I),A.dbReady?A.dbReady=A.dbReady.then(function(){return I.promise}):A.dbReady=I.promise}function N(x){var A=b[x.name],I=A.deferredOperations.pop();if(I)return I.resolve(),I.promise}function z(x,A){var I=b[x.name],U=I.deferredOperations.pop();if(U)return U.reject(A),U.promise}function W(x,A){return new f(function(I,U){if(b[x.name]=b[x.name]||xe(),x.db)if(A)P(x),x.db.close();else return I(x.db);var L=[x.name];A&&L.push(x.version);var F=c.open.apply(c,L);A&&(F.onupgradeneeded=function(V){var te=F.result;try{te.createObjectStore(x.storeName),V.oldVersion<=1&&te.createObjectStore(E)}catch(se){if(se.name==="ConstraintError")console.warn('The database "'+x.name+'" has been upgraded from version '+V.oldVersion+" to version "+V.newVersion+', but the storage "'+x.storeName+'" already exists.');else throw se}}),F.onerror=function(V){V.preventDefault(),U(F.error)},F.onsuccess=function(){var V=F.result;V.onversionchange=function(te){te.target.close()},I(V),N(x)}})}function G(x){return W(x,!1)}function $(x){return W(x,!0)}function j(x,A){if(!x.db)return!0;var I=!x.db.objectStoreNames.contains(x.storeName),U=x.version<x.db.version,L=x.version>x.db.version;if(U&&(x.version!==A&&console.warn('The database "'+x.name+`" can't be downgraded from version `+x.db.version+" to version "+x.version+"."),x.version=x.db.version),L||I){if(I){var F=x.db.version+1;F>x.version&&(x.version=F)}return!0}return!1}function oe(x){return new f(function(A,I){var U=new FileReader;U.onerror=I,U.onloadend=function(L){var F=btoa(L.target.result||"");A({__local_forage_encoded_blob:!0,data:F,type:x.type})},U.readAsBinaryString(x)})}function Y(x){var A=g(atob(x.data));return d([A],{type:x.type})}function Z(x){return x&&x.__local_forage_encoded_blob}function X(x){var A=this,I=A._initReady().then(function(){var U=b[A._dbInfo.name];if(U&&U.dbReady)return U.dbReady});return y(I,x,x),I}function K(x){P(x);for(var A=b[x.name],I=A.forages,U=0;U<I.length;U++){var L=I[U];L._dbInfo.db&&(L._dbInfo.db.close(),L._dbInfo.db=null)}return x.db=null,G(x).then(function(F){return x.db=F,j(x)?$(x):F}).then(function(F){x.db=A.db=F;for(var V=0;V<I.length;V++)I[V]._dbInfo.db=F}).catch(function(F){throw z(x,F),F})}function ee(x,A,I,U){U===void 0&&(U=1);try{var L=x.db.transaction(x.storeName,A);I(null,L)}catch(F){if(U>0&&(!x.db||F.name==="InvalidStateError"||F.name==="NotFoundError"))return f.resolve().then(function(){if(!x.db||F.name==="NotFoundError"&&!x.db.objectStoreNames.contains(x.storeName)&&x.version<=x.db.version)return x.db&&(x.version=x.db.version+1),$(x)}).then(function(){return K(x).then(function(){ee(x,A,I,U-1)})}).catch(I);I(F)}}function xe(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ne(x){var A=this,I={db:null};if(x)for(var U in x)I[U]=x[U];var L=b[I.name];L||(L=xe(),b[I.name]=L),L.forages.push(A),A._initReady||(A._initReady=A.ready,A.ready=X);var F=[];function V(){return f.resolve()}for(var te=0;te<L.forages.length;te++){var se=L.forages[te];se!==A&&F.push(se._initReady().catch(V))}var ie=L.forages.slice(0);return f.all(F).then(function(){return I.db=L.db,G(I)}).then(function(re){return I.db=re,j(I,A._defaultConfig.version)?$(I):re}).then(function(re){I.db=L.db=re,A._dbInfo=I;for(var ve=0;ve<ie.length;ve++){var Qe=ie[ve];Qe!==A&&(Qe._dbInfo.db=I.db,Qe._dbInfo.version=I.version)}})}function Ee(x,A){var I=this;x=w(x);var U=new f(function(L,F){I.ready().then(function(){ee(I._dbInfo,v,function(V,te){if(V)return F(V);try{var se=te.objectStore(I._dbInfo.storeName),ie=se.get(x);ie.onsuccess=function(){var re=ie.result;re===void 0&&(re=null),Z(re)&&(re=Y(re)),L(re)},ie.onerror=function(){F(ie.error)}}catch(re){F(re)}})}).catch(F)});return p(U,A),U}function fe(x,A){var I=this,U=new f(function(L,F){I.ready().then(function(){ee(I._dbInfo,v,function(V,te){if(V)return F(V);try{var se=te.objectStore(I._dbInfo.storeName),ie=se.openCursor(),re=1;ie.onsuccess=function(){var ve=ie.result;if(ve){var Qe=ve.value;Z(Qe)&&(Qe=Y(Qe));var gt=x(Qe,ve.key,re++);gt!==void 0?L(gt):ve.continue()}else L()},ie.onerror=function(){F(ie.error)}}catch(ve){F(ve)}})}).catch(F)});return p(U,A),U}function _e(x,A,I){var U=this;x=w(x);var L=new f(function(F,V){var te;U.ready().then(function(){return te=U._dbInfo,C.call(A)==="[object Blob]"?m(te.db).then(function(se){return se?A:oe(A)}):A}).then(function(se){ee(U._dbInfo,_,function(ie,re){if(ie)return V(ie);try{var ve=re.objectStore(U._dbInfo.storeName);se===null&&(se=void 0);var Qe=ve.put(se,x);re.oncomplete=function(){se===void 0&&(se=null),F(se)},re.onabort=re.onerror=function(){var gt=Qe.error?Qe.error:Qe.transaction.error;V(gt)}}catch(gt){V(gt)}})}).catch(V)});return p(L,I),L}function q(x,A){var I=this;x=w(x);var U=new f(function(L,F){I.ready().then(function(){ee(I._dbInfo,_,function(V,te){if(V)return F(V);try{var se=te.objectStore(I._dbInfo.storeName),ie=se.delete(x);te.oncomplete=function(){L()},te.onerror=function(){F(ie.error)},te.onabort=function(){var re=ie.error?ie.error:ie.transaction.error;F(re)}}catch(re){F(re)}})}).catch(F)});return p(U,A),U}function B(x){var A=this,I=new f(function(U,L){A.ready().then(function(){ee(A._dbInfo,_,function(F,V){if(F)return L(F);try{var te=V.objectStore(A._dbInfo.storeName),se=te.clear();V.oncomplete=function(){U()},V.onabort=V.onerror=function(){var ie=se.error?se.error:se.transaction.error;L(ie)}}catch(ie){L(ie)}})}).catch(L)});return p(I,x),I}function M(x){var A=this,I=new f(function(U,L){A.ready().then(function(){ee(A._dbInfo,v,function(F,V){if(F)return L(F);try{var te=V.objectStore(A._dbInfo.storeName),se=te.count();se.onsuccess=function(){U(se.result)},se.onerror=function(){L(se.error)}}catch(ie){L(ie)}})}).catch(L)});return p(I,x),I}function h(x,A){var I=this,U=new f(function(L,F){if(x<0){L(null);return}I.ready().then(function(){ee(I._dbInfo,v,function(V,te){if(V)return F(V);try{var se=te.objectStore(I._dbInfo.storeName),ie=!1,re=se.openKeyCursor();re.onsuccess=function(){var ve=re.result;if(!ve){L(null);return}x===0||ie?L(ve.key):(ie=!0,ve.advance(x))},re.onerror=function(){F(re.error)}}catch(ve){F(ve)}})}).catch(F)});return p(U,A),U}function R(x){var A=this,I=new f(function(U,L){A.ready().then(function(){ee(A._dbInfo,v,function(F,V){if(F)return L(F);try{var te=V.objectStore(A._dbInfo.storeName),se=te.openKeyCursor(),ie=[];se.onsuccess=function(){var re=se.result;if(!re){U(ie);return}ie.push(re.key),re.continue()},se.onerror=function(){L(se.error)}}catch(re){L(re)}})}).catch(L)});return p(I,x),I}function ce(x,A){A=S.apply(this,arguments);var I=this.config();x=typeof x!="function"&&x||{},x.name||(x.name=x.name||I.name,x.storeName=x.storeName||I.storeName);var U=this,L;if(!x.name)L=f.reject("Invalid arguments");else{var F=x.name===I.name&&U._dbInfo.db,V=F?f.resolve(U._dbInfo.db):G(x).then(function(te){var se=b[x.name],ie=se.forages;se.db=te;for(var re=0;re<ie.length;re++)ie[re]._dbInfo.db=te;return te});x.storeName?L=V.then(function(te){if(te.objectStoreNames.contains(x.storeName)){var se=te.version+1;P(x);var ie=b[x.name],re=ie.forages;te.close();for(var ve=0;ve<re.length;ve++){var Qe=re[ve];Qe._dbInfo.db=null,Qe._dbInfo.version=se}var gt=new f(function(lt,Ot){var ft=c.open(x.name,se);ft.onerror=function(Tr){var wo=ft.result;wo.close(),Ot(Tr)},ft.onupgradeneeded=function(){var Tr=ft.result;Tr.deleteObjectStore(x.storeName)},ft.onsuccess=function(){var Tr=ft.result;Tr.close(),lt(Tr)}});return gt.then(function(lt){ie.db=lt;for(var Ot=0;Ot<re.length;Ot++){var ft=re[Ot];ft._dbInfo.db=lt,N(ft._dbInfo)}}).catch(function(lt){throw(z(x,lt)||f.resolve()).catch(function(){}),lt})}}):L=V.then(function(te){P(x);var se=b[x.name],ie=se.forages;te.close();for(var re=0;re<ie.length;re++){var ve=ie[re];ve._dbInfo.db=null}var Qe=new f(function(gt,lt){var Ot=c.deleteDatabase(x.name);Ot.onerror=function(){var ft=Ot.result;ft&&ft.close(),lt(Ot.error)},Ot.onblocked=function(){console.warn('dropInstance blocked for database "'+x.name+'" until all open connections are closed')},Ot.onsuccess=function(){var ft=Ot.result;ft&&ft.close(),gt(ft)}});return Qe.then(function(gt){se.db=gt;for(var lt=0;lt<ie.length;lt++){var Ot=ie[lt];N(Ot._dbInfo)}}).catch(function(gt){throw(z(x,gt)||f.resolve()).catch(function(){}),gt})})}return p(L,A),L}var he={_driver:"asyncStorage",_initStorage:ne,_support:u(),iterate:fe,getItem:Ee,setItem:_e,removeItem:q,clear:B,length:M,key:h,keys:R,dropInstance:ce};function We(){return typeof openDatabase=="function"}var Ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Me="~~local_forage_type~",Xe=/^~~local_forage_type~([^~]+)~/,pt="__lfsc__:",dt=pt.length,Ve="arbf",Be="blob",Ne="si08",ke="ui08",$e="uic8",Te="si16",Ae="si32",Se="ur16",Ue="ui32",qe="fl32",De="fl64",He=dt+Ve.length,et=Object.prototype.toString;function nt(x){var A=x.length*.75,I=x.length,U,L=0,F,V,te,se;x[x.length-1]==="="&&(A--,x[x.length-2]==="="&&A--);var ie=new ArrayBuffer(A),re=new Uint8Array(ie);for(U=0;U<I;U+=4)F=Ie.indexOf(x[U]),V=Ie.indexOf(x[U+1]),te=Ie.indexOf(x[U+2]),se=Ie.indexOf(x[U+3]),re[L++]=F<<2|V>>4,re[L++]=(V&15)<<4|te>>2,re[L++]=(te&3)<<6|se&63;return ie}function tt(x){var A=new Uint8Array(x),I="",U;for(U=0;U<A.length;U+=3)I+=Ie[A[U]>>2],I+=Ie[(A[U]&3)<<4|A[U+1]>>4],I+=Ie[(A[U+1]&15)<<2|A[U+2]>>6],I+=Ie[A[U+2]&63];return A.length%3===2?I=I.substring(0,I.length-1)+"=":A.length%3===1&&(I=I.substring(0,I.length-2)+"=="),I}function it(x,A){var I="";if(x&&(I=et.call(x)),x&&(I==="[object ArrayBuffer]"||x.buffer&&et.call(x.buffer)==="[object ArrayBuffer]")){var U,L=pt;x instanceof ArrayBuffer?(U=x,L+=Ve):(U=x.buffer,I==="[object Int8Array]"?L+=Ne:I==="[object Uint8Array]"?L+=ke:I==="[object Uint8ClampedArray]"?L+=$e:I==="[object Int16Array]"?L+=Te:I==="[object Uint16Array]"?L+=Se:I==="[object Int32Array]"?L+=Ae:I==="[object Uint32Array]"?L+=Ue:I==="[object Float32Array]"?L+=qe:I==="[object Float64Array]"?L+=De:A(new Error("Failed to get type for BinaryArray"))),A(L+tt(U))}else if(I==="[object Blob]"){var F=new FileReader;F.onload=function(){var V=Me+x.type+"~"+tt(this.result);A(pt+Be+V)},F.readAsArrayBuffer(x)}else try{A(JSON.stringify(x))}catch(V){console.error("Couldn't convert value into a JSON string: ",x),A(null,V)}}function Sr(x){if(x.substring(0,dt)!==pt)return JSON.parse(x);var A=x.substring(He),I=x.substring(dt,He),U;if(I===Be&&Xe.test(A)){var L=A.match(Xe);U=L[1],A=A.substring(L[0].length)}var F=nt(A);switch(I){case Ve:return F;case Be:return d([F],{type:U});case Ne:return new Int8Array(F);case ke:return new Uint8Array(F);case $e:return new Uint8ClampedArray(F);case Te:return new Int16Array(F);case Se:return new Uint16Array(F);case Ae:return new Int32Array(F);case Ue:return new Uint32Array(F);case qe:return new Float32Array(F);case De:return new Float64Array(F);default:throw new Error("Unkown type: "+I)}}var fr={serialize:it,deserialize:Sr,stringToBuffer:nt,bufferToString:tt};function Mr(x,A,I,U){x.executeSql("CREATE TABLE IF NOT EXISTS "+A.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],I,U)}function Gt(x){var A=this,I={db:null};if(x)for(var U in x)I[U]=typeof x[U]!="string"?x[U].toString():x[U];var L=new f(function(F,V){try{I.db=openDatabase(I.name,String(I.version),I.description,I.size)}catch(te){return V(te)}I.db.transaction(function(te){Mr(te,I,function(){A._dbInfo=I,F()},function(se,ie){V(ie)})},V)});return I.serializer=fr,L}function Qt(x,A,I,U,L,F){x.executeSql(I,U,L,function(V,te){te.code===te.SYNTAX_ERR?V.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[A.storeName],function(se,ie){ie.rows.length?F(se,te):Mr(se,A,function(){se.executeSql(I,U,L,F)},F)},F):F(V,te)},F)}function Ar(x,A){var I=this;x=w(x);var U=new f(function(L,F){I.ready().then(function(){var V=I._dbInfo;V.db.transaction(function(te){Qt(te,V,"SELECT * FROM "+V.storeName+" WHERE key = ? LIMIT 1",[x],function(se,ie){var re=ie.rows.length?ie.rows.item(0).value:null;re&&(re=V.serializer.deserialize(re)),L(re)},function(se,ie){F(ie)})})}).catch(F)});return p(U,A),U}function hn(x,A){var I=this,U=new f(function(L,F){I.ready().then(function(){var V=I._dbInfo;V.db.transaction(function(te){Qt(te,V,"SELECT * FROM "+V.storeName,[],function(se,ie){for(var re=ie.rows,ve=re.length,Qe=0;Qe<ve;Qe++){var gt=re.item(Qe),lt=gt.value;if(lt&&(lt=V.serializer.deserialize(lt)),lt=x(lt,gt.key,Qe+1),lt!==void 0){L(lt);return}}L()},function(se,ie){F(ie)})})}).catch(F)});return p(U,A),U}function wt(x,A,I,U){var L=this;x=w(x);var F=new f(function(V,te){L.ready().then(function(){A===void 0&&(A=null);var se=A,ie=L._dbInfo;ie.serializer.serialize(A,function(re,ve){ve?te(ve):ie.db.transaction(function(Qe){Qt(Qe,ie,"INSERT OR REPLACE INTO "+ie.storeName+" (key, value) VALUES (?, ?)",[x,re],function(){V(se)},function(gt,lt){te(lt)})},function(Qe){if(Qe.code===Qe.QUOTA_ERR){if(U>0){V(wt.apply(L,[x,se,I,U-1]));return}te(Qe)}})})}).catch(te)});return p(F,I),F}function bt(x,A,I){return wt.apply(this,[x,A,I,1])}function At(x,A){var I=this;x=w(x);var U=new f(function(L,F){I.ready().then(function(){var V=I._dbInfo;V.db.transaction(function(te){Qt(te,V,"DELETE FROM "+V.storeName+" WHERE key = ?",[x],function(){L()},function(se,ie){F(ie)})})}).catch(F)});return p(U,A),U}function xt(x){var A=this,I=new f(function(U,L){A.ready().then(function(){var F=A._dbInfo;F.db.transaction(function(V){Qt(V,F,"DELETE FROM "+F.storeName,[],function(){U()},function(te,se){L(se)})})}).catch(L)});return p(I,x),I}function Tt(x){var A=this,I=new f(function(U,L){A.ready().then(function(){var F=A._dbInfo;F.db.transaction(function(V){Qt(V,F,"SELECT COUNT(key) as c FROM "+F.storeName,[],function(te,se){var ie=se.rows.item(0).c;U(ie)},function(te,se){L(se)})})}).catch(L)});return p(I,x),I}function _t(x,A){var I=this,U=new f(function(L,F){I.ready().then(function(){var V=I._dbInfo;V.db.transaction(function(te){Qt(te,V,"SELECT key FROM "+V.storeName+" WHERE id = ? LIMIT 1",[x+1],function(se,ie){var re=ie.rows.length?ie.rows.item(0).key:null;L(re)},function(se,ie){F(ie)})})}).catch(F)});return p(U,A),U}function Mt(x){var A=this,I=new f(function(U,L){A.ready().then(function(){var F=A._dbInfo;F.db.transaction(function(V){Qt(V,F,"SELECT key FROM "+F.storeName,[],function(te,se){for(var ie=[],re=0;re<se.rows.length;re++)ie.push(se.rows.item(re).key);U(ie)},function(te,se){L(se)})})}).catch(L)});return p(I,x),I}function jt(x){return new f(function(A,I){x.transaction(function(U){U.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(L,F){for(var V=[],te=0;te<F.rows.length;te++)V.push(F.rows.item(te).name);A({db:x,storeNames:V})},function(L,F){I(F)})},function(U){I(U)})})}function Bt(x,A){A=S.apply(this,arguments);var I=this.config();x=typeof x!="function"&&x||{},x.name||(x.name=x.name||I.name,x.storeName=x.storeName||I.storeName);var U=this,L;return x.name?L=new f(function(F){var V;x.name===I.name?V=U._dbInfo.db:V=openDatabase(x.name,"","",0),x.storeName?F({db:V,storeNames:[x.storeName]}):F(jt(V))}).then(function(F){return new f(function(V,te){F.db.transaction(function(se){function ie(gt){return new f(function(lt,Ot){se.executeSql("DROP TABLE IF EXISTS "+gt,[],function(){lt()},function(ft,Tr){Ot(Tr)})})}for(var re=[],ve=0,Qe=F.storeNames.length;ve<Qe;ve++)re.push(ie(F.storeNames[ve]));f.all(re).then(function(){V()}).catch(function(gt){te(gt)})},function(se){te(se)})})}):L=f.reject("Invalid arguments"),p(L,A),L}var kt={_driver:"webSQLStorage",_initStorage:Gt,_support:We(),iterate:hn,getItem:Ar,setItem:bt,removeItem:At,clear:xt,length:Tt,key:_t,keys:Mt,dropInstance:Bt};function qt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Rt(x,A){var I=x.name+"/";return x.storeName!==A.storeName&&(I+=x.storeName+"/"),I}function Pt(){var x="_localforage_support_test";try{return localStorage.setItem(x,!0),localStorage.removeItem(x),!1}catch{return!0}}function vt(){return!Pt()||localStorage.length>0}function T(x){var A=this,I={};if(x)for(var U in x)I[U]=x[U];return I.keyPrefix=Rt(x,A._defaultConfig),vt()?(A._dbInfo=I,I.serializer=fr,f.resolve()):f.reject()}function H(x){var A=this,I=A.ready().then(function(){for(var U=A._dbInfo.keyPrefix,L=localStorage.length-1;L>=0;L--){var F=localStorage.key(L);F.indexOf(U)===0&&localStorage.removeItem(F)}});return p(I,x),I}function ue(x,A){var I=this;x=w(x);var U=I.ready().then(function(){var L=I._dbInfo,F=localStorage.getItem(L.keyPrefix+x);return F&&(F=L.serializer.deserialize(F)),F});return p(U,A),U}function Ce(x,A){var I=this,U=I.ready().then(function(){for(var L=I._dbInfo,F=L.keyPrefix,V=F.length,te=localStorage.length,se=1,ie=0;ie<te;ie++){var re=localStorage.key(ie);if(re.indexOf(F)===0){var ve=localStorage.getItem(re);if(ve&&(ve=L.serializer.deserialize(ve)),ve=x(ve,re.substring(V),se++),ve!==void 0)return ve}}});return p(U,A),U}function st(x,A){var I=this,U=I.ready().then(function(){var L=I._dbInfo,F;try{F=localStorage.key(x)}catch{F=null}return F&&(F=F.substring(L.keyPrefix.length)),F});return p(U,A),U}function Ge(x){var A=this,I=A.ready().then(function(){for(var U=A._dbInfo,L=localStorage.length,F=[],V=0;V<L;V++){var te=localStorage.key(V);te.indexOf(U.keyPrefix)===0&&F.push(te.substring(U.keyPrefix.length))}return F});return p(I,x),I}function Je(x){var A=this,I=A.keys().then(function(U){return U.length});return p(I,x),I}function Ke(x,A){var I=this;x=w(x);var U=I.ready().then(function(){var L=I._dbInfo;localStorage.removeItem(L.keyPrefix+x)});return p(U,A),U}function Yt(x,A,I){var U=this;x=w(x);var L=U.ready().then(function(){A===void 0&&(A=null);var F=A;return new f(function(V,te){var se=U._dbInfo;se.serializer.serialize(A,function(ie,re){if(re)te(re);else try{localStorage.setItem(se.keyPrefix+x,ie),V(F)}catch(ve){(ve.name==="QuotaExceededError"||ve.name==="NS_ERROR_DOM_QUOTA_REACHED")&&te(ve),te(ve)}})})});return p(L,I),L}function Ct(x,A){if(A=S.apply(this,arguments),x=typeof x!="function"&&x||{},!x.name){var I=this.config();x.name=x.name||I.name,x.storeName=x.storeName||I.storeName}var U=this,L;return x.name?L=new f(function(F){x.storeName?F(Rt(x,U._defaultConfig)):F(x.name+"/")}).then(function(F){for(var V=localStorage.length-1;V>=0;V--){var te=localStorage.key(V);te.indexOf(F)===0&&localStorage.removeItem(te)}}):L=f.reject("Invalid arguments"),p(L,A),L}var Nt={_driver:"localStorageWrapper",_initStorage:T,_support:qt(),iterate:Ce,getItem:ue,setItem:Yt,removeItem:Ke,clear:H,length:Je,key:st,keys:Ge,dropInstance:Ct},zt=function(x,A){return x===A||typeof x=="number"&&typeof A=="number"&&isNaN(x)&&isNaN(A)},fn=function(x,A){for(var I=x.length,U=0;U<I;){if(zt(x[U],A))return!0;U++}return!1},Ei=Array.isArray||function(x){return Object.prototype.toString.call(x)==="[object Array]"},sr={},Fa={},Kn={INDEXEDDB:he,WEBSQL:kt,LOCALSTORAGE:Nt},ss=[Kn.INDEXEDDB._driver,Kn.WEBSQL._driver,Kn.LOCALSTORAGE._driver],os=["dropInstance"],yo=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(os),pn={description:"",driver:ss.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Du(x,A){x[A]=function(){var I=arguments;return x.ready().then(function(){return x[A].apply(x,I)})}}function vo(){for(var x=1;x<arguments.length;x++){var A=arguments[x];if(A)for(var I in A)A.hasOwnProperty(I)&&(Ei(A[I])?arguments[0][I]=A[I].slice():arguments[0][I]=A[I])}return arguments[0]}var Iu=function(){function x(A){o(this,x);for(var I in Kn)if(Kn.hasOwnProperty(I)){var U=Kn[I],L=U._driver;this[I]=L,sr[L]||this.defineDriver(U)}this._defaultConfig=vo({},pn),this._config=vo({},this._defaultConfig,A),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return x.prototype.config=function(A){if((typeof A>"u"?"undefined":s(A))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var I in A){if(I==="storeName"&&(A[I]=A[I].replace(/\W/g,"_")),I==="version"&&typeof A[I]!="number")return new Error("Database version must be a number.");this._config[I]=A[I]}return"driver"in A&&A.driver?this.setDriver(this._config.driver):!0}else return typeof A=="string"?this._config[A]:this._config},x.prototype.defineDriver=function(A,I,U){var L=new f(function(F,V){try{var te=A._driver,se=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!A._driver){V(se);return}for(var ie=yo.concat("_initStorage"),re=0,ve=ie.length;re<ve;re++){var Qe=ie[re],gt=!fn(os,Qe);if((gt||A[Qe])&&typeof A[Qe]!="function"){V(se);return}}var lt=function(){for(var ft=function(Tu){return function(){var Ru=new Error("Method "+Tu+" is not implemented by the current driver"),ja=f.reject(Ru);return p(ja,arguments[arguments.length-1]),ja}},Tr=0,wo=os.length;Tr<wo;Tr++){var zr=os[Tr];A[zr]||(A[zr]=ft(zr))}};lt();var Ot=function(ft){sr[te]&&console.info("Redefining LocalForage driver: "+te),sr[te]=A,Fa[te]=ft,F()};"_support"in A?A._support&&typeof A._support=="function"?A._support().then(Ot,V):Ot(!!A._support):Ot(!0)}catch(ft){V(ft)}});return y(L,I,U),L},x.prototype.driver=function(){return this._driver||null},x.prototype.getDriver=function(A,I,U){var L=sr[A]?f.resolve(sr[A]):f.reject(new Error("Driver not found."));return y(L,I,U),L},x.prototype.getSerializer=function(A){var I=f.resolve(fr);return y(I,A),I},x.prototype.ready=function(A){var I=this,U=I._driverSet.then(function(){return I._ready===null&&(I._ready=I._initDriver()),I._ready});return y(U,A,A),U},x.prototype.setDriver=function(A,I,U){var L=this;Ei(A)||(A=[A]);var F=this._getSupportedDrivers(A);function V(){L._config.driver=L.driver()}function te(re){return L._extend(re),V(),L._ready=L._initStorage(L._config),L._ready}function se(re){return function(){var ve=0;function Qe(){for(;ve<re.length;){var gt=re[ve];return ve++,L._dbInfo=null,L._ready=null,L.getDriver(gt).then(te).catch(Qe)}V();var lt=new Error("No available storage method found.");return L._driverSet=f.reject(lt),L._driverSet}return Qe()}}var ie=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=ie.then(function(){var re=F[0];return L._dbInfo=null,L._ready=null,L.getDriver(re).then(function(ve){L._driver=ve._driver,V(),L._wrapLibraryMethodsWithReady(),L._initDriver=se(F)})}).catch(function(){V();var re=new Error("No available storage method found.");return L._driverSet=f.reject(re),L._driverSet}),y(this._driverSet,I,U),this._driverSet},x.prototype.supports=function(A){return!!Fa[A]},x.prototype._extend=function(A){vo(this,A)},x.prototype._getSupportedDrivers=function(A){for(var I=[],U=0,L=A.length;U<L;U++){var F=A[U];this.supports(F)&&I.push(F)}return I},x.prototype._wrapLibraryMethodsWithReady=function(){for(var A=0,I=yo.length;A<I;A++)Du(this,yo[A])},x.prototype.createInstance=function(A){return new x(A)},x}(),Au=new Iu;n.exports=Au},{3:3}]},{},[4])(4)})})(Xu);var Ig=Xu.exports,ls=Dg(Ig);class Ag{constructor(){this.getKeys=async()=>await ls.keys(),this.getEntries=async()=>{let e=[];return(await this.getKeys()).forEach(async r=>e.push(await ls.getItem(r))),e},this.getItem=async e=>await ls.getItem(e)??void 0,this.setItem=async(e,r)=>{await ls.setItem(e,r)},this.removeItem=async e=>{await ls.removeItem(e)}}}let Tg=class{constructor(){const e=new Ag;this.storage=e}async getKeys(){return this.storage.getKeys()}async getEntries(){return this.storage.getEntries()}async getItem(e){return this.storage.getItem(e)}async setItem(e,r){return this.storage.setItem(e,r)}async removeItem(e){return this.storage.removeItem(e)}};var Di={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Ja=function(t,e){return Ja=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Ja(t,e)};function Rg(t,e){Ja(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Xa=function(){return Xa=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Xa.apply(this,arguments)};function Pg(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Ng(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function $g(t,e){return function(r,n){e(r,n,t)}}function Lg(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Mg(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):i(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function kg(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Ug(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Fg(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function ec(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ed(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function jg(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ed(arguments[e]));return t}function Bg(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function us(t){return this instanceof us?(this.v=t,this):new us(t)}function qg(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(p){n[p]&&(i[p]=function(y){return new Promise(function(w,S){s.push([p,y,w,S])>1||a(p,y)})})}function a(p,y){try{c(n[p](y))}catch(w){f(s[0][3],w)}}function c(p){p.value instanceof us?Promise.resolve(p.value.v).then(u,d):f(s[0][2],p)}function u(p){a("next",p)}function d(p){a("throw",p)}function f(p,y){p(y),s.shift(),s.length&&a(s[0][0],s[0][1])}}function zg(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:us(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function Wg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof ec=="function"?ec(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}function Vg(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Hg(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Kg(t){return t&&t.__esModule?t:{default:t}}function Zg(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Gg(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const nn=Ga(Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Xa},__asyncDelegator:zg,__asyncGenerator:qg,__asyncValues:Wg,__await:us,__awaiter:Mg,__classPrivateFieldGet:Zg,__classPrivateFieldSet:Gg,__createBinding:Ug,__decorate:Ng,__exportStar:Fg,__extends:Rg,__generator:kg,__importDefault:Kg,__importStar:Hg,__makeTemplateObject:Vg,__metadata:Lg,__param:$g,__read:ed,__rest:Pg,__spread:jg,__spreadArrays:Bg,__values:ec},Symbol.toStringTag,{value:"Module"})));var ds={},ye={},tc={},hs={},td;function Qg(){if(td)return hs;td=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return hs.delay=t,hs}var Xn={},rc={},ei={},rd;function Yg(){return rd||(rd=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.ONE_THOUSAND=ei.ONE_HUNDRED=void 0,ei.ONE_HUNDRED=100,ei.ONE_THOUSAND=1e3),ei}var nc={},nd;function Jg(){return nd||(nd=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(nc)),nc}var id;function sd(){return id||(id=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nn;e.__exportStar(Yg(),t),e.__exportStar(Jg(),t)}(rc)),rc}var od;function Xg(){if(od)return Xn;od=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.fromMiliseconds=Xn.toMiliseconds=void 0;const t=sd();function e(n){return n*t.ONE_THOUSAND}Xn.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return Xn.fromMiliseconds=r,Xn}var ad;function em(){return ad||(ad=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nn;e.__exportStar(Qg(),t),e.__exportStar(Xg(),t)}(tc)),tc}var Ii={},cd;function tm(){if(cd)return Ii;cd=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Ii.Watch=t,Ii.default=t,Ii}var ic={},fs={},ld;function rm(){if(ld)return fs;ld=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.IWatch=void 0;class t{}return fs.IWatch=t,fs}var ud;function nm(){return ud||(ud=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),nn.__exportStar(rm(),t)}(ic)),ic}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nn;e.__exportStar(em(),t),e.__exportStar(tm(),t),e.__exportStar(nm(),t),e.__exportStar(sd(),t)})(ye);var sc={},ps={};let Pr=class{};const im=Ga(Object.freeze(Object.defineProperty({__proto__:null,IEvents:Pr},Symbol.toStringTag,{value:"Module"})));var dd;function sm(){if(dd)return ps;dd=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.IHeartBeat=void 0;const t=im;class e extends t.IEvents{constructor(n){super()}}return ps.IHeartBeat=e,ps}var hd;function fd(){return hd||(hd=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),nn.__exportStar(sm(),t)}(sc)),sc}var oc={},ti={},pd;function om(){if(pd)return ti;pd=1,Object.defineProperty(ti,"__esModule",{value:!0}),ti.HEARTBEAT_EVENTS=ti.HEARTBEAT_INTERVAL=void 0;const t=ye;return ti.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,ti.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},ti}var gd;function md(){return gd||(gd=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),nn.__exportStar(om(),t)}(oc)),oc}var yd;function am(){if(yd)return ds;yd=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.HeartBeat=void 0;const t=nn,e=Ur,r=ye,n=fd(),i=md();class s extends n.IHeartBeat{constructor(a){super(a),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=(a==null?void 0:a.interval)||i.HEARTBEAT_INTERVAL}static init(a){return t.__awaiter(this,void 0,void 0,function*(){const c=new s(a);return yield c.init(),c})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(a,c){this.events.on(a,c)}once(a,c){this.events.once(a,c)}off(a,c){this.events.off(a,c)}removeListener(a,c){this.events.removeListener(a,c)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return ds.HeartBeat=s,ds}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nn;e.__exportStar(am(),t),e.__exportStar(fd(),t),e.__exportStar(md(),t)})(Di);var at={},ac,vd;function cm(){if(vd)return ac;vd=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}ac=e;function e(r,n,i){var s=i&&i.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var c=new Array(a);c[0]=s(r);for(var u=1;u<a;u++)c[u]=s(n[u]);return c.join(" ")}if(typeof r!="string")return r;var d=n.length;if(d===0)return r;for(var f="",p=1-o,y=-1,w=r&&r.length||0,S=0;S<w;){if(r.charCodeAt(S)===37&&S+1<w){switch(y=y>-1?y:0,r.charCodeAt(S+1)){case 100:case 102:if(p>=d||n[p]==null)break;y<S&&(f+=r.slice(y,S)),f+=Number(n[p]),y=S+2,S++;break;case 105:if(p>=d||n[p]==null)break;y<S&&(f+=r.slice(y,S)),f+=Math.floor(Number(n[p])),y=S+2,S++;break;case 79:case 111:case 106:if(p>=d||n[p]===void 0)break;y<S&&(f+=r.slice(y,S));var E=typeof n[p];if(E==="string"){f+="'"+n[p]+"'",y=S+2,S++;break}if(E==="function"){f+=n[p].name||"<anonymous>",y=S+2,S++;break}f+=s(n[p]),y=S+2,S++;break;case 115:if(p>=d)break;y<S&&(f+=r.slice(y,S)),f+=String(n[p]),y=S+2,S++;break;case 37:y<S&&(f+=r.slice(y,S)),f+="%",y=S+2,S++,p--;break}++p}++S}return y===-1?r:(y<w&&(f+=r.slice(y)),f)}return ac}var cc,wd;function lm(){if(wd)return cc;wd=1;const t=cm();cc=i;const e=_().console||{},r={mapHttpRequest:w,mapHttpResponse:w,wrapRequestSerializer:S,wrapResponseSerializer:S,wrapErrorSerializer:S,req:w,res:w,err:p};function n(g,l){return Array.isArray(g)?g.filter(function(P){return P!=="!stdSerializers.err"}):g===!0?Object.keys(l):!1}function i(g){g=g||{},g.browser=g.browser||{};const l=g.browser.transmit;if(l&&typeof l.send!="function")throw Error("pino: transmit option must have a send function");const m=g.browser.write||e;g.browser.write&&(g.browser.asObject=!0);const P=g.serializers||{},N=n(g.browser.serialize,P);let z=g.browser.serialize;Array.isArray(g.browser.serialize)&&g.browser.serialize.indexOf("!stdSerializers.err")>-1&&(z=!1);const W=["error","fatal","warn","info","debug","trace"];typeof m=="function"&&(m.error=m.fatal=m.warn=m.info=m.debug=m.trace=m),g.enabled===!1&&(g.level="silent");const G=g.level||"info",$=Object.create(m);$.log||($.log=E),Object.defineProperty($,"levelVal",{get:oe}),Object.defineProperty($,"level",{get:Y,set:Z});const j={transmit:l,serialize:N,asObject:g.browser.asObject,levels:W,timestamp:y(g)};$.levels=i.levels,$.level=G,$.setMaxListeners=$.getMaxListeners=$.emit=$.addListener=$.on=$.prependListener=$.once=$.prependOnceListener=$.removeListener=$.removeAllListeners=$.listeners=$.listenerCount=$.eventNames=$.write=$.flush=E,$.serializers=P,$._serialize=N,$._stdErrSerialize=z,$.child=X,l&&($._logEvent=f());function oe(){return this.level==="silent"?1/0:this.levels.values[this.level]}function Y(){return this._level}function Z(K){if(K!=="silent"&&!this.levels.values[K])throw Error("unknown level "+K);this._level=K,s(j,$,"error","log"),s(j,$,"fatal","error"),s(j,$,"warn","error"),s(j,$,"info","log"),s(j,$,"debug","log"),s(j,$,"trace","log")}function X(K,ee){if(!K)throw new Error("missing bindings for child Pino");ee=ee||{},N&&K.serializers&&(ee.serializers=K.serializers);const xe=ee.serializers;if(N&&xe){var ne=Object.assign({},P,xe),Ee=g.browser.serialize===!0?Object.keys(ne):N;delete K.serializers,c([K],Ee,ne,this._stdErrSerialize)}function fe(_e){this._childLevel=(_e._childLevel|0)+1,this.error=u(_e,K,"error"),this.fatal=u(_e,K,"fatal"),this.warn=u(_e,K,"warn"),this.info=u(_e,K,"info"),this.debug=u(_e,K,"debug"),this.trace=u(_e,K,"trace"),ne&&(this.serializers=ne,this._serialize=Ee),l&&(this._logEvent=f([].concat(_e._logEvent.bindings,K)))}return fe.prototype=this,new fe(this)}return $}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=r,i.stdTimeFunctions=Object.assign({},{nullTime:D,epochTime:b,unixTime:C,isoTime:v});function s(g,l,m,P){const N=Object.getPrototypeOf(l);l[m]=l.levelVal>l.levels.values[m]?E:N[m]?N[m]:e[m]||e[P]||E,o(g,l,m)}function o(g,l,m){!g.transmit&&l[m]===E||(l[m]=function(P){return function(){const z=g.timestamp(),W=new Array(arguments.length),G=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var $=0;$<W.length;$++)W[$]=arguments[$];if(g.serialize&&!g.asObject&&c(W,this._serialize,this.serializers,this._stdErrSerialize),g.asObject?P.call(G,a(this,m,W,z)):P.apply(G,W),g.transmit){const j=g.transmit.level||l.level,oe=i.levels.values[j],Y=i.levels.values[m];if(Y<oe)return;d(this,{ts:z,methodLevel:m,methodValue:Y,transmitLevel:j,transmitValue:i.levels.values[g.transmit.level||l.level],send:g.transmit.send,val:l.levelVal},W)}}}(l[m]))}function a(g,l,m,P){g._serialize&&c(m,g._serialize,g.serializers,g._stdErrSerialize);const N=m.slice();let z=N[0];const W={};P&&(W.time=P),W.level=i.levels.values[l];let G=(g._childLevel|0)+1;if(G<1&&(G=1),z!==null&&typeof z=="object"){for(;G--&&typeof N[0]=="object";)Object.assign(W,N.shift());z=N.length?t(N.shift(),N):void 0}else typeof z=="string"&&(z=t(N.shift(),N));return z!==void 0&&(W.msg=z),W}function c(g,l,m,P){for(const N in g)if(P&&g[N]instanceof Error)g[N]=i.stdSerializers.err(g[N]);else if(typeof g[N]=="object"&&!Array.isArray(g[N]))for(const z in g[N])l&&l.indexOf(z)>-1&&z in m&&(g[N][z]=m[z](g[N][z]))}function u(g,l,m){return function(){const P=new Array(1+arguments.length);P[0]=l;for(var N=1;N<P.length;N++)P[N]=arguments[N-1];return g[m].apply(this,P)}}function d(g,l,m){const P=l.send,N=l.ts,z=l.methodLevel,W=l.methodValue,G=l.val,$=g._logEvent.bindings;c(m,g._serialize||Object.keys(g.serializers),g.serializers,g._stdErrSerialize===void 0?!0:g._stdErrSerialize),g._logEvent.ts=N,g._logEvent.messages=m.filter(function(j){return $.indexOf(j)===-1}),g._logEvent.level.label=z,g._logEvent.level.value=W,P(z,g._logEvent,G),g._logEvent=f($)}function f(g){return{ts:0,messages:[],bindings:g||[],level:{label:"",value:0}}}function p(g){const l={type:g.constructor.name,msg:g.message,stack:g.stack};for(const m in g)l[m]===void 0&&(l[m]=g[m]);return l}function y(g){return typeof g.timestamp=="function"?g.timestamp:g.timestamp===!1?D:b}function w(){return{}}function S(g){return g}function E(){}function D(){return!1}function b(){return Date.now()}function C(){return Math.round(Date.now()/1e3)}function v(){return new Date(Date.now()).toISOString()}function _(){function g(l){return typeof l<"u"&&l}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return g(self)||g(window)||g(this)||{}}}return cc}var ri={},bd;function _d(){return bd||(bd=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.PINO_CUSTOM_CONTEXT_KEY=ri.PINO_LOGGER_DEFAULTS=void 0,ri.PINO_LOGGER_DEFAULTS={level:"info"},ri.PINO_CUSTOM_CONTEXT_KEY="custom_context"),ri}var mr={},Ed;function um(){if(Ed)return mr;Ed=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.generateChildLogger=mr.formatChildLoggerContext=mr.getLoggerContext=mr.setBrowserLoggerContext=mr.getBrowserLoggerContext=mr.getDefaultLoggerOptions=void 0;const t=_d();function e(a){return Object.assign(Object.assign({},a),{level:(a==null?void 0:a.level)||t.PINO_LOGGER_DEFAULTS.level})}mr.getDefaultLoggerOptions=e;function r(a,c=t.PINO_CUSTOM_CONTEXT_KEY){return a[c]||""}mr.getBrowserLoggerContext=r;function n(a,c,u=t.PINO_CUSTOM_CONTEXT_KEY){return a[u]=c,a}mr.setBrowserLoggerContext=n;function i(a,c=t.PINO_CUSTOM_CONTEXT_KEY){let u="";return typeof a.bindings>"u"?u=r(a,c):u=a.bindings().context||"",u}mr.getLoggerContext=i;function s(a,c,u=t.PINO_CUSTOM_CONTEXT_KEY){const d=i(a,u);return d.trim()?`${d}/${c}`:c}mr.formatChildLoggerContext=s;function o(a,c,u=t.PINO_CUSTOM_CONTEXT_KEY){const d=s(a,c,u),f=a.child({context:d});return n(f,d,u)}return mr.generateChildLogger=o,mr}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=nn,r=e.__importDefault(lm());Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(_d(),t),e.__exportStar(um(),t)})(at);let dm=class extends Pr{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},hm=class extends Pr{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},fm=class{constructor(e,r){this.logger=e,this.core=r}},pm=class extends Pr{constructor(e,r){super(),this.relayer=e,this.logger=r}},gm=class extends Pr{constructor(e){super()}},mm=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},ym=class extends Pr{constructor(e,r){super(),this.relayer=e,this.logger=r}},vm=class extends Pr{constructor(e,r){super(),this.core=e,this.logger=r}},wm=class{constructor(e,r){this.projectId=e,this.logger=r}},bm=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},_m=class{constructor(e){this.client=e}};const Em=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),Sm=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Sd(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Sm(t)}catch{return t}}function lc(t){return typeof t=="string"?t:Em(t)||""}var uc={},Ai={},Io={},Ao={};Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.BrowserRandomSource=void 0;const xd=65536;class xm{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=xd)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,xd)));return r}}Ao.BrowserRandomSource=xm;function Cm(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var To={},Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});function Om(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Nr.wipe=Om;const Dm=Ga(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(To,"__esModule",{value:!0}),To.NodeRandomSource=void 0;const Im=Nr;class Am{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Cm<"u"){const e=Dm;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,Im.wipe)(r),n}}To.NodeRandomSource=Am,Object.defineProperty(Io,"__esModule",{value:!0}),Io.SystemRandomSource=void 0;const Tm=Ao,Rm=To;class Pm{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Tm.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Rm.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Io.SystemRandomSource=Pm;var Le={},Cd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,c){var u=a>>>16&65535,d=a&65535,f=c>>>16&65535,p=c&65535;return d*p+(u*p+d*f<<16>>>0)|0}t.mul=Math.imul||e;function r(a,c){return a+c|0}t.add=r;function n(a,c){return a-c|0}t.sub=n;function i(a,c){return a<<c|a>>>32-c}t.rotl=i;function s(a,c){return a<<32-c|a>>>c}t.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||o,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(Cd),Object.defineProperty(Le,"__esModule",{value:!0});var Od=Cd;function Nm(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}Le.readInt16BE=Nm;function $m(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}Le.readUint16BE=$m;function Lm(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}Le.readInt16LE=Lm;function Mm(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}Le.readUint16LE=Mm;function Dd(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}Le.writeUint16BE=Dd,Le.writeInt16BE=Dd;function Id(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}Le.writeUint16LE=Id,Le.writeInt16LE=Id;function dc(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}Le.readInt32BE=dc;function hc(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}Le.readUint32BE=hc;function fc(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}Le.readInt32LE=fc;function pc(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}Le.readUint32LE=pc;function Ro(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}Le.writeUint32BE=Ro,Le.writeInt32BE=Ro;function Po(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}Le.writeUint32LE=Po,Le.writeInt32LE=Po;function km(t,e){e===void 0&&(e=0);var r=dc(t,e),n=dc(t,e+4);return r*4294967296+n-(n>>31)*4294967296}Le.readInt64BE=km;function Um(t,e){e===void 0&&(e=0);var r=hc(t,e),n=hc(t,e+4);return r*4294967296+n}Le.readUint64BE=Um;function Fm(t,e){e===void 0&&(e=0);var r=fc(t,e),n=fc(t,e+4);return n*4294967296+r-(r>>31)*4294967296}Le.readInt64LE=Fm;function jm(t,e){e===void 0&&(e=0);var r=pc(t,e),n=pc(t,e+4);return n*4294967296+r}Le.readUint64LE=jm;function Ad(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Ro(t/4294967296>>>0,e,r),Ro(t>>>0,e,r+4),e}Le.writeUint64BE=Ad,Le.writeInt64BE=Ad;function Td(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Po(t>>>0,e,r),Po(t/4294967296>>>0,e,r+4),e}Le.writeUint64LE=Td,Le.writeInt64LE=Td;function Bm(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}Le.readUintBE=Bm;function qm(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}Le.readUintLE=qm;function zm(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Od.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}Le.writeUintBE=zm;function Wm(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Od.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}Le.writeUintLE=Wm;function Vm(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}Le.readFloat32BE=Vm;function Hm(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}Le.readFloat32LE=Hm;function Km(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}Le.readFloat64BE=Km;function Zm(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}Le.readFloat64LE=Zm;function Gm(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}Le.writeFloat32BE=Gm;function Qm(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}Le.writeFloat32LE=Qm;function Ym(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}Le.writeFloat64BE=Ym;function Jm(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}Le.writeFloat64LE=Jm,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=Io,r=Le,n=Nr;t.defaultRandomSource=new e.SystemRandomSource;function i(u,d=t.defaultRandomSource){return d.randomBytes(u)}t.randomBytes=i;function s(u=t.defaultRandomSource){const d=i(4,u),f=(0,r.readUint32LE)(d);return(0,n.wipe)(d),f}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(u,d=o,f=t.defaultRandomSource){if(d.length<2)throw new Error("randomString charset is too short");if(d.length>256)throw new Error("randomString charset is too long");let p="";const y=d.length,w=256-256%y;for(;u>0;){const S=i(Math.ceil(u*256/w),f);for(let E=0;E<S.length&&u>0;E++){const D=S[E];D<w&&(p+=d.charAt(D%y),u--)}(0,n.wipe)(S)}return p}t.randomString=a;function c(u,d=o,f=t.defaultRandomSource){const p=Math.ceil(u/(Math.log(d.length)/Math.LN2));return a(p,d,f)}t.randomStringForEntropy=c}(Ai);var Rd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Le,r=Nr;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(c,u){if(u===void 0&&(u=c.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var d=0;if(this._bytesHashed+=u,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&u>0;)this._buffer[this._bufferLength++]=c[d++],u--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(u>=this.blockSize&&(d=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,c,d,u),u%=this.blockSize);u>0;)this._buffer[this._bufferLength++]=c[d++],u--;return this},a.prototype.finish=function(c){if(!this._finished){var u=this._bytesHashed,d=this._bufferLength,f=u/536870912|0,p=u<<3,y=u%128<112?128:256;this._buffer[d]=128;for(var w=d+1;w<y-8;w++)this._buffer[w]=0;e.writeUint32BE(f,this._buffer,y-8),e.writeUint32BE(p,this._buffer,y-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,y),this._finished=!0}for(var w=0;w<this.digestLength/8;w++)e.writeUint32BE(this._stateHi[w],c,w*8),e.writeUint32BE(this._stateLo[w],c,w*8+4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._stateHi.set(c.stateHi),this._stateLo.set(c.stateLo),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.stateHi),r.wipe(c.stateLo),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,c,u,d,f,p,y){for(var w=u[0],S=u[1],E=u[2],D=u[3],b=u[4],C=u[5],v=u[6],_=u[7],g=d[0],l=d[1],m=d[2],P=d[3],N=d[4],z=d[5],W=d[6],G=d[7],$,j,oe,Y,Z,X,K,ee;y>=128;){for(var xe=0;xe<16;xe++){var ne=8*xe+p;a[xe]=e.readUint32BE(f,ne),c[xe]=e.readUint32BE(f,ne+4)}for(var xe=0;xe<80;xe++){var Ee=w,fe=S,_e=E,q=D,B=b,M=C,h=v,R=_,ce=g,he=l,We=m,Ie=P,Me=N,Xe=z,pt=W,dt=G;if($=_,j=G,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=(b>>>14|N<<32-14)^(b>>>18|N<<32-18)^(N>>>41-32|b<<32-(41-32)),j=(N>>>14|b<<32-14)^(N>>>18|b<<32-18)^(b>>>41-32|N<<32-(41-32)),Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,$=b&C^~b&v,j=N&z^~N&W,Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,$=i[xe*2],j=i[xe*2+1],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,$=a[xe%16],j=c[xe%16],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,oe=K&65535|ee<<16,Y=Z&65535|X<<16,$=oe,j=Y,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=(w>>>28|g<<32-28)^(g>>>34-32|w<<32-(34-32))^(g>>>39-32|w<<32-(39-32)),j=(g>>>28|w<<32-28)^(w>>>34-32|g<<32-(34-32))^(w>>>39-32|g<<32-(39-32)),Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,$=w&S^w&E^S&E,j=g&l^g&m^l&m,Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,R=K&65535|ee<<16,dt=Z&65535|X<<16,$=q,j=Ie,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=oe,j=Y,Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,q=K&65535|ee<<16,Ie=Z&65535|X<<16,S=Ee,E=fe,D=_e,b=q,C=B,v=M,_=h,w=R,l=ce,m=he,P=We,N=Ie,z=Me,W=Xe,G=pt,g=dt,xe%16===15)for(var ne=0;ne<16;ne++)$=a[ne],j=c[ne],Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=a[(ne+9)%16],j=c[(ne+9)%16],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,oe=a[(ne+1)%16],Y=c[(ne+1)%16],$=(oe>>>1|Y<<32-1)^(oe>>>8|Y<<32-8)^oe>>>7,j=(Y>>>1|oe<<32-1)^(Y>>>8|oe<<32-8)^(Y>>>7|oe<<32-7),Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,oe=a[(ne+14)%16],Y=c[(ne+14)%16],$=(oe>>>19|Y<<32-19)^(Y>>>61-32|oe<<32-(61-32))^oe>>>6,j=(Y>>>19|oe<<32-19)^(oe>>>61-32|Y<<32-(61-32))^(Y>>>6|oe<<32-6),Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,a[ne]=K&65535|ee<<16,c[ne]=Z&65535|X<<16}$=w,j=g,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=u[0],j=d[0],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[0]=w=K&65535|ee<<16,d[0]=g=Z&65535|X<<16,$=S,j=l,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=u[1],j=d[1],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[1]=S=K&65535|ee<<16,d[1]=l=Z&65535|X<<16,$=E,j=m,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=u[2],j=d[2],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[2]=E=K&65535|ee<<16,d[2]=m=Z&65535|X<<16,$=D,j=P,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=u[3],j=d[3],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[3]=D=K&65535|ee<<16,d[3]=P=Z&65535|X<<16,$=b,j=N,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=u[4],j=d[4],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[4]=b=K&65535|ee<<16,d[4]=N=Z&65535|X<<16,$=C,j=z,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=u[5],j=d[5],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[5]=C=K&65535|ee<<16,d[5]=z=Z&65535|X<<16,$=v,j=W,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=u[6],j=d[6],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[6]=v=K&65535|ee<<16,d[6]=W=Z&65535|X<<16,$=_,j=G,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=u[7],j=d[7],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[7]=_=K&65535|ee<<16,d[7]=G=Z&65535|X<<16,p+=128,y-=128}return p}function o(a){var c=new n;c.update(a);var u=c.digest();return c.clean(),u}t.hash=o})(Rd),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=Ai,r=Rd,n=Nr;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(q){const B=new Float64Array(16);if(q)for(let M=0;M<q.length;M++)B[M]=q[M];return B}const s=new Uint8Array(32);s[0]=9;const o=i(),a=i([1]),c=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function y(q,B){for(let M=0;M<16;M++)q[M]=B[M]|0}function w(q){let B=1;for(let M=0;M<16;M++){let h=q[M]+B+65535;B=Math.floor(h/65536),q[M]=h-B*65536}q[0]+=B-1+37*(B-1)}function S(q,B,M){const h=~(M-1);for(let R=0;R<16;R++){const ce=h&(q[R]^B[R]);q[R]^=ce,B[R]^=ce}}function E(q,B){const M=i(),h=i();for(let R=0;R<16;R++)h[R]=B[R];w(h),w(h),w(h);for(let R=0;R<2;R++){M[0]=h[0]-65517;for(let he=1;he<15;he++)M[he]=h[he]-65535-(M[he-1]>>16&1),M[he-1]&=65535;M[15]=h[15]-32767-(M[14]>>16&1);const ce=M[15]>>16&1;M[14]&=65535,S(h,M,1-ce)}for(let R=0;R<16;R++)q[2*R]=h[R]&255,q[2*R+1]=h[R]>>8}function D(q,B){let M=0;for(let h=0;h<32;h++)M|=q[h]^B[h];return(1&M-1>>>8)-1}function b(q,B){const M=new Uint8Array(32),h=new Uint8Array(32);return E(M,q),E(h,B),D(M,h)}function C(q){const B=new Uint8Array(32);return E(B,q),B[0]&1}function v(q,B){for(let M=0;M<16;M++)q[M]=B[2*M]+(B[2*M+1]<<8);q[15]&=32767}function _(q,B,M){for(let h=0;h<16;h++)q[h]=B[h]+M[h]}function g(q,B,M){for(let h=0;h<16;h++)q[h]=B[h]-M[h]}function l(q,B,M){let h,R,ce=0,he=0,We=0,Ie=0,Me=0,Xe=0,pt=0,dt=0,Ve=0,Be=0,Ne=0,ke=0,$e=0,Te=0,Ae=0,Se=0,Ue=0,qe=0,De=0,He=0,et=0,nt=0,tt=0,it=0,Sr=0,fr=0,Mr=0,Gt=0,Qt=0,Ar=0,hn=0,wt=M[0],bt=M[1],At=M[2],xt=M[3],Tt=M[4],_t=M[5],Mt=M[6],jt=M[7],Bt=M[8],kt=M[9],qt=M[10],Rt=M[11],Pt=M[12],vt=M[13],T=M[14],H=M[15];h=B[0],ce+=h*wt,he+=h*bt,We+=h*At,Ie+=h*xt,Me+=h*Tt,Xe+=h*_t,pt+=h*Mt,dt+=h*jt,Ve+=h*Bt,Be+=h*kt,Ne+=h*qt,ke+=h*Rt,$e+=h*Pt,Te+=h*vt,Ae+=h*T,Se+=h*H,h=B[1],he+=h*wt,We+=h*bt,Ie+=h*At,Me+=h*xt,Xe+=h*Tt,pt+=h*_t,dt+=h*Mt,Ve+=h*jt,Be+=h*Bt,Ne+=h*kt,ke+=h*qt,$e+=h*Rt,Te+=h*Pt,Ae+=h*vt,Se+=h*T,Ue+=h*H,h=B[2],We+=h*wt,Ie+=h*bt,Me+=h*At,Xe+=h*xt,pt+=h*Tt,dt+=h*_t,Ve+=h*Mt,Be+=h*jt,Ne+=h*Bt,ke+=h*kt,$e+=h*qt,Te+=h*Rt,Ae+=h*Pt,Se+=h*vt,Ue+=h*T,qe+=h*H,h=B[3],Ie+=h*wt,Me+=h*bt,Xe+=h*At,pt+=h*xt,dt+=h*Tt,Ve+=h*_t,Be+=h*Mt,Ne+=h*jt,ke+=h*Bt,$e+=h*kt,Te+=h*qt,Ae+=h*Rt,Se+=h*Pt,Ue+=h*vt,qe+=h*T,De+=h*H,h=B[4],Me+=h*wt,Xe+=h*bt,pt+=h*At,dt+=h*xt,Ve+=h*Tt,Be+=h*_t,Ne+=h*Mt,ke+=h*jt,$e+=h*Bt,Te+=h*kt,Ae+=h*qt,Se+=h*Rt,Ue+=h*Pt,qe+=h*vt,De+=h*T,He+=h*H,h=B[5],Xe+=h*wt,pt+=h*bt,dt+=h*At,Ve+=h*xt,Be+=h*Tt,Ne+=h*_t,ke+=h*Mt,$e+=h*jt,Te+=h*Bt,Ae+=h*kt,Se+=h*qt,Ue+=h*Rt,qe+=h*Pt,De+=h*vt,He+=h*T,et+=h*H,h=B[6],pt+=h*wt,dt+=h*bt,Ve+=h*At,Be+=h*xt,Ne+=h*Tt,ke+=h*_t,$e+=h*Mt,Te+=h*jt,Ae+=h*Bt,Se+=h*kt,Ue+=h*qt,qe+=h*Rt,De+=h*Pt,He+=h*vt,et+=h*T,nt+=h*H,h=B[7],dt+=h*wt,Ve+=h*bt,Be+=h*At,Ne+=h*xt,ke+=h*Tt,$e+=h*_t,Te+=h*Mt,Ae+=h*jt,Se+=h*Bt,Ue+=h*kt,qe+=h*qt,De+=h*Rt,He+=h*Pt,et+=h*vt,nt+=h*T,tt+=h*H,h=B[8],Ve+=h*wt,Be+=h*bt,Ne+=h*At,ke+=h*xt,$e+=h*Tt,Te+=h*_t,Ae+=h*Mt,Se+=h*jt,Ue+=h*Bt,qe+=h*kt,De+=h*qt,He+=h*Rt,et+=h*Pt,nt+=h*vt,tt+=h*T,it+=h*H,h=B[9],Be+=h*wt,Ne+=h*bt,ke+=h*At,$e+=h*xt,Te+=h*Tt,Ae+=h*_t,Se+=h*Mt,Ue+=h*jt,qe+=h*Bt,De+=h*kt,He+=h*qt,et+=h*Rt,nt+=h*Pt,tt+=h*vt,it+=h*T,Sr+=h*H,h=B[10],Ne+=h*wt,ke+=h*bt,$e+=h*At,Te+=h*xt,Ae+=h*Tt,Se+=h*_t,Ue+=h*Mt,qe+=h*jt,De+=h*Bt,He+=h*kt,et+=h*qt,nt+=h*Rt,tt+=h*Pt,it+=h*vt,Sr+=h*T,fr+=h*H,h=B[11],ke+=h*wt,$e+=h*bt,Te+=h*At,Ae+=h*xt,Se+=h*Tt,Ue+=h*_t,qe+=h*Mt,De+=h*jt,He+=h*Bt,et+=h*kt,nt+=h*qt,tt+=h*Rt,it+=h*Pt,Sr+=h*vt,fr+=h*T,Mr+=h*H,h=B[12],$e+=h*wt,Te+=h*bt,Ae+=h*At,Se+=h*xt,Ue+=h*Tt,qe+=h*_t,De+=h*Mt,He+=h*jt,et+=h*Bt,nt+=h*kt,tt+=h*qt,it+=h*Rt,Sr+=h*Pt,fr+=h*vt,Mr+=h*T,Gt+=h*H,h=B[13],Te+=h*wt,Ae+=h*bt,Se+=h*At,Ue+=h*xt,qe+=h*Tt,De+=h*_t,He+=h*Mt,et+=h*jt,nt+=h*Bt,tt+=h*kt,it+=h*qt,Sr+=h*Rt,fr+=h*Pt,Mr+=h*vt,Gt+=h*T,Qt+=h*H,h=B[14],Ae+=h*wt,Se+=h*bt,Ue+=h*At,qe+=h*xt,De+=h*Tt,He+=h*_t,et+=h*Mt,nt+=h*jt,tt+=h*Bt,it+=h*kt,Sr+=h*qt,fr+=h*Rt,Mr+=h*Pt,Gt+=h*vt,Qt+=h*T,Ar+=h*H,h=B[15],Se+=h*wt,Ue+=h*bt,qe+=h*At,De+=h*xt,He+=h*Tt,et+=h*_t,nt+=h*Mt,tt+=h*jt,it+=h*Bt,Sr+=h*kt,fr+=h*qt,Mr+=h*Rt,Gt+=h*Pt,Qt+=h*vt,Ar+=h*T,hn+=h*H,ce+=38*Ue,he+=38*qe,We+=38*De,Ie+=38*He,Me+=38*et,Xe+=38*nt,pt+=38*tt,dt+=38*it,Ve+=38*Sr,Be+=38*fr,Ne+=38*Mr,ke+=38*Gt,$e+=38*Qt,Te+=38*Ar,Ae+=38*hn,R=1,h=ce+R+65535,R=Math.floor(h/65536),ce=h-R*65536,h=he+R+65535,R=Math.floor(h/65536),he=h-R*65536,h=We+R+65535,R=Math.floor(h/65536),We=h-R*65536,h=Ie+R+65535,R=Math.floor(h/65536),Ie=h-R*65536,h=Me+R+65535,R=Math.floor(h/65536),Me=h-R*65536,h=Xe+R+65535,R=Math.floor(h/65536),Xe=h-R*65536,h=pt+R+65535,R=Math.floor(h/65536),pt=h-R*65536,h=dt+R+65535,R=Math.floor(h/65536),dt=h-R*65536,h=Ve+R+65535,R=Math.floor(h/65536),Ve=h-R*65536,h=Be+R+65535,R=Math.floor(h/65536),Be=h-R*65536,h=Ne+R+65535,R=Math.floor(h/65536),Ne=h-R*65536,h=ke+R+65535,R=Math.floor(h/65536),ke=h-R*65536,h=$e+R+65535,R=Math.floor(h/65536),$e=h-R*65536,h=Te+R+65535,R=Math.floor(h/65536),Te=h-R*65536,h=Ae+R+65535,R=Math.floor(h/65536),Ae=h-R*65536,h=Se+R+65535,R=Math.floor(h/65536),Se=h-R*65536,ce+=R-1+37*(R-1),R=1,h=ce+R+65535,R=Math.floor(h/65536),ce=h-R*65536,h=he+R+65535,R=Math.floor(h/65536),he=h-R*65536,h=We+R+65535,R=Math.floor(h/65536),We=h-R*65536,h=Ie+R+65535,R=Math.floor(h/65536),Ie=h-R*65536,h=Me+R+65535,R=Math.floor(h/65536),Me=h-R*65536,h=Xe+R+65535,R=Math.floor(h/65536),Xe=h-R*65536,h=pt+R+65535,R=Math.floor(h/65536),pt=h-R*65536,h=dt+R+65535,R=Math.floor(h/65536),dt=h-R*65536,h=Ve+R+65535,R=Math.floor(h/65536),Ve=h-R*65536,h=Be+R+65535,R=Math.floor(h/65536),Be=h-R*65536,h=Ne+R+65535,R=Math.floor(h/65536),Ne=h-R*65536,h=ke+R+65535,R=Math.floor(h/65536),ke=h-R*65536,h=$e+R+65535,R=Math.floor(h/65536),$e=h-R*65536,h=Te+R+65535,R=Math.floor(h/65536),Te=h-R*65536,h=Ae+R+65535,R=Math.floor(h/65536),Ae=h-R*65536,h=Se+R+65535,R=Math.floor(h/65536),Se=h-R*65536,ce+=R-1+37*(R-1),q[0]=ce,q[1]=he,q[2]=We,q[3]=Ie,q[4]=Me,q[5]=Xe,q[6]=pt,q[7]=dt,q[8]=Ve,q[9]=Be,q[10]=Ne,q[11]=ke,q[12]=$e,q[13]=Te,q[14]=Ae,q[15]=Se}function m(q,B){l(q,B,B)}function P(q,B){const M=i();let h;for(h=0;h<16;h++)M[h]=B[h];for(h=253;h>=0;h--)m(M,M),h!==2&&h!==4&&l(M,M,B);for(h=0;h<16;h++)q[h]=M[h]}function N(q,B){const M=i();let h;for(h=0;h<16;h++)M[h]=B[h];for(h=250;h>=0;h--)m(M,M),h!==1&&l(M,M,B);for(h=0;h<16;h++)q[h]=M[h]}function z(q,B){const M=i(),h=i(),R=i(),ce=i(),he=i(),We=i(),Ie=i(),Me=i(),Xe=i();g(M,q[1],q[0]),g(Xe,B[1],B[0]),l(M,M,Xe),_(h,q[0],q[1]),_(Xe,B[0],B[1]),l(h,h,Xe),l(R,q[3],B[3]),l(R,R,u),l(ce,q[2],B[2]),_(ce,ce,ce),g(he,h,M),g(We,ce,R),_(Ie,ce,R),_(Me,h,M),l(q[0],he,We),l(q[1],Me,Ie),l(q[2],Ie,We),l(q[3],he,Me)}function W(q,B,M){for(let h=0;h<4;h++)S(q[h],B[h],M)}function G(q,B){const M=i(),h=i(),R=i();P(R,B[2]),l(M,B[0],R),l(h,B[1],R),E(q,h),q[31]^=C(M)<<7}function $(q,B,M){y(q[0],o),y(q[1],a),y(q[2],a),y(q[3],o);for(let h=255;h>=0;--h){const R=M[h/8|0]>>(h&7)&1;W(q,B,R),z(B,q),z(q,q),W(q,B,R)}}function j(q,B){const M=[i(),i(),i(),i()];y(M[0],d),y(M[1],f),y(M[2],a),l(M[3],d,f),$(q,M,B)}function oe(q){if(q.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const B=(0,r.hash)(q);B[0]&=248,B[31]&=127,B[31]|=64;const M=new Uint8Array(32),h=[i(),i(),i(),i()];j(h,B),G(M,h);const R=new Uint8Array(64);return R.set(q),R.set(M,32),{publicKey:M,secretKey:R}}t.generateKeyPairFromSeed=oe;function Y(q){const B=(0,e.randomBytes)(32,q),M=oe(B);return(0,n.wipe)(B),M}t.generateKeyPair=Y;function Z(q){if(q.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(q.subarray(32))}t.extractPublicKeyFromSecretKey=Z;const X=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function K(q,B){let M,h,R,ce;for(h=63;h>=32;--h){for(M=0,R=h-32,ce=h-12;R<ce;++R)B[R]+=M-16*B[h]*X[R-(h-32)],M=Math.floor((B[R]+128)/256),B[R]-=M*256;B[R]+=M,B[h]=0}for(M=0,R=0;R<32;R++)B[R]+=M-(B[31]>>4)*X[R],M=B[R]>>8,B[R]&=255;for(R=0;R<32;R++)B[R]-=M*X[R];for(h=0;h<32;h++)B[h+1]+=B[h]>>8,q[h]=B[h]&255}function ee(q){const B=new Float64Array(64);for(let M=0;M<64;M++)B[M]=q[M];for(let M=0;M<64;M++)q[M]=0;K(q,B)}function xe(q,B){const M=new Float64Array(64),h=[i(),i(),i(),i()],R=(0,r.hash)(q.subarray(0,32));R[0]&=248,R[31]&=127,R[31]|=64;const ce=new Uint8Array(64);ce.set(R.subarray(32),32);const he=new r.SHA512;he.update(ce.subarray(32)),he.update(B);const We=he.digest();he.clean(),ee(We),j(h,We),G(ce,h),he.reset(),he.update(ce.subarray(0,32)),he.update(q.subarray(32)),he.update(B);const Ie=he.digest();ee(Ie);for(let Me=0;Me<32;Me++)M[Me]=We[Me];for(let Me=0;Me<32;Me++)for(let Xe=0;Xe<32;Xe++)M[Me+Xe]+=Ie[Me]*R[Xe];return K(ce.subarray(32),M),ce}t.sign=xe;function ne(q,B){const M=i(),h=i(),R=i(),ce=i(),he=i(),We=i(),Ie=i();return y(q[2],a),v(q[1],B),m(R,q[1]),l(ce,R,c),g(R,R,q[2]),_(ce,q[2],ce),m(he,ce),m(We,he),l(Ie,We,he),l(M,Ie,R),l(M,M,ce),N(M,M),l(M,M,R),l(M,M,ce),l(M,M,ce),l(q[0],M,ce),m(h,q[0]),l(h,h,ce),b(h,R)&&l(q[0],q[0],p),m(h,q[0]),l(h,h,ce),b(h,R)?-1:(C(q[0])===B[31]>>7&&g(q[0],o,q[0]),l(q[3],q[0],q[1]),0)}function Ee(q,B,M){const h=new Uint8Array(32),R=[i(),i(),i(),i()],ce=[i(),i(),i(),i()];if(M.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(ne(ce,q))return!1;const he=new r.SHA512;he.update(M.subarray(0,32)),he.update(q),he.update(B);const We=he.digest();return ee(We),$(R,ce,We),j(ce,M.subarray(32)),z(R,ce),G(h,R),!D(M,h)}t.verify=Ee;function fe(q){let B=[i(),i(),i(),i()];if(ne(B,q))throw new Error("Ed25519: invalid public key");let M=i(),h=i(),R=B[1];_(M,a,R),g(h,a,R),P(h,h),l(M,M,h);let ce=new Uint8Array(32);return E(ce,M),ce}t.convertPublicKeyToX25519=fe;function _e(q){const B=(0,r.hash)(q.subarray(0,32));B[0]&=248,B[31]&=127,B[31]|=64;const M=new Uint8Array(B.subarray(0,32));return(0,n.wipe)(B),M}t.convertSecretKeyToX25519=_e}(uc);const Xm="EdDSA",e1="JWT",Pd=".",Nd="base64url",t1="utf8",r1="utf8",n1=":",i1="did",s1="key",$d="base58btc",o1="z",a1="K36",c1=32;function gc(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Ld(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?gc(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function mc(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=Ld(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return gc(r)}function l1(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function f(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var S=0,E=0,D=0,b=w.length;D!==b&&w[D]===0;)D++,S++;for(var C=(b-D)*d+1>>>0,v=new Uint8Array(C);D!==b;){for(var _=w[D],g=0,l=C-1;(_!==0||g<E)&&l!==-1;l--,g++)_+=256*v[l]>>>0,v[l]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");E=g,D++}for(var m=C-E;m!==C&&v[m]===0;)m++;for(var P=c.repeat(S);m<C;++m)P+=t.charAt(v[m]);return P}function p(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var S=0;if(w[S]!==" "){for(var E=0,D=0;w[S]===c;)E++,S++;for(var b=(w.length-S)*u+1>>>0,C=new Uint8Array(b);w[S];){var v=r[w.charCodeAt(S)];if(v===255)return;for(var _=0,g=b-1;(v!==0||_<D)&&g!==-1;g--,_++)v+=a*C[g]>>>0,C[g]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");D=_,S++}if(w[S]!==" "){for(var l=b-D;l!==b&&C[l]===0;)l++;for(var m=new Uint8Array(E+(b-l)),P=E;l!==b;)m[P++]=C[l++];return m}}}function y(w){var S=p(w);if(S)return S;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:p,decode:y}}var u1=l1,d1=u1;const h1=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},f1=t=>new TextEncoder().encode(t),p1=t=>new TextDecoder().decode(t);class g1{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class m1{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Md(this,e)}}class y1{constructor(e){this.decoders=e}or(e){return Md(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Md=(t,e)=>new y1({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class v1{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new g1(e,r,n),this.decoder=new m1(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const No=({name:t,prefix:e,encode:r,decode:n})=>new v1(t,e,r,n),gs=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=d1(r,e);return No({prefix:t,name:e,encode:n,decode:s=>h1(i(s))})},w1=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let d=0;d<s;++d){const f=i[t[d]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},b1=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},nr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>No({prefix:e,name:t,encode(i){return b1(i,n,r)},decode(i){return w1(i,n,r,t)}}),_1=No({prefix:"\0",name:"identity",encode:t=>p1(t),decode:t=>f1(t)}),E1=Object.freeze(Object.defineProperty({__proto__:null,identity:_1},Symbol.toStringTag,{value:"Module"})),S1=nr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),x1=Object.freeze(Object.defineProperty({__proto__:null,base2:S1},Symbol.toStringTag,{value:"Module"})),C1=nr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),O1=Object.freeze(Object.defineProperty({__proto__:null,base8:C1},Symbol.toStringTag,{value:"Module"})),D1=gs({prefix:"9",name:"base10",alphabet:"0123456789"}),I1=Object.freeze(Object.defineProperty({__proto__:null,base10:D1},Symbol.toStringTag,{value:"Module"})),A1=nr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),T1=nr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),R1=Object.freeze(Object.defineProperty({__proto__:null,base16:A1,base16upper:T1},Symbol.toStringTag,{value:"Module"})),P1=nr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),N1=nr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),$1=nr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),L1=nr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),M1=nr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),k1=nr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),U1=nr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),F1=nr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),j1=nr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),B1=Object.freeze(Object.defineProperty({__proto__:null,base32:P1,base32hex:M1,base32hexpad:U1,base32hexpadupper:F1,base32hexupper:k1,base32pad:$1,base32padupper:L1,base32upper:N1,base32z:j1},Symbol.toStringTag,{value:"Module"})),q1=gs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),z1=gs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),W1=Object.freeze(Object.defineProperty({__proto__:null,base36:q1,base36upper:z1},Symbol.toStringTag,{value:"Module"})),V1=gs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),H1=gs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),K1=Object.freeze(Object.defineProperty({__proto__:null,base58btc:V1,base58flickr:H1},Symbol.toStringTag,{value:"Module"})),Z1=nr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),G1=nr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Q1=nr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Y1=nr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),J1=Object.freeze(Object.defineProperty({__proto__:null,base64:Z1,base64pad:G1,base64url:Q1,base64urlpad:Y1},Symbol.toStringTag,{value:"Module"})),kd=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),X1=kd.reduce((t,e,r)=>(t[r]=e,t),[]),ey=kd.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function ty(t){return t.reduce((e,r)=>(e+=X1[r],e),"")}function ry(t){const e=[];for(const r of t){const n=ey[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const ny=No({prefix:"🚀",name:"base256emoji",encode:ty,decode:ry}),iy=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:ny},Symbol.toStringTag,{value:"Module"}));new TextEncoder,new TextDecoder;const Ud={...E1,...x1,...O1,...I1,...R1,...B1,...W1,...K1,...J1,...iy};function Fd(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const jd=Fd("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),yc=Fd("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Ld(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Bd={utf8:jd,"utf-8":jd,hex:Ud.base16,latin1:yc,ascii:yc,binary:yc,...Ud};function yr(t,e="utf8"){const r=Bd[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Cr(t,e="utf8"){const r=Bd[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?gc(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function $o(t){return yr(Cr(lc(t),t1),Nd)}function qd(t){const e=Cr(a1,$d),r=o1+yr(mc([e,t]),$d);return[i1,s1,r].join(n1)}function sy(t){return yr(t,Nd)}function oy(t){return Cr([$o(t.header),$o(t.payload)].join(Pd),r1)}function ay(t){return[$o(t.header),$o(t.payload),sy(t.signature)].join(Pd)}function zd(t=Ai.randomBytes(c1)){return uc.generateKeyPairFromSeed(t)}async function cy(t,e,r,n,i=ye.fromMiliseconds(Date.now())){const s={alg:Xm,typ:e1},o=qd(n.publicKey),a=i+r,c={iss:o,sub:t,aud:e,iat:i,exp:a},u=oy({header:s,payload:c}),d=uc.sign(n.secretKey,u);return ay({header:s,payload:c,signature:d})}var vc={},Lo={};Object.defineProperty(Lo,"__esModule",{value:!0});var cr=Le,wc=Nr,ly=20;function uy(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],u=r[11]<<24|r[10]<<16|r[9]<<8|r[8],d=r[15]<<24|r[14]<<16|r[13]<<8|r[12],f=r[19]<<24|r[18]<<16|r[17]<<8|r[16],p=r[23]<<24|r[22]<<16|r[21]<<8|r[20],y=r[27]<<24|r[26]<<16|r[25]<<8|r[24],w=r[31]<<24|r[30]<<16|r[29]<<8|r[28],S=e[3]<<24|e[2]<<16|e[1]<<8|e[0],E=e[7]<<24|e[6]<<16|e[5]<<8|e[4],D=e[11]<<24|e[10]<<16|e[9]<<8|e[8],b=e[15]<<24|e[14]<<16|e[13]<<8|e[12],C=n,v=i,_=s,g=o,l=a,m=c,P=u,N=d,z=f,W=p,G=y,$=w,j=S,oe=E,Y=D,Z=b,X=0;X<ly;X+=2)C=C+l|0,j^=C,j=j>>>32-16|j<<16,z=z+j|0,l^=z,l=l>>>32-12|l<<12,v=v+m|0,oe^=v,oe=oe>>>32-16|oe<<16,W=W+oe|0,m^=W,m=m>>>32-12|m<<12,_=_+P|0,Y^=_,Y=Y>>>32-16|Y<<16,G=G+Y|0,P^=G,P=P>>>32-12|P<<12,g=g+N|0,Z^=g,Z=Z>>>32-16|Z<<16,$=$+Z|0,N^=$,N=N>>>32-12|N<<12,_=_+P|0,Y^=_,Y=Y>>>32-8|Y<<8,G=G+Y|0,P^=G,P=P>>>32-7|P<<7,g=g+N|0,Z^=g,Z=Z>>>32-8|Z<<8,$=$+Z|0,N^=$,N=N>>>32-7|N<<7,v=v+m|0,oe^=v,oe=oe>>>32-8|oe<<8,W=W+oe|0,m^=W,m=m>>>32-7|m<<7,C=C+l|0,j^=C,j=j>>>32-8|j<<8,z=z+j|0,l^=z,l=l>>>32-7|l<<7,C=C+m|0,Z^=C,Z=Z>>>32-16|Z<<16,G=G+Z|0,m^=G,m=m>>>32-12|m<<12,v=v+P|0,j^=v,j=j>>>32-16|j<<16,$=$+j|0,P^=$,P=P>>>32-12|P<<12,_=_+N|0,oe^=_,oe=oe>>>32-16|oe<<16,z=z+oe|0,N^=z,N=N>>>32-12|N<<12,g=g+l|0,Y^=g,Y=Y>>>32-16|Y<<16,W=W+Y|0,l^=W,l=l>>>32-12|l<<12,_=_+N|0,oe^=_,oe=oe>>>32-8|oe<<8,z=z+oe|0,N^=z,N=N>>>32-7|N<<7,g=g+l|0,Y^=g,Y=Y>>>32-8|Y<<8,W=W+Y|0,l^=W,l=l>>>32-7|l<<7,v=v+P|0,j^=v,j=j>>>32-8|j<<8,$=$+j|0,P^=$,P=P>>>32-7|P<<7,C=C+m|0,Z^=C,Z=Z>>>32-8|Z<<8,G=G+Z|0,m^=G,m=m>>>32-7|m<<7;cr.writeUint32LE(C+n|0,t,0),cr.writeUint32LE(v+i|0,t,4),cr.writeUint32LE(_+s|0,t,8),cr.writeUint32LE(g+o|0,t,12),cr.writeUint32LE(l+a|0,t,16),cr.writeUint32LE(m+c|0,t,20),cr.writeUint32LE(P+u|0,t,24),cr.writeUint32LE(N+d|0,t,28),cr.writeUint32LE(z+f|0,t,32),cr.writeUint32LE(W+p|0,t,36),cr.writeUint32LE(G+y|0,t,40),cr.writeUint32LE($+w|0,t,44),cr.writeUint32LE(j+S|0,t,48),cr.writeUint32LE(oe+E|0,t,52),cr.writeUint32LE(Y+D|0,t,56),cr.writeUint32LE(Z+b|0,t,60)}function Wd(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=i}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){uy(a,s,t);for(var u=c;u<c+64&&u<r.length;u++)n[u]=r[u]^a[u-c];hy(s,0,o)}return wc.wipe(a),i===0&&wc.wipe(s),n}Lo.streamXOR=Wd;function dy(t,e,r,n){return n===void 0&&(n=0),wc.wipe(r),Wd(t,e,r,r,n)}Lo.stream=dy;function hy(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var Vd={},Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});function fy(t,e,r){return~(t-1)&e|t-1&r}Tn.select=fy;function py(t,e){return(t|0)-(e|0)-1>>>31&1}Tn.lessOrEqual=py;function Hd(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}Tn.compare=Hd;function gy(t,e){return t.length===0||e.length===0?!1:Hd(t,e)!==0}Tn.equal=gy,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Tn,r=Nr;t.DIGEST_LENGTH=16;var n=function(){function o(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=a[0]|a[1]<<8;this._r[0]=c&8191;var u=a[2]|a[3]<<8;this._r[1]=(c>>>13|u<<3)&8191;var d=a[4]|a[5]<<8;this._r[2]=(u>>>10|d<<6)&7939;var f=a[6]|a[7]<<8;this._r[3]=(d>>>7|f<<9)&8191;var p=a[8]|a[9]<<8;this._r[4]=(f>>>4|p<<12)&255,this._r[5]=p>>>1&8190;var y=a[10]|a[11]<<8;this._r[6]=(p>>>14|y<<2)&8191;var w=a[12]|a[13]<<8;this._r[7]=(y>>>11|w<<5)&8065;var S=a[14]|a[15]<<8;this._r[8]=(w>>>8|S<<8)&8191,this._r[9]=S>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return o.prototype._blocks=function(a,c,u){for(var d=this._fin?0:2048,f=this._h[0],p=this._h[1],y=this._h[2],w=this._h[3],S=this._h[4],E=this._h[5],D=this._h[6],b=this._h[7],C=this._h[8],v=this._h[9],_=this._r[0],g=this._r[1],l=this._r[2],m=this._r[3],P=this._r[4],N=this._r[5],z=this._r[6],W=this._r[7],G=this._r[8],$=this._r[9];u>=16;){var j=a[c+0]|a[c+1]<<8;f+=j&8191;var oe=a[c+2]|a[c+3]<<8;p+=(j>>>13|oe<<3)&8191;var Y=a[c+4]|a[c+5]<<8;y+=(oe>>>10|Y<<6)&8191;var Z=a[c+6]|a[c+7]<<8;w+=(Y>>>7|Z<<9)&8191;var X=a[c+8]|a[c+9]<<8;S+=(Z>>>4|X<<12)&8191,E+=X>>>1&8191;var K=a[c+10]|a[c+11]<<8;D+=(X>>>14|K<<2)&8191;var ee=a[c+12]|a[c+13]<<8;b+=(K>>>11|ee<<5)&8191;var xe=a[c+14]|a[c+15]<<8;C+=(ee>>>8|xe<<8)&8191,v+=xe>>>5|d;var ne=0,Ee=ne;Ee+=f*_,Ee+=p*(5*$),Ee+=y*(5*G),Ee+=w*(5*W),Ee+=S*(5*z),ne=Ee>>>13,Ee&=8191,Ee+=E*(5*N),Ee+=D*(5*P),Ee+=b*(5*m),Ee+=C*(5*l),Ee+=v*(5*g),ne+=Ee>>>13,Ee&=8191;var fe=ne;fe+=f*g,fe+=p*_,fe+=y*(5*$),fe+=w*(5*G),fe+=S*(5*W),ne=fe>>>13,fe&=8191,fe+=E*(5*z),fe+=D*(5*N),fe+=b*(5*P),fe+=C*(5*m),fe+=v*(5*l),ne+=fe>>>13,fe&=8191;var _e=ne;_e+=f*l,_e+=p*g,_e+=y*_,_e+=w*(5*$),_e+=S*(5*G),ne=_e>>>13,_e&=8191,_e+=E*(5*W),_e+=D*(5*z),_e+=b*(5*N),_e+=C*(5*P),_e+=v*(5*m),ne+=_e>>>13,_e&=8191;var q=ne;q+=f*m,q+=p*l,q+=y*g,q+=w*_,q+=S*(5*$),ne=q>>>13,q&=8191,q+=E*(5*G),q+=D*(5*W),q+=b*(5*z),q+=C*(5*N),q+=v*(5*P),ne+=q>>>13,q&=8191;var B=ne;B+=f*P,B+=p*m,B+=y*l,B+=w*g,B+=S*_,ne=B>>>13,B&=8191,B+=E*(5*$),B+=D*(5*G),B+=b*(5*W),B+=C*(5*z),B+=v*(5*N),ne+=B>>>13,B&=8191;var M=ne;M+=f*N,M+=p*P,M+=y*m,M+=w*l,M+=S*g,ne=M>>>13,M&=8191,M+=E*_,M+=D*(5*$),M+=b*(5*G),M+=C*(5*W),M+=v*(5*z),ne+=M>>>13,M&=8191;var h=ne;h+=f*z,h+=p*N,h+=y*P,h+=w*m,h+=S*l,ne=h>>>13,h&=8191,h+=E*g,h+=D*_,h+=b*(5*$),h+=C*(5*G),h+=v*(5*W),ne+=h>>>13,h&=8191;var R=ne;R+=f*W,R+=p*z,R+=y*N,R+=w*P,R+=S*m,ne=R>>>13,R&=8191,R+=E*l,R+=D*g,R+=b*_,R+=C*(5*$),R+=v*(5*G),ne+=R>>>13,R&=8191;var ce=ne;ce+=f*G,ce+=p*W,ce+=y*z,ce+=w*N,ce+=S*P,ne=ce>>>13,ce&=8191,ce+=E*m,ce+=D*l,ce+=b*g,ce+=C*_,ce+=v*(5*$),ne+=ce>>>13,ce&=8191;var he=ne;he+=f*$,he+=p*G,he+=y*W,he+=w*z,he+=S*N,ne=he>>>13,he&=8191,he+=E*P,he+=D*m,he+=b*l,he+=C*g,he+=v*_,ne+=he>>>13,he&=8191,ne=(ne<<2)+ne|0,ne=ne+Ee|0,Ee=ne&8191,ne=ne>>>13,fe+=ne,f=Ee,p=fe,y=_e,w=q,S=B,E=M,D=h,b=R,C=ce,v=he,c+=16,u-=16}this._h[0]=f,this._h[1]=p,this._h[2]=y,this._h[3]=w,this._h[4]=S,this._h[5]=E,this._h[6]=D,this._h[7]=b,this._h[8]=C,this._h[9]=v},o.prototype.finish=function(a,c){c===void 0&&(c=0);var u=new Uint16Array(10),d,f,p,y;if(this._leftover){for(y=this._leftover,this._buffer[y++]=1;y<16;y++)this._buffer[y]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(d=this._h[1]>>>13,this._h[1]&=8191,y=2;y<10;y++)this._h[y]+=d,d=this._h[y]>>>13,this._h[y]&=8191;for(this._h[0]+=d*5,d=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=d,d=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=d,u[0]=this._h[0]+5,d=u[0]>>>13,u[0]&=8191,y=1;y<10;y++)u[y]=this._h[y]+d,d=u[y]>>>13,u[y]&=8191;for(u[9]-=8192,f=(d^1)-1,y=0;y<10;y++)u[y]&=f;for(f=~f,y=0;y<10;y++)this._h[y]=this._h[y]&f|u[y];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,p=this._h[0]+this._pad[0],this._h[0]=p&65535,y=1;y<8;y++)p=(this._h[y]+this._pad[y]|0)+(p>>>16)|0,this._h[y]=p&65535;return a[c+0]=this._h[0]>>>0,a[c+1]=this._h[0]>>>8,a[c+2]=this._h[1]>>>0,a[c+3]=this._h[1]>>>8,a[c+4]=this._h[2]>>>0,a[c+5]=this._h[2]>>>8,a[c+6]=this._h[3]>>>0,a[c+7]=this._h[3]>>>8,a[c+8]=this._h[4]>>>0,a[c+9]=this._h[4]>>>8,a[c+10]=this._h[5]>>>0,a[c+11]=this._h[5]>>>8,a[c+12]=this._h[6]>>>0,a[c+13]=this._h[6]>>>8,a[c+14]=this._h[7]>>>0,a[c+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(a){var c=0,u=a.length,d;if(this._leftover){d=16-this._leftover,d>u&&(d=u);for(var f=0;f<d;f++)this._buffer[this._leftover+f]=a[c+f];if(u-=d,c+=d,this._leftover+=d,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(u>=16&&(d=u-u%16,this._blocks(a,c,d),c+=d,u-=d),u){for(var f=0;f<u;f++)this._buffer[this._leftover+f]=a[c+f];this._leftover+=u}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},o.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o}();t.Poly1305=n;function i(o,a){var c=new n(o);c.update(a);var u=c.digest();return c.clean(),u}t.oneTimeAuth=i;function s(o,a){return o.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(o,a)}t.equal=s}(Vd),function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Lo,r=Vd,n=Nr,i=Le,s=Tn;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var o=new Uint8Array(16),a=function(){function c(u){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,u.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(u)}return c.prototype.seal=function(u,d,f,p){if(u.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var y=new Uint8Array(16);y.set(u,y.length-u.length);var w=new Uint8Array(32);e.stream(this._key,y,w,4);var S=d.length+this.tagLength,E;if(p){if(p.length!==S)throw new Error("ChaCha20Poly1305: incorrect destination length");E=p}else E=new Uint8Array(S);return e.streamXOR(this._key,y,d,E,4),this._authenticate(E.subarray(E.length-this.tagLength,E.length),w,E.subarray(0,E.length-this.tagLength),f),n.wipe(y),E},c.prototype.open=function(u,d,f,p){if(u.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(d.length<this.tagLength)return null;var y=new Uint8Array(16);y.set(u,y.length-u.length);var w=new Uint8Array(32);e.stream(this._key,y,w,4);var S=new Uint8Array(this.tagLength);if(this._authenticate(S,w,d.subarray(0,d.length-this.tagLength),f),!s.equal(S,d.subarray(d.length-this.tagLength,d.length)))return null;var E=d.length-this.tagLength,D;if(p){if(p.length!==E)throw new Error("ChaCha20Poly1305: incorrect destination length");D=p}else D=new Uint8Array(E);return e.streamXOR(this._key,y,d.subarray(0,d.length-this.tagLength),D,4),n.wipe(y),D},c.prototype.clean=function(){return n.wipe(this._key),this},c.prototype._authenticate=function(u,d,f,p){var y=new r.Poly1305(d);p&&(y.update(p),p.length%16>0&&y.update(o.subarray(p.length%16))),y.update(f),f.length%16>0&&y.update(o.subarray(f.length%16));var w=new Uint8Array(8);p&&i.writeUint64LE(p.length,w),y.update(w),i.writeUint64LE(f.length,w),y.update(w);for(var S=y.digest(),E=0;E<S.length;E++)u[E]=S[E];y.clean(),n.wipe(S),n.wipe(w)},c}();t.ChaCha20Poly1305=a}(vc);var Kd={},ms={},bc={};Object.defineProperty(bc,"__esModule",{value:!0});function my(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}bc.isSerializableHash=my,Object.defineProperty(ms,"__esModule",{value:!0});var sn=bc,yy=Tn,vy=Nr,Zd=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),sn.isSerializableHash(this._inner)&&sn.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),vy.wipe(n)}return t.prototype.reset=function(){if(!sn.isSerializableHash(this._inner)||!sn.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){sn.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),sn.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!sn.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!sn.isSerializableHash(this._inner)||!sn.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!sn.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();ms.HMAC=Zd;function wy(t,e,r){var n=new Zd(t,e);n.update(r);var i=n.digest();return n.clean(),i}ms.hmac=wy,ms.equal=yy.equal,Object.defineProperty(Kd,"__esModule",{value:!0});var Gd=ms,Qd=Nr,by=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=Gd.hmac(this._hash,n,r);this._hmac=new Gd.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),Qd.wipe(this._buffer),Qd.wipe(this._counter),this._bufpos=0},t}(),_y=Kd.HKDF=by,Mo={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Le,r=Nr;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},a.prototype.update=function(c,u){if(u===void 0&&(u=c.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var d=0;if(this._bytesHashed+=u,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&u>0;)this._buffer[this._bufferLength++]=c[d++],u--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(u>=this.blockSize&&(d=s(this._temp,this._state,c,d,u),u%=this.blockSize);u>0;)this._buffer[this._bufferLength++]=c[d++],u--;return this},a.prototype.finish=function(c){if(!this._finished){var u=this._bytesHashed,d=this._bufferLength,f=u/536870912|0,p=u<<3,y=u%64<56?64:128;this._buffer[d]=128;for(var w=d+1;w<y-8;w++)this._buffer[w]=0;e.writeUint32BE(f,this._buffer,y-8),e.writeUint32BE(p,this._buffer,y-4),s(this._temp,this._state,this._buffer,0,y),this._finished=!0}for(var w=0;w<this.digestLength/4;w++)e.writeUint32BE(this._state[w],c,w*4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._state.set(c.state),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.state),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(a,c,u,d,f){for(;f>=64;){for(var p=c[0],y=c[1],w=c[2],S=c[3],E=c[4],D=c[5],b=c[6],C=c[7],v=0;v<16;v++){var _=d+v*4;a[v]=e.readUint32BE(u,_)}for(var v=16;v<64;v++){var g=a[v-2],l=(g>>>17|g<<32-17)^(g>>>19|g<<32-19)^g>>>10;g=a[v-15];var m=(g>>>7|g<<32-7)^(g>>>18|g<<32-18)^g>>>3;a[v]=(l+a[v-7]|0)+(m+a[v-16]|0)}for(var v=0;v<64;v++){var l=(((E>>>6|E<<26)^(E>>>11|E<<21)^(E>>>25|E<<7))+(E&D^~E&b)|0)+(C+(i[v]+a[v]|0)|0)|0,m=((p>>>2|p<<32-2)^(p>>>13|p<<32-13)^(p>>>22|p<<32-22))+(p&y^p&w^y&w)|0;C=b,b=D,D=E,E=S+l|0,S=w,w=y,y=p,p=l+m|0}c[0]+=p,c[1]+=y,c[2]+=w,c[3]+=S,c[4]+=E,c[5]+=D,c[6]+=b,c[7]+=C,d+=64,f-=64}return d}function o(a){var c=new n;c.update(a);var u=c.digest();return c.clean(),u}t.hash=o})(Mo);var _c={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=Ai,r=Nr;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(v){const _=new Float64Array(16);if(v)for(let g=0;g<v.length;g++)_[g]=v[g];return _}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function o(v){let _=1;for(let g=0;g<16;g++){let l=v[g]+_+65535;_=Math.floor(l/65536),v[g]=l-_*65536}v[0]+=_-1+37*(_-1)}function a(v,_,g){const l=~(g-1);for(let m=0;m<16;m++){const P=l&(v[m]^_[m]);v[m]^=P,_[m]^=P}}function c(v,_){const g=n(),l=n();for(let m=0;m<16;m++)l[m]=_[m];o(l),o(l),o(l);for(let m=0;m<2;m++){g[0]=l[0]-65517;for(let N=1;N<15;N++)g[N]=l[N]-65535-(g[N-1]>>16&1),g[N-1]&=65535;g[15]=l[15]-32767-(g[14]>>16&1);const P=g[15]>>16&1;g[14]&=65535,a(l,g,1-P)}for(let m=0;m<16;m++)v[2*m]=l[m]&255,v[2*m+1]=l[m]>>8}function u(v,_){for(let g=0;g<16;g++)v[g]=_[2*g]+(_[2*g+1]<<8);v[15]&=32767}function d(v,_,g){for(let l=0;l<16;l++)v[l]=_[l]+g[l]}function f(v,_,g){for(let l=0;l<16;l++)v[l]=_[l]-g[l]}function p(v,_,g){let l,m,P=0,N=0,z=0,W=0,G=0,$=0,j=0,oe=0,Y=0,Z=0,X=0,K=0,ee=0,xe=0,ne=0,Ee=0,fe=0,_e=0,q=0,B=0,M=0,h=0,R=0,ce=0,he=0,We=0,Ie=0,Me=0,Xe=0,pt=0,dt=0,Ve=g[0],Be=g[1],Ne=g[2],ke=g[3],$e=g[4],Te=g[5],Ae=g[6],Se=g[7],Ue=g[8],qe=g[9],De=g[10],He=g[11],et=g[12],nt=g[13],tt=g[14],it=g[15];l=_[0],P+=l*Ve,N+=l*Be,z+=l*Ne,W+=l*ke,G+=l*$e,$+=l*Te,j+=l*Ae,oe+=l*Se,Y+=l*Ue,Z+=l*qe,X+=l*De,K+=l*He,ee+=l*et,xe+=l*nt,ne+=l*tt,Ee+=l*it,l=_[1],N+=l*Ve,z+=l*Be,W+=l*Ne,G+=l*ke,$+=l*$e,j+=l*Te,oe+=l*Ae,Y+=l*Se,Z+=l*Ue,X+=l*qe,K+=l*De,ee+=l*He,xe+=l*et,ne+=l*nt,Ee+=l*tt,fe+=l*it,l=_[2],z+=l*Ve,W+=l*Be,G+=l*Ne,$+=l*ke,j+=l*$e,oe+=l*Te,Y+=l*Ae,Z+=l*Se,X+=l*Ue,K+=l*qe,ee+=l*De,xe+=l*He,ne+=l*et,Ee+=l*nt,fe+=l*tt,_e+=l*it,l=_[3],W+=l*Ve,G+=l*Be,$+=l*Ne,j+=l*ke,oe+=l*$e,Y+=l*Te,Z+=l*Ae,X+=l*Se,K+=l*Ue,ee+=l*qe,xe+=l*De,ne+=l*He,Ee+=l*et,fe+=l*nt,_e+=l*tt,q+=l*it,l=_[4],G+=l*Ve,$+=l*Be,j+=l*Ne,oe+=l*ke,Y+=l*$e,Z+=l*Te,X+=l*Ae,K+=l*Se,ee+=l*Ue,xe+=l*qe,ne+=l*De,Ee+=l*He,fe+=l*et,_e+=l*nt,q+=l*tt,B+=l*it,l=_[5],$+=l*Ve,j+=l*Be,oe+=l*Ne,Y+=l*ke,Z+=l*$e,X+=l*Te,K+=l*Ae,ee+=l*Se,xe+=l*Ue,ne+=l*qe,Ee+=l*De,fe+=l*He,_e+=l*et,q+=l*nt,B+=l*tt,M+=l*it,l=_[6],j+=l*Ve,oe+=l*Be,Y+=l*Ne,Z+=l*ke,X+=l*$e,K+=l*Te,ee+=l*Ae,xe+=l*Se,ne+=l*Ue,Ee+=l*qe,fe+=l*De,_e+=l*He,q+=l*et,B+=l*nt,M+=l*tt,h+=l*it,l=_[7],oe+=l*Ve,Y+=l*Be,Z+=l*Ne,X+=l*ke,K+=l*$e,ee+=l*Te,xe+=l*Ae,ne+=l*Se,Ee+=l*Ue,fe+=l*qe,_e+=l*De,q+=l*He,B+=l*et,M+=l*nt,h+=l*tt,R+=l*it,l=_[8],Y+=l*Ve,Z+=l*Be,X+=l*Ne,K+=l*ke,ee+=l*$e,xe+=l*Te,ne+=l*Ae,Ee+=l*Se,fe+=l*Ue,_e+=l*qe,q+=l*De,B+=l*He,M+=l*et,h+=l*nt,R+=l*tt,ce+=l*it,l=_[9],Z+=l*Ve,X+=l*Be,K+=l*Ne,ee+=l*ke,xe+=l*$e,ne+=l*Te,Ee+=l*Ae,fe+=l*Se,_e+=l*Ue,q+=l*qe,B+=l*De,M+=l*He,h+=l*et,R+=l*nt,ce+=l*tt,he+=l*it,l=_[10],X+=l*Ve,K+=l*Be,ee+=l*Ne,xe+=l*ke,ne+=l*$e,Ee+=l*Te,fe+=l*Ae,_e+=l*Se,q+=l*Ue,B+=l*qe,M+=l*De,h+=l*He,R+=l*et,ce+=l*nt,he+=l*tt,We+=l*it,l=_[11],K+=l*Ve,ee+=l*Be,xe+=l*Ne,ne+=l*ke,Ee+=l*$e,fe+=l*Te,_e+=l*Ae,q+=l*Se,B+=l*Ue,M+=l*qe,h+=l*De,R+=l*He,ce+=l*et,he+=l*nt,We+=l*tt,Ie+=l*it,l=_[12],ee+=l*Ve,xe+=l*Be,ne+=l*Ne,Ee+=l*ke,fe+=l*$e,_e+=l*Te,q+=l*Ae,B+=l*Se,M+=l*Ue,h+=l*qe,R+=l*De,ce+=l*He,he+=l*et,We+=l*nt,Ie+=l*tt,Me+=l*it,l=_[13],xe+=l*Ve,ne+=l*Be,Ee+=l*Ne,fe+=l*ke,_e+=l*$e,q+=l*Te,B+=l*Ae,M+=l*Se,h+=l*Ue,R+=l*qe,ce+=l*De,he+=l*He,We+=l*et,Ie+=l*nt,Me+=l*tt,Xe+=l*it,l=_[14],ne+=l*Ve,Ee+=l*Be,fe+=l*Ne,_e+=l*ke,q+=l*$e,B+=l*Te,M+=l*Ae,h+=l*Se,R+=l*Ue,ce+=l*qe,he+=l*De,We+=l*He,Ie+=l*et,Me+=l*nt,Xe+=l*tt,pt+=l*it,l=_[15],Ee+=l*Ve,fe+=l*Be,_e+=l*Ne,q+=l*ke,B+=l*$e,M+=l*Te,h+=l*Ae,R+=l*Se,ce+=l*Ue,he+=l*qe,We+=l*De,Ie+=l*He,Me+=l*et,Xe+=l*nt,pt+=l*tt,dt+=l*it,P+=38*fe,N+=38*_e,z+=38*q,W+=38*B,G+=38*M,$+=38*h,j+=38*R,oe+=38*ce,Y+=38*he,Z+=38*We,X+=38*Ie,K+=38*Me,ee+=38*Xe,xe+=38*pt,ne+=38*dt,m=1,l=P+m+65535,m=Math.floor(l/65536),P=l-m*65536,l=N+m+65535,m=Math.floor(l/65536),N=l-m*65536,l=z+m+65535,m=Math.floor(l/65536),z=l-m*65536,l=W+m+65535,m=Math.floor(l/65536),W=l-m*65536,l=G+m+65535,m=Math.floor(l/65536),G=l-m*65536,l=$+m+65535,m=Math.floor(l/65536),$=l-m*65536,l=j+m+65535,m=Math.floor(l/65536),j=l-m*65536,l=oe+m+65535,m=Math.floor(l/65536),oe=l-m*65536,l=Y+m+65535,m=Math.floor(l/65536),Y=l-m*65536,l=Z+m+65535,m=Math.floor(l/65536),Z=l-m*65536,l=X+m+65535,m=Math.floor(l/65536),X=l-m*65536,l=K+m+65535,m=Math.floor(l/65536),K=l-m*65536,l=ee+m+65535,m=Math.floor(l/65536),ee=l-m*65536,l=xe+m+65535,m=Math.floor(l/65536),xe=l-m*65536,l=ne+m+65535,m=Math.floor(l/65536),ne=l-m*65536,l=Ee+m+65535,m=Math.floor(l/65536),Ee=l-m*65536,P+=m-1+37*(m-1),m=1,l=P+m+65535,m=Math.floor(l/65536),P=l-m*65536,l=N+m+65535,m=Math.floor(l/65536),N=l-m*65536,l=z+m+65535,m=Math.floor(l/65536),z=l-m*65536,l=W+m+65535,m=Math.floor(l/65536),W=l-m*65536,l=G+m+65535,m=Math.floor(l/65536),G=l-m*65536,l=$+m+65535,m=Math.floor(l/65536),$=l-m*65536,l=j+m+65535,m=Math.floor(l/65536),j=l-m*65536,l=oe+m+65535,m=Math.floor(l/65536),oe=l-m*65536,l=Y+m+65535,m=Math.floor(l/65536),Y=l-m*65536,l=Z+m+65535,m=Math.floor(l/65536),Z=l-m*65536,l=X+m+65535,m=Math.floor(l/65536),X=l-m*65536,l=K+m+65535,m=Math.floor(l/65536),K=l-m*65536,l=ee+m+65535,m=Math.floor(l/65536),ee=l-m*65536,l=xe+m+65535,m=Math.floor(l/65536),xe=l-m*65536,l=ne+m+65535,m=Math.floor(l/65536),ne=l-m*65536,l=Ee+m+65535,m=Math.floor(l/65536),Ee=l-m*65536,P+=m-1+37*(m-1),v[0]=P,v[1]=N,v[2]=z,v[3]=W,v[4]=G,v[5]=$,v[6]=j,v[7]=oe,v[8]=Y,v[9]=Z,v[10]=X,v[11]=K,v[12]=ee,v[13]=xe,v[14]=ne,v[15]=Ee}function y(v,_){p(v,_,_)}function w(v,_){const g=n();for(let l=0;l<16;l++)g[l]=_[l];for(let l=253;l>=0;l--)y(g,g),l!==2&&l!==4&&p(g,g,_);for(let l=0;l<16;l++)v[l]=g[l]}function S(v,_){const g=new Uint8Array(32),l=new Float64Array(80),m=n(),P=n(),N=n(),z=n(),W=n(),G=n();for(let Y=0;Y<31;Y++)g[Y]=v[Y];g[31]=v[31]&127|64,g[0]&=248,u(l,_);for(let Y=0;Y<16;Y++)P[Y]=l[Y];m[0]=z[0]=1;for(let Y=254;Y>=0;--Y){const Z=g[Y>>>3]>>>(Y&7)&1;a(m,P,Z),a(N,z,Z),d(W,m,N),f(m,m,N),d(N,P,z),f(P,P,z),y(z,W),y(G,m),p(m,N,m),p(N,P,W),d(W,m,N),f(m,m,N),y(P,m),f(N,z,G),p(m,N,s),d(m,m,z),p(N,N,m),p(m,z,G),p(z,P,l),y(P,W),a(m,P,Z),a(N,z,Z)}for(let Y=0;Y<16;Y++)l[Y+16]=m[Y],l[Y+32]=N[Y],l[Y+48]=P[Y],l[Y+64]=z[Y];const $=l.subarray(32),j=l.subarray(16);w($,$),p(j,j,$);const oe=new Uint8Array(32);return c(oe,j),oe}t.scalarMult=S;function E(v){return S(v,i)}t.scalarMultBase=E;function D(v){if(v.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const _=new Uint8Array(v);return{publicKey:E(_),secretKey:_}}t.generateKeyPairFromSeed=D;function b(v){const _=(0,e.randomBytes)(32,v),g=D(_);return(0,r.wipe)(_),g}t.generateKeyPair=b;function C(v,_,g=!1){if(v.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(_.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const l=S(v,_);if(g){let m=0;for(let P=0;P<l.length;P++)m|=l[P];if(m===0)throw new Error("X25519: invalid shared key")}return l}t.sharedKey=C})(_c);var Yd=globalThis&&globalThis.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},Ey=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),Sy=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),xy=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),Cy=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Oy=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Dy=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Iy=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Jd=3,Ay=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Dy]],Xd=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Ty(t){return t?eh(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Oy:typeof navigator<"u"?eh(navigator.userAgent):Ny()}function Ry(t){return t!==""&&Ay.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function eh(t){var e=Ry(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Cy;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<Jd&&(i=Yd(Yd([],i,!0),$y(Jd-i.length),!0)):i=[];var s=i.join("."),o=Py(t),a=Iy.exec(t);return a&&a[1]?new xy(r,s,o,a[1]):new Ey(r,s,o)}function Py(t){for(var e=0,r=Xd.length;e<r;e++){var n=Xd[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function Ny(){var t=typeof process<"u"&&process.version;return t?new Sy(process.version.slice(1)):null}function $y(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Et={};Object.defineProperty(Et,"__esModule",{value:!0}),Et.getLocalStorage=Et.getLocalStorageOrThrow=Et.getCrypto=Et.getCryptoOrThrow=rh=Et.getLocation=Et.getLocationOrThrow=Ec=Et.getNavigator=Et.getNavigatorOrThrow=th=Et.getDocument=Et.getDocumentOrThrow=Et.getFromWindowOrThrow=Et.getFromWindow=void 0;function ni(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Et.getFromWindow=ni;function Ti(t){const e=ni(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Et.getFromWindowOrThrow=Ti;function Ly(){return Ti("document")}Et.getDocumentOrThrow=Ly;function My(){return ni("document")}var th=Et.getDocument=My;function ky(){return Ti("navigator")}Et.getNavigatorOrThrow=ky;function Uy(){return ni("navigator")}var Ec=Et.getNavigator=Uy;function Fy(){return Ti("location")}Et.getLocationOrThrow=Fy;function jy(){return ni("location")}var rh=Et.getLocation=jy;function By(){return Ti("crypto")}Et.getCryptoOrThrow=By;function qy(){return ni("crypto")}Et.getCrypto=qy;function zy(){return Ti("localStorage")}Et.getLocalStorageOrThrow=zy;function Wy(){return ni("localStorage")}Et.getLocalStorage=Wy;var Sc={};Object.defineProperty(Sc,"__esModule",{value:!0});var nh=Sc.getWindowMetadata=void 0;const ih=Et;function Vy(){let t,e;try{t=ih.getDocumentOrThrow(),e=ih.getLocationOrThrow()}catch{return null}function r(){const f=t.getElementsByTagName("link"),p=[];for(let y=0;y<f.length;y++){const w=f[y],S=w.getAttribute("rel");if(S&&S.toLowerCase().indexOf("icon")>-1){const E=w.getAttribute("href");if(E)if(E.toLowerCase().indexOf("https:")===-1&&E.toLowerCase().indexOf("http:")===-1&&E.indexOf("//")!==0){let D=e.protocol+"//"+e.host;if(E.indexOf("/")===0)D+=E;else{const b=e.pathname.split("/");b.pop();const C=b.join("/");D+=C+"/"+E}p.push(D)}else if(E.indexOf("//")===0){const D=e.protocol+E;p.push(D)}else p.push(E)}}return p}function n(...f){const p=t.getElementsByTagName("meta");for(let y=0;y<p.length;y++){const w=p[y],S=["itemprop","property","name"].map(E=>w.getAttribute(E)).filter(E=>E?f.includes(E):!1);if(S.length&&S){const E=w.getAttribute("content");if(E)return E}}return""}function i(){let f=n("name","og:site_name","og:title","twitter:title");return f||(f=t.title),f}function s(){return n("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=e.origin,u=r();return{description:a,url:c,icons:u,name:o}}nh=Sc.getWindowMetadata=Vy;var ys={},Hy=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),sh="%[a-f0-9]{2}",oh=new RegExp("("+sh+")|([^%]+?)","gi"),ah=new RegExp("("+sh+")+","gi");function xc(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],xc(r),xc(n))}function Ky(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(oh)||[],r=1;r<e.length;r++)t=xc(e,r).join(""),e=t.match(oh)||[];return t}}function Zy(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=ah.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=Ky(r[0]);n!==r[0]&&(e[r[0]]=n)}r=ah.exec(t)}e["%C2"]="�";for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];t=t.replace(new RegExp(o,"g"),e[o])}return t}var Gy=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return Zy(t)}},Qy=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},Yy=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var o=n[s],a=t[o];(i?e.indexOf(o)!==-1:e(o,a,t))&&(r[o]=a)}return r};(function(t){const e=Hy,r=Gy,n=Qy,i=Yy,s=b=>b==null,o=Symbol("encodeFragmentIdentifier");function a(b){switch(b.arrayFormat){case"index":return C=>(v,_)=>{const g=v.length;return _===void 0||b.skipNull&&_===null||b.skipEmptyString&&_===""?v:_===null?[...v,[d(C,b),"[",g,"]"].join("")]:[...v,[d(C,b),"[",d(g,b),"]=",d(_,b)].join("")]};case"bracket":return C=>(v,_)=>_===void 0||b.skipNull&&_===null||b.skipEmptyString&&_===""?v:_===null?[...v,[d(C,b),"[]"].join("")]:[...v,[d(C,b),"[]=",d(_,b)].join("")];case"colon-list-separator":return C=>(v,_)=>_===void 0||b.skipNull&&_===null||b.skipEmptyString&&_===""?v:_===null?[...v,[d(C,b),":list="].join("")]:[...v,[d(C,b),":list=",d(_,b)].join("")];case"comma":case"separator":case"bracket-separator":{const C=b.arrayFormat==="bracket-separator"?"[]=":"=";return v=>(_,g)=>g===void 0||b.skipNull&&g===null||b.skipEmptyString&&g===""?_:(g=g===null?"":g,_.length===0?[[d(v,b),C,d(g,b)].join("")]:[[_,d(g,b)].join(b.arrayFormatSeparator)])}default:return C=>(v,_)=>_===void 0||b.skipNull&&_===null||b.skipEmptyString&&_===""?v:_===null?[...v,d(C,b)]:[...v,[d(C,b),"=",d(_,b)].join("")]}}function c(b){let C;switch(b.arrayFormat){case"index":return(v,_,g)=>{if(C=/\[(\d*)\]$/.exec(v),v=v.replace(/\[\d*\]$/,""),!C){g[v]=_;return}g[v]===void 0&&(g[v]={}),g[v][C[1]]=_};case"bracket":return(v,_,g)=>{if(C=/(\[\])$/.exec(v),v=v.replace(/\[\]$/,""),!C){g[v]=_;return}if(g[v]===void 0){g[v]=[_];return}g[v]=[].concat(g[v],_)};case"colon-list-separator":return(v,_,g)=>{if(C=/(:list)$/.exec(v),v=v.replace(/:list$/,""),!C){g[v]=_;return}if(g[v]===void 0){g[v]=[_];return}g[v]=[].concat(g[v],_)};case"comma":case"separator":return(v,_,g)=>{const l=typeof _=="string"&&_.includes(b.arrayFormatSeparator),m=typeof _=="string"&&!l&&f(_,b).includes(b.arrayFormatSeparator);_=m?f(_,b):_;const P=l||m?_.split(b.arrayFormatSeparator).map(N=>f(N,b)):_===null?_:f(_,b);g[v]=P};case"bracket-separator":return(v,_,g)=>{const l=/(\[\])$/.test(v);if(v=v.replace(/\[\]$/,""),!l){g[v]=_&&f(_,b);return}const m=_===null?[]:_.split(b.arrayFormatSeparator).map(P=>f(P,b));if(g[v]===void 0){g[v]=m;return}g[v]=[].concat(g[v],m)};default:return(v,_,g)=>{if(g[v]===void 0){g[v]=_;return}g[v]=[].concat(g[v],_)}}}function u(b){if(typeof b!="string"||b.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(b,C){return C.encode?C.strict?e(b):encodeURIComponent(b):b}function f(b,C){return C.decode?r(b):b}function p(b){return Array.isArray(b)?b.sort():typeof b=="object"?p(Object.keys(b)).sort((C,v)=>Number(C)-Number(v)).map(C=>b[C]):b}function y(b){const C=b.indexOf("#");return C!==-1&&(b=b.slice(0,C)),b}function w(b){let C="";const v=b.indexOf("#");return v!==-1&&(C=b.slice(v)),C}function S(b){b=y(b);const C=b.indexOf("?");return C===-1?"":b.slice(C+1)}function E(b,C){return C.parseNumbers&&!Number.isNaN(Number(b))&&typeof b=="string"&&b.trim()!==""?b=Number(b):C.parseBooleans&&b!==null&&(b.toLowerCase()==="true"||b.toLowerCase()==="false")&&(b=b.toLowerCase()==="true"),b}function D(b,C){C=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},C),u(C.arrayFormatSeparator);const v=c(C),_=Object.create(null);if(typeof b!="string"||(b=b.trim().replace(/^[?#&]/,""),!b))return _;for(const g of b.split("&")){if(g==="")continue;let[l,m]=n(C.decode?g.replace(/\+/g," "):g,"=");m=m===void 0?null:["comma","separator","bracket-separator"].includes(C.arrayFormat)?m:f(m,C),v(f(l,C),m,_)}for(const g of Object.keys(_)){const l=_[g];if(typeof l=="object"&&l!==null)for(const m of Object.keys(l))l[m]=E(l[m],C);else _[g]=E(l,C)}return C.sort===!1?_:(C.sort===!0?Object.keys(_).sort():Object.keys(_).sort(C.sort)).reduce((g,l)=>{const m=_[l];return m&&typeof m=="object"&&!Array.isArray(m)?g[l]=p(m):g[l]=m,g},Object.create(null))}t.extract=S,t.parse=D,t.stringify=(b,C)=>{if(!b)return"";C=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},C),u(C.arrayFormatSeparator);const v=m=>C.skipNull&&s(b[m])||C.skipEmptyString&&b[m]==="",_=a(C),g={};for(const m of Object.keys(b))v(m)||(g[m]=b[m]);const l=Object.keys(g);return C.sort!==!1&&l.sort(C.sort),l.map(m=>{const P=b[m];return P===void 0?"":P===null?d(m,C):Array.isArray(P)?P.length===0&&C.arrayFormat==="bracket-separator"?d(m,C)+"[]":P.reduce(_(m),[]).join("&"):d(m,C)+"="+d(P,C)}).filter(m=>m.length>0).join("&")},t.parseUrl=(b,C)=>{C=Object.assign({decode:!0},C);const[v,_]=n(b,"#");return Object.assign({url:v.split("?")[0]||"",query:D(S(b),C)},C&&C.parseFragmentIdentifier&&_?{fragmentIdentifier:f(_,C)}:{})},t.stringifyUrl=(b,C)=>{C=Object.assign({encode:!0,strict:!0,[o]:!0},C);const v=y(b.url).split("?")[0]||"",_=t.extract(b.url),g=t.parse(_,{sort:!1}),l=Object.assign(g,b.query);let m=t.stringify(l,C);m&&(m=`?${m}`);let P=w(b.url);return b.fragmentIdentifier&&(P=`#${C[o]?d(b.fragmentIdentifier,C):b.fragmentIdentifier}`),`${v}${m}${P}`},t.pick=(b,C,v)=>{v=Object.assign({parseFragmentIdentifier:!0,[o]:!1},v);const{url:_,query:g,fragmentIdentifier:l}=t.parseUrl(b,v);return t.stringifyUrl({url:_,query:i(g,C),fragmentIdentifier:l},v)},t.exclude=(b,C,v)=>{const _=Array.isArray(C)?g=>!C.includes(g):(g,l)=>!C(g,l);return t.pick(b,_,v)}})(ys);const Jy={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function ch(t,e){return t.includes(":")?[t]:e.chains||[]}const lh="base10",vr="base16",Cc="base64pad",Oc="utf8",uh=0,ii=1,Xy=0,dh=1,Dc=12,Ic=32;function ev(){const t=_c.generateKeyPair();return{privateKey:yr(t.secretKey,vr),publicKey:yr(t.publicKey,vr)}}function Ac(){const t=Ai.randomBytes(Ic);return yr(t,vr)}function tv(t,e){const r=_c.sharedKey(Cr(t,vr),Cr(e,vr)),n=new _y(Mo.SHA256,r).expand(Ic);return yr(n,vr)}function rv(t){const e=Mo.hash(Cr(t,vr));return yr(e,vr)}function Ri(t){const e=Mo.hash(Cr(t,Oc));return yr(e,vr)}function nv(t){return Cr(`${t}`,lh)}function vs(t){return Number(yr(t,lh))}function iv(t){const e=nv(typeof t.type<"u"?t.type:uh);if(vs(e)===ii&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Cr(t.senderPublicKey,vr):void 0,n=typeof t.iv<"u"?Cr(t.iv,vr):Ai.randomBytes(Dc),i=new vc.ChaCha20Poly1305(Cr(t.symKey,vr)).seal(n,Cr(t.message,Oc));return ov({type:e,sealed:i,iv:n,senderPublicKey:r})}function sv(t){const e=new vc.ChaCha20Poly1305(Cr(t.symKey,vr)),{sealed:r,iv:n}=ko(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return yr(i,Oc)}function ov(t){if(vs(t.type)===ii){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return yr(mc([t.type,t.senderPublicKey,t.iv,t.sealed]),Cc)}return yr(mc([t.type,t.iv,t.sealed]),Cc)}function ko(t){const e=Cr(t,Cc),r=e.slice(Xy,dh),n=dh;if(vs(r)===ii){const a=n+Ic,c=a+Dc,u=e.slice(n,a),d=e.slice(a,c),f=e.slice(c);return{type:r,sealed:f,iv:d,senderPublicKey:u}}const i=n+Dc,s=e.slice(n,i),o=e.slice(i);return{type:r,sealed:o,iv:s}}function av(t,e){const r=ko(t);return hh({type:vs(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?yr(r.senderPublicKey,vr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function hh(t){const e=(t==null?void 0:t.type)||uh;if(e===ii){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function fh(t){return t.type===ii&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var cv=Object.defineProperty,ph=Object.getOwnPropertySymbols,lv=Object.prototype.hasOwnProperty,uv=Object.prototype.propertyIsEnumerable,gh=(t,e,r)=>e in t?cv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mh=(t,e)=>{for(var r in e||(e={}))lv.call(e,r)&&gh(t,r,e[r]);if(ph)for(var r of ph(e))uv.call(e,r)&&gh(t,r,e[r]);return t};const dv="ReactNative",$r={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},hv="js";function Tc(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Uo(){return!th()&&!!Ec()&&navigator.product===dv}function ws(){return!Tc()&&!!Ec()}function bs(){return Uo()?$r.reactNative:Tc()?$r.node:ws()?$r.browser:$r.unknown}function fv(t,e){let r=ys.parse(t);return r=mh(mh({},r),e),t=ys.stringify(r),t}function pv(){return nh()||{name:"",description:"",url:"",icons:[""]}}function gv(){if(bs()===$r.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=Ty();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function mv(){var t;const e=bs();return e===$r.browser?[e,((t=rh())==null?void 0:t.host)||"unknown"].join(":"):e}function yv(t,e,r){const n=gv(),i=mv();return[[t,e].join("-"),[hv,r].join("-"),n,i].join("/")}function vv({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o}){const a=r.split("?"),c=yv(t,e,n),u={auth:i,ua:c,projectId:s,useOnCloseEvent:o||void 0},d=fv(a[1]||"",u);return a[0]+"?"+d}function si(t,e){return t.filter(r=>e.includes(r)).length===t.length}function yh(t){return Object.fromEntries(t.entries())}function vh(t){return new Map(Object.entries(t))}function Pi(t=ye.FIVE_MINUTES,e){const r=ye.toMiliseconds(t||ye.FIVE_MINUTES);let n,i,s;return{resolve:o=>{s&&n&&(clearTimeout(s),n(o))},reject:o=>{s&&i&&(clearTimeout(s),i(o))},done:()=>new Promise((o,a)=>{s=setTimeout(()=>{a(new Error(e))},r),n=o,i=a})}}function _s(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function wh(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function wv(t){return wh("topic",t)}function bv(t){return wh("id",t)}function bh(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Hr(t,e){return ye.fromMiliseconds((e||Date.now())+ye.toMiliseconds(t))}function Rn(t){return Date.now()>=ye.toMiliseconds(t)}function Ht(t,e){return`${t}${e?`:${e}`:""}`}async function _v({id:t,topic:e,wcDeepLink:r}){try{if(!r)return;const n=typeof r=="string"?JSON.parse(r):r;let i=n==null?void 0:n.href;if(typeof i!="string")return;i.endsWith("/")&&(i=i.slice(0,-1));const s=`${i}/wc?requestId=${t}&sessionTopic=${e}`,o=bs();o===$r.browser?s.startsWith("https://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):o===$r.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(n){console.error(n)}}const Ev="irn";function Rc(t){return(t==null?void 0:t.relay)||{protocol:Ev}}function Fo(t){const e=Jy[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var Sv=Object.defineProperty,_h=Object.getOwnPropertySymbols,xv=Object.prototype.hasOwnProperty,Cv=Object.prototype.propertyIsEnumerable,Eh=(t,e,r)=>e in t?Sv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ov=(t,e)=>{for(var r in e||(e={}))xv.call(e,r)&&Eh(t,r,e[r]);if(_h)for(var r of _h(e))Cv.call(e,r)&&Eh(t,r,e[r]);return t};function Dv(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function Iv(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=ys.parse(s);return{protocol:n,topic:Av(i[0]),version:parseInt(i[1],10),symKey:o.symKey,relay:Dv(o)}}function Av(t){return t.startsWith("//")?t.substring(2):t}function Tv(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=r+e+i;t[i]&&(n[s]=t[i])}),n}function Rv(t){return`${t.protocol}:${t.topic}@${t.version}?`+ys.stringify(Ov({symKey:t.symKey},Tv(t.relay)))}function Ni(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function Pv(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Ni(r.accounts))}),e}function Nv(t,e){const r=[];return Object.values(t).forEach(n=>{Ni(n.accounts).includes(e)&&r.push(...n.methods)}),r}function $v(t,e){const r=[];return Object.values(t).forEach(n=>{Ni(n.accounts).includes(e)&&r.push(...n.events)}),r}function Lv(t,e){const r=Bo(t,e);if(r)throw new Error(r.message);const n={};for(const[i,s]of Object.entries(t))n[i]={methods:s.methods,events:s.events,chains:s.accounts.map(o=>`${o.split(":")[0]}:${o.split(":")[1]}`)};return n}const Mv={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},kv={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function de(t,e){const{message:r,code:n}=kv[t];return{message:e?`${r} ${e}`:r,code:n}}function Xt(t,e){const{message:r,code:n}=Mv[t];return{message:e?`${r} ${e}`:r,code:n}}function Es(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Ss(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function wr(t){return typeof t>"u"}function er(t,e){return e&&wr(t)?!0:typeof t=="string"&&!!t.trim().length}function Pc(t,e){return e&&wr(t)?!0:typeof t=="number"&&!isNaN(t)}function Uv(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return si(i,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:u}=t.namespaces[o],d=Ni(a),f=r[o];(!si(ch(o,f),d)||!si(f.methods,c)||!si(f.events,u))&&(s=!1)}),s):!1}function jo(t){return er(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Fv(t){if(er(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&jo(r)}}return!1}function jv(t){if(er(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function Bv(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function qv(t){return t==null?void 0:t.topic}function zv(t,e){let r=null;return er(t==null?void 0:t.publicKey,!1)||(r=de("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function Sh(t){let e=!0;return Es(t)?t.length&&(e=t.every(r=>er(r,!1))):e=!1,e}function Wv(t,e,r){let n=null;return Es(e)&&e.length?e.forEach(i=>{n||jo(i)||(n=Xt("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):jo(t)||(n=Xt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function Vv(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=Wv(i,ch(i,s),`${e} ${r}`);o&&(n=o)}),n}function Hv(t,e){let r=null;return Es(t)?t.forEach(n=>{r||Fv(n)||(r=Xt("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=Xt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Kv(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Hv(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function Zv(t,e){let r=null;return Sh(t==null?void 0:t.methods)?Sh(t==null?void 0:t.events)||(r=Xt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Xt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function xh(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Zv(n,`${e}, namespace`);i&&(r=i)}),r}function Gv(t,e,r){let n=null;if(t&&Ss(t)){const i=xh(t,e);i&&(n=i);const s=Vv(t,e,r);s&&(n=s)}else n=de("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function Bo(t,e){let r=null;if(t&&Ss(t)){const n=xh(t,e);n&&(r=n);const i=Kv(t,e);i&&(r=i)}else r=de("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function Ch(t){return er(t.protocol,!0)}function Qv(t,e){let r=!1;return e&&!t?r=!0:t&&Es(t)&&t.length&&t.forEach(n=>{r=Ch(n)}),r}function Yv(t){return typeof t=="number"}function Or(t){return typeof t<"u"&&typeof t!==null}function Jv(t){return!(!t||typeof t!="object"||!t.code||!Pc(t.code,!1)||!t.message||!er(t.message,!1))}function Xv(t){return!(wr(t)||!er(t.method,!1))}function ew(t){return!(wr(t)||wr(t.result)&&wr(t.error)||!Pc(t.id,!1)||!er(t.jsonrpc,!1))}function tw(t){return!(wr(t)||!er(t.name,!1))}function Oh(t,e){return!(!jo(e)||!Pv(t).includes(e))}function rw(t,e,r){return er(r,!1)?Nv(t,e).includes(r):!1}function nw(t,e,r){return er(r,!1)?$v(t,e).includes(r):!1}function Dh(t,e,r){let n=null;const i=iw(t),s=sw(e),o=Object.keys(i),a=Object.keys(s),c=Ih(Object.keys(t)),u=Ih(Object.keys(e)),d=c.filter(f=>!u.includes(f));return d.length&&(n=de("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${d.toString()}
      Received: ${Object.keys(e).toString()}`)),si(o,a)||(n=de("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(f=>{if(!f.includes(":")||n)return;const p=Ni(e[f].accounts);p.includes(f)||(n=de("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${f}
        Required: ${f}
        Approved: ${p.toString()}`))}),o.forEach(f=>{n||(si(i[f].methods,s[f].methods)?si(i[f].events,s[f].events)||(n=de("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${f}`)):n=de("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${f}`))}),n}function iw(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function Ih(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function sw(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=Ni(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function ow(t,e){return Pc(t,!1)&&t<=e.max&&t>=e.min}function Ah(){const t=bs();return new Promise(e=>{switch(t){case $r.browser:e(aw());break;case $r.reactNative:e(cw());break;case $r.node:e(lw());break;default:e(!0)}})}function aw(){return ws()&&(navigator==null?void 0:navigator.onLine)}async function cw(){if(Uo()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function lw(){return!0}function uw(t){switch(bs()){case $r.browser:dw(t);break;case $r.reactNative:hw(t);break}}function dw(t){ws()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function hw(t){Uo()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const Nc={};let qo=class{static get(e){return Nc[e]}static set(e,r){Nc[e]=r}static delete(e){delete Nc[e]}};const fw="PARSE_ERROR",pw="INVALID_REQUEST",gw="METHOD_NOT_FOUND",mw="INVALID_PARAMS",Th="INTERNAL_ERROR",$c="SERVER_ERROR",yw=[-32700,-32600,-32601,-32602,-32603],xs={[fw]:{code:-32700,message:"Parse error"},[pw]:{code:-32600,message:"Invalid Request"},[gw]:{code:-32601,message:"Method not found"},[mw]:{code:-32602,message:"Invalid params"},[Th]:{code:-32603,message:"Internal error"},[$c]:{code:-32e3,message:"Server error"}},Rh=$c;function vw(t){return yw.includes(t)}function Ph(t){return Object.keys(xs).includes(t)?xs[t]:xs[Rh]}function ww(t){const e=Object.values(xs).find(r=>r.code===t);return e||xs[Rh]}function bw(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var Nh={},gn={},$h;function _w(){if($h)return gn;$h=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.isBrowserCryptoAvailable=gn.getSubtleCrypto=gn.getBrowerCrypto=void 0;function t(){return(rn==null?void 0:rn.crypto)||(rn==null?void 0:rn.msCrypto)||{}}gn.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}gn.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return gn.isBrowserCryptoAvailable=r,gn}var mn={},Lh;function Ew(){if(Lh)return mn;Lh=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.isBrowser=mn.isNode=mn.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}mn.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}mn.isNode=e;function r(){return!t()&&!e()}return mn.isBrowser=r,mn}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nn;e.__exportStar(_w(),t),e.__exportStar(Ew(),t)})(Nh);function Lc(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Mh(t=6){return BigInt(Lc(t))}function Cs(t,e,r){return{id:r||Lc(),jsonrpc:"2.0",method:t,params:e}}function Mc(t,e){return{id:t,jsonrpc:"2.0",result:e}}function kc(t,e,r){return{id:t,jsonrpc:"2.0",error:Sw(e,r)}}function Sw(t,e){return typeof t>"u"?Ph(Th):(typeof t=="string"&&(t=Object.assign(Object.assign({},Ph($c)),{message:t})),typeof e<"u"&&(t.data=e),vw(t.code)&&(t=ww(t.code)),t)}class xw{}class Cw extends xw{constructor(){super()}}class Ow extends Cw{constructor(e){super()}}const Dw="^wss?:";function Iw(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Aw(t,e){const r=Iw(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function kh(t){return Aw(t,Dw)}function Tw(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Uh(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Uc(t){return Uh(t)&&"method"in t}function zo(t){return Uh(t)&&(yn(t)||Kr(t))}function yn(t){return"result"in t}function Kr(t){return"error"in t}class Rw extends Ow{constructor(e){super(e),this.events=new Ur.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Cs(e.method,e.params||[],e.id||Mh().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Kr(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),zo(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Pw=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Nw=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Fh=t=>t.split("?")[0],jh=10,$w=Pw();class Lw{constructor(e){if(this.url=e,this.events=new Ur.EventEmitter,this.registering=!1,!kh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(lc(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!kh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=Nh.isReactNative()?void 0:{rejectUnauthorized:!Tw(e)},s=new $w(e,[],i);Nw()?s.onerror=o=>{const a=o;n(this.emitError(a.error))}:s.on("error",o=>{n(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Sd(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=kc(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return bw(e,Fh(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>jh&&this.events.setMaxListeners(jh)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Fh(this.url)}`));return this.events.emit("register_error",r),r}}var Wo={exports:{}};Wo.exports,function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",d="[object Boolean]",f="[object Date]",p="[object Error]",y="[object Function]",w="[object GeneratorFunction]",S="[object Map]",E="[object Number]",D="[object Null]",b="[object Object]",C="[object Promise]",v="[object Proxy]",_="[object RegExp]",g="[object Set]",l="[object String]",m="[object Symbol]",P="[object Undefined]",N="[object WeakMap]",z="[object ArrayBuffer]",W="[object DataView]",G="[object Float32Array]",$="[object Float64Array]",j="[object Int8Array]",oe="[object Int16Array]",Y="[object Int32Array]",Z="[object Uint8Array]",X="[object Uint8ClampedArray]",K="[object Uint16Array]",ee="[object Uint32Array]",xe=/[\\^$.*+?()[\]{}|]/g,ne=/^\[object .+?Constructor\]$/,Ee=/^(?:0|[1-9]\d*)$/,fe={};fe[G]=fe[$]=fe[j]=fe[oe]=fe[Y]=fe[Z]=fe[X]=fe[K]=fe[ee]=!0,fe[a]=fe[c]=fe[z]=fe[d]=fe[W]=fe[f]=fe[p]=fe[y]=fe[S]=fe[E]=fe[b]=fe[_]=fe[g]=fe[l]=fe[N]=!1;var _e=typeof rn=="object"&&rn&&rn.Object===Object&&rn,q=typeof self=="object"&&self&&self.Object===Object&&self,B=_e||q||Function("return this")(),M=e&&!e.nodeType&&e,h=M&&!0&&t&&!t.nodeType&&t,R=h&&h.exports===M,ce=R&&_e.process,he=function(){try{return ce&&ce.binding&&ce.binding("util")}catch{}}(),We=he&&he.isTypedArray;function Ie(O,k){for(var Q=-1,me=O==null?0:O.length,Dt=0,ze=[];++Q<me;){var Wt=O[Q];k(Wt,Q,O)&&(ze[Dt++]=Wt)}return ze}function Me(O,k){for(var Q=-1,me=k.length,Dt=O.length;++Q<me;)O[Dt+Q]=k[Q];return O}function Xe(O,k){for(var Q=-1,me=O==null?0:O.length;++Q<me;)if(k(O[Q],Q,O))return!0;return!1}function pt(O,k){for(var Q=-1,me=Array(O);++Q<O;)me[Q]=k(Q);return me}function dt(O){return function(k){return O(k)}}function Ve(O,k){return O.has(k)}function Be(O,k){return O==null?void 0:O[k]}function Ne(O){var k=-1,Q=Array(O.size);return O.forEach(function(me,Dt){Q[++k]=[Dt,me]}),Q}function ke(O,k){return function(Q){return O(k(Q))}}function $e(O){var k=-1,Q=Array(O.size);return O.forEach(function(me){Q[++k]=me}),Q}var Te=Array.prototype,Ae=Function.prototype,Se=Object.prototype,Ue=B["__core-js_shared__"],qe=Ae.toString,De=Se.hasOwnProperty,He=function(){var O=/[^.]+$/.exec(Ue&&Ue.keys&&Ue.keys.IE_PROTO||"");return O?"Symbol(src)_1."+O:""}(),et=Se.toString,nt=RegExp("^"+qe.call(De).replace(xe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=R?B.Buffer:void 0,it=B.Symbol,Sr=B.Uint8Array,fr=Se.propertyIsEnumerable,Mr=Te.splice,Gt=it?it.toStringTag:void 0,Qt=Object.getOwnPropertySymbols,Ar=tt?tt.isBuffer:void 0,hn=ke(Object.keys,Object),wt=ft(B,"DataView"),bt=ft(B,"Map"),At=ft(B,"Promise"),xt=ft(B,"Set"),Tt=ft(B,"WeakMap"),_t=ft(Object,"create"),Mt=Si(wt),jt=Si(bt),Bt=Si(At),kt=Si(xt),qt=Si(Tt),Rt=it?it.prototype:void 0,Pt=Rt?Rt.valueOf:void 0;function vt(O){var k=-1,Q=O==null?0:O.length;for(this.clear();++k<Q;){var me=O[k];this.set(me[0],me[1])}}function T(){this.__data__=_t?_t(null):{},this.size=0}function H(O){var k=this.has(O)&&delete this.__data__[O];return this.size-=k?1:0,k}function ue(O){var k=this.__data__;if(_t){var Q=k[O];return Q===n?void 0:Q}return De.call(k,O)?k[O]:void 0}function Ce(O){var k=this.__data__;return _t?k[O]!==void 0:De.call(k,O)}function st(O,k){var Q=this.__data__;return this.size+=this.has(O)?0:1,Q[O]=_t&&k===void 0?n:k,this}vt.prototype.clear=T,vt.prototype.delete=H,vt.prototype.get=ue,vt.prototype.has=Ce,vt.prototype.set=st;function Ge(O){var k=-1,Q=O==null?0:O.length;for(this.clear();++k<Q;){var me=O[k];this.set(me[0],me[1])}}function Je(){this.__data__=[],this.size=0}function Ke(O){var k=this.__data__,Q=I(k,O);if(Q<0)return!1;var me=k.length-1;return Q==me?k.pop():Mr.call(k,Q,1),--this.size,!0}function Yt(O){var k=this.__data__,Q=I(k,O);return Q<0?void 0:k[Q][1]}function Ct(O){return I(this.__data__,O)>-1}function Nt(O,k){var Q=this.__data__,me=I(Q,O);return me<0?(++this.size,Q.push([O,k])):Q[me][1]=k,this}Ge.prototype.clear=Je,Ge.prototype.delete=Ke,Ge.prototype.get=Yt,Ge.prototype.has=Ct,Ge.prototype.set=Nt;function zt(O){var k=-1,Q=O==null?0:O.length;for(this.clear();++k<Q;){var me=O[k];this.set(me[0],me[1])}}function fn(){this.size=0,this.__data__={hash:new vt,map:new(bt||Ge),string:new vt}}function Ei(O){var k=Ot(this,O).delete(O);return this.size-=k?1:0,k}function sr(O){return Ot(this,O).get(O)}function Fa(O){return Ot(this,O).has(O)}function Kn(O,k){var Q=Ot(this,O),me=Q.size;return Q.set(O,k),this.size+=Q.size==me?0:1,this}zt.prototype.clear=fn,zt.prototype.delete=Ei,zt.prototype.get=sr,zt.prototype.has=Fa,zt.prototype.set=Kn;function ss(O){var k=-1,Q=O==null?0:O.length;for(this.__data__=new zt;++k<Q;)this.add(O[k])}function os(O){return this.__data__.set(O,n),this}function yo(O){return this.__data__.has(O)}ss.prototype.add=ss.prototype.push=os,ss.prototype.has=yo;function pn(O){var k=this.__data__=new Ge(O);this.size=k.size}function Du(){this.__data__=new Ge,this.size=0}function vo(O){var k=this.__data__,Q=k.delete(O);return this.size=k.size,Q}function Iu(O){return this.__data__.get(O)}function Au(O){return this.__data__.has(O)}function x(O,k){var Q=this.__data__;if(Q instanceof Ge){var me=Q.__data__;if(!bt||me.length<r-1)return me.push([O,k]),this.size=++Q.size,this;Q=this.__data__=new zt(me)}return Q.set(O,k),this.size=Q.size,this}pn.prototype.clear=Du,pn.prototype.delete=vo,pn.prototype.get=Iu,pn.prototype.has=Au,pn.prototype.set=x;function A(O,k){var Q=Ba(O),me=!Q&&qx(O),Dt=!Q&&!me&&Pu(O),ze=!Q&&!me&&!Dt&&Z0(O),Wt=Q||me||Dt||ze,rr=Wt?pt(O.length,String):[],or=rr.length;for(var Ut in O)(k||De.call(O,Ut))&&!(Wt&&(Ut=="length"||Dt&&(Ut=="offset"||Ut=="parent")||ze&&(Ut=="buffer"||Ut=="byteLength"||Ut=="byteOffset")||Tu(Ut,or)))&&rr.push(Ut);return rr}function I(O,k){for(var Q=O.length;Q--;)if(W0(O[Q][0],k))return Q;return-1}function U(O,k,Q){var me=k(O);return Ba(O)?me:Me(me,Q(O))}function L(O){return O==null?O===void 0?P:D:Gt&&Gt in Object(O)?Tr(O):Bx(O)}function F(O){return bo(O)&&L(O)==a}function V(O,k,Q,me,Dt){return O===k?!0:O==null||k==null||!bo(O)&&!bo(k)?O!==O&&k!==k:te(O,k,Q,me,V,Dt)}function te(O,k,Q,me,Dt,ze){var Wt=Ba(O),rr=Ba(k),or=Wt?c:zr(O),Ut=rr?c:zr(k);or=or==a?b:or,Ut=Ut==a?b:Ut;var kr=or==b,Xr=Ut==b,pr=or==Ut;if(pr&&Pu(O)){if(!Pu(k))return!1;Wt=!0,kr=!1}if(pr&&!kr)return ze||(ze=new pn),Wt||Z0(O)?ve(O,k,Q,me,Dt,ze):Qe(O,k,or,Q,me,Dt,ze);if(!(Q&i)){var Wr=kr&&De.call(O,"__wrapped__"),Vr=Xr&&De.call(k,"__wrapped__");if(Wr||Vr){var Zn=Wr?O.value():O,Cn=Vr?k.value():k;return ze||(ze=new pn),Dt(Zn,Cn,Q,me,ze)}}return pr?(ze||(ze=new pn),gt(O,k,Q,me,Dt,ze)):!1}function se(O){if(!K0(O)||ja(O))return!1;var k=V0(O)?nt:ne;return k.test(Si(O))}function ie(O){return bo(O)&&H0(O.length)&&!!fe[L(O)]}function re(O){if(!jx(O))return hn(O);var k=[];for(var Q in Object(O))De.call(O,Q)&&Q!="constructor"&&k.push(Q);return k}function ve(O,k,Q,me,Dt,ze){var Wt=Q&i,rr=O.length,or=k.length;if(rr!=or&&!(Wt&&or>rr))return!1;var Ut=ze.get(O);if(Ut&&ze.get(k))return Ut==k;var kr=-1,Xr=!0,pr=Q&s?new ss:void 0;for(ze.set(O,k),ze.set(k,O);++kr<rr;){var Wr=O[kr],Vr=k[kr];if(me)var Zn=Wt?me(Vr,Wr,kr,k,O,ze):me(Wr,Vr,kr,O,k,ze);if(Zn!==void 0){if(Zn)continue;Xr=!1;break}if(pr){if(!Xe(k,function(Cn,xi){if(!Ve(pr,xi)&&(Wr===Cn||Dt(Wr,Cn,Q,me,ze)))return pr.push(xi)})){Xr=!1;break}}else if(!(Wr===Vr||Dt(Wr,Vr,Q,me,ze))){Xr=!1;break}}return ze.delete(O),ze.delete(k),Xr}function Qe(O,k,Q,me,Dt,ze,Wt){switch(Q){case W:if(O.byteLength!=k.byteLength||O.byteOffset!=k.byteOffset)return!1;O=O.buffer,k=k.buffer;case z:return!(O.byteLength!=k.byteLength||!ze(new Sr(O),new Sr(k)));case d:case f:case E:return W0(+O,+k);case p:return O.name==k.name&&O.message==k.message;case _:case l:return O==k+"";case S:var rr=Ne;case g:var or=me&i;if(rr||(rr=$e),O.size!=k.size&&!or)return!1;var Ut=Wt.get(O);if(Ut)return Ut==k;me|=s,Wt.set(O,k);var kr=ve(rr(O),rr(k),me,Dt,ze,Wt);return Wt.delete(O),kr;case m:if(Pt)return Pt.call(O)==Pt.call(k)}return!1}function gt(O,k,Q,me,Dt,ze){var Wt=Q&i,rr=lt(O),or=rr.length,Ut=lt(k),kr=Ut.length;if(or!=kr&&!Wt)return!1;for(var Xr=or;Xr--;){var pr=rr[Xr];if(!(Wt?pr in k:De.call(k,pr)))return!1}var Wr=ze.get(O);if(Wr&&ze.get(k))return Wr==k;var Vr=!0;ze.set(O,k),ze.set(k,O);for(var Zn=Wt;++Xr<or;){pr=rr[Xr];var Cn=O[pr],xi=k[pr];if(me)var G0=Wt?me(xi,Cn,pr,k,O,ze):me(Cn,xi,pr,O,k,ze);if(!(G0===void 0?Cn===xi||Dt(Cn,xi,Q,me,ze):G0)){Vr=!1;break}Zn||(Zn=pr=="constructor")}if(Vr&&!Zn){var qa=O.constructor,za=k.constructor;qa!=za&&"constructor"in O&&"constructor"in k&&!(typeof qa=="function"&&qa instanceof qa&&typeof za=="function"&&za instanceof za)&&(Vr=!1)}return ze.delete(O),ze.delete(k),Vr}function lt(O){return U(O,Vx,wo)}function Ot(O,k){var Q=O.__data__;return Ru(k)?Q[typeof k=="string"?"string":"hash"]:Q.map}function ft(O,k){var Q=Be(O,k);return se(Q)?Q:void 0}function Tr(O){var k=De.call(O,Gt),Q=O[Gt];try{O[Gt]=void 0;var me=!0}catch{}var Dt=et.call(O);return me&&(k?O[Gt]=Q:delete O[Gt]),Dt}var wo=Qt?function(O){return O==null?[]:(O=Object(O),Ie(Qt(O),function(k){return fr.call(O,k)}))}:Hx,zr=L;(wt&&zr(new wt(new ArrayBuffer(1)))!=W||bt&&zr(new bt)!=S||At&&zr(At.resolve())!=C||xt&&zr(new xt)!=g||Tt&&zr(new Tt)!=N)&&(zr=function(O){var k=L(O),Q=k==b?O.constructor:void 0,me=Q?Si(Q):"";if(me)switch(me){case Mt:return W;case jt:return S;case Bt:return C;case kt:return g;case qt:return N}return k});function Tu(O,k){return k=k??o,!!k&&(typeof O=="number"||Ee.test(O))&&O>-1&&O%1==0&&O<k}function Ru(O){var k=typeof O;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?O!=="__proto__":O===null}function ja(O){return!!He&&He in O}function jx(O){var k=O&&O.constructor,Q=typeof k=="function"&&k.prototype||Se;return O===Q}function Bx(O){return et.call(O)}function Si(O){if(O!=null){try{return qe.call(O)}catch{}try{return O+""}catch{}}return""}function W0(O,k){return O===k||O!==O&&k!==k}var qx=F(function(){return arguments}())?F:function(O){return bo(O)&&De.call(O,"callee")&&!fr.call(O,"callee")},Ba=Array.isArray;function zx(O){return O!=null&&H0(O.length)&&!V0(O)}var Pu=Ar||Kx;function Wx(O,k){return V(O,k)}function V0(O){if(!K0(O))return!1;var k=L(O);return k==y||k==w||k==u||k==v}function H0(O){return typeof O=="number"&&O>-1&&O%1==0&&O<=o}function K0(O){var k=typeof O;return O!=null&&(k=="object"||k=="function")}function bo(O){return O!=null&&typeof O=="object"}var Z0=We?dt(We):ie;function Vx(O){return zx(O)?A(O):re(O)}function Hx(){return[]}function Kx(){return!1}t.exports=Wx}(Wo,Wo.exports);var Mw=Wo.exports;const kw=cs(Mw);function Uw(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function f(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var S=0,E=0,D=0,b=w.length;D!==b&&w[D]===0;)D++,S++;for(var C=(b-D)*d+1>>>0,v=new Uint8Array(C);D!==b;){for(var _=w[D],g=0,l=C-1;(_!==0||g<E)&&l!==-1;l--,g++)_+=256*v[l]>>>0,v[l]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");E=g,D++}for(var m=C-E;m!==C&&v[m]===0;)m++;for(var P=c.repeat(S);m<C;++m)P+=t.charAt(v[m]);return P}function p(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var S=0;if(w[S]!==" "){for(var E=0,D=0;w[S]===c;)E++,S++;for(var b=(w.length-S)*u+1>>>0,C=new Uint8Array(b);w[S];){var v=r[w.charCodeAt(S)];if(v===255)return;for(var _=0,g=b-1;(v!==0||_<D)&&g!==-1;g--,_++)v+=a*C[g]>>>0,C[g]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");D=_,S++}if(w[S]!==" "){for(var l=b-D;l!==b&&C[l]===0;)l++;for(var m=new Uint8Array(E+(b-l)),P=E;l!==b;)m[P++]=C[l++];return m}}}function y(w){var S=p(w);if(S)return S;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:p,decode:y}}var Fw=Uw,jw=Fw;const Bh=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Bw=t=>new TextEncoder().encode(t),qw=t=>new TextDecoder().decode(t);class zw{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Ww{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return qh(this,e)}}class Vw{constructor(e){this.decoders=e}or(e){return qh(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const qh=(t,e)=>new Vw({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Hw{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new zw(e,r,n),this.decoder=new Ww(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Vo=({name:t,prefix:e,encode:r,decode:n})=>new Hw(t,e,r,n),Os=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=jw(r,e);return Vo({prefix:t,name:e,encode:n,decode:s=>Bh(i(s))})},Kw=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let d=0;d<s;++d){const f=i[t[d]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Zw=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},ir=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Vo({prefix:e,name:t,encode(i){return Zw(i,n,r)},decode(i){return Kw(i,n,r,t)}}),Gw=Vo({prefix:"\0",name:"identity",encode:t=>qw(t),decode:t=>Bw(t)});var Qw=Object.freeze({__proto__:null,identity:Gw});const Yw=ir({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Jw=Object.freeze({__proto__:null,base2:Yw});const Xw=ir({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var eb=Object.freeze({__proto__:null,base8:Xw});const tb=Os({prefix:"9",name:"base10",alphabet:"0123456789"});var rb=Object.freeze({__proto__:null,base10:tb});const nb=ir({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ib=ir({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var sb=Object.freeze({__proto__:null,base16:nb,base16upper:ib});const ob=ir({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ab=ir({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),cb=ir({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),lb=ir({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ub=ir({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),db=ir({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hb=ir({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),fb=ir({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),pb=ir({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var gb=Object.freeze({__proto__:null,base32:ob,base32upper:ab,base32pad:cb,base32padupper:lb,base32hex:ub,base32hexupper:db,base32hexpad:hb,base32hexpadupper:fb,base32z:pb});const mb=Os({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yb=Os({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var vb=Object.freeze({__proto__:null,base36:mb,base36upper:yb});const wb=Os({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),bb=Os({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var _b=Object.freeze({__proto__:null,base58btc:wb,base58flickr:bb});const Eb=ir({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Sb=ir({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),xb=ir({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Cb=ir({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Ob=Object.freeze({__proto__:null,base64:Eb,base64pad:Sb,base64url:xb,base64urlpad:Cb});const zh=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Db=zh.reduce((t,e,r)=>(t[r]=e,t),[]),Ib=zh.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Ab(t){return t.reduce((e,r)=>(e+=Db[r],e),"")}function Tb(t){const e=[];for(const r of t){const n=Ib[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Rb=Vo({prefix:"🚀",name:"base256emoji",encode:Ab,decode:Tb});var Pb=Object.freeze({__proto__:null,base256emoji:Rb}),Nb=Vh,Wh=128,$b=127,Lb=~$b,Mb=Math.pow(2,31);function Vh(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Mb;)e[r++]=t&255|Wh,t/=128;for(;t&Lb;)e[r++]=t&255|Wh,t>>>=7;return e[r]=t|0,Vh.bytes=r-n+1,e}var kb=Fc,Ub=128,Hh=127;function Fc(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Fc.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&Hh)<<i:(o&Hh)*Math.pow(2,i),i+=7}while(o>=Ub);return Fc.bytes=s-n,r}var Fb=Math.pow(2,7),jb=Math.pow(2,14),Bb=Math.pow(2,21),qb=Math.pow(2,28),zb=Math.pow(2,35),Wb=Math.pow(2,42),Vb=Math.pow(2,49),Hb=Math.pow(2,56),Kb=Math.pow(2,63),Zb=function(t){return t<Fb?1:t<jb?2:t<Bb?3:t<qb?4:t<zb?5:t<Wb?6:t<Vb?7:t<Hb?8:t<Kb?9:10},Gb={encode:Nb,decode:kb,encodingLength:Zb},Kh=Gb;const Zh=(t,e,r=0)=>(Kh.encode(t,e,r),e),Gh=t=>Kh.encodingLength(t),jc=(t,e)=>{const r=e.byteLength,n=Gh(t),i=n+Gh(r),s=new Uint8Array(i+r);return Zh(t,s,0),Zh(r,s,n),s.set(e,i),new Qb(t,r,e,s)};class Qb{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const Qh=({name:t,code:e,encode:r})=>new Yb(t,e,r);class Yb{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?jc(this.code,r):r.then(n=>jc(this.code,n))}else throw Error("Unknown type, must be binary type")}}const Yh=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Jb=Qh({name:"sha2-256",code:18,encode:Yh("SHA-256")}),Xb=Qh({name:"sha2-512",code:19,encode:Yh("SHA-512")});var e2=Object.freeze({__proto__:null,sha256:Jb,sha512:Xb});const Jh=0,t2="identity",Xh=Bh;var r2=Object.freeze({__proto__:null,identity:{code:Jh,name:t2,encode:Xh,digest:t=>jc(Jh,Xh(t))}});new TextEncoder,new TextDecoder;const ef={...Qw,...Jw,...eb,...rb,...sb,...gb,...vb,..._b,...Ob,...Pb};({...e2,...r2});function tf(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function n2(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?tf(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function rf(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const nf=rf("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Bc=rf("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=n2(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),i2={utf8:nf,"utf-8":nf,hex:ef.base16,latin1:Bc,ascii:Bc,binary:Bc,...ef};function s2(t,e="utf8"){const r=i2[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?tf(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const sf="wc",o2=2,qc="core",Pn=`${sf}@2:${qc}:`,a2={name:qc,logger:"error"},c2={database:":memory:"},l2="crypto",of="client_ed25519_seed",u2=ye.ONE_DAY,d2="keychain",h2="0.3",f2="messages",p2="0.3",g2=ye.SIX_HOURS,m2="publisher",af="irn",y2="error",cf="wss://relay.walletconnect.com",lf="wss://relay.walletconnect.org",v2="relayer",lr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},w2="_subscription",vn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},b2=ye.ONE_SECOND,_2="2.10.0",E2=1e4,S2="0.3",x2="WALLETCONNECT_CLIENT_ID",on={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},C2="subscription",O2="0.3",D2=ye.FIVE_SECONDS*1e3,I2="pairing",A2="0.3",Ds={wc_pairingDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:0},res:{ttl:ye.ONE_DAY,prompt:!1,tag:0}}},an={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},T2="history",R2="0.3",P2="expirer",Fr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},N2="0.3",zc="verify-api",Ho="https://verify.walletconnect.com",uf="https://verify.walletconnect.org";let $2=class{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=d2,this.version=h2,this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=at.generateChildLogger(r,this.name)}get context(){return at.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,yh(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?vh(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}},L2=class{constructor(e,r,n){this.core=e,this.logger=r,this.name=l2,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=zd(i);return qd(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=ev();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),o=zd(s),a=Ac();return await cy(a,i,u2,o)},this.generateSharedKey=(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=tv(a,s);return this.setSymKey(c,o)},this.setSymKey=async(i,s)=>{this.isInitialized();const o=s||rv(i);return await this.keychain.set(o,i),o},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,o)=>{this.isInitialized();const a=hh(o),c=lc(s);if(fh(a)){const p=a.senderPublicKey,y=a.receiverPublicKey;i=await this.generateSharedKey(p,y)}const u=this.getSymKey(i),{type:d,senderPublicKey:f}=a;return iv({type:d,symKey:u,message:c,senderPublicKey:f})},this.decode=async(i,s,o)=>{this.isInitialized();const a=av(s,o);if(fh(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;i=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(i),u=sv({symKey:c,encoded:s});return Sd(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}},this.getPayloadType=i=>{const s=ko(i);return vs(s.type)},this.getPayloadSenderPublicKey=i=>{const s=ko(i);return s.senderPublicKey?yr(s.senderPublicKey,vr):void 0},this.core=e,this.logger=at.generateChildLogger(r,this.name),this.keychain=n||new $2(this.core,this.logger)}get context(){return at.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(of)}catch{e=Ac(),await this.keychain.set(of,e)}return s2(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}},M2=class extends fm{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=f2,this.version=p2,this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=Ri(i);let o=this.messages.get(n);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(n,o),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),o=Ri(i);return typeof s[o]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=at.generateChildLogger(e,this.name),this.core=r}get context(){return at.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,yh(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?vh(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}};class k2 extends pm{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new Ur.EventEmitter,this.name=m2,this.queue=new Map,this.publishTimeout=ye.toMiliseconds(ye.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{const a=(s==null?void 0:s.ttl)||g2,c=Rc(s),u=(s==null?void 0:s.prompt)||!1,d=(s==null?void 0:s.tag)||0,f=(s==null?void 0:s.id)||Mh().toString(),p={topic:n,message:i,opts:{ttl:a,relay:c,prompt:u,tag:d,id:f}},y=setTimeout(()=>this.queue.set(f,p),this.publishTimeout);try{await await _s(this.rpcPublish(n,i,a,c,u,d,f),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(f),this.relayer.events.emit(lr.publish,p)}catch(w){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw this.removeRequestFromQueue(f),w;return}finally{clearTimeout(y)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(a){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(a),a}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=at.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return at.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,s,o,a){var c,u,d,f;const p={method:Fo(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:o},id:a};return wr((c=p.params)==null?void 0:c.prompt)&&((u=p.params)==null||delete u.prompt),wr((d=p.params)==null?void 0:d.tag)&&((f=p.params)==null||delete f.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p}),this.relayer.request(p)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(Di.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(lr.connection_stalled);return}this.checkQueue()}),this.relayer.on(lr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class U2{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var F2=Object.defineProperty,j2=Object.defineProperties,B2=Object.getOwnPropertyDescriptors,df=Object.getOwnPropertySymbols,q2=Object.prototype.hasOwnProperty,z2=Object.prototype.propertyIsEnumerable,hf=(t,e,r)=>e in t?F2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Is=(t,e)=>{for(var r in e||(e={}))q2.call(e,r)&&hf(t,r,e[r]);if(df)for(var r of df(e))z2.call(e,r)&&hf(t,r,e[r]);return t},Wc=(t,e)=>j2(t,B2(e));let W2=class extends ym{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new U2,this.events=new Ur.EventEmitter,this.name=C2,this.version=O2,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Pn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=Rc(i),o={topic:n,relay:s};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s);return this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,s)=>{const o=new ye.Watch;o.start(this.pendingSubscriptionWatchLabel);const a=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),i(!0)),o.elapsed(this.pendingSubscriptionWatchLabel)>=D2&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),s(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=at.generateChildLogger(r,this.name),this.clientId=""}get context(){return at.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=Rc(n);await this.rpcUnsubscribe(e,r,i);const s=Xt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){const n={method:Fo(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await _s(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(lr.connection_stalled)}return Ri(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:Fo(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await _s(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(lr.connection_stalled)}}rpcUnsubscribe(e,r,n){const i={method:Fo(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,Wc(Is({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Is({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,Is({},r)),this.topicMap.set(r.topic,e),this.events.emit(on.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(on.deleted,Wc(Is({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(on.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(on.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);Es(r)&&this.onBatchSubscribe(r.map((n,i)=>Wc(Is({},e[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Di.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(lr.connect,async()=>{await this.onConnect()}),this.relayer.on(lr.disconnect,()=>{this.onDisconnect()}),this.events.on(on.created,async e=>{const r=on.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(on.deleted,async e=>{const r=on.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}};var V2=Object.defineProperty,ff=Object.getOwnPropertySymbols,H2=Object.prototype.hasOwnProperty,K2=Object.prototype.propertyIsEnumerable,pf=(t,e,r)=>e in t?V2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Z2=(t,e)=>{for(var r in e||(e={}))H2.call(e,r)&&pf(t,r,e[r]);if(ff)for(var r of ff(e))K2.call(e,r)&&pf(t,r,e[r]);return t};let G2=class extends gm{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Ur.EventEmitter,this.name=v2,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(lr.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(lr.error,r)},this.registerProviderListeners=()=>{this.provider.on(vn.payload,this.onPayloadHandler),this.provider.on(vn.connect,this.onConnectHandler),this.provider.on(vn.disconnect,this.onDisconnectHandler),this.provider.on(vn.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?at.generateChildLogger(e.logger,this.name):at.pino(at.getDefaultLoggerOptions({level:e.logger||y2})),this.messages=new M2(this.logger,e.core),this.subscriber=new W2(this,this.logger),this.publisher=new k2(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||cf,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${lf}...`),await this.restartTransport(lf)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},E2)}get context(){return at.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"";return i||(await Promise.all([new Promise(s=>{this.subscriber.once(on.created,o=>{o.topic===e&&s()})}),new Promise(async s=>{i=await this.subscriber.subscribe(e,r),s()})]),i)}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await _s(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(on.resubscribed,()=>{r()})}),new Promise(async(r,n)=>{try{await _s(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(i){n(i);return}r()})])}catch(r){this.logger.error(r);const n=r;if(!this.isConnectionStalled(n.message))throw r;this.provider.events.emit(vn.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Ah())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Rw(new Lw(vv({sdkVersion:_2,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Uc(e)){if(!e.method.endsWith(w2))return;const r=e.params,{topic:n,message:i,publishedAt:s}=r.data,o={topic:n,message:i,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Z2({type:"event",event:r.id},o)),this.events.emit(r.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else zo(e)&&this.events.emit(lr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(lr.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Mc(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(vn.payload,this.onPayloadHandler),this.provider.off(vn.connect,this.onConnectHandler),this.provider.off(vn.disconnect,this.onDisconnectHandler),this.provider.off(vn.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(lr.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let e=await Ah();uw(async r=>{this.initialized&&e!==r&&(e=r,r?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(n=>this.logger.error(n))))})}onProviderDisconnect(){this.events.emit(lr.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},ye.toMiliseconds(b2)))}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var Q2=Object.defineProperty,gf=Object.getOwnPropertySymbols,Y2=Object.prototype.hasOwnProperty,J2=Object.prototype.propertyIsEnumerable,mf=(t,e,r)=>e in t?Q2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yf=(t,e)=>{for(var r in e||(e={}))Y2.call(e,r)&&mf(t,r,e[r]);if(gf)for(var r of gf(e))J2.call(e,r)&&mf(t,r,e[r]);return t};let Ko=class extends mm{constructor(e,r,n,i=Pn,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=S2,this.cached=[],this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!wr(o)?this.map.set(this.getKey(o),o):Bv(o)?this.map.set(o.id,o):qv(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>kw(a[c],o[c]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=yf(yf({},this.getData(o)),a);this.map.set(o,c),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),await this.persist())},this.logger=at.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return at.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}},X2=class{constructor(e,r){this.core=e,this.logger=r,this.name=I2,this.version=A2,this.events=new Ya,this.initialized=!1,this.storagePrefix=Pn,this.ignoredPayloadTypes=[ii],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=Ac(),i=await this.core.crypto.setSymKey(n),s=Hr(ye.FIVE_MINUTES),o={protocol:af},a={topic:i,expiry:s,relay:o,active:!1},c=Rv({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:o});return await this.pairings.set(i,a),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:c}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:s,relay:o}=Iv(n.uri);if(this.pairings.keys.includes(i))throw new Error(`Pairing already exists: ${i}`);if(this.core.crypto.hasKeys(i))throw new Error(`Keychain already exists: ${i}`);const a=Hr(ye.FIVE_MINUTES),c={topic:i,relay:o,expiry:a,active:!1};return await this.pairings.set(i,c),await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:o}),this.core.expirer.set(i,a),n.activatePairing&&await this.activate({topic:i}),c},this.activate=async({topic:n})=>{this.isInitialized();const i=Hr(ye.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Pi();this.events.once(Ht("pairing_ping",s),({error:u})=>{u?c(u):a()}),await o()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Xt("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{const o=Cs(i,s),a=await this.core.crypto.encode(n,o),c=Ds[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id},this.sendResult=async(n,i,s)=>{const o=Mc(n,s),a=await this.core.crypto.encode(i,o),c=await this.core.history.get(i,n),u=Ds[c.request.method].res;await this.core.relayer.publish(i,a,u),await this.core.history.resolve(o)},this.sendError=async(n,i,s)=>{const o=kc(n,s),a=await this.core.crypto.encode(i,o),c=await this.core.history.get(i,n),u=Ds[c.request.method]?Ds[c.request.method].res:Ds.unregistered_method.res;await this.core.relayer.publish(i,a,u),await this.core.history.resolve(o)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Xt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>Rn(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit("pairing_ping",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{yn(i)?this.events.emit(Ht("pairing_ping",s),{}):Kr(i)&&this.events.emit(Ht("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit("pairing_delete",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=Xt("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(Xt("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!Or(n)){const{message:i}=de("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!jv(n.uri)){const{message:i}=de("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!Or(n)){const{message:s}=de("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!Or(n)){const{message:s}=de("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!er(n,!1)){const{message:i}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(Rn(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=de("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=at.generateChildLogger(r,this.name),this.pairings=new Ko(this.core,this.logger,this.name,this.storagePrefix)}get context(){return at.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(lr.message,async e=>{const{topic:r,message:n}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);try{Uc(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):zo(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id))}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(Fr.expired,async e=>{const{topic:r}=bh(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}},e_=class extends hm{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new Ur.EventEmitter,this.name=T2,this.version=R2,this.cached=[],this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:Hr(ye.THIRTY_DAYS)};this.records.set(o.id,o),this.events.emit(an.created,o)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Kr(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(an.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(an.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=at.generateChildLogger(r,this.name)}get context(){return at.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:Cs(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(an.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(an.created,e=>{const r=an.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(an.updated,e=>{const r=an.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(an.deleted,e=>{const r=an.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(Di.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{ye.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}},t_=class extends vm{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new Ur.EventEmitter,this.name=P2,this.version=N2,this.cached=[],this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(Fr.created,{target:s,expiration:o})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Fr.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=at.generateChildLogger(r,this.name)}get context(){return at.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return wv(e);if(typeof e=="number")return bv(e);const{message:r}=de("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Fr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;ye.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Fr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Di.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Fr.created,e=>{const r=Fr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Fr.expired,e=>{const r=Fr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Fr.deleted,e=>{const r=Fr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}},r_=class extends wm{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=zc,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async n=>{if(this.verifyDisabled||Uo()||!ws())return;const i=(n==null?void 0:n.verifyUrl)||Ho;this.verifyUrl!==i&&this.removeIframe(),this.verifyUrl=i;try{await this.createIframe()}catch(s){this.logger.warn(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.warn(s)}if(!this.initialized){this.removeIframe(),this.verifyUrl=uf;try{await this.createIframe()}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s),this.verifyDisabled=!0}}},this.register=async n=>{this.initialized?this.sendPost(n.attestationId):(this.addToQueue(n.attestationId),await this.init())},this.resolve=async n=>{if(this.isDevEnv)return"";const i=(n==null?void 0:n.verifyUrl)||Ho;let s="";try{s=await this.fetchAttestation(n.attestationId,i)}catch(o){this.logger.warn(`failed to resolve attestation: ${n.attestationId} from url: ${i}`),this.logger.warn(o),s=await this.fetchAttestation(n.attestationId,uf)}return s},this.fetchAttestation=async(n,i)=>{var s;this.logger.info(`resolving attestation: ${n} from url: ${i}`);const o=this.startAbortTimer(ye.ONE_SECOND*2),a=await fetch(`${i}/attestation/${n}`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?(s=await a.json())==null?void 0:s.origin:""},this.addToQueue=n=>{this.queue.push(n)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(n=>this.sendPost(n)),this.queue=[])},this.sendPost=n=>{var i;try{if(!this.iframe)return;(i=this.iframe.contentWindow)==null||i.postMessage(n,"*"),this.logger.info(`postMessage sent: ${n} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let n;const i=s=>{s.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",i),n())};await Promise.race([new Promise(s=>{if(document.getElementById(zc))return s();window.addEventListener("message",i);const o=document.createElement("iframe");o.id=zc,o.src=`${this.verifyUrl}/${this.projectId}`,o.style.display="none",document.body.append(o),this.iframe=o,n=s}),new Promise((s,o)=>setTimeout(()=>{window.removeEventListener("message",i),o("verify iframe load timeout")},ye.toMiliseconds(ye.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=at.generateChildLogger(r,this.name),this.verifyUrl=Ho,this.abortController=new AbortController,this.isDevEnv=Tc()&&process.env.IS_VITEST}get context(){return at.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ye.toMiliseconds(e))}};var n_=Object.defineProperty,vf=Object.getOwnPropertySymbols,i_=Object.prototype.hasOwnProperty,s_=Object.prototype.propertyIsEnumerable,wf=(t,e,r)=>e in t?n_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bf=(t,e)=>{for(var r in e||(e={}))i_.call(e,r)&&wf(t,r,e[r]);if(vf)for(var r of vf(e))s_.call(e,r)&&wf(t,r,e[r]);return t};const o_=class Q0 extends dm{constructor(e){super(e),this.protocol=sf,this.version=o2,this.name=qc,this.events=new Ur.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||cf;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:at.pino(at.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||a2.logger}));this.logger=at.generateChildLogger(r,this.name),this.heartbeat=new Di.HeartBeat,this.crypto=new L2(this,this.logger,e==null?void 0:e.keychain),this.history=new e_(this,this.logger),this.expirer=new t_(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Tg(bf(bf({},c2),e==null?void 0:e.storageOptions)),this.relayer=new G2({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new X2(this,this.logger),this.verify=new r_(this.projectId||"",this.logger)}static async init(e){const r=new Q0(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(x2,n),r}get context(){return at.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}},_f="wc",Ef=2,Sf="client",Vc=`${_f}@${Ef}:${Sf}:`,Hc={name:Sf,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},xf="WALLETCONNECT_DEEPLINK_CHOICE",a_="proposal",c_="Proposal expired",l_="session",Zo=ye.SEVEN_DAYS,u_="engine",As={wc_sessionPropose:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1115}}},Kc={min:ye.FIVE_MINUTES,max:ye.SEVEN_DAYS},wn={idle:"IDLE",active:"ACTIVE"},d_="request",h_=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var f_=Object.defineProperty,p_=Object.defineProperties,g_=Object.getOwnPropertyDescriptors,Cf=Object.getOwnPropertySymbols,m_=Object.prototype.hasOwnProperty,y_=Object.prototype.propertyIsEnumerable,Of=(t,e,r)=>e in t?f_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Dr=(t,e)=>{for(var r in e||(e={}))m_.call(e,r)&&Of(t,r,e[r]);if(Cf)for(var r of Cf(e))y_.call(e,r)&&Of(t,r,e[r]);return t},Ts=(t,e)=>p_(t,g_(e));class v_ extends _m{constructor(e){super(e),this.name=u_,this.events=new Ya,this.initialized=!1,this.ignoredPayloadTypes=[ii],this.requestQueue={state:wn.idle,queue:[]},this.sessionRequestQueue={state:wn.idle,queue:[]},this.requestQueueDelay=ye.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(As)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ye.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const n=Ts(Dr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:c}=n;let u=i,d,f=!1;if(u&&(f=this.client.core.pairing.pairings.get(u).active),!u||!f){const{topic:C,uri:v}=await this.client.core.pairing.create();u=C,d=v}const p=await this.client.core.crypto.generateKeyPair(),y=Dr({requiredNamespaces:s,optionalNamespaces:o,relays:c??[{protocol:af}],proposer:{publicKey:p,metadata:this.client.metadata}},a&&{sessionProperties:a}),{reject:w,resolve:S,done:E}=Pi(ye.FIVE_MINUTES,c_);if(this.events.once(Ht("session_connect"),async({error:C,session:v})=>{if(C)w(C);else if(v){v.self.publicKey=p;const _=Ts(Dr({},v),{requiredNamespaces:v.requiredNamespaces,optionalNamespaces:v.optionalNamespaces});await this.client.session.set(v.topic,_),await this.setExpiry(v.topic,v.expiry),u&&await this.client.core.pairing.updateMetadata({topic:u,metadata:v.peer.metadata}),S(_)}}),!u){const{message:C}=de("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(C)}const D=await this.sendRequest({topic:u,method:"wc_sessionPropose",params:y}),b=Hr(ye.FIVE_MINUTES);return await this.setProposal(D,Dr({id:D,expiry:b},y)),{uri:d,approval:E}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:i,namespaces:s,sessionProperties:o}=r,a=this.client.proposal.get(n);let{pairingTopic:c,proposer:u,requiredNamespaces:d,optionalNamespaces:f}=a;c=c||"",Ss(d)||(d=Lv(s,"approve()"));const p=await this.client.core.crypto.generateKeyPair(),y=u.publicKey,w=await this.client.core.crypto.generateSharedKey(p,y);c&&n&&(await this.client.core.pairing.updateMetadata({topic:c,metadata:u.metadata}),await this.sendResult({id:n,topic:c,result:{relay:{protocol:i??"irn"},responderPublicKey:p}}),await this.client.proposal.delete(n,Xt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:c}));const S=Dr({relay:{protocol:i??"irn"},namespaces:s,requiredNamespaces:d,optionalNamespaces:f,pairingTopic:c,controller:{publicKey:p,metadata:this.client.metadata},expiry:Hr(Zo)},o&&{sessionProperties:o});await this.client.core.relayer.subscribe(w),await this.sendRequest({topic:w,method:"wc_sessionSettle",params:S,throwOnFailedPublish:!0});const E=Ts(Dr({},S),{topic:w,pairingTopic:c,acknowledged:!1,self:S.controller,peer:{publicKey:u.publicKey,metadata:u.metadata},controller:p});return await this.client.session.set(w,E),await this.setExpiry(w,Hr(Zo)),{topic:w,acknowledged:()=>new Promise(D=>setTimeout(()=>D(this.client.session.get(w)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:n,reason:i}=r,{pairingTopic:s}=this.client.proposal.get(n);s&&(await this.sendError(n,s,i),await this.client.proposal.delete(n,Xt("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:i}=r,s=await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i}}),{done:o,resolve:a,reject:c}=Pi();return this.events.once(Ht("session_update",s),({error:u})=>{u?c(u):a()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:o}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,i=await this.sendRequest({topic:n,method:"wc_sessionExtend",params:{}}),{done:s,resolve:o,reject:a}=Pi();return this.events.once(Ht("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,Hr(Zo)),{acknowledged:s}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:i,topic:s,expiry:o}=r,a=Lc(),{done:c,resolve:u,reject:d}=Pi(o);return this.events.once(Ht("session_request",a),({error:f,result:p})=>{f?d(f):u(p)}),await Promise.all([new Promise(async f=>{await this.sendRequest({clientRpcId:a,topic:s,method:"wc_sessionRequest",params:{request:i,chainId:n},expiry:o,throwOnFailedPublish:!0}).catch(p=>d(p)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:a}),f()}),new Promise(async f=>{const p=await this.client.core.storage.getItem(xf);_v({id:a,topic:s,wcDeepLink:p}),f()}),c()]).then(f=>f[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i;yn(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0}):Kr(i)&&await this.sendError(s,n,i.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=await this.sendRequest({topic:n,method:"wc_sessionPing",params:{}}),{done:s,resolve:o,reject:a}=Pi();this.events.once(Ht("session_ping",i),({error:c})=>{c?a(c):o()}),await s()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r;await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;this.client.session.keys.includes(n)?(await this.sendRequest({topic:n,method:"wc_sessionDelete",params:Xt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>Uv(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(r,n)=>{const{self:i}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,Xt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(i.publicKey)&&await this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r),this.client.core.storage.removeItem(xf).catch(s=>this.client.logger.warn(s))},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,Xt("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=wn.idle)},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{const n=As.wc_sessionRequest.req.ttl,{id:i,topic:s,params:o}=r;await this.client.pendingRequest.set(i,{id:i,topic:s,params:o}),n&&this.client.core.expirer.set(i,Hr(n))},this.sendRequest=async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u}=r,d=Cs(i,s,c);if(ws()&&h_.includes(i)){const y=Ri(JSON.stringify(d));this.client.core.verify.register({attestationId:y})}const f=await this.client.core.crypto.encode(n,d),p=As[i].req;return o&&(p.ttl=o),a&&(p.id=a),this.client.core.history.set(n,d),u?(p.internal=Ts(Dr({},p.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,f,p)):this.client.core.relayer.publish(n,f,p).catch(y=>this.client.logger.error(y)),d.id},this.sendResult=async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o}=r,a=Mc(n,s),c=await this.client.core.crypto.encode(i,a),u=await this.client.core.history.get(i,n),d=As[u.request.method].res;o?(d.internal=Ts(Dr({},d.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,c,d)):this.client.core.relayer.publish(i,c,d).catch(f=>this.client.logger.error(f)),await this.client.core.history.resolve(a)},this.sendError=async(r,n,i)=>{const s=kc(r,i),o=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,r),c=As[a.request.method].res;this.client.core.relayer.publish(n,o,c),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{Rn(i.expiry)&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Rn(i.expiry)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession(i)),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===wn.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=wn.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(n=>setTimeout(n,300))}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=wn.idle},this.processRequest=r=>{const{topic:n,payload:i}=r,s=i.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i}=r,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:i}=de("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.onSessionProposeRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidConnect(Dr({},n.params));const o=Hr(ye.FIVE_MINUTES),a=Dr({id:s,pairingTopic:r,expiry:o},i);await this.setProposal(s,a);const c=Ri(JSON.stringify(n)),u=await this.getVerifyContext(c,a.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:a,verifyContext:u})}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.onSessionProposeResponse=async(r,n)=>{const{id:i}=n;if(yn(n)){const{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const o=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const a=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});const c=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:c});const u=await this.client.core.crypto.generateSharedKey(a,c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:u});const d=await this.client.core.relayer.subscribe(u);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else Kr(n)&&(await this.client.proposal.delete(i,Xt("USER_DISCONNECTED")),this.events.emit(Ht("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:u,requiredNamespaces:d,optionalNamespaces:f,sessionProperties:p,pairingTopic:y}=n.params,w=Dr({topic:r,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:y,requiredNamespaces:d,optionalNamespaces:f,controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},p&&{sessionProperties:p});await this.sendResult({id:n.id,topic:r,result:!0}),this.events.emit(Ht("session_connect"),{session:w}),this.cleanupDuplicatePairings(w)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;yn(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Ht("session_approve",i),{})):Kr(n)&&(await this.client.session.delete(r,Xt("USER_DISCONNECTED")),this.events.emit(Ht("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=qo.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidUpdate(Dr({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0}),this.client.events.emit("session_update",{id:s,topic:r,params:i}),qo.set(o,s)}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.isRequestOutOfSync=(r,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n;yn(n)?this.events.emit(Ht("session_update",i),{}):Kr(n)&&this.events.emit(Ht("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Hr(Zo)),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n;yn(n)?this.events.emit(Ht("session_extend",i),{}):Kr(n)&&this.events.emit(Ht("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n;setTimeout(()=>{yn(n)?this.events.emit(Ht("session_ping",i),{}):Kr(n)&&this.events.emit(Ht("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(lr.publish,async()=>{s(await this.deleteSession(r))})}),this.sendResult({id:i,topic:r,result:!0})]),this.client.events.emit("session_delete",{id:i,topic:r})}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidRequest(Dr({topic:r},s)),await this.setPendingSessionRequest({id:i,topic:r,params:s}),this.addSessionRequestToSessionRequestQueue({id:i,topic:r,params:s}),await this.processSessionRequestQueue()}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n;yn(n)?this.events.emit(Ht("session_request",i),{result:n.result}):Kr(n)&&this.events.emit(Ht("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=qo.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(Dr({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),qo.set(o,i)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=wn.idle,this.processSessionRequestQueue()},ye.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=async()=>{if(this.sessionRequestQueue.state===wn.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{const{id:n,topic:i,params:s}=r,o=Ri(JSON.stringify(Cs("wc_sessionRequest",s,n))),a=this.client.session.get(i),c=await this.getVerifyContext(o,a.peer.metadata);this.sessionRequestQueue.state=wn.active,this.client.events.emit("session_request",{id:n,topic:i,params:s,verifyContext:c})}catch(n){this.client.logger.error(n)}},this.isValidConnect=async r=>{if(!Or(r)){const{message:c}=de("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(c)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(wr(n)||await this.isValidPairingTopic(n),!Qv(a,!0)){const{message:c}=de("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(c)}!wr(i)&&Ss(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!wr(s)&&Ss(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),wr(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=Gv(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!Or(r))throw new Error(de("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o}=r;await this.isValidProposalId(n);const a=this.client.proposal.get(n),c=Bo(i,"approve()");if(c)throw new Error(c.message);const u=Dh(a.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!er(s,!0)){const{message:d}=de("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}wr(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!Or(r)){const{message:s}=de("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(await this.isValidProposalId(n),!Jv(i)){const{message:s}=de("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!Or(r)){const{message:u}=de("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(u)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!Ch(n)){const{message:u}=de("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=zv(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Bo(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Rn(o)){const{message:u}=de("EXPIRED","onSessionSettleRequest()");throw new Error(u)}},this.isValidUpdate=async r=>{if(!Or(r)){const{message:c}=de("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=Bo(i,"update()");if(o)throw new Error(o.message);const a=Dh(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!Or(r)){const{message:i}=de("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!Or(r)){const{message:c}=de("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:i,chainId:s,expiry:o}=r;await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!Oh(a,s)){const{message:c}=de("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!Xv(i)){const{message:c}=de("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!rw(a,s,i.method)){const{message:c}=de("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!ow(o,Kc)){const{message:c}=de("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Kc.min} and ${Kc.max}`);throw new Error(c)}},this.isValidRespond=async r=>{if(!Or(r)){const{message:s}=de("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(s)}const{topic:n,response:i}=r;if(await this.isValidSessionTopic(n),!ew(i)){const{message:s}=de("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidPing=async r=>{if(!Or(r)){const{message:i}=de("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!Or(r)){const{message:a}=de("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!Oh(o,s)){const{message:a}=de("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!tw(i)){const{message:a}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!nw(o,s,i.name)){const{message:a}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!Or(r)){const{message:i}=de("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(r,n)=>{const i={verified:{verifyUrl:n.verifyUrl||Ho,validation:"UNKNOWN",origin:n.url||""}};try{const s=await this.client.core.verify.resolve({attestationId:r,verifyUrl:n.verifyUrl});s&&(i.verified.origin=s,i.verified.validation=s===new URL(n.url).origin?"VALID":"INVALID")}catch(s){this.client.logger.error(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!er(i,!1)){const{message:s}=de("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}}async isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(lr.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(r,n);try{Uc(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):zo(i)?(await this.client.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.client.core.history.delete(r,i.id)):this.onRelayEventUnknownPayload({topic:r,payload:i})}catch(s){this.client.logger.error(s)}})}registerExpirerEvents(){this.client.core.expirer.on(Fr.expired,async e=>{const{topic:r,id:n}=bh(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,de("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(e){if(!er(e,!1)){const{message:r}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Rn(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=de("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!er(e,!1)){const{message:r}=de("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=de("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Rn(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=de("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(er(e,!1)){const{message:r}=de("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=de("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!Yv(e)){const{message:r}=de("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=de("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Rn(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=de("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class w_ extends Ko{constructor(e,r){super(e,r,a_,Vc),this.core=e,this.logger=r}}class b_ extends Ko{constructor(e,r){super(e,r,l_,Vc),this.core=e,this.logger=r}}class __ extends Ko{constructor(e,r){super(e,r,d_,Vc,n=>n.id),this.core=e,this.logger=r}}let E_=class Y0 extends bm{constructor(e){super(e),this.protocol=_f,this.version=Ef,this.name=Hc.name,this.events=new Ur.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(e==null?void 0:e.name)||Hc.name,this.metadata=(e==null?void 0:e.metadata)||pv();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:at.pino(at.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Hc.logger}));this.core=(e==null?void 0:e.core)||new o_(e),this.logger=at.generateChildLogger(r,this.name),this.session=new b_(this.core,this.logger),this.proposal=new w_(this.core,this.logger),this.pendingRequest=new __(this.core,this.logger),this.engine=new v_(this)}static async init(e){const r=new Y0(e);return await r.initialize(),r}get context(){return at.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var S_=Object.defineProperty,x_=Object.defineProperties,C_=Object.getOwnPropertyDescriptors,Df=Object.getOwnPropertySymbols,O_=Object.prototype.hasOwnProperty,D_=Object.prototype.propertyIsEnumerable,If=(t,e,r)=>e in t?S_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,I_=(t,e)=>{for(var r in e||(e={}))O_.call(e,r)&&If(t,r,e[r]);if(Df)for(var r of Df(e))D_.call(e,r)&&If(t,r,e[r]);return t},A_=(t,e)=>x_(t,C_(e)),Zc=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},It=(t,e,r)=>(Zc(t,e,"read from private field"),r?r.call(t):e.get(t)),oi=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Go=(t,e,r,n)=>(Zc(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),ur=(t,e,r)=>(Zc(t,e,"access private method"),r),ai,$i,Rs,tr,Gc,Af,dr,br,Qc,Tf;let T_=class{constructor(e){oi(this,Gc),oi(this,dr),oi(this,Qc),oi(this,ai,void 0),oi(this,$i,void 0),oi(this,Rs,void 0),oi(this,tr,void 0),Go(this,ai,e),Go(this,$i,ur(this,Gc,Af).call(this)),ur(this,dr,br).call(this)}async connect(e){const{requiredNamespaces:r,optionalNamespaces:n}=e;return new Promise(async(i,s)=>{await ur(this,dr,br).call(this);const o=It(this,$i).subscribeModal(u=>{u.open||(o(),s(new Error("Modal closed")))}),{uri:a,approval:c}=await It(this,tr).connect(e);if(a){const u=new Set;r&&Object.values(r).forEach(({chains:d})=>{d&&d.forEach(f=>u.add(f))}),n&&Object.values(n).forEach(({chains:d})=>{d&&d.forEach(f=>u.add(f))}),await It(this,$i).openModal({uri:a,chains:Array.from(u)})}try{const u=await c();i(u)}catch(u){s(u)}finally{o(),It(this,$i).closeModal()}})}async disconnect(e){await ur(this,dr,br).call(this),await It(this,tr).disconnect(e)}async request(e){return await ur(this,dr,br).call(this),await It(this,tr).request(e)}async getSessions(){return await ur(this,dr,br).call(this),It(this,tr).session.getAll()}async getSession(){return await ur(this,dr,br).call(this),It(this,tr).session.getAll().at(-1)}async onSessionEvent(e){await ur(this,dr,br).call(this),It(this,tr).on("session_event",e)}async offSessionEvent(e){await ur(this,dr,br).call(this),It(this,tr).off("session_event",e)}async onSessionUpdate(e){await ur(this,dr,br).call(this),It(this,tr).on("session_update",e)}async offSessionUpdate(e){await ur(this,dr,br).call(this),It(this,tr).off("session_update",e)}async onSessionDelete(e){await ur(this,dr,br).call(this),It(this,tr).on("session_delete",e)}async offSessionDelete(e){await ur(this,dr,br).call(this),It(this,tr).off("session_delete",e)}async onSessionExpire(e){await ur(this,dr,br).call(this),It(this,tr).on("session_expire",e)}async offSessionExpire(e){await ur(this,dr,br).call(this),It(this,tr).off("session_expire",e)}};ai=new WeakMap,$i=new WeakMap,Rs=new WeakMap,tr=new WeakMap,Gc=new WeakSet,Af=function(){const{modalOptions:t,projectId:e}=It(this,ai);return new bg(A_(I_({},t),{projectId:e}))},dr=new WeakSet,br=async function(){return It(this,tr)?!0:(!It(this,Rs)&&typeof window<"u"&&Go(this,Rs,ur(this,Qc,Tf).call(this)),It(this,Rs))},Qc=new WeakSet,Tf=async function(){Go(this,tr,await E_.init({metadata:It(this,ai).metadata,projectId:It(this,ai).projectId,relayUrl:It(this,ai).relayUrl}));const t=await It(this,tr).core.crypto.getClientId();try{localStorage.setItem("WCM_WALLETCONNECT_CLIENT_ID",t)}catch{console.info("Unable to set client id")}};const Qo=["decrypt","disconnect","getSelectedAccount","getBalance","getRecords","requestCreateEvent","getEvent","getEvents","createSharedState","importSharedState","requestSignature"],Ps=["aleo:1"],Yo=["chainChanged","accountSelected","selectedAccountSynced","sharedAccountSynced"],Rf="f0aaeffe71b636da453fce042d79d723",Pf={standaloneChains:Ps,enableExplorer:!1,enableAccountView:!0,enableNetworkView:!0,enableStandaloneMode:!0,mobileWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"puzzleapp://",universal:""}}],desktopWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"",universal:"https://walletconnect.puzzle.online/"}}],walletImages:{puzzle:"https://i.imgur.com/p9tHaFC.png"}},R_={requiredNamespaces:{aleo:{methods:Qo,chains:Ps,events:Yo}}};var Nf={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var y=new i(d,f||c,p),w=r?r+u:u;return c._events[w]?c._events[w].fn?c._events[w]=[c._events[w],y]:c._events[w].push(y):(c._events[w]=y,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},a.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,y=f.length,w=new Array(y);p<y;p++)w[p]=f[p].fn;return w},a.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,d,f,p,y,w){var S=r?r+u:u;if(!this._events[S])return!1;var E=this._events[S],D=arguments.length,b,C;if(E.fn){switch(E.once&&this.removeListener(u,E.fn,void 0,!0),D){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,d),!0;case 3:return E.fn.call(E.context,d,f),!0;case 4:return E.fn.call(E.context,d,f,p),!0;case 5:return E.fn.call(E.context,d,f,p,y),!0;case 6:return E.fn.call(E.context,d,f,p,y,w),!0}for(C=1,b=new Array(D-1);C<D;C++)b[C-1]=arguments[C];E.fn.apply(E.context,b)}else{var v=E.length,_;for(C=0;C<v;C++)switch(E[C].once&&this.removeListener(u,E[C].fn,void 0,!0),D){case 1:E[C].fn.call(E[C].context);break;case 2:E[C].fn.call(E[C].context,d);break;case 3:E[C].fn.call(E[C].context,d,f);break;case 4:E[C].fn.call(E[C].context,d,f,p);break;default:if(!b)for(_=1,b=new Array(D-1);_<D;_++)b[_-1]=arguments[_];E[C].fn.apply(E[C].context,b)}}return!0},a.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},a.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},a.prototype.removeListener=function(u,d,f,p){var y=r?r+u:u;if(!this._events[y])return this;if(!d)return o(this,y),this;var w=this._events[y];if(w.fn)w.fn===d&&(!p||w.once)&&(!f||w.context===f)&&o(this,y);else{for(var S=0,E=[],D=w.length;S<D;S++)(w[S].fn!==d||p&&!w[S].once||f&&w[S].context!==f)&&E.push(w[S]);E.length?this._events[y]=E.length===1?E[0]:E:o(this,y)}return this},a.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(Nf);var P_=Nf.exports;const N_=cs(P_),ci=new N_;let Ns;function $f(t){Ns=new T_({projectId:Rf,metadata:{name:t.dAppName,description:t.dAppDescription,url:t.dAppUrl,icons:[t.dAppIconURL]},modalOptions:{...Pf}}),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")}async function St(){return new Promise(t=>{if(Ns)t(Ns);else{const e=setInterval(()=>{Ns&&(clearInterval(e),t(Ns))},200)}window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")})}var ct;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=n,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(ct||(ct={}));var Yc;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Yc||(Yc={}));const pe=ct.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Nn=t=>{switch(typeof t){case"undefined":return pe.undefined;case"string":return pe.string;case"number":return isNaN(t)?pe.nan:pe.number;case"boolean":return pe.boolean;case"function":return pe.function;case"bigint":return pe.bigint;case"symbol":return pe.symbol;case"object":return Array.isArray(t)?pe.array:t===null?pe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?pe.promise:typeof Map<"u"&&t instanceof Map?pe.map:typeof Set<"u"&&t instanceof Set?pe.set:typeof Date<"u"&&t instanceof Date?pe.date:pe.object;default:return pe.unknown}},ae=ct.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),$_=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Zr extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(s){return s.message},n={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,ct.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Zr.create=t=>new Zr(t);const $s=(t,e)=>{let r;switch(t.code){case ae.invalid_type:t.received===pe.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case ae.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,ct.jsonStringifyReplacer)}`;break;case ae.unrecognized_keys:r=`Unrecognized key(s) in object: ${ct.joinValues(t.keys,", ")}`;break;case ae.invalid_union:r="Invalid input";break;case ae.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ct.joinValues(t.options)}`;break;case ae.invalid_enum_value:r=`Invalid enum value. Expected ${ct.joinValues(t.options)}, received '${t.received}'`;break;case ae.invalid_arguments:r="Invalid function arguments";break;case ae.invalid_return_type:r="Invalid function return type";break;case ae.invalid_date:r="Invalid date";break;case ae.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:ct.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case ae.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case ae.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case ae.custom:r="Invalid input";break;case ae.invalid_intersection_types:r="Intersection results could not be merged";break;case ae.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case ae.not_finite:r="Number must be finite";break;default:r=e.defaultError,ct.assertNever(t)}return{message:r}};let Lf=$s;function L_(t){Lf=t}function Jo(){return Lf}const Xo=t=>{const{data:e,path:r,errorMaps:n,issueData:i}=t,s=[...r,...i.path||[]],o={...i,path:s};let a="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...i,path:s,message:i.message||a}},M_=[];function ge(t,e){const r=Xo({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Jo(),$s].filter(n=>!!n)});t.common.issues.push(r)}class hr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if(i.status==="aborted")return Re;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const i of r)n.push({key:await i.key,value:await i.value});return hr.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Re;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),(typeof o.value<"u"||i.alwaysSet)&&(n[s.value]=o.value)}return{status:e.value,value:n}}}const Re=Object.freeze({status:"aborted"}),Mf=t=>({status:"dirty",value:t}),_r=t=>({status:"valid",value:t}),Jc=t=>t.status==="aborted",Xc=t=>t.status==="dirty",ea=t=>t.status==="valid",ta=t=>typeof Promise<"u"&&t instanceof Promise;var be;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(be||(be={}));class cn{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const kf=(t,e)=>{if(ea(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Zr(t.common.issues);return this._error=r,this._error}}};function Fe(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:i}}class Ze{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Nn(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Nn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new hr,ctx:{common:e.parent.common,data:e.data,parsedType:Nn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(ta(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Nn(e)},s=this._parseSync({data:e,path:i.path,parent:i});return kf(i,s)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Nn(e)},i=this._parse({data:e,path:n.path,parent:n}),s=await(ta(i)?i:Promise.resolve(i));return kf(n,s)}refine(e,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:ae.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Yr({schema:this,typeName:Oe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return _n.create(this,this._def)}nullable(){return hi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Qr.create(this,this._def)}promise(){return Ui.create(this,this._def)}or(e){return Us.create([this,e],this._def)}and(e){return Fs.create(this,e,this._def)}transform(e){return new Yr({...Fe(this._def),schema:this,typeName:Oe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new Ws({...Fe(this._def),innerType:this,defaultValue:r,typeName:Oe.ZodDefault})}brand(){return new Ff({typeName:Oe.ZodBranded,type:this,...Fe(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new aa({...Fe(this._def),innerType:this,catchValue:r,typeName:Oe.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Vs.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const k_=/^c[^\s-]{8,}$/i,U_=/^[a-z][a-z0-9]*$/,F_=/[0-9A-HJKMNP-TV-Z]{26}/,j_=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,B_=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,q_=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,z_=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,W_=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,V_=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function H_(t,e){return!!((e==="v4"||!e)&&z_.test(t)||(e==="v6"||!e)&&W_.test(t))}class Gr extends Ze{constructor(){super(...arguments),this._regex=(e,r,n)=>this.refinement(i=>e.test(i),{validation:r,code:ae.invalid_string,...be.errToObj(n)}),this.nonempty=e=>this.min(1,be.errToObj(e)),this.trim=()=>new Gr({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Gr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Gr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==pe.string){const s=this._getOrReturnCtx(e);return ge(s,{code:ae.invalid_type,expected:pe.string,received:s.parsedType}),Re}const n=new hr;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?ge(i,{code:ae.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&ge(i,{code:ae.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")B_.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"email",code:ae.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")q_.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"emoji",code:ae.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")j_.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"uuid",code:ae.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")k_.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"cuid",code:ae.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")U_.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"cuid2",code:ae.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")F_.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"ulid",code:ae.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ge(i,{validation:"url",code:ae.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"regex",code:ae.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?V_(s).test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="ip"?H_(e.data,s.version)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"ip",code:ae.invalid_string,message:s.message}),n.dirty()):ct.assertNever(s);return{status:n.value,value:e.data}}_addCheck(e){return new Gr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...be.errToObj(e)})}url(e){return this._addCheck({kind:"url",...be.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...be.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...be.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...be.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...be.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...be.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...be.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,...be.errToObj(e==null?void 0:e.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...be.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...be.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...be.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...be.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...be.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...be.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...be.errToObj(r)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Gr.create=t=>{var e;return new Gr({checks:[],typeName:Oe.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Fe(t)})};function K_(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class $n extends Ze{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==pe.number){const s=this._getOrReturnCtx(e);return ge(s,{code:ae.invalid_type,expected:pe.number,received:s.parsedType}),Re}let n;const i=new hr;for(const s of this._def.checks)s.kind==="int"?ct.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?K_(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.not_finite,message:s.message}),i.dirty()):ct.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,be.toString(r))}gt(e,r){return this.setLimit("min",e,!1,be.toString(r))}lte(e,r){return this.setLimit("max",e,!0,be.toString(r))}lt(e,r){return this.setLimit("max",e,!1,be.toString(r))}setLimit(e,r,n,i){return new $n({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:be.toString(i)}]})}_addCheck(e){return new $n({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:be.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:be.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:be.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:be.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:be.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:be.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:be.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:be.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:be.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ct.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}$n.create=t=>new $n({checks:[],typeName:Oe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Fe(t)});class Ln extends Ze{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==pe.bigint){const s=this._getOrReturnCtx(e);return ge(s,{code:ae.invalid_type,expected:pe.bigint,received:s.parsedType}),Re}let n;const i=new hr;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):ct.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,be.toString(r))}gt(e,r){return this.setLimit("min",e,!1,be.toString(r))}lte(e,r){return this.setLimit("max",e,!0,be.toString(r))}lt(e,r){return this.setLimit("max",e,!1,be.toString(r))}setLimit(e,r,n,i){return new Ln({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:be.toString(i)}]})}_addCheck(e){return new Ln({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:be.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:be.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:be.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:be.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:be.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Ln.create=t=>{var e;return new Ln({checks:[],typeName:Oe.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Fe(t)})};class Ls extends Ze{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==pe.boolean){const n=this._getOrReturnCtx(e);return ge(n,{code:ae.invalid_type,expected:pe.boolean,received:n.parsedType}),Re}return _r(e.data)}}Ls.create=t=>new Ls({typeName:Oe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Fe(t)});class li extends Ze{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==pe.date){const s=this._getOrReturnCtx(e);return ge(s,{code:ae.invalid_type,expected:pe.date,received:s.parsedType}),Re}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return ge(s,{code:ae.invalid_date}),Re}const n=new hr;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):ct.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new li({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:be.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:be.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}li.create=t=>new li({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Oe.ZodDate,...Fe(t)});class ra extends Ze{_parse(e){if(this._getType(e)!==pe.symbol){const n=this._getOrReturnCtx(e);return ge(n,{code:ae.invalid_type,expected:pe.symbol,received:n.parsedType}),Re}return _r(e.data)}}ra.create=t=>new ra({typeName:Oe.ZodSymbol,...Fe(t)});class Ms extends Ze{_parse(e){if(this._getType(e)!==pe.undefined){const n=this._getOrReturnCtx(e);return ge(n,{code:ae.invalid_type,expected:pe.undefined,received:n.parsedType}),Re}return _r(e.data)}}Ms.create=t=>new Ms({typeName:Oe.ZodUndefined,...Fe(t)});class ks extends Ze{_parse(e){if(this._getType(e)!==pe.null){const n=this._getOrReturnCtx(e);return ge(n,{code:ae.invalid_type,expected:pe.null,received:n.parsedType}),Re}return _r(e.data)}}ks.create=t=>new ks({typeName:Oe.ZodNull,...Fe(t)});class Li extends Ze{constructor(){super(...arguments),this._any=!0}_parse(e){return _r(e.data)}}Li.create=t=>new Li({typeName:Oe.ZodAny,...Fe(t)});class ui extends Ze{constructor(){super(...arguments),this._unknown=!0}_parse(e){return _r(e.data)}}ui.create=t=>new ui({typeName:Oe.ZodUnknown,...Fe(t)});class bn extends Ze{_parse(e){const r=this._getOrReturnCtx(e);return ge(r,{code:ae.invalid_type,expected:pe.never,received:r.parsedType}),Re}}bn.create=t=>new bn({typeName:Oe.ZodNever,...Fe(t)});class na extends Ze{_parse(e){if(this._getType(e)!==pe.undefined){const n=this._getOrReturnCtx(e);return ge(n,{code:ae.invalid_type,expected:pe.void,received:n.parsedType}),Re}return _r(e.data)}}na.create=t=>new na({typeName:Oe.ZodVoid,...Fe(t)});class Qr extends Ze{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==pe.array)return ge(r,{code:ae.invalid_type,expected:pe.array,received:r.parsedType}),Re;if(i.exactLength!==null){const o=r.data.length>i.exactLength.value,a=r.data.length<i.exactLength.value;(o||a)&&(ge(r,{code:o?ae.too_big:ae.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(ge(r,{code:ae.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(ge(r,{code:ae.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>i.type._parseAsync(new cn(r,o,r.path,a)))).then(o=>hr.mergeArray(n,o));const s=[...r.data].map((o,a)=>i.type._parseSync(new cn(r,o,r.path,a)));return hr.mergeArray(n,s)}get element(){return this._def.type}min(e,r){return new Qr({...this._def,minLength:{value:e,message:be.toString(r)}})}max(e,r){return new Qr({...this._def,maxLength:{value:e,message:be.toString(r)}})}length(e,r){return new Qr({...this._def,exactLength:{value:e,message:be.toString(r)}})}nonempty(e){return this.min(1,e)}}Qr.create=(t,e)=>new Qr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Oe.ZodArray,...Fe(e)});function Mi(t){if(t instanceof Lt){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=_n.create(Mi(n))}return new Lt({...t._def,shape:()=>e})}else return t instanceof Qr?new Qr({...t._def,type:Mi(t.element)}):t instanceof _n?_n.create(Mi(t.unwrap())):t instanceof hi?hi.create(Mi(t.unwrap())):t instanceof ln?ln.create(t.items.map(e=>Mi(e))):t}class Lt extends Ze{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=ct.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==pe.object){const u=this._getOrReturnCtx(e);return ge(u,{code:ae.invalid_type,expected:pe.object,received:u.parsedType}),Re}const{status:n,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof bn&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const d=s[u],f=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new cn(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof bn){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of a)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")a.length>0&&(ge(i,{code:ae.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of a){const f=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new cn(i,f,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key;u.push({key:f,value:await d.value,alwaysSet:d.alwaysSet})}return u}).then(u=>hr.mergeObjectSync(n,u)):hr.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return be.errToObj,new Lt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,s,o,a;const c=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=be.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Lt({...this._def,unknownKeys:"strip"})}passthrough(){return new Lt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Lt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Lt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Oe.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Lt({...this._def,catchall:e})}pick(e){const r={};return ct.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new Lt({...this._def,shape:()=>r})}omit(e){const r={};return ct.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new Lt({...this._def,shape:()=>r})}deepPartial(){return Mi(this)}partial(e){const r={};return ct.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new Lt({...this._def,shape:()=>r})}required(e){const r={};return ct.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof _n;)s=s._def.innerType;r[n]=s}}),new Lt({...this._def,shape:()=>r})}keyof(){return Uf(ct.objectKeys(this.shape))}}Lt.create=(t,e)=>new Lt({shape:()=>t,unknownKeys:"strip",catchall:bn.create(),typeName:Oe.ZodObject,...Fe(e)}),Lt.strictCreate=(t,e)=>new Lt({shape:()=>t,unknownKeys:"strict",catchall:bn.create(),typeName:Oe.ZodObject,...Fe(e)}),Lt.lazycreate=(t,e)=>new Lt({shape:t,unknownKeys:"strip",catchall:bn.create(),typeName:Oe.ZodObject,...Fe(e)});class Us extends Ze{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Zr(a.ctx.common.issues));return ge(r,{code:ae.invalid_union,unionErrors:o}),Re}if(r.common.async)return Promise.all(n.map(async s=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!s&&(s={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(c=>new Zr(c));return ge(r,{code:ae.invalid_union,unionErrors:a}),Re}}get options(){return this._def.options}}Us.create=(t,e)=>new Us({options:t,typeName:Oe.ZodUnion,...Fe(e)});const ia=t=>t instanceof Bs?ia(t.schema):t instanceof Yr?ia(t.innerType()):t instanceof qs?[t.value]:t instanceof Mn?t.options:t instanceof zs?Object.keys(t.enum):t instanceof Ws?ia(t._def.innerType):t instanceof Ms?[void 0]:t instanceof ks?[null]:null;class sa extends Ze{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==pe.object)return ge(r,{code:ae.invalid_type,expected:pe.object,received:r.parsedType}),Re;const n=this.discriminator,i=r.data[n],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(ge(r,{code:ae.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Re)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const i=new Map;for(const s of r){const o=ia(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new sa({typeName:Oe.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Fe(n)})}}function el(t,e){const r=Nn(t),n=Nn(e);if(t===e)return{valid:!0,data:t};if(r===pe.object&&n===pe.object){const i=ct.objectKeys(e),s=ct.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const c=el(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===pe.array&&n===pe.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],c=el(o,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return r===pe.date&&n===pe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Fs extends Ze{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=(s,o)=>{if(Jc(s)||Jc(o))return Re;const a=el(s.value,o.value);return a.valid?((Xc(s)||Xc(o))&&r.dirty(),{status:r.value,value:a.data}):(ge(n,{code:ae.invalid_intersection_types}),Re)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Fs.create=(t,e,r)=>new Fs({left:t,right:e,typeName:Oe.ZodIntersection,...Fe(r)});class ln extends Ze{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==pe.array)return ge(n,{code:ae.invalid_type,expected:pe.array,received:n.parsedType}),Re;if(n.data.length<this._def.items.length)return ge(n,{code:ae.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Re;!this._def.rest&&n.data.length>this._def.items.length&&(ge(n,{code:ae.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new cn(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(s).then(o=>hr.mergeArray(r,o)):hr.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new ln({...this._def,rest:e})}}ln.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ln({items:t,typeName:Oe.ZodTuple,rest:null,...Fe(e)})};class js extends Ze{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==pe.object)return ge(n,{code:ae.invalid_type,expected:pe.object,received:n.parsedType}),Re;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in n.data)i.push({key:s._parse(new cn(n,a,n.path,a)),value:o._parse(new cn(n,n.data[a],n.path,a))});return n.common.async?hr.mergeObjectAsync(r,i):hr.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Ze?new js({keyType:e,valueType:r,typeName:Oe.ZodRecord,...Fe(n)}):new js({keyType:Gr.create(),valueType:e,typeName:Oe.ZodRecord,...Fe(r)})}}class oa extends Ze{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==pe.map)return ge(n,{code:ae.invalid_type,expected:pe.map,received:n.parsedType}),Re;const i=this._def.keyType,s=this._def.valueType,o=[...n.data.entries()].map(([a,c],u)=>({key:i._parse(new cn(n,a,n.path,[u,"key"])),value:s._parse(new cn(n,c,n.path,[u,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Re;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),a.set(u.value,d.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Re;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),a.set(u.value,d.value)}return{status:r.value,value:a}}}}oa.create=(t,e,r)=>new oa({valueType:e,keyType:t,typeName:Oe.ZodMap,...Fe(r)});class di extends Ze{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==pe.set)return ge(n,{code:ae.invalid_type,expected:pe.set,received:n.parsedType}),Re;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(ge(n,{code:ae.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(ge(n,{code:ae.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const s=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return Re;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const a=[...n.data.values()].map((c,u)=>s._parse(new cn(n,c,n.path,u)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new di({...this._def,minSize:{value:e,message:be.toString(r)}})}max(e,r){return new di({...this._def,maxSize:{value:e,message:be.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}di.create=(t,e)=>new di({valueType:t,minSize:null,maxSize:null,typeName:Oe.ZodSet,...Fe(e)});class ki extends Ze{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==pe.function)return ge(r,{code:ae.invalid_type,expected:pe.function,received:r.parsedType}),Re;function n(a,c){return Xo({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Jo(),$s].filter(u=>!!u),issueData:{code:ae.invalid_arguments,argumentsError:c}})}function i(a,c){return Xo({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Jo(),$s].filter(u=>!!u),issueData:{code:ae.invalid_return_type,returnTypeError:c}})}const s={errorMap:r.common.contextualErrorMap},o=r.data;return this._def.returns instanceof Ui?_r(async(...a)=>{const c=new Zr([]),u=await this._def.args.parseAsync(a,s).catch(p=>{throw c.addIssue(n(a,p)),c}),d=await o(...u);return await this._def.returns._def.type.parseAsync(d,s).catch(p=>{throw c.addIssue(i(d,p)),c})}):_r((...a)=>{const c=this._def.args.safeParse(a,s);if(!c.success)throw new Zr([n(a,c.error)]);const u=o(...c.data),d=this._def.returns.safeParse(u,s);if(!d.success)throw new Zr([i(u,d.error)]);return d.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ki({...this._def,args:ln.create(e).rest(ui.create())})}returns(e){return new ki({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new ki({args:e||ln.create([]).rest(ui.create()),returns:r||ui.create(),typeName:Oe.ZodFunction,...Fe(n)})}}class Bs extends Ze{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Bs.create=(t,e)=>new Bs({getter:t,typeName:Oe.ZodLazy,...Fe(e)});class qs extends Ze{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return ge(r,{received:r.data,code:ae.invalid_literal,expected:this._def.value}),Re}return{status:"valid",value:e.data}}get value(){return this._def.value}}qs.create=(t,e)=>new qs({value:t,typeName:Oe.ZodLiteral,...Fe(e)});function Uf(t,e){return new Mn({values:t,typeName:Oe.ZodEnum,...Fe(e)})}class Mn extends Ze{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return ge(r,{expected:ct.joinValues(n),received:r.parsedType,code:ae.invalid_type}),Re}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return ge(r,{received:r.data,code:ae.invalid_enum_value,options:n}),Re}return _r(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return Mn.create(e)}exclude(e){return Mn.create(this.options.filter(r=>!e.includes(r)))}}Mn.create=Uf;class zs extends Ze{_parse(e){const r=ct.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==pe.string&&n.parsedType!==pe.number){const i=ct.objectValues(r);return ge(n,{expected:ct.joinValues(i),received:n.parsedType,code:ae.invalid_type}),Re}if(r.indexOf(e.data)===-1){const i=ct.objectValues(r);return ge(n,{received:n.data,code:ae.invalid_enum_value,options:i}),Re}return _r(e.data)}get enum(){return this._def.values}}zs.create=(t,e)=>new zs({values:t,typeName:Oe.ZodNativeEnum,...Fe(e)});class Ui extends Ze{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==pe.promise&&r.common.async===!1)return ge(r,{code:ae.invalid_type,expected:pe.promise,received:r.parsedType}),Re;const n=r.parsedType===pe.promise?r.data:Promise.resolve(r.data);return _r(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Ui.create=(t,e)=>new Ui({type:t,typeName:Oe.ZodPromise,...Fe(e)});class Yr extends Ze{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Oe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null;if(i.type==="preprocess"){const o=i.transform(n.data);return n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}const s={addIssue:o=>{ge(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="refinement"){const o=a=>{const c=i.refinement(a,s);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Re:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?Re:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(i.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ea(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>ea(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:r.value,value:a})):o);ct.assertNever(i)}}Yr.create=(t,e,r)=>new Yr({schema:t,typeName:Oe.ZodEffects,effect:e,...Fe(r)}),Yr.createWithPreprocess=(t,e,r)=>new Yr({schema:e,effect:{type:"preprocess",transform:t},typeName:Oe.ZodEffects,...Fe(r)});class _n extends Ze{_parse(e){return this._getType(e)===pe.undefined?_r(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}_n.create=(t,e)=>new _n({innerType:t,typeName:Oe.ZodOptional,...Fe(e)});class hi extends Ze{_parse(e){return this._getType(e)===pe.null?_r(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}hi.create=(t,e)=>new hi({innerType:t,typeName:Oe.ZodNullable,...Fe(e)});class Ws extends Ze{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===pe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Ws.create=(t,e)=>new Ws({innerType:t,typeName:Oe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Fe(e)});class aa extends Ze{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return ta(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Zr(n.common.issues)}})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Zr(n.common.issues)}})}}removeCatch(){return this._def.innerType}}aa.create=(t,e)=>new aa({innerType:t,typeName:Oe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Fe(e)});class ca extends Ze{_parse(e){if(this._getType(e)!==pe.nan){const n=this._getOrReturnCtx(e);return ge(n,{code:ae.invalid_type,expected:pe.nan,received:n.parsedType}),Re}return{status:"valid",value:e.data}}}ca.create=t=>new ca({typeName:Oe.ZodNaN,...Fe(t)});const Z_=Symbol("zod_brand");class Ff extends Ze{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Vs extends Ze{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Re:s.status==="dirty"?(r.dirty(),Mf(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Re:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new Vs({in:e,out:r,typeName:Oe.ZodPipeline})}}const jf=(t,e={},r)=>t?Li.create().superRefine((n,i)=>{var s,o;if(!t(n)){const a=typeof e=="function"?e(n):e,c=(o=(s=a.fatal)!==null&&s!==void 0?s:r)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...u,fatal:c})}}):Li.create(),G_={object:Lt.lazycreate};var Oe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(Oe||(Oe={}));const Q_=(t,e={message:`Input not instance of ${t.name}`})=>jf(r=>r instanceof t,e),Bf=Gr.create,qf=$n.create,Y_=ca.create,J_=Ln.create,zf=Ls.create,X_=li.create,e3=ra.create,t3=Ms.create,r3=ks.create,n3=Li.create,i3=ui.create,s3=bn.create,o3=na.create,a3=Qr.create,c3=Lt.create,l3=Lt.strictCreate,u3=Us.create,d3=sa.create,h3=Fs.create,f3=ln.create,p3=js.create,g3=oa.create,m3=di.create,y3=ki.create,v3=Bs.create,w3=qs.create,b3=Mn.create,_3=zs.create,E3=Ui.create,Wf=Yr.create,S3=_n.create,x3=hi.create,C3=Yr.createWithPreprocess,O3=Vs.create;var Jr=Object.freeze({__proto__:null,defaultErrorMap:$s,setErrorMap:L_,getErrorMap:Jo,makeIssue:Xo,EMPTY_PATH:M_,addIssueToContext:ge,ParseStatus:hr,INVALID:Re,DIRTY:Mf,OK:_r,isAborted:Jc,isDirty:Xc,isValid:ea,isAsync:ta,get util(){return ct},get objectUtil(){return Yc},ZodParsedType:pe,getParsedType:Nn,ZodType:Ze,ZodString:Gr,ZodNumber:$n,ZodBigInt:Ln,ZodBoolean:Ls,ZodDate:li,ZodSymbol:ra,ZodUndefined:Ms,ZodNull:ks,ZodAny:Li,ZodUnknown:ui,ZodNever:bn,ZodVoid:na,ZodArray:Qr,ZodObject:Lt,ZodUnion:Us,ZodDiscriminatedUnion:sa,ZodIntersection:Fs,ZodTuple:ln,ZodRecord:js,ZodMap:oa,ZodSet:di,ZodFunction:ki,ZodLazy:Bs,ZodLiteral:qs,ZodEnum:Mn,ZodNativeEnum:zs,ZodPromise:Ui,ZodEffects:Yr,ZodTransformer:Yr,ZodOptional:_n,ZodNullable:hi,ZodDefault:Ws,ZodCatch:aa,ZodNaN:ca,BRAND:Z_,ZodBranded:Ff,ZodPipeline:Vs,custom:jf,Schema:Ze,ZodSchema:Ze,late:G_,get ZodFirstPartyTypeKind(){return Oe},coerce:{string:t=>Gr.create({...t,coerce:!0}),number:t=>$n.create({...t,coerce:!0}),boolean:t=>Ls.create({...t,coerce:!0}),bigint:t=>Ln.create({...t,coerce:!0}),date:t=>li.create({...t,coerce:!0})},any:n3,array:a3,bigint:J_,boolean:zf,date:X_,discriminatedUnion:d3,effect:Wf,enum:b3,function:y3,instanceof:Q_,intersection:h3,lazy:v3,literal:w3,map:g3,nan:Y_,nativeEnum:_3,never:s3,null:r3,nullable:x3,number:qf,object:c3,oboolean:()=>zf().optional(),onumber:()=>qf().optional(),optional:S3,ostring:()=>Bf().optional(),pipeline:O3,preprocess:C3,promise:E3,record:p3,set:m3,strictObject:l3,string:Bf,symbol:e3,transformer:Wf,tuple:f3,undefined:t3,union:u3,unknown:i3,void:o3,NEVER:Re,ZodIssueCode:ae,quotelessJson:$_,ZodError:Zr});const Vf=/^aleo1.{58}$/i,Hf=/^AViewKey1.{44}$/i,Kf=/^APrivateKey1.{47}$/i,Zf=/^at1.{60}$/i,Gf=/^\d+field$/,Qf=/^\d+u32$/,Yf=/^\d+u64$/,D3=Jr.string().regex(Vf),I3=Jr.string().regex(Hf),A3=Jr.string().regex(Kf),T3=Jr.string().regex(Zf),R3=Jr.string().regex(Gf),P3=Jr.string().regex(Qf),N3=Jr.string().regex(Yf);J.EventType=void 0,function(t){t.Deploy="Deploy",t.Execute="Execute",t.Send="Send",t.Receive="Receive",t.Join="Join",t.Split="Split",t.Shield="Shield",t.Unshield="Unshield"}(J.EventType||(J.EventType={})),J.EventStatus=void 0,function(t){t.Creating="Creating",t.Pending="Pending",t.Settled="Settled",t.Failed="Failed"}(J.EventStatus||(J.EventStatus={})),J.Visibility=void 0,function(t){t.Private="Private",t.Public="Public"}(J.Visibility||(J.Visibility={})),J.Network=void 0,function(t){t.AleoTestnet="AleoTestnet",t.AleoMainnet="AleoMainnet"}(J.Network||(J.Network={})),J.AssetType=void 0,function(t){t[t.ALEO=0]="ALEO"}(J.AssetType||(J.AssetType={}));const $3=Jr.nativeEnum(J.EventType),L3=Jr.nativeEnum(J.EventStatus),M3=Jr.nativeEnum(J.Network),k3=Jr.nativeEnum(J.Visibility);let U3=class extends Pr{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},F3=class{constructor(e,r,n){this.core=e,this.logger=r}},j3=class extends Pr{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},B3=class{constructor(e,r){this.logger=e,this.core=r}},q3=class extends Pr{constructor(e,r){super(),this.relayer=e,this.logger=r}},z3=class extends Pr{constructor(e){super()}},W3=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},V3=class{constructor(){this.map=new Map}},H3=class extends Pr{constructor(e,r){super(),this.relayer=e,this.logger=r}},K3=class{constructor(e,r){this.core=e,this.logger=r}},Z3=class extends Pr{constructor(e,r){super(),this.core=e,this.logger=r}},G3=class{constructor(e,r){this.logger=e,this.core=r}},Q3=class{constructor(e,r){this.projectId=e,this.logger=r}},Y3=class extends Ya{constructor(){super()}},J3=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},X3=class extends Ur.EventEmitter{constructor(){super()}},eE=class{constructor(e){this.client=e}};function tl(t){mt.useEffect(()=>(St().then(e=>{e.onSessionDelete(t)}),()=>{St().then(e=>{e.offSessionDelete(t)})}),[t])}function Jf(t){mt.useEffect(()=>(St().then(e=>{e.onSessionExpire(t)}),()=>{St().then(e=>{e.offSessionExpire(t)})}),[t])}function rl(t){mt.useEffect(()=>(St().then(e=>{e.onSessionUpdate(t)}),()=>{St().then(e=>{e.offSessionUpdate(t)})}),[t])}function jr(){const[t,e]=mt.useState(void 0);return tl(r=>{r.topic===(t==null?void 0:t.topic)&&e(void 0)}),rl(r=>{if(t&&r.topic===(t==null?void 0:t.topic)){const{namespaces:n}=r.params,i={...t,namespaces:n};e(i)}}),Jf(r=>{t&&r.topic===(t==null?void 0:t.topic)&&e(void 0)}),mt.useEffect(()=>{async function r(){const i=await(await St()).getSession();e(i)}return r(),ci.on("session_change",r),()=>{ci.off("session_change",r)}},[]),t}function Fi(t){mt.useEffect(()=>(St().then(e=>{e.onSessionEvent(t)}),()=>{St().then(e=>{e.offSessionEvent(t)})}),[t])}const Xf=t=>{let e;const r=new Set,n=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const f=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),r.forEach(p=>p(e,f))}},i=()=>e,a={setState:n,getState:i,subscribe:c=>(r.add(c),()=>r.delete(c)),destroy:()=>{r.clear()}};return e=t(n,i,a),a},tE=t=>t?Xf(t):Xf;var nl={exports:{}},il={},la={exports:{}},sl={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ep;function rE(){if(ep)return sl;ep=1;var t=mt;function e(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(f,p){var y=p(),w=n({inst:{value:y,getSnapshot:p}}),S=w[0].inst,E=w[1];return s(function(){S.value=y,S.getSnapshot=p,c(S)&&E({inst:S})},[f,y,p]),i(function(){return c(S)&&E({inst:S}),f(function(){c(S)&&E({inst:S})})},[f]),o(y),y}function c(f){var p=f.getSnapshot;f=f.value;try{var y=p();return!r(f,y)}catch{return!0}}function u(f,p){return p()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return sl.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,sl}var ol={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp;function nE(){return tp||(tp=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=mt,e=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function r(C){{for(var v=arguments.length,_=new Array(v>1?v-1:0),g=1;g<v;g++)_[g-1]=arguments[g];n("error",C,_)}}function n(C,v,_){{var g=e.ReactDebugCurrentFrame,l=g.getStackAddendum();l!==""&&(v+="%s",_=_.concat([l]));var m=_.map(function(P){return String(P)});m.unshift("Warning: "+v),Function.prototype.apply.call(console[C],console,m)}}function i(C,v){return C===v&&(C!==0||1/C===1/v)||C!==C&&v!==v}var s=typeof Object.is=="function"?Object.is:i,o=t.useState,a=t.useEffect,c=t.useLayoutEffect,u=t.useDebugValue,d=!1,f=!1;function p(C,v,_){d||t.startTransition!==void 0&&(d=!0,r("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var g=v();if(!f){var l=v();s(g,l)||(r("The result of getSnapshot should be cached to avoid an infinite loop"),f=!0)}var m=o({inst:{value:g,getSnapshot:v}}),P=m[0].inst,N=m[1];return c(function(){P.value=g,P.getSnapshot=v,y(P)&&N({inst:P})},[C,g,v]),a(function(){y(P)&&N({inst:P});var z=function(){y(P)&&N({inst:P})};return C(z)},[C]),u(g),g}function y(C){var v=C.getSnapshot,_=C.value;try{var g=v();return!s(_,g)}catch{return!0}}function w(C,v,_){return v()}var S=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",E=!S,D=E?w:p,b=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:D;ol.useSyncExternalStore=b,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),ol}var rp;function al(){return rp||(rp=1,process.env.NODE_ENV==="production"?la.exports=rE():la.exports=nE()),la.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var np;function iE(){if(np)return il;np=1;var t=mt,e=al();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,c=t.useDebugValue;return il.useSyncExternalStoreWithSelector=function(u,d,f,p,y){var w=s(null);if(w.current===null){var S={hasValue:!1,value:null};w.current=S}else S=w.current;w=a(function(){function D(g){if(!b){if(b=!0,C=g,g=p(g),y!==void 0&&S.hasValue){var l=S.value;if(y(l,g))return v=l}return v=g}if(l=v,n(C,g))return l;var m=p(g);return y!==void 0&&y(l,m)?l:(C=g,v=m)}var b=!1,C,v,_=f===void 0?null:f;return[function(){return D(d())},_===null?void 0:function(){return D(_())}]},[d,f,p,y]);var E=i(u,w[0],w[1]);return o(function(){S.hasValue=!0,S.value=E},[E]),c(E),E},il}var cl={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip;function sE(){return ip||(ip=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=mt,e=al();function r(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,c=t.useDebugValue;function u(d,f,p,y,w){var S=s(null),E;S.current===null?(E={hasValue:!1,value:null},S.current=E):E=S.current;var D=a(function(){var _=!1,g,l,m=function(W){if(!_){_=!0,g=W;var G=y(W);if(w!==void 0&&E.hasValue){var $=E.value;if(w($,G))return l=$,$}return l=G,G}var j=g,oe=l;if(n(j,W))return oe;var Y=y(W);return w!==void 0&&w(oe,Y)?oe:(g=W,l=Y,Y)},P=p===void 0?null:p,N=function(){return m(f())},z=P===null?void 0:function(){return m(P())};return[N,z]},[f,p,y,w]),b=D[0],C=D[1],v=i(d,b,C);return o(function(){E.hasValue=!0,E.value=v},[v]),c(v),v}cl.useSyncExternalStoreWithSelector=u,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),cl}process.env.NODE_ENV==="production"?nl.exports=iE():nl.exports=sE();var oE=nl.exports;const aE=cs(oE),{useDebugValue:cE}=mt,{useSyncExternalStoreWithSelector:lE}=aE;let O8=!1;function uE(t,e=t.getState,r){const n=lE(t.subscribe,t.getState,t.getServerState||t.getState,e,r);return cE(n),n}const sp=t=>{const e=typeof t=="function"?tE(t):t,r=(n,i)=>uE(e,n,i);return Object.assign(r,e),r},dE=t=>t?sp(t):sp;function hE(t,e){let r;try{r=t()}catch{return}return{getItem:i=>{var s;const o=c=>c===null?null:JSON.parse(c,e==null?void 0:e.reviver),a=(s=r.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>r.setItem(i,JSON.stringify(s,e==null?void 0:e.replacer)),removeItem:i=>r.removeItem(i)}}const Hs=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return Hs(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return Hs(n)(r)}}}},fE=(t,e)=>(r,n,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:E=>E,version:0,merge:(E,D)=>({...D,...E}),...e},o=!1;const a=new Set,c=new Set;let u;try{u=s.getStorage()}catch{}if(!u)return t((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...E)},n,i);const d=Hs(s.serialize),f=()=>{const E=s.partialize({...n()});let D;const b=d({state:E,version:s.version}).then(C=>u.setItem(s.name,C)).catch(C=>{D=C});if(D)throw D;return b},p=i.setState;i.setState=(E,D)=>{p(E,D),f()};const y=t((...E)=>{r(...E),f()},n,i);let w;const S=()=>{var E;if(!u)return;o=!1,a.forEach(b=>b(n()));const D=((E=s.onRehydrateStorage)==null?void 0:E.call(s,n()))||void 0;return Hs(u.getItem.bind(u))(s.name).then(b=>{if(b)return s.deserialize(b)}).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==s.version){if(s.migrate)return s.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var C;return w=s.merge(b,(C=n())!=null?C:y),r(w,!0),f()}).then(()=>{D==null||D(w,void 0),o=!0,c.forEach(b=>b(w))}).catch(b=>{D==null||D(void 0,b)})};return i.persist={setOptions:E=>{s={...s,...E},E.getStorage&&(u=E.getStorage())},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>S(),hasHydrated:()=>o,onHydrate:E=>(a.add(E),()=>{a.delete(E)}),onFinishHydration:E=>(c.add(E),()=>{c.delete(E)})},S(),w||y},pE=(t,e)=>(r,n,i)=>{let s={storage:hE(()=>localStorage),partialize:S=>S,version:0,merge:(S,E)=>({...E,...S}),...e},o=!1;const a=new Set,c=new Set;let u=s.storage;if(!u)return t((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...S)},n,i);const d=()=>{const S=s.partialize({...n()});return u.setItem(s.name,{state:S,version:s.version})},f=i.setState;i.setState=(S,E)=>{f(S,E),d()};const p=t((...S)=>{r(...S),d()},n,i);let y;const w=()=>{var S,E;if(!u)return;o=!1,a.forEach(b=>{var C;return b((C=n())!=null?C:p)});const D=((E=s.onRehydrateStorage)==null?void 0:E.call(s,(S=n())!=null?S:p))||void 0;return Hs(u.getItem.bind(u))(s.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==s.version){if(s.migrate)return s.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var C;return y=s.merge(b,(C=n())!=null?C:p),r(y,!0),d()}).then(()=>{D==null||D(y,void 0),y=n(),o=!0,c.forEach(b=>b(y))}).catch(b=>{D==null||D(void 0,b)})};return i.persist={setOptions:S=>{s={...s,...S},S.storage&&(u=S.storage)},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>w(),hasHydrated:()=>o,onHydrate:S=>(a.add(S),()=>{a.delete(S)}),onFinishHydration:S=>(c.add(S),()=>{c.delete(S)})},s.skipHydration||w(),y||p},gE=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?fE(t,e):pE(t,e),kn=dE()(gE((t,e)=>({account:void 0,chainId:"aleo:1",setAccount:r=>{t({account:r})},setChainId:r=>{t({chainId:r})},disconnect:()=>{t({account:void 0,chainId:void 0})}}),{name:"puzzle-wallet-store"}));class Ks{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const r={listener:e};return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const Zs=typeof window>"u"||"Deno"in window;function Br(){}function mE(t,e){return typeof t=="function"?t(e):t}function ll(t){return typeof t=="number"&&t>=0&&t!==1/0}function op(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Gs(t,e,r){return ua(t)?typeof e=="function"?{...r,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function Un(t,e,r){return ua(t)?[{...e,queryKey:t},r]:[t||{},e]}function ap(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(ua(o)){if(n){if(e.queryHash!==ul(o,e.options))return!1}else if(!ji(e.queryKey,o))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||typeof i<"u"&&i!==e.state.fetchStatus||s&&!s(e))}function cp(t,e){const{exact:r,fetching:n,predicate:i,mutationKey:s}=t;if(ua(s)){if(!e.options.mutationKey)return!1;if(r){if(fi(e.options.mutationKey)!==fi(s))return!1}else if(!ji(e.options.mutationKey,s))return!1}return!(typeof n=="boolean"&&e.state.status==="loading"!==n||i&&!i(e))}function ul(t,e){return((e==null?void 0:e.queryKeyHashFn)||fi)(t)}function fi(t){return JSON.stringify(t,(e,r)=>hl(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function ji(t,e){return lp(t,e)}function lp(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!lp(t[r],e[r])):!1}function up(t,e){if(t===e)return t;const r=dp(t)&&dp(e);if(r||hl(t)&&hl(e)){const n=r?t.length:Object.keys(t).length,i=r?e:Object.keys(e),s=i.length,o=r?[]:{};let a=0;for(let c=0;c<s;c++){const u=r?c:i[c];o[u]=up(t[u],e[u]),o[u]===t[u]&&a++}return n===s&&a===n?t:o}return e}function dl(t,e){if(t&&!e||e&&!t)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function dp(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function hl(t){if(!hp(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const r=e.prototype;return!(!hp(r)||!r.hasOwnProperty("isPrototypeOf"))}function hp(t){return Object.prototype.toString.call(t)==="[object Object]"}function ua(t){return Array.isArray(t)}function fp(t){return new Promise(e=>{setTimeout(e,t)})}function pp(t){fp(0).then(t)}function yE(){if(typeof AbortController=="function")return new AbortController}function fl(t,e,r){return r.isDataEqual!=null&&r.isDataEqual(t,e)?t:typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?up(t,e):e}class vE extends Ks{constructor(){super(),this.setup=e=>{if(!Zs&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),window.addEventListener("focus",r,!1),()=>{window.removeEventListener("visibilitychange",r),window.removeEventListener("focus",r)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var r;this.setup=e,(r=this.cleanup)==null||r.call(this),this.cleanup=e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const da=new vE,gp=["online","offline"];class wE extends Ks{constructor(){super(),this.setup=e=>{if(!Zs&&window.addEventListener){const r=()=>e();return gp.forEach(n=>{window.addEventListener(n,r,!1)}),()=>{gp.forEach(n=>{window.removeEventListener(n,r)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var r;this.setup=e,(r=this.cleanup)==null||r.call(this),this.cleanup=e(n=>{typeof n=="boolean"?this.setOnline(n):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const ha=new wE;function bE(t){return Math.min(1e3*2**t,3e4)}function fa(t){return(t??"online")==="online"?ha.isOnline():!0}class mp{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function pa(t){return t instanceof mp}function yp(t){let e=!1,r=0,n=!1,i,s,o;const a=new Promise((E,D)=>{s=E,o=D}),c=E=>{n||(y(new mp(E)),t.abort==null||t.abort())},u=()=>{e=!0},d=()=>{e=!1},f=()=>!da.isFocused()||t.networkMode!=="always"&&!ha.isOnline(),p=E=>{n||(n=!0,t.onSuccess==null||t.onSuccess(E),i==null||i(),s(E))},y=E=>{n||(n=!0,t.onError==null||t.onError(E),i==null||i(),o(E))},w=()=>new Promise(E=>{i=D=>{const b=n||!f();return b&&E(D),b},t.onPause==null||t.onPause()}).then(()=>{i=void 0,n||t.onContinue==null||t.onContinue()}),S=()=>{if(n)return;let E;try{E=t.fn()}catch(D){E=Promise.reject(D)}Promise.resolve(E).then(p).catch(D=>{var b,C;if(n)return;const v=(b=t.retry)!=null?b:3,_=(C=t.retryDelay)!=null?C:bE,g=typeof _=="function"?_(r,D):_,l=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,D);if(e||!l){y(D);return}r++,t.onFail==null||t.onFail(r,D),fp(g).then(()=>{if(f())return w()}).then(()=>{e?y(D):S()})})};return fa(t.networkMode)?S():w().then(S),{promise:a,cancel:c,continue:()=>(i==null?void 0:i())?a:Promise.resolve(),cancelRetry:u,continueRetry:d}}const pl=console;function _E(){let t=[],e=0,r=d=>{d()},n=d=>{d()};const i=d=>{let f;e++;try{f=d()}finally{e--,e||a()}return f},s=d=>{e?t.push(d):pp(()=>{r(d)})},o=d=>(...f)=>{s(()=>{d(...f)})},a=()=>{const d=t;t=[],d.length&&pp(()=>{n(()=>{d.forEach(f=>{r(f)})})})};return{batch:i,batchCalls:o,schedule:s,setNotifyFunction:d=>{r=d},setBatchNotifyFunction:d=>{n=d}}}const Kt=_E();class vp{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ll(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(Zs?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class EE extends vp{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||pl,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||SE(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,r){const n=fl(this.state.data,e,this.options);return this.dispatch({data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){this.dispatch({type:"setState",state:e,setStateOptions:r})}cancel(e){var r;const n=this.promise;return(r=this.retryer)==null||r.cancel(e),n?n.then(Br).catch(Br):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!op(this.state.dataUpdatedAt,e)}onFocus(){var e;const r=this.observers.find(n=>n.shouldFetchOnWindowFocus());r&&r.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const r=this.observers.find(n=>n.shouldFetchOnReconnect());r&&r.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,r){var n,i;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&r!=null&&r.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var s;return(s=this.retryer)==null||s.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const y=this.observers.find(w=>w.options.queryFn);y&&this.setOptions(y.options)}process.env.NODE_ENV!=="production"&&(Array.isArray(this.options.queryKey)||this.logger.error("As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']"));const o=yE(),a={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},c=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>{if(o)return this.abortSignalConsumed=!0,o.signal}})};c(a);const u=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(a)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),d={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:u};if(c(d),(n=this.options.behavior)==null||n.onFetch(d),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((i=d.fetchOptions)==null?void 0:i.meta)){var f;this.dispatch({type:"fetch",meta:(f=d.fetchOptions)==null?void 0:f.meta})}const p=y=>{if(pa(y)&&y.silent||this.dispatch({type:"error",error:y}),!pa(y)){var w,S,E,D;(w=(S=this.cache.config).onError)==null||w.call(S,y,this),(E=(D=this.cache.config).onSettled)==null||E.call(D,this.state.data,y,this),process.env.NODE_ENV!=="production"&&this.logger.error(y)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=yp({fn:d.fetchFn,abort:o==null?void 0:o.abort.bind(o),onSuccess:y=>{var w,S,E,D;if(typeof y>"u"){process.env.NODE_ENV!=="production"&&this.logger.error("Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: "+this.queryHash),p(new Error(this.queryHash+" data is undefined"));return}this.setData(y),(w=(S=this.cache.config).onSuccess)==null||w.call(S,y,this),(E=(D=this.cache.config).onSettled)==null||E.call(D,y,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:p,onFail:(y,w)=>{this.dispatch({type:"failed",failureCount:y,error:w})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const r=n=>{var i,s;switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(i=e.meta)!=null?i:null,fetchStatus:fa(this.options.networkMode)?"fetching":"paused",...!n.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:(s=e.dataUpdatedAt)!=null?s:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return pa(o)&&o.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...n,error:o,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),Kt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function SE(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=typeof e<"u",n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"loading",fetchStatus:"idle"}}class xE extends Ks{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,r,n){var i;const s=r.queryKey,o=(i=r.queryHash)!=null?i:ul(s,r);let a=this.get(o);return a||(a=new EE({cache:this,logger:e.getLogger(),queryKey:s,queryHash:o,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const r=this.queriesMap[e.queryHash];r&&(e.destroy(),this.queries=this.queries.filter(n=>n!==e),r===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){Kt.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,r){const[n]=Un(e,r);return typeof n.exact>"u"&&(n.exact=!0),this.queries.find(i=>ap(n,i))}findAll(e,r){const[n]=Un(e,r);return Object.keys(n).length>0?this.queries.filter(i=>ap(n,i)):this.queries}notify(e){Kt.batch(()=>{this.listeners.forEach(({listener:r})=>{r(e)})})}onFocus(){Kt.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){Kt.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class CE extends vp{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||pl,this.observers=[],this.state=e.state||OE(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(r=>r!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,r;return(e=(r=this.retryer)==null?void 0:r.continue())!=null?e:this.execute()}async execute(){const e=()=>{var l;return this.retryer=yp({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(m,P)=>{this.dispatch({type:"failed",failureCount:m,error:P})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(l=this.options.retry)!=null?l:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},r=this.state.status==="loading";try{var n,i,s,o,a,c,u,d;if(!r){var f,p,y,w;this.dispatch({type:"loading",variables:this.options.variables}),await((f=(p=this.mutationCache.config).onMutate)==null?void 0:f.call(p,this.state.variables,this));const m=await((y=(w=this.options).onMutate)==null?void 0:y.call(w,this.state.variables));m!==this.state.context&&this.dispatch({type:"loading",context:m,variables:this.state.variables})}const l=await e();return await((n=(i=this.mutationCache.config).onSuccess)==null?void 0:n.call(i,l,this.state.variables,this.state.context,this)),await((s=(o=this.options).onSuccess)==null?void 0:s.call(o,l,this.state.variables,this.state.context)),await((a=(c=this.mutationCache.config).onSettled)==null?void 0:a.call(c,l,null,this.state.variables,this.state.context,this)),await((u=(d=this.options).onSettled)==null?void 0:u.call(d,l,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:l}),l}catch(l){try{var S,E,D,b,C,v,_,g;throw await((S=(E=this.mutationCache.config).onError)==null?void 0:S.call(E,l,this.state.variables,this.state.context,this)),process.env.NODE_ENV!=="production"&&this.logger.error(l),await((D=(b=this.options).onError)==null?void 0:D.call(b,l,this.state.variables,this.state.context)),await((C=(v=this.mutationCache.config).onSettled)==null?void 0:C.call(v,void 0,l,this.state.variables,this.state.context,this)),await((_=(g=this.options).onSettled)==null?void 0:_.call(g,void 0,l,this.state.variables,this.state.context)),l}finally{this.dispatch({type:"error",error:l})}}}dispatch(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"loading":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!fa(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...n,...e.state}}};this.state=r(this.state),Kt.batch(()=>{this.observers.forEach(n=>{n.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function OE(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class DE extends Ks{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,r,n){const i=new CE({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(r),state:n,defaultOptions:r.mutationKey?e.getMutationDefaults(r.mutationKey):void 0});return this.add(i),i}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(r=>r!==e),this.notify({type:"removed",mutation:e})}clear(){Kt.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(r=>cp(e,r))}findAll(e){return this.mutations.filter(r=>cp(e,r))}notify(e){Kt.batch(()=>{this.listeners.forEach(({listener:r})=>{r(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const r=this.mutations.filter(n=>n.state.isPaused);return Kt.batch(()=>r.reduce((n,i)=>n.then(()=>i.continue().catch(Br)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function IE(){return{onFetch:t=>{t.fetchFn=()=>{var e,r,n,i,s,o;const a=(e=t.fetchOptions)==null||(r=e.meta)==null?void 0:r.refetchPage,c=(n=t.fetchOptions)==null||(i=n.meta)==null?void 0:i.fetchMore,u=c==null?void 0:c.pageParam,d=(c==null?void 0:c.direction)==="forward",f=(c==null?void 0:c.direction)==="backward",p=((s=t.state.data)==null?void 0:s.pages)||[],y=((o=t.state.data)==null?void 0:o.pageParams)||[];let w=y,S=!1;const E=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>{var l;if((l=t.signal)!=null&&l.aborted)S=!0;else{var m;(m=t.signal)==null||m.addEventListener("abort",()=>{S=!0})}return t.signal}})},D=t.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+t.options.queryHash+"'")),b=(g,l,m,P)=>(w=P?[l,...w]:[...w,l],P?[m,...g]:[...g,m]),C=(g,l,m,P)=>{if(S)return Promise.reject("Cancelled");if(typeof m>"u"&&!l&&g.length)return Promise.resolve(g);const N={queryKey:t.queryKey,pageParam:m,meta:t.options.meta};E(N);const z=D(N);return Promise.resolve(z).then(G=>b(g,m,G,P))};let v;if(!p.length)v=C([]);else if(d){const g=typeof u<"u",l=g?u:wp(t.options,p);v=C(p,g,l)}else if(f){const g=typeof u<"u",l=g?u:AE(t.options,p);v=C(p,g,l,!0)}else{w=[];const g=typeof t.options.getNextPageParam>"u";v=(a&&p[0]?a(p[0],0,p):!0)?C([],g,y[0]):Promise.resolve(b([],y[0],p[0]));for(let m=1;m<p.length;m++)v=v.then(P=>{if(a&&p[m]?a(p[m],m,p):!0){const z=g?y[m]:wp(t.options,P);return C(P,g,z)}return Promise.resolve(b(P,y[m],p[m]))})}return v.then(g=>({pages:g,pageParams:w}))}}}}function wp(t,e){return t.getNextPageParam==null?void 0:t.getNextPageParam(e[e.length-1],e)}function AE(t,e){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(e[0],e)}class TE{constructor(e={}){this.queryCache=e.queryCache||new xE,this.mutationCache=e.mutationCache||new DE,this.logger=e.logger||pl,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0,process.env.NODE_ENV!=="production"&&e.logger&&this.logger.error("Passing a custom logger has been deprecated and will be removed in the next major version.")}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=da.subscribe(()=>{da.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=ha.subscribe(()=>{ha.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,r;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(r=this.unsubscribeOnline)==null||r.call(this),this.unsubscribeOnline=void 0)}isFetching(e,r){const[n]=Un(e,r);return n.fetchStatus="fetching",this.queryCache.findAll(n).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,r){var n;return(n=this.queryCache.find(e,r))==null?void 0:n.state.data}ensureQueryData(e,r,n){const i=Gs(e,r,n),s=this.getQueryData(i.queryKey);return s?Promise.resolve(s):this.fetchQuery(i)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:r,state:n})=>{const i=n.data;return[r,i]})}setQueryData(e,r,n){const i=this.queryCache.find(e),s=i==null?void 0:i.state.data,o=mE(r,s);if(typeof o>"u")return;const a=Gs(e),c=this.defaultQueryOptions(a);return this.queryCache.build(this,c).setData(o,{...n,manual:!0})}setQueriesData(e,r,n){return Kt.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,r,n)]))}getQueryState(e,r){var n;return(n=this.queryCache.find(e,r))==null?void 0:n.state}removeQueries(e,r){const[n]=Un(e,r),i=this.queryCache;Kt.batch(()=>{i.findAll(n).forEach(s=>{i.remove(s)})})}resetQueries(e,r,n){const[i,s]=Un(e,r,n),o=this.queryCache,a={type:"active",...i};return Kt.batch(()=>(o.findAll(i).forEach(c=>{c.reset()}),this.refetchQueries(a,s)))}cancelQueries(e,r,n){const[i,s={}]=Un(e,r,n);typeof s.revert>"u"&&(s.revert=!0);const o=Kt.batch(()=>this.queryCache.findAll(i).map(a=>a.cancel(s)));return Promise.all(o).then(Br).catch(Br)}invalidateQueries(e,r,n){const[i,s]=Un(e,r,n);return Kt.batch(()=>{var o,a;if(this.queryCache.findAll(i).forEach(u=>{u.invalidate()}),i.refetchType==="none")return Promise.resolve();const c={...i,type:(o=(a=i.refetchType)!=null?a:i.type)!=null?o:"active"};return this.refetchQueries(c,s)})}refetchQueries(e,r,n){const[i,s]=Un(e,r,n),o=Kt.batch(()=>this.queryCache.findAll(i).filter(c=>!c.isDisabled()).map(c=>{var u;return c.fetch(void 0,{...s,cancelRefetch:(u=s==null?void 0:s.cancelRefetch)!=null?u:!0,meta:{refetchPage:i.refetchPage}})}));let a=Promise.all(o).then(Br);return s!=null&&s.throwOnError||(a=a.catch(Br)),a}fetchQuery(e,r,n){const i=Gs(e,r,n),s=this.defaultQueryOptions(i);typeof s.retry>"u"&&(s.retry=!1);const o=this.queryCache.build(this,s);return o.isStaleByTime(s.staleTime)?o.fetch(s):Promise.resolve(o.state.data)}prefetchQuery(e,r,n){return this.fetchQuery(e,r,n).then(Br).catch(Br)}fetchInfiniteQuery(e,r,n){const i=Gs(e,r,n);return i.behavior=IE(),this.fetchQuery(i)}prefetchInfiniteQuery(e,r,n){return this.fetchInfiniteQuery(e,r,n).then(Br).catch(Br)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,r){const n=this.queryDefaults.find(i=>fi(e)===fi(i.queryKey));n?n.defaultOptions=r:this.queryDefaults.push({queryKey:e,defaultOptions:r})}getQueryDefaults(e){if(!e)return;const r=this.queryDefaults.find(n=>ji(e,n.queryKey));return process.env.NODE_ENV!=="production"&&this.queryDefaults.filter(i=>ji(e,i.queryKey)).length>1&&this.logger.error("[QueryClient] Several query defaults match with key '"+JSON.stringify(e)+"'. The first matching query defaults are used. Please check how query defaults are registered. Order does matter here. cf. https://react-query.tanstack.com/reference/QueryClient#queryclientsetquerydefaults."),r==null?void 0:r.defaultOptions}setMutationDefaults(e,r){const n=this.mutationDefaults.find(i=>fi(e)===fi(i.mutationKey));n?n.defaultOptions=r:this.mutationDefaults.push({mutationKey:e,defaultOptions:r})}getMutationDefaults(e){if(!e)return;const r=this.mutationDefaults.find(n=>ji(e,n.mutationKey));return process.env.NODE_ENV!=="production"&&this.mutationDefaults.filter(i=>ji(e,i.mutationKey)).length>1&&this.logger.error("[QueryClient] Several mutation defaults match with key '"+JSON.stringify(e)+"'. The first matching mutation defaults are used. Please check how mutation defaults are registered. Order does matter here. cf. https://react-query.tanstack.com/reference/QueryClient#queryclientsetmutationdefaults."),r==null?void 0:r.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const r={...this.defaultOptions.queries,...this.getQueryDefaults(e==null?void 0:e.queryKey),...e,_defaulted:!0};return!r.queryHash&&r.queryKey&&(r.queryHash=ul(r.queryKey,r)),typeof r.refetchOnReconnect>"u"&&(r.refetchOnReconnect=r.networkMode!=="always"),typeof r.useErrorBoundary>"u"&&(r.useErrorBoundary=!!r.suspense),r}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e==null?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class RE extends Ks{constructor(e,r){super(),this.client=e,this.options=r,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(r)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),bp(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return gl(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return gl(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,r){const n=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),process.env.NODE_ENV!=="production"&&typeof(e==null?void 0:e.isDataEqual)<"u"&&this.client.getLogger().error("The isDataEqual option has been deprecated and will be removed in the next major version. You can achieve the same functionality by passing a function as the structuralSharing option"),dl(n,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();const s=this.hasListeners();s&&_p(this.currentQuery,i,this.options,n)&&this.executeFetch(),this.updateResult(r),s&&(this.currentQuery!==i||this.options.enabled!==n.enabled||this.options.staleTime!==n.staleTime)&&this.updateStaleTimeout();const o=this.computeRefetchInterval();s&&(this.currentQuery!==i||this.options.enabled!==n.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)}getOptimisticResult(e){const r=this.client.getQueryCache().build(this.client,e),n=this.createResult(r,e);return NE(this,n,e)&&(this.currentResult=n,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),n}getCurrentResult(){return this.currentResult}trackResult(e){const r={};return Object.keys(e).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(n),e[n])})}),r}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...r}={}){return this.fetch({...r,meta:{refetchPage:e}})}fetchOptimistic(e){const r=this.client.defaultQueryOptions(e),n=this.client.getQueryCache().build(this.client,r);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,r))}fetch(e){var r;return this.executeFetch({...e,cancelRefetch:(r=e.cancelRefetch)!=null?r:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let r=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(Br)),r}updateStaleTimeout(){if(this.clearStaleTimeout(),Zs||this.currentResult.isStale||!ll(this.options.staleTime))return;const r=op(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},r)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(Zs||this.options.enabled===!1||!ll(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||da.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,r){const n=this.currentQuery,i=this.options,s=this.currentResult,o=this.currentResultState,a=this.currentResultOptions,c=e!==n,u=c?e.state:this.currentQueryInitialState,d=c?this.currentResult:this.previousQueryResult,{state:f}=e;let{dataUpdatedAt:p,error:y,errorUpdatedAt:w,fetchStatus:S,status:E}=f,D=!1,b=!1,C;if(r._optimisticResults){const m=this.hasListeners(),P=!m&&bp(e,r),N=m&&_p(e,n,r,i);(P||N)&&(S=fa(e.options.networkMode)?"fetching":"paused",p||(E="loading")),r._optimisticResults==="isRestoring"&&(S="idle")}if(r.keepPreviousData&&!f.dataUpdatedAt&&d!=null&&d.isSuccess&&E!=="error")C=d.data,p=d.dataUpdatedAt,E=d.status,D=!0;else if(r.select&&typeof f.data<"u")if(s&&f.data===(o==null?void 0:o.data)&&r.select===this.selectFn)C=this.selectResult;else try{this.selectFn=r.select,C=r.select(f.data),C=fl(s==null?void 0:s.data,C,r),this.selectResult=C,this.selectError=null}catch(m){process.env.NODE_ENV!=="production"&&this.client.getLogger().error(m),this.selectError=m}else C=f.data;if(typeof r.placeholderData<"u"&&typeof C>"u"&&E==="loading"){let m;if(s!=null&&s.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData))m=s.data;else if(m=typeof r.placeholderData=="function"?r.placeholderData():r.placeholderData,r.select&&typeof m<"u")try{m=r.select(m),this.selectError=null}catch(P){process.env.NODE_ENV!=="production"&&this.client.getLogger().error(P),this.selectError=P}typeof m<"u"&&(E="success",C=fl(s==null?void 0:s.data,m,r),b=!0)}this.selectError&&(y=this.selectError,C=this.selectResult,w=Date.now(),E="error");const v=S==="fetching",_=E==="loading",g=E==="error";return{status:E,fetchStatus:S,isLoading:_,isSuccess:E==="success",isError:g,isInitialLoading:_&&v,data:C,dataUpdatedAt:p,error:y,errorUpdatedAt:w,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:v,isRefetching:v&&!_,isLoadingError:g&&f.dataUpdatedAt===0,isPaused:S==="paused",isPlaceholderData:b,isPreviousData:D,isRefetchError:g&&f.dataUpdatedAt!==0,isStale:ml(e,r),refetch:this.refetch,remove:this.remove}}updateResult(e){const r=this.currentResult,n=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,dl(n,r))return;this.currentResult=n;const i={cache:!0},s=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!this.trackedProps.size)return!0;const c=new Set(a??this.trackedProps);return this.options.useErrorBoundary&&c.add("error"),Object.keys(this.currentResult).some(u=>{const d=u;return this.currentResult[d]!==r[d]&&c.has(d)})};(e==null?void 0:e.listeners)!==!1&&s()&&(i.listeners=!0),this.notify({...i,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const r=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const r={};e.type==="success"?r.onSuccess=!e.manual:e.type==="error"&&!pa(e.error)&&(r.onError=!0),this.updateResult(r),this.hasListeners()&&this.updateTimers()}notify(e){Kt.batch(()=>{if(e.onSuccess){var r,n,i,s;(r=(n=this.options).onSuccess)==null||r.call(n,this.currentResult.data),(i=(s=this.options).onSettled)==null||i.call(s,this.currentResult.data,null)}else if(e.onError){var o,a,c,u;(o=(a=this.options).onError)==null||o.call(a,this.currentResult.error),(c=(u=this.options).onSettled)==null||c.call(u,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:d})=>{d(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function PE(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function bp(t,e){return PE(t,e)||t.state.dataUpdatedAt>0&&gl(t,e,e.refetchOnMount)}function gl(t,e,r){if(e.enabled!==!1){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&ml(t,e)}return!1}function _p(t,e,r,n){return r.enabled!==!1&&(t!==e||n.enabled===!1)&&(!r.suspense||t.state.status!=="error")&&ml(t,r)}function ml(t,e){return t.isStaleByTime(e.staleTime)}function NE(t,e,r){return r.keepPreviousData?!1:r.placeholderData!==void 0?e.isPlaceholderData:!dl(t.getCurrentResult(),e)}var $E=al();const LE=$E.useSyncExternalStore,Ep=gr.createContext(void 0),Sp=gr.createContext(!1);function xp(t,e){return t||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=Ep),window.ReactQueryClientContext):Ep)}const ME=({context:t}={})=>{const e=gr.useContext(xp(t,gr.useContext(Sp)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},kE=({client:t,children:e,context:r,contextSharing:n=!1})=>{gr.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),process.env.NODE_ENV!=="production"&&n&&t.getLogger().error("The contextSharing option has been deprecated and will be removed in the next major version");const i=xp(r,n);return gr.createElement(Sp.Provider,{value:!r&&n},gr.createElement(i.Provider,{value:t},e))},Cp=gr.createContext(!1),UE=()=>gr.useContext(Cp);Cp.Provider;function FE(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const jE=gr.createContext(FE()),BE=()=>gr.useContext(jE);function qE(t,e){return typeof t=="function"?t(...e):!!t}const zE=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},WE=t=>{gr.useEffect(()=>{t.clearReset()},[t])},VE=({result:t,errorResetBoundary:e,useErrorBoundary:r,query:n})=>t.isError&&!e.isReset()&&!t.isFetching&&qE(r,[t.error,n]),HE=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},KE=(t,e)=>t.isLoading&&t.isFetching&&!e,ZE=(t,e,r)=>(t==null?void 0:t.suspense)&&KE(e,r),GE=(t,e,r)=>e.fetchOptimistic(t).then(({data:n})=>{t.onSuccess==null||t.onSuccess(n),t.onSettled==null||t.onSettled(n,null)}).catch(n=>{r.clearReset(),t.onError==null||t.onError(n),t.onSettled==null||t.onSettled(void 0,n)});function QE(t,e){const r=ME({context:t.context}),n=UE(),i=BE(),s=r.defaultQueryOptions(t);s._optimisticResults=n?"isRestoring":"optimistic",s.onError&&(s.onError=Kt.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=Kt.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=Kt.batchCalls(s.onSettled)),HE(s),zE(s,i),WE(i);const[o]=gr.useState(()=>new e(r,s)),a=o.getOptimisticResult(s);if(LE(gr.useCallback(c=>{const u=n?()=>{}:o.subscribe(Kt.batchCalls(c));return o.updateResult(),u},[o,n]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),gr.useEffect(()=>{o.setOptions(s,{listeners:!1})},[s,o]),ZE(s,a,n))throw GE(s,o,i);if(VE({result:a,errorResetBoundary:i,useErrorBoundary:s.useErrorBoundary,query:o.getCurrentQuery()}))throw a.error;return s.notifyOnChangeProps?a:o.trackResult(a)}function YE(t,e,r){const n=Gs(t,e,r);return QE(n,RE)}function yl(){const[t,e]=mt.useState(void 0),[r,n]=mt.useState(void 0),[i,s]=mt.useState(!1);return{data:t,error:r,loading:i,setData:e,setError:n,setLoading:s}}async function Op(t,e){const n=await(await St()).request(t);return n===void 0&&e?Sl.getQueryData(e):n}function ga({queryKey:t,wcParams:e,enabled:r,queryOptions:n}){return YE(t,()=>Op(e,t),n??{staleTime:7500,refetchInterval:5e3,refetchIntervalInBackground:!0,enabled:r})}function Bi(t){const{data:e,error:r,loading:n,setData:i,setError:s,setLoading:o}=yl();async function a(c){try{o(!0),s(void 0);const u=await Op(t??c);return i(u),u}catch(u){throw s(u),u}finally{o(!1)}}return{data:e,error:r,loading:n,request:a}}const vl=t=>t.length<5*2?t:`${t.slice(0,5+5)}...${t.slice(t.length-5,t.length)}`,JE=()=>{const t=jr(),e="aleo:1",[r,n]=kn(u=>[u.account,u.setAccount]),{request:i,data:s,error:o,loading:a}=Bi({topic:t==null?void 0:t.topic,chainId:e,request:{jsonrpc:"2.0",method:"getSelectedAccount"}});Fi(({params:u,topic:d})=>{if(u.event.name==="accountSelected"&&t&&t.topic===d){const p=u.event.data.address;console.log("useOnSessionEvent params",u);const y=u.chainId.split(":")[0],w=u.chainId.split(":")[1];n({network:y,chainId:w,address:p,shortenedAddress:vl(p)})}}),rl(({params:u,topic:d})=>{const f=u.accounts[0].address;console.log("useOnSessionUpdate params",u);const p=u.chainId.split(":")[0],y=u.chainId.split(":")[1];n({network:p,chainId:y,address:f,shortenedAddress:vl(f)})}),tl(({params:u,topic:d})=>{n(void 0)}),mt.useEffect(()=>{t&&!a&&i()},[t==null?void 0:t.topic]),mt.useEffect(()=>{if(s){const u=s,d=u==null?void 0:u.account;console.log("useEffect data",u),d&&n(d)}},[s]);const c=o?o.message:s&&s.error;return{account:r,error:c,loading:a}},XE=({address:t,multisig:e})=>{const r=jr(),[n]=kn(p=>[p.account]),i="aleo:1",{refetch:s,data:o,error:a,isLoading:c}=ga({queryKey:["useBalance",t??(n==null?void 0:n.address)??"",e],enabled:!!r&&!!n&&(e?!!t:!0),wcParams:{topic:r==null?void 0:r.topic,chainId:i,request:{jsonrpc:"2.0",method:"getBalance",params:{assetId:void 0,address:t}}}});Fi(({params:p,topic:y})=>{const w=p.event.name,S=p.event.address;["accountSelected","selectedAccountSynced","sharedAccountSynced"].includes(w)&&r&&r.topic===y&&S===(n==null?void 0:n.address)&&!c&&s()}),mt.useEffect(()=>{r&&!c&&s()},[r==null?void 0:r.topic]);const u=a?a.message:o&&o.error,d=o;return{balances:d==null?void 0:d.balances,error:u,loading:c}};function e5(){const{data:t,error:e,loading:r,setData:n,setError:i,setLoading:s}=yl();async function o(){try{s(!0),i(void 0);const c=await(await St()).connect({requiredNamespaces:{aleo:{methods:Qo,chains:Ps,events:Yo}}});return n(c),ci.emit("session_change"),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE"),c}catch(a){throw i(a),a}finally{s(!1)}}return{data:t,error:e,loading:r,connect:o}}const t5=()=>{const t=jr(),{request:e,data:r,error:n,loading:i}=Bi({topic:(t==null?void 0:t.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"createSharedState",params:{}}}),s=n?n.message:r&&r.error,o=r;return{createSharedState:()=>{e()},data:o==null?void 0:o.data,loading:i,error:s}};var wl={exports:{}},bl,Dp;function r5(){if(Dp)return bl;Dp=1;var t=1e3,e=t*60,r=e*60,n=r*24,i=n*7,s=n*365.25;bl=function(d,f){f=f||{};var p=typeof d;if(p==="string"&&d.length>0)return o(d);if(p==="number"&&isFinite(d))return f.long?c(d):a(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function o(d){if(d=String(d),!(d.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(f){var p=parseFloat(f[1]),y=(f[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return p*s;case"weeks":case"week":case"w":return p*i;case"days":case"day":case"d":return p*n;case"hours":case"hour":case"hrs":case"hr":case"h":return p*r;case"minutes":case"minute":case"mins":case"min":case"m":return p*e;case"seconds":case"second":case"secs":case"sec":case"s":return p*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function a(d){var f=Math.abs(d);return f>=n?Math.round(d/n)+"d":f>=r?Math.round(d/r)+"h":f>=e?Math.round(d/e)+"m":f>=t?Math.round(d/t)+"s":d+"ms"}function c(d){var f=Math.abs(d);return f>=n?u(d,f,n,"day"):f>=r?u(d,f,r,"hour"):f>=e?u(d,f,e,"minute"):f>=t?u(d,f,t,"second"):d+" ms"}function u(d,f,p,y){var w=f>=p*1.5;return Math.round(d/p)+" "+y+(w?"s":"")}return bl}function n5(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=r5(),r.destroy=u,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let f=0;for(let p=0;p<d.length;p++)f=(f<<5)-f+d.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(d){let f,p=null,y,w;function S(...E){if(!S.enabled)return;const D=S,b=Number(new Date),C=b-(f||b);D.diff=C,D.prev=f,D.curr=b,f=b,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let v=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(g,l)=>{if(g==="%%")return"%";v++;const m=r.formatters[l];if(typeof m=="function"){const P=E[v];g=m.call(D,P),E.splice(v,1),v--}return g}),r.formatArgs.call(D,E),(D.log||r.log).apply(D,E)}return S.namespace=d,S.useColors=r.useColors(),S.color=r.selectColor(d),S.extend=n,S.destroy=r.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(y!==r.namespaces&&(y=r.namespaces,w=r.enabled(d)),w),set:E=>{p=E}}),typeof r.init=="function"&&r.init(S),S}function n(d,f){const p=r(this.namespace+(typeof f>"u"?":":f)+d);return p.log=this.log,p}function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let f;const p=(typeof d=="string"?d:"").split(/[\s,]+/),y=p.length;for(f=0;f<y;f++)p[f]&&(d=p[f].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function s(){const d=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),d}function o(d){if(d[d.length-1]==="*")return!0;let f,p;for(f=0,p=r.skips.length;f<p;f++)if(r.skips[f].test(d))return!1;for(f=0,p=r.names.length;f<p;f++)if(r.names[f].test(d))return!0;return!1}function a(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function c(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var i5=n5;(function(t,e){e.formatArgs=n,e.save=i,e.load=s,e.useColors=r,e.storage=o(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let d=0,f=0;c[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(d++,p==="%c"&&(f=d))}),c.splice(f,0,u)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function s(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function o(){try{return localStorage}catch{}}t.exports=i5(e);const{formatters:a}=t.exports;a.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(wl,wl.exports);var s5=wl.exports;const _l=cs(s5)("wallet:sdk");_l.enabled=!0;const o5=t=>{_l("useDecrypt",t);const e=jr(),{request:r,data:n,error:i,loading:s}=Bi({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"decrypt",params:{ciphertexts:t}}}),o=i?i.message:n&&n.error,a=n;return{decrypt:()=>{t&&r()},plaintexts:a==null?void 0:a.plaintexts,loading:s,error:o}},a5={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function Ip(t,e){const{message:r,code:n}=a5[t];return{message:e?`${r} ${e}`:r,code:n}}function c5(){const t=jr(),{error:e,loading:r,setError:n,setLoading:i}=yl();async function s(){try{i(!0),n(void 0),await(await St()).disconnect({topic:t==null?void 0:t.topic,reason:Ip("USER_DISCONNECTED")}),ci.emit("session_change"),kn.setState({account:void 0})}catch(o){throw n(o),o}finally{i(!1)}}return{error:e,loading:r,disconnect:s}}const l5=({id:t,address:e,multisig:r=!1})=>{const n=jr(),[i]=kn(w=>[w.account]),{refetch:s,data:o,error:a,isLoading:c}=ga({queryKey:["useEvent",e??(i==null?void 0:i.address)??"",t??""],enabled:!!t&&!!n&&!!i&&(r?!!e:!0),wcParams:{topic:(n==null?void 0:n.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getEvent",params:{id:t,address:e}}}});Fi(({params:w,topic:S})=>{const E=w.event.name,D=w.event.address;E==="selectedAccountSynced"&&n&&n.topic===S&&D===(i==null?void 0:i.address)&&!c&&s()});const u=!!n&&!!i;mt.useEffect(()=>{u&&!c&&s()},[u]);const d=()=>{!!n&&!!i&&!c&&s()},f=a?a.message:o&&o.error,p=o,y=p==null?void 0:p.event;return{fetchEvent:d,event:y,error:f,loading:c}},u5=({filter:t,page:e})=>{const r=jr(),[n]=kn(w=>[w.account]);(t==null?void 0:t.programId)===""&&(t.programId=void 0);const{refetch:i,data:s,error:o,isLoading:a}=ga({queryKey:["useEvents",(n==null?void 0:n.address)??"",t,e],enabled:!!r&&!!n,wcParams:{topic:(r==null?void 0:r.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getEvents",params:{filter:t,page:e}}}});Fi(({id:w,params:S,topic:E})=>{const D=S.event.name,b=S.event.address;D==="selectedAccountSynced"&&r&&r.topic===E&&b===(n==null?void 0:n.address)&&!a&&i()});const c=!!r&&!!n;mt.useEffect(()=>{c&&!a&&i()},[c]);const u=()=>{!!r&&!!n&&!a&&i()},d=o?o.message:s&&s.error,f=s,p=f==null?void 0:f.events,y=(f==null?void 0:f.pageCount)??0;return{fetchPage:u,events:p,error:d,loading:a,page:e,pageCount:y}},d5=t=>{const e=jr(),{request:r,data:n,error:i,loading:s}=Bi({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"importSharedState",params:{seed:t}}}),o=i?i.message:n&&n.error,a=n;return{importSharedState:()=>{r()},data:a==null?void 0:a.data,loading:s,error:o}},h5=t=>{try{return JSON.stringify(t,null,2).replaceAll('"',"")??""}catch{return""}},f5=({address:t,multisig:e=!1,filter:r,page:n})=>{const i=jr(),[s,o]=kn(D=>[D.chainId,D.account]),{refetch:a,data:c,error:u,isLoading:d}=ga({queryKey:["useRecords",t??(o==null?void 0:o.address)??"",r,n],enabled:(e?!!t:!0)&&!!i&&!!o,wcParams:{topic:i==null?void 0:i.topic,chainId:s,request:{jsonrpc:"2.0",method:"getRecords",params:{address:t,filter:r,page:n}}}}),f=!!i&&!!o&&(e?!!t:!0);Fi(({params:D,topic:b})=>{const C=D.event.name,v=D.event.address;(C==="selectedAccountSynced"||C==="accountSelected"||C==="sharedAccountSynced"&&v===t)&&f&&i.topic===b&&a()}),mt.useEffect(()=>{f&&!d&&a()},[f]);const p=()=>{f&&!d&&a()},y=u?u.message:c&&c.error,w=c,S=w==null?void 0:w.records,E=(w==null?void 0:w.pageCount)??0;return{fetchPage:p,records:S,error:y,loading:d,page:n,pageCount:E}},p5=(t,e)=>{const r=jr(),{request:n,data:i,error:s,loading:o}=Bi({topic:(r==null?void 0:r.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"requestSignature",params:{message:t,address:e}}}),a=s?s.message:i&&i.error;return{requestSignature:()=>{n()},response:i,loading:o,error:a}},g5=t=>{const e=jr(),r=t==null?void 0:t.inputs.map(d=>typeof d=="string"?d:d.plaintext),{request:n,data:i,error:s,loading:o}=Bi({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"requestCreateEvent",params:{...t,inputs:r}}}),a=s?s.message:i&&i.error,c=i;return{createEvent:()=>{t&&(_l("useCreateEvent requesting...",t),n())},eventId:c==null?void 0:c.eventId,loading:o,error:a}},m5=async()=>{const t=await St(),e=await t.getSession(),r="aleo:1";if(!e||!r||!t)return{error:"no session, chainId, or connection"};try{const n=await t.request({topic:e==null?void 0:e.topic,chainId:r,request:{jsonrpc:"2.0",method:"getSelectedAccount"}});return kn.setState({account:n.account}),n}catch(n){const i=n.message;return console.error("getAccount error",i),{error:i}}},y5=async({address:t})=>{const e=await St(),r=await e.getSession(),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};try{return await e.request({topic:r==null?void 0:r.topic,chainId:n,request:{jsonrpc:"2.0",method:"getBalance",params:{assetId:void 0,address:t}}})}catch(i){const s=i.message;return console.error("getBalance error",s),{error:s}}},v5=async()=>{const t=await St();if(!t)throw new Error("call setConnection() first!");try{const e=await t.connect({requiredNamespaces:{aleo:{methods:Qo,chains:Ps,events:Yo}}});return ci.emit("session_change"),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE"),e}catch(e){console.error("connect error",e.message)}},w5=async t=>{const e=await St(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};const i=t==null?void 0:t.inputs.map(s=>typeof s=="string"?s:s.plaintext);try{return await e.request({topic:r.topic,chainId:n,request:{jsonrpc:"2.0",method:"requestCreateEvent",params:{...t,inputs:i}}})}catch(s){const o=s.message;return console.error("createEvent error",o),{error:o}}},b5=async()=>{const t=await St(),e=await(t==null?void 0:t.getSession()),r="aleo:1";if(!e||!r||!t)return{error:"no session, chainId, or connection"};try{return await t.request({topic:e.topic,chainId:r,request:{jsonrpc:"2.0",method:"createSharedState",params:{}}})}catch(n){const i=n.message;return console.error("createSharedState error",i),{error:i}}},_5=async t=>{const e=await St(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};try{return await e.request({topic:r.topic,chainId:n,request:{jsonrpc:"2.0",method:"decrypt",params:{ciphertexts:t}}})}catch(i){return console.error("decrypt error",i.message),{error:i.message}}},E5=async()=>{const t=await St(),e=await(t==null?void 0:t.getSession());if(!e||!t)return{error:"no session, or connection"};try{return await t.disconnect({reason:Ip("USER_DISCONNECTED"),topic:e.topic}),ci.emit("session_change"),kn.setState({account:void 0}),{}}catch(r){const n=r.message;return console.error("error disconnecting",n),{error:n}}},S5=async({id:t,address:e})=>{const r=await St(),n=await(r==null?void 0:r.getSession()),i="aleo:1";if(!n||!i||!r)return{event:void 0,error:"no session, chainId, or connection"};const s=async()=>await r.request({topic:(n==null?void 0:n.topic)??"",chainId:i,request:{jsonrpc:"2.0",method:"getEvent",params:{id:t,address:e}}});try{return await s()}catch(o){const a=o.message;return console.error("getEvents error",a),{error:a}}},x5=async t=>{const e=await St(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{events:void 0,error:"no session, chainId, or connection"};(t==null?void 0:t.programId)===""&&(t.programId=void 0);const i=async(s=0)=>await e.request({topic:(r==null?void 0:r.topic)??"",chainId:n,request:{jsonrpc:"2.0",method:"getEvents",params:{filter:t,page:s}}});try{return await i()}catch(s){const o=s.message;return console.error("getEvents error",o),{error:o}}},C5=async t=>{const e=await St(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};try{return await e.request({topic:(r==null?void 0:r.topic)??"",chainId:n,request:{jsonrpc:"2.0",method:"importSharedState",params:{seed:t}}})}catch(i){const s=i.message;return console.error("importSharedState error",s),{error:s}}},O5=async({address:t,filter:e,page:r=0})=>{const n=await St(),i=await(n==null?void 0:n.getSession()),s="aleo:1";if(!i||!s||!n)return{error:"no session, chainId, or connection"};const o=async(a=0)=>await n.request({topic:i.topic,chainId:s,request:{jsonrpc:"2.0",method:"getRecords",params:{address:t,filter:e,page:a}}});try{return await o()}catch(a){const c=a.message;return console.error("getRecords error",c),{error:c}}},D5=async({message:t,address:e})=>{const r=await St(),n=await(r==null?void 0:r.getSession()),i="aleo:1";if(!n||!i||!r)return{error:"no session, chainId, or connection"};try{return await r.request({topic:n.topic,chainId:i,request:{jsonrpc:"2.0",method:"requestSignature",params:{message:t,address:e}}})}catch(s){const o=s.message;return console.error("signature error",o),{error:o}}},I5=50;var El={exports:{}},Qs={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ap;function A5(){if(Ap)return Qs;Ap=1;var t=mt,e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,c,u){var d,f={},p=null,y=null;u!==void 0&&(p=""+u),c.key!==void 0&&(p=""+c.key),c.ref!==void 0&&(y=c.ref);for(d in c)n.call(c,d)&&!s.hasOwnProperty(d)&&(f[d]=c[d]);if(a&&a.defaultProps)for(d in c=a.defaultProps,c)f[d]===void 0&&(f[d]=c[d]);return{$$typeof:e,type:a,key:p,ref:y,props:f,_owner:i.current}}return Qs.Fragment=r,Qs.jsx=o,Qs.jsxs=o,Qs}var Ys={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tp;function T5(){return Tp||(Tp=1,process.env.NODE_ENV!=="production"&&function(){var t=mt,e=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),w=Symbol.iterator,S="@@iterator";function E(T){if(T===null||typeof T!="object")return null;var H=w&&T[w]||T[S];return typeof H=="function"?H:null}var D=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function b(T){{for(var H=arguments.length,ue=new Array(H>1?H-1:0),Ce=1;Ce<H;Ce++)ue[Ce-1]=arguments[Ce];C("error",T,ue)}}function C(T,H,ue){{var Ce=D.ReactDebugCurrentFrame,st=Ce.getStackAddendum();st!==""&&(H+="%s",ue=ue.concat([st]));var Ge=ue.map(function(Je){return String(Je)});Ge.unshift("Warning: "+H),Function.prototype.apply.call(console[T],console,Ge)}}var v=!1,_=!1,g=!1,l=!1,m=!1,P;P=Symbol.for("react.module.reference");function N(T){return!!(typeof T=="string"||typeof T=="function"||T===n||T===s||m||T===i||T===u||T===d||l||T===y||v||_||g||typeof T=="object"&&T!==null&&(T.$$typeof===p||T.$$typeof===f||T.$$typeof===o||T.$$typeof===a||T.$$typeof===c||T.$$typeof===P||T.getModuleId!==void 0))}function z(T,H,ue){var Ce=T.displayName;if(Ce)return Ce;var st=H.displayName||H.name||"";return st!==""?ue+"("+st+")":ue}function W(T){return T.displayName||"Context"}function G(T){if(T==null)return null;if(typeof T.tag=="number"&&b("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof T=="function")return T.displayName||T.name||null;if(typeof T=="string")return T;switch(T){case n:return"Fragment";case r:return"Portal";case s:return"Profiler";case i:return"StrictMode";case u:return"Suspense";case d:return"SuspenseList"}if(typeof T=="object")switch(T.$$typeof){case a:var H=T;return W(H)+".Consumer";case o:var ue=T;return W(ue._context)+".Provider";case c:return z(T,T.render,"ForwardRef");case f:var Ce=T.displayName||null;return Ce!==null?Ce:G(T.type)||"Memo";case p:{var st=T,Ge=st._payload,Je=st._init;try{return G(Je(Ge))}catch{return null}}}return null}var $=Object.assign,j=0,oe,Y,Z,X,K,ee,xe;function ne(){}ne.__reactDisabledLog=!0;function Ee(){{if(j===0){oe=console.log,Y=console.info,Z=console.warn,X=console.error,K=console.group,ee=console.groupCollapsed,xe=console.groupEnd;var T={configurable:!0,enumerable:!0,value:ne,writable:!0};Object.defineProperties(console,{info:T,log:T,warn:T,error:T,group:T,groupCollapsed:T,groupEnd:T})}j++}}function fe(){{if(j--,j===0){var T={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:$({},T,{value:oe}),info:$({},T,{value:Y}),warn:$({},T,{value:Z}),error:$({},T,{value:X}),group:$({},T,{value:K}),groupCollapsed:$({},T,{value:ee}),groupEnd:$({},T,{value:xe})})}j<0&&b("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var _e=D.ReactCurrentDispatcher,q;function B(T,H,ue){{if(q===void 0)try{throw Error()}catch(st){var Ce=st.stack.trim().match(/\n( *(at )?)/);q=Ce&&Ce[1]||""}return`
`+q+T}}var M=!1,h;{var R=typeof WeakMap=="function"?WeakMap:Map;h=new R}function ce(T,H){if(!T||M)return"";{var ue=h.get(T);if(ue!==void 0)return ue}var Ce;M=!0;var st=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Ge;Ge=_e.current,_e.current=null,Ee();try{if(H){var Je=function(){throw Error()};if(Object.defineProperty(Je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Je,[])}catch(sr){Ce=sr}Reflect.construct(T,[],Je)}else{try{Je.call()}catch(sr){Ce=sr}T.call(Je.prototype)}}else{try{throw Error()}catch(sr){Ce=sr}T()}}catch(sr){if(sr&&Ce&&typeof sr.stack=="string"){for(var Ke=sr.stack.split(`
`),Yt=Ce.stack.split(`
`),Ct=Ke.length-1,Nt=Yt.length-1;Ct>=1&&Nt>=0&&Ke[Ct]!==Yt[Nt];)Nt--;for(;Ct>=1&&Nt>=0;Ct--,Nt--)if(Ke[Ct]!==Yt[Nt]){if(Ct!==1||Nt!==1)do if(Ct--,Nt--,Nt<0||Ke[Ct]!==Yt[Nt]){var zt=`
`+Ke[Ct].replace(" at new "," at ");return T.displayName&&zt.includes("<anonymous>")&&(zt=zt.replace("<anonymous>",T.displayName)),typeof T=="function"&&h.set(T,zt),zt}while(Ct>=1&&Nt>=0);break}}}finally{M=!1,_e.current=Ge,fe(),Error.prepareStackTrace=st}var fn=T?T.displayName||T.name:"",Ei=fn?B(fn):"";return typeof T=="function"&&h.set(T,Ei),Ei}function he(T,H,ue){return ce(T,!1)}function We(T){var H=T.prototype;return!!(H&&H.isReactComponent)}function Ie(T,H,ue){if(T==null)return"";if(typeof T=="function")return ce(T,We(T));if(typeof T=="string")return B(T);switch(T){case u:return B("Suspense");case d:return B("SuspenseList")}if(typeof T=="object")switch(T.$$typeof){case c:return he(T.render);case f:return Ie(T.type,H,ue);case p:{var Ce=T,st=Ce._payload,Ge=Ce._init;try{return Ie(Ge(st),H,ue)}catch{}}}return""}var Me=Object.prototype.hasOwnProperty,Xe={},pt=D.ReactDebugCurrentFrame;function dt(T){if(T){var H=T._owner,ue=Ie(T.type,T._source,H?H.type:null);pt.setExtraStackFrame(ue)}else pt.setExtraStackFrame(null)}function Ve(T,H,ue,Ce,st){{var Ge=Function.call.bind(Me);for(var Je in T)if(Ge(T,Je)){var Ke=void 0;try{if(typeof T[Je]!="function"){var Yt=Error((Ce||"React class")+": "+ue+" type `"+Je+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof T[Je]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Yt.name="Invariant Violation",Yt}Ke=T[Je](H,Je,Ce,ue,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Ct){Ke=Ct}Ke&&!(Ke instanceof Error)&&(dt(st),b("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",Ce||"React class",ue,Je,typeof Ke),dt(null)),Ke instanceof Error&&!(Ke.message in Xe)&&(Xe[Ke.message]=!0,dt(st),b("Failed %s type: %s",ue,Ke.message),dt(null))}}}var Be=Array.isArray;function Ne(T){return Be(T)}function ke(T){{var H=typeof Symbol=="function"&&Symbol.toStringTag,ue=H&&T[Symbol.toStringTag]||T.constructor.name||"Object";return ue}}function $e(T){try{return Te(T),!1}catch{return!0}}function Te(T){return""+T}function Ae(T){if($e(T))return b("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",ke(T)),Te(T)}var Se=D.ReactCurrentOwner,Ue={key:!0,ref:!0,__self:!0,__source:!0},qe,De,He;He={};function et(T){if(Me.call(T,"ref")){var H=Object.getOwnPropertyDescriptor(T,"ref").get;if(H&&H.isReactWarning)return!1}return T.ref!==void 0}function nt(T){if(Me.call(T,"key")){var H=Object.getOwnPropertyDescriptor(T,"key").get;if(H&&H.isReactWarning)return!1}return T.key!==void 0}function tt(T,H){if(typeof T.ref=="string"&&Se.current&&H&&Se.current.stateNode!==H){var ue=G(Se.current.type);He[ue]||(b('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',G(Se.current.type),T.ref),He[ue]=!0)}}function it(T,H){{var ue=function(){qe||(qe=!0,b("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",H))};ue.isReactWarning=!0,Object.defineProperty(T,"key",{get:ue,configurable:!0})}}function Sr(T,H){{var ue=function(){De||(De=!0,b("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",H))};ue.isReactWarning=!0,Object.defineProperty(T,"ref",{get:ue,configurable:!0})}}var fr=function(T,H,ue,Ce,st,Ge,Je){var Ke={$$typeof:e,type:T,key:H,ref:ue,props:Je,_owner:Ge};return Ke._store={},Object.defineProperty(Ke._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Ke,"_self",{configurable:!1,enumerable:!1,writable:!1,value:Ce}),Object.defineProperty(Ke,"_source",{configurable:!1,enumerable:!1,writable:!1,value:st}),Object.freeze&&(Object.freeze(Ke.props),Object.freeze(Ke)),Ke};function Mr(T,H,ue,Ce,st){{var Ge,Je={},Ke=null,Yt=null;ue!==void 0&&(Ae(ue),Ke=""+ue),nt(H)&&(Ae(H.key),Ke=""+H.key),et(H)&&(Yt=H.ref,tt(H,st));for(Ge in H)Me.call(H,Ge)&&!Ue.hasOwnProperty(Ge)&&(Je[Ge]=H[Ge]);if(T&&T.defaultProps){var Ct=T.defaultProps;for(Ge in Ct)Je[Ge]===void 0&&(Je[Ge]=Ct[Ge])}if(Ke||Yt){var Nt=typeof T=="function"?T.displayName||T.name||"Unknown":T;Ke&&it(Je,Nt),Yt&&Sr(Je,Nt)}return fr(T,Ke,Yt,st,Ce,Se.current,Je)}}var Gt=D.ReactCurrentOwner,Qt=D.ReactDebugCurrentFrame;function Ar(T){if(T){var H=T._owner,ue=Ie(T.type,T._source,H?H.type:null);Qt.setExtraStackFrame(ue)}else Qt.setExtraStackFrame(null)}var hn;hn=!1;function wt(T){return typeof T=="object"&&T!==null&&T.$$typeof===e}function bt(){{if(Gt.current){var T=G(Gt.current.type);if(T)return`

Check the render method of \``+T+"`."}return""}}function At(T){{if(T!==void 0){var H=T.fileName.replace(/^.*[\\\/]/,""),ue=T.lineNumber;return`

Check your code at `+H+":"+ue+"."}return""}}var xt={};function Tt(T){{var H=bt();if(!H){var ue=typeof T=="string"?T:T.displayName||T.name;ue&&(H=`

Check the top-level render call using <`+ue+">.")}return H}}function _t(T,H){{if(!T._store||T._store.validated||T.key!=null)return;T._store.validated=!0;var ue=Tt(H);if(xt[ue])return;xt[ue]=!0;var Ce="";T&&T._owner&&T._owner!==Gt.current&&(Ce=" It was passed a child from "+G(T._owner.type)+"."),Ar(T),b('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',ue,Ce),Ar(null)}}function Mt(T,H){{if(typeof T!="object")return;if(Ne(T))for(var ue=0;ue<T.length;ue++){var Ce=T[ue];wt(Ce)&&_t(Ce,H)}else if(wt(T))T._store&&(T._store.validated=!0);else if(T){var st=E(T);if(typeof st=="function"&&st!==T.entries)for(var Ge=st.call(T),Je;!(Je=Ge.next()).done;)wt(Je.value)&&_t(Je.value,H)}}}function jt(T){{var H=T.type;if(H==null||typeof H=="string")return;var ue;if(typeof H=="function")ue=H.propTypes;else if(typeof H=="object"&&(H.$$typeof===c||H.$$typeof===f))ue=H.propTypes;else return;if(ue){var Ce=G(H);Ve(ue,T.props,"prop",Ce,T)}else if(H.PropTypes!==void 0&&!hn){hn=!0;var st=G(H);b("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",st||"Unknown")}typeof H.getDefaultProps=="function"&&!H.getDefaultProps.isReactClassApproved&&b("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Bt(T){{for(var H=Object.keys(T.props),ue=0;ue<H.length;ue++){var Ce=H[ue];if(Ce!=="children"&&Ce!=="key"){Ar(T),b("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",Ce),Ar(null);break}}T.ref!==null&&(Ar(T),b("Invalid attribute `ref` supplied to `React.Fragment`."),Ar(null))}}function kt(T,H,ue,Ce,st,Ge){{var Je=N(T);if(!Je){var Ke="";(T===void 0||typeof T=="object"&&T!==null&&Object.keys(T).length===0)&&(Ke+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Yt=At(st);Yt?Ke+=Yt:Ke+=bt();var Ct;T===null?Ct="null":Ne(T)?Ct="array":T!==void 0&&T.$$typeof===e?(Ct="<"+(G(T.type)||"Unknown")+" />",Ke=" Did you accidentally export a JSX literal instead of a component?"):Ct=typeof T,b("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Ct,Ke)}var Nt=Mr(T,H,ue,st,Ge);if(Nt==null)return Nt;if(Je){var zt=H.children;if(zt!==void 0)if(Ce)if(Ne(zt)){for(var fn=0;fn<zt.length;fn++)Mt(zt[fn],T);Object.freeze&&Object.freeze(zt)}else b("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Mt(zt,T)}return T===n?Bt(Nt):jt(Nt),Nt}}function qt(T,H,ue){return kt(T,H,ue,!0)}function Rt(T,H,ue){return kt(T,H,ue,!1)}var Pt=Rt,vt=qt;Ys.Fragment=n,Ys.jsx=Pt,Ys.jsxs=vt}()),Ys}process.env.NODE_ENV==="production"?El.exports=A5():El.exports=T5();var R5=El.exports;const Sl=new TE,P5=({dAppName:t,dAppDescription:e,dAppUrl:r,dAppIconURL:n,children:i})=>(mt.useEffect(()=>{$f({dAppName:t,dAppDescription:e,dAppUrl:r,dAppIconURL:n})},[]),R5.jsx(kE,{client:Sl,children:i})),N5=["wc@2:client:0.3//proposal","wc@2:core:0.3//subscription","wc@2:core:0.3//keychain","wc@2:core:0.3//messages","wc@2:core:0.3//history","wc@2:client:0.3//session","wc@2:core:0.3//expirer","WCM_WALLETCONNECT_CLIENT_ID","wc@2:core:0.3//pairing","debug"],Rp=X0.version;try{const t=localStorage.getItem("puzzle-sdk-version");Rp!==t&&(N5.forEach(e=>{localStorage.removeItem(e)}),localStorage.setItem("puzzle-sdk-version",Rp))}catch(t){console.error(t)}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ma=window,xl=ma.ShadowRoot&&(ma.ShadyCSS===void 0||ma.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Cl=Symbol(),Pp=new WeakMap;let Np=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==Cl)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(xl&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=Pp.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&Pp.set(r,e))}return e}toString(){return this.cssText}};const $5=t=>new Np(typeof t=="string"?t:t+"",void 0,Cl),ut=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,i,s)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new Np(r,t,Cl)},L5=(t,e)=>{xl?t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet):e.forEach(r=>{const n=document.createElement("style"),i=ma.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)})},$p=xl?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return $5(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Ol;const ya=window,Lp=ya.trustedTypes,M5=Lp?Lp.emptyScript:"",Mp=ya.reactiveElementPolyfillSupport,Dl={toAttribute(t,e){switch(e){case Boolean:t=t?M5:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},kp=(t,e)=>e!==t&&(e==e||t==t),Il={attribute:!0,type:String,converter:Dl,reflect:!1,hasChanged:kp},Al="finalized";let qi=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var r;this.finalize(),((r=this.h)!==null&&r!==void 0?r:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((r,n)=>{const i=this._$Ep(n,r);i!==void 0&&(this._$Ev.set(i,n),e.push(i))}),e}static createProperty(e,r=Il){if(r.state&&(r.attribute=!1),this.finalize(),this.elementProperties.set(e,r),!r.noAccessor&&!this.prototype.hasOwnProperty(e)){const n=typeof e=="symbol"?Symbol():"__"+e,i=this.getPropertyDescriptor(e,n,r);i!==void 0&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){return{get(){return this[r]},set(i){const s=this[e];this[r]=i,this.requestUpdate(e,s,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||Il}static finalize(){if(this.hasOwnProperty(Al))return!1;this[Al]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const r=this.properties,n=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(const i of n)this.createProperty(i,r[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const i of n)r.unshift($p(i))}else e!==void 0&&r.push($p(e));return r}static _$Ep(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(r=>r(this))}addController(e){var r,n;((r=this._$ES)!==null&&r!==void 0?r:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)===null||n===void 0||n.call(e))}removeController(e){var r;(r=this._$ES)===null||r===void 0||r.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,r)=>{this.hasOwnProperty(r)&&(this._$Ei.set(r,this[r]),delete this[r])})}createRenderRoot(){var e;const r=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return L5(r,this.constructor.elementStyles),r}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostConnected)===null||n===void 0?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostDisconnected)===null||n===void 0?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$EO(e,r,n=Il){var i;const s=this.constructor._$Ep(e,n);if(s!==void 0&&n.reflect===!0){const o=(((i=n.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?n.converter:Dl).toAttribute(r,n.type);this._$El=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$El=null}}_$AK(e,r){var n;const i=this.constructor,s=i._$Ev.get(e);if(s!==void 0&&this._$El!==s){const o=i.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((n=o.converter)===null||n===void 0?void 0:n.fromAttribute)!==void 0?o.converter:Dl;this._$El=s,this[s]=a.fromAttribute(r,o.type),this._$El=null}}requestUpdate(e,r,n){let i=!0;e!==void 0&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||kp)(this[e],r)?(this._$AL.has(e)||this._$AL.set(e,r),n.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,s)=>this[s]=i),this._$Ei=void 0);let r=!1;const n=this._$AL;try{r=this.shouldUpdate(n),r?(this.willUpdate(n),(e=this._$ES)===null||e===void 0||e.forEach(i=>{var s;return(s=i.hostUpdate)===null||s===void 0?void 0:s.call(i)}),this.update(n)):this._$Ek()}catch(i){throw r=!1,this._$Ek(),i}r&&this._$AE(n)}willUpdate(e){}_$AE(e){var r;(r=this._$ES)===null||r===void 0||r.forEach(n=>{var i;return(i=n.hostUpdated)===null||i===void 0?void 0:i.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((r,n)=>this._$EO(n,this[n],r)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};qi[Al]=!0,qi.elementProperties=new Map,qi.elementStyles=[],qi.shadowRootOptions={mode:"open"},Mp==null||Mp({ReactiveElement:qi}),((Ol=ya.reactiveElementVersions)!==null&&Ol!==void 0?Ol:ya.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Tl;const va=window,zi=va.trustedTypes,Up=zi?zi.createPolicy("lit-html",{createHTML:t=>t}):void 0,Rl="$lit$",Fn=`lit$${(Math.random()+"").slice(9)}$`,Fp="?"+Fn,k5=`<${Fp}>`,pi=document,Js=()=>pi.createComment(""),Xs=t=>t===null||typeof t!="object"&&typeof t!="function",jp=Array.isArray,U5=t=>jp(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Pl=`[ 	
\f\r]`,eo=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Bp=/-->/g,qp=/>/g,gi=RegExp(`>|${Pl}(?:([^\\s"'>=/]+)(${Pl}*=${Pl}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),zp=/'/g,Wp=/"/g,Vp=/^(?:script|style|textarea|title)$/i,Hp=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),le=Hp(1),Ft=Hp(2),mi=Symbol.for("lit-noChange"),Zt=Symbol.for("lit-nothing"),Kp=new WeakMap,yi=pi.createTreeWalker(pi,129,null,!1);function Zp(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Up!==void 0?Up.createHTML(e):e}const F5=(t,e)=>{const r=t.length-1,n=[];let i,s=e===2?"<svg>":"",o=eo;for(let a=0;a<r;a++){const c=t[a];let u,d,f=-1,p=0;for(;p<c.length&&(o.lastIndex=p,d=o.exec(c),d!==null);)p=o.lastIndex,o===eo?d[1]==="!--"?o=Bp:d[1]!==void 0?o=qp:d[2]!==void 0?(Vp.test(d[2])&&(i=RegExp("</"+d[2],"g")),o=gi):d[3]!==void 0&&(o=gi):o===gi?d[0]===">"?(o=i??eo,f=-1):d[1]===void 0?f=-2:(f=o.lastIndex-d[2].length,u=d[1],o=d[3]===void 0?gi:d[3]==='"'?Wp:zp):o===Wp||o===zp?o=gi:o===Bp||o===qp?o=eo:(o=gi,i=void 0);const y=o===gi&&t[a+1].startsWith("/>")?" ":"";s+=o===eo?c+k5:f>=0?(n.push(u),c.slice(0,f)+Rl+c.slice(f)+Fn+y):c+Fn+(f===-2?(n.push(void 0),a):y)}return[Zp(t,s+(t[r]||"<?>")+(e===2?"</svg>":"")),n]};class to{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[u,d]=F5(e,r);if(this.el=to.createElement(u,n),yi.currentNode=this.el.content,r===2){const f=this.el.content,p=f.firstChild;p.remove(),f.append(...p.childNodes)}for(;(i=yi.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes()){const f=[];for(const p of i.getAttributeNames())if(p.endsWith(Rl)||p.startsWith(Fn)){const y=d[o++];if(f.push(p),y!==void 0){const w=i.getAttribute(y.toLowerCase()+Rl).split(Fn),S=/([.?@])?(.*)/.exec(y);c.push({type:1,index:s,name:S[2],strings:w,ctor:S[1]==="."?B5:S[1]==="?"?z5:S[1]==="@"?W5:wa})}else c.push({type:6,index:s})}for(const p of f)i.removeAttribute(p)}if(Vp.test(i.tagName)){const f=i.textContent.split(Fn),p=f.length-1;if(p>0){i.textContent=zi?zi.emptyScript:"";for(let y=0;y<p;y++)i.append(f[y],Js()),yi.nextNode(),c.push({type:2,index:++s});i.append(f[p],Js())}}}else if(i.nodeType===8)if(i.data===Fp)c.push({type:2,index:s});else{let f=-1;for(;(f=i.data.indexOf(Fn,f+1))!==-1;)c.push({type:7,index:s}),f+=Fn.length-1}s++}}static createElement(e,r){const n=pi.createElement("template");return n.innerHTML=e,n}}function Wi(t,e,r=t,n){var i,s,o,a;if(e===mi)return e;let c=n!==void 0?(i=r._$Co)===null||i===void 0?void 0:i[n]:r._$Cl;const u=Xs(e)?void 0:e._$litDirective$;return(c==null?void 0:c.constructor)!==u&&((s=c==null?void 0:c._$AO)===null||s===void 0||s.call(c,!1),u===void 0?c=void 0:(c=new u(t),c._$AT(t,r,n)),n!==void 0?((o=(a=r)._$Co)!==null&&o!==void 0?o:a._$Co=[])[n]=c:r._$Cl=c),c!==void 0&&(e=Wi(t,c._$AS(t,e.values),c,n)),e}class j5{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var r;const{el:{content:n},parts:i}=this._$AD,s=((r=e==null?void 0:e.creationScope)!==null&&r!==void 0?r:pi).importNode(n,!0);yi.currentNode=s;let o=yi.nextNode(),a=0,c=0,u=i[0];for(;u!==void 0;){if(a===u.index){let d;u.type===2?d=new ro(o,o.nextSibling,this,e):u.type===1?d=new u.ctor(o,u.name,u.strings,this,e):u.type===6&&(d=new V5(o,this,e)),this._$AV.push(d),u=i[++c]}a!==(u==null?void 0:u.index)&&(o=yi.nextNode(),a++)}return yi.currentNode=pi,s}v(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class ro{constructor(e,r,n,i){var s;this.type=2,this._$AH=Zt,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cp=(s=i==null?void 0:i.isConnected)===null||s===void 0||s}get _$AU(){var e,r;return(r=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&r!==void 0?r:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Wi(this,e,r),Xs(e)?e===Zt||e==null||e===""?(this._$AH!==Zt&&this._$AR(),this._$AH=Zt):e!==this._$AH&&e!==mi&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):U5(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==Zt&&Xs(this._$AH)?this._$AA.nextSibling.data=e:this.$(pi.createTextNode(e)),this._$AH=e}g(e){var r;const{values:n,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=to.createElement(Zp(i.h,i.h[0]),this.options)),i);if(((r=this._$AH)===null||r===void 0?void 0:r._$AD)===s)this._$AH.v(n);else{const o=new j5(s,this),a=o.u(this.options);o.v(n),this.$(a),this._$AH=o}}_$AC(e){let r=Kp.get(e.strings);return r===void 0&&Kp.set(e.strings,r=new to(e)),r}T(e){jp(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const s of e)i===r.length?r.push(n=new ro(this.k(Js()),this.k(Js()),this,this.options)):n=r[i],n._$AI(s),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,r);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var r;this._$AM===void 0&&(this._$Cp=e,(r=this._$AP)===null||r===void 0||r.call(this,e))}}class wa{constructor(e,r,n,i,s){this.type=1,this._$AH=Zt,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Zt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,r=this,n,i){const s=this.strings;let o=!1;if(s===void 0)e=Wi(this,e,r,0),o=!Xs(e)||e!==this._$AH&&e!==mi,o&&(this._$AH=e);else{const a=e;let c,u;for(e=s[0],c=0;c<s.length-1;c++)u=Wi(this,a[n+c],r,c),u===mi&&(u=this._$AH[c]),o||(o=!Xs(u)||u!==this._$AH[c]),u===Zt?e=Zt:e!==Zt&&(e+=(u??"")+s[c+1]),this._$AH[c]=u}o&&!i&&this.j(e)}j(e){e===Zt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class B5 extends wa{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Zt?void 0:e}}const q5=zi?zi.emptyScript:"";let z5=class extends wa{constructor(){super(...arguments),this.type=4}j(e){e&&e!==Zt?this.element.setAttribute(this.name,q5):this.element.removeAttribute(this.name)}};class W5 extends wa{constructor(e,r,n,i,s){super(e,r,n,i,s),this.type=5}_$AI(e,r=this){var n;if((e=(n=Wi(this,e,r,0))!==null&&n!==void 0?n:Zt)===mi)return;const i=this._$AH,s=e===Zt&&i!==Zt||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,o=e!==Zt&&(i===Zt||s);s&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,n;typeof this._$AH=="function"?this._$AH.call((n=(r=this.options)===null||r===void 0?void 0:r.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}let V5=class{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Wi(this,e)}};const Gp=va.litHtmlPolyfillSupport;Gp==null||Gp(to,ro),((Tl=va.litHtmlVersions)!==null&&Tl!==void 0?Tl:va.litHtmlVersions=[]).push("2.8.0");const H5=(t,e,r)=>{var n,i;const s=(n=r==null?void 0:r.renderBefore)!==null&&n!==void 0?n:e;let o=s._$litPart$;if(o===void 0){const a=(i=r==null?void 0:r.renderBefore)!==null&&i!==void 0?i:null;s._$litPart$=o=new ro(e.insertBefore(Js(),a),a,void 0,r??{})}return o._$AI(t),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Nl,$l;class Ye extends qi{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,r;const n=super.createRenderRoot();return(e=(r=this.renderOptions).renderBefore)!==null&&e!==void 0||(r.renderBefore=n.firstChild),n}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=H5(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return mi}}Ye.finalized=!0,Ye._$litElement$=!0,(Nl=globalThis.litElementHydrateSupport)===null||Nl===void 0||Nl.call(globalThis,{LitElement:Ye});const Qp=globalThis.litElementPolyfillSupport;Qp==null||Qp({LitElement:Ye}),(($l=globalThis.litElementVersions)!==null&&$l!==void 0?$l:globalThis.litElementVersions=[]).push("3.3.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ot=t=>e=>typeof e=="function"?((r,n)=>(customElements.define(r,n),n))(t,e):((r,n)=>{const{kind:i,elements:s}=n;return{kind:i,elements:s,finisher(o){customElements.define(r,o)}}})(t,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const K5=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(r){r.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}},Z5=(t,e,r)=>{e.constructor.createProperty(r,t)};function je(t){return(e,r)=>r!==void 0?Z5(t,e,r):K5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Ir(t){return je({...t,state:!0})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Ll;((Ll=window.HTMLSlotElement)===null||Ll===void 0?void 0:Ll.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const G5={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Q5=t=>(...e)=>({_$litDirective$:t,values:e});class Y5{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,n){this._$Ct=e,this._$AM=r,this._$Ci=n}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const En=Q5(class extends Y5{constructor(t){var e;if(super(t),t.type!==G5.ATTRIBUTE||t.name!=="class"||((e=t.strings)===null||e===void 0?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,n;if(this.it===void 0){this.it=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!(!((r=this.nt)===null||r===void 0)&&r.has(s))&&this.it.add(s);return this.render(e)}const i=t.element.classList;this.it.forEach(s=>{s in e||(i.remove(s),this.it.delete(s))});for(const s in e){const o=!!e[s];o===this.it.has(s)||!((n=this.nt)===null||n===void 0)&&n.has(s)||(o?(i.add(s),this.it.add(s)):(i.remove(s),this.it.delete(s)))}return mi}});function J5(t,e){t.indexOf(e)===-1&&t.push(e)}const Yp=(t,e,r)=>Math.min(Math.max(r,t),e),qr={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},ba=t=>typeof t=="number",Vi=t=>Array.isArray(t)&&!ba(t[0]),X5=(t,e,r)=>{const n=e-t;return((r-t)%n+n)%n+t};function e6(t,e){return Vi(t)?t[X5(0,t.length,e)]:t}const Jp=(t,e,r)=>-r*t+r*e+t,Xp=()=>{},jn=t=>t,Ml=(t,e,r)=>e-t===0?1:(r-t)/(e-t);function e0(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=Ml(0,e,n);t.push(Jp(r,1,i))}}function t6(t){const e=[0];return e0(e,t-1),e}function r6(t,e=t6(t.length),r=jn){const n=t.length,i=n-e.length;return i>0&&e0(e,i),s=>{let o=0;for(;o<n-2&&!(s<e[o+1]);o++);let a=Yp(0,1,Ml(e[o],e[o+1],s));return a=e6(r,o)(a),Jp(t[o],t[o+1],a)}}const t0=t=>Array.isArray(t)&&ba(t[0]),kl=t=>typeof t=="object"&&!!t.createAnimation,Hi=t=>typeof t=="function",n6=t=>typeof t=="string",no={ms:t=>t*1e3,s:t=>t/1e3},r0=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,i6=1e-7,s6=12;function o6(t,e,r,n,i){let s,o,a=0;do o=e+(r-e)/2,s=r0(o,n,i)-t,s>0?r=o:e=o;while(Math.abs(s)>i6&&++a<s6);return o}function io(t,e,r,n){if(t===e&&r===n)return jn;const i=s=>o6(s,0,1,t,r);return s=>s===0||s===1?s:r0(i(s),e,n)}const a6=(t,e="end")=>r=>{r=e==="end"?Math.min(r,.999):Math.max(r,.001);const n=r*t,i=e==="end"?Math.floor(n):Math.ceil(n);return Yp(0,1,i/t)},n0={ease:io(.25,.1,.25,1),"ease-in":io(.42,0,1,1),"ease-in-out":io(.42,0,.58,1),"ease-out":io(0,0,.58,1)},c6=/\((.*?)\)/;function i0(t){if(Hi(t))return t;if(t0(t))return io(...t);if(n0[t])return n0[t];if(t.startsWith("steps")){const e=c6.exec(t);if(e){const r=e[1].split(",");return a6(parseFloat(r[0]),r[1].trim())}}return jn}class s0{constructor(e,r=[0,1],{easing:n,duration:i=qr.duration,delay:s=qr.delay,endDelay:o=qr.endDelay,repeat:a=qr.repeat,offset:c,direction:u="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=jn,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((f,p)=>{this.resolve=f,this.reject=p}),n=n||qr.easing,kl(n)){const f=n.createAnimation(r);n=f.easing,r=f.keyframes||r,i=f.duration||i}this.repeat=a,this.easing=Vi(n)?jn:i0(n),this.updateDuration(i);const d=r6(r,c,Vi(n)?n.map(i0):jn);this.tick=f=>{var p;s=s;let y=0;this.pauseTime!==void 0?y=this.pauseTime:y=(f-this.startTime)*this.rate,this.t=y,y/=1e3,y=Math.max(y-s,0),this.playState==="finished"&&this.pauseTime===void 0&&(y=this.totalDuration);const w=y/this.duration;let S=Math.floor(w),E=w%1;!E&&w>=1&&(E=1),E===1&&S--;const D=S%2;(u==="reverse"||u==="alternate"&&D||u==="alternate-reverse"&&!D)&&(E=1-E);const b=y>=this.totalDuration?1:Math.min(E,1),C=d(this.easing(b));e(C),this.pauseTime===void 0&&(this.playState==="finished"||y>=this.totalDuration+o)?(this.playState="finished",(p=this.resolve)===null||p===void 0||p.call(this,C)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const e=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(e=this.reject)===null||e===void 0||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){this.pauseTime!==void 0||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}var Ul=function(){};process.env.NODE_ENV!=="production"&&(Ul=function(t,e){if(!t)throw new Error(e)});class l6{setAnimation(e){this.animation=e,e==null||e.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const Fl=new WeakMap;function o0(t){return Fl.has(t)||Fl.set(t,{transforms:[],values:new Map}),Fl.get(t)}function u6(t,e){return t.has(e)||t.set(e,new l6),t.get(e)}const d6=["","X","Y","Z"],h6=["translate","scale","rotate","skew"],_a={x:"translateX",y:"translateY",z:"translateZ"},a0={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},f6={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:a0,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:jn},skew:a0},so=new Map,jl=t=>`--motion-${t}`,Ea=["x","y","z"];h6.forEach(t=>{d6.forEach(e=>{Ea.push(t+e),so.set(jl(t+e),f6[t])})});const p6=(t,e)=>Ea.indexOf(t)-Ea.indexOf(e),g6=new Set(Ea),c0=t=>g6.has(t),m6=(t,e)=>{_a[e]&&(e=_a[e]);const{transforms:r}=o0(t);J5(r,e),t.style.transform=y6(r)},y6=t=>t.sort(p6).reduce(v6,"").trim(),v6=(t,e)=>`${t} ${e}(var(${jl(e)}))`,Bl=t=>t.startsWith("--"),l0=new Set;function w6(t){if(!l0.has(t)){l0.add(t);try{const{syntax:e,initialValue:r}=so.has(t)?so.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:r})}catch{}}}const ql=(t,e)=>document.createElement("div").animate(t,e),u0={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{ql({opacity:[1]})}catch{return!1}return!0},finished:()=>!!ql({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{ql({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},zl={},Ki={};for(const t in u0)Ki[t]=()=>(zl[t]===void 0&&(zl[t]=u0[t]()),zl[t]);const b6=.015,_6=(t,e)=>{let r="";const n=Math.round(e/b6);for(let i=0;i<n;i++)r+=t(Ml(0,n-1,i))+", ";return r.substring(0,r.length-2)},d0=(t,e)=>Hi(t)?Ki.linearEasing()?`linear(${_6(t,e)})`:qr.easing:t0(t)?E6(t):t,E6=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`;function S6(t,e){for(let r=0;r<t.length;r++)t[r]===null&&(t[r]=r?t[r-1]:e());return t}const x6=t=>Array.isArray(t)?t:[t];function Wl(t){return _a[t]&&(t=_a[t]),c0(t)?jl(t):t}const Sa={get:(t,e)=>{e=Wl(e);let r=Bl(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!r&&r!==0){const n=so.get(e);n&&(r=n.initialValue)}return r},set:(t,e,r)=>{e=Wl(e),Bl(e)?t.style.setProperty(e,r):t.style[e]=r}};function h0(t,e=!0){if(!(!t||t.playState==="finished"))try{t.stop?t.stop():(e&&t.commitStyles(),t.cancel())}catch{}}function C6(t,e){var r;let n=(e==null?void 0:e.toDefaultUnit)||jn;const i=t[t.length-1];if(n6(i)){const s=((r=i.match(/(-?[\d.]+)([a-z%]*)/))===null||r===void 0?void 0:r[2])||"";s&&(n=o=>o+s)}return n}function O6(){return window.__MOTION_DEV_TOOLS_RECORD}function D6(t,e,r,n={},i){const s=O6(),o=n.record!==!1&&s;let a,{duration:c=qr.duration,delay:u=qr.delay,endDelay:d=qr.endDelay,repeat:f=qr.repeat,easing:p=qr.easing,persist:y=!1,direction:w,offset:S,allowWebkitAcceleration:E=!1}=n;const D=o0(t),b=c0(e);let C=Ki.waapi();b&&m6(t,e);const v=Wl(e),_=u6(D.values,v),g=so.get(v);return h0(_.animation,!(kl(p)&&_.generator)&&n.record!==!1),()=>{const l=()=>{var N,z;return(z=(N=Sa.get(t,v))!==null&&N!==void 0?N:g==null?void 0:g.initialValue)!==null&&z!==void 0?z:0};let m=S6(x6(r),l);const P=C6(m,g);if(kl(p)){const N=p.createAnimation(m,e!=="opacity",l,v,_);p=N.easing,m=N.keyframes||m,c=N.duration||c}if(Bl(v)&&(Ki.cssRegisterProperty()?w6(v):C=!1),b&&!Ki.linearEasing()&&(Hi(p)||Vi(p)&&p.some(Hi))&&(C=!1),C){g&&(m=m.map(W=>ba(W)?g.toDefaultUnit(W):W)),m.length===1&&(!Ki.partialKeyframes()||o)&&m.unshift(l());const N={delay:no.ms(u),duration:no.ms(c),endDelay:no.ms(d),easing:Vi(p)?void 0:d0(p,c),direction:w,iterations:f+1,fill:"both"};a=t.animate({[v]:m,offset:S,easing:Vi(p)?p.map(W=>d0(W,c)):void 0},N),a.finished||(a.finished=new Promise((W,G)=>{a.onfinish=W,a.oncancel=G}));const z=m[m.length-1];a.finished.then(()=>{y||(Sa.set(t,v,z),a.cancel())}).catch(Xp),E||(a.playbackRate=1.000001)}else if(i&&b)m=m.map(N=>typeof N=="string"?parseFloat(N):N),m.length===1&&m.unshift(parseFloat(l())),a=new i(N=>{Sa.set(t,v,P?P(N):N)},m,Object.assign(Object.assign({},n),{duration:c,easing:p}));else{const N=m[m.length-1];Sa.set(t,v,g&&ba(N)?g.toDefaultUnit(N):N)}return o&&s(t,e,m,{duration:c,delay:u,easing:p,repeat:f,offset:S},"motion-one"),_.setAnimation(a),a}}const I6=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);function A6(t,e){var r;return typeof t=="string"?e?((r=e[t])!==null&&r!==void 0||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t||[])}const T6=t=>t(),f0=(t,e,r=qr.duration)=>new Proxy({animations:t.map(T6).filter(Boolean),duration:r,options:e},P6),R6=t=>t.animations[0],P6={get:(t,e)=>{const r=R6(t);switch(e){case"duration":return t.duration;case"currentTime":return no.s((r==null?void 0:r[e])||0);case"playbackRate":case"playState":return r==null?void 0:r[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(N6)).catch(Xp)),t.finished;case"stop":return()=>{t.animations.forEach(n=>h0(n))};case"forEachNative":return n=>{t.animations.forEach(i=>n(i,t))};default:return typeof(r==null?void 0:r[e])>"u"?void 0:()=>t.animations.forEach(n=>n[e]())}},set:(t,e,r)=>{switch(e){case"currentTime":r=no.ms(r);case"playbackRate":for(let n=0;n<t.animations.length;n++)t.animations[n][e]=r;return!0}return!1}},N6=t=>t.finished;function $6(t,e,r){return Hi(t)?t(e,r):t}function L6(t){return function(r,n,i={}){r=A6(r);const s=r.length;Ul(!!s,"No valid element provided."),Ul(!!n,"No keyframes defined.");const o=[];for(let a=0;a<s;a++){const c=r[a];for(const u in n){const d=I6(i,u);d.delay=$6(d.delay,a,s);const f=D6(c,u,n[u],d,t);o.push(f)}}return f0(o,i,i.duration)}}const M6=L6(s0);function k6(t,e={}){return f0([()=>{const r=new s0(t,[0,1],e);return r.finished.catch(()=>{}),r}],e,e.duration)}function vi(t,e,r){return(Hi(t)?k6:M6)(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Er=t=>t??Zt;var oo={},U6=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},p0={},Lr={};let Vl;const F6=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Lr.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},Lr.getSymbolTotalCodewords=function(e){return F6[e]},Lr.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e},Lr.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Vl=e},Lr.isKanjiModeEnabled=function(){return typeof Vl<"u"},Lr.toSJIS=function(e){return Vl(e)};var xa={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(xa);function g0(){this.buffer=[],this.length=0}g0.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var j6=g0;function ao(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}ao.prototype.set=function(t,e,r,n){const i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)},ao.prototype.get=function(t,e){return this.data[t*this.size+e]},ao.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r},ao.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var B6=ao,m0={};(function(t){const e=Lr.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(n){const i=[],s=t.getRowColCoords(n),o=s.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||i.push([s[a],s[c]]);return i}})(m0);var y0={};const q6=Lr.getSymbolSize,v0=7;y0.getPositions=function(e){const r=q6(e);return[[0,0],[r-v0,0],[0,r-v0]]};var w0={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,c=0,u=null,d=null;for(let f=0;f<s;f++){a=c=0,u=d=null;for(let p=0;p<s;p++){let y=i.get(f,p);y===u?a++:(a>=5&&(o+=e.N1+(a-5)),u=y,a=1),y=i.get(p,f),y===d?c++:(c>=5&&(o+=e.N1+(c-5)),d=y,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let c=0;c<s-1;c++){const u=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(u===4||u===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,c=0;for(let u=0;u<s;u++){a=c=0;for(let d=0;d<s;d++)a=a<<1&2047|i.get(u,d),d>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|i.get(d,u),d>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(n,i,s){switch(n){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)s.isReserved(c,a)||s.xor(c,a,r(i,c,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let u=0;u<o;u++){s(u),t.applyMask(u,i);const d=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(u,i),d<c&&(c=d,a=u)}return a}})(w0);var Ca={};const Bn=xa,Oa=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Da=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Ca.getBlocksCount=function(e,r){switch(r){case Bn.L:return Oa[(e-1)*4+0];case Bn.M:return Oa[(e-1)*4+1];case Bn.Q:return Oa[(e-1)*4+2];case Bn.H:return Oa[(e-1)*4+3];default:return}},Ca.getTotalCodewordsCount=function(e,r){switch(r){case Bn.L:return Da[(e-1)*4+0];case Bn.M:return Da[(e-1)*4+1];case Bn.Q:return Da[(e-1)*4+2];case Bn.H:return Da[(e-1)*4+3];default:return}};var b0={},Ia={};const co=new Uint8Array(512),Aa=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)co[r]=e,Aa[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)co[r]=co[r-255]})(),Ia.log=function(e){if(e<1)throw new Error("log("+e+")");return Aa[e]},Ia.exp=function(e){return co[e]},Ia.mul=function(e,r){return e===0||r===0?0:co[Aa[e]+Aa[r]]},function(t){const e=Ia;t.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(n[o],i[a]);return s},t.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}}(b0);const _0=b0;function Hl(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Hl.prototype.initialize=function(e){this.degree=e,this.genPoly=_0.generateECPolynomial(this.degree)},Hl.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=_0.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(n,i),s}return n};var z6=Hl,E0={},qn={},Kl={};Kl.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var un={};const S0="[0-9]+",W6="[A-Z $%*+\\-./:]+";let lo="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";lo=lo.replace(/u/g,"\\u");const V6="(?:(?![A-Z0-9 $%*+\\-./:]|"+lo+`)(?:.|[\r
]))+`;un.KANJI=new RegExp(lo,"g"),un.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),un.BYTE=new RegExp(V6,"g"),un.NUMERIC=new RegExp(S0,"g"),un.ALPHANUMERIC=new RegExp(W6,"g");const H6=new RegExp("^"+lo+"$"),K6=new RegExp("^"+S0+"$"),Z6=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");un.testKanji=function(e){return H6.test(e)},un.testNumeric=function(e){return K6.test(e)},un.testAlphanumeric=function(e){return Z6.test(e)},function(t){const e=Kl,r=un;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return n(s)}catch{return o}}}(qn),function(t){const e=Lr,r=Ca,n=xa,i=qn,s=Kl,o=7973,a=e.getBCHDigit(o);function c(p,y,w){for(let S=1;S<=40;S++)if(y<=t.getCapacity(S,w,p))return S}function u(p,y){return i.getCharCountIndicator(p,y)+4}function d(p,y){let w=0;return p.forEach(function(S){const E=u(S.mode,y);w+=E+S.getBitsLength()}),w}function f(p,y){for(let w=1;w<=40;w++)if(d(p,w)<=t.getCapacity(w,y,i.MIXED))return w}t.from=function(y,w){return s.isValid(y)?parseInt(y,10):w},t.getCapacity=function(y,w,S){if(!s.isValid(y))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=i.BYTE);const E=e.getSymbolTotalCodewords(y),D=r.getTotalCodewordsCount(y,w),b=(E-D)*8;if(S===i.MIXED)return b;const C=b-u(S,y);switch(S){case i.NUMERIC:return Math.floor(C/10*3);case i.ALPHANUMERIC:return Math.floor(C/11*2);case i.KANJI:return Math.floor(C/13);case i.BYTE:default:return Math.floor(C/8)}},t.getBestVersionForData=function(y,w){let S;const E=n.from(w,n.M);if(Array.isArray(y)){if(y.length>1)return f(y,E);if(y.length===0)return 1;S=y[0]}else S=y;return c(S.mode,S.getLength(),E)},t.getEncodedBits=function(y){if(!s.isValid(y)||y<7)throw new Error("Invalid QR Code version");let w=y<<12;for(;e.getBCHDigit(w)-a>=0;)w^=o<<e.getBCHDigit(w)-a;return y<<12|w}}(E0);var x0={};const Zl=Lr,C0=1335,G6=21522,O0=Zl.getBCHDigit(C0);x0.getEncodedBits=function(e,r){const n=e.bit<<3|r;let i=n<<10;for(;Zl.getBCHDigit(i)-O0>=0;)i^=C0<<Zl.getBCHDigit(i)-O0;return(n<<10|i)^G6};var D0={};const Q6=qn;function Zi(t){this.mode=Q6.NUMERIC,this.data=t.toString()}Zi.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},Zi.prototype.getLength=function(){return this.data.length},Zi.prototype.getBitsLength=function(){return Zi.getBitsLength(this.data.length)},Zi.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);const s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};var Y6=Zi;const J6=qn,Gl=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Gi(t){this.mode=J6.ALPHANUMERIC,this.data=t}Gi.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},Gi.prototype.getLength=function(){return this.data.length},Gi.prototype.getBitsLength=function(){return Gi.getBitsLength(this.data.length)},Gi.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=Gl.indexOf(this.data[r])*45;n+=Gl.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(Gl.indexOf(this.data[r]),6)};var X6=Gi,eS=function(e){for(var r=[],n=e.length,i=0;i<n;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&n>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){r.push(s);continue}if(s<2048){r.push(s>>6|192),r.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128);continue}if(s>=65536&&s<=1114111){r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const tS=eS,rS=qn;function Qi(t){this.mode=rS.BYTE,typeof t=="string"&&(t=tS(t)),this.data=new Uint8Array(t)}Qi.getBitsLength=function(e){return e*8},Qi.prototype.getLength=function(){return this.data.length},Qi.prototype.getBitsLength=function(){return Qi.getBitsLength(this.data.length)},Qi.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var nS=Qi;const iS=qn,sS=Lr;function Yi(t){this.mode=iS.KANJI,this.data=t}Yi.getBitsLength=function(e){return e*13},Yi.prototype.getLength=function(){return this.data.length},Yi.prototype.getBitsLength=function(){return Yi.getBitsLength(this.data.length)},Yi.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=sS.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var oS=Yi,I0={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,i){var s={},o={};o[n]=0;var a=e.PriorityQueue.make();a.push(n,0);for(var c,u,d,f,p,y,w,S,E;!a.empty();){c=a.pop(),u=c.value,f=c.cost,p=r[u]||{};for(d in p)p.hasOwnProperty(d)&&(y=p[d],w=f+y,S=o[d],E=typeof o[d]>"u",(E||S>w)&&(o[d]=w,a.push(d,w),s[d]=u))}if(typeof i<"u"&&typeof o[i]>"u"){var D=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(D)}return s},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],s=n;s;)i.push(s),r[s],s=r[s];return i.reverse(),i},find_path:function(r,n,i){var s=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},s;r=r||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(I0);var aS=I0.exports;(function(t){const e=qn,r=Y6,n=X6,i=nS,s=oS,o=un,a=Lr,c=aS;function u(D){return unescape(encodeURIComponent(D)).length}function d(D,b,C){const v=[];let _;for(;(_=D.exec(C))!==null;)v.push({data:_[0],index:_.index,mode:b,length:_[0].length});return v}function f(D){const b=d(o.NUMERIC,e.NUMERIC,D),C=d(o.ALPHANUMERIC,e.ALPHANUMERIC,D);let v,_;return a.isKanjiModeEnabled()?(v=d(o.BYTE,e.BYTE,D),_=d(o.KANJI,e.KANJI,D)):(v=d(o.BYTE_KANJI,e.BYTE,D),_=[]),b.concat(C,v,_).sort(function(l,m){return l.index-m.index}).map(function(l){return{data:l.data,mode:l.mode,length:l.length}})}function p(D,b){switch(b){case e.NUMERIC:return r.getBitsLength(D);case e.ALPHANUMERIC:return n.getBitsLength(D);case e.KANJI:return s.getBitsLength(D);case e.BYTE:return i.getBitsLength(D)}}function y(D){return D.reduce(function(b,C){const v=b.length-1>=0?b[b.length-1]:null;return v&&v.mode===C.mode?(b[b.length-1].data+=C.data,b):(b.push(C),b)},[])}function w(D){const b=[];for(let C=0;C<D.length;C++){const v=D[C];switch(v.mode){case e.NUMERIC:b.push([v,{data:v.data,mode:e.ALPHANUMERIC,length:v.length},{data:v.data,mode:e.BYTE,length:v.length}]);break;case e.ALPHANUMERIC:b.push([v,{data:v.data,mode:e.BYTE,length:v.length}]);break;case e.KANJI:b.push([v,{data:v.data,mode:e.BYTE,length:u(v.data)}]);break;case e.BYTE:b.push([{data:v.data,mode:e.BYTE,length:u(v.data)}])}}return b}function S(D,b){const C={},v={start:{}};let _=["start"];for(let g=0;g<D.length;g++){const l=D[g],m=[];for(let P=0;P<l.length;P++){const N=l[P],z=""+g+P;m.push(z),C[z]={node:N,lastCount:0},v[z]={};for(let W=0;W<_.length;W++){const G=_[W];C[G]&&C[G].node.mode===N.mode?(v[G][z]=p(C[G].lastCount+N.length,N.mode)-p(C[G].lastCount,N.mode),C[G].lastCount+=N.length):(C[G]&&(C[G].lastCount=N.length),v[G][z]=p(N.length,N.mode)+4+e.getCharCountIndicator(N.mode,b))}}_=m}for(let g=0;g<_.length;g++)v[_[g]].end=0;return{map:v,table:C}}function E(D,b){let C;const v=e.getBestModeForData(D);if(C=e.from(b,v),C!==e.BYTE&&C.bit<v.bit)throw new Error('"'+D+'" cannot be encoded with mode '+e.toString(C)+`.
 Suggested mode is: `+e.toString(v));switch(C===e.KANJI&&!a.isKanjiModeEnabled()&&(C=e.BYTE),C){case e.NUMERIC:return new r(D);case e.ALPHANUMERIC:return new n(D);case e.KANJI:return new s(D);case e.BYTE:return new i(D)}}t.fromArray=function(b){return b.reduce(function(C,v){return typeof v=="string"?C.push(E(v,null)):v.data&&C.push(E(v.data,v.mode)),C},[])},t.fromString=function(b,C){const v=f(b,a.isKanjiModeEnabled()),_=w(v),g=S(_,C),l=c.find_path(g.map,"start","end"),m=[];for(let P=1;P<l.length-1;P++)m.push(g.table[l[P]].node);return t.fromArray(y(m))},t.rawSplit=function(b){return t.fromArray(f(b,a.isKanjiModeEnabled()))}})(D0);const Ta=Lr,Ql=xa,cS=j6,lS=B6,uS=m0,dS=y0,Yl=w0,Jl=Ca,hS=z6,Ra=E0,fS=x0,pS=qn,Xl=D0;function gS(t,e){const r=t.size,n=dS.getPositions(e);for(let i=0;i<n.length;i++){const s=n[i][0],o=n[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||r<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(s+a,o+c,!0,!0):t.set(s+a,o+c,!1,!0))}}function mS(t){const e=t.size;for(let r=8;r<e-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function yS(t,e){const r=uS.getPositions(e);for(let n=0;n<r.length;n++){const i=r[n][0],s=r[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function vS(t,e){const r=t.size,n=Ra.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+r-8-3,o=(n>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function eu(t,e,r){const n=t.size,i=fS.getEncodedBits(e,r);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(n-15+s,8,o,!0),s<8?t.set(8,n-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(n-8,8,1,!0)}function wS(t,e){const r=t.size;let n=-1,i=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,a-c)){let u=!1;o<e.length&&(u=(e[o]>>>s&1)===1),t.set(i,a-c,u),s--,s===-1&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function bS(t,e,r){const n=new cS;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),pS.getCharCountIndicator(c.mode,t)),c.write(n)});const i=Ta.getSymbolTotalCodewords(t),s=Jl.getTotalCodewordsCount(t,e),o=(i-s)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let c=0;c<a;c++)n.put(c%2?17:236,8);return _S(n,t,e)}function _S(t,e,r){const n=Ta.getSymbolTotalCodewords(e),i=Jl.getTotalCodewordsCount(e,r),s=n-i,o=Jl.getBlocksCount(e,r),a=n%o,c=o-a,u=Math.floor(n/o),d=Math.floor(s/o),f=d+1,p=u-d,y=new hS(p);let w=0;const S=new Array(o),E=new Array(o);let D=0;const b=new Uint8Array(t.buffer);for(let l=0;l<o;l++){const m=l<c?d:f;S[l]=b.slice(w,w+m),E[l]=y.encode(S[l]),w+=m,D=Math.max(D,m)}const C=new Uint8Array(n);let v=0,_,g;for(_=0;_<D;_++)for(g=0;g<o;g++)_<S[g].length&&(C[v++]=S[g][_]);for(_=0;_<p;_++)for(g=0;g<o;g++)C[v++]=E[g][_];return C}function ES(t,e,r,n){let i;if(Array.isArray(t))i=Xl.fromArray(t);else if(typeof t=="string"){let u=e;if(!u){const d=Xl.rawSplit(t);u=Ra.getBestVersionForData(d,r)}i=Xl.fromString(t,u||40)}else throw new Error("Invalid data");const s=Ra.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=bS(e,r,i),a=Ta.getSymbolSize(e),c=new lS(a);return gS(c,e),mS(c),yS(c,e),eu(c,r,0),e>=7&&vS(c,e),wS(c,o),isNaN(n)&&(n=Yl.getBestMask(c,eu.bind(null,c,r))),Yl.applyMask(n,c),eu(c,r,n),{modules:c,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}p0.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=Ql.M,i,s;return typeof r<"u"&&(n=Ql.from(r.errorCorrectionLevel,Ql.M),i=Ra.from(r.version),s=Yl.from(r.maskPattern),r.toSJISFunc&&Ta.setToSJISFunction(r.toSJISFunc)),ES(e,i,n,s)};var A0={},tu={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const s=t.getScale(n,i);return Math.floor((n+i.margin*2)*s)},t.qrToImageData=function(n,i,s){const o=i.modules.size,a=i.modules.data,c=t.getScale(o,s),u=Math.floor((o+s.margin*2)*c),d=s.margin*c,f=[s.color.light,s.color.dark];for(let p=0;p<u;p++)for(let y=0;y<u;y++){let w=(p*u+y)*4,S=s.color.light;if(p>=d&&y>=d&&p<u-d&&y<u-d){const E=Math.floor((p-d)/c),D=Math.floor((y-d)/c);S=f[a[E*o+D]?1:0]}n[w++]=S.r,n[w++]=S.g,n[w++]=S.b,n[w]=S.a}}})(tu),function(t){const e=tu;function r(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let c=a,u=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(u=n()),c=e.getOptions(c);const d=e.getImageWidth(s.modules.size,c),f=u.getContext("2d"),p=f.createImageData(d,d);return e.qrToImageData(p.data,s,c),r(f,u,d),f.putImageData(p,0,0),u},t.renderToDataURL=function(s,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const u=t.render(s,o,c),d=c.type||"image/png",f=c.rendererOpts||{};return u.toDataURL(d,f.quality)}}(A0);var T0={};const SS=tu;function R0(t,e){const r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function ru(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function xS(t,e,r){let n="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),u=Math.floor(a/e);!c&&!s&&(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(n+=s?ru("M",c+r,.5+u+r):ru("m",i,0),i=0,s=!1),c+1<e&&t[a+1]||(n+=ru("h",o),o=0)):i++}return n}T0.render=function(e,r,n){const i=SS.getOptions(r),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,c=i.color.light.a?"<path "+R0(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",u="<path "+R0(i.color.dark,"stroke")+' d="'+xS(o,s,i.margin)+'"/>',d='viewBox="0 0 '+a+" "+a+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+u+`</svg>
`;return typeof n=="function"&&n(null,p),p};const CS=U6,nu=p0,P0=A0,OS=T0;function iu(t,e,r,n,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!CS())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(c,u){try{const d=nu.create(r,n);c(t(d,e,n))}catch(d){u(d)}})}try{const c=nu.create(r,n);i(null,t(c,e,n))}catch(c){i(c)}}oo.create=nu.create,oo.toCanvas=iu.bind(null,P0.render),oo.toDataURL=iu.bind(null,P0.renderToDataURL),oo.toString=iu.bind(null,function(t,e,r){return OS.render(t,r)});var DS=Object.defineProperty,N0=Object.getOwnPropertySymbols,IS=Object.prototype.hasOwnProperty,AS=Object.prototype.propertyIsEnumerable,$0=(t,e,r)=>e in t?DS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,su=(t,e)=>{for(var r in e||(e={}))IS.call(e,r)&&$0(t,r,e[r]);if(N0)for(var r of N0(e))AS.call(e,r)&&$0(t,r,e[r]);return t};function TS(){var t;const e=(t=In.state.themeMode)!=null?t:"dark",r={light:{foreground:{1:"rgb(20,20,20)",2:"rgb(121,134,134)",3:"rgb(158,169,169)"},background:{1:"rgb(255,255,255)",2:"rgb(241,243,243)",3:"rgb(228,231,231)"},overlay:"rgba(0,0,0,0.1)"},dark:{foreground:{1:"rgb(228,231,231)",2:"rgb(148,158,158)",3:"rgb(110,119,119)"},background:{1:"rgb(20,20,20)",2:"rgb(39,42,42)",3:"rgb(59,64,64)"},overlay:"rgba(255,255,255,0.1)"}}[e];return{"--wcm-color-fg-1":r.foreground[1],"--wcm-color-fg-2":r.foreground[2],"--wcm-color-fg-3":r.foreground[3],"--wcm-color-bg-1":r.background[1],"--wcm-color-bg-2":r.background[2],"--wcm-color-bg-3":r.background[3],"--wcm-color-overlay":r.overlay}}function L0(){return{"--wcm-accent-color":"#3396FF","--wcm-accent-fill-color":"#FFFFFF","--wcm-z-index":"89","--wcm-background-color":"#3396FF","--wcm-background-border-radius":"8px","--wcm-container-border-radius":"30px","--wcm-wallet-icon-border-radius":"15px","--wcm-wallet-icon-large-border-radius":"30px","--wcm-wallet-icon-small-border-radius":"7px","--wcm-input-border-radius":"28px","--wcm-button-border-radius":"10px","--wcm-notification-border-radius":"36px","--wcm-secondary-button-border-radius":"28px","--wcm-icon-button-border-radius":"50%","--wcm-button-hover-highlight-border-radius":"10px","--wcm-text-big-bold-size":"20px","--wcm-text-big-bold-weight":"600","--wcm-text-big-bold-line-height":"24px","--wcm-text-big-bold-letter-spacing":"-0.03em","--wcm-text-big-bold-text-transform":"none","--wcm-text-xsmall-bold-size":"10px","--wcm-text-xsmall-bold-weight":"700","--wcm-text-xsmall-bold-line-height":"12px","--wcm-text-xsmall-bold-letter-spacing":"0.02em","--wcm-text-xsmall-bold-text-transform":"uppercase","--wcm-text-xsmall-regular-size":"12px","--wcm-text-xsmall-regular-weight":"600","--wcm-text-xsmall-regular-line-height":"14px","--wcm-text-xsmall-regular-letter-spacing":"-0.03em","--wcm-text-xsmall-regular-text-transform":"none","--wcm-text-small-thin-size":"14px","--wcm-text-small-thin-weight":"500","--wcm-text-small-thin-line-height":"16px","--wcm-text-small-thin-letter-spacing":"-0.03em","--wcm-text-small-thin-text-transform":"none","--wcm-text-small-regular-size":"14px","--wcm-text-small-regular-weight":"600","--wcm-text-small-regular-line-height":"16px","--wcm-text-small-regular-letter-spacing":"-0.03em","--wcm-text-small-regular-text-transform":"none","--wcm-text-medium-regular-size":"16px","--wcm-text-medium-regular-weight":"600","--wcm-text-medium-regular-line-height":"20px","--wcm-text-medium-regular-letter-spacing":"-0.03em","--wcm-text-medium-regular-text-transform":"none","--wcm-font-family":"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', sans-serif","--wcm-font-feature-settings":"'tnum' on, 'lnum' on, 'case' on","--wcm-success-color":"rgb(38,181,98)","--wcm-error-color":"rgb(242, 90, 103)","--wcm-overlay-background-color":"rgba(0, 0, 0, 0.3)","--wcm-overlay-backdrop-filter":"none"}}const rt={getPreset(t){return L0()[t]},setTheme(){const t=document.querySelector(":root"),{themeVariables:e}=In.state;if(t){const r=su(su(su({},TS()),L0()),e);Object.entries(r).forEach(([n,i])=>t.style.setProperty(n,i))}},globalCss:ut`*,::after,::before{margin:0;padding:0;box-sizing:border-box;font-style:normal;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;backface-visibility:hidden}button{cursor:pointer;display:flex;justify-content:center;align-items:center;position:relative;border:none;background-color:transparent;transition:all .2s ease}@media (hover:hover) and (pointer:fine){button:active{transition:all .1s ease;transform:scale(.93)}}button::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;transition:background-color,.2s ease}button:disabled{cursor:not-allowed}button svg,button wcm-text{position:relative;z-index:1}input{border:none;outline:0;appearance:none}img{display:block}::selection{color:var(--wcm-accent-fill-color);background:var(--wcm-accent-color)}`},RS=ut`button{border-radius:var(--wcm-secondary-button-border-radius);height:28px;padding:0 10px;background-color:var(--wcm-accent-color)}button path{fill:var(--wcm-accent-fill-color)}button::after{border-radius:inherit;border:1px solid var(--wcm-color-overlay)}button:disabled::after{background-color:transparent}.wcm-icon-left svg{margin-right:5px}.wcm-icon-right svg{margin-left:5px}button:active::after{background-color:var(--wcm-color-overlay)}.wcm-ghost,.wcm-ghost:active::after,.wcm-outline{background-color:transparent}.wcm-ghost:active{opacity:.5}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}.wcm-ghost:hover::after{background-color:transparent}.wcm-ghost:hover{opacity:.5}}button:disabled{background-color:var(--wcm-color-bg-3);pointer-events:none}.wcm-ghost::after{border-color:transparent}.wcm-ghost path{fill:var(--wcm-color-fg-2)}.wcm-outline path{fill:var(--wcm-accent-color)}.wcm-outline:disabled{background-color:transparent;opacity:.5}`;var PS=Object.defineProperty,NS=Object.getOwnPropertyDescriptor,Ji=(t,e,r,n)=>{for(var i=n>1?void 0:n?NS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&PS(e,r,i),i};let zn=class extends Ye{constructor(){super(...arguments),this.disabled=!1,this.iconLeft=void 0,this.iconRight=void 0,this.onClick=()=>null,this.variant="default"}render(){const t={"wcm-icon-left":this.iconLeft!==void 0,"wcm-icon-right":this.iconRight!==void 0,"wcm-ghost":this.variant==="ghost","wcm-outline":this.variant==="outline"};let e="inverse";return this.variant==="ghost"&&(e="secondary"),this.variant==="outline"&&(e="accent"),le`<button class="${En(t)}" ?disabled="${this.disabled}" @click="${this.onClick}">${this.iconLeft}<wcm-text variant="small-regular" color="${e}"><slot></slot></wcm-text>${this.iconRight}</button>`}};zn.styles=[rt.globalCss,RS],Ji([je({type:Boolean})],zn.prototype,"disabled",2),Ji([je()],zn.prototype,"iconLeft",2),Ji([je()],zn.prototype,"iconRight",2),Ji([je()],zn.prototype,"onClick",2),Ji([je()],zn.prototype,"variant",2),zn=Ji([ot("wcm-button")],zn);const $S=ut`:host{display:inline-block}button{padding:0 15px 1px;height:40px;border-radius:var(--wcm-button-border-radius);color:var(--wcm-accent-fill-color);background-color:var(--wcm-accent-color)}button::after{content:'';top:0;bottom:0;left:0;right:0;position:absolute;background-color:transparent;border-radius:inherit;transition:background-color .2s ease;border:1px solid var(--wcm-color-overlay)}button:active::after{background-color:var(--wcm-color-overlay)}button:disabled{padding-bottom:0;background-color:var(--wcm-color-bg-3);color:var(--wcm-color-fg-3)}.wcm-secondary{color:var(--wcm-accent-color);background-color:transparent}.wcm-secondary::after{display:none}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}}`;var LS=Object.defineProperty,MS=Object.getOwnPropertyDescriptor,ou=(t,e,r,n)=>{for(var i=n>1?void 0:n?MS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&LS(e,r,i),i};let uo=class extends Ye{constructor(){super(...arguments),this.disabled=!1,this.variant="primary"}render(){const t={"wcm-secondary":this.variant==="secondary"};return le`<button ?disabled="${this.disabled}" class="${En(t)}"><slot></slot></button>`}};uo.styles=[rt.globalCss,$S],ou([je({type:Boolean})],uo.prototype,"disabled",2),ou([je()],uo.prototype,"variant",2),uo=ou([ot("wcm-button-big")],uo);const kS=ut`:host{background-color:var(--wcm-color-bg-2);border-top:1px solid var(--wcm-color-bg-3)}div{padding:10px 20px;display:inherit;flex-direction:inherit;align-items:inherit;width:inherit;justify-content:inherit}`;var US=Object.defineProperty,FS=Object.getOwnPropertyDescriptor,jS=(t,e,r,n)=>{for(var i=n>1?void 0:n?FS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&US(e,r,i),i};let au=class extends Ye{render(){return le`<div><slot></slot></div>`}};au.styles=[rt.globalCss,kS],au=jS([ot("wcm-info-footer")],au);const ht={CROSS_ICON:Ft`<svg width="12" height="12" viewBox="0 0 12 12"><path d="M9.94 11A.75.75 0 1 0 11 9.94L7.414 6.353a.5.5 0 0 1 0-.708L11 2.061A.75.75 0 1 0 9.94 1L6.353 4.586a.5.5 0 0 1-.708 0L2.061 1A.75.75 0 0 0 1 2.06l3.586 3.586a.5.5 0 0 1 0 .708L1 9.939A.75.75 0 1 0 2.06 11l3.586-3.586a.5.5 0 0 1 .708 0L9.939 11Z" fill="#fff"/></svg>`,WALLET_CONNECT_LOGO:Ft`<svg width="178" height="29" viewBox="0 0 178 29" id="wcm-wc-logo"><path d="M10.683 7.926c5.284-5.17 13.85-5.17 19.134 0l.636.623a.652.652 0 0 1 0 .936l-2.176 2.129a.343.343 0 0 1-.478 0l-.875-.857c-3.686-3.607-9.662-3.607-13.348 0l-.937.918a.343.343 0 0 1-.479 0l-2.175-2.13a.652.652 0 0 1 0-.936l.698-.683Zm23.633 4.403 1.935 1.895a.652.652 0 0 1 0 .936l-8.73 8.543a.687.687 0 0 1-.956 0L20.37 17.64a.172.172 0 0 0-.239 0l-6.195 6.063a.687.687 0 0 1-.957 0l-8.73-8.543a.652.652 0 0 1 0-.936l1.936-1.895a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .239 0l6.195-6.064a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .24 0l6.195-6.064a.687.687 0 0 1 .956 0ZM48.093 20.948l2.338-9.355c.139-.515.258-1.07.416-1.942.12.872.258 1.427.357 1.942l2.022 9.355h4.181l3.528-13.874h-3.21l-1.943 8.523a24.825 24.825 0 0 0-.456 2.457c-.158-.931-.317-1.625-.495-2.438l-1.883-8.542h-4.201l-2.042 8.542a41.204 41.204 0 0 0-.475 2.438 41.208 41.208 0 0 0-.476-2.438l-1.903-8.542h-3.349l3.508 13.874h4.083ZM63.33 21.304c1.585 0 2.596-.654 3.11-1.605-.059.297-.078.595-.078.892v.357h2.655V15.22c0-2.735-1.248-4.32-4.3-4.32-2.636 0-4.36 1.466-4.52 3.487h2.914c.1-.891.734-1.426 1.705-1.426.911 0 1.407.515 1.407 1.11 0 .435-.258.693-1.03.792l-1.388.159c-2.061.257-3.825 1.01-3.825 3.19 0 1.982 1.645 3.092 3.35 3.092Zm.891-2.041c-.773 0-1.348-.436-1.348-1.19 0-.733.655-1.09 1.645-1.268l.674-.119c.575-.118.892-.218 1.09-.396v.912c0 1.228-.892 2.06-2.06 2.06ZM70.398 7.074v13.874h2.874V7.074h-2.874ZM74.934 7.074v13.874h2.874V7.074h-2.874ZM84.08 21.304c2.735 0 4.5-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922H81.92ZM94.92 21.146c.633 0 1.248-.1 1.525-.179v-2.18c-.218.04-.475.06-.693.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.338v-2.24h-2.338V7.788H91.47v3.448H89.37v2.24h2.1v4.201c0 2.3 1.15 3.469 3.45 3.469ZM104.62 21.304c3.924 0 6.302-2.299 6.599-5.608h-3.111c-.238 1.803-1.506 3.032-3.369 3.032-2.2 0-3.746-1.784-3.746-4.796 0-2.953 1.605-4.638 3.805-4.638 1.883 0 2.953 1.15 3.171 2.834h3.191c-.317-3.448-2.854-5.41-6.342-5.41-3.984 0-7.036 2.695-7.036 7.214 0 4.677 2.676 7.372 6.838 7.372ZM117.449 21.304c2.993 0 5.114-1.882 5.114-5.172 0-3.23-2.121-5.233-5.114-5.233-2.972 0-5.093 2.002-5.093 5.233 0 3.29 2.101 5.172 5.093 5.172Zm0-2.22c-1.327 0-2.18-1.09-2.18-2.952 0-1.903.892-2.973 2.18-2.973 1.308 0 2.2 1.07 2.2 2.973 0 1.862-.872 2.953-2.2 2.953ZM126.569 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.229-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM137.464 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.228-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM149.949 21.304c2.735 0 4.499-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922h-3.984ZM160.876 21.304c3.013 0 4.658-1.645 4.975-4.201h-2.874c-.099 1.07-.713 1.982-2.001 1.982-1.309 0-2.2-1.21-2.2-2.993 0-1.942 1.03-2.933 2.259-2.933 1.209 0 1.803.872 1.883 1.882h2.873c-.218-2.358-1.823-4.142-4.776-4.142-2.874 0-5.153 1.903-5.153 5.193 0 3.25 1.923 5.212 5.014 5.212ZM172.067 21.146c.634 0 1.248-.1 1.526-.179v-2.18c-.218.04-.476.06-.694.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.339v-2.24h-2.339V7.788h-2.854v3.448h-2.1v2.24h2.1v4.201c0 2.3 1.15 3.469 3.449 3.469Z" fill="#fff"/></svg>`,WALLET_CONNECT_ICON:Ft`<svg width="28" height="20" viewBox="0 0 28 20"><g clip-path="url(#a)"><path d="M7.386 6.482c3.653-3.576 9.575-3.576 13.228 0l.44.43a.451.451 0 0 1 0 .648L19.55 9.033a.237.237 0 0 1-.33 0l-.606-.592c-2.548-2.496-6.68-2.496-9.228 0l-.648.634a.237.237 0 0 1-.33 0L6.902 7.602a.451.451 0 0 1 0-.647l.483-.473Zm16.338 3.046 1.339 1.31a.451.451 0 0 1 0 .648l-6.035 5.909a.475.475 0 0 1-.662 0L14.083 13.2a.119.119 0 0 0-.166 0l-4.283 4.194a.475.475 0 0 1-.662 0l-6.035-5.91a.451.451 0 0 1 0-.647l1.338-1.31a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0Z" fill="#000000"/></g><defs><clipPath id="a"><path fill="#ffffff" d="M0 0h28v20H0z"/></clipPath></defs></svg>`,WALLET_CONNECT_ICON_COLORED:Ft`<svg width="96" height="96" fill="none"><path fill="#fff" d="M25.322 33.597c12.525-12.263 32.83-12.263 45.355 0l1.507 1.476a1.547 1.547 0 0 1 0 2.22l-5.156 5.048a.814.814 0 0 1-1.134 0l-2.074-2.03c-8.737-8.555-22.903-8.555-31.64 0l-2.222 2.175a.814.814 0 0 1-1.134 0l-5.156-5.049a1.547 1.547 0 0 1 0-2.22l1.654-1.62Zm56.019 10.44 4.589 4.494a1.547 1.547 0 0 1 0 2.22l-20.693 20.26a1.628 1.628 0 0 1-2.267 0L48.283 56.632a.407.407 0 0 0-.567 0L33.03 71.012a1.628 1.628 0 0 1-2.268 0L10.07 50.75a1.547 1.547 0 0 1 0-2.22l4.59-4.494a1.628 1.628 0 0 1 2.267 0l14.687 14.38c.156.153.41.153.567 0l14.685-14.38a1.628 1.628 0 0 1 2.268 0l14.687 14.38c.156.153.41.153.567 0l14.686-14.38a1.628 1.628 0 0 1 2.268 0Z"/><path stroke="#000" d="M25.672 33.954c12.33-12.072 32.325-12.072 44.655 0l1.508 1.476a1.047 1.047 0 0 1 0 1.506l-5.157 5.048a.314.314 0 0 1-.434 0l-2.074-2.03c-8.932-8.746-23.409-8.746-32.34 0l-2.222 2.174a.314.314 0 0 1-.434 0l-5.157-5.048a1.047 1.047 0 0 1 0-1.506l1.655-1.62Zm55.319 10.44 4.59 4.494a1.047 1.047 0 0 1 0 1.506l-20.694 20.26a1.128 1.128 0 0 1-1.568 0l-14.686-14.38a.907.907 0 0 0-1.267 0L32.68 70.655a1.128 1.128 0 0 1-1.568 0L10.42 50.394a1.047 1.047 0 0 1 0-1.506l4.59-4.493a1.128 1.128 0 0 1 1.567 0l14.687 14.379a.907.907 0 0 0 1.266 0l-.35-.357.35.357 14.686-14.38a1.128 1.128 0 0 1 1.568 0l14.687 14.38a.907.907 0 0 0 1.267 0l14.686-14.38a1.128 1.128 0 0 1 1.568 0Z"/></svg>`,BACK_ICON:Ft`<svg width="10" height="18" viewBox="0 0 10 18"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.735.179a.75.75 0 0 1 .087 1.057L2.92 8.192a1.25 1.25 0 0 0 0 1.617l5.902 6.956a.75.75 0 1 1-1.144.97L1.776 10.78a2.75 2.75 0 0 1 0-3.559L7.678.265A.75.75 0 0 1 8.735.18Z" fill="#fff"/></svg>`,COPY_ICON:Ft`<svg width="24" height="24" fill="none"><path fill="#fff" fill-rule="evenodd" d="M7.01 7.01c.03-1.545.138-2.5.535-3.28A5 5 0 0 1 9.73 1.545C10.8 1 12.2 1 15 1c2.8 0 4.2 0 5.27.545a5 5 0 0 1 2.185 2.185C23 4.8 23 6.2 23 9c0 2.8 0 4.2-.545 5.27a5 5 0 0 1-2.185 2.185c-.78.397-1.735.505-3.28.534l-.001.01c-.03 1.54-.138 2.493-.534 3.27a5 5 0 0 1-2.185 2.186C13.2 23 11.8 23 9 23c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C1 19.2 1 17.8 1 15c0-2.8 0-4.2.545-5.27A5 5 0 0 1 3.73 7.545C4.508 7.149 5.46 7.04 7 7.01h.01ZM15 15.5c-1.425 0-2.403-.001-3.162-.063-.74-.06-1.139-.172-1.427-.319a3.5 3.5 0 0 1-1.53-1.529c-.146-.288-.257-.686-.318-1.427C8.501 11.403 8.5 10.425 8.5 9c0-1.425.001-2.403.063-3.162.06-.74.172-1.139.318-1.427a3.5 3.5 0 0 1 1.53-1.53c.288-.146.686-.257 1.427-.318.759-.062 1.737-.063 3.162-.063 1.425 0 2.403.001 3.162.063.74.06 1.139.172 1.427.318a3.5 3.5 0 0 1 1.53 1.53c.146.288.257.686.318 1.427.062.759.063 1.737.063 3.162 0 1.425-.001 2.403-.063 3.162-.06.74-.172 1.139-.319 1.427a3.5 3.5 0 0 1-1.529 1.53c-.288.146-.686.257-1.427.318-.759.062-1.737.063-3.162.063ZM7 8.511c-.444.009-.825.025-1.162.052-.74.06-1.139.172-1.427.318a3.5 3.5 0 0 0-1.53 1.53c-.146.288-.257.686-.318 1.427-.062.759-.063 1.737-.063 3.162 0 1.425.001 2.403.063 3.162.06.74.172 1.139.318 1.427a3.5 3.5 0 0 0 1.53 1.53c.288.146.686.257 1.427.318.759.062 1.737.063 3.162.063 1.425 0 2.403-.001 3.162-.063.74-.06 1.139-.172 1.427-.319a3.5 3.5 0 0 0 1.53-1.53c.146-.287.257-.685.318-1.426.027-.337.043-.718.052-1.162H15c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C7 13.2 7 11.8 7 9v-.489Z" clip-rule="evenodd"/></svg>`,RETRY_ICON:Ft`<svg width="15" height="16" viewBox="0 0 15 16"><path d="M6.464 2.03A.75.75 0 0 0 5.403.97L2.08 4.293a1 1 0 0 0 0 1.414L5.403 9.03a.75.75 0 0 0 1.06-1.06L4.672 6.177a.25.25 0 0 1 .177-.427h2.085a4 4 0 1 1-3.93 4.746c-.077-.407-.405-.746-.82-.746-.414 0-.755.338-.7.748a5.501 5.501 0 1 0 5.45-6.248H4.848a.25.25 0 0 1-.177-.427L6.464 2.03Z" fill="#fff"/></svg>`,DESKTOP_ICON:Ft`<svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C2.204 1 3.13 1 4.98 1h6.04c1.85 0 2.775 0 3.466.394a3 3 0 0 1 1.12 1.12C16 3.204 16 4.13 16 5.98v1.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C13.796 12 12.87 12 11.02 12H4.98c-1.85 0-2.775 0-3.466-.394a3 3 0 0 1-1.12-1.12C0 9.796 0 8.87 0 7.02V5.98ZM4.98 2.5h6.04c.953 0 1.568.001 2.034.043.446.04.608.108.69.154a1.5 1.5 0 0 1 .559.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033v1.04c0 .952-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.046-.243.114-.69.154-.466.042-1.08.043-2.033.043H4.98c-.952 0-1.568-.001-2.034-.043-.446-.04-.608-.108-.69-.154a1.5 1.5 0 0 1-.559-.56c-.046-.08-.114-.243-.154-.69-.042-.465-.043-1.08-.043-2.033V5.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.046.243-.114.69-.154.465-.042 1.08-.043 2.033-.043Z" fill="#fff"/><path d="M4 14.25a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,MOBILE_ICON:Ft`<svg width="16" height="16" viewBox="0 0 16 16"><path d="M6.75 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C5.204 0 6.136 0 8 0s2.795 0 3.486.394a3 3 0 0 1 1.12 1.12C13 2.204 13 3.13 13 4.98v6.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C10.796 16 9.864 16 8 16s-2.795 0-3.486-.394a3 3 0 0 1-1.12-1.12C3 13.796 3 12.87 3 11.02V4.98Zm8.5 0v6.04c0 .953-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.045-.242.113-.693.154-.47.042-1.091.043-2.05.043-.959 0-1.58-.001-2.05-.043-.45-.04-.613-.109-.693-.154a1.5 1.5 0 0 1-.56-.56c-.046-.08-.114-.243-.154-.69-.042-.466-.043-1.08-.043-2.033V4.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.045.243-.113.693-.154C6.42 1.501 7.041 1.5 8 1.5c.959 0 1.58.001 2.05.043.45.04.613.109.693.154a1.5 1.5 0 0 1 .56.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033Z" fill="#fff"/></svg>`,ARROW_DOWN_ICON:Ft`<svg width="14" height="14" viewBox="0 0 14 14"><path d="M2.28 7.47a.75.75 0 0 0-1.06 1.06l5.25 5.25a.75.75 0 0 0 1.06 0l5.25-5.25a.75.75 0 0 0-1.06-1.06l-3.544 3.543a.25.25 0 0 1-.426-.177V.75a.75.75 0 0 0-1.5 0v10.086a.25.25 0 0 1-.427.176L2.28 7.47Z" fill="#fff"/></svg>`,ARROW_UP_RIGHT_ICON:Ft`<svg width="15" height="14" fill="none"><path d="M4.5 1.75A.75.75 0 0 1 5.25 1H12a1.5 1.5 0 0 1 1.5 1.5v6.75a.75.75 0 0 1-1.5 0V4.164a.25.25 0 0 0-.427-.176L4.061 11.5A.75.75 0 0 1 3 10.44l7.513-7.513a.25.25 0 0 0-.177-.427H5.25a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,ARROW_RIGHT_ICON:Ft`<svg width="6" height="14" viewBox="0 0 6 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.181 1.099a.75.75 0 0 1 1.024.279l2.433 4.258a2.75 2.75 0 0 1 0 2.729l-2.433 4.257a.75.75 0 1 1-1.303-.744L4.335 7.62a1.25 1.25 0 0 0 0-1.24L1.902 2.122a.75.75 0 0 1 .28-1.023Z" fill="#fff"/></svg>`,QRCODE_ICON:Ft`<svg width="25" height="24" viewBox="0 0 25 24"><path d="M23.748 9a.748.748 0 0 0 .748-.752c-.018-2.596-.128-4.07-.784-5.22a6 6 0 0 0-2.24-2.24c-1.15-.656-2.624-.766-5.22-.784a.748.748 0 0 0-.752.748c0 .414.335.749.748.752 1.015.007 1.82.028 2.494.088.995.09 1.561.256 1.988.5.7.398 1.28.978 1.679 1.678.243.427.41.993.498 1.988.061.675.082 1.479.09 2.493a.753.753 0 0 0 .75.749ZM3.527.788C4.677.132 6.152.022 8.747.004A.748.748 0 0 1 9.5.752a.753.753 0 0 1-.749.752c-1.014.007-1.818.028-2.493.088-.995.09-1.561.256-1.988.5-.7.398-1.28.978-1.679 1.678-.243.427-.41.993-.499 1.988-.06.675-.081 1.479-.088 2.493A.753.753 0 0 1 1.252 9a.748.748 0 0 1-.748-.752c.018-2.596.128-4.07.784-5.22a6 6 0 0 1 2.24-2.24ZM1.252 15a.748.748 0 0 0-.748.752c.018 2.596.128 4.07.784 5.22a6 6 0 0 0 2.24 2.24c1.15.656 2.624.766 5.22.784a.748.748 0 0 0 .752-.748.753.753 0 0 0-.749-.752c-1.014-.007-1.818-.028-2.493-.089-.995-.089-1.561-.255-1.988-.498a4.5 4.5 0 0 1-1.679-1.68c-.243-.426-.41-.992-.499-1.987-.06-.675-.081-1.479-.088-2.493A.753.753 0 0 0 1.252 15ZM22.996 15.749a.753.753 0 0 1 .752-.749c.415 0 .751.338.748.752-.018 2.596-.128 4.07-.784 5.22a6 6 0 0 1-2.24 2.24c-1.15.656-2.624.766-5.22.784a.748.748 0 0 1-.752-.748c0-.414.335-.749.748-.752 1.015-.007 1.82-.028 2.494-.089.995-.089 1.561-.255 1.988-.498a4.5 4.5 0 0 0 1.679-1.68c.243-.426.41-.992.498-1.987.061-.675.082-1.479.09-2.493Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 4a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 11h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 4H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM13.5 6.5A2.5 2.5 0 0 1 16 4h2a2.5 2.5 0 0 1 2.5 2.5v2A2.5 2.5 0 0 1 18 11h-2a2.5 2.5 0 0 1-2.5-2.5v-2Zm2.5-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1ZM7 13a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 20h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 13H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Z" fill="#fff"/><path d="M13.5 15.5c0-.465 0-.697.038-.89a2 2 0 0 1 1.572-1.572C15.303 13 15.535 13 16 13v2.5h-2.5ZM18 13c.465 0 .697 0 .89.038a2 2 0 0 1 1.572 1.572c.038.193.038.425.038.89H18V13ZM18 17.5h2.5c0 .465 0 .697-.038.89a2 2 0 0 1-1.572 1.572C18.697 20 18.465 20 18 20v-2.5ZM13.5 17.5H16V20c-.465 0-.697 0-.89-.038a2 2 0 0 1-1.572-1.572c-.038-.193-.038-.425-.038-.89Z" fill="#fff"/></svg>`,SCAN_ICON:Ft`<svg width="16" height="16" fill="none"><path fill="#fff" d="M10 15.216c0 .422.347.763.768.74 1.202-.064 2.025-.222 2.71-.613a5.001 5.001 0 0 0 1.865-1.866c.39-.684.549-1.507.613-2.709a.735.735 0 0 0-.74-.768.768.768 0 0 0-.76.732c-.009.157-.02.306-.032.447-.073.812-.206 1.244-.384 1.555-.31.545-.761.996-1.306 1.306-.311.178-.743.311-1.555.384-.141.013-.29.023-.447.032a.768.768 0 0 0-.732.76ZM10 .784c0 .407.325.737.732.76.157.009.306.02.447.032.812.073 1.244.206 1.555.384a3.5 3.5 0 0 1 1.306 1.306c.178.311.311.743.384 1.555.013.142.023.29.032.447a.768.768 0 0 0 .76.732.734.734 0 0 0 .74-.768c-.064-1.202-.222-2.025-.613-2.71A5 5 0 0 0 13.477.658c-.684-.39-1.507-.549-2.709-.613a.735.735 0 0 0-.768.74ZM5.232.044A.735.735 0 0 1 6 .784a.768.768 0 0 1-.732.76c-.157.009-.305.02-.447.032-.812.073-1.244.206-1.555.384A3.5 3.5 0 0 0 1.96 3.266c-.178.311-.311.743-.384 1.555-.013.142-.023.29-.032.447A.768.768 0 0 1 .784 6a.735.735 0 0 1-.74-.768c.064-1.202.222-2.025.613-2.71A5 5 0 0 1 2.523.658C3.207.267 4.03.108 5.233.044ZM5.268 14.456a.768.768 0 0 1 .732.76.734.734 0 0 1-.768.74c-1.202-.064-2.025-.222-2.71-.613a5 5 0 0 1-1.865-1.866c-.39-.684-.549-1.507-.613-2.709A.735.735 0 0 1 .784 10c.407 0 .737.325.76.732.009.157.02.306.032.447.073.812.206 1.244.384 1.555a3.5 3.5 0 0 0 1.306 1.306c.311.178.743.311 1.555.384.142.013.29.023.447.032Z"/></svg>`,CHECKMARK_ICON:Ft`<svg width="13" height="12" viewBox="0 0 13 12"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.155.132a.75.75 0 0 1 .232 1.035L5.821 11.535a1 1 0 0 1-1.626.09L.665 7.21a.75.75 0 1 1 1.17-.937L4.71 9.867a.25.25 0 0 0 .406-.023L11.12.364a.75.75 0 0 1 1.035-.232Z" fill="#fff"/></svg>`,SEARCH_ICON:Ft`<svg width="20" height="21"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.432 13.992c-.354-.353-.91-.382-1.35-.146a5.5 5.5 0 1 1 2.265-2.265c-.237.441-.208.997.145 1.35l3.296 3.296a.75.75 0 1 1-1.06 1.061l-3.296-3.296Zm.06-5a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z" fill="#949E9E"/></svg>`,WALLET_PLACEHOLDER:Ft`<svg width="60" height="60" fill="none" viewBox="0 0 60 60"><g clip-path="url(#q)"><path id="wallet-placeholder-fill" fill="#fff" d="M0 24.9c0-9.251 0-13.877 1.97-17.332a15 15 0 0 1 5.598-5.597C11.023 0 15.648 0 24.9 0h10.2c9.252 0 13.877 0 17.332 1.97a15 15 0 0 1 5.597 5.598C60 11.023 60 15.648 60 24.9v10.2c0 9.252 0 13.877-1.97 17.332a15.001 15.001 0 0 1-5.598 5.597C48.977 60 44.352 60 35.1 60H24.9c-9.251 0-13.877 0-17.332-1.97a15 15 0 0 1-5.597-5.598C0 48.977 0 44.352 0 35.1V24.9Z"/><path id="wallet-placeholder-dash" stroke="#000" stroke-dasharray="4 4" stroke-width="1.5" d="M.04 41.708a231.598 231.598 0 0 1-.039-4.403l.75-.001L.75 35.1v-2.55H0v-5.1h.75V24.9l.001-2.204h-.75c.003-1.617.011-3.077.039-4.404l.75.016c.034-1.65.099-3.08.218-4.343l-.746-.07c.158-1.678.412-3.083.82-4.316l.713.236c.224-.679.497-1.296.827-1.875a14.25 14.25 0 0 1 1.05-1.585L3.076 5.9A15 15 0 0 1 5.9 3.076l.455.596a14.25 14.25 0 0 1 1.585-1.05c.579-.33 1.196-.603 1.875-.827l-.236-.712C10.812.674 12.217.42 13.895.262l.07.746C15.23.89 16.66.824 18.308.79l-.016-.75C19.62.012 21.08.004 22.695.001l.001.75L24.9.75h2.55V0h5.1v.75h2.55l2.204.001v-.75c1.617.003 3.077.011 4.404.039l-.016.75c1.65.034 3.08.099 4.343.218l.07-.746c1.678.158 3.083.412 4.316.82l-.236.713c.679.224 1.296.497 1.875.827a14.24 14.24 0 0 1 1.585 1.05l.455-.596A14.999 14.999 0 0 1 56.924 5.9l-.596.455c.384.502.735 1.032 1.05 1.585.33.579.602 1.196.827 1.875l.712-.236c.409 1.233.663 2.638.822 4.316l-.747.07c.119 1.264.184 2.694.218 4.343l.75-.016c.028 1.327.036 2.787.039 4.403l-.75.001.001 2.204v2.55H60v5.1h-.75v2.55l-.001 2.204h.75a231.431 231.431 0 0 1-.039 4.404l-.75-.016c-.034 1.65-.099 3.08-.218 4.343l.747.07c-.159 1.678-.413 3.083-.822 4.316l-.712-.236a10.255 10.255 0 0 1-.827 1.875 14.242 14.242 0 0 1-1.05 1.585l.596.455a14.997 14.997 0 0 1-2.824 2.824l-.455-.596c-.502.384-1.032.735-1.585 1.05-.579.33-1.196.602-1.875.827l.236.712c-1.233.409-2.638.663-4.316.822l-.07-.747c-1.264.119-2.694.184-4.343.218l.016.75c-1.327.028-2.787.036-4.403.039l-.001-.75-2.204.001h-2.55V60h-5.1v-.75H24.9l-2.204-.001v.75a231.431 231.431 0 0 1-4.404-.039l.016-.75c-1.65-.034-3.08-.099-4.343-.218l-.07.747c-1.678-.159-3.083-.413-4.316-.822l.236-.712a10.258 10.258 0 0 1-1.875-.827 14.252 14.252 0 0 1-1.585-1.05l-.455.596A14.999 14.999 0 0 1 3.076 54.1l.596-.455a14.24 14.24 0 0 1-1.05-1.585 10.259 10.259 0 0 1-.827-1.875l-.712.236C.674 49.188.42 47.783.262 46.105l.746-.07C.89 44.77.824 43.34.79 41.692l-.75.016Z"/><path fill="#fff" fill-rule="evenodd" d="M35.643 32.145c-.297-.743-.445-1.114-.401-1.275a.42.42 0 0 1 .182-.27c.134-.1.463-.1 1.123-.1.742 0 1.499.046 2.236-.05a6 6 0 0 0 5.166-5.166c.051-.39.051-.855.051-1.784 0-.928 0-1.393-.051-1.783a6 6 0 0 0-5.166-5.165c-.39-.052-.854-.052-1.783-.052h-7.72c-4.934 0-7.401 0-9.244 1.051a8 8 0 0 0-2.985 2.986C16.057 22.28 16.003 24.58 16 29 15.998 31.075 16 33.15 16 35.224A7.778 7.778 0 0 0 23.778 43H28.5c1.394 0 2.09 0 2.67-.116a6 6 0 0 0 4.715-4.714c.115-.58.115-1.301.115-2.744 0-1.31 0-1.964-.114-2.49a4.998 4.998 0 0 0-.243-.792Z" clip-rule="evenodd"/><path fill="#9EA9A9" fill-rule="evenodd" d="M37 18h-7.72c-2.494 0-4.266.002-5.647.126-1.361.122-2.197.354-2.854.728a6.5 6.5 0 0 0-2.425 2.426c-.375.657-.607 1.492-.729 2.853-.11 1.233-.123 2.777-.125 4.867 0 .7 0 1.05.097 1.181.096.13.182.181.343.2.163.02.518-.18 1.229-.581a6.195 6.195 0 0 1 3.053-.8H37c.977 0 1.32-.003 1.587-.038a4.5 4.5 0 0 0 3.874-3.874c.036-.268.039-.611.039-1.588 0-.976-.003-1.319-.038-1.587a4.5 4.5 0 0 0-3.875-3.874C38.32 18.004 37.977 18 37 18Zm-7.364 12.5h-7.414a4.722 4.722 0 0 0-4.722 4.723 6.278 6.278 0 0 0 6.278 6.278H28.5c1.466 0 1.98-.008 2.378-.087a4.5 4.5 0 0 0 3.535-3.536c.08-.397.087-.933.087-2.451 0-1.391-.009-1.843-.08-2.17a3.5 3.5 0 0 0-2.676-2.676c-.328-.072-.762-.08-2.108-.08Z" clip-rule="evenodd"/></g><defs><clipPath id="q"><path fill="#fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>`,GLOBE_ICON:Ft`<svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="#fff" fill-rule="evenodd" d="M15.5 8a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0Zm-2.113.75c.301 0 .535.264.47.558a6.01 6.01 0 0 1-2.867 3.896c-.203.116-.42-.103-.334-.32.409-1.018.691-2.274.797-3.657a.512.512 0 0 1 .507-.477h1.427Zm.47-2.058c.065.294-.169.558-.47.558H11.96a.512.512 0 0 1-.507-.477c-.106-1.383-.389-2.638-.797-3.656-.087-.217.13-.437.333-.32a6.01 6.01 0 0 1 2.868 3.895Zm-4.402.558c.286 0 .515-.24.49-.525-.121-1.361-.429-2.534-.83-3.393-.279-.6-.549-.93-.753-1.112a.535.535 0 0 0-.724 0c-.204.182-.474.513-.754 1.112-.4.859-.708 2.032-.828 3.393a.486.486 0 0 0 .49.525h2.909Zm-5.415 0c.267 0 .486-.21.507-.477.106-1.383.389-2.638.797-3.656.087-.217-.13-.437-.333-.32a6.01 6.01 0 0 0-2.868 3.895c-.065.294.169.558.47.558H4.04ZM2.143 9.308c-.065-.294.169-.558.47-.558H4.04c.267 0 .486.21.507.477.106 1.383.389 2.639.797 3.657.087.217-.13.436-.333.32a6.01 6.01 0 0 1-2.868-3.896Zm3.913-.033a.486.486 0 0 1 .49-.525h2.909c.286 0 .515.24.49.525-.121 1.361-.428 2.535-.83 3.394-.279.6-.549.93-.753 1.112a.535.535 0 0 1-.724 0c-.204-.182-.474-.513-.754-1.112-.4-.859-.708-2.033-.828-3.394Z" clip-rule="evenodd"/></svg>`},BS=ut`.wcm-toolbar-placeholder{top:0;bottom:0;left:0;right:0;width:100%;position:absolute;display:block;pointer-events:none;height:100px;border-radius:calc(var(--wcm-background-border-radius) * .9);background-color:var(--wcm-background-color);background-position:center;background-size:cover}.wcm-toolbar{height:38px;display:flex;position:relative;margin:5px 15px 5px 5px;justify-content:space-between;align-items:center}.wcm-toolbar img,.wcm-toolbar svg{height:28px;object-position:left center;object-fit:contain}#wcm-wc-logo path{fill:var(--wcm-accent-fill-color)}button{width:28px;height:28px;border-radius:var(--wcm-icon-button-border-radius);border:0;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:var(--wcm-color-bg-1);box-shadow:0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-bg-2)}button svg{display:block;object-position:center}button path{fill:var(--wcm-color-fg-1)}.wcm-toolbar div{display:flex}@media(hover:hover){button:hover{background-color:var(--wcm-color-bg-2)}}`;var qS=Object.defineProperty,zS=Object.getOwnPropertyDescriptor,WS=(t,e,r,n)=>{for(var i=n>1?void 0:n?zS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&qS(e,r,i),i};let cu=class extends Ye{render(){return le`<div class="wcm-toolbar-placeholder"></div><div class="wcm-toolbar">${ht.WALLET_CONNECT_LOGO} <button @click="${Yn.close}">${ht.CROSS_ICON}</button></div>`}};cu.styles=[rt.globalCss,BS],cu=WS([ot("wcm-modal-backcard")],cu);const VS=ut`main{padding:20px;padding-top:0;width:100%}`;var HS=Object.defineProperty,KS=Object.getOwnPropertyDescriptor,ZS=(t,e,r,n)=>{for(var i=n>1?void 0:n?KS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&HS(e,r,i),i};let lu=class extends Ye{render(){return le`<main><slot></slot></main>`}};lu.styles=[rt.globalCss,VS],lu=ZS([ot("wcm-modal-content")],lu);const GS=ut`footer{padding:10px;display:flex;flex-direction:column;align-items:inherit;justify-content:inherit;border-top:1px solid var(--wcm-color-bg-2)}`;var QS=Object.defineProperty,YS=Object.getOwnPropertyDescriptor,JS=(t,e,r,n)=>{for(var i=n>1?void 0:n?YS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&QS(e,r,i),i};let uu=class extends Ye{render(){return le`<footer><slot></slot></footer>`}};uu.styles=[rt.globalCss,GS],uu=JS([ot("wcm-modal-footer")],uu);const XS=ut`header{display:flex;justify-content:center;align-items:center;padding:20px;position:relative}.wcm-border{border-bottom:1px solid var(--wcm-color-bg-2);margin-bottom:20px}header button{padding:15px 20px}header button:active{opacity:.5}@media(hover:hover){header button:hover{opacity:.5}}.wcm-back-btn{position:absolute;left:0}.wcm-action-btn{position:absolute;right:0}path{fill:var(--wcm-accent-color)}`;var e4=Object.defineProperty,t4=Object.getOwnPropertyDescriptor,ho=(t,e,r,n)=>{for(var i=n>1?void 0:n?t4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&e4(e,r,i),i};let wi=class extends Ye{constructor(){super(...arguments),this.title="",this.onAction=void 0,this.actionIcon=void 0,this.border=!1}backBtnTemplate(){return le`<button class="wcm-back-btn" @click="${$t.goBack}">${ht.BACK_ICON}</button>`}actionBtnTemplate(){return le`<button class="wcm-action-btn" @click="${this.onAction}">${this.actionIcon}</button>`}render(){const t={"wcm-border":this.border},e=$t.state.history.length>1,r=this.title?le`<wcm-text variant="big-bold">${this.title}</wcm-text>`:le`<slot></slot>`;return le`<header class="${En(t)}">${e?this.backBtnTemplate():null} ${r} ${this.onAction?this.actionBtnTemplate():null}</header>`}};wi.styles=[rt.globalCss,XS],ho([je()],wi.prototype,"title",2),ho([je()],wi.prototype,"onAction",2),ho([je()],wi.prototype,"actionIcon",2),ho([je({type:Boolean})],wi.prototype,"border",2),wi=ho([ot("wcm-modal-header")],wi);const Pe={MOBILE_BREAKPOINT:600,WCM_RECENT_WALLET_DATA:"WCM_RECENT_WALLET_DATA",EXPLORER_WALLET_URL:"https://explorer.walletconnect.com/?type=wallet",getShadowRootElement(t,e){const r=t.renderRoot.querySelector(e);if(!r)throw new Error(`${e} not found`);return r},getWalletIcon({id:t,image_id:e}){const{walletImages:r}=Rr.state;return r!=null&&r[t]?r[t]:e?xr.getWalletImageUrl(e):""},getWalletName(t,e=!1){return e&&t.length>8?`${t.substring(0,8)}..`:t},isMobileAnimation(){return window.innerWidth<=Pe.MOBILE_BREAKPOINT},async preloadImage(t){const e=new Promise((r,n)=>{const i=new Image;i.onload=r,i.onerror=n,i.crossOrigin="anonymous",i.src=t});return Promise.race([e,we.wait(3e3)])},getErrorMessage(t){return t instanceof Error?t.message:"Unknown Error"},debounce(t,e=500){let r;return(...n)=>{function i(){t(...n)}r&&clearTimeout(r),r=setTimeout(i,e)}},handleMobileLinking(t){const{walletConnectUri:e}=Vt.state,{mobile:r,name:n}=t,i=r==null?void 0:r.native,s=r==null?void 0:r.universal;Pe.setRecentWallet(t);function o(a){let c="";i?c=we.formatUniversalUrl(i,a,n):s&&(c=we.formatNativeUrl(s,a,n)),we.openHref(c,"_self")}e&&o(e)},handleAndroidLinking(){const{walletConnectUri:t}=Vt.state;t&&(we.setWalletConnectAndroidDeepLink(t),we.openHref(t,"_self"))},async handleUriCopy(){const{walletConnectUri:t}=Vt.state;if(t)try{await navigator.clipboard.writeText(t),An.openToast("Link copied","success")}catch{An.openToast("Failed to copy","error")}},getCustomImageUrls(){const{walletImages:t}=Rr.state,e=Object.values(t??{});return Object.values(e)},truncate(t,e=8){return t.length<=e?t:`${t.substring(0,4)}...${t.substring(t.length-4)}`},setRecentWallet(t){try{localStorage.setItem(Pe.WCM_RECENT_WALLET_DATA,JSON.stringify(t))}catch{console.info("Unable to set recent wallet")}},getRecentWallet(){try{const t=localStorage.getItem(Pe.WCM_RECENT_WALLET_DATA);return t?JSON.parse(t):void 0}catch{console.info("Unable to get recent wallet")}},caseSafeIncludes(t,e){return t.toUpperCase().includes(e.toUpperCase())},openWalletExplorerUrl(){we.openHref(Pe.EXPLORER_WALLET_URL,"_blank")},getCachedRouterWalletPlatforms(){const{desktop:t,mobile:e}=we.getWalletRouterData(),r=!!(t!=null&&t.native),n=!!(t!=null&&t.universal),i=!!(e!=null&&e.native)||!!(e!=null&&e.universal);return{isDesktop:r,isMobile:i,isWeb:n}},goToConnectingView(t){$t.setData({Wallet:t});const e=we.isMobile(),{isDesktop:r,isWeb:n,isMobile:i}=Pe.getCachedRouterWalletPlatforms();e?i?$t.push("MobileConnecting"):n?$t.push("WebConnecting"):$t.push("InstallWallet"):r?$t.push("DesktopConnecting"):n?$t.push("WebConnecting"):i?$t.push("MobileQrcodeConnecting"):$t.push("InstallWallet")}},r4=ut`.wcm-router{overflow:hidden;will-change:transform}.wcm-content{display:flex;flex-direction:column}`;var n4=Object.defineProperty,i4=Object.getOwnPropertyDescriptor,du=(t,e,r,n)=>{for(var i=n>1?void 0:n?i4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&n4(e,r,i),i};let fo=class extends Ye{constructor(){super(),this.view=$t.state.view,this.prevView=$t.state.view,this.unsubscribe=void 0,this.oldHeight="0px",this.resizeObserver=void 0,this.unsubscribe=$t.subscribe(t=>{this.view!==t.view&&this.onChangeRoute()})}firstUpdated(){this.resizeObserver=new ResizeObserver(([t])=>{const e=`${t.contentRect.height}px`;this.oldHeight!=="0px"&&vi(this.routerEl,{height:[this.oldHeight,e]},{duration:.2}),this.oldHeight=e}),this.resizeObserver.observe(this.contentEl)}disconnectedCallback(){var t,e;(t=this.unsubscribe)==null||t.call(this),(e=this.resizeObserver)==null||e.disconnect()}get routerEl(){return Pe.getShadowRootElement(this,".wcm-router")}get contentEl(){return Pe.getShadowRootElement(this,".wcm-content")}viewTemplate(){switch(this.view){case"ConnectWallet":return le`<wcm-connect-wallet-view></wcm-connect-wallet-view>`;case"DesktopConnecting":return le`<wcm-desktop-connecting-view></wcm-desktop-connecting-view>`;case"MobileConnecting":return le`<wcm-mobile-connecting-view></wcm-mobile-connecting-view>`;case"WebConnecting":return le`<wcm-web-connecting-view></wcm-web-connecting-view>`;case"MobileQrcodeConnecting":return le`<wcm-mobile-qr-connecting-view></wcm-mobile-qr-connecting-view>`;case"WalletExplorer":return le`<wcm-wallet-explorer-view></wcm-wallet-explorer-view>`;case"Qrcode":return le`<wcm-qrcode-view></wcm-qrcode-view>`;case"InstallWallet":return le`<wcm-install-wallet-view></wcm-install-wallet-view>`;default:return le`<div>Not Found</div>`}}async onChangeRoute(){await vi(this.routerEl,{opacity:[1,0],scale:[1,1.02]},{duration:.15,delay:.1}).finished,this.view=$t.state.view,vi(this.routerEl,{opacity:[0,1],scale:[.99,1]},{duration:.37,delay:.05})}render(){return le`<div class="wcm-router"><div class="wcm-content">${this.viewTemplate()}</div></div>`}};fo.styles=[rt.globalCss,r4],du([Ir()],fo.prototype,"view",2),du([Ir()],fo.prototype,"prevView",2),fo=du([ot("wcm-modal-router")],fo);const s4=ut`div{height:36px;width:max-content;display:flex;justify-content:center;align-items:center;padding:9px 15px 11px;position:absolute;top:12px;box-shadow:0 6px 14px -6px rgba(10,16,31,.3),0 10px 32px -4px rgba(10,16,31,.15);z-index:2;left:50%;transform:translateX(-50%);pointer-events:none;backdrop-filter:blur(20px) saturate(1.8);-webkit-backdrop-filter:blur(20px) saturate(1.8);border-radius:var(--wcm-notification-border-radius);border:1px solid var(--wcm-color-overlay);background-color:var(--wcm-color-overlay)}svg{margin-right:5px}@-moz-document url-prefix(){div{background-color:var(--wcm-color-bg-3)}}.wcm-success path{fill:var(--wcm-accent-color)}.wcm-error path{fill:var(--wcm-error-color)}`;var o4=Object.defineProperty,a4=Object.getOwnPropertyDescriptor,M0=(t,e,r,n)=>{for(var i=n>1?void 0:n?a4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&o4(e,r,i),i};let Pa=class extends Ye{constructor(){super(),this.open=!1,this.unsubscribe=void 0,this.timeout=void 0,this.unsubscribe=An.subscribe(t=>{t.open?(this.open=!0,this.timeout=setTimeout(()=>An.closeToast(),2200)):(this.open=!1,clearTimeout(this.timeout))})}disconnectedCallback(){var t;(t=this.unsubscribe)==null||t.call(this),clearTimeout(this.timeout),An.closeToast()}render(){const{message:t,variant:e}=An.state,r={"wcm-success":e==="success","wcm-error":e==="error"};return this.open?le`<div class="${En(r)}">${e==="success"?ht.CHECKMARK_ICON:null} ${e==="error"?ht.CROSS_ICON:null}<wcm-text variant="small-regular">${t}</wcm-text></div>`:null}};Pa.styles=[rt.globalCss,s4],M0([Ir()],Pa.prototype,"open",2),Pa=M0([ot("wcm-modal-toast")],Pa);const c4=.1,k0=2.5,Sn=7;function hu(t,e,r){return t===e?!1:(t-e<0?e-t:t-e)<=r+c4}function l4(t,e){const r=Array.prototype.slice.call(oo.create(t,{errorCorrectionLevel:e}).modules.data,0),n=Math.sqrt(r.length);return r.reduce((i,s,o)=>(o%n===0?i.push([s]):i[i.length-1].push(s))&&i,[])}const u4={generate(t,e,r){const n="#141414",i="#ffffff",s=[],o=l4(t,"Q"),a=e/o.length,c=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];c.forEach(({x:w,y:S})=>{const E=(o.length-Sn)*a*w,D=(o.length-Sn)*a*S,b=.45;for(let C=0;C<c.length;C+=1){const v=a*(Sn-C*2);s.push(Ft`<rect fill="${C%2===0?n:i}" height="${v}" rx="${v*b}" ry="${v*b}" width="${v}" x="${E+a*C}" y="${D+a*C}">`)}});const u=Math.floor((r+25)/a),d=o.length/2-u/2,f=o.length/2+u/2-1,p=[];o.forEach((w,S)=>{w.forEach((E,D)=>{if(o[S][D]&&!(S<Sn&&D<Sn||S>o.length-(Sn+1)&&D<Sn||S<Sn&&D>o.length-(Sn+1))&&!(S>d&&S<f&&D>d&&D<f)){const b=S*a+a/2,C=D*a+a/2;p.push([b,C])}})});const y={};return p.forEach(([w,S])=>{y[w]?y[w].push(S):y[w]=[S]}),Object.entries(y).map(([w,S])=>{const E=S.filter(D=>S.every(b=>!hu(D,b,a)));return[Number(w),E]}).forEach(([w,S])=>{S.forEach(E=>{s.push(Ft`<circle cx="${w}" cy="${E}" fill="${n}" r="${a/k0}">`)})}),Object.entries(y).filter(([w,S])=>S.length>1).map(([w,S])=>{const E=S.filter(D=>S.some(b=>hu(D,b,a)));return[Number(w),E]}).map(([w,S])=>{S.sort((D,b)=>D<b?-1:1);const E=[];for(const D of S){const b=E.find(C=>C.some(v=>hu(D,v,a)));b?b.push(D):E.push([D])}return[w,E.map(D=>[D[0],D[D.length-1]])]}).forEach(([w,S])=>{S.forEach(([E,D])=>{s.push(Ft`<line x1="${w}" x2="${w}" y1="${E}" y2="${D}" stroke="${n}" stroke-width="${a/(k0/2)}" stroke-linecap="round">`)})}),s}},d4=ut`@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}div{position:relative;user-select:none;display:block;overflow:hidden;aspect-ratio:1/1;animation:fadeIn ease .2s}.wcm-dark{background-color:#fff;border-radius:var(--wcm-container-border-radius);padding:18px;box-shadow:0 2px 5px #000}svg:first-child,wcm-wallet-image{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{width:25%;height:25%;border-radius:var(--wcm-wallet-icon-border-radius)}svg:first-child{transform:translateY(-50%) translateX(-50%) scale(.9)}svg:first-child path:first-child{fill:var(--wcm-accent-color)}svg:first-child path:last-child{stroke:var(--wcm-color-overlay)}`;var h4=Object.defineProperty,f4=Object.getOwnPropertyDescriptor,Xi=(t,e,r,n)=>{for(var i=n>1?void 0:n?f4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&h4(e,r,i),i};let xn=class extends Ye{constructor(){super(...arguments),this.uri="",this.size=0,this.imageId=void 0,this.walletId=void 0,this.imageUrl=void 0}svgTemplate(){const t=In.state.themeMode==="light"?this.size:this.size-36;return Ft`<svg height="${t}" width="${t}">${u4.generate(this.uri,t,t/4)}</svg>`}render(){const t={"wcm-dark":In.state.themeMode==="dark"};return le`<div style="${`width: ${this.size}px`}" class="${En(t)}">${this.walletId||this.imageUrl?le`<wcm-wallet-image walletId="${Er(this.walletId)}" imageId="${Er(this.imageId)}" imageUrl="${Er(this.imageUrl)}"></wcm-wallet-image>`:ht.WALLET_CONNECT_ICON_COLORED} ${this.svgTemplate()}</div>`}};xn.styles=[rt.globalCss,d4],Xi([je()],xn.prototype,"uri",2),Xi([je({type:Number})],xn.prototype,"size",2),Xi([je()],xn.prototype,"imageId",2),Xi([je()],xn.prototype,"walletId",2),Xi([je()],xn.prototype,"imageUrl",2),xn=Xi([ot("wcm-qrcode")],xn);const p4=ut`:host{position:relative;height:28px;width:80%}input{width:100%;height:100%;line-height:28px!important;border-radius:var(--wcm-input-border-radius);font-style:normal;font-family:-apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,'Helvetica Neue',sans-serif;font-feature-settings:'case' on;font-weight:500;font-size:16px;letter-spacing:-.03em;padding:0 10px 0 34px;transition:.2s all ease;color:var(--wcm-color-fg-1);background-color:var(--wcm-color-bg-3);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay);caret-color:var(--wcm-accent-color)}input::placeholder{color:var(--wcm-color-fg-2)}svg{left:10px;top:4px;pointer-events:none;position:absolute;width:20px;height:20px}input:focus-within{box-shadow:inset 0 0 0 1px var(--wcm-accent-color)}path{fill:var(--wcm-color-fg-2)}`;var g4=Object.defineProperty,m4=Object.getOwnPropertyDescriptor,U0=(t,e,r,n)=>{for(var i=n>1?void 0:n?m4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&g4(e,r,i),i};let Na=class extends Ye{constructor(){super(...arguments),this.onChange=()=>null}render(){return le`<input type="text" @input="${this.onChange}" placeholder="Search wallets"> ${ht.SEARCH_ICON}`}};Na.styles=[rt.globalCss,p4],U0([je()],Na.prototype,"onChange",2),Na=U0([ot("wcm-search-input")],Na);const y4=ut`@keyframes rotate{100%{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}svg{animation:rotate 2s linear infinite;display:flex;justify-content:center;align-items:center}svg circle{stroke-linecap:round;animation:dash 1.5s ease infinite;stroke:var(--wcm-accent-color)}`;var v4=Object.defineProperty,w4=Object.getOwnPropertyDescriptor,b4=(t,e,r,n)=>{for(var i=n>1?void 0:n?w4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&v4(e,r,i),i};let fu=class extends Ye{render(){return le`<svg viewBox="0 0 50 50" width="24" height="24"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4" stroke="#fff"/></svg>`}};fu.styles=[rt.globalCss,y4],fu=b4([ot("wcm-spinner")],fu);const _4=ut`span{font-style:normal;font-family:var(--wcm-font-family);font-feature-settings:var(--wcm-font-feature-settings)}.wcm-xsmall-bold{font-family:var(--wcm-text-xsmall-bold-font-family);font-weight:var(--wcm-text-xsmall-bold-weight);font-size:var(--wcm-text-xsmall-bold-size);line-height:var(--wcm-text-xsmall-bold-line-height);letter-spacing:var(--wcm-text-xsmall-bold-letter-spacing);text-transform:var(--wcm-text-xsmall-bold-text-transform)}.wcm-xsmall-regular{font-family:var(--wcm-text-xsmall-regular-font-family);font-weight:var(--wcm-text-xsmall-regular-weight);font-size:var(--wcm-text-xsmall-regular-size);line-height:var(--wcm-text-xsmall-regular-line-height);letter-spacing:var(--wcm-text-xsmall-regular-letter-spacing);text-transform:var(--wcm-text-xsmall-regular-text-transform)}.wcm-small-thin{font-family:var(--wcm-text-small-thin-font-family);font-weight:var(--wcm-text-small-thin-weight);font-size:var(--wcm-text-small-thin-size);line-height:var(--wcm-text-small-thin-line-height);letter-spacing:var(--wcm-text-small-thin-letter-spacing);text-transform:var(--wcm-text-small-thin-text-transform)}.wcm-small-regular{font-family:var(--wcm-text-small-regular-font-family);font-weight:var(--wcm-text-small-regular-weight);font-size:var(--wcm-text-small-regular-size);line-height:var(--wcm-text-small-regular-line-height);letter-spacing:var(--wcm-text-small-regular-letter-spacing);text-transform:var(--wcm-text-small-regular-text-transform)}.wcm-medium-regular{font-family:var(--wcm-text-medium-regular-font-family);font-weight:var(--wcm-text-medium-regular-weight);font-size:var(--wcm-text-medium-regular-size);line-height:var(--wcm-text-medium-regular-line-height);letter-spacing:var(--wcm-text-medium-regular-letter-spacing);text-transform:var(--wcm-text-medium-regular-text-transform)}.wcm-big-bold{font-family:var(--wcm-text-big-bold-font-family);font-weight:var(--wcm-text-big-bold-weight);font-size:var(--wcm-text-big-bold-size);line-height:var(--wcm-text-big-bold-line-height);letter-spacing:var(--wcm-text-big-bold-letter-spacing);text-transform:var(--wcm-text-big-bold-text-transform)}:host(*){color:var(--wcm-color-fg-1)}.wcm-color-primary{color:var(--wcm-color-fg-1)}.wcm-color-secondary{color:var(--wcm-color-fg-2)}.wcm-color-tertiary{color:var(--wcm-color-fg-3)}.wcm-color-inverse{color:var(--wcm-accent-fill-color)}.wcm-color-accnt{color:var(--wcm-accent-color)}.wcm-color-error{color:var(--wcm-error-color)}`;var E4=Object.defineProperty,S4=Object.getOwnPropertyDescriptor,pu=(t,e,r,n)=>{for(var i=n>1?void 0:n?S4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&E4(e,r,i),i};let po=class extends Ye{constructor(){super(...arguments),this.variant="medium-regular",this.color="primary"}render(){const t={"wcm-big-bold":this.variant==="big-bold","wcm-medium-regular":this.variant==="medium-regular","wcm-small-regular":this.variant==="small-regular","wcm-small-thin":this.variant==="small-thin","wcm-xsmall-regular":this.variant==="xsmall-regular","wcm-xsmall-bold":this.variant==="xsmall-bold","wcm-color-primary":this.color==="primary","wcm-color-secondary":this.color==="secondary","wcm-color-tertiary":this.color==="tertiary","wcm-color-inverse":this.color==="inverse","wcm-color-accnt":this.color==="accent","wcm-color-error":this.color==="error"};return le`<span><slot class="${En(t)}"></slot></span>`}};po.styles=[rt.globalCss,_4],pu([je()],po.prototype,"variant",2),pu([je()],po.prototype,"color",2),po=pu([ot("wcm-text")],po);const x4=ut`button{width:100%;height:100%;border-radius:var(--wcm-button-hover-highlight-border-radius);display:flex;align-items:flex-start}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}button>div{width:80px;padding:5px 0;display:flex;flex-direction:column;align-items:center}wcm-text{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}wcm-wallet-image{height:60px;width:60px;transition:all .2s ease;border-radius:var(--wcm-wallet-icon-border-radius);margin-bottom:5px}.wcm-sublabel{margin-top:2px}`;var C4=Object.defineProperty,O4=Object.getOwnPropertyDescriptor,Wn=(t,e,r,n)=>{for(var i=n>1?void 0:n?O4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&C4(e,r,i),i};let dn=class extends Ye{constructor(){super(...arguments),this.onClick=()=>null,this.name="",this.walletId="",this.label=void 0,this.imageId=void 0,this.installed=!1,this.recent=!1}sublabelTemplate(){return this.recent?le`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">RECENT</wcm-text>`:this.installed?le`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">INSTALLED</wcm-text>`:null}handleClick(){Lu.click({name:"WALLET_BUTTON",walletId:this.walletId}),this.onClick()}render(){var t;return le`<button @click="${this.handleClick.bind(this)}"><div><wcm-wallet-image walletId="${this.walletId}" imageId="${Er(this.imageId)}"></wcm-wallet-image><wcm-text variant="xsmall-regular">${(t=this.label)!=null?t:Pe.getWalletName(this.name,!0)}</wcm-text>${this.sublabelTemplate()}</div></button>`}};dn.styles=[rt.globalCss,x4],Wn([je()],dn.prototype,"onClick",2),Wn([je()],dn.prototype,"name",2),Wn([je()],dn.prototype,"walletId",2),Wn([je()],dn.prototype,"label",2),Wn([je()],dn.prototype,"imageId",2),Wn([je({type:Boolean})],dn.prototype,"installed",2),Wn([je({type:Boolean})],dn.prototype,"recent",2),dn=Wn([ot("wcm-wallet-button")],dn);const D4=ut`:host{display:block}div{overflow:hidden;position:relative;border-radius:inherit;width:100%;height:100%;background-color:var(--wcm-color-overlay)}svg{position:relative;width:100%;height:100%}div::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;border-radius:inherit;border:1px solid var(--wcm-color-overlay)}div img{width:100%;height:100%;object-fit:cover;object-position:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var I4=Object.defineProperty,A4=Object.getOwnPropertyDescriptor,$a=(t,e,r,n)=>{for(var i=n>1?void 0:n?A4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&I4(e,r,i),i};let es=class extends Ye{constructor(){super(...arguments),this.walletId="",this.imageId=void 0,this.imageUrl=void 0}render(){var t;const e=(t=this.imageUrl)!=null&&t.length?this.imageUrl:Pe.getWalletIcon({id:this.walletId,image_id:this.imageId});return le`${e.length?le`<div><img crossorigin="anonymous" src="${e}" alt="${this.id}"></div>`:ht.WALLET_PLACEHOLDER}`}};es.styles=[rt.globalCss,D4],$a([je()],es.prototype,"walletId",2),$a([je()],es.prototype,"imageId",2),$a([je()],es.prototype,"imageUrl",2),es=$a([ot("wcm-wallet-image")],es);var T4=Object.defineProperty,R4=Object.getOwnPropertyDescriptor,F0=(t,e,r,n)=>{for(var i=n>1?void 0:n?R4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&T4(e,r,i),i};let gu=class extends Ye{constructor(){super(),this.preload=!0,this.preloadData()}async loadImages(t){try{t!=null&&t.length&&await Promise.all(t.map(async e=>Pe.preloadImage(e)))}catch{console.info("Unsuccessful attempt at preloading some images",t)}}async preloadListings(){if(Rr.state.enableExplorer){await xr.getRecomendedWallets(),Vt.setIsDataLoaded(!0);const{recomendedWallets:t}=xr.state,e=t.map(r=>Pe.getWalletIcon(r));await this.loadImages(e)}else Vt.setIsDataLoaded(!0)}async preloadCustomImages(){const t=Pe.getCustomImageUrls();await this.loadImages(t)}async preloadData(){try{this.preload&&(this.preload=!1,await Promise.all([this.preloadListings(),this.preloadCustomImages()]))}catch(t){console.error(t),An.openToast("Failed preloading","error")}}};F0([Ir()],gu.prototype,"preload",2),gu=F0([ot("wcm-explorer-context")],gu);var P4=Object.defineProperty,N4=Object.getOwnPropertyDescriptor,$4=(t,e,r,n)=>{for(var i=n>1?void 0:n?N4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&P4(e,r,i),i};let j0=class extends Ye{constructor(){super(),this.unsubscribeTheme=void 0,rt.setTheme(),this.unsubscribeTheme=In.subscribe(rt.setTheme)}disconnectedCallback(){var t;(t=this.unsubscribeTheme)==null||t.call(this)}};j0=$4([ot("wcm-theme-context")],j0);const L4=ut`@keyframes scroll{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(calc(-70px * 9),0,0)}}.wcm-slider{position:relative;overflow-x:hidden;padding:10px 0;margin:0 -20px;width:calc(100% + 40px)}.wcm-track{display:flex;width:calc(70px * 18);animation:scroll 20s linear infinite;opacity:.7}.wcm-track svg{margin:0 5px}wcm-wallet-image{width:60px;height:60px;margin:0 5px;border-radius:var(--wcm-wallet-icon-border-radius)}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-title{display:flex;align-items:center;margin-bottom:10px}.wcm-title svg{margin-right:6px}.wcm-title path{fill:var(--wcm-accent-color)}wcm-modal-footer .wcm-title{padding:0 10px}wcm-button-big{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);filter:drop-shadow(0 0 17px var(--wcm-color-bg-1))}wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-info-footer wcm-text{text-align:center;margin-bottom:15px}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var M4=Object.defineProperty,k4=Object.getOwnPropertyDescriptor,U4=(t,e,r,n)=>{for(var i=n>1?void 0:n?k4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&M4(e,r,i),i};let mu=class extends Ye{onGoToQrcode(){$t.push("Qrcode")}render(){const{recomendedWallets:t}=xr.state,e=[...t,...t],r=we.RECOMMENDED_WALLET_AMOUNT*2;return le`<wcm-modal-header title="Connect your wallet" .onAction="${this.onGoToQrcode}" .actionIcon="${ht.QRCODE_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-title">${ht.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">WalletConnect</wcm-text></div><div class="wcm-slider"><div class="wcm-track">${[...Array(r)].map((n,i)=>{const s=e[i%e.length];return s?le`<wcm-wallet-image walletId="${s.id}" imageId="${s.image_id}"></wcm-wallet-image>`:ht.WALLET_PLACEHOLDER})}</div><wcm-button-big @click="${Pe.handleAndroidLinking}"><wcm-text variant="medium-regular" color="inverse">Select Wallet</wcm-text></wcm-button-big></div></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">Choose WalletConnect to see supported apps on your device</wcm-text></wcm-info-footer>`}};mu.styles=[rt.globalCss,L4],mu=U4([ot("wcm-android-wallet-selection")],mu);const F4=ut`@keyframes loading{to{stroke-dashoffset:0}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(1px,0,0)}30%,50%,70%{transform:translate3d(-2px,0,0)}40%,60%{transform:translate3d(2px,0,0)}}:host{display:flex;flex-direction:column;align-items:center}div{position:relative;width:110px;height:110px;display:flex;justify-content:center;align-items:center;margin:40px 0 20px 0;transform:translate3d(0,0,0)}svg{position:absolute;width:110px;height:110px;fill:none;stroke:transparent;stroke-linecap:round;stroke-width:2px;top:0;left:0}use{stroke:var(--wcm-accent-color);animation:loading 1s linear infinite}wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:90px;height:90px}wcm-text{margin-bottom:40px}.wcm-error svg{stroke:var(--wcm-error-color)}.wcm-error use{display:none}.wcm-error{animation:shake .4s cubic-bezier(.36,.07,.19,.97) both}.wcm-stale svg,.wcm-stale use{display:none}`;var j4=Object.defineProperty,B4=Object.getOwnPropertyDescriptor,ts=(t,e,r,n)=>{for(var i=n>1?void 0:n?B4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&j4(e,r,i),i};let Vn=class extends Ye{constructor(){super(...arguments),this.walletId=void 0,this.imageId=void 0,this.isError=!1,this.isStale=!1,this.label=""}svgLoaderTemplate(){var t,e;const r=(e=(t=In.state.themeVariables)==null?void 0:t["--wcm-wallet-icon-large-border-radius"])!=null?e:rt.getPreset("--wcm-wallet-icon-large-border-radius");let n=0;r.includes("%")?n=88/100*parseInt(r,10):n=parseInt(r,10),n*=1.17;const i=317-n*1.57,s=425-n*1.8;return le`<svg viewBox="0 0 110 110" width="110" height="110"><rect id="wcm-loader" x="2" y="2" width="106" height="106" rx="${n}"/><use xlink:href="#wcm-loader" stroke-dasharray="106 ${i}" stroke-dashoffset="${s}"></use></svg>`}render(){const t={"wcm-error":this.isError,"wcm-stale":this.isStale};return le`<div class="${En(t)}">${this.svgLoaderTemplate()}<wcm-wallet-image walletId="${Er(this.walletId)}" imageId="${Er(this.imageId)}"></wcm-wallet-image></div><wcm-text variant="medium-regular" color="${this.isError?"error":"primary"}">${this.isError?"Connection declined":this.label}</wcm-text>`}};Vn.styles=[rt.globalCss,F4],ts([je()],Vn.prototype,"walletId",2),ts([je()],Vn.prototype,"imageId",2),ts([je({type:Boolean})],Vn.prototype,"isError",2),ts([je({type:Boolean})],Vn.prototype,"isStale",2),ts([je()],Vn.prototype,"label",2),Vn=ts([ot("wcm-connector-waiting")],Vn);const rs={manualWallets(){var t,e;const{mobileWallets:r,desktopWallets:n}=Rr.state,i=(t=rs.recentWallet())==null?void 0:t.id,s=we.isMobile()?r:n,o=s==null?void 0:s.filter(a=>i!==a.id);return(e=we.isMobile()?o==null?void 0:o.map(({id:a,name:c,links:u})=>({id:a,name:c,mobile:u,links:u})):o==null?void 0:o.map(({id:a,name:c,links:u})=>({id:a,name:c,desktop:u,links:u})))!=null?e:[]},recentWallet(){return Pe.getRecentWallet()},recomendedWallets(t=!1){var e;const r=t||(e=rs.recentWallet())==null?void 0:e.id,{recomendedWallets:n}=xr.state;return n.filter(i=>r!==i.id)}},Hn={onConnecting(t){Pe.goToConnectingView(t)},manualWalletsTemplate(){return rs.manualWallets().map(t=>le`<wcm-wallet-button walletId="${t.id}" name="${t.name}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`)},recomendedWalletsTemplate(t=!1){return rs.recomendedWallets(t).map(e=>le`<wcm-wallet-button name="${e.name}" walletId="${e.id}" imageId="${e.image_id}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`)},recentWalletTemplate(){const t=rs.recentWallet();if(t)return le`<wcm-wallet-button name="${t.name}" walletId="${t.id}" imageId="${Er(t.image_id)}" .recent="${!0}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`}},q4=ut`.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-desktop-title,.wcm-mobile-title{display:flex;align-items:center}.wcm-mobile-title{justify-content:space-between;margin-bottom:20px;margin-top:-10px}.wcm-desktop-title{margin-bottom:10px;padding:0 10px}.wcm-subtitle{display:flex;align-items:center}.wcm-subtitle:last-child path{fill:var(--wcm-color-fg-3)}.wcm-desktop-title svg,.wcm-mobile-title svg{margin-right:6px}.wcm-desktop-title path,.wcm-mobile-title path{fill:var(--wcm-accent-color)}`;var z4=Object.defineProperty,W4=Object.getOwnPropertyDescriptor,V4=(t,e,r,n)=>{for(var i=n>1?void 0:n?W4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&z4(e,r,i),i};let yu=class extends Ye{render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Rr.state,r=t!=="ALL"&&e,n=Hn.manualWalletsTemplate(),i=Hn.recomendedWalletsTemplate();let s=[Hn.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>4||r;let a=[];o?a=s.slice(0,3):a=s;const c=!!a.length;return le`<wcm-modal-header .border="${!0}" title="Connect your wallet" .onAction="${Pe.handleUriCopy}" .actionIcon="${ht.COPY_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-mobile-title"><div class="wcm-subtitle">${ht.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">Mobile</wcm-text></div><div class="wcm-subtitle">${ht.SCAN_ICON}<wcm-text variant="small-regular" color="secondary">Scan with your wallet</wcm-text></div></div><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>${c?le`<wcm-modal-footer><div class="wcm-desktop-title">${ht.DESKTOP_ICON}<wcm-text variant="small-regular" color="accent">Desktop</wcm-text></div><div class="wcm-grid">${a} ${o?le`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-footer>`:null}`}};yu.styles=[rt.globalCss,q4],yu=V4([ot("wcm-desktop-wallet-selection")],yu);const H4=ut`div{background-color:var(--wcm-color-bg-2);padding:10px 20px 15px 20px;border-top:1px solid var(--wcm-color-bg-3);text-align:center}a{color:var(--wcm-accent-color);text-decoration:none;transition:opacity .2s ease-in-out;display:inline}a:active{opacity:.8}@media(hover:hover){a:hover{opacity:.8}}`;var K4=Object.defineProperty,Z4=Object.getOwnPropertyDescriptor,G4=(t,e,r,n)=>{for(var i=n>1?void 0:n?Z4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&K4(e,r,i),i};let vu=class extends Ye{render(){const{termsOfServiceUrl:t,privacyPolicyUrl:e}=Rr.state;return t??e?le`<div><wcm-text variant="small-regular" color="secondary">By connecting your wallet to this app, you agree to the app's ${t?le`<a href="${t}" target="_blank" rel="noopener noreferrer">Terms of Service</a>`:null} ${t&&e?"and":null} ${e?le`<a href="${e}" target="_blank" rel="noopener noreferrer">Privacy Policy</a>`:null}</wcm-text></div>`:null}};vu.styles=[rt.globalCss,H4],vu=G4([ot("wcm-legal-notice")],vu);const Q4=ut`div{display:grid;grid-template-columns:repeat(4,80px);margin:0 -10px;justify-content:space-between;row-gap:10px}`;var Y4=Object.defineProperty,J4=Object.getOwnPropertyDescriptor,X4=(t,e,r,n)=>{for(var i=n>1?void 0:n?J4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Y4(e,r,i),i};let wu=class extends Ye{onQrcode(){$t.push("Qrcode")}render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Rr.state,r=t!=="ALL"&&e,n=Hn.manualWalletsTemplate(),i=Hn.recomendedWalletsTemplate();let s=[Hn.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>8||r;let a=[];o?a=s.slice(0,7):a=s;const c=!!a.length;return le`<wcm-modal-header title="Connect your wallet" .onAction="${this.onQrcode}" .actionIcon="${ht.QRCODE_ICON}"></wcm-modal-header>${c?le`<wcm-modal-content><div>${a} ${o?le`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-content>`:null}`}};wu.styles=[rt.globalCss,Q4],wu=X4([ot("wcm-mobile-wallet-selection")],wu);const ex=ut`:host{all:initial}.wcm-overlay{top:0;bottom:0;left:0;right:0;position:fixed;z-index:var(--wcm-z-index);overflow:hidden;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;background-color:var(--wcm-overlay-background-color);backdrop-filter:var(--wcm-overlay-backdrop-filter)}@media(max-height:720px) and (orientation:landscape){.wcm-overlay{overflow:scroll;align-items:flex-start;padding:20px 0}}.wcm-active{pointer-events:auto}.wcm-container{position:relative;max-width:360px;width:100%;outline:0;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) var(--wcm-container-border-radius) var(--wcm-container-border-radius);border:1px solid var(--wcm-color-overlay);overflow:hidden}.wcm-card{width:100%;position:relative;border-radius:var(--wcm-container-border-radius);overflow:hidden;box-shadow:0 6px 14px -6px rgba(10,16,31,.12),0 10px 32px -4px rgba(10,16,31,.1),0 0 0 1px var(--wcm-color-overlay);background-color:var(--wcm-color-bg-1);color:var(--wcm-color-fg-1)}@media(max-width:600px){.wcm-container{max-width:440px;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) 0 0}.wcm-card{border-radius:var(--wcm-container-border-radius) var(--wcm-container-border-radius) 0 0}.wcm-overlay{align-items:flex-end}}@media(max-width:440px){.wcm-container{border:0}}`;var tx=Object.defineProperty,rx=Object.getOwnPropertyDescriptor,bu=(t,e,r,n)=>{for(var i=n>1?void 0:n?rx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&tx(e,r,i),i};let ns=class extends Ye{constructor(){super(),this.open=!1,this.active=!1,this.unsubscribeModal=void 0,this.abortController=void 0,this.unsubscribeModal=Yn.subscribe(t=>{t.open?this.onOpenModalEvent():this.onCloseModalEvent()})}disconnectedCallback(){var t;(t=this.unsubscribeModal)==null||t.call(this)}get overlayEl(){return Pe.getShadowRootElement(this,".wcm-overlay")}get containerEl(){return Pe.getShadowRootElement(this,".wcm-container")}toggleBodyScroll(t){if(document.querySelector("body"))if(t){const e=document.getElementById("wcm-styles");e==null||e.remove()}else document.head.insertAdjacentHTML("beforeend",'<style id="wcm-styles">html,body{touch-action:none;overflow:hidden;overscroll-behavior:contain;}</style>')}onCloseModal(t){t.target===t.currentTarget&&Yn.close()}onOpenModalEvent(){this.toggleBodyScroll(!1),this.addKeyboardEvents(),this.open=!0,setTimeout(async()=>{const t=Pe.isMobileAnimation()?{y:["50vh","0vh"]}:{scale:[.98,1]},e=.1,r=.2;await Promise.all([vi(this.overlayEl,{opacity:[0,1]},{delay:e,duration:r}).finished,vi(this.containerEl,t,{delay:e,duration:r}).finished]),this.active=!0},0)}async onCloseModalEvent(){this.toggleBodyScroll(!0),this.removeKeyboardEvents();const t=Pe.isMobileAnimation()?{y:["0vh","50vh"]}:{scale:[1,.98]},e=.2;await Promise.all([vi(this.overlayEl,{opacity:[1,0]},{duration:e}).finished,vi(this.containerEl,t,{duration:e}).finished]),this.containerEl.removeAttribute("style"),this.active=!1,this.open=!1}addKeyboardEvents(){this.abortController=new AbortController,window.addEventListener("keydown",t=>{var e;t.key==="Escape"?Yn.close():t.key==="Tab"&&((e=t.target)!=null&&e.tagName.includes("wcm-")||this.containerEl.focus())},this.abortController),this.containerEl.focus()}removeKeyboardEvents(){var t;(t=this.abortController)==null||t.abort(),this.abortController=void 0}render(){const t={"wcm-overlay":!0,"wcm-active":this.active};return le`<wcm-explorer-context></wcm-explorer-context><wcm-theme-context></wcm-theme-context><div id="wcm-modal" class="${En(t)}" @click="${this.onCloseModal}" role="alertdialog" aria-modal="true"><div class="wcm-container" tabindex="0">${this.open?le`<wcm-modal-backcard></wcm-modal-backcard><div class="wcm-card"><wcm-modal-router></wcm-modal-router><wcm-modal-toast></wcm-modal-toast></div>`:null}</div></div>`}};ns.styles=[rt.globalCss,ex],bu([Ir()],ns.prototype,"open",2),bu([Ir()],ns.prototype,"active",2),ns=bu([ot("wcm-modal")],ns);const nx=ut`div{display:flex;margin-top:15px}slot{display:inline-block;margin:0 5px}wcm-button{margin:0 5px}`;var ix=Object.defineProperty,sx=Object.getOwnPropertyDescriptor,go=(t,e,r,n)=>{for(var i=n>1?void 0:n?sx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&ix(e,r,i),i};let bi=class extends Ye{constructor(){super(...arguments),this.isMobile=!1,this.isDesktop=!1,this.isWeb=!1,this.isRetry=!1}onMobile(){we.isMobile()?$t.replace("MobileConnecting"):$t.replace("MobileQrcodeConnecting")}onDesktop(){$t.replace("DesktopConnecting")}onWeb(){$t.replace("WebConnecting")}render(){return le`<div>${this.isRetry?le`<slot></slot>`:null} ${this.isMobile?le`<wcm-button .onClick="${this.onMobile}" .iconLeft="${ht.MOBILE_ICON}" variant="outline">Mobile</wcm-button>`:null} ${this.isDesktop?le`<wcm-button .onClick="${this.onDesktop}" .iconLeft="${ht.DESKTOP_ICON}" variant="outline">Desktop</wcm-button>`:null} ${this.isWeb?le`<wcm-button .onClick="${this.onWeb}" .iconLeft="${ht.GLOBE_ICON}" variant="outline">Web</wcm-button>`:null}</div>`}};bi.styles=[rt.globalCss,nx],go([je({type:Boolean})],bi.prototype,"isMobile",2),go([je({type:Boolean})],bi.prototype,"isDesktop",2),go([je({type:Boolean})],bi.prototype,"isWeb",2),go([je({type:Boolean})],bi.prototype,"isRetry",2),bi=go([ot("wcm-platform-selection")],bi);const ox=ut`button{display:flex;flex-direction:column;padding:5px 10px;border-radius:var(--wcm-button-hover-highlight-border-radius);height:100%;justify-content:flex-start}.wcm-icons{width:60px;height:60px;display:flex;flex-wrap:wrap;padding:7px;border-radius:var(--wcm-wallet-icon-border-radius);justify-content:space-between;align-items:center;margin-bottom:5px;background-color:var(--wcm-color-bg-2);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}.wcm-icons img{width:21px;height:21px;object-fit:cover;object-position:center;border-radius:calc(var(--wcm-wallet-icon-border-radius)/ 2);border:1px solid var(--wcm-color-overlay)}.wcm-icons svg{width:21px;height:21px}.wcm-icons img:nth-child(1),.wcm-icons img:nth-child(2),.wcm-icons svg:nth-child(1),.wcm-icons svg:nth-child(2){margin-bottom:4px}wcm-text{width:100%;text-align:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var ax=Object.defineProperty,cx=Object.getOwnPropertyDescriptor,lx=(t,e,r,n)=>{for(var i=n>1?void 0:n?cx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&ax(e,r,i),i};let _u=class extends Ye{onClick(){$t.push("WalletExplorer")}render(){const{recomendedWallets:t}=xr.state,e=rs.manualWallets(),r=[...t,...e].reverse().slice(0,4);return le`<button @click="${this.onClick}"><div class="wcm-icons">${r.map(n=>{const i=Pe.getWalletIcon(n);if(i)return le`<img crossorigin="anonymous" src="${i}">`;const s=Pe.getWalletIcon({id:n.id});return s?le`<img crossorigin="anonymous" src="${s}">`:ht.WALLET_PLACEHOLDER})} ${[...Array(4-r.length)].map(()=>ht.WALLET_PLACEHOLDER)}</div><wcm-text variant="xsmall-regular">View All</wcm-text></button>`}};_u.styles=[rt.globalCss,ox],_u=lx([ot("wcm-view-all-wallets-button")],_u);const ux=ut`.wcm-qr-container{width:100%;display:flex;justify-content:center;align-items:center;aspect-ratio:1/1}`;var dx=Object.defineProperty,hx=Object.getOwnPropertyDescriptor,La=(t,e,r,n)=>{for(var i=n>1?void 0:n?hx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&dx(e,r,i),i};let is=class extends Ye{constructor(){super(),this.walletId="",this.imageId="",this.uri="",setTimeout(()=>{const{walletConnectUri:t}=Vt.state;this.uri=t},0)}get overlayEl(){return Pe.getShadowRootElement(this,".wcm-qr-container")}render(){return le`<div class="wcm-qr-container">${this.uri?le`<wcm-qrcode size="${this.overlayEl.offsetWidth}" uri="${this.uri}" walletId="${Er(this.walletId)}" imageId="${Er(this.imageId)}"></wcm-qrcode>`:le`<wcm-spinner></wcm-spinner>`}</div>`}};is.styles=[rt.globalCss,ux],La([je()],is.prototype,"walletId",2),La([je()],is.prototype,"imageId",2),La([Ir()],is.prototype,"uri",2),is=La([ot("wcm-walletconnect-qr")],is);var fx=Object.defineProperty,px=Object.getOwnPropertyDescriptor,gx=(t,e,r,n)=>{for(var i=n>1?void 0:n?px(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&fx(e,r,i),i};let Eu=class extends Ye{viewTemplate(){return we.isAndroid()?le`<wcm-android-wallet-selection></wcm-android-wallet-selection>`:we.isMobile()?le`<wcm-mobile-wallet-selection></wcm-mobile-wallet-selection>`:le`<wcm-desktop-wallet-selection></wcm-desktop-wallet-selection>`}render(){return le`${this.viewTemplate()}<wcm-legal-notice></wcm-legal-notice>`}};Eu.styles=[rt.globalCss],Eu=gx([ot("wcm-connect-wallet-view")],Eu);const mx=ut`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var yx=Object.defineProperty,vx=Object.getOwnPropertyDescriptor,B0=(t,e,r,n)=>{for(var i=n>1?void 0:n?vx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&yx(e,r,i),i};let Ma=class extends Ye{constructor(){super(),this.isError=!1,this.openDesktopApp()}onFormatAndRedirect(t){const{desktop:e,name:r}=we.getWalletRouterData(),n=e==null?void 0:e.native;if(n){const i=we.formatNativeUrl(n,t,r);we.openHref(i,"_self")}}openDesktopApp(){const{walletConnectUri:t}=Vt.state,e=we.getWalletRouterData();Pe.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=we.getWalletRouterData(),{isMobile:n,isWeb:i}=Pe.getCachedRouterWalletPlatforms();return le`<wcm-modal-header title="${t}" .onAction="${Pe.handleUriCopy}" .actionIcon="${ht.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Er(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Connection can continue loading if ${t} is not installed on your device`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isWeb="${i}" .isRetry="${!0}"><wcm-button .onClick="${this.openDesktopApp.bind(this)}" .iconRight="${ht.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Ma.styles=[rt.globalCss,mx],B0([Ir()],Ma.prototype,"isError",2),Ma=B0([ot("wcm-desktop-connecting-view")],Ma);const wx=ut`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}wcm-button{margin-top:15px}`;var bx=Object.defineProperty,_x=Object.getOwnPropertyDescriptor,Ex=(t,e,r,n)=>{for(var i=n>1?void 0:n?_x(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&bx(e,r,i),i};let Su=class extends Ye{onInstall(t){t&&we.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,homepage:n}=we.getWalletRouterData();return le`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Er(r)}" label="Not Detected" .isStale="${!0}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Download ${t} to continue. If multiple browser extensions are installed, disable non ${t} ones and try again`}</wcm-text><wcm-button .onClick="${()=>this.onInstall(n)}" .iconLeft="${ht.ARROW_DOWN_ICON}">Download</wcm-button></wcm-info-footer>`}};Su.styles=[rt.globalCss,wx],Su=Ex([ot("wcm-install-wallet-view")],Su);const Sx=ut`wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:96px;height:96px;margin-bottom:20px}wcm-info-footer{display:flex;width:100%}.wcm-app-store{justify-content:space-between}.wcm-app-store wcm-wallet-image{margin-right:10px;margin-bottom:0;width:28px;height:28px;border-radius:var(--wcm-wallet-icon-small-border-radius)}.wcm-app-store div{display:flex;align-items:center}.wcm-app-store wcm-button{margin-right:-10px}.wcm-note{flex-direction:column;align-items:center;padding:5px 0}.wcm-note wcm-text{text-align:center}wcm-platform-selection{margin-top:-15px}.wcm-note wcm-text{margin-top:15px}.wcm-note wcm-text span{color:var(--wcm-accent-color)}`;var xx=Object.defineProperty,Cx=Object.getOwnPropertyDescriptor,q0=(t,e,r,n)=>{for(var i=n>1?void 0:n?Cx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&xx(e,r,i),i};let ka=class extends Ye{constructor(){super(),this.isError=!1,this.openMobileApp()}onFormatAndRedirect(t,e=!1){const{mobile:r,name:n}=we.getWalletRouterData(),i=r==null?void 0:r.native,s=r==null?void 0:r.universal;if(i&&!e){const o=we.formatNativeUrl(i,t,n);we.openHref(o,"_self")}else if(s){const o=we.formatUniversalUrl(s,t,n);we.openHref(o,"_self")}}openMobileApp(t=!1){const{walletConnectUri:e}=Vt.state,r=we.getWalletRouterData();Pe.setRecentWallet(r),e&&this.onFormatAndRedirect(e,t)}onGoToAppStore(t){t&&we.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,app:n,mobile:i}=we.getWalletRouterData(),{isWeb:s}=Pe.getCachedRouterWalletPlatforms(),o=n==null?void 0:n.ios,a=i==null?void 0:i.universal;return le`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Er(r)}" label="Tap 'Open' to continue…" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer class="wcm-note"><wcm-platform-selection .isWeb="${s}" .isRetry="${!0}"><wcm-button .onClick="${()=>this.openMobileApp(!1)}" .iconRight="${ht.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection>${a?le`<wcm-text color="secondary" variant="small-thin">Still doesn't work? <span tabindex="0" @click="${()=>this.openMobileApp(!0)}">Try this alternate link</span></wcm-text>`:null}</wcm-info-footer><wcm-info-footer class="wcm-app-store"><div><wcm-wallet-image walletId="${e}" imageId="${Er(r)}"></wcm-wallet-image><wcm-text>${`Get ${t}`}</wcm-text></div><wcm-button .iconRight="${ht.ARROW_RIGHT_ICON}" .onClick="${()=>this.onGoToAppStore(o)}" variant="ghost">App Store</wcm-button></wcm-info-footer>`}};ka.styles=[rt.globalCss,Sx],q0([Ir()],ka.prototype,"isError",2),ka=q0([ot("wcm-mobile-connecting-view")],ka);const Ox=ut`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var Dx=Object.defineProperty,Ix=Object.getOwnPropertyDescriptor,Ax=(t,e,r,n)=>{for(var i=n>1?void 0:n?Ix(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Dx(e,r,i),i};let xu=class extends Ye{render(){const{name:t,id:e,image_id:r}=we.getWalletRouterData(),{isDesktop:n,isWeb:i}=Pe.getCachedRouterWalletPlatforms();return le`<wcm-modal-header title="${t}" .onAction="${Pe.handleUriCopy}" .actionIcon="${ht.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr walletId="${e}" imageId="${Er(r)}"></wcm-walletconnect-qr></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Scan this QR Code with your phone's camera or inside ${t} app`}</wcm-text><wcm-platform-selection .isDesktop="${n}" .isWeb="${i}"></wcm-platform-selection></wcm-info-footer>`}};xu.styles=[rt.globalCss,Ox],xu=Ax([ot("wcm-mobile-qr-connecting-view")],xu);var Tx=Object.defineProperty,Rx=Object.getOwnPropertyDescriptor,Px=(t,e,r,n)=>{for(var i=n>1?void 0:n?Rx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Tx(e,r,i),i};let Cu=class extends Ye{render(){return le`<wcm-modal-header title="Scan the code" .onAction="${Pe.handleUriCopy}" .actionIcon="${ht.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>`}};Cu.styles=[rt.globalCss],Cu=Px([ot("wcm-qrcode-view")],Cu);const Nx=ut`wcm-modal-content{height:clamp(200px,60vh,600px);display:block;overflow:scroll;scrollbar-width:none;position:relative;margin-top:1px}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between;margin:-15px -10px;padding-top:20px}wcm-modal-content::after,wcm-modal-content::before{content:'';position:fixed;pointer-events:none;z-index:1;width:100%;height:20px;opacity:1}wcm-modal-content::before{box-shadow:0 -1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(var(--wcm-color-bg-1),rgba(255,255,255,0))}wcm-modal-content::after{box-shadow:0 1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(rgba(255,255,255,0),var(--wcm-color-bg-1));top:calc(100% - 20px)}wcm-modal-content::-webkit-scrollbar{display:none}.wcm-placeholder-block{display:flex;justify-content:center;align-items:center;height:100px;overflow:hidden}.wcm-empty,.wcm-loading{display:flex}.wcm-loading .wcm-placeholder-block{height:100%}.wcm-end-reached .wcm-placeholder-block{height:0;opacity:0}.wcm-empty .wcm-placeholder-block{opacity:1;height:100%}wcm-wallet-button{margin:calc((100% - 60px)/ 3) 0}`;var $x=Object.defineProperty,Lx=Object.getOwnPropertyDescriptor,mo=(t,e,r,n)=>{for(var i=n>1?void 0:n?Lx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&$x(e,r,i),i};const Ou=40;let _i=class extends Ye{constructor(){super(...arguments),this.loading=!xr.state.wallets.listings.length,this.firstFetch=!xr.state.wallets.listings.length,this.search="",this.endReached=!1,this.intersectionObserver=void 0,this.searchDebounce=Pe.debounce(t=>{t.length>=1?(this.firstFetch=!0,this.endReached=!1,this.search=t,xr.resetSearch(),this.fetchWallets()):this.search&&(this.search="",this.endReached=this.isLastPage(),xr.resetSearch())})}firstUpdated(){this.createPaginationObserver()}disconnectedCallback(){var t;(t=this.intersectionObserver)==null||t.disconnect()}get placeholderEl(){return Pe.getShadowRootElement(this,".wcm-placeholder-block")}createPaginationObserver(){this.intersectionObserver=new IntersectionObserver(([t])=>{t.isIntersecting&&!(this.search&&this.firstFetch)&&this.fetchWallets()}),this.intersectionObserver.observe(this.placeholderEl)}isLastPage(){const{wallets:t,search:e}=xr.state,{listings:r,total:n}=this.search?e:t;return n<=Ou||r.length>=n}async fetchWallets(){var t;const{wallets:e,search:r}=xr.state,{listings:n,total:i,page:s}=this.search?r:e;if(!this.endReached&&(this.firstFetch||i>Ou&&n.length<i))try{this.loading=!0;const o=(t=Vt.state.chains)==null?void 0:t.join(","),{listings:a}=await xr.getWallets({page:this.firstFetch?1:s+1,entries:Ou,search:this.search,version:2,chains:o}),c=a.map(u=>Pe.getWalletIcon(u));await Promise.all([...c.map(async u=>Pe.preloadImage(u)),we.wait(300)]),this.endReached=this.isLastPage()}catch(o){console.error(o),An.openToast(Pe.getErrorMessage(o),"error")}finally{this.loading=!1,this.firstFetch=!1}}onConnect(t){we.isAndroid()?Pe.handleMobileLinking(t):Pe.goToConnectingView(t)}onSearchChange(t){const{value:e}=t.target;this.searchDebounce(e)}render(){const{wallets:t,search:e}=xr.state,{listings:r}=this.search?e:t,n=this.loading&&!r.length,i=this.search.length>=3;let s=Hn.manualWalletsTemplate(),o=Hn.recomendedWalletsTemplate(!0);i&&(s=s.filter(({values:u})=>Pe.caseSafeIncludes(u[0],this.search)),o=o.filter(({values:u})=>Pe.caseSafeIncludes(u[0],this.search)));const a=!this.loading&&!r.length&&!o.length,c={"wcm-loading":n,"wcm-end-reached":this.endReached||!this.loading,"wcm-empty":a};return le`<wcm-modal-header><wcm-search-input .onChange="${this.onSearchChange.bind(this)}"></wcm-search-input></wcm-modal-header><wcm-modal-content class="${En(c)}"><div class="wcm-grid">${n?null:s} ${n?null:o} ${n?null:r.map(u=>le`${u?le`<wcm-wallet-button imageId="${u.image_id}" name="${u.name}" walletId="${u.id}" .onClick="${()=>this.onConnect(u)}"></wcm-wallet-button>`:null}`)}</div><div class="wcm-placeholder-block">${a?le`<wcm-text variant="big-bold" color="secondary">No results found</wcm-text>`:null} ${!a&&this.loading?le`<wcm-spinner></wcm-spinner>`:null}</div></wcm-modal-content>`}};_i.styles=[rt.globalCss,Nx],mo([Ir()],_i.prototype,"loading",2),mo([Ir()],_i.prototype,"firstFetch",2),mo([Ir()],_i.prototype,"search",2),mo([Ir()],_i.prototype,"endReached",2),_i=mo([ot("wcm-wallet-explorer-view")],_i);const Mx=ut`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var kx=Object.defineProperty,Ux=Object.getOwnPropertyDescriptor,z0=(t,e,r,n)=>{for(var i=n>1?void 0:n?Ux(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&kx(e,r,i),i};let Ua=class extends Ye{constructor(){super(),this.isError=!1,this.openWebWallet()}onFormatAndRedirect(t){const{desktop:e,name:r}=we.getWalletRouterData(),n=e==null?void 0:e.universal;if(n){const i=we.formatUniversalUrl(n,t,r);we.openHref(i,"_blank")}}openWebWallet(){const{walletConnectUri:t}=Vt.state,e=we.getWalletRouterData();Pe.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=we.getWalletRouterData(),{isMobile:n,isDesktop:i}=Pe.getCachedRouterWalletPlatforms(),s=we.isMobile();return le`<wcm-modal-header title="${t}" .onAction="${Pe.handleUriCopy}" .actionIcon="${ht.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Er(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`${t} web app has opened in a new tab. Go there, accept the connection, and come back`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isDesktop="${s?!1:i}" .isRetry="${!0}"><wcm-button .onClick="${this.openWebWallet.bind(this)}" .iconRight="${ht.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Ua.styles=[rt.globalCss,Mx],z0([Ir()],Ua.prototype,"isError",2),Ua=z0([ot("wcm-web-connecting-view")],Ua);const Fx=Object.freeze(Object.defineProperty({__proto__:null,get WcmModal(){return ns},get WcmQrCode(){return xn}},Symbol.toStringTag,{value:"Module"}));J.ICore=U3,J.ICrypto=F3,J.IEngine=eE,J.IEngineEvents=X3,J.IExpirer=Z3,J.IJsonRpcHistory=j3,J.IKeyChain=K3,J.IMessageTracker=B3,J.IPairing=G3,J.IPublisher=q3,J.IRelayer=z3,J.ISignClient=J3,J.ISignClientEvents=Y3,J.IStore=W3,J.ISubscriber=H3,J.ISubscriberTopicMap=V3,J.IVerify=Q3,J.PAGE_SIZE=I5,J.PuzzleWalletProvider=P5,J.aleoAddressRegex=Vf,J.aleoFieldRegex=Gf,J.aleoPrivateKeyRegex=Kf,J.aleoTransactionIdRegex=Zf,J.aleoU32=Qf,J.aleoU64=Yf,J.aleoViewKeyRegex=Hf,J.configureConnection=$f,J.connect=v5,J.createSharedState=b5,J.decrypt=_5,J.disconnect=E5,J.emitter=ci,J.getAccount=m5,J.getBalance=y5,J.getEvent=S5,J.getEvents=x5,J.getFormattedRecordPlaintext=h5,J.getRecords=O5,J.getWalletConnectModalSignClient=St,J.importSharedState=C5,J.projectId=Rf,J.queryClient=Sl,J.requestCreateEvent=w5,J.requestSignature=D5,J.shortenAddress=vl,J.signClient_puzzleProps=R_,J.useAccount=JE,J.useBalance=XE,J.useConnect=e5,J.useCreateSharedState=t5,J.useDecrypt=o5,J.useDisconnect=c5,J.useEvent=l5,J.useEvents=u5,J.useImportSharedState=d5,J.useOnSessionDelete=tl,J.useOnSessionEvent=Fi,J.useOnSessionExpire=Jf,J.useOnSessionUpdate=rl,J.useRecords=f5,J.useRequestCreateEvent=g5,J.useRequestSignature=p5,J.useSession=jr,J.wc_aleo_chains=Ps,J.wc_aleo_methods=Qo,J.wc_events=Yo,J.web3modal_puzzle_props=Pf,J.zodAddress=D3,J.zodEventStatus=L3,J.zodEventType=$3,J.zodField=R3,J.zodNetwork=M3,J.zodPrivateKey=A3,J.zodTransactionId=T3,J.zodU32=P3,J.zodU64=N3,J.zodViewKey=I3,J.zodVisibility=k3,Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})});
