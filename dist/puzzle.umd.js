(function(J,vt){typeof exports=="object"&&typeof module<"u"?vt(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],vt):(J=typeof globalThis<"u"?globalThis:J||self,vt(J["@puzzlehq/sdk"]=J["@puzzlehq/sdk"]||{},J.React))})(this,function(J,vt){"use strict";function Y0(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:()=>t[r]})}}return e.default=t,Object.freeze(e)}const gr=Y0(vt),J0={name:"@puzzlehq/sdk",displayName:"Puzzle SDK",version:"0.1.43",description:"Your portal to privacy",main:"./dist/puzzle.cjs.js",module:"./dist/puzzle.es.js",browser:"./dist/puzzle.umd.js",types:"./dist/types/src/index.d.ts",exports:{".":{import:"./dist/puzzle.es.js",require:"./dist/puzzle.cjs.js",browser:"./dist/puzzle.umd.js",types:"./dist/types/src/index.d.ts"}},type:"module",scripts:{build:"vite build && tsc --declaration --emitDeclarationOnly --outDir dist/types","type-check":"tsc --noEmit"},dependencies:{"@puzzlehq/types":"1.0.8","@tanstack/react-query":"^4.29.5","@tanstack/react-query-devtools":"^5.13.5","@trpc/client":"^10.9.0","@trpc/react-query":"^10.9.0","@trpc/server":"^10.8.1","@types/debug":"^4.1.7","@walletconnect/keyvaluestorage":"1.0.2","@walletconnect/modal-sign-html":"^2.6.2","@walletconnect/types":"^2.9.0","@walletconnect/utils":"^2.9.0",debug:"^4.3.4",eventemitter3:"^5.0.1",events:"^3.3.0",immer:"^9.0.19",react:"^18.2.0",ws:"^8.13.0",zustand:"^4.3.9"},devDependencies:{"@types/chrome":"^0.0.228","@types/node":"^18.11.18","@types/react":"^18.0.27","@types/react-dom":"^18.0.10",typescript:"^4.9.4",vite:"^4.4.7"},repository:{type:"git",url:"git+https://github.com/puzzlehq/puzzle-sdk.git"},keywords:["puzzle","aleo","aztec","web3","crypto\\"],author:"Puzzle",license:"ISC",bugs:{url:"https://github.com/puzzlehq/puzzle-sdk/issues"},homepage:"https://github.com/puzzlehq/puzzle-sdk#readme",pnpm:{patchedDependencies:{"@walletconnect/keyvaluestorage@1.0.2":"patches/@walletconnect__keyvaluestorage@1.0.2.patch","@walletconnect/core@2.10.0":"patches/@walletconnect__core@2.10.0.patch"}}},X0=Symbol(),Pu=Object.getPrototypeOf,Va=new WeakMap,eg=t=>t&&(Va.has(t)?Va.get(t):Pu(t)===Object.prototype||Pu(t)===Array.prototype),tg=t=>eg(t)&&t[X0]||null,Nu=(t,e=!0)=>{Va.set(t,e)},Ha=t=>typeof t=="object"&&t!==null,On=new WeakMap,Eo=new WeakSet,rg=(t=Object.is,e=(u,d)=>new Proxy(u,d),r=u=>Ha(u)&&!Eo.has(u)&&(Array.isArray(u)||!(Symbol.iterator in u))&&!(u instanceof WeakMap)&&!(u instanceof WeakSet)&&!(u instanceof Error)&&!(u instanceof Number)&&!(u instanceof Date)&&!(u instanceof String)&&!(u instanceof RegExp)&&!(u instanceof ArrayBuffer),n=u=>{switch(u.status){case"fulfilled":return u.value;case"rejected":throw u.reason;default:throw u}},i=new WeakMap,s=(u,d,f=n)=>{const p=i.get(u);if((p==null?void 0:p[0])===d)return p[1];const y=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u));return Nu(y,!0),i.set(u,[d,y]),Reflect.ownKeys(u).forEach(b=>{if(Object.getOwnPropertyDescriptor(y,b))return;const E=Reflect.get(u,b),x={value:E,enumerable:!0,configurable:!0};if(Eo.has(E))Nu(E,!1);else if(E instanceof Promise)delete x.value,x.get=()=>f(E);else if(On.has(E)){const[I,w]=On.get(E);x.value=s(I,w(),f)}Object.defineProperty(y,b,x)}),Object.preventExtensions(y)},o=new WeakMap,a=[1,1],c=u=>{if(!Ha(u))throw new Error("object required");const d=o.get(u);if(d)return d;let f=a[0];const p=new Set,y=(P,N=++a[0])=>{f!==N&&(f=N,p.forEach(z=>z(P,N)))};let b=a[1];const E=(P=++a[1])=>(b!==P&&!p.size&&(b=P,I.forEach(([N])=>{const z=N[1](P);z>f&&(f=z)})),f),x=P=>(N,z)=>{const W=[...N];W[1]=[P,...W[1]],y(W,z)},I=new Map,w=(P,N)=>{if(p.size){const z=N[3](x(P));I.set(P,[N,z])}else I.set(P,[N])},C=P=>{var N;const z=I.get(P);z&&(I.delete(P),(N=z[1])==null||N.call(z))},v=P=>(p.add(P),p.size===1&&I.forEach(([z,W],G)=>{const $=z[3](x(G));I.set(G,[z,$])}),()=>{p.delete(P),p.size===0&&I.forEach(([z,W],G)=>{W&&(W(),I.set(G,[z]))})}),_=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u)),l=e(_,{deleteProperty(P,N){const z=Reflect.get(P,N);C(N);const W=Reflect.deleteProperty(P,N);return W&&y(["delete",[N],z]),W},set(P,N,z,W){const G=Reflect.has(P,N),$=Reflect.get(P,N,W);if(G&&(t($,z)||o.has(z)&&t($,o.get(z))))return!0;C(N),Ha(z)&&(z=tg(z)||z);let j=z;if(z instanceof Promise)z.then(oe=>{z.status="fulfilled",z.value=oe,y(["resolve",[N],oe])}).catch(oe=>{z.status="rejected",z.reason=oe,y(["reject",[N],oe])});else{!On.has(z)&&r(z)&&(j=c(z));const oe=!Eo.has(j)&&On.get(j);oe&&w(N,oe)}return Reflect.set(P,N,j,W),y(["set",[N],z,$]),!0}});o.set(u,l);const m=[_,E,s,v];return On.set(l,m),Reflect.ownKeys(u).forEach(P=>{const N=Object.getOwnPropertyDescriptor(u,P);"value"in N&&(l[P]=u[P],delete N.value,delete N.writable),Object.defineProperty(_,P,N)}),l})=>[c,On,Eo,t,e,r,n,i,s,o,a],[ng]=rg();function Dn(t={}){return ng(t)}function Gn(t,e,r){const n=On.get(t);let i;const s=[],o=n[3];let a=!1;const u=o(d=>{if(s.push(d),r){e(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,u()}}function ig(t,e){const r=On.get(t),[n,i,s]=r;return s(n,i(),e)}const Jt=Dn({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),$t={state:Jt,subscribe(t){return Gn(Jt,()=>t(Jt))},push(t,e){t!==Jt.view&&(Jt.view=t,e&&(Jt.data=e),Jt.history.push(t))},reset(t){Jt.view=t,Jt.history=[t]},replace(t){Jt.history.length>1&&(Jt.history[Jt.history.length-1]=t,Jt.view=t)},goBack(){if(Jt.history.length>1){Jt.history.pop();const[t]=Jt.history.slice(-1);Jt.view=t}},setData(t){Jt.data=t}},we={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return we.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const t=navigator.userAgent.toLowerCase();return we.isMobile()&&(t.includes("iphone")||t.includes("ipad"))},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},isArray(t){return Array.isArray(t)&&t.length>0},formatNativeUrl(t,e,r){if(we.isHttpUrl(t))return this.formatUniversalUrl(t,e,r);let n=t;n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},formatUniversalUrl(t,e,r){if(!we.isHttpUrl(t))return this.formatNativeUrl(t,e,r);let n=t;n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},async wait(t){return new Promise(e=>{setTimeout(e,t)})},openHref(t,e){window.open(t,e,"noreferrer noopener")},setWalletConnectDeepLink(t,e){try{localStorage.setItem(we.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(t){try{const[e]=t.split("?");localStorage.setItem(we.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(we.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(we.WCM_VERSION,"2.6.2")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var t;const e=(t=$t.state.data)==null?void 0:t.Wallet;if(!e)throw new Error('Missing "Wallet" view data');return e}},sg=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),ar=Dn({enabled:sg,userSessionId:"",events:[],connectedWalletId:void 0}),$u={state:ar,subscribe(t){return Gn(ar.events,()=>t(ig(ar.events[ar.events.length-1])))},initialize(){ar.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(ar.userSessionId=crypto.randomUUID())},setConnectedWalletId(t){ar.connectedWalletId=t},click(t){if(ar.enabled){const e={type:"CLICK",name:t.name,userSessionId:ar.userSessionId,timestamp:Date.now(),data:t};ar.events.push(e)}},track(t){if(ar.enabled){const e={type:"TRACK",name:t.name,userSessionId:ar.userSessionId,timestamp:Date.now(),data:t};ar.events.push(e)}},view(t){if(ar.enabled){const e={type:"VIEW",name:t.name,userSessionId:ar.userSessionId,timestamp:Date.now(),data:t};ar.events.push(e)}}},en=Dn({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),Vt={state:en,subscribe(t){return Gn(en,()=>t(en))},setChains(t){en.chains=t},setWalletConnectUri(t){en.walletConnectUri=t},setIsCustomDesktop(t){en.isCustomDesktop=t},setIsCustomMobile(t){en.isCustomMobile=t},setIsDataLoaded(t){en.isDataLoaded=t},setIsUiLoaded(t){en.isUiLoaded=t},setIsAuth(t){en.isAuth=t}},So=Dn({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),Rr={state:So,subscribe(t){return Gn(So,()=>t(So))},setConfig(t){var e,r;$u.initialize(),Vt.setChains(t.chains),Vt.setIsAuth(!!t.enableAuthMode),Vt.setIsCustomMobile(!!((e=t.mobileWallets)!=null&&e.length)),Vt.setIsCustomDesktop(!!((r=t.desktopWallets)!=null&&r.length)),we.setModalVersionInStorage(),Object.assign(So,t)}};var og=Object.defineProperty,Lu=Object.getOwnPropertySymbols,ag=Object.prototype.hasOwnProperty,cg=Object.prototype.propertyIsEnumerable,Mu=(t,e,r)=>e in t?og(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,lg=(t,e)=>{for(var r in e||(e={}))ag.call(e,r)&&Mu(t,r,e[r]);if(Lu)for(var r of Lu(e))cg.call(e,r)&&Mu(t,r,e[r]);return t};const Ka="https://explorer-api.walletconnect.com",Za="wcm",Ga="js-2.6.2";async function xo(t,e){const r=lg({sdkType:Za,sdkVersion:Ga},e),n=new URL(t,Ka);return n.searchParams.append("projectId",Rr.state.projectId),Object.entries(r).forEach(([i,s])=>{s&&n.searchParams.append(i,String(s))}),(await fetch(n)).json()}const Qn={async getDesktopListings(t){return xo("/w3m/v1/getDesktopListings",t)},async getMobileListings(t){return xo("/w3m/v1/getMobileListings",t)},async getInjectedListings(t){return xo("/w3m/v1/getInjectedListings",t)},async getAllListings(t){return xo("/w3m/v1/getAllListings",t)},getWalletImageUrl(t){return`${Ka}/w3m/v1/getWalletImage/${t}?projectId=${Rr.state.projectId}&sdkType=${Za}&sdkVersion=${Ga}`},getAssetImageUrl(t){return`${Ka}/w3m/v1/getAssetImage/${t}?projectId=${Rr.state.projectId}&sdkType=${Za}&sdkVersion=${Ga}`}};var ug=Object.defineProperty,ku=Object.getOwnPropertySymbols,dg=Object.prototype.hasOwnProperty,hg=Object.prototype.propertyIsEnumerable,Uu=(t,e,r)=>e in t?ug(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,fg=(t,e)=>{for(var r in e||(e={}))dg.call(e,r)&&Uu(t,r,e[r]);if(ku)for(var r of ku(e))hg.call(e,r)&&Uu(t,r,e[r]);return t};const Fu=we.isMobile(),tn=Dn({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),xr={state:tn,async getRecomendedWallets(){const{explorerRecommendedWalletIds:t,explorerExcludedWalletIds:e}=Rr.state;if(t==="NONE"||e==="ALL"&&!t)return tn.recomendedWallets;if(we.isArray(t)){const r={recommendedIds:t.join(",")},{listings:n}=await Qn.getAllListings(r),i=Object.values(n);i.sort((s,o)=>{const a=t.indexOf(s.id),c=t.indexOf(o.id);return a-c}),tn.recomendedWallets=i}else{const{chains:r,isAuth:n}=Vt.state,i=r==null?void 0:r.join(","),s=we.isArray(e),o={page:1,sdks:n?"auth_v1":void 0,entries:we.RECOMMENDED_WALLET_AMOUNT,chains:i,version:2,excludedIds:s?e.join(","):void 0},{listings:a}=Fu?await Qn.getMobileListings(o):await Qn.getDesktopListings(o);tn.recomendedWallets=Object.values(a)}return tn.recomendedWallets},async getWallets(t){const e=fg({},t),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:n}=Rr.state,{recomendedWallets:i}=tn;if(n==="ALL")return tn.wallets;i.length?e.excludedIds=i.map(f=>f.id).join(","):we.isArray(r)&&(e.excludedIds=r.join(",")),we.isArray(n)&&(e.excludedIds=[e.excludedIds,n].filter(Boolean).join(",")),Vt.state.isAuth&&(e.sdks="auth_v1");const{page:s,search:o}=t,{listings:a,total:c}=Fu?await Qn.getMobileListings(e):await Qn.getDesktopListings(e),u=Object.values(a),d=o?"search":"wallets";return tn[d]={listings:[...tn[d].listings,...u],total:c,page:s??1},{listings:u,total:c}},getWalletImageUrl(t){return Qn.getWalletImageUrl(t)},getAssetImageUrl(t){return Qn.getAssetImageUrl(t)},resetSearch(){tn.search={listings:[],total:0,page:1}}},Ci=Dn({open:!1}),Yn={state:Ci,subscribe(t){return Gn(Ci,()=>t(Ci))},async open(t){return new Promise(e=>{const{isUiLoaded:r,isDataLoaded:n}=Vt.state;if(we.removeWalletConnectDeepLink(),Vt.setWalletConnectUri(t==null?void 0:t.uri),Vt.setChains(t==null?void 0:t.chains),$t.reset("ConnectWallet"),r&&n)Ci.open=!0,e();else{const i=setInterval(()=>{const s=Vt.state;s.isUiLoaded&&s.isDataLoaded&&(clearInterval(i),Ci.open=!0,e())},200)}})},close(){Ci.open=!1}};var pg=Object.defineProperty,ju=Object.getOwnPropertySymbols,gg=Object.prototype.hasOwnProperty,mg=Object.prototype.propertyIsEnumerable,Bu=(t,e,r)=>e in t?pg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yg=(t,e)=>{for(var r in e||(e={}))gg.call(e,r)&&Bu(t,r,e[r]);if(ju)for(var r of ju(e))mg.call(e,r)&&Bu(t,r,e[r]);return t};function vg(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const os=Dn({themeMode:vg()?"dark":"light"}),In={state:os,subscribe(t){return Gn(os,()=>t(os))},setThemeConfig(t){const{themeMode:e,themeVariables:r}=t;e&&(os.themeMode=e),r&&(os.themeVariables=yg({},r))}},Jn=Dn({open:!1,message:"",variant:"success"}),An={state:Jn,subscribe(t){return Gn(Jn,()=>t(Jn))},openToast(t,e){Jn.open=!0,Jn.message=t,Jn.variant=e},closeToast(){Jn.open=!1}};let wg=class{constructor(e){this.openModal=Yn.open,this.closeModal=Yn.close,this.subscribeModal=Yn.subscribe,this.setTheme=In.setThemeConfig,In.setThemeConfig(e),Rr.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.resolve().then(()=>Mx);const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),Vt.setIsUiLoaded(!0)}}};var rn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Co(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Qa(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Ya={exports:{}},Oi=typeof Reflect=="object"?Reflect:null,qu=Oi&&typeof Oi.apply=="function"?Oi.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Oo;Oi&&typeof Oi.ownKeys=="function"?Oo=Oi.ownKeys:Object.getOwnPropertySymbols?Oo=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Oo=function(e){return Object.getOwnPropertyNames(e)};function bg(t){console&&console.warn&&console.warn(t)}var zu=Number.isNaN||function(e){return e!==e};function mt(){mt.init.call(this)}Ya.exports=mt,Ya.exports.once=xg,mt.EventEmitter=mt,mt.prototype._events=void 0,mt.prototype._eventsCount=0,mt.prototype._maxListeners=void 0;var Wu=10;function Do(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(mt,"defaultMaxListeners",{enumerable:!0,get:function(){return Wu},set:function(t){if(typeof t!="number"||t<0||zu(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Wu=t}}),mt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},mt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||zu(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Vu(t){return t._maxListeners===void 0?mt.defaultMaxListeners:t._maxListeners}mt.prototype.getMaxListeners=function(){return Vu(this)},mt.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")qu(c,this,r);else for(var u=c.length,d=Qu(c,u),n=0;n<u;++n)qu(d[n],this,r);return!0};function Hu(t,e,r,n){var i,s,o;if(Do(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=Vu(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,bg(a)}return t}mt.prototype.addListener=function(e,r){return Hu(this,e,r,!1)},mt.prototype.on=mt.prototype.addListener,mt.prototype.prependListener=function(e,r){return Hu(this,e,r,!0)};function _g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ku(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=_g.bind(n);return i.listener=r,n.wrapFn=i,i}mt.prototype.once=function(e,r){return Do(r),this.on(e,Ku(this,e,r)),this},mt.prototype.prependOnceListener=function(e,r){return Do(r),this.prependListener(e,Ku(this,e,r)),this},mt.prototype.removeListener=function(e,r){var n,i,s,o,a;if(Do(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():Eg(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this},mt.prototype.off=mt.prototype.removeListener,mt.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Zu(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?Sg(i):Qu(i,i.length)}mt.prototype.listeners=function(e){return Zu(this,e,!0)},mt.prototype.rawListeners=function(e){return Zu(this,e,!1)},mt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Gu.call(t,e)},mt.prototype.listenerCount=Gu;function Gu(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}mt.prototype.eventNames=function(){return this._eventsCount>0?Oo(this._events):[]};function Qu(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Eg(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Sg(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function xg(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Yu(t,e,s,{once:!0}),e!=="error"&&Cg(t,i,{once:!0})})}function Cg(t,e,r){typeof t.on=="function"&&Yu(t,"error",e,r)}function Yu(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Ur=Ya.exports;const as=Co(Ur);var Io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Og(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ao(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ju={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,i,s){function o(u,d){if(!i[u]){if(!n[u]){var f=typeof Ao=="function"&&Ao;if(!d&&f)return f(u,!0);if(a)return a(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var y=i[u]={exports:{}};n[u][0].call(y.exports,function(b){var E=n[u][1][b];return o(E||b)},y,y.exports,r,n,i,s)}return i[u].exports}for(var a=typeof Ao=="function"&&Ao,c=0;c<s.length;c++)o(s[c]);return o}({1:[function(r,n,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var c=0,u=new o(b),d=s.document.createTextNode("");u.observe(d,{characterData:!0}),a=function(){d.data=c=++c%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=b,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var x=s.document.createElement("script");x.onreadystatechange=function(){b(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},s.document.documentElement.appendChild(x)}:a=function(){setTimeout(b,0)};var p,y=[];function b(){p=!0;for(var x,I,w=y.length;w;){for(I=y,y=[],x=-1;++x<w;)I[x]();w=y.length}p=!1}n.exports=E;function E(x){y.push(x)===1&&!p&&a()}}).call(this,typeof Io<"u"?Io:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,n,i){var s=r(1);function o(){}var a={},c=["REJECTED"],u=["FULFILLED"],d=["PENDING"];n.exports=f;function f(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,_!==o&&E(this,_)}f.prototype.catch=function(_){return this.then(null,_)},f.prototype.then=function(_,g){if(typeof _!="function"&&this.state===u||typeof g!="function"&&this.state===c)return this;var l=new this.constructor(o);if(this.state!==d){var m=this.state===u?_:g;y(l,m,this.outcome)}else this.queue.push(new p(l,_,g));return l};function p(_,g,l){this.promise=_,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof l=="function"&&(this.onRejected=l,this.callRejected=this.otherCallRejected)}p.prototype.callFulfilled=function(_){a.resolve(this.promise,_)},p.prototype.otherCallFulfilled=function(_){y(this.promise,this.onFulfilled,_)},p.prototype.callRejected=function(_){a.reject(this.promise,_)},p.prototype.otherCallRejected=function(_){y(this.promise,this.onRejected,_)};function y(_,g,l){s(function(){var m;try{m=g(l)}catch(P){return a.reject(_,P)}m===_?a.reject(_,new TypeError("Cannot resolve promise with itself")):a.resolve(_,m)})}a.resolve=function(_,g){var l=x(b,g);if(l.status==="error")return a.reject(_,l.value);var m=l.value;if(m)E(_,m);else{_.state=u,_.outcome=g;for(var P=-1,N=_.queue.length;++P<N;)_.queue[P].callFulfilled(g)}return _},a.reject=function(_,g){_.state=c,_.outcome=g;for(var l=-1,m=_.queue.length;++l<m;)_.queue[l].callRejected(g);return _};function b(_){var g=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof g=="function")return function(){g.apply(_,arguments)}}function E(_,g){var l=!1;function m(W){l||(l=!0,a.reject(_,W))}function P(W){l||(l=!0,a.resolve(_,W))}function N(){g(P,m)}var z=x(N);z.status==="error"&&m(z.value)}function x(_,g){var l={};try{l.value=_(g),l.status="success"}catch(m){l.status="error",l.value=m}return l}f.resolve=I;function I(_){return _ instanceof this?_:a.resolve(new this(o),_)}f.reject=w;function w(_){var g=new this(o);return a.reject(g,_)}f.all=C;function C(_){var g=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var l=_.length,m=!1;if(!l)return this.resolve([]);for(var P=new Array(l),N=0,z=-1,W=new this(o);++z<l;)G(_[z],z);return W;function G($,j){g.resolve($).then(oe,function(Y){m||(m=!0,a.reject(W,Y))});function oe(Y){P[j]=Y,++N===l&&!m&&(m=!0,a.resolve(W,P))}}}f.race=v;function v(_){var g=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var l=_.length,m=!1;if(!l)return this.resolve([]);for(var P=-1,N=new this(o);++P<l;)z(_[P]);return N;function z(W){g.resolve(W).then(function(G){m||(m=!0,a.resolve(N,G))},function(G){m||(m=!0,a.reject(N,G))})}}},{1:1}],3:[function(r,n,i){(function(s){typeof s.Promise!="function"&&(s.Promise=r(2))}).call(this,typeof Io<"u"?Io:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,n,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S};function o(S,A){if(!(S instanceof A))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var c=a();function u(){try{if(!c||!c.open)return!1;var S=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),A=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!S||A)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function d(S,A){S=S||[],A=A||{};try{return new Blob(S,A)}catch(F){if(F.name!=="TypeError")throw F;for(var D=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,U=new D,L=0;L<S.length;L+=1)U.append(S[L]);return U.getBlob(A.type)}}typeof Promise>"u"&&r(3);var f=Promise;function p(S,A){A&&S.then(function(D){A(null,D)},function(D){A(D)})}function y(S,A,D){typeof A=="function"&&S.then(A),typeof D=="function"&&S.catch(D)}function b(S){return typeof S!="string"&&(console.warn(S+" used as a key, but it is not a string."),S=String(S)),S}function E(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var x="local-forage-detect-blob-support",I=void 0,w={},C=Object.prototype.toString,v="readonly",_="readwrite";function g(S){for(var A=S.length,D=new ArrayBuffer(A),U=new Uint8Array(D),L=0;L<A;L++)U[L]=S.charCodeAt(L);return D}function l(S){return new f(function(A){var D=S.transaction(x,_),U=d([""]);D.objectStore(x).put(U,"key"),D.onabort=function(L){L.preventDefault(),L.stopPropagation(),A(!1)},D.oncomplete=function(){var L=navigator.userAgent.match(/Chrome\/(\d+)/),F=navigator.userAgent.match(/Edge\//);A(F||!L||parseInt(L[1],10)>=43)}}).catch(function(){return!1})}function m(S){return typeof I=="boolean"?f.resolve(I):l(S).then(function(A){return I=A,I})}function P(S){var A=w[S.name],D={};D.promise=new f(function(U,L){D.resolve=U,D.reject=L}),A.deferredOperations.push(D),A.dbReady?A.dbReady=A.dbReady.then(function(){return D.promise}):A.dbReady=D.promise}function N(S){var A=w[S.name],D=A.deferredOperations.pop();if(D)return D.resolve(),D.promise}function z(S,A){var D=w[S.name],U=D.deferredOperations.pop();if(U)return U.reject(A),U.promise}function W(S,A){return new f(function(D,U){if(w[S.name]=w[S.name]||xe(),S.db)if(A)P(S),S.db.close();else return D(S.db);var L=[S.name];A&&L.push(S.version);var F=c.open.apply(c,L);A&&(F.onupgradeneeded=function(V){var te=F.result;try{te.createObjectStore(S.storeName),V.oldVersion<=1&&te.createObjectStore(x)}catch(se){if(se.name==="ConstraintError")console.warn('The database "'+S.name+'" has been upgraded from version '+V.oldVersion+" to version "+V.newVersion+', but the storage "'+S.storeName+'" already exists.');else throw se}}),F.onerror=function(V){V.preventDefault(),U(F.error)},F.onsuccess=function(){var V=F.result;V.onversionchange=function(te){te.target.close()},D(V),N(S)}})}function G(S){return W(S,!1)}function $(S){return W(S,!0)}function j(S,A){if(!S.db)return!0;var D=!S.db.objectStoreNames.contains(S.storeName),U=S.version<S.db.version,L=S.version>S.db.version;if(U&&(S.version!==A&&console.warn('The database "'+S.name+`" can't be downgraded from version `+S.db.version+" to version "+S.version+"."),S.version=S.db.version),L||D){if(D){var F=S.db.version+1;F>S.version&&(S.version=F)}return!0}return!1}function oe(S){return new f(function(A,D){var U=new FileReader;U.onerror=D,U.onloadend=function(L){var F=btoa(L.target.result||"");A({__local_forage_encoded_blob:!0,data:F,type:S.type})},U.readAsBinaryString(S)})}function Y(S){var A=g(atob(S.data));return d([A],{type:S.type})}function Z(S){return S&&S.__local_forage_encoded_blob}function X(S){var A=this,D=A._initReady().then(function(){var U=w[A._dbInfo.name];if(U&&U.dbReady)return U.dbReady});return y(D,S,S),D}function K(S){P(S);for(var A=w[S.name],D=A.forages,U=0;U<D.length;U++){var L=D[U];L._dbInfo.db&&(L._dbInfo.db.close(),L._dbInfo.db=null)}return S.db=null,G(S).then(function(F){return S.db=F,j(S)?$(S):F}).then(function(F){S.db=A.db=F;for(var V=0;V<D.length;V++)D[V]._dbInfo.db=F}).catch(function(F){throw z(S,F),F})}function ee(S,A,D,U){U===void 0&&(U=1);try{var L=S.db.transaction(S.storeName,A);D(null,L)}catch(F){if(U>0&&(!S.db||F.name==="InvalidStateError"||F.name==="NotFoundError"))return f.resolve().then(function(){if(!S.db||F.name==="NotFoundError"&&!S.db.objectStoreNames.contains(S.storeName)&&S.version<=S.db.version)return S.db&&(S.version=S.db.version+1),$(S)}).then(function(){return K(S).then(function(){ee(S,A,D,U-1)})}).catch(D);D(F)}}function xe(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ne(S){var A=this,D={db:null};if(S)for(var U in S)D[U]=S[U];var L=w[D.name];L||(L=xe(),w[D.name]=L),L.forages.push(A),A._initReady||(A._initReady=A.ready,A.ready=X);var F=[];function V(){return f.resolve()}for(var te=0;te<L.forages.length;te++){var se=L.forages[te];se!==A&&F.push(se._initReady().catch(V))}var ie=L.forages.slice(0);return f.all(F).then(function(){return D.db=L.db,G(D)}).then(function(re){return D.db=re,j(D,A._defaultConfig.version)?$(D):re}).then(function(re){D.db=L.db=re,A._dbInfo=D;for(var ve=0;ve<ie.length;ve++){var Qe=ie[ve];Qe!==A&&(Qe._dbInfo.db=D.db,Qe._dbInfo.version=D.version)}})}function Ee(S,A){var D=this;S=b(S);var U=new f(function(L,F){D.ready().then(function(){ee(D._dbInfo,v,function(V,te){if(V)return F(V);try{var se=te.objectStore(D._dbInfo.storeName),ie=se.get(S);ie.onsuccess=function(){var re=ie.result;re===void 0&&(re=null),Z(re)&&(re=Y(re)),L(re)},ie.onerror=function(){F(ie.error)}}catch(re){F(re)}})}).catch(F)});return p(U,A),U}function fe(S,A){var D=this,U=new f(function(L,F){D.ready().then(function(){ee(D._dbInfo,v,function(V,te){if(V)return F(V);try{var se=te.objectStore(D._dbInfo.storeName),ie=se.openCursor(),re=1;ie.onsuccess=function(){var ve=ie.result;if(ve){var Qe=ve.value;Z(Qe)&&(Qe=Y(Qe));var gt=S(Qe,ve.key,re++);gt!==void 0?L(gt):ve.continue()}else L()},ie.onerror=function(){F(ie.error)}}catch(ve){F(ve)}})}).catch(F)});return p(U,A),U}function _e(S,A,D){var U=this;S=b(S);var L=new f(function(F,V){var te;U.ready().then(function(){return te=U._dbInfo,C.call(A)==="[object Blob]"?m(te.db).then(function(se){return se?A:oe(A)}):A}).then(function(se){ee(U._dbInfo,_,function(ie,re){if(ie)return V(ie);try{var ve=re.objectStore(U._dbInfo.storeName);se===null&&(se=void 0);var Qe=ve.put(se,S);re.oncomplete=function(){se===void 0&&(se=null),F(se)},re.onabort=re.onerror=function(){var gt=Qe.error?Qe.error:Qe.transaction.error;V(gt)}}catch(gt){V(gt)}})}).catch(V)});return p(L,D),L}function q(S,A){var D=this;S=b(S);var U=new f(function(L,F){D.ready().then(function(){ee(D._dbInfo,_,function(V,te){if(V)return F(V);try{var se=te.objectStore(D._dbInfo.storeName),ie=se.delete(S);te.oncomplete=function(){L()},te.onerror=function(){F(ie.error)},te.onabort=function(){var re=ie.error?ie.error:ie.transaction.error;F(re)}}catch(re){F(re)}})}).catch(F)});return p(U,A),U}function B(S){var A=this,D=new f(function(U,L){A.ready().then(function(){ee(A._dbInfo,_,function(F,V){if(F)return L(F);try{var te=V.objectStore(A._dbInfo.storeName),se=te.clear();V.oncomplete=function(){U()},V.onabort=V.onerror=function(){var ie=se.error?se.error:se.transaction.error;L(ie)}}catch(ie){L(ie)}})}).catch(L)});return p(D,S),D}function M(S){var A=this,D=new f(function(U,L){A.ready().then(function(){ee(A._dbInfo,v,function(F,V){if(F)return L(F);try{var te=V.objectStore(A._dbInfo.storeName),se=te.count();se.onsuccess=function(){U(se.result)},se.onerror=function(){L(se.error)}}catch(ie){L(ie)}})}).catch(L)});return p(D,S),D}function h(S,A){var D=this,U=new f(function(L,F){if(S<0){L(null);return}D.ready().then(function(){ee(D._dbInfo,v,function(V,te){if(V)return F(V);try{var se=te.objectStore(D._dbInfo.storeName),ie=!1,re=se.openKeyCursor();re.onsuccess=function(){var ve=re.result;if(!ve){L(null);return}S===0||ie?L(ve.key):(ie=!0,ve.advance(S))},re.onerror=function(){F(re.error)}}catch(ve){F(ve)}})}).catch(F)});return p(U,A),U}function R(S){var A=this,D=new f(function(U,L){A.ready().then(function(){ee(A._dbInfo,v,function(F,V){if(F)return L(F);try{var te=V.objectStore(A._dbInfo.storeName),se=te.openKeyCursor(),ie=[];se.onsuccess=function(){var re=se.result;if(!re){U(ie);return}ie.push(re.key),re.continue()},se.onerror=function(){L(se.error)}}catch(re){L(re)}})}).catch(L)});return p(D,S),D}function ce(S,A){A=E.apply(this,arguments);var D=this.config();S=typeof S!="function"&&S||{},S.name||(S.name=S.name||D.name,S.storeName=S.storeName||D.storeName);var U=this,L;if(!S.name)L=f.reject("Invalid arguments");else{var F=S.name===D.name&&U._dbInfo.db,V=F?f.resolve(U._dbInfo.db):G(S).then(function(te){var se=w[S.name],ie=se.forages;se.db=te;for(var re=0;re<ie.length;re++)ie[re]._dbInfo.db=te;return te});S.storeName?L=V.then(function(te){if(te.objectStoreNames.contains(S.storeName)){var se=te.version+1;P(S);var ie=w[S.name],re=ie.forages;te.close();for(var ve=0;ve<re.length;ve++){var Qe=re[ve];Qe._dbInfo.db=null,Qe._dbInfo.version=se}var gt=new f(function(lt,Ot){var ft=c.open(S.name,se);ft.onerror=function(Tr){var bo=ft.result;bo.close(),Ot(Tr)},ft.onupgradeneeded=function(){var Tr=ft.result;Tr.deleteObjectStore(S.storeName)},ft.onsuccess=function(){var Tr=ft.result;Tr.close(),lt(Tr)}});return gt.then(function(lt){ie.db=lt;for(var Ot=0;Ot<re.length;Ot++){var ft=re[Ot];ft._dbInfo.db=lt,N(ft._dbInfo)}}).catch(function(lt){throw(z(S,lt)||f.resolve()).catch(function(){}),lt})}}):L=V.then(function(te){P(S);var se=w[S.name],ie=se.forages;te.close();for(var re=0;re<ie.length;re++){var ve=ie[re];ve._dbInfo.db=null}var Qe=new f(function(gt,lt){var Ot=c.deleteDatabase(S.name);Ot.onerror=function(){var ft=Ot.result;ft&&ft.close(),lt(Ot.error)},Ot.onblocked=function(){console.warn('dropInstance blocked for database "'+S.name+'" until all open connections are closed')},Ot.onsuccess=function(){var ft=Ot.result;ft&&ft.close(),gt(ft)}});return Qe.then(function(gt){se.db=gt;for(var lt=0;lt<ie.length;lt++){var Ot=ie[lt];N(Ot._dbInfo)}}).catch(function(gt){throw(z(S,gt)||f.resolve()).catch(function(){}),gt})})}return p(L,A),L}var he={_driver:"asyncStorage",_initStorage:ne,_support:u(),iterate:fe,getItem:Ee,setItem:_e,removeItem:q,clear:B,length:M,key:h,keys:R,dropInstance:ce};function We(){return typeof openDatabase=="function"}var Ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Me="~~local_forage_type~",Xe=/^~~local_forage_type~([^~]+)~/,pt="__lfsc__:",dt=pt.length,Ve="arbf",Be="blob",Ne="si08",ke="ui08",$e="uic8",Te="si16",Ae="si32",Se="ur16",Ue="ui32",qe="fl32",De="fl64",He=dt+Ve.length,et=Object.prototype.toString;function nt(S){var A=S.length*.75,D=S.length,U,L=0,F,V,te,se;S[S.length-1]==="="&&(A--,S[S.length-2]==="="&&A--);var ie=new ArrayBuffer(A),re=new Uint8Array(ie);for(U=0;U<D;U+=4)F=Ie.indexOf(S[U]),V=Ie.indexOf(S[U+1]),te=Ie.indexOf(S[U+2]),se=Ie.indexOf(S[U+3]),re[L++]=F<<2|V>>4,re[L++]=(V&15)<<4|te>>2,re[L++]=(te&3)<<6|se&63;return ie}function tt(S){var A=new Uint8Array(S),D="",U;for(U=0;U<A.length;U+=3)D+=Ie[A[U]>>2],D+=Ie[(A[U]&3)<<4|A[U+1]>>4],D+=Ie[(A[U+1]&15)<<2|A[U+2]>>6],D+=Ie[A[U+2]&63];return A.length%3===2?D=D.substring(0,D.length-1)+"=":A.length%3===1&&(D=D.substring(0,D.length-2)+"=="),D}function it(S,A){var D="";if(S&&(D=et.call(S)),S&&(D==="[object ArrayBuffer]"||S.buffer&&et.call(S.buffer)==="[object ArrayBuffer]")){var U,L=pt;S instanceof ArrayBuffer?(U=S,L+=Ve):(U=S.buffer,D==="[object Int8Array]"?L+=Ne:D==="[object Uint8Array]"?L+=ke:D==="[object Uint8ClampedArray]"?L+=$e:D==="[object Int16Array]"?L+=Te:D==="[object Uint16Array]"?L+=Se:D==="[object Int32Array]"?L+=Ae:D==="[object Uint32Array]"?L+=Ue:D==="[object Float32Array]"?L+=qe:D==="[object Float64Array]"?L+=De:A(new Error("Failed to get type for BinaryArray"))),A(L+tt(U))}else if(D==="[object Blob]"){var F=new FileReader;F.onload=function(){var V=Me+S.type+"~"+tt(this.result);A(pt+Be+V)},F.readAsArrayBuffer(S)}else try{A(JSON.stringify(S))}catch(V){console.error("Couldn't convert value into a JSON string: ",S),A(null,V)}}function Sr(S){if(S.substring(0,dt)!==pt)return JSON.parse(S);var A=S.substring(He),D=S.substring(dt,He),U;if(D===Be&&Xe.test(A)){var L=A.match(Xe);U=L[1],A=A.substring(L[0].length)}var F=nt(A);switch(D){case Ve:return F;case Be:return d([F],{type:U});case Ne:return new Int8Array(F);case ke:return new Uint8Array(F);case $e:return new Uint8ClampedArray(F);case Te:return new Int16Array(F);case Se:return new Uint16Array(F);case Ae:return new Int32Array(F);case Ue:return new Uint32Array(F);case qe:return new Float32Array(F);case De:return new Float64Array(F);default:throw new Error("Unkown type: "+D)}}var fr={serialize:it,deserialize:Sr,stringToBuffer:nt,bufferToString:tt};function Mr(S,A,D,U){S.executeSql("CREATE TABLE IF NOT EXISTS "+A.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],D,U)}function Gt(S){var A=this,D={db:null};if(S)for(var U in S)D[U]=typeof S[U]!="string"?S[U].toString():S[U];var L=new f(function(F,V){try{D.db=openDatabase(D.name,String(D.version),D.description,D.size)}catch(te){return V(te)}D.db.transaction(function(te){Mr(te,D,function(){A._dbInfo=D,F()},function(se,ie){V(ie)})},V)});return D.serializer=fr,L}function Qt(S,A,D,U,L,F){S.executeSql(D,U,L,function(V,te){te.code===te.SYNTAX_ERR?V.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[A.storeName],function(se,ie){ie.rows.length?F(se,te):Mr(se,A,function(){se.executeSql(D,U,L,F)},F)},F):F(V,te)},F)}function Ar(S,A){var D=this;S=b(S);var U=new f(function(L,F){D.ready().then(function(){var V=D._dbInfo;V.db.transaction(function(te){Qt(te,V,"SELECT * FROM "+V.storeName+" WHERE key = ? LIMIT 1",[S],function(se,ie){var re=ie.rows.length?ie.rows.item(0).value:null;re&&(re=V.serializer.deserialize(re)),L(re)},function(se,ie){F(ie)})})}).catch(F)});return p(U,A),U}function hn(S,A){var D=this,U=new f(function(L,F){D.ready().then(function(){var V=D._dbInfo;V.db.transaction(function(te){Qt(te,V,"SELECT * FROM "+V.storeName,[],function(se,ie){for(var re=ie.rows,ve=re.length,Qe=0;Qe<ve;Qe++){var gt=re.item(Qe),lt=gt.value;if(lt&&(lt=V.serializer.deserialize(lt)),lt=S(lt,gt.key,Qe+1),lt!==void 0){L(lt);return}}L()},function(se,ie){F(ie)})})}).catch(F)});return p(U,A),U}function wt(S,A,D,U){var L=this;S=b(S);var F=new f(function(V,te){L.ready().then(function(){A===void 0&&(A=null);var se=A,ie=L._dbInfo;ie.serializer.serialize(A,function(re,ve){ve?te(ve):ie.db.transaction(function(Qe){Qt(Qe,ie,"INSERT OR REPLACE INTO "+ie.storeName+" (key, value) VALUES (?, ?)",[S,re],function(){V(se)},function(gt,lt){te(lt)})},function(Qe){if(Qe.code===Qe.QUOTA_ERR){if(U>0){V(wt.apply(L,[S,se,D,U-1]));return}te(Qe)}})})}).catch(te)});return p(F,D),F}function bt(S,A,D){return wt.apply(this,[S,A,D,1])}function At(S,A){var D=this;S=b(S);var U=new f(function(L,F){D.ready().then(function(){var V=D._dbInfo;V.db.transaction(function(te){Qt(te,V,"DELETE FROM "+V.storeName+" WHERE key = ?",[S],function(){L()},function(se,ie){F(ie)})})}).catch(F)});return p(U,A),U}function xt(S){var A=this,D=new f(function(U,L){A.ready().then(function(){var F=A._dbInfo;F.db.transaction(function(V){Qt(V,F,"DELETE FROM "+F.storeName,[],function(){U()},function(te,se){L(se)})})}).catch(L)});return p(D,S),D}function Tt(S){var A=this,D=new f(function(U,L){A.ready().then(function(){var F=A._dbInfo;F.db.transaction(function(V){Qt(V,F,"SELECT COUNT(key) as c FROM "+F.storeName,[],function(te,se){var ie=se.rows.item(0).c;U(ie)},function(te,se){L(se)})})}).catch(L)});return p(D,S),D}function _t(S,A){var D=this,U=new f(function(L,F){D.ready().then(function(){var V=D._dbInfo;V.db.transaction(function(te){Qt(te,V,"SELECT key FROM "+V.storeName+" WHERE id = ? LIMIT 1",[S+1],function(se,ie){var re=ie.rows.length?ie.rows.item(0).key:null;L(re)},function(se,ie){F(ie)})})}).catch(F)});return p(U,A),U}function Mt(S){var A=this,D=new f(function(U,L){A.ready().then(function(){var F=A._dbInfo;F.db.transaction(function(V){Qt(V,F,"SELECT key FROM "+F.storeName,[],function(te,se){for(var ie=[],re=0;re<se.rows.length;re++)ie.push(se.rows.item(re).key);U(ie)},function(te,se){L(se)})})}).catch(L)});return p(D,S),D}function jt(S){return new f(function(A,D){S.transaction(function(U){U.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(L,F){for(var V=[],te=0;te<F.rows.length;te++)V.push(F.rows.item(te).name);A({db:S,storeNames:V})},function(L,F){D(F)})},function(U){D(U)})})}function Bt(S,A){A=E.apply(this,arguments);var D=this.config();S=typeof S!="function"&&S||{},S.name||(S.name=S.name||D.name,S.storeName=S.storeName||D.storeName);var U=this,L;return S.name?L=new f(function(F){var V;S.name===D.name?V=U._dbInfo.db:V=openDatabase(S.name,"","",0),S.storeName?F({db:V,storeNames:[S.storeName]}):F(jt(V))}).then(function(F){return new f(function(V,te){F.db.transaction(function(se){function ie(gt){return new f(function(lt,Ot){se.executeSql("DROP TABLE IF EXISTS "+gt,[],function(){lt()},function(ft,Tr){Ot(Tr)})})}for(var re=[],ve=0,Qe=F.storeNames.length;ve<Qe;ve++)re.push(ie(F.storeNames[ve]));f.all(re).then(function(){V()}).catch(function(gt){te(gt)})},function(se){te(se)})})}):L=f.reject("Invalid arguments"),p(L,A),L}var kt={_driver:"webSQLStorage",_initStorage:Gt,_support:We(),iterate:hn,getItem:Ar,setItem:bt,removeItem:At,clear:xt,length:Tt,key:_t,keys:Mt,dropInstance:Bt};function qt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Rt(S,A){var D=S.name+"/";return S.storeName!==A.storeName&&(D+=S.storeName+"/"),D}function Pt(){var S="_localforage_support_test";try{return localStorage.setItem(S,!0),localStorage.removeItem(S),!1}catch{return!0}}function yt(){return!Pt()||localStorage.length>0}function T(S){var A=this,D={};if(S)for(var U in S)D[U]=S[U];return D.keyPrefix=Rt(S,A._defaultConfig),yt()?(A._dbInfo=D,D.serializer=fr,f.resolve()):f.reject()}function H(S){var A=this,D=A.ready().then(function(){for(var U=A._dbInfo.keyPrefix,L=localStorage.length-1;L>=0;L--){var F=localStorage.key(L);F.indexOf(U)===0&&localStorage.removeItem(F)}});return p(D,S),D}function ue(S,A){var D=this;S=b(S);var U=D.ready().then(function(){var L=D._dbInfo,F=localStorage.getItem(L.keyPrefix+S);return F&&(F=L.serializer.deserialize(F)),F});return p(U,A),U}function Ce(S,A){var D=this,U=D.ready().then(function(){for(var L=D._dbInfo,F=L.keyPrefix,V=F.length,te=localStorage.length,se=1,ie=0;ie<te;ie++){var re=localStorage.key(ie);if(re.indexOf(F)===0){var ve=localStorage.getItem(re);if(ve&&(ve=L.serializer.deserialize(ve)),ve=S(ve,re.substring(V),se++),ve!==void 0)return ve}}});return p(U,A),U}function st(S,A){var D=this,U=D.ready().then(function(){var L=D._dbInfo,F;try{F=localStorage.key(S)}catch{F=null}return F&&(F=F.substring(L.keyPrefix.length)),F});return p(U,A),U}function Ge(S){var A=this,D=A.ready().then(function(){for(var U=A._dbInfo,L=localStorage.length,F=[],V=0;V<L;V++){var te=localStorage.key(V);te.indexOf(U.keyPrefix)===0&&F.push(te.substring(U.keyPrefix.length))}return F});return p(D,S),D}function Je(S){var A=this,D=A.keys().then(function(U){return U.length});return p(D,S),D}function Ke(S,A){var D=this;S=b(S);var U=D.ready().then(function(){var L=D._dbInfo;localStorage.removeItem(L.keyPrefix+S)});return p(U,A),U}function Yt(S,A,D){var U=this;S=b(S);var L=U.ready().then(function(){A===void 0&&(A=null);var F=A;return new f(function(V,te){var se=U._dbInfo;se.serializer.serialize(A,function(ie,re){if(re)te(re);else try{localStorage.setItem(se.keyPrefix+S,ie),V(F)}catch(ve){(ve.name==="QuotaExceededError"||ve.name==="NS_ERROR_DOM_QUOTA_REACHED")&&te(ve),te(ve)}})})});return p(L,D),L}function Ct(S,A){if(A=E.apply(this,arguments),S=typeof S!="function"&&S||{},!S.name){var D=this.config();S.name=S.name||D.name,S.storeName=S.storeName||D.storeName}var U=this,L;return S.name?L=new f(function(F){S.storeName?F(Rt(S,U._defaultConfig)):F(S.name+"/")}).then(function(F){for(var V=localStorage.length-1;V>=0;V--){var te=localStorage.key(V);te.indexOf(F)===0&&localStorage.removeItem(te)}}):L=f.reject("Invalid arguments"),p(L,A),L}var Nt={_driver:"localStorageWrapper",_initStorage:T,_support:qt(),iterate:Ce,getItem:ue,setItem:Yt,removeItem:Ke,clear:H,length:Je,key:st,keys:Ge,dropInstance:Ct},zt=function(S,A){return S===A||typeof S=="number"&&typeof A=="number"&&isNaN(S)&&isNaN(A)},fn=function(S,A){for(var D=S.length,U=0;U<D;){if(zt(S[U],A))return!0;U++}return!1},Ei=Array.isArray||function(S){return Object.prototype.toString.call(S)==="[object Array]"},sr={},ja={},Kn={INDEXEDDB:he,WEBSQL:kt,LOCALSTORAGE:Nt},is=[Kn.INDEXEDDB._driver,Kn.WEBSQL._driver,Kn.LOCALSTORAGE._driver],ss=["dropInstance"],vo=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ss),pn={description:"",driver:is.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ou(S,A){S[A]=function(){var D=arguments;return S.ready().then(function(){return S[A].apply(S,D)})}}function wo(){for(var S=1;S<arguments.length;S++){var A=arguments[S];if(A)for(var D in A)A.hasOwnProperty(D)&&(Ei(A[D])?arguments[0][D]=A[D].slice():arguments[0][D]=A[D])}return arguments[0]}var Du=function(){function S(A){o(this,S);for(var D in Kn)if(Kn.hasOwnProperty(D)){var U=Kn[D],L=U._driver;this[D]=L,sr[L]||this.defineDriver(U)}this._defaultConfig=wo({},pn),this._config=wo({},this._defaultConfig,A),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return S.prototype.config=function(A){if((typeof A>"u"?"undefined":s(A))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var D in A){if(D==="storeName"&&(A[D]=A[D].replace(/\W/g,"_")),D==="version"&&typeof A[D]!="number")return new Error("Database version must be a number.");this._config[D]=A[D]}return"driver"in A&&A.driver?this.setDriver(this._config.driver):!0}else return typeof A=="string"?this._config[A]:this._config},S.prototype.defineDriver=function(A,D,U){var L=new f(function(F,V){try{var te=A._driver,se=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!A._driver){V(se);return}for(var ie=vo.concat("_initStorage"),re=0,ve=ie.length;re<ve;re++){var Qe=ie[re],gt=!fn(ss,Qe);if((gt||A[Qe])&&typeof A[Qe]!="function"){V(se);return}}var lt=function(){for(var ft=function(Au){return function(){var Tu=new Error("Method "+Au+" is not implemented by the current driver"),Ba=f.reject(Tu);return p(Ba,arguments[arguments.length-1]),Ba}},Tr=0,bo=ss.length;Tr<bo;Tr++){var zr=ss[Tr];A[zr]||(A[zr]=ft(zr))}};lt();var Ot=function(ft){sr[te]&&console.info("Redefining LocalForage driver: "+te),sr[te]=A,ja[te]=ft,F()};"_support"in A?A._support&&typeof A._support=="function"?A._support().then(Ot,V):Ot(!!A._support):Ot(!0)}catch(ft){V(ft)}});return y(L,D,U),L},S.prototype.driver=function(){return this._driver||null},S.prototype.getDriver=function(A,D,U){var L=sr[A]?f.resolve(sr[A]):f.reject(new Error("Driver not found."));return y(L,D,U),L},S.prototype.getSerializer=function(A){var D=f.resolve(fr);return y(D,A),D},S.prototype.ready=function(A){var D=this,U=D._driverSet.then(function(){return D._ready===null&&(D._ready=D._initDriver()),D._ready});return y(U,A,A),U},S.prototype.setDriver=function(A,D,U){var L=this;Ei(A)||(A=[A]);var F=this._getSupportedDrivers(A);function V(){L._config.driver=L.driver()}function te(re){return L._extend(re),V(),L._ready=L._initStorage(L._config),L._ready}function se(re){return function(){var ve=0;function Qe(){for(;ve<re.length;){var gt=re[ve];return ve++,L._dbInfo=null,L._ready=null,L.getDriver(gt).then(te).catch(Qe)}V();var lt=new Error("No available storage method found.");return L._driverSet=f.reject(lt),L._driverSet}return Qe()}}var ie=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=ie.then(function(){var re=F[0];return L._dbInfo=null,L._ready=null,L.getDriver(re).then(function(ve){L._driver=ve._driver,V(),L._wrapLibraryMethodsWithReady(),L._initDriver=se(F)})}).catch(function(){V();var re=new Error("No available storage method found.");return L._driverSet=f.reject(re),L._driverSet}),y(this._driverSet,D,U),this._driverSet},S.prototype.supports=function(A){return!!ja[A]},S.prototype._extend=function(A){wo(this,A)},S.prototype._getSupportedDrivers=function(A){for(var D=[],U=0,L=A.length;U<L;U++){var F=A[U];this.supports(F)&&D.push(F)}return D},S.prototype._wrapLibraryMethodsWithReady=function(){for(var A=0,D=vo.length;A<D;A++)Ou(this,vo[A])},S.prototype.createInstance=function(A){return new S(A)},S}(),Iu=new Du;n.exports=Iu},{3:3}]},{},[4])(4)})})(Ju);var Dg=Ju.exports,cs=Og(Dg);class Ig{constructor(){this.getKeys=async()=>await cs.keys(),this.getEntries=async()=>{let e=[];return(await this.getKeys()).forEach(async r=>e.push(await cs.getItem(r))),e},this.getItem=async e=>await cs.getItem(e)??void 0,this.setItem=async(e,r)=>{await cs.setItem(e,r)},this.removeItem=async e=>{await cs.removeItem(e)}}}let Ag=class{constructor(){const e=new Ig;this.storage=e}async getKeys(){return this.storage.getKeys()}async getEntries(){return this.storage.getEntries()}async getItem(e){return this.storage.getItem(e)}async setItem(e,r){return this.storage.setItem(e,r)}async removeItem(e){return this.storage.removeItem(e)}};var Di={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Ja=function(t,e){return Ja=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Ja(t,e)};function Tg(t,e){Ja(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Xa=function(){return Xa=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Xa.apply(this,arguments)};function Rg(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Pg(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function Ng(t,e){return function(r,n){e(r,n,t)}}function $g(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Lg(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):i(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function Mg(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function kg(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Ug(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function ec(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xu(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function Fg(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Xu(arguments[e]));return t}function jg(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function ls(t){return this instanceof ls?(this.v=t,this):new ls(t)}function Bg(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(p){n[p]&&(i[p]=function(y){return new Promise(function(b,E){s.push([p,y,b,E])>1||a(p,y)})})}function a(p,y){try{c(n[p](y))}catch(b){f(s[0][3],b)}}function c(p){p.value instanceof ls?Promise.resolve(p.value.v).then(u,d):f(s[0][2],p)}function u(p){a("next",p)}function d(p){a("throw",p)}function f(p,y){p(y),s.shift(),s.length&&a(s[0][0],s[0][1])}}function qg(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:ls(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function zg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof ec=="function"?ec(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}function Wg(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Vg(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Hg(t){return t&&t.__esModule?t:{default:t}}function Kg(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Zg(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const nn=Qa(Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Xa},__asyncDelegator:qg,__asyncGenerator:Bg,__asyncValues:zg,__await:ls,__awaiter:Lg,__classPrivateFieldGet:Kg,__classPrivateFieldSet:Zg,__createBinding:kg,__decorate:Pg,__exportStar:Ug,__extends:Tg,__generator:Mg,__importDefault:Hg,__importStar:Vg,__makeTemplateObject:Wg,__metadata:$g,__param:Ng,__read:Xu,__rest:Rg,__spread:Fg,__spreadArrays:jg,__values:ec},Symbol.toStringTag,{value:"Module"})));var us={},ye={},tc={},ds={},ed;function Gg(){if(ed)return ds;ed=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return ds.delay=t,ds}var Xn={},rc={},ei={},td;function Qg(){return td||(td=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.ONE_THOUSAND=ei.ONE_HUNDRED=void 0,ei.ONE_HUNDRED=100,ei.ONE_THOUSAND=1e3),ei}var nc={},rd;function Yg(){return rd||(rd=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(nc)),nc}var nd;function id(){return nd||(nd=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nn;e.__exportStar(Qg(),t),e.__exportStar(Yg(),t)}(rc)),rc}var sd;function Jg(){if(sd)return Xn;sd=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.fromMiliseconds=Xn.toMiliseconds=void 0;const t=id();function e(n){return n*t.ONE_THOUSAND}Xn.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return Xn.fromMiliseconds=r,Xn}var od;function Xg(){return od||(od=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nn;e.__exportStar(Gg(),t),e.__exportStar(Jg(),t)}(tc)),tc}var Ii={},ad;function em(){if(ad)return Ii;ad=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Ii.Watch=t,Ii.default=t,Ii}var ic={},hs={},cd;function tm(){if(cd)return hs;cd=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.IWatch=void 0;class t{}return hs.IWatch=t,hs}var ld;function rm(){return ld||(ld=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),nn.__exportStar(tm(),t)}(ic)),ic}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nn;e.__exportStar(Xg(),t),e.__exportStar(em(),t),e.__exportStar(rm(),t),e.__exportStar(id(),t)})(ye);var sc={},fs={};let Pr=class{};const nm=Qa(Object.freeze(Object.defineProperty({__proto__:null,IEvents:Pr},Symbol.toStringTag,{value:"Module"})));var ud;function im(){if(ud)return fs;ud=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.IHeartBeat=void 0;const t=nm;class e extends t.IEvents{constructor(n){super()}}return fs.IHeartBeat=e,fs}var dd;function hd(){return dd||(dd=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),nn.__exportStar(im(),t)}(sc)),sc}var oc={},ti={},fd;function sm(){if(fd)return ti;fd=1,Object.defineProperty(ti,"__esModule",{value:!0}),ti.HEARTBEAT_EVENTS=ti.HEARTBEAT_INTERVAL=void 0;const t=ye;return ti.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,ti.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},ti}var pd;function gd(){return pd||(pd=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),nn.__exportStar(sm(),t)}(oc)),oc}var md;function om(){if(md)return us;md=1,Object.defineProperty(us,"__esModule",{value:!0}),us.HeartBeat=void 0;const t=nn,e=Ur,r=ye,n=hd(),i=gd();class s extends n.IHeartBeat{constructor(a){super(a),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=(a==null?void 0:a.interval)||i.HEARTBEAT_INTERVAL}static init(a){return t.__awaiter(this,void 0,void 0,function*(){const c=new s(a);return yield c.init(),c})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(a,c){this.events.on(a,c)}once(a,c){this.events.once(a,c)}off(a,c){this.events.off(a,c)}removeListener(a,c){this.events.removeListener(a,c)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return us.HeartBeat=s,us}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nn;e.__exportStar(om(),t),e.__exportStar(hd(),t),e.__exportStar(gd(),t)})(Di);var at={},ac,yd;function am(){if(yd)return ac;yd=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}ac=e;function e(r,n,i){var s=i&&i.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var c=new Array(a);c[0]=s(r);for(var u=1;u<a;u++)c[u]=s(n[u]);return c.join(" ")}if(typeof r!="string")return r;var d=n.length;if(d===0)return r;for(var f="",p=1-o,y=-1,b=r&&r.length||0,E=0;E<b;){if(r.charCodeAt(E)===37&&E+1<b){switch(y=y>-1?y:0,r.charCodeAt(E+1)){case 100:case 102:if(p>=d||n[p]==null)break;y<E&&(f+=r.slice(y,E)),f+=Number(n[p]),y=E+2,E++;break;case 105:if(p>=d||n[p]==null)break;y<E&&(f+=r.slice(y,E)),f+=Math.floor(Number(n[p])),y=E+2,E++;break;case 79:case 111:case 106:if(p>=d||n[p]===void 0)break;y<E&&(f+=r.slice(y,E));var x=typeof n[p];if(x==="string"){f+="'"+n[p]+"'",y=E+2,E++;break}if(x==="function"){f+=n[p].name||"<anonymous>",y=E+2,E++;break}f+=s(n[p]),y=E+2,E++;break;case 115:if(p>=d)break;y<E&&(f+=r.slice(y,E)),f+=String(n[p]),y=E+2,E++;break;case 37:y<E&&(f+=r.slice(y,E)),f+="%",y=E+2,E++,p--;break}++p}++E}return y===-1?r:(y<b&&(f+=r.slice(y)),f)}return ac}var cc,vd;function cm(){if(vd)return cc;vd=1;const t=am();cc=i;const e=_().console||{},r={mapHttpRequest:b,mapHttpResponse:b,wrapRequestSerializer:E,wrapResponseSerializer:E,wrapErrorSerializer:E,req:b,res:b,err:p};function n(g,l){return Array.isArray(g)?g.filter(function(P){return P!=="!stdSerializers.err"}):g===!0?Object.keys(l):!1}function i(g){g=g||{},g.browser=g.browser||{};const l=g.browser.transmit;if(l&&typeof l.send!="function")throw Error("pino: transmit option must have a send function");const m=g.browser.write||e;g.browser.write&&(g.browser.asObject=!0);const P=g.serializers||{},N=n(g.browser.serialize,P);let z=g.browser.serialize;Array.isArray(g.browser.serialize)&&g.browser.serialize.indexOf("!stdSerializers.err")>-1&&(z=!1);const W=["error","fatal","warn","info","debug","trace"];typeof m=="function"&&(m.error=m.fatal=m.warn=m.info=m.debug=m.trace=m),g.enabled===!1&&(g.level="silent");const G=g.level||"info",$=Object.create(m);$.log||($.log=x),Object.defineProperty($,"levelVal",{get:oe}),Object.defineProperty($,"level",{get:Y,set:Z});const j={transmit:l,serialize:N,asObject:g.browser.asObject,levels:W,timestamp:y(g)};$.levels=i.levels,$.level=G,$.setMaxListeners=$.getMaxListeners=$.emit=$.addListener=$.on=$.prependListener=$.once=$.prependOnceListener=$.removeListener=$.removeAllListeners=$.listeners=$.listenerCount=$.eventNames=$.write=$.flush=x,$.serializers=P,$._serialize=N,$._stdErrSerialize=z,$.child=X,l&&($._logEvent=f());function oe(){return this.level==="silent"?1/0:this.levels.values[this.level]}function Y(){return this._level}function Z(K){if(K!=="silent"&&!this.levels.values[K])throw Error("unknown level "+K);this._level=K,s(j,$,"error","log"),s(j,$,"fatal","error"),s(j,$,"warn","error"),s(j,$,"info","log"),s(j,$,"debug","log"),s(j,$,"trace","log")}function X(K,ee){if(!K)throw new Error("missing bindings for child Pino");ee=ee||{},N&&K.serializers&&(ee.serializers=K.serializers);const xe=ee.serializers;if(N&&xe){var ne=Object.assign({},P,xe),Ee=g.browser.serialize===!0?Object.keys(ne):N;delete K.serializers,c([K],Ee,ne,this._stdErrSerialize)}function fe(_e){this._childLevel=(_e._childLevel|0)+1,this.error=u(_e,K,"error"),this.fatal=u(_e,K,"fatal"),this.warn=u(_e,K,"warn"),this.info=u(_e,K,"info"),this.debug=u(_e,K,"debug"),this.trace=u(_e,K,"trace"),ne&&(this.serializers=ne,this._serialize=Ee),l&&(this._logEvent=f([].concat(_e._logEvent.bindings,K)))}return fe.prototype=this,new fe(this)}return $}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=r,i.stdTimeFunctions=Object.assign({},{nullTime:I,epochTime:w,unixTime:C,isoTime:v});function s(g,l,m,P){const N=Object.getPrototypeOf(l);l[m]=l.levelVal>l.levels.values[m]?x:N[m]?N[m]:e[m]||e[P]||x,o(g,l,m)}function o(g,l,m){!g.transmit&&l[m]===x||(l[m]=function(P){return function(){const z=g.timestamp(),W=new Array(arguments.length),G=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var $=0;$<W.length;$++)W[$]=arguments[$];if(g.serialize&&!g.asObject&&c(W,this._serialize,this.serializers,this._stdErrSerialize),g.asObject?P.call(G,a(this,m,W,z)):P.apply(G,W),g.transmit){const j=g.transmit.level||l.level,oe=i.levels.values[j],Y=i.levels.values[m];if(Y<oe)return;d(this,{ts:z,methodLevel:m,methodValue:Y,transmitLevel:j,transmitValue:i.levels.values[g.transmit.level||l.level],send:g.transmit.send,val:l.levelVal},W)}}}(l[m]))}function a(g,l,m,P){g._serialize&&c(m,g._serialize,g.serializers,g._stdErrSerialize);const N=m.slice();let z=N[0];const W={};P&&(W.time=P),W.level=i.levels.values[l];let G=(g._childLevel|0)+1;if(G<1&&(G=1),z!==null&&typeof z=="object"){for(;G--&&typeof N[0]=="object";)Object.assign(W,N.shift());z=N.length?t(N.shift(),N):void 0}else typeof z=="string"&&(z=t(N.shift(),N));return z!==void 0&&(W.msg=z),W}function c(g,l,m,P){for(const N in g)if(P&&g[N]instanceof Error)g[N]=i.stdSerializers.err(g[N]);else if(typeof g[N]=="object"&&!Array.isArray(g[N]))for(const z in g[N])l&&l.indexOf(z)>-1&&z in m&&(g[N][z]=m[z](g[N][z]))}function u(g,l,m){return function(){const P=new Array(1+arguments.length);P[0]=l;for(var N=1;N<P.length;N++)P[N]=arguments[N-1];return g[m].apply(this,P)}}function d(g,l,m){const P=l.send,N=l.ts,z=l.methodLevel,W=l.methodValue,G=l.val,$=g._logEvent.bindings;c(m,g._serialize||Object.keys(g.serializers),g.serializers,g._stdErrSerialize===void 0?!0:g._stdErrSerialize),g._logEvent.ts=N,g._logEvent.messages=m.filter(function(j){return $.indexOf(j)===-1}),g._logEvent.level.label=z,g._logEvent.level.value=W,P(z,g._logEvent,G),g._logEvent=f($)}function f(g){return{ts:0,messages:[],bindings:g||[],level:{label:"",value:0}}}function p(g){const l={type:g.constructor.name,msg:g.message,stack:g.stack};for(const m in g)l[m]===void 0&&(l[m]=g[m]);return l}function y(g){return typeof g.timestamp=="function"?g.timestamp:g.timestamp===!1?I:w}function b(){return{}}function E(g){return g}function x(){}function I(){return!1}function w(){return Date.now()}function C(){return Math.round(Date.now()/1e3)}function v(){return new Date(Date.now()).toISOString()}function _(){function g(l){return typeof l<"u"&&l}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return g(self)||g(window)||g(this)||{}}}return cc}var ri={},wd;function bd(){return wd||(wd=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.PINO_CUSTOM_CONTEXT_KEY=ri.PINO_LOGGER_DEFAULTS=void 0,ri.PINO_LOGGER_DEFAULTS={level:"info"},ri.PINO_CUSTOM_CONTEXT_KEY="custom_context"),ri}var mr={},_d;function lm(){if(_d)return mr;_d=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.generateChildLogger=mr.formatChildLoggerContext=mr.getLoggerContext=mr.setBrowserLoggerContext=mr.getBrowserLoggerContext=mr.getDefaultLoggerOptions=void 0;const t=bd();function e(a){return Object.assign(Object.assign({},a),{level:(a==null?void 0:a.level)||t.PINO_LOGGER_DEFAULTS.level})}mr.getDefaultLoggerOptions=e;function r(a,c=t.PINO_CUSTOM_CONTEXT_KEY){return a[c]||""}mr.getBrowserLoggerContext=r;function n(a,c,u=t.PINO_CUSTOM_CONTEXT_KEY){return a[u]=c,a}mr.setBrowserLoggerContext=n;function i(a,c=t.PINO_CUSTOM_CONTEXT_KEY){let u="";return typeof a.bindings>"u"?u=r(a,c):u=a.bindings().context||"",u}mr.getLoggerContext=i;function s(a,c,u=t.PINO_CUSTOM_CONTEXT_KEY){const d=i(a,u);return d.trim()?`${d}/${c}`:c}mr.formatChildLoggerContext=s;function o(a,c,u=t.PINO_CUSTOM_CONTEXT_KEY){const d=s(a,c,u),f=a.child({context:d});return n(f,d,u)}return mr.generateChildLogger=o,mr}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=nn,r=e.__importDefault(cm());Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(bd(),t),e.__exportStar(lm(),t)})(at);let um=class extends Pr{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},dm=class extends Pr{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},hm=class{constructor(e,r){this.logger=e,this.core=r}},fm=class extends Pr{constructor(e,r){super(),this.relayer=e,this.logger=r}},pm=class extends Pr{constructor(e){super()}},gm=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},mm=class extends Pr{constructor(e,r){super(),this.relayer=e,this.logger=r}},ym=class extends Pr{constructor(e,r){super(),this.core=e,this.logger=r}},vm=class{constructor(e,r){this.projectId=e,this.logger=r}},wm=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},bm=class{constructor(e){this.client=e}};const _m=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),Em=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Ed(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Em(t)}catch{return t}}function lc(t){return typeof t=="string"?t:_m(t)||""}var uc={},Ai={},To={},Ro={};Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.BrowserRandomSource=void 0;const Sd=65536;class Sm{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=Sd)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,Sd)));return r}}Ro.BrowserRandomSource=Sm;function xm(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Po={},Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});function Cm(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Nr.wipe=Cm;const Om=Qa(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(Po,"__esModule",{value:!0}),Po.NodeRandomSource=void 0;const Dm=Nr;class Im{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof xm<"u"){const e=Om;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,Dm.wipe)(r),n}}Po.NodeRandomSource=Im,Object.defineProperty(To,"__esModule",{value:!0}),To.SystemRandomSource=void 0;const Am=Ro,Tm=Po;class Rm{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Am.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Tm.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}To.SystemRandomSource=Rm;var Le={},xd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,c){var u=a>>>16&65535,d=a&65535,f=c>>>16&65535,p=c&65535;return d*p+(u*p+d*f<<16>>>0)|0}t.mul=Math.imul||e;function r(a,c){return a+c|0}t.add=r;function n(a,c){return a-c|0}t.sub=n;function i(a,c){return a<<c|a>>>32-c}t.rotl=i;function s(a,c){return a<<32-c|a>>>c}t.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||o,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(xd),Object.defineProperty(Le,"__esModule",{value:!0});var Cd=xd;function Pm(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}Le.readInt16BE=Pm;function Nm(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}Le.readUint16BE=Nm;function $m(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}Le.readInt16LE=$m;function Lm(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}Le.readUint16LE=Lm;function Od(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}Le.writeUint16BE=Od,Le.writeInt16BE=Od;function Dd(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}Le.writeUint16LE=Dd,Le.writeInt16LE=Dd;function dc(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}Le.readInt32BE=dc;function hc(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}Le.readUint32BE=hc;function fc(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}Le.readInt32LE=fc;function pc(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}Le.readUint32LE=pc;function No(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}Le.writeUint32BE=No,Le.writeInt32BE=No;function $o(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}Le.writeUint32LE=$o,Le.writeInt32LE=$o;function Mm(t,e){e===void 0&&(e=0);var r=dc(t,e),n=dc(t,e+4);return r*4294967296+n-(n>>31)*4294967296}Le.readInt64BE=Mm;function km(t,e){e===void 0&&(e=0);var r=hc(t,e),n=hc(t,e+4);return r*4294967296+n}Le.readUint64BE=km;function Um(t,e){e===void 0&&(e=0);var r=fc(t,e),n=fc(t,e+4);return n*4294967296+r-(r>>31)*4294967296}Le.readInt64LE=Um;function Fm(t,e){e===void 0&&(e=0);var r=pc(t,e),n=pc(t,e+4);return n*4294967296+r}Le.readUint64LE=Fm;function Id(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),No(t/4294967296>>>0,e,r),No(t>>>0,e,r+4),e}Le.writeUint64BE=Id,Le.writeInt64BE=Id;function Ad(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),$o(t>>>0,e,r),$o(t/4294967296>>>0,e,r+4),e}Le.writeUint64LE=Ad,Le.writeInt64LE=Ad;function jm(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}Le.readUintBE=jm;function Bm(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}Le.readUintLE=Bm;function qm(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Cd.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}Le.writeUintBE=qm;function zm(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Cd.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}Le.writeUintLE=zm;function Wm(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}Le.readFloat32BE=Wm;function Vm(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}Le.readFloat32LE=Vm;function Hm(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}Le.readFloat64BE=Hm;function Km(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}Le.readFloat64LE=Km;function Zm(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}Le.writeFloat32BE=Zm;function Gm(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}Le.writeFloat32LE=Gm;function Qm(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}Le.writeFloat64BE=Qm;function Ym(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}Le.writeFloat64LE=Ym,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=To,r=Le,n=Nr;t.defaultRandomSource=new e.SystemRandomSource;function i(u,d=t.defaultRandomSource){return d.randomBytes(u)}t.randomBytes=i;function s(u=t.defaultRandomSource){const d=i(4,u),f=(0,r.readUint32LE)(d);return(0,n.wipe)(d),f}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(u,d=o,f=t.defaultRandomSource){if(d.length<2)throw new Error("randomString charset is too short");if(d.length>256)throw new Error("randomString charset is too long");let p="";const y=d.length,b=256-256%y;for(;u>0;){const E=i(Math.ceil(u*256/b),f);for(let x=0;x<E.length&&u>0;x++){const I=E[x];I<b&&(p+=d.charAt(I%y),u--)}(0,n.wipe)(E)}return p}t.randomString=a;function c(u,d=o,f=t.defaultRandomSource){const p=Math.ceil(u/(Math.log(d.length)/Math.LN2));return a(p,d,f)}t.randomStringForEntropy=c}(Ai);var Td={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Le,r=Nr;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(c,u){if(u===void 0&&(u=c.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var d=0;if(this._bytesHashed+=u,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&u>0;)this._buffer[this._bufferLength++]=c[d++],u--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(u>=this.blockSize&&(d=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,c,d,u),u%=this.blockSize);u>0;)this._buffer[this._bufferLength++]=c[d++],u--;return this},a.prototype.finish=function(c){if(!this._finished){var u=this._bytesHashed,d=this._bufferLength,f=u/536870912|0,p=u<<3,y=u%128<112?128:256;this._buffer[d]=128;for(var b=d+1;b<y-8;b++)this._buffer[b]=0;e.writeUint32BE(f,this._buffer,y-8),e.writeUint32BE(p,this._buffer,y-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,y),this._finished=!0}for(var b=0;b<this.digestLength/8;b++)e.writeUint32BE(this._stateHi[b],c,b*8),e.writeUint32BE(this._stateLo[b],c,b*8+4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._stateHi.set(c.stateHi),this._stateLo.set(c.stateLo),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.stateHi),r.wipe(c.stateLo),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,c,u,d,f,p,y){for(var b=u[0],E=u[1],x=u[2],I=u[3],w=u[4],C=u[5],v=u[6],_=u[7],g=d[0],l=d[1],m=d[2],P=d[3],N=d[4],z=d[5],W=d[6],G=d[7],$,j,oe,Y,Z,X,K,ee;y>=128;){for(var xe=0;xe<16;xe++){var ne=8*xe+p;a[xe]=e.readUint32BE(f,ne),c[xe]=e.readUint32BE(f,ne+4)}for(var xe=0;xe<80;xe++){var Ee=b,fe=E,_e=x,q=I,B=w,M=C,h=v,R=_,ce=g,he=l,We=m,Ie=P,Me=N,Xe=z,pt=W,dt=G;if($=_,j=G,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=(w>>>14|N<<32-14)^(w>>>18|N<<32-18)^(N>>>41-32|w<<32-(41-32)),j=(N>>>14|w<<32-14)^(N>>>18|w<<32-18)^(w>>>41-32|N<<32-(41-32)),Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,$=w&C^~w&v,j=N&z^~N&W,Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,$=i[xe*2],j=i[xe*2+1],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,$=a[xe%16],j=c[xe%16],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,oe=K&65535|ee<<16,Y=Z&65535|X<<16,$=oe,j=Y,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=(b>>>28|g<<32-28)^(g>>>34-32|b<<32-(34-32))^(g>>>39-32|b<<32-(39-32)),j=(g>>>28|b<<32-28)^(b>>>34-32|g<<32-(34-32))^(b>>>39-32|g<<32-(39-32)),Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,$=b&E^b&x^E&x,j=g&l^g&m^l&m,Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,R=K&65535|ee<<16,dt=Z&65535|X<<16,$=q,j=Ie,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=oe,j=Y,Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,q=K&65535|ee<<16,Ie=Z&65535|X<<16,E=Ee,x=fe,I=_e,w=q,C=B,v=M,_=h,b=R,l=ce,m=he,P=We,N=Ie,z=Me,W=Xe,G=pt,g=dt,xe%16===15)for(var ne=0;ne<16;ne++)$=a[ne],j=c[ne],Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=a[(ne+9)%16],j=c[(ne+9)%16],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,oe=a[(ne+1)%16],Y=c[(ne+1)%16],$=(oe>>>1|Y<<32-1)^(oe>>>8|Y<<32-8)^oe>>>7,j=(Y>>>1|oe<<32-1)^(Y>>>8|oe<<32-8)^(Y>>>7|oe<<32-7),Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,oe=a[(ne+14)%16],Y=c[(ne+14)%16],$=(oe>>>19|Y<<32-19)^(Y>>>61-32|oe<<32-(61-32))^oe>>>6,j=(Y>>>19|oe<<32-19)^(oe>>>61-32|Y<<32-(61-32))^(Y>>>6|oe<<32-6),Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,a[ne]=K&65535|ee<<16,c[ne]=Z&65535|X<<16}$=b,j=g,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=u[0],j=d[0],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[0]=b=K&65535|ee<<16,d[0]=g=Z&65535|X<<16,$=E,j=l,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=u[1],j=d[1],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[1]=E=K&65535|ee<<16,d[1]=l=Z&65535|X<<16,$=x,j=m,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=u[2],j=d[2],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[2]=x=K&65535|ee<<16,d[2]=m=Z&65535|X<<16,$=I,j=P,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=u[3],j=d[3],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[3]=I=K&65535|ee<<16,d[3]=P=Z&65535|X<<16,$=w,j=N,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=u[4],j=d[4],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[4]=w=K&65535|ee<<16,d[4]=N=Z&65535|X<<16,$=C,j=z,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=u[5],j=d[5],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[5]=C=K&65535|ee<<16,d[5]=z=Z&65535|X<<16,$=v,j=W,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=u[6],j=d[6],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[6]=v=K&65535|ee<<16,d[6]=W=Z&65535|X<<16,$=_,j=G,Z=j&65535,X=j>>>16,K=$&65535,ee=$>>>16,$=u[7],j=d[7],Z+=j&65535,X+=j>>>16,K+=$&65535,ee+=$>>>16,X+=Z>>>16,K+=X>>>16,ee+=K>>>16,u[7]=_=K&65535|ee<<16,d[7]=G=Z&65535|X<<16,p+=128,y-=128}return p}function o(a){var c=new n;c.update(a);var u=c.digest();return c.clean(),u}t.hash=o})(Td),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=Ai,r=Td,n=Nr;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(q){const B=new Float64Array(16);if(q)for(let M=0;M<q.length;M++)B[M]=q[M];return B}const s=new Uint8Array(32);s[0]=9;const o=i(),a=i([1]),c=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function y(q,B){for(let M=0;M<16;M++)q[M]=B[M]|0}function b(q){let B=1;for(let M=0;M<16;M++){let h=q[M]+B+65535;B=Math.floor(h/65536),q[M]=h-B*65536}q[0]+=B-1+37*(B-1)}function E(q,B,M){const h=~(M-1);for(let R=0;R<16;R++){const ce=h&(q[R]^B[R]);q[R]^=ce,B[R]^=ce}}function x(q,B){const M=i(),h=i();for(let R=0;R<16;R++)h[R]=B[R];b(h),b(h),b(h);for(let R=0;R<2;R++){M[0]=h[0]-65517;for(let he=1;he<15;he++)M[he]=h[he]-65535-(M[he-1]>>16&1),M[he-1]&=65535;M[15]=h[15]-32767-(M[14]>>16&1);const ce=M[15]>>16&1;M[14]&=65535,E(h,M,1-ce)}for(let R=0;R<16;R++)q[2*R]=h[R]&255,q[2*R+1]=h[R]>>8}function I(q,B){let M=0;for(let h=0;h<32;h++)M|=q[h]^B[h];return(1&M-1>>>8)-1}function w(q,B){const M=new Uint8Array(32),h=new Uint8Array(32);return x(M,q),x(h,B),I(M,h)}function C(q){const B=new Uint8Array(32);return x(B,q),B[0]&1}function v(q,B){for(let M=0;M<16;M++)q[M]=B[2*M]+(B[2*M+1]<<8);q[15]&=32767}function _(q,B,M){for(let h=0;h<16;h++)q[h]=B[h]+M[h]}function g(q,B,M){for(let h=0;h<16;h++)q[h]=B[h]-M[h]}function l(q,B,M){let h,R,ce=0,he=0,We=0,Ie=0,Me=0,Xe=0,pt=0,dt=0,Ve=0,Be=0,Ne=0,ke=0,$e=0,Te=0,Ae=0,Se=0,Ue=0,qe=0,De=0,He=0,et=0,nt=0,tt=0,it=0,Sr=0,fr=0,Mr=0,Gt=0,Qt=0,Ar=0,hn=0,wt=M[0],bt=M[1],At=M[2],xt=M[3],Tt=M[4],_t=M[5],Mt=M[6],jt=M[7],Bt=M[8],kt=M[9],qt=M[10],Rt=M[11],Pt=M[12],yt=M[13],T=M[14],H=M[15];h=B[0],ce+=h*wt,he+=h*bt,We+=h*At,Ie+=h*xt,Me+=h*Tt,Xe+=h*_t,pt+=h*Mt,dt+=h*jt,Ve+=h*Bt,Be+=h*kt,Ne+=h*qt,ke+=h*Rt,$e+=h*Pt,Te+=h*yt,Ae+=h*T,Se+=h*H,h=B[1],he+=h*wt,We+=h*bt,Ie+=h*At,Me+=h*xt,Xe+=h*Tt,pt+=h*_t,dt+=h*Mt,Ve+=h*jt,Be+=h*Bt,Ne+=h*kt,ke+=h*qt,$e+=h*Rt,Te+=h*Pt,Ae+=h*yt,Se+=h*T,Ue+=h*H,h=B[2],We+=h*wt,Ie+=h*bt,Me+=h*At,Xe+=h*xt,pt+=h*Tt,dt+=h*_t,Ve+=h*Mt,Be+=h*jt,Ne+=h*Bt,ke+=h*kt,$e+=h*qt,Te+=h*Rt,Ae+=h*Pt,Se+=h*yt,Ue+=h*T,qe+=h*H,h=B[3],Ie+=h*wt,Me+=h*bt,Xe+=h*At,pt+=h*xt,dt+=h*Tt,Ve+=h*_t,Be+=h*Mt,Ne+=h*jt,ke+=h*Bt,$e+=h*kt,Te+=h*qt,Ae+=h*Rt,Se+=h*Pt,Ue+=h*yt,qe+=h*T,De+=h*H,h=B[4],Me+=h*wt,Xe+=h*bt,pt+=h*At,dt+=h*xt,Ve+=h*Tt,Be+=h*_t,Ne+=h*Mt,ke+=h*jt,$e+=h*Bt,Te+=h*kt,Ae+=h*qt,Se+=h*Rt,Ue+=h*Pt,qe+=h*yt,De+=h*T,He+=h*H,h=B[5],Xe+=h*wt,pt+=h*bt,dt+=h*At,Ve+=h*xt,Be+=h*Tt,Ne+=h*_t,ke+=h*Mt,$e+=h*jt,Te+=h*Bt,Ae+=h*kt,Se+=h*qt,Ue+=h*Rt,qe+=h*Pt,De+=h*yt,He+=h*T,et+=h*H,h=B[6],pt+=h*wt,dt+=h*bt,Ve+=h*At,Be+=h*xt,Ne+=h*Tt,ke+=h*_t,$e+=h*Mt,Te+=h*jt,Ae+=h*Bt,Se+=h*kt,Ue+=h*qt,qe+=h*Rt,De+=h*Pt,He+=h*yt,et+=h*T,nt+=h*H,h=B[7],dt+=h*wt,Ve+=h*bt,Be+=h*At,Ne+=h*xt,ke+=h*Tt,$e+=h*_t,Te+=h*Mt,Ae+=h*jt,Se+=h*Bt,Ue+=h*kt,qe+=h*qt,De+=h*Rt,He+=h*Pt,et+=h*yt,nt+=h*T,tt+=h*H,h=B[8],Ve+=h*wt,Be+=h*bt,Ne+=h*At,ke+=h*xt,$e+=h*Tt,Te+=h*_t,Ae+=h*Mt,Se+=h*jt,Ue+=h*Bt,qe+=h*kt,De+=h*qt,He+=h*Rt,et+=h*Pt,nt+=h*yt,tt+=h*T,it+=h*H,h=B[9],Be+=h*wt,Ne+=h*bt,ke+=h*At,$e+=h*xt,Te+=h*Tt,Ae+=h*_t,Se+=h*Mt,Ue+=h*jt,qe+=h*Bt,De+=h*kt,He+=h*qt,et+=h*Rt,nt+=h*Pt,tt+=h*yt,it+=h*T,Sr+=h*H,h=B[10],Ne+=h*wt,ke+=h*bt,$e+=h*At,Te+=h*xt,Ae+=h*Tt,Se+=h*_t,Ue+=h*Mt,qe+=h*jt,De+=h*Bt,He+=h*kt,et+=h*qt,nt+=h*Rt,tt+=h*Pt,it+=h*yt,Sr+=h*T,fr+=h*H,h=B[11],ke+=h*wt,$e+=h*bt,Te+=h*At,Ae+=h*xt,Se+=h*Tt,Ue+=h*_t,qe+=h*Mt,De+=h*jt,He+=h*Bt,et+=h*kt,nt+=h*qt,tt+=h*Rt,it+=h*Pt,Sr+=h*yt,fr+=h*T,Mr+=h*H,h=B[12],$e+=h*wt,Te+=h*bt,Ae+=h*At,Se+=h*xt,Ue+=h*Tt,qe+=h*_t,De+=h*Mt,He+=h*jt,et+=h*Bt,nt+=h*kt,tt+=h*qt,it+=h*Rt,Sr+=h*Pt,fr+=h*yt,Mr+=h*T,Gt+=h*H,h=B[13],Te+=h*wt,Ae+=h*bt,Se+=h*At,Ue+=h*xt,qe+=h*Tt,De+=h*_t,He+=h*Mt,et+=h*jt,nt+=h*Bt,tt+=h*kt,it+=h*qt,Sr+=h*Rt,fr+=h*Pt,Mr+=h*yt,Gt+=h*T,Qt+=h*H,h=B[14],Ae+=h*wt,Se+=h*bt,Ue+=h*At,qe+=h*xt,De+=h*Tt,He+=h*_t,et+=h*Mt,nt+=h*jt,tt+=h*Bt,it+=h*kt,Sr+=h*qt,fr+=h*Rt,Mr+=h*Pt,Gt+=h*yt,Qt+=h*T,Ar+=h*H,h=B[15],Se+=h*wt,Ue+=h*bt,qe+=h*At,De+=h*xt,He+=h*Tt,et+=h*_t,nt+=h*Mt,tt+=h*jt,it+=h*Bt,Sr+=h*kt,fr+=h*qt,Mr+=h*Rt,Gt+=h*Pt,Qt+=h*yt,Ar+=h*T,hn+=h*H,ce+=38*Ue,he+=38*qe,We+=38*De,Ie+=38*He,Me+=38*et,Xe+=38*nt,pt+=38*tt,dt+=38*it,Ve+=38*Sr,Be+=38*fr,Ne+=38*Mr,ke+=38*Gt,$e+=38*Qt,Te+=38*Ar,Ae+=38*hn,R=1,h=ce+R+65535,R=Math.floor(h/65536),ce=h-R*65536,h=he+R+65535,R=Math.floor(h/65536),he=h-R*65536,h=We+R+65535,R=Math.floor(h/65536),We=h-R*65536,h=Ie+R+65535,R=Math.floor(h/65536),Ie=h-R*65536,h=Me+R+65535,R=Math.floor(h/65536),Me=h-R*65536,h=Xe+R+65535,R=Math.floor(h/65536),Xe=h-R*65536,h=pt+R+65535,R=Math.floor(h/65536),pt=h-R*65536,h=dt+R+65535,R=Math.floor(h/65536),dt=h-R*65536,h=Ve+R+65535,R=Math.floor(h/65536),Ve=h-R*65536,h=Be+R+65535,R=Math.floor(h/65536),Be=h-R*65536,h=Ne+R+65535,R=Math.floor(h/65536),Ne=h-R*65536,h=ke+R+65535,R=Math.floor(h/65536),ke=h-R*65536,h=$e+R+65535,R=Math.floor(h/65536),$e=h-R*65536,h=Te+R+65535,R=Math.floor(h/65536),Te=h-R*65536,h=Ae+R+65535,R=Math.floor(h/65536),Ae=h-R*65536,h=Se+R+65535,R=Math.floor(h/65536),Se=h-R*65536,ce+=R-1+37*(R-1),R=1,h=ce+R+65535,R=Math.floor(h/65536),ce=h-R*65536,h=he+R+65535,R=Math.floor(h/65536),he=h-R*65536,h=We+R+65535,R=Math.floor(h/65536),We=h-R*65536,h=Ie+R+65535,R=Math.floor(h/65536),Ie=h-R*65536,h=Me+R+65535,R=Math.floor(h/65536),Me=h-R*65536,h=Xe+R+65535,R=Math.floor(h/65536),Xe=h-R*65536,h=pt+R+65535,R=Math.floor(h/65536),pt=h-R*65536,h=dt+R+65535,R=Math.floor(h/65536),dt=h-R*65536,h=Ve+R+65535,R=Math.floor(h/65536),Ve=h-R*65536,h=Be+R+65535,R=Math.floor(h/65536),Be=h-R*65536,h=Ne+R+65535,R=Math.floor(h/65536),Ne=h-R*65536,h=ke+R+65535,R=Math.floor(h/65536),ke=h-R*65536,h=$e+R+65535,R=Math.floor(h/65536),$e=h-R*65536,h=Te+R+65535,R=Math.floor(h/65536),Te=h-R*65536,h=Ae+R+65535,R=Math.floor(h/65536),Ae=h-R*65536,h=Se+R+65535,R=Math.floor(h/65536),Se=h-R*65536,ce+=R-1+37*(R-1),q[0]=ce,q[1]=he,q[2]=We,q[3]=Ie,q[4]=Me,q[5]=Xe,q[6]=pt,q[7]=dt,q[8]=Ve,q[9]=Be,q[10]=Ne,q[11]=ke,q[12]=$e,q[13]=Te,q[14]=Ae,q[15]=Se}function m(q,B){l(q,B,B)}function P(q,B){const M=i();let h;for(h=0;h<16;h++)M[h]=B[h];for(h=253;h>=0;h--)m(M,M),h!==2&&h!==4&&l(M,M,B);for(h=0;h<16;h++)q[h]=M[h]}function N(q,B){const M=i();let h;for(h=0;h<16;h++)M[h]=B[h];for(h=250;h>=0;h--)m(M,M),h!==1&&l(M,M,B);for(h=0;h<16;h++)q[h]=M[h]}function z(q,B){const M=i(),h=i(),R=i(),ce=i(),he=i(),We=i(),Ie=i(),Me=i(),Xe=i();g(M,q[1],q[0]),g(Xe,B[1],B[0]),l(M,M,Xe),_(h,q[0],q[1]),_(Xe,B[0],B[1]),l(h,h,Xe),l(R,q[3],B[3]),l(R,R,u),l(ce,q[2],B[2]),_(ce,ce,ce),g(he,h,M),g(We,ce,R),_(Ie,ce,R),_(Me,h,M),l(q[0],he,We),l(q[1],Me,Ie),l(q[2],Ie,We),l(q[3],he,Me)}function W(q,B,M){for(let h=0;h<4;h++)E(q[h],B[h],M)}function G(q,B){const M=i(),h=i(),R=i();P(R,B[2]),l(M,B[0],R),l(h,B[1],R),x(q,h),q[31]^=C(M)<<7}function $(q,B,M){y(q[0],o),y(q[1],a),y(q[2],a),y(q[3],o);for(let h=255;h>=0;--h){const R=M[h/8|0]>>(h&7)&1;W(q,B,R),z(B,q),z(q,q),W(q,B,R)}}function j(q,B){const M=[i(),i(),i(),i()];y(M[0],d),y(M[1],f),y(M[2],a),l(M[3],d,f),$(q,M,B)}function oe(q){if(q.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const B=(0,r.hash)(q);B[0]&=248,B[31]&=127,B[31]|=64;const M=new Uint8Array(32),h=[i(),i(),i(),i()];j(h,B),G(M,h);const R=new Uint8Array(64);return R.set(q),R.set(M,32),{publicKey:M,secretKey:R}}t.generateKeyPairFromSeed=oe;function Y(q){const B=(0,e.randomBytes)(32,q),M=oe(B);return(0,n.wipe)(B),M}t.generateKeyPair=Y;function Z(q){if(q.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(q.subarray(32))}t.extractPublicKeyFromSecretKey=Z;const X=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function K(q,B){let M,h,R,ce;for(h=63;h>=32;--h){for(M=0,R=h-32,ce=h-12;R<ce;++R)B[R]+=M-16*B[h]*X[R-(h-32)],M=Math.floor((B[R]+128)/256),B[R]-=M*256;B[R]+=M,B[h]=0}for(M=0,R=0;R<32;R++)B[R]+=M-(B[31]>>4)*X[R],M=B[R]>>8,B[R]&=255;for(R=0;R<32;R++)B[R]-=M*X[R];for(h=0;h<32;h++)B[h+1]+=B[h]>>8,q[h]=B[h]&255}function ee(q){const B=new Float64Array(64);for(let M=0;M<64;M++)B[M]=q[M];for(let M=0;M<64;M++)q[M]=0;K(q,B)}function xe(q,B){const M=new Float64Array(64),h=[i(),i(),i(),i()],R=(0,r.hash)(q.subarray(0,32));R[0]&=248,R[31]&=127,R[31]|=64;const ce=new Uint8Array(64);ce.set(R.subarray(32),32);const he=new r.SHA512;he.update(ce.subarray(32)),he.update(B);const We=he.digest();he.clean(),ee(We),j(h,We),G(ce,h),he.reset(),he.update(ce.subarray(0,32)),he.update(q.subarray(32)),he.update(B);const Ie=he.digest();ee(Ie);for(let Me=0;Me<32;Me++)M[Me]=We[Me];for(let Me=0;Me<32;Me++)for(let Xe=0;Xe<32;Xe++)M[Me+Xe]+=Ie[Me]*R[Xe];return K(ce.subarray(32),M),ce}t.sign=xe;function ne(q,B){const M=i(),h=i(),R=i(),ce=i(),he=i(),We=i(),Ie=i();return y(q[2],a),v(q[1],B),m(R,q[1]),l(ce,R,c),g(R,R,q[2]),_(ce,q[2],ce),m(he,ce),m(We,he),l(Ie,We,he),l(M,Ie,R),l(M,M,ce),N(M,M),l(M,M,R),l(M,M,ce),l(M,M,ce),l(q[0],M,ce),m(h,q[0]),l(h,h,ce),w(h,R)&&l(q[0],q[0],p),m(h,q[0]),l(h,h,ce),w(h,R)?-1:(C(q[0])===B[31]>>7&&g(q[0],o,q[0]),l(q[3],q[0],q[1]),0)}function Ee(q,B,M){const h=new Uint8Array(32),R=[i(),i(),i(),i()],ce=[i(),i(),i(),i()];if(M.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(ne(ce,q))return!1;const he=new r.SHA512;he.update(M.subarray(0,32)),he.update(q),he.update(B);const We=he.digest();return ee(We),$(R,ce,We),j(ce,M.subarray(32)),z(R,ce),G(h,R),!I(M,h)}t.verify=Ee;function fe(q){let B=[i(),i(),i(),i()];if(ne(B,q))throw new Error("Ed25519: invalid public key");let M=i(),h=i(),R=B[1];_(M,a,R),g(h,a,R),P(h,h),l(M,M,h);let ce=new Uint8Array(32);return x(ce,M),ce}t.convertPublicKeyToX25519=fe;function _e(q){const B=(0,r.hash)(q.subarray(0,32));B[0]&=248,B[31]&=127,B[31]|=64;const M=new Uint8Array(B.subarray(0,32));return(0,n.wipe)(B),M}t.convertSecretKeyToX25519=_e}(uc);const Jm="EdDSA",Xm="JWT",Rd=".",Pd="base64url",e1="utf8",t1="utf8",r1=":",n1="did",i1="key",Nd="base58btc",s1="z",o1="K36",a1=32;function gc(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function $d(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?gc(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function mc(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=$d(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return gc(r)}function c1(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function f(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var E=0,x=0,I=0,w=b.length;I!==w&&b[I]===0;)I++,E++;for(var C=(w-I)*d+1>>>0,v=new Uint8Array(C);I!==w;){for(var _=b[I],g=0,l=C-1;(_!==0||g<x)&&l!==-1;l--,g++)_+=256*v[l]>>>0,v[l]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");x=g,I++}for(var m=C-x;m!==C&&v[m]===0;)m++;for(var P=c.repeat(E);m<C;++m)P+=t.charAt(v[m]);return P}function p(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var E=0;if(b[E]!==" "){for(var x=0,I=0;b[E]===c;)x++,E++;for(var w=(b.length-E)*u+1>>>0,C=new Uint8Array(w);b[E];){var v=r[b.charCodeAt(E)];if(v===255)return;for(var _=0,g=w-1;(v!==0||_<I)&&g!==-1;g--,_++)v+=a*C[g]>>>0,C[g]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");I=_,E++}if(b[E]!==" "){for(var l=w-I;l!==w&&C[l]===0;)l++;for(var m=new Uint8Array(x+(w-l)),P=x;l!==w;)m[P++]=C[l++];return m}}}function y(b){var E=p(b);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:p,decode:y}}var l1=c1,u1=l1;const d1=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},h1=t=>new TextEncoder().encode(t),f1=t=>new TextDecoder().decode(t);class p1{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class g1{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Ld(this,e)}}class m1{constructor(e){this.decoders=e}or(e){return Ld(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ld=(t,e)=>new m1({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class y1{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new p1(e,r,n),this.decoder=new g1(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Lo=({name:t,prefix:e,encode:r,decode:n})=>new y1(t,e,r,n),ps=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=u1(r,e);return Lo({prefix:t,name:e,encode:n,decode:s=>d1(i(s))})},v1=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let d=0;d<s;++d){const f=i[t[d]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},w1=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},nr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Lo({prefix:e,name:t,encode(i){return w1(i,n,r)},decode(i){return v1(i,n,r,t)}}),b1=Lo({prefix:"\0",name:"identity",encode:t=>f1(t),decode:t=>h1(t)}),_1=Object.freeze(Object.defineProperty({__proto__:null,identity:b1},Symbol.toStringTag,{value:"Module"})),E1=nr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),S1=Object.freeze(Object.defineProperty({__proto__:null,base2:E1},Symbol.toStringTag,{value:"Module"})),x1=nr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),C1=Object.freeze(Object.defineProperty({__proto__:null,base8:x1},Symbol.toStringTag,{value:"Module"})),O1=ps({prefix:"9",name:"base10",alphabet:"0123456789"}),D1=Object.freeze(Object.defineProperty({__proto__:null,base10:O1},Symbol.toStringTag,{value:"Module"})),I1=nr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),A1=nr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),T1=Object.freeze(Object.defineProperty({__proto__:null,base16:I1,base16upper:A1},Symbol.toStringTag,{value:"Module"})),R1=nr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),P1=nr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),N1=nr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),$1=nr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),L1=nr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),M1=nr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),k1=nr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),U1=nr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),F1=nr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),j1=Object.freeze(Object.defineProperty({__proto__:null,base32:R1,base32hex:L1,base32hexpad:k1,base32hexpadupper:U1,base32hexupper:M1,base32pad:N1,base32padupper:$1,base32upper:P1,base32z:F1},Symbol.toStringTag,{value:"Module"})),B1=ps({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),q1=ps({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),z1=Object.freeze(Object.defineProperty({__proto__:null,base36:B1,base36upper:q1},Symbol.toStringTag,{value:"Module"})),W1=ps({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),V1=ps({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),H1=Object.freeze(Object.defineProperty({__proto__:null,base58btc:W1,base58flickr:V1},Symbol.toStringTag,{value:"Module"})),K1=nr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Z1=nr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),G1=nr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Q1=nr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Y1=Object.freeze(Object.defineProperty({__proto__:null,base64:K1,base64pad:Z1,base64url:G1,base64urlpad:Q1},Symbol.toStringTag,{value:"Module"})),Md=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),J1=Md.reduce((t,e,r)=>(t[r]=e,t),[]),X1=Md.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function ey(t){return t.reduce((e,r)=>(e+=J1[r],e),"")}function ty(t){const e=[];for(const r of t){const n=X1[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const ry=Lo({prefix:"🚀",name:"base256emoji",encode:ey,decode:ty}),ny=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:ry},Symbol.toStringTag,{value:"Module"}));new TextEncoder,new TextDecoder;const kd={..._1,...S1,...C1,...D1,...T1,...j1,...z1,...H1,...Y1,...ny};function Ud(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Fd=Ud("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),yc=Ud("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=$d(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),jd={utf8:Fd,"utf-8":Fd,hex:kd.base16,latin1:yc,ascii:yc,binary:yc,...kd};function yr(t,e="utf8"){const r=jd[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Cr(t,e="utf8"){const r=jd[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?gc(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function Mo(t){return yr(Cr(lc(t),e1),Pd)}function Bd(t){const e=Cr(o1,Nd),r=s1+yr(mc([e,t]),Nd);return[n1,i1,r].join(r1)}function iy(t){return yr(t,Pd)}function sy(t){return Cr([Mo(t.header),Mo(t.payload)].join(Rd),t1)}function oy(t){return[Mo(t.header),Mo(t.payload),iy(t.signature)].join(Rd)}function qd(t=Ai.randomBytes(a1)){return uc.generateKeyPairFromSeed(t)}async function ay(t,e,r,n,i=ye.fromMiliseconds(Date.now())){const s={alg:Jm,typ:Xm},o=Bd(n.publicKey),a=i+r,c={iss:o,sub:t,aud:e,iat:i,exp:a},u=sy({header:s,payload:c}),d=uc.sign(n.secretKey,u);return oy({header:s,payload:c,signature:d})}var vc={},ko={};Object.defineProperty(ko,"__esModule",{value:!0});var cr=Le,wc=Nr,cy=20;function ly(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],u=r[11]<<24|r[10]<<16|r[9]<<8|r[8],d=r[15]<<24|r[14]<<16|r[13]<<8|r[12],f=r[19]<<24|r[18]<<16|r[17]<<8|r[16],p=r[23]<<24|r[22]<<16|r[21]<<8|r[20],y=r[27]<<24|r[26]<<16|r[25]<<8|r[24],b=r[31]<<24|r[30]<<16|r[29]<<8|r[28],E=e[3]<<24|e[2]<<16|e[1]<<8|e[0],x=e[7]<<24|e[6]<<16|e[5]<<8|e[4],I=e[11]<<24|e[10]<<16|e[9]<<8|e[8],w=e[15]<<24|e[14]<<16|e[13]<<8|e[12],C=n,v=i,_=s,g=o,l=a,m=c,P=u,N=d,z=f,W=p,G=y,$=b,j=E,oe=x,Y=I,Z=w,X=0;X<cy;X+=2)C=C+l|0,j^=C,j=j>>>32-16|j<<16,z=z+j|0,l^=z,l=l>>>32-12|l<<12,v=v+m|0,oe^=v,oe=oe>>>32-16|oe<<16,W=W+oe|0,m^=W,m=m>>>32-12|m<<12,_=_+P|0,Y^=_,Y=Y>>>32-16|Y<<16,G=G+Y|0,P^=G,P=P>>>32-12|P<<12,g=g+N|0,Z^=g,Z=Z>>>32-16|Z<<16,$=$+Z|0,N^=$,N=N>>>32-12|N<<12,_=_+P|0,Y^=_,Y=Y>>>32-8|Y<<8,G=G+Y|0,P^=G,P=P>>>32-7|P<<7,g=g+N|0,Z^=g,Z=Z>>>32-8|Z<<8,$=$+Z|0,N^=$,N=N>>>32-7|N<<7,v=v+m|0,oe^=v,oe=oe>>>32-8|oe<<8,W=W+oe|0,m^=W,m=m>>>32-7|m<<7,C=C+l|0,j^=C,j=j>>>32-8|j<<8,z=z+j|0,l^=z,l=l>>>32-7|l<<7,C=C+m|0,Z^=C,Z=Z>>>32-16|Z<<16,G=G+Z|0,m^=G,m=m>>>32-12|m<<12,v=v+P|0,j^=v,j=j>>>32-16|j<<16,$=$+j|0,P^=$,P=P>>>32-12|P<<12,_=_+N|0,oe^=_,oe=oe>>>32-16|oe<<16,z=z+oe|0,N^=z,N=N>>>32-12|N<<12,g=g+l|0,Y^=g,Y=Y>>>32-16|Y<<16,W=W+Y|0,l^=W,l=l>>>32-12|l<<12,_=_+N|0,oe^=_,oe=oe>>>32-8|oe<<8,z=z+oe|0,N^=z,N=N>>>32-7|N<<7,g=g+l|0,Y^=g,Y=Y>>>32-8|Y<<8,W=W+Y|0,l^=W,l=l>>>32-7|l<<7,v=v+P|0,j^=v,j=j>>>32-8|j<<8,$=$+j|0,P^=$,P=P>>>32-7|P<<7,C=C+m|0,Z^=C,Z=Z>>>32-8|Z<<8,G=G+Z|0,m^=G,m=m>>>32-7|m<<7;cr.writeUint32LE(C+n|0,t,0),cr.writeUint32LE(v+i|0,t,4),cr.writeUint32LE(_+s|0,t,8),cr.writeUint32LE(g+o|0,t,12),cr.writeUint32LE(l+a|0,t,16),cr.writeUint32LE(m+c|0,t,20),cr.writeUint32LE(P+u|0,t,24),cr.writeUint32LE(N+d|0,t,28),cr.writeUint32LE(z+f|0,t,32),cr.writeUint32LE(W+p|0,t,36),cr.writeUint32LE(G+y|0,t,40),cr.writeUint32LE($+b|0,t,44),cr.writeUint32LE(j+E|0,t,48),cr.writeUint32LE(oe+x|0,t,52),cr.writeUint32LE(Y+I|0,t,56),cr.writeUint32LE(Z+w|0,t,60)}function zd(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=i}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){ly(a,s,t);for(var u=c;u<c+64&&u<r.length;u++)n[u]=r[u]^a[u-c];dy(s,0,o)}return wc.wipe(a),i===0&&wc.wipe(s),n}ko.streamXOR=zd;function uy(t,e,r,n){return n===void 0&&(n=0),wc.wipe(r),zd(t,e,r,r,n)}ko.stream=uy;function dy(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var Wd={},Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});function hy(t,e,r){return~(t-1)&e|t-1&r}Tn.select=hy;function fy(t,e){return(t|0)-(e|0)-1>>>31&1}Tn.lessOrEqual=fy;function Vd(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}Tn.compare=Vd;function py(t,e){return t.length===0||e.length===0?!1:Vd(t,e)!==0}Tn.equal=py,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Tn,r=Nr;t.DIGEST_LENGTH=16;var n=function(){function o(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=a[0]|a[1]<<8;this._r[0]=c&8191;var u=a[2]|a[3]<<8;this._r[1]=(c>>>13|u<<3)&8191;var d=a[4]|a[5]<<8;this._r[2]=(u>>>10|d<<6)&7939;var f=a[6]|a[7]<<8;this._r[3]=(d>>>7|f<<9)&8191;var p=a[8]|a[9]<<8;this._r[4]=(f>>>4|p<<12)&255,this._r[5]=p>>>1&8190;var y=a[10]|a[11]<<8;this._r[6]=(p>>>14|y<<2)&8191;var b=a[12]|a[13]<<8;this._r[7]=(y>>>11|b<<5)&8065;var E=a[14]|a[15]<<8;this._r[8]=(b>>>8|E<<8)&8191,this._r[9]=E>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return o.prototype._blocks=function(a,c,u){for(var d=this._fin?0:2048,f=this._h[0],p=this._h[1],y=this._h[2],b=this._h[3],E=this._h[4],x=this._h[5],I=this._h[6],w=this._h[7],C=this._h[8],v=this._h[9],_=this._r[0],g=this._r[1],l=this._r[2],m=this._r[3],P=this._r[4],N=this._r[5],z=this._r[6],W=this._r[7],G=this._r[8],$=this._r[9];u>=16;){var j=a[c+0]|a[c+1]<<8;f+=j&8191;var oe=a[c+2]|a[c+3]<<8;p+=(j>>>13|oe<<3)&8191;var Y=a[c+4]|a[c+5]<<8;y+=(oe>>>10|Y<<6)&8191;var Z=a[c+6]|a[c+7]<<8;b+=(Y>>>7|Z<<9)&8191;var X=a[c+8]|a[c+9]<<8;E+=(Z>>>4|X<<12)&8191,x+=X>>>1&8191;var K=a[c+10]|a[c+11]<<8;I+=(X>>>14|K<<2)&8191;var ee=a[c+12]|a[c+13]<<8;w+=(K>>>11|ee<<5)&8191;var xe=a[c+14]|a[c+15]<<8;C+=(ee>>>8|xe<<8)&8191,v+=xe>>>5|d;var ne=0,Ee=ne;Ee+=f*_,Ee+=p*(5*$),Ee+=y*(5*G),Ee+=b*(5*W),Ee+=E*(5*z),ne=Ee>>>13,Ee&=8191,Ee+=x*(5*N),Ee+=I*(5*P),Ee+=w*(5*m),Ee+=C*(5*l),Ee+=v*(5*g),ne+=Ee>>>13,Ee&=8191;var fe=ne;fe+=f*g,fe+=p*_,fe+=y*(5*$),fe+=b*(5*G),fe+=E*(5*W),ne=fe>>>13,fe&=8191,fe+=x*(5*z),fe+=I*(5*N),fe+=w*(5*P),fe+=C*(5*m),fe+=v*(5*l),ne+=fe>>>13,fe&=8191;var _e=ne;_e+=f*l,_e+=p*g,_e+=y*_,_e+=b*(5*$),_e+=E*(5*G),ne=_e>>>13,_e&=8191,_e+=x*(5*W),_e+=I*(5*z),_e+=w*(5*N),_e+=C*(5*P),_e+=v*(5*m),ne+=_e>>>13,_e&=8191;var q=ne;q+=f*m,q+=p*l,q+=y*g,q+=b*_,q+=E*(5*$),ne=q>>>13,q&=8191,q+=x*(5*G),q+=I*(5*W),q+=w*(5*z),q+=C*(5*N),q+=v*(5*P),ne+=q>>>13,q&=8191;var B=ne;B+=f*P,B+=p*m,B+=y*l,B+=b*g,B+=E*_,ne=B>>>13,B&=8191,B+=x*(5*$),B+=I*(5*G),B+=w*(5*W),B+=C*(5*z),B+=v*(5*N),ne+=B>>>13,B&=8191;var M=ne;M+=f*N,M+=p*P,M+=y*m,M+=b*l,M+=E*g,ne=M>>>13,M&=8191,M+=x*_,M+=I*(5*$),M+=w*(5*G),M+=C*(5*W),M+=v*(5*z),ne+=M>>>13,M&=8191;var h=ne;h+=f*z,h+=p*N,h+=y*P,h+=b*m,h+=E*l,ne=h>>>13,h&=8191,h+=x*g,h+=I*_,h+=w*(5*$),h+=C*(5*G),h+=v*(5*W),ne+=h>>>13,h&=8191;var R=ne;R+=f*W,R+=p*z,R+=y*N,R+=b*P,R+=E*m,ne=R>>>13,R&=8191,R+=x*l,R+=I*g,R+=w*_,R+=C*(5*$),R+=v*(5*G),ne+=R>>>13,R&=8191;var ce=ne;ce+=f*G,ce+=p*W,ce+=y*z,ce+=b*N,ce+=E*P,ne=ce>>>13,ce&=8191,ce+=x*m,ce+=I*l,ce+=w*g,ce+=C*_,ce+=v*(5*$),ne+=ce>>>13,ce&=8191;var he=ne;he+=f*$,he+=p*G,he+=y*W,he+=b*z,he+=E*N,ne=he>>>13,he&=8191,he+=x*P,he+=I*m,he+=w*l,he+=C*g,he+=v*_,ne+=he>>>13,he&=8191,ne=(ne<<2)+ne|0,ne=ne+Ee|0,Ee=ne&8191,ne=ne>>>13,fe+=ne,f=Ee,p=fe,y=_e,b=q,E=B,x=M,I=h,w=R,C=ce,v=he,c+=16,u-=16}this._h[0]=f,this._h[1]=p,this._h[2]=y,this._h[3]=b,this._h[4]=E,this._h[5]=x,this._h[6]=I,this._h[7]=w,this._h[8]=C,this._h[9]=v},o.prototype.finish=function(a,c){c===void 0&&(c=0);var u=new Uint16Array(10),d,f,p,y;if(this._leftover){for(y=this._leftover,this._buffer[y++]=1;y<16;y++)this._buffer[y]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(d=this._h[1]>>>13,this._h[1]&=8191,y=2;y<10;y++)this._h[y]+=d,d=this._h[y]>>>13,this._h[y]&=8191;for(this._h[0]+=d*5,d=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=d,d=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=d,u[0]=this._h[0]+5,d=u[0]>>>13,u[0]&=8191,y=1;y<10;y++)u[y]=this._h[y]+d,d=u[y]>>>13,u[y]&=8191;for(u[9]-=8192,f=(d^1)-1,y=0;y<10;y++)u[y]&=f;for(f=~f,y=0;y<10;y++)this._h[y]=this._h[y]&f|u[y];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,p=this._h[0]+this._pad[0],this._h[0]=p&65535,y=1;y<8;y++)p=(this._h[y]+this._pad[y]|0)+(p>>>16)|0,this._h[y]=p&65535;return a[c+0]=this._h[0]>>>0,a[c+1]=this._h[0]>>>8,a[c+2]=this._h[1]>>>0,a[c+3]=this._h[1]>>>8,a[c+4]=this._h[2]>>>0,a[c+5]=this._h[2]>>>8,a[c+6]=this._h[3]>>>0,a[c+7]=this._h[3]>>>8,a[c+8]=this._h[4]>>>0,a[c+9]=this._h[4]>>>8,a[c+10]=this._h[5]>>>0,a[c+11]=this._h[5]>>>8,a[c+12]=this._h[6]>>>0,a[c+13]=this._h[6]>>>8,a[c+14]=this._h[7]>>>0,a[c+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(a){var c=0,u=a.length,d;if(this._leftover){d=16-this._leftover,d>u&&(d=u);for(var f=0;f<d;f++)this._buffer[this._leftover+f]=a[c+f];if(u-=d,c+=d,this._leftover+=d,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(u>=16&&(d=u-u%16,this._blocks(a,c,d),c+=d,u-=d),u){for(var f=0;f<u;f++)this._buffer[this._leftover+f]=a[c+f];this._leftover+=u}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},o.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o}();t.Poly1305=n;function i(o,a){var c=new n(o);c.update(a);var u=c.digest();return c.clean(),u}t.oneTimeAuth=i;function s(o,a){return o.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(o,a)}t.equal=s}(Wd),function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ko,r=Wd,n=Nr,i=Le,s=Tn;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var o=new Uint8Array(16),a=function(){function c(u){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,u.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(u)}return c.prototype.seal=function(u,d,f,p){if(u.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var y=new Uint8Array(16);y.set(u,y.length-u.length);var b=new Uint8Array(32);e.stream(this._key,y,b,4);var E=d.length+this.tagLength,x;if(p){if(p.length!==E)throw new Error("ChaCha20Poly1305: incorrect destination length");x=p}else x=new Uint8Array(E);return e.streamXOR(this._key,y,d,x,4),this._authenticate(x.subarray(x.length-this.tagLength,x.length),b,x.subarray(0,x.length-this.tagLength),f),n.wipe(y),x},c.prototype.open=function(u,d,f,p){if(u.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(d.length<this.tagLength)return null;var y=new Uint8Array(16);y.set(u,y.length-u.length);var b=new Uint8Array(32);e.stream(this._key,y,b,4);var E=new Uint8Array(this.tagLength);if(this._authenticate(E,b,d.subarray(0,d.length-this.tagLength),f),!s.equal(E,d.subarray(d.length-this.tagLength,d.length)))return null;var x=d.length-this.tagLength,I;if(p){if(p.length!==x)throw new Error("ChaCha20Poly1305: incorrect destination length");I=p}else I=new Uint8Array(x);return e.streamXOR(this._key,y,d.subarray(0,d.length-this.tagLength),I,4),n.wipe(y),I},c.prototype.clean=function(){return n.wipe(this._key),this},c.prototype._authenticate=function(u,d,f,p){var y=new r.Poly1305(d);p&&(y.update(p),p.length%16>0&&y.update(o.subarray(p.length%16))),y.update(f),f.length%16>0&&y.update(o.subarray(f.length%16));var b=new Uint8Array(8);p&&i.writeUint64LE(p.length,b),y.update(b),i.writeUint64LE(f.length,b),y.update(b);for(var E=y.digest(),x=0;x<E.length;x++)u[x]=E[x];y.clean(),n.wipe(E),n.wipe(b)},c}();t.ChaCha20Poly1305=a}(vc);var Hd={},gs={},bc={};Object.defineProperty(bc,"__esModule",{value:!0});function gy(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}bc.isSerializableHash=gy,Object.defineProperty(gs,"__esModule",{value:!0});var sn=bc,my=Tn,yy=Nr,Kd=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),sn.isSerializableHash(this._inner)&&sn.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),yy.wipe(n)}return t.prototype.reset=function(){if(!sn.isSerializableHash(this._inner)||!sn.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){sn.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),sn.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!sn.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!sn.isSerializableHash(this._inner)||!sn.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!sn.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();gs.HMAC=Kd;function vy(t,e,r){var n=new Kd(t,e);n.update(r);var i=n.digest();return n.clean(),i}gs.hmac=vy,gs.equal=my.equal,Object.defineProperty(Hd,"__esModule",{value:!0});var Zd=gs,Gd=Nr,wy=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=Zd.hmac(this._hash,n,r);this._hmac=new Zd.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),Gd.wipe(this._buffer),Gd.wipe(this._counter),this._bufpos=0},t}(),by=Hd.HKDF=wy,Uo={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Le,r=Nr;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},a.prototype.update=function(c,u){if(u===void 0&&(u=c.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var d=0;if(this._bytesHashed+=u,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&u>0;)this._buffer[this._bufferLength++]=c[d++],u--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(u>=this.blockSize&&(d=s(this._temp,this._state,c,d,u),u%=this.blockSize);u>0;)this._buffer[this._bufferLength++]=c[d++],u--;return this},a.prototype.finish=function(c){if(!this._finished){var u=this._bytesHashed,d=this._bufferLength,f=u/536870912|0,p=u<<3,y=u%64<56?64:128;this._buffer[d]=128;for(var b=d+1;b<y-8;b++)this._buffer[b]=0;e.writeUint32BE(f,this._buffer,y-8),e.writeUint32BE(p,this._buffer,y-4),s(this._temp,this._state,this._buffer,0,y),this._finished=!0}for(var b=0;b<this.digestLength/4;b++)e.writeUint32BE(this._state[b],c,b*4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._state.set(c.state),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.state),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(a,c,u,d,f){for(;f>=64;){for(var p=c[0],y=c[1],b=c[2],E=c[3],x=c[4],I=c[5],w=c[6],C=c[7],v=0;v<16;v++){var _=d+v*4;a[v]=e.readUint32BE(u,_)}for(var v=16;v<64;v++){var g=a[v-2],l=(g>>>17|g<<32-17)^(g>>>19|g<<32-19)^g>>>10;g=a[v-15];var m=(g>>>7|g<<32-7)^(g>>>18|g<<32-18)^g>>>3;a[v]=(l+a[v-7]|0)+(m+a[v-16]|0)}for(var v=0;v<64;v++){var l=(((x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7))+(x&I^~x&w)|0)+(C+(i[v]+a[v]|0)|0)|0,m=((p>>>2|p<<32-2)^(p>>>13|p<<32-13)^(p>>>22|p<<32-22))+(p&y^p&b^y&b)|0;C=w,w=I,I=x,x=E+l|0,E=b,b=y,y=p,p=l+m|0}c[0]+=p,c[1]+=y,c[2]+=b,c[3]+=E,c[4]+=x,c[5]+=I,c[6]+=w,c[7]+=C,d+=64,f-=64}return d}function o(a){var c=new n;c.update(a);var u=c.digest();return c.clean(),u}t.hash=o})(Uo);var _c={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=Ai,r=Nr;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(v){const _=new Float64Array(16);if(v)for(let g=0;g<v.length;g++)_[g]=v[g];return _}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function o(v){let _=1;for(let g=0;g<16;g++){let l=v[g]+_+65535;_=Math.floor(l/65536),v[g]=l-_*65536}v[0]+=_-1+37*(_-1)}function a(v,_,g){const l=~(g-1);for(let m=0;m<16;m++){const P=l&(v[m]^_[m]);v[m]^=P,_[m]^=P}}function c(v,_){const g=n(),l=n();for(let m=0;m<16;m++)l[m]=_[m];o(l),o(l),o(l);for(let m=0;m<2;m++){g[0]=l[0]-65517;for(let N=1;N<15;N++)g[N]=l[N]-65535-(g[N-1]>>16&1),g[N-1]&=65535;g[15]=l[15]-32767-(g[14]>>16&1);const P=g[15]>>16&1;g[14]&=65535,a(l,g,1-P)}for(let m=0;m<16;m++)v[2*m]=l[m]&255,v[2*m+1]=l[m]>>8}function u(v,_){for(let g=0;g<16;g++)v[g]=_[2*g]+(_[2*g+1]<<8);v[15]&=32767}function d(v,_,g){for(let l=0;l<16;l++)v[l]=_[l]+g[l]}function f(v,_,g){for(let l=0;l<16;l++)v[l]=_[l]-g[l]}function p(v,_,g){let l,m,P=0,N=0,z=0,W=0,G=0,$=0,j=0,oe=0,Y=0,Z=0,X=0,K=0,ee=0,xe=0,ne=0,Ee=0,fe=0,_e=0,q=0,B=0,M=0,h=0,R=0,ce=0,he=0,We=0,Ie=0,Me=0,Xe=0,pt=0,dt=0,Ve=g[0],Be=g[1],Ne=g[2],ke=g[3],$e=g[4],Te=g[5],Ae=g[6],Se=g[7],Ue=g[8],qe=g[9],De=g[10],He=g[11],et=g[12],nt=g[13],tt=g[14],it=g[15];l=_[0],P+=l*Ve,N+=l*Be,z+=l*Ne,W+=l*ke,G+=l*$e,$+=l*Te,j+=l*Ae,oe+=l*Se,Y+=l*Ue,Z+=l*qe,X+=l*De,K+=l*He,ee+=l*et,xe+=l*nt,ne+=l*tt,Ee+=l*it,l=_[1],N+=l*Ve,z+=l*Be,W+=l*Ne,G+=l*ke,$+=l*$e,j+=l*Te,oe+=l*Ae,Y+=l*Se,Z+=l*Ue,X+=l*qe,K+=l*De,ee+=l*He,xe+=l*et,ne+=l*nt,Ee+=l*tt,fe+=l*it,l=_[2],z+=l*Ve,W+=l*Be,G+=l*Ne,$+=l*ke,j+=l*$e,oe+=l*Te,Y+=l*Ae,Z+=l*Se,X+=l*Ue,K+=l*qe,ee+=l*De,xe+=l*He,ne+=l*et,Ee+=l*nt,fe+=l*tt,_e+=l*it,l=_[3],W+=l*Ve,G+=l*Be,$+=l*Ne,j+=l*ke,oe+=l*$e,Y+=l*Te,Z+=l*Ae,X+=l*Se,K+=l*Ue,ee+=l*qe,xe+=l*De,ne+=l*He,Ee+=l*et,fe+=l*nt,_e+=l*tt,q+=l*it,l=_[4],G+=l*Ve,$+=l*Be,j+=l*Ne,oe+=l*ke,Y+=l*$e,Z+=l*Te,X+=l*Ae,K+=l*Se,ee+=l*Ue,xe+=l*qe,ne+=l*De,Ee+=l*He,fe+=l*et,_e+=l*nt,q+=l*tt,B+=l*it,l=_[5],$+=l*Ve,j+=l*Be,oe+=l*Ne,Y+=l*ke,Z+=l*$e,X+=l*Te,K+=l*Ae,ee+=l*Se,xe+=l*Ue,ne+=l*qe,Ee+=l*De,fe+=l*He,_e+=l*et,q+=l*nt,B+=l*tt,M+=l*it,l=_[6],j+=l*Ve,oe+=l*Be,Y+=l*Ne,Z+=l*ke,X+=l*$e,K+=l*Te,ee+=l*Ae,xe+=l*Se,ne+=l*Ue,Ee+=l*qe,fe+=l*De,_e+=l*He,q+=l*et,B+=l*nt,M+=l*tt,h+=l*it,l=_[7],oe+=l*Ve,Y+=l*Be,Z+=l*Ne,X+=l*ke,K+=l*$e,ee+=l*Te,xe+=l*Ae,ne+=l*Se,Ee+=l*Ue,fe+=l*qe,_e+=l*De,q+=l*He,B+=l*et,M+=l*nt,h+=l*tt,R+=l*it,l=_[8],Y+=l*Ve,Z+=l*Be,X+=l*Ne,K+=l*ke,ee+=l*$e,xe+=l*Te,ne+=l*Ae,Ee+=l*Se,fe+=l*Ue,_e+=l*qe,q+=l*De,B+=l*He,M+=l*et,h+=l*nt,R+=l*tt,ce+=l*it,l=_[9],Z+=l*Ve,X+=l*Be,K+=l*Ne,ee+=l*ke,xe+=l*$e,ne+=l*Te,Ee+=l*Ae,fe+=l*Se,_e+=l*Ue,q+=l*qe,B+=l*De,M+=l*He,h+=l*et,R+=l*nt,ce+=l*tt,he+=l*it,l=_[10],X+=l*Ve,K+=l*Be,ee+=l*Ne,xe+=l*ke,ne+=l*$e,Ee+=l*Te,fe+=l*Ae,_e+=l*Se,q+=l*Ue,B+=l*qe,M+=l*De,h+=l*He,R+=l*et,ce+=l*nt,he+=l*tt,We+=l*it,l=_[11],K+=l*Ve,ee+=l*Be,xe+=l*Ne,ne+=l*ke,Ee+=l*$e,fe+=l*Te,_e+=l*Ae,q+=l*Se,B+=l*Ue,M+=l*qe,h+=l*De,R+=l*He,ce+=l*et,he+=l*nt,We+=l*tt,Ie+=l*it,l=_[12],ee+=l*Ve,xe+=l*Be,ne+=l*Ne,Ee+=l*ke,fe+=l*$e,_e+=l*Te,q+=l*Ae,B+=l*Se,M+=l*Ue,h+=l*qe,R+=l*De,ce+=l*He,he+=l*et,We+=l*nt,Ie+=l*tt,Me+=l*it,l=_[13],xe+=l*Ve,ne+=l*Be,Ee+=l*Ne,fe+=l*ke,_e+=l*$e,q+=l*Te,B+=l*Ae,M+=l*Se,h+=l*Ue,R+=l*qe,ce+=l*De,he+=l*He,We+=l*et,Ie+=l*nt,Me+=l*tt,Xe+=l*it,l=_[14],ne+=l*Ve,Ee+=l*Be,fe+=l*Ne,_e+=l*ke,q+=l*$e,B+=l*Te,M+=l*Ae,h+=l*Se,R+=l*Ue,ce+=l*qe,he+=l*De,We+=l*He,Ie+=l*et,Me+=l*nt,Xe+=l*tt,pt+=l*it,l=_[15],Ee+=l*Ve,fe+=l*Be,_e+=l*Ne,q+=l*ke,B+=l*$e,M+=l*Te,h+=l*Ae,R+=l*Se,ce+=l*Ue,he+=l*qe,We+=l*De,Ie+=l*He,Me+=l*et,Xe+=l*nt,pt+=l*tt,dt+=l*it,P+=38*fe,N+=38*_e,z+=38*q,W+=38*B,G+=38*M,$+=38*h,j+=38*R,oe+=38*ce,Y+=38*he,Z+=38*We,X+=38*Ie,K+=38*Me,ee+=38*Xe,xe+=38*pt,ne+=38*dt,m=1,l=P+m+65535,m=Math.floor(l/65536),P=l-m*65536,l=N+m+65535,m=Math.floor(l/65536),N=l-m*65536,l=z+m+65535,m=Math.floor(l/65536),z=l-m*65536,l=W+m+65535,m=Math.floor(l/65536),W=l-m*65536,l=G+m+65535,m=Math.floor(l/65536),G=l-m*65536,l=$+m+65535,m=Math.floor(l/65536),$=l-m*65536,l=j+m+65535,m=Math.floor(l/65536),j=l-m*65536,l=oe+m+65535,m=Math.floor(l/65536),oe=l-m*65536,l=Y+m+65535,m=Math.floor(l/65536),Y=l-m*65536,l=Z+m+65535,m=Math.floor(l/65536),Z=l-m*65536,l=X+m+65535,m=Math.floor(l/65536),X=l-m*65536,l=K+m+65535,m=Math.floor(l/65536),K=l-m*65536,l=ee+m+65535,m=Math.floor(l/65536),ee=l-m*65536,l=xe+m+65535,m=Math.floor(l/65536),xe=l-m*65536,l=ne+m+65535,m=Math.floor(l/65536),ne=l-m*65536,l=Ee+m+65535,m=Math.floor(l/65536),Ee=l-m*65536,P+=m-1+37*(m-1),m=1,l=P+m+65535,m=Math.floor(l/65536),P=l-m*65536,l=N+m+65535,m=Math.floor(l/65536),N=l-m*65536,l=z+m+65535,m=Math.floor(l/65536),z=l-m*65536,l=W+m+65535,m=Math.floor(l/65536),W=l-m*65536,l=G+m+65535,m=Math.floor(l/65536),G=l-m*65536,l=$+m+65535,m=Math.floor(l/65536),$=l-m*65536,l=j+m+65535,m=Math.floor(l/65536),j=l-m*65536,l=oe+m+65535,m=Math.floor(l/65536),oe=l-m*65536,l=Y+m+65535,m=Math.floor(l/65536),Y=l-m*65536,l=Z+m+65535,m=Math.floor(l/65536),Z=l-m*65536,l=X+m+65535,m=Math.floor(l/65536),X=l-m*65536,l=K+m+65535,m=Math.floor(l/65536),K=l-m*65536,l=ee+m+65535,m=Math.floor(l/65536),ee=l-m*65536,l=xe+m+65535,m=Math.floor(l/65536),xe=l-m*65536,l=ne+m+65535,m=Math.floor(l/65536),ne=l-m*65536,l=Ee+m+65535,m=Math.floor(l/65536),Ee=l-m*65536,P+=m-1+37*(m-1),v[0]=P,v[1]=N,v[2]=z,v[3]=W,v[4]=G,v[5]=$,v[6]=j,v[7]=oe,v[8]=Y,v[9]=Z,v[10]=X,v[11]=K,v[12]=ee,v[13]=xe,v[14]=ne,v[15]=Ee}function y(v,_){p(v,_,_)}function b(v,_){const g=n();for(let l=0;l<16;l++)g[l]=_[l];for(let l=253;l>=0;l--)y(g,g),l!==2&&l!==4&&p(g,g,_);for(let l=0;l<16;l++)v[l]=g[l]}function E(v,_){const g=new Uint8Array(32),l=new Float64Array(80),m=n(),P=n(),N=n(),z=n(),W=n(),G=n();for(let Y=0;Y<31;Y++)g[Y]=v[Y];g[31]=v[31]&127|64,g[0]&=248,u(l,_);for(let Y=0;Y<16;Y++)P[Y]=l[Y];m[0]=z[0]=1;for(let Y=254;Y>=0;--Y){const Z=g[Y>>>3]>>>(Y&7)&1;a(m,P,Z),a(N,z,Z),d(W,m,N),f(m,m,N),d(N,P,z),f(P,P,z),y(z,W),y(G,m),p(m,N,m),p(N,P,W),d(W,m,N),f(m,m,N),y(P,m),f(N,z,G),p(m,N,s),d(m,m,z),p(N,N,m),p(m,z,G),p(z,P,l),y(P,W),a(m,P,Z),a(N,z,Z)}for(let Y=0;Y<16;Y++)l[Y+16]=m[Y],l[Y+32]=N[Y],l[Y+48]=P[Y],l[Y+64]=z[Y];const $=l.subarray(32),j=l.subarray(16);b($,$),p(j,j,$);const oe=new Uint8Array(32);return c(oe,j),oe}t.scalarMult=E;function x(v){return E(v,i)}t.scalarMultBase=x;function I(v){if(v.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const _=new Uint8Array(v);return{publicKey:x(_),secretKey:_}}t.generateKeyPairFromSeed=I;function w(v){const _=(0,e.randomBytes)(32,v),g=I(_);return(0,r.wipe)(_),g}t.generateKeyPair=w;function C(v,_,g=!1){if(v.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(_.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const l=E(v,_);if(g){let m=0;for(let P=0;P<l.length;P++)m|=l[P];if(m===0)throw new Error("X25519: invalid shared key")}return l}t.sharedKey=C})(_c);var Qd=globalThis&&globalThis.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},_y=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),Ey=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Sy=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),xy=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Cy=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Oy=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Dy=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Yd=3,Iy=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Oy]],Jd=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Ay(t){return t?Xd(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Cy:typeof navigator<"u"?Xd(navigator.userAgent):Py()}function Ty(t){return t!==""&&Iy.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function Xd(t){var e=Ty(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new xy;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<Yd&&(i=Qd(Qd([],i,!0),Ny(Yd-i.length),!0)):i=[];var s=i.join("."),o=Ry(t),a=Dy.exec(t);return a&&a[1]?new Sy(r,s,o,a[1]):new _y(r,s,o)}function Ry(t){for(var e=0,r=Jd.length;e<r;e++){var n=Jd[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function Py(){var t=typeof process<"u"&&process.version;return t?new Ey(process.version.slice(1)):null}function Ny(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Et={};Object.defineProperty(Et,"__esModule",{value:!0}),Et.getLocalStorage=Et.getLocalStorageOrThrow=Et.getCrypto=Et.getCryptoOrThrow=th=Et.getLocation=Et.getLocationOrThrow=Ec=Et.getNavigator=Et.getNavigatorOrThrow=eh=Et.getDocument=Et.getDocumentOrThrow=Et.getFromWindowOrThrow=Et.getFromWindow=void 0;function ni(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Et.getFromWindow=ni;function Ti(t){const e=ni(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Et.getFromWindowOrThrow=Ti;function $y(){return Ti("document")}Et.getDocumentOrThrow=$y;function Ly(){return ni("document")}var eh=Et.getDocument=Ly;function My(){return Ti("navigator")}Et.getNavigatorOrThrow=My;function ky(){return ni("navigator")}var Ec=Et.getNavigator=ky;function Uy(){return Ti("location")}Et.getLocationOrThrow=Uy;function Fy(){return ni("location")}var th=Et.getLocation=Fy;function jy(){return Ti("crypto")}Et.getCryptoOrThrow=jy;function By(){return ni("crypto")}Et.getCrypto=By;function qy(){return Ti("localStorage")}Et.getLocalStorageOrThrow=qy;function zy(){return ni("localStorage")}Et.getLocalStorage=zy;var Sc={};Object.defineProperty(Sc,"__esModule",{value:!0});var rh=Sc.getWindowMetadata=void 0;const nh=Et;function Wy(){let t,e;try{t=nh.getDocumentOrThrow(),e=nh.getLocationOrThrow()}catch{return null}function r(){const f=t.getElementsByTagName("link"),p=[];for(let y=0;y<f.length;y++){const b=f[y],E=b.getAttribute("rel");if(E&&E.toLowerCase().indexOf("icon")>-1){const x=b.getAttribute("href");if(x)if(x.toLowerCase().indexOf("https:")===-1&&x.toLowerCase().indexOf("http:")===-1&&x.indexOf("//")!==0){let I=e.protocol+"//"+e.host;if(x.indexOf("/")===0)I+=x;else{const w=e.pathname.split("/");w.pop();const C=w.join("/");I+=C+"/"+x}p.push(I)}else if(x.indexOf("//")===0){const I=e.protocol+x;p.push(I)}else p.push(x)}}return p}function n(...f){const p=t.getElementsByTagName("meta");for(let y=0;y<p.length;y++){const b=p[y],E=["itemprop","property","name"].map(x=>b.getAttribute(x)).filter(x=>x?f.includes(x):!1);if(E.length&&E){const x=b.getAttribute("content");if(x)return x}}return""}function i(){let f=n("name","og:site_name","og:title","twitter:title");return f||(f=t.title),f}function s(){return n("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=e.origin,u=r();return{description:a,url:c,icons:u,name:o}}rh=Sc.getWindowMetadata=Wy;var ms={},Vy=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),ih="%[a-f0-9]{2}",sh=new RegExp("("+ih+")|([^%]+?)","gi"),oh=new RegExp("("+ih+")+","gi");function xc(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],xc(r),xc(n))}function Hy(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(sh)||[],r=1;r<e.length;r++)t=xc(e,r).join(""),e=t.match(sh)||[];return t}}function Ky(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=oh.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=Hy(r[0]);n!==r[0]&&(e[r[0]]=n)}r=oh.exec(t)}e["%C2"]="�";for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];t=t.replace(new RegExp(o,"g"),e[o])}return t}var Zy=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return Ky(t)}},Gy=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},Qy=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var o=n[s],a=t[o];(i?e.indexOf(o)!==-1:e(o,a,t))&&(r[o]=a)}return r};(function(t){const e=Vy,r=Zy,n=Gy,i=Qy,s=w=>w==null,o=Symbol("encodeFragmentIdentifier");function a(w){switch(w.arrayFormat){case"index":return C=>(v,_)=>{const g=v.length;return _===void 0||w.skipNull&&_===null||w.skipEmptyString&&_===""?v:_===null?[...v,[d(C,w),"[",g,"]"].join("")]:[...v,[d(C,w),"[",d(g,w),"]=",d(_,w)].join("")]};case"bracket":return C=>(v,_)=>_===void 0||w.skipNull&&_===null||w.skipEmptyString&&_===""?v:_===null?[...v,[d(C,w),"[]"].join("")]:[...v,[d(C,w),"[]=",d(_,w)].join("")];case"colon-list-separator":return C=>(v,_)=>_===void 0||w.skipNull&&_===null||w.skipEmptyString&&_===""?v:_===null?[...v,[d(C,w),":list="].join("")]:[...v,[d(C,w),":list=",d(_,w)].join("")];case"comma":case"separator":case"bracket-separator":{const C=w.arrayFormat==="bracket-separator"?"[]=":"=";return v=>(_,g)=>g===void 0||w.skipNull&&g===null||w.skipEmptyString&&g===""?_:(g=g===null?"":g,_.length===0?[[d(v,w),C,d(g,w)].join("")]:[[_,d(g,w)].join(w.arrayFormatSeparator)])}default:return C=>(v,_)=>_===void 0||w.skipNull&&_===null||w.skipEmptyString&&_===""?v:_===null?[...v,d(C,w)]:[...v,[d(C,w),"=",d(_,w)].join("")]}}function c(w){let C;switch(w.arrayFormat){case"index":return(v,_,g)=>{if(C=/\[(\d*)\]$/.exec(v),v=v.replace(/\[\d*\]$/,""),!C){g[v]=_;return}g[v]===void 0&&(g[v]={}),g[v][C[1]]=_};case"bracket":return(v,_,g)=>{if(C=/(\[\])$/.exec(v),v=v.replace(/\[\]$/,""),!C){g[v]=_;return}if(g[v]===void 0){g[v]=[_];return}g[v]=[].concat(g[v],_)};case"colon-list-separator":return(v,_,g)=>{if(C=/(:list)$/.exec(v),v=v.replace(/:list$/,""),!C){g[v]=_;return}if(g[v]===void 0){g[v]=[_];return}g[v]=[].concat(g[v],_)};case"comma":case"separator":return(v,_,g)=>{const l=typeof _=="string"&&_.includes(w.arrayFormatSeparator),m=typeof _=="string"&&!l&&f(_,w).includes(w.arrayFormatSeparator);_=m?f(_,w):_;const P=l||m?_.split(w.arrayFormatSeparator).map(N=>f(N,w)):_===null?_:f(_,w);g[v]=P};case"bracket-separator":return(v,_,g)=>{const l=/(\[\])$/.test(v);if(v=v.replace(/\[\]$/,""),!l){g[v]=_&&f(_,w);return}const m=_===null?[]:_.split(w.arrayFormatSeparator).map(P=>f(P,w));if(g[v]===void 0){g[v]=m;return}g[v]=[].concat(g[v],m)};default:return(v,_,g)=>{if(g[v]===void 0){g[v]=_;return}g[v]=[].concat(g[v],_)}}}function u(w){if(typeof w!="string"||w.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(w,C){return C.encode?C.strict?e(w):encodeURIComponent(w):w}function f(w,C){return C.decode?r(w):w}function p(w){return Array.isArray(w)?w.sort():typeof w=="object"?p(Object.keys(w)).sort((C,v)=>Number(C)-Number(v)).map(C=>w[C]):w}function y(w){const C=w.indexOf("#");return C!==-1&&(w=w.slice(0,C)),w}function b(w){let C="";const v=w.indexOf("#");return v!==-1&&(C=w.slice(v)),C}function E(w){w=y(w);const C=w.indexOf("?");return C===-1?"":w.slice(C+1)}function x(w,C){return C.parseNumbers&&!Number.isNaN(Number(w))&&typeof w=="string"&&w.trim()!==""?w=Number(w):C.parseBooleans&&w!==null&&(w.toLowerCase()==="true"||w.toLowerCase()==="false")&&(w=w.toLowerCase()==="true"),w}function I(w,C){C=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},C),u(C.arrayFormatSeparator);const v=c(C),_=Object.create(null);if(typeof w!="string"||(w=w.trim().replace(/^[?#&]/,""),!w))return _;for(const g of w.split("&")){if(g==="")continue;let[l,m]=n(C.decode?g.replace(/\+/g," "):g,"=");m=m===void 0?null:["comma","separator","bracket-separator"].includes(C.arrayFormat)?m:f(m,C),v(f(l,C),m,_)}for(const g of Object.keys(_)){const l=_[g];if(typeof l=="object"&&l!==null)for(const m of Object.keys(l))l[m]=x(l[m],C);else _[g]=x(l,C)}return C.sort===!1?_:(C.sort===!0?Object.keys(_).sort():Object.keys(_).sort(C.sort)).reduce((g,l)=>{const m=_[l];return m&&typeof m=="object"&&!Array.isArray(m)?g[l]=p(m):g[l]=m,g},Object.create(null))}t.extract=E,t.parse=I,t.stringify=(w,C)=>{if(!w)return"";C=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},C),u(C.arrayFormatSeparator);const v=m=>C.skipNull&&s(w[m])||C.skipEmptyString&&w[m]==="",_=a(C),g={};for(const m of Object.keys(w))v(m)||(g[m]=w[m]);const l=Object.keys(g);return C.sort!==!1&&l.sort(C.sort),l.map(m=>{const P=w[m];return P===void 0?"":P===null?d(m,C):Array.isArray(P)?P.length===0&&C.arrayFormat==="bracket-separator"?d(m,C)+"[]":P.reduce(_(m),[]).join("&"):d(m,C)+"="+d(P,C)}).filter(m=>m.length>0).join("&")},t.parseUrl=(w,C)=>{C=Object.assign({decode:!0},C);const[v,_]=n(w,"#");return Object.assign({url:v.split("?")[0]||"",query:I(E(w),C)},C&&C.parseFragmentIdentifier&&_?{fragmentIdentifier:f(_,C)}:{})},t.stringifyUrl=(w,C)=>{C=Object.assign({encode:!0,strict:!0,[o]:!0},C);const v=y(w.url).split("?")[0]||"",_=t.extract(w.url),g=t.parse(_,{sort:!1}),l=Object.assign(g,w.query);let m=t.stringify(l,C);m&&(m=`?${m}`);let P=b(w.url);return w.fragmentIdentifier&&(P=`#${C[o]?d(w.fragmentIdentifier,C):w.fragmentIdentifier}`),`${v}${m}${P}`},t.pick=(w,C,v)=>{v=Object.assign({parseFragmentIdentifier:!0,[o]:!1},v);const{url:_,query:g,fragmentIdentifier:l}=t.parseUrl(w,v);return t.stringifyUrl({url:_,query:i(g,C),fragmentIdentifier:l},v)},t.exclude=(w,C,v)=>{const _=Array.isArray(C)?g=>!C.includes(g):(g,l)=>!C(g,l);return t.pick(w,_,v)}})(ms);const Yy={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function ah(t,e){return t.includes(":")?[t]:e.chains||[]}const ch="base10",vr="base16",Cc="base64pad",Oc="utf8",lh=0,ii=1,Jy=0,uh=1,Dc=12,Ic=32;function Xy(){const t=_c.generateKeyPair();return{privateKey:yr(t.secretKey,vr),publicKey:yr(t.publicKey,vr)}}function Ac(){const t=Ai.randomBytes(Ic);return yr(t,vr)}function ev(t,e){const r=_c.sharedKey(Cr(t,vr),Cr(e,vr)),n=new by(Uo.SHA256,r).expand(Ic);return yr(n,vr)}function tv(t){const e=Uo.hash(Cr(t,vr));return yr(e,vr)}function Ri(t){const e=Uo.hash(Cr(t,Oc));return yr(e,vr)}function rv(t){return Cr(`${t}`,ch)}function ys(t){return Number(yr(t,ch))}function nv(t){const e=rv(typeof t.type<"u"?t.type:lh);if(ys(e)===ii&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Cr(t.senderPublicKey,vr):void 0,n=typeof t.iv<"u"?Cr(t.iv,vr):Ai.randomBytes(Dc),i=new vc.ChaCha20Poly1305(Cr(t.symKey,vr)).seal(n,Cr(t.message,Oc));return sv({type:e,sealed:i,iv:n,senderPublicKey:r})}function iv(t){const e=new vc.ChaCha20Poly1305(Cr(t.symKey,vr)),{sealed:r,iv:n}=Fo(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return yr(i,Oc)}function sv(t){if(ys(t.type)===ii){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return yr(mc([t.type,t.senderPublicKey,t.iv,t.sealed]),Cc)}return yr(mc([t.type,t.iv,t.sealed]),Cc)}function Fo(t){const e=Cr(t,Cc),r=e.slice(Jy,uh),n=uh;if(ys(r)===ii){const a=n+Ic,c=a+Dc,u=e.slice(n,a),d=e.slice(a,c),f=e.slice(c);return{type:r,sealed:f,iv:d,senderPublicKey:u}}const i=n+Dc,s=e.slice(n,i),o=e.slice(i);return{type:r,sealed:o,iv:s}}function ov(t,e){const r=Fo(t);return dh({type:ys(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?yr(r.senderPublicKey,vr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function dh(t){const e=(t==null?void 0:t.type)||lh;if(e===ii){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function hh(t){return t.type===ii&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var av=Object.defineProperty,fh=Object.getOwnPropertySymbols,cv=Object.prototype.hasOwnProperty,lv=Object.prototype.propertyIsEnumerable,ph=(t,e,r)=>e in t?av(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gh=(t,e)=>{for(var r in e||(e={}))cv.call(e,r)&&ph(t,r,e[r]);if(fh)for(var r of fh(e))lv.call(e,r)&&ph(t,r,e[r]);return t};const uv="ReactNative",$r={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},dv="js";function Tc(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function jo(){return!eh()&&!!Ec()&&navigator.product===uv}function vs(){return!Tc()&&!!Ec()}function ws(){return jo()?$r.reactNative:Tc()?$r.node:vs()?$r.browser:$r.unknown}function hv(t,e){let r=ms.parse(t);return r=gh(gh({},r),e),t=ms.stringify(r),t}function fv(){return rh()||{name:"",description:"",url:"",icons:[""]}}function pv(){if(ws()===$r.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=Ay();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function gv(){var t;const e=ws();return e===$r.browser?[e,((t=th())==null?void 0:t.host)||"unknown"].join(":"):e}function mv(t,e,r){const n=pv(),i=gv();return[[t,e].join("-"),[dv,r].join("-"),n,i].join("/")}function yv({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o}){const a=r.split("?"),c=mv(t,e,n),u={auth:i,ua:c,projectId:s,useOnCloseEvent:o||void 0},d=hv(a[1]||"",u);return a[0]+"?"+d}function si(t,e){return t.filter(r=>e.includes(r)).length===t.length}function mh(t){return Object.fromEntries(t.entries())}function yh(t){return new Map(Object.entries(t))}function Pi(t=ye.FIVE_MINUTES,e){const r=ye.toMiliseconds(t||ye.FIVE_MINUTES);let n,i,s;return{resolve:o=>{s&&n&&(clearTimeout(s),n(o))},reject:o=>{s&&i&&(clearTimeout(s),i(o))},done:()=>new Promise((o,a)=>{s=setTimeout(()=>{a(new Error(e))},r),n=o,i=a})}}function bs(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function vh(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function vv(t){return vh("topic",t)}function wv(t){return vh("id",t)}function wh(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Hr(t,e){return ye.fromMiliseconds((e||Date.now())+ye.toMiliseconds(t))}function Rn(t){return Date.now()>=ye.toMiliseconds(t)}function Ht(t,e){return`${t}${e?`:${e}`:""}`}async function bv({id:t,topic:e,wcDeepLink:r}){try{if(!r)return;const n=typeof r=="string"?JSON.parse(r):r;let i=n==null?void 0:n.href;if(typeof i!="string")return;i.endsWith("/")&&(i=i.slice(0,-1));const s=`${i}/wc?requestId=${t}&sessionTopic=${e}`,o=ws();o===$r.browser?s.startsWith("https://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):o===$r.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(n){console.error(n)}}const _v="irn";function Rc(t){return(t==null?void 0:t.relay)||{protocol:_v}}function Bo(t){const e=Yy[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var Ev=Object.defineProperty,bh=Object.getOwnPropertySymbols,Sv=Object.prototype.hasOwnProperty,xv=Object.prototype.propertyIsEnumerable,_h=(t,e,r)=>e in t?Ev(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Cv=(t,e)=>{for(var r in e||(e={}))Sv.call(e,r)&&_h(t,r,e[r]);if(bh)for(var r of bh(e))xv.call(e,r)&&_h(t,r,e[r]);return t};function Ov(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function Dv(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=ms.parse(s);return{protocol:n,topic:Iv(i[0]),version:parseInt(i[1],10),symKey:o.symKey,relay:Ov(o)}}function Iv(t){return t.startsWith("//")?t.substring(2):t}function Av(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=r+e+i;t[i]&&(n[s]=t[i])}),n}function Tv(t){return`${t.protocol}:${t.topic}@${t.version}?`+ms.stringify(Cv({symKey:t.symKey},Av(t.relay)))}function Ni(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function Rv(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Ni(r.accounts))}),e}function Pv(t,e){const r=[];return Object.values(t).forEach(n=>{Ni(n.accounts).includes(e)&&r.push(...n.methods)}),r}function Nv(t,e){const r=[];return Object.values(t).forEach(n=>{Ni(n.accounts).includes(e)&&r.push(...n.events)}),r}function $v(t,e){const r=zo(t,e);if(r)throw new Error(r.message);const n={};for(const[i,s]of Object.entries(t))n[i]={methods:s.methods,events:s.events,chains:s.accounts.map(o=>`${o.split(":")[0]}:${o.split(":")[1]}`)};return n}const Lv={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Mv={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function de(t,e){const{message:r,code:n}=Mv[t];return{message:e?`${r} ${e}`:r,code:n}}function Xt(t,e){const{message:r,code:n}=Lv[t];return{message:e?`${r} ${e}`:r,code:n}}function _s(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Es(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function wr(t){return typeof t>"u"}function er(t,e){return e&&wr(t)?!0:typeof t=="string"&&!!t.trim().length}function Pc(t,e){return e&&wr(t)?!0:typeof t=="number"&&!isNaN(t)}function kv(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return si(i,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:u}=t.namespaces[o],d=Ni(a),f=r[o];(!si(ah(o,f),d)||!si(f.methods,c)||!si(f.events,u))&&(s=!1)}),s):!1}function qo(t){return er(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Uv(t){if(er(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&qo(r)}}return!1}function Fv(t){if(er(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function jv(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function Bv(t){return t==null?void 0:t.topic}function qv(t,e){let r=null;return er(t==null?void 0:t.publicKey,!1)||(r=de("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function Eh(t){let e=!0;return _s(t)?t.length&&(e=t.every(r=>er(r,!1))):e=!1,e}function zv(t,e,r){let n=null;return _s(e)&&e.length?e.forEach(i=>{n||qo(i)||(n=Xt("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):qo(t)||(n=Xt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function Wv(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=zv(i,ah(i,s),`${e} ${r}`);o&&(n=o)}),n}function Vv(t,e){let r=null;return _s(t)?t.forEach(n=>{r||Uv(n)||(r=Xt("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=Xt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Hv(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Vv(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function Kv(t,e){let r=null;return Eh(t==null?void 0:t.methods)?Eh(t==null?void 0:t.events)||(r=Xt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Xt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function Sh(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Kv(n,`${e}, namespace`);i&&(r=i)}),r}function Zv(t,e,r){let n=null;if(t&&Es(t)){const i=Sh(t,e);i&&(n=i);const s=Wv(t,e,r);s&&(n=s)}else n=de("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function zo(t,e){let r=null;if(t&&Es(t)){const n=Sh(t,e);n&&(r=n);const i=Hv(t,e);i&&(r=i)}else r=de("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function xh(t){return er(t.protocol,!0)}function Gv(t,e){let r=!1;return e&&!t?r=!0:t&&_s(t)&&t.length&&t.forEach(n=>{r=xh(n)}),r}function Qv(t){return typeof t=="number"}function Or(t){return typeof t<"u"&&typeof t!==null}function Yv(t){return!(!t||typeof t!="object"||!t.code||!Pc(t.code,!1)||!t.message||!er(t.message,!1))}function Jv(t){return!(wr(t)||!er(t.method,!1))}function Xv(t){return!(wr(t)||wr(t.result)&&wr(t.error)||!Pc(t.id,!1)||!er(t.jsonrpc,!1))}function ew(t){return!(wr(t)||!er(t.name,!1))}function Ch(t,e){return!(!qo(e)||!Rv(t).includes(e))}function tw(t,e,r){return er(r,!1)?Pv(t,e).includes(r):!1}function rw(t,e,r){return er(r,!1)?Nv(t,e).includes(r):!1}function Oh(t,e,r){let n=null;const i=nw(t),s=iw(e),o=Object.keys(i),a=Object.keys(s),c=Dh(Object.keys(t)),u=Dh(Object.keys(e)),d=c.filter(f=>!u.includes(f));return d.length&&(n=de("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${d.toString()}
      Received: ${Object.keys(e).toString()}`)),si(o,a)||(n=de("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(f=>{if(!f.includes(":")||n)return;const p=Ni(e[f].accounts);p.includes(f)||(n=de("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${f}
        Required: ${f}
        Approved: ${p.toString()}`))}),o.forEach(f=>{n||(si(i[f].methods,s[f].methods)?si(i[f].events,s[f].events)||(n=de("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${f}`)):n=de("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${f}`))}),n}function nw(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function Dh(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function iw(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=Ni(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function sw(t,e){return Pc(t,!1)&&t<=e.max&&t>=e.min}function Ih(){const t=ws();return new Promise(e=>{switch(t){case $r.browser:e(ow());break;case $r.reactNative:e(aw());break;case $r.node:e(cw());break;default:e(!0)}})}function ow(){return vs()&&(navigator==null?void 0:navigator.onLine)}async function aw(){if(jo()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function cw(){return!0}function lw(t){switch(ws()){case $r.browser:uw(t);break;case $r.reactNative:dw(t);break}}function uw(t){vs()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function dw(t){jo()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const Nc={};let Wo=class{static get(e){return Nc[e]}static set(e,r){Nc[e]=r}static delete(e){delete Nc[e]}};const hw="PARSE_ERROR",fw="INVALID_REQUEST",pw="METHOD_NOT_FOUND",gw="INVALID_PARAMS",Ah="INTERNAL_ERROR",$c="SERVER_ERROR",mw=[-32700,-32600,-32601,-32602,-32603],Ss={[hw]:{code:-32700,message:"Parse error"},[fw]:{code:-32600,message:"Invalid Request"},[pw]:{code:-32601,message:"Method not found"},[gw]:{code:-32602,message:"Invalid params"},[Ah]:{code:-32603,message:"Internal error"},[$c]:{code:-32e3,message:"Server error"}},Th=$c;function yw(t){return mw.includes(t)}function Rh(t){return Object.keys(Ss).includes(t)?Ss[t]:Ss[Th]}function vw(t){const e=Object.values(Ss).find(r=>r.code===t);return e||Ss[Th]}function ww(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var Ph={},gn={},Nh;function bw(){if(Nh)return gn;Nh=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.isBrowserCryptoAvailable=gn.getSubtleCrypto=gn.getBrowerCrypto=void 0;function t(){return(rn==null?void 0:rn.crypto)||(rn==null?void 0:rn.msCrypto)||{}}gn.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}gn.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return gn.isBrowserCryptoAvailable=r,gn}var mn={},$h;function _w(){if($h)return mn;$h=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.isBrowser=mn.isNode=mn.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}mn.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}mn.isNode=e;function r(){return!t()&&!e()}return mn.isBrowser=r,mn}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nn;e.__exportStar(bw(),t),e.__exportStar(_w(),t)})(Ph);function Lc(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Lh(t=6){return BigInt(Lc(t))}function xs(t,e,r){return{id:r||Lc(),jsonrpc:"2.0",method:t,params:e}}function Mc(t,e){return{id:t,jsonrpc:"2.0",result:e}}function kc(t,e,r){return{id:t,jsonrpc:"2.0",error:Ew(e,r)}}function Ew(t,e){return typeof t>"u"?Rh(Ah):(typeof t=="string"&&(t=Object.assign(Object.assign({},Rh($c)),{message:t})),typeof e<"u"&&(t.data=e),yw(t.code)&&(t=vw(t.code)),t)}class Sw{}class xw extends Sw{constructor(){super()}}class Cw extends xw{constructor(e){super()}}const Ow="^wss?:";function Dw(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Iw(t,e){const r=Dw(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function Mh(t){return Iw(t,Ow)}function Aw(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function kh(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Uc(t){return kh(t)&&"method"in t}function Vo(t){return kh(t)&&(yn(t)||Kr(t))}function yn(t){return"result"in t}function Kr(t){return"error"in t}class Tw extends Cw{constructor(e){super(e),this.events=new Ur.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(xs(e.method,e.params||[],e.id||Lh().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Kr(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Vo(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Rw=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Pw=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Uh=t=>t.split("?")[0],Fh=10,Nw=Rw();class $w{constructor(e){if(this.url=e,this.events=new Ur.EventEmitter,this.registering=!1,!Mh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(lc(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!Mh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=Ph.isReactNative()?void 0:{rejectUnauthorized:!Aw(e)},s=new Nw(e,[],i);Pw()?s.onerror=o=>{const a=o;n(this.emitError(a.error))}:s.on("error",o=>{n(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Ed(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=kc(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return ww(e,Uh(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Fh&&this.events.setMaxListeners(Fh)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Uh(this.url)}`));return this.events.emit("register_error",r),r}}var Ho={exports:{}};Ho.exports,function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",d="[object Boolean]",f="[object Date]",p="[object Error]",y="[object Function]",b="[object GeneratorFunction]",E="[object Map]",x="[object Number]",I="[object Null]",w="[object Object]",C="[object Promise]",v="[object Proxy]",_="[object RegExp]",g="[object Set]",l="[object String]",m="[object Symbol]",P="[object Undefined]",N="[object WeakMap]",z="[object ArrayBuffer]",W="[object DataView]",G="[object Float32Array]",$="[object Float64Array]",j="[object Int8Array]",oe="[object Int16Array]",Y="[object Int32Array]",Z="[object Uint8Array]",X="[object Uint8ClampedArray]",K="[object Uint16Array]",ee="[object Uint32Array]",xe=/[\\^$.*+?()[\]{}|]/g,ne=/^\[object .+?Constructor\]$/,Ee=/^(?:0|[1-9]\d*)$/,fe={};fe[G]=fe[$]=fe[j]=fe[oe]=fe[Y]=fe[Z]=fe[X]=fe[K]=fe[ee]=!0,fe[a]=fe[c]=fe[z]=fe[d]=fe[W]=fe[f]=fe[p]=fe[y]=fe[E]=fe[x]=fe[w]=fe[_]=fe[g]=fe[l]=fe[N]=!1;var _e=typeof rn=="object"&&rn&&rn.Object===Object&&rn,q=typeof self=="object"&&self&&self.Object===Object&&self,B=_e||q||Function("return this")(),M=e&&!e.nodeType&&e,h=M&&!0&&t&&!t.nodeType&&t,R=h&&h.exports===M,ce=R&&_e.process,he=function(){try{return ce&&ce.binding&&ce.binding("util")}catch{}}(),We=he&&he.isTypedArray;function Ie(O,k){for(var Q=-1,me=O==null?0:O.length,Dt=0,ze=[];++Q<me;){var Wt=O[Q];k(Wt,Q,O)&&(ze[Dt++]=Wt)}return ze}function Me(O,k){for(var Q=-1,me=k.length,Dt=O.length;++Q<me;)O[Dt+Q]=k[Q];return O}function Xe(O,k){for(var Q=-1,me=O==null?0:O.length;++Q<me;)if(k(O[Q],Q,O))return!0;return!1}function pt(O,k){for(var Q=-1,me=Array(O);++Q<O;)me[Q]=k(Q);return me}function dt(O){return function(k){return O(k)}}function Ve(O,k){return O.has(k)}function Be(O,k){return O==null?void 0:O[k]}function Ne(O){var k=-1,Q=Array(O.size);return O.forEach(function(me,Dt){Q[++k]=[Dt,me]}),Q}function ke(O,k){return function(Q){return O(k(Q))}}function $e(O){var k=-1,Q=Array(O.size);return O.forEach(function(me){Q[++k]=me}),Q}var Te=Array.prototype,Ae=Function.prototype,Se=Object.prototype,Ue=B["__core-js_shared__"],qe=Ae.toString,De=Se.hasOwnProperty,He=function(){var O=/[^.]+$/.exec(Ue&&Ue.keys&&Ue.keys.IE_PROTO||"");return O?"Symbol(src)_1."+O:""}(),et=Se.toString,nt=RegExp("^"+qe.call(De).replace(xe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=R?B.Buffer:void 0,it=B.Symbol,Sr=B.Uint8Array,fr=Se.propertyIsEnumerable,Mr=Te.splice,Gt=it?it.toStringTag:void 0,Qt=Object.getOwnPropertySymbols,Ar=tt?tt.isBuffer:void 0,hn=ke(Object.keys,Object),wt=ft(B,"DataView"),bt=ft(B,"Map"),At=ft(B,"Promise"),xt=ft(B,"Set"),Tt=ft(B,"WeakMap"),_t=ft(Object,"create"),Mt=Si(wt),jt=Si(bt),Bt=Si(At),kt=Si(xt),qt=Si(Tt),Rt=it?it.prototype:void 0,Pt=Rt?Rt.valueOf:void 0;function yt(O){var k=-1,Q=O==null?0:O.length;for(this.clear();++k<Q;){var me=O[k];this.set(me[0],me[1])}}function T(){this.__data__=_t?_t(null):{},this.size=0}function H(O){var k=this.has(O)&&delete this.__data__[O];return this.size-=k?1:0,k}function ue(O){var k=this.__data__;if(_t){var Q=k[O];return Q===n?void 0:Q}return De.call(k,O)?k[O]:void 0}function Ce(O){var k=this.__data__;return _t?k[O]!==void 0:De.call(k,O)}function st(O,k){var Q=this.__data__;return this.size+=this.has(O)?0:1,Q[O]=_t&&k===void 0?n:k,this}yt.prototype.clear=T,yt.prototype.delete=H,yt.prototype.get=ue,yt.prototype.has=Ce,yt.prototype.set=st;function Ge(O){var k=-1,Q=O==null?0:O.length;for(this.clear();++k<Q;){var me=O[k];this.set(me[0],me[1])}}function Je(){this.__data__=[],this.size=0}function Ke(O){var k=this.__data__,Q=D(k,O);if(Q<0)return!1;var me=k.length-1;return Q==me?k.pop():Mr.call(k,Q,1),--this.size,!0}function Yt(O){var k=this.__data__,Q=D(k,O);return Q<0?void 0:k[Q][1]}function Ct(O){return D(this.__data__,O)>-1}function Nt(O,k){var Q=this.__data__,me=D(Q,O);return me<0?(++this.size,Q.push([O,k])):Q[me][1]=k,this}Ge.prototype.clear=Je,Ge.prototype.delete=Ke,Ge.prototype.get=Yt,Ge.prototype.has=Ct,Ge.prototype.set=Nt;function zt(O){var k=-1,Q=O==null?0:O.length;for(this.clear();++k<Q;){var me=O[k];this.set(me[0],me[1])}}function fn(){this.size=0,this.__data__={hash:new yt,map:new(bt||Ge),string:new yt}}function Ei(O){var k=Ot(this,O).delete(O);return this.size-=k?1:0,k}function sr(O){return Ot(this,O).get(O)}function ja(O){return Ot(this,O).has(O)}function Kn(O,k){var Q=Ot(this,O),me=Q.size;return Q.set(O,k),this.size+=Q.size==me?0:1,this}zt.prototype.clear=fn,zt.prototype.delete=Ei,zt.prototype.get=sr,zt.prototype.has=ja,zt.prototype.set=Kn;function is(O){var k=-1,Q=O==null?0:O.length;for(this.__data__=new zt;++k<Q;)this.add(O[k])}function ss(O){return this.__data__.set(O,n),this}function vo(O){return this.__data__.has(O)}is.prototype.add=is.prototype.push=ss,is.prototype.has=vo;function pn(O){var k=this.__data__=new Ge(O);this.size=k.size}function Ou(){this.__data__=new Ge,this.size=0}function wo(O){var k=this.__data__,Q=k.delete(O);return this.size=k.size,Q}function Du(O){return this.__data__.get(O)}function Iu(O){return this.__data__.has(O)}function S(O,k){var Q=this.__data__;if(Q instanceof Ge){var me=Q.__data__;if(!bt||me.length<r-1)return me.push([O,k]),this.size=++Q.size,this;Q=this.__data__=new zt(me)}return Q.set(O,k),this.size=Q.size,this}pn.prototype.clear=Ou,pn.prototype.delete=wo,pn.prototype.get=Du,pn.prototype.has=Iu,pn.prototype.set=S;function A(O,k){var Q=qa(O),me=!Q&&Fx(O),Dt=!Q&&!me&&Ru(O),ze=!Q&&!me&&!Dt&&K0(O),Wt=Q||me||Dt||ze,rr=Wt?pt(O.length,String):[],or=rr.length;for(var Ut in O)(k||De.call(O,Ut))&&!(Wt&&(Ut=="length"||Dt&&(Ut=="offset"||Ut=="parent")||ze&&(Ut=="buffer"||Ut=="byteLength"||Ut=="byteOffset")||Au(Ut,or)))&&rr.push(Ut);return rr}function D(O,k){for(var Q=O.length;Q--;)if(z0(O[Q][0],k))return Q;return-1}function U(O,k,Q){var me=k(O);return qa(O)?me:Me(me,Q(O))}function L(O){return O==null?O===void 0?P:I:Gt&&Gt in Object(O)?Tr(O):Ux(O)}function F(O){return _o(O)&&L(O)==a}function V(O,k,Q,me,Dt){return O===k?!0:O==null||k==null||!_o(O)&&!_o(k)?O!==O&&k!==k:te(O,k,Q,me,V,Dt)}function te(O,k,Q,me,Dt,ze){var Wt=qa(O),rr=qa(k),or=Wt?c:zr(O),Ut=rr?c:zr(k);or=or==a?w:or,Ut=Ut==a?w:Ut;var kr=or==w,Xr=Ut==w,pr=or==Ut;if(pr&&Ru(O)){if(!Ru(k))return!1;Wt=!0,kr=!1}if(pr&&!kr)return ze||(ze=new pn),Wt||K0(O)?ve(O,k,Q,me,Dt,ze):Qe(O,k,or,Q,me,Dt,ze);if(!(Q&i)){var Wr=kr&&De.call(O,"__wrapped__"),Vr=Xr&&De.call(k,"__wrapped__");if(Wr||Vr){var Zn=Wr?O.value():O,Cn=Vr?k.value():k;return ze||(ze=new pn),Dt(Zn,Cn,Q,me,ze)}}return pr?(ze||(ze=new pn),gt(O,k,Q,me,Dt,ze)):!1}function se(O){if(!H0(O)||Ba(O))return!1;var k=W0(O)?nt:ne;return k.test(Si(O))}function ie(O){return _o(O)&&V0(O.length)&&!!fe[L(O)]}function re(O){if(!kx(O))return hn(O);var k=[];for(var Q in Object(O))De.call(O,Q)&&Q!="constructor"&&k.push(Q);return k}function ve(O,k,Q,me,Dt,ze){var Wt=Q&i,rr=O.length,or=k.length;if(rr!=or&&!(Wt&&or>rr))return!1;var Ut=ze.get(O);if(Ut&&ze.get(k))return Ut==k;var kr=-1,Xr=!0,pr=Q&s?new is:void 0;for(ze.set(O,k),ze.set(k,O);++kr<rr;){var Wr=O[kr],Vr=k[kr];if(me)var Zn=Wt?me(Vr,Wr,kr,k,O,ze):me(Wr,Vr,kr,O,k,ze);if(Zn!==void 0){if(Zn)continue;Xr=!1;break}if(pr){if(!Xe(k,function(Cn,xi){if(!Ve(pr,xi)&&(Wr===Cn||Dt(Wr,Cn,Q,me,ze)))return pr.push(xi)})){Xr=!1;break}}else if(!(Wr===Vr||Dt(Wr,Vr,Q,me,ze))){Xr=!1;break}}return ze.delete(O),ze.delete(k),Xr}function Qe(O,k,Q,me,Dt,ze,Wt){switch(Q){case W:if(O.byteLength!=k.byteLength||O.byteOffset!=k.byteOffset)return!1;O=O.buffer,k=k.buffer;case z:return!(O.byteLength!=k.byteLength||!ze(new Sr(O),new Sr(k)));case d:case f:case x:return z0(+O,+k);case p:return O.name==k.name&&O.message==k.message;case _:case l:return O==k+"";case E:var rr=Ne;case g:var or=me&i;if(rr||(rr=$e),O.size!=k.size&&!or)return!1;var Ut=Wt.get(O);if(Ut)return Ut==k;me|=s,Wt.set(O,k);var kr=ve(rr(O),rr(k),me,Dt,ze,Wt);return Wt.delete(O),kr;case m:if(Pt)return Pt.call(O)==Pt.call(k)}return!1}function gt(O,k,Q,me,Dt,ze){var Wt=Q&i,rr=lt(O),or=rr.length,Ut=lt(k),kr=Ut.length;if(or!=kr&&!Wt)return!1;for(var Xr=or;Xr--;){var pr=rr[Xr];if(!(Wt?pr in k:De.call(k,pr)))return!1}var Wr=ze.get(O);if(Wr&&ze.get(k))return Wr==k;var Vr=!0;ze.set(O,k),ze.set(k,O);for(var Zn=Wt;++Xr<or;){pr=rr[Xr];var Cn=O[pr],xi=k[pr];if(me)var Z0=Wt?me(xi,Cn,pr,k,O,ze):me(Cn,xi,pr,O,k,ze);if(!(Z0===void 0?Cn===xi||Dt(Cn,xi,Q,me,ze):Z0)){Vr=!1;break}Zn||(Zn=pr=="constructor")}if(Vr&&!Zn){var za=O.constructor,Wa=k.constructor;za!=Wa&&"constructor"in O&&"constructor"in k&&!(typeof za=="function"&&za instanceof za&&typeof Wa=="function"&&Wa instanceof Wa)&&(Vr=!1)}return ze.delete(O),ze.delete(k),Vr}function lt(O){return U(O,qx,bo)}function Ot(O,k){var Q=O.__data__;return Tu(k)?Q[typeof k=="string"?"string":"hash"]:Q.map}function ft(O,k){var Q=Be(O,k);return se(Q)?Q:void 0}function Tr(O){var k=De.call(O,Gt),Q=O[Gt];try{O[Gt]=void 0;var me=!0}catch{}var Dt=et.call(O);return me&&(k?O[Gt]=Q:delete O[Gt]),Dt}var bo=Qt?function(O){return O==null?[]:(O=Object(O),Ie(Qt(O),function(k){return fr.call(O,k)}))}:zx,zr=L;(wt&&zr(new wt(new ArrayBuffer(1)))!=W||bt&&zr(new bt)!=E||At&&zr(At.resolve())!=C||xt&&zr(new xt)!=g||Tt&&zr(new Tt)!=N)&&(zr=function(O){var k=L(O),Q=k==w?O.constructor:void 0,me=Q?Si(Q):"";if(me)switch(me){case Mt:return W;case jt:return E;case Bt:return C;case kt:return g;case qt:return N}return k});function Au(O,k){return k=k??o,!!k&&(typeof O=="number"||Ee.test(O))&&O>-1&&O%1==0&&O<k}function Tu(O){var k=typeof O;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?O!=="__proto__":O===null}function Ba(O){return!!He&&He in O}function kx(O){var k=O&&O.constructor,Q=typeof k=="function"&&k.prototype||Se;return O===Q}function Ux(O){return et.call(O)}function Si(O){if(O!=null){try{return qe.call(O)}catch{}try{return O+""}catch{}}return""}function z0(O,k){return O===k||O!==O&&k!==k}var Fx=F(function(){return arguments}())?F:function(O){return _o(O)&&De.call(O,"callee")&&!fr.call(O,"callee")},qa=Array.isArray;function jx(O){return O!=null&&V0(O.length)&&!W0(O)}var Ru=Ar||Wx;function Bx(O,k){return V(O,k)}function W0(O){if(!H0(O))return!1;var k=L(O);return k==y||k==b||k==u||k==v}function V0(O){return typeof O=="number"&&O>-1&&O%1==0&&O<=o}function H0(O){var k=typeof O;return O!=null&&(k=="object"||k=="function")}function _o(O){return O!=null&&typeof O=="object"}var K0=We?dt(We):ie;function qx(O){return jx(O)?A(O):re(O)}function zx(){return[]}function Wx(){return!1}t.exports=Bx}(Ho,Ho.exports);var Lw=Ho.exports;const Mw=Co(Lw);function kw(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function f(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var E=0,x=0,I=0,w=b.length;I!==w&&b[I]===0;)I++,E++;for(var C=(w-I)*d+1>>>0,v=new Uint8Array(C);I!==w;){for(var _=b[I],g=0,l=C-1;(_!==0||g<x)&&l!==-1;l--,g++)_+=256*v[l]>>>0,v[l]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");x=g,I++}for(var m=C-x;m!==C&&v[m]===0;)m++;for(var P=c.repeat(E);m<C;++m)P+=t.charAt(v[m]);return P}function p(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var E=0;if(b[E]!==" "){for(var x=0,I=0;b[E]===c;)x++,E++;for(var w=(b.length-E)*u+1>>>0,C=new Uint8Array(w);b[E];){var v=r[b.charCodeAt(E)];if(v===255)return;for(var _=0,g=w-1;(v!==0||_<I)&&g!==-1;g--,_++)v+=a*C[g]>>>0,C[g]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");I=_,E++}if(b[E]!==" "){for(var l=w-I;l!==w&&C[l]===0;)l++;for(var m=new Uint8Array(x+(w-l)),P=x;l!==w;)m[P++]=C[l++];return m}}}function y(b){var E=p(b);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:p,decode:y}}var Uw=kw,Fw=Uw;const jh=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},jw=t=>new TextEncoder().encode(t),Bw=t=>new TextDecoder().decode(t);class qw{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class zw{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Bh(this,e)}}class Ww{constructor(e){this.decoders=e}or(e){return Bh(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Bh=(t,e)=>new Ww({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Vw{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new qw(e,r,n),this.decoder=new zw(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Ko=({name:t,prefix:e,encode:r,decode:n})=>new Vw(t,e,r,n),Cs=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Fw(r,e);return Ko({prefix:t,name:e,encode:n,decode:s=>jh(i(s))})},Hw=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let d=0;d<s;++d){const f=i[t[d]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Kw=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},ir=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Ko({prefix:e,name:t,encode(i){return Kw(i,n,r)},decode(i){return Hw(i,n,r,t)}}),Zw=Ko({prefix:"\0",name:"identity",encode:t=>Bw(t),decode:t=>jw(t)});var Gw=Object.freeze({__proto__:null,identity:Zw});const Qw=ir({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Yw=Object.freeze({__proto__:null,base2:Qw});const Jw=ir({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Xw=Object.freeze({__proto__:null,base8:Jw});const eb=Cs({prefix:"9",name:"base10",alphabet:"0123456789"});var tb=Object.freeze({__proto__:null,base10:eb});const rb=ir({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),nb=ir({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ib=Object.freeze({__proto__:null,base16:rb,base16upper:nb});const sb=ir({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ob=ir({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ab=ir({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),cb=ir({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),lb=ir({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ub=ir({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),db=ir({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hb=ir({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),fb=ir({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var pb=Object.freeze({__proto__:null,base32:sb,base32upper:ob,base32pad:ab,base32padupper:cb,base32hex:lb,base32hexupper:ub,base32hexpad:db,base32hexpadupper:hb,base32z:fb});const gb=Cs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),mb=Cs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var yb=Object.freeze({__proto__:null,base36:gb,base36upper:mb});const vb=Cs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),wb=Cs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var bb=Object.freeze({__proto__:null,base58btc:vb,base58flickr:wb});const _b=ir({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Eb=ir({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Sb=ir({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),xb=ir({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Cb=Object.freeze({__proto__:null,base64:_b,base64pad:Eb,base64url:Sb,base64urlpad:xb});const qh=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Ob=qh.reduce((t,e,r)=>(t[r]=e,t),[]),Db=qh.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Ib(t){return t.reduce((e,r)=>(e+=Ob[r],e),"")}function Ab(t){const e=[];for(const r of t){const n=Db[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Tb=Ko({prefix:"🚀",name:"base256emoji",encode:Ib,decode:Ab});var Rb=Object.freeze({__proto__:null,base256emoji:Tb}),Pb=Wh,zh=128,Nb=127,$b=~Nb,Lb=Math.pow(2,31);function Wh(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Lb;)e[r++]=t&255|zh,t/=128;for(;t&$b;)e[r++]=t&255|zh,t>>>=7;return e[r]=t|0,Wh.bytes=r-n+1,e}var Mb=Fc,kb=128,Vh=127;function Fc(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Fc.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&Vh)<<i:(o&Vh)*Math.pow(2,i),i+=7}while(o>=kb);return Fc.bytes=s-n,r}var Ub=Math.pow(2,7),Fb=Math.pow(2,14),jb=Math.pow(2,21),Bb=Math.pow(2,28),qb=Math.pow(2,35),zb=Math.pow(2,42),Wb=Math.pow(2,49),Vb=Math.pow(2,56),Hb=Math.pow(2,63),Kb=function(t){return t<Ub?1:t<Fb?2:t<jb?3:t<Bb?4:t<qb?5:t<zb?6:t<Wb?7:t<Vb?8:t<Hb?9:10},Zb={encode:Pb,decode:Mb,encodingLength:Kb},Hh=Zb;const Kh=(t,e,r=0)=>(Hh.encode(t,e,r),e),Zh=t=>Hh.encodingLength(t),jc=(t,e)=>{const r=e.byteLength,n=Zh(t),i=n+Zh(r),s=new Uint8Array(i+r);return Kh(t,s,0),Kh(r,s,n),s.set(e,i),new Gb(t,r,e,s)};class Gb{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const Gh=({name:t,code:e,encode:r})=>new Qb(t,e,r);class Qb{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?jc(this.code,r):r.then(n=>jc(this.code,n))}else throw Error("Unknown type, must be binary type")}}const Qh=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Yb=Gh({name:"sha2-256",code:18,encode:Qh("SHA-256")}),Jb=Gh({name:"sha2-512",code:19,encode:Qh("SHA-512")});var Xb=Object.freeze({__proto__:null,sha256:Yb,sha512:Jb});const Yh=0,e2="identity",Jh=jh;var t2=Object.freeze({__proto__:null,identity:{code:Yh,name:e2,encode:Jh,digest:t=>jc(Yh,Jh(t))}});new TextEncoder,new TextDecoder;const Xh={...Gw,...Yw,...Xw,...tb,...ib,...pb,...yb,...bb,...Cb,...Rb};({...Xb,...t2});function ef(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function r2(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ef(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function tf(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const rf=tf("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Bc=tf("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=r2(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),n2={utf8:rf,"utf-8":rf,hex:Xh.base16,latin1:Bc,ascii:Bc,binary:Bc,...Xh};function i2(t,e="utf8"){const r=n2[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ef(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const nf="wc",s2=2,qc="core",Pn=`${nf}@2:${qc}:`,o2={name:qc,logger:"error"},a2={database:":memory:"},c2="crypto",sf="client_ed25519_seed",l2=ye.ONE_DAY,u2="keychain",d2="0.3",h2="messages",f2="0.3",p2=ye.SIX_HOURS,g2="publisher",of="irn",m2="error",af="wss://relay.walletconnect.com",cf="wss://relay.walletconnect.org",y2="relayer",lr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},v2="_subscription",vn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},w2=ye.ONE_SECOND,b2="2.10.0",_2=1e4,E2="0.3",S2="WALLETCONNECT_CLIENT_ID",on={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},x2="subscription",C2="0.3",O2=ye.FIVE_SECONDS*1e3,D2="pairing",I2="0.3",Os={wc_pairingDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:0},res:{ttl:ye.ONE_DAY,prompt:!1,tag:0}}},an={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},A2="history",T2="0.3",R2="expirer",Fr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},P2="0.3",zc="verify-api",Zo="https://verify.walletconnect.com",lf="https://verify.walletconnect.org";let N2=class{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=u2,this.version=d2,this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=at.generateChildLogger(r,this.name)}get context(){return at.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,mh(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?yh(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}},$2=class{constructor(e,r,n){this.core=e,this.logger=r,this.name=c2,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=qd(i);return Bd(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=Xy();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),o=qd(s),a=Ac();return await ay(a,i,l2,o)},this.generateSharedKey=(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=ev(a,s);return this.setSymKey(c,o)},this.setSymKey=async(i,s)=>{this.isInitialized();const o=s||tv(i);return await this.keychain.set(o,i),o},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,o)=>{this.isInitialized();const a=dh(o),c=lc(s);if(hh(a)){const p=a.senderPublicKey,y=a.receiverPublicKey;i=await this.generateSharedKey(p,y)}const u=this.getSymKey(i),{type:d,senderPublicKey:f}=a;return nv({type:d,symKey:u,message:c,senderPublicKey:f})},this.decode=async(i,s,o)=>{this.isInitialized();const a=ov(s,o);if(hh(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;i=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(i),u=iv({symKey:c,encoded:s});return Ed(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}},this.getPayloadType=i=>{const s=Fo(i);return ys(s.type)},this.getPayloadSenderPublicKey=i=>{const s=Fo(i);return s.senderPublicKey?yr(s.senderPublicKey,vr):void 0},this.core=e,this.logger=at.generateChildLogger(r,this.name),this.keychain=n||new N2(this.core,this.logger)}get context(){return at.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(sf)}catch{e=Ac(),await this.keychain.set(sf,e)}return i2(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}},L2=class extends hm{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=h2,this.version=f2,this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=Ri(i);let o=this.messages.get(n);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(n,o),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),o=Ri(i);return typeof s[o]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=at.generateChildLogger(e,this.name),this.core=r}get context(){return at.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,mh(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?yh(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}};class M2 extends fm{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new Ur.EventEmitter,this.name=g2,this.queue=new Map,this.publishTimeout=ye.toMiliseconds(ye.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{const a=(s==null?void 0:s.ttl)||p2,c=Rc(s),u=(s==null?void 0:s.prompt)||!1,d=(s==null?void 0:s.tag)||0,f=(s==null?void 0:s.id)||Lh().toString(),p={topic:n,message:i,opts:{ttl:a,relay:c,prompt:u,tag:d,id:f}},y=setTimeout(()=>this.queue.set(f,p),this.publishTimeout);try{await await bs(this.rpcPublish(n,i,a,c,u,d,f),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(f),this.relayer.events.emit(lr.publish,p)}catch(b){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw this.removeRequestFromQueue(f),b;return}finally{clearTimeout(y)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(a){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(a),a}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=at.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return at.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,s,o,a){var c,u,d,f;const p={method:Bo(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:o},id:a};return wr((c=p.params)==null?void 0:c.prompt)&&((u=p.params)==null||delete u.prompt),wr((d=p.params)==null?void 0:d.tag)&&((f=p.params)==null||delete f.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p}),this.relayer.request(p)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(Di.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(lr.connection_stalled);return}this.checkQueue()}),this.relayer.on(lr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class k2{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var U2=Object.defineProperty,F2=Object.defineProperties,j2=Object.getOwnPropertyDescriptors,uf=Object.getOwnPropertySymbols,B2=Object.prototype.hasOwnProperty,q2=Object.prototype.propertyIsEnumerable,df=(t,e,r)=>e in t?U2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ds=(t,e)=>{for(var r in e||(e={}))B2.call(e,r)&&df(t,r,e[r]);if(uf)for(var r of uf(e))q2.call(e,r)&&df(t,r,e[r]);return t},Wc=(t,e)=>F2(t,j2(e));let z2=class extends mm{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new k2,this.events=new Ur.EventEmitter,this.name=x2,this.version=C2,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Pn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=Rc(i),o={topic:n,relay:s};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s);return this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,s)=>{const o=new ye.Watch;o.start(this.pendingSubscriptionWatchLabel);const a=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),i(!0)),o.elapsed(this.pendingSubscriptionWatchLabel)>=O2&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),s(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=at.generateChildLogger(r,this.name),this.clientId=""}get context(){return at.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=Rc(n);await this.rpcUnsubscribe(e,r,i);const s=Xt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){const n={method:Bo(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await bs(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(lr.connection_stalled)}return Ri(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:Bo(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await bs(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(lr.connection_stalled)}}rpcUnsubscribe(e,r,n){const i={method:Bo(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,Wc(Ds({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Ds({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,Ds({},r)),this.topicMap.set(r.topic,e),this.events.emit(on.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(on.deleted,Wc(Ds({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(on.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(on.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);_s(r)&&this.onBatchSubscribe(r.map((n,i)=>Wc(Ds({},e[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Di.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(lr.connect,async()=>{await this.onConnect()}),this.relayer.on(lr.disconnect,()=>{this.onDisconnect()}),this.events.on(on.created,async e=>{const r=on.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(on.deleted,async e=>{const r=on.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}};var W2=Object.defineProperty,hf=Object.getOwnPropertySymbols,V2=Object.prototype.hasOwnProperty,H2=Object.prototype.propertyIsEnumerable,ff=(t,e,r)=>e in t?W2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,K2=(t,e)=>{for(var r in e||(e={}))V2.call(e,r)&&ff(t,r,e[r]);if(hf)for(var r of hf(e))H2.call(e,r)&&ff(t,r,e[r]);return t};let Z2=class extends pm{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Ur.EventEmitter,this.name=y2,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(lr.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(lr.error,r)},this.registerProviderListeners=()=>{this.provider.on(vn.payload,this.onPayloadHandler),this.provider.on(vn.connect,this.onConnectHandler),this.provider.on(vn.disconnect,this.onDisconnectHandler),this.provider.on(vn.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?at.generateChildLogger(e.logger,this.name):at.pino(at.getDefaultLoggerOptions({level:e.logger||m2})),this.messages=new L2(this.logger,e.core),this.subscriber=new z2(this,this.logger),this.publisher=new M2(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||af,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${cf}...`),await this.restartTransport(cf)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},_2)}get context(){return at.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"";return i||(await Promise.all([new Promise(s=>{this.subscriber.once(on.created,o=>{o.topic===e&&s()})}),new Promise(async s=>{i=await this.subscriber.subscribe(e,r),s()})]),i)}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await bs(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(on.resubscribed,()=>{r()})}),new Promise(async(r,n)=>{try{await bs(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(i){n(i);return}r()})])}catch(r){this.logger.error(r);const n=r;if(!this.isConnectionStalled(n.message))throw r;this.provider.events.emit(vn.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Ih())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Tw(new $w(yv({sdkVersion:b2,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Uc(e)){if(!e.method.endsWith(v2))return;const r=e.params,{topic:n,message:i,publishedAt:s}=r.data,o={topic:n,message:i,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(K2({type:"event",event:r.id},o)),this.events.emit(r.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else Vo(e)&&this.events.emit(lr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(lr.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Mc(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(vn.payload,this.onPayloadHandler),this.provider.off(vn.connect,this.onConnectHandler),this.provider.off(vn.disconnect,this.onDisconnectHandler),this.provider.off(vn.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(lr.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let e=await Ih();lw(async r=>{this.initialized&&e!==r&&(e=r,r?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(n=>this.logger.error(n))))})}onProviderDisconnect(){this.events.emit(lr.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},ye.toMiliseconds(w2)))}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var G2=Object.defineProperty,pf=Object.getOwnPropertySymbols,Q2=Object.prototype.hasOwnProperty,Y2=Object.prototype.propertyIsEnumerable,gf=(t,e,r)=>e in t?G2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mf=(t,e)=>{for(var r in e||(e={}))Q2.call(e,r)&&gf(t,r,e[r]);if(pf)for(var r of pf(e))Y2.call(e,r)&&gf(t,r,e[r]);return t};let Go=class extends gm{constructor(e,r,n,i=Pn,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=E2,this.cached=[],this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!wr(o)?this.map.set(this.getKey(o),o):jv(o)?this.map.set(o.id,o):Bv(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>Mw(a[c],o[c]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=mf(mf({},this.getData(o)),a);this.map.set(o,c),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),await this.persist())},this.logger=at.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return at.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}},J2=class{constructor(e,r){this.core=e,this.logger=r,this.name=D2,this.version=I2,this.events=new as,this.initialized=!1,this.storagePrefix=Pn,this.ignoredPayloadTypes=[ii],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=Ac(),i=await this.core.crypto.setSymKey(n),s=Hr(ye.FIVE_MINUTES),o={protocol:of},a={topic:i,expiry:s,relay:o,active:!1},c=Tv({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:o});return await this.pairings.set(i,a),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:c}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:s,relay:o}=Dv(n.uri);if(this.pairings.keys.includes(i))throw new Error(`Pairing already exists: ${i}`);if(this.core.crypto.hasKeys(i))throw new Error(`Keychain already exists: ${i}`);const a=Hr(ye.FIVE_MINUTES),c={topic:i,relay:o,expiry:a,active:!1};return await this.pairings.set(i,c),await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:o}),this.core.expirer.set(i,a),n.activatePairing&&await this.activate({topic:i}),c},this.activate=async({topic:n})=>{this.isInitialized();const i=Hr(ye.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Pi();this.events.once(Ht("pairing_ping",s),({error:u})=>{u?c(u):a()}),await o()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Xt("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{const o=xs(i,s),a=await this.core.crypto.encode(n,o),c=Os[i].req;return await this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id},this.sendResult=async(n,i,s)=>{const o=Mc(n,s),a=await this.core.crypto.encode(i,o),c=await this.core.history.get(i,n),u=Os[c.request.method].res;await this.core.relayer.publish(i,a,u),await this.core.history.resolve(o)},this.sendError=async(n,i,s)=>{const o=kc(n,s),a=await this.core.crypto.encode(i,o),c=await this.core.history.get(i,n),u=Os[c.request.method]?Os[c.request.method].res:Os.unregistered_method.res;await this.core.relayer.publish(i,a,u),await this.core.history.resolve(o)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Xt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>Rn(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit("pairing_ping",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{yn(i)?this.events.emit(Ht("pairing_ping",s),{}):Kr(i)&&this.events.emit(Ht("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit("pairing_delete",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=Xt("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(Xt("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!Or(n)){const{message:i}=de("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!Fv(n.uri)){const{message:i}=de("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!Or(n)){const{message:s}=de("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!Or(n)){const{message:s}=de("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!er(n,!1)){const{message:i}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(Rn(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=de("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=at.generateChildLogger(r,this.name),this.pairings=new Go(this.core,this.logger,this.name,this.storagePrefix)}get context(){return at.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(lr.message,async e=>{const{topic:r,message:n}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);try{Uc(i)?(await this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):Vo(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),await this.core.history.delete(r,i.id))}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(Fr.expired,async e=>{const{topic:r}=wh(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}},X2=class extends dm{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new Ur.EventEmitter,this.name=A2,this.version=T2,this.cached=[],this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:Hr(ye.THIRTY_DAYS)};this.records.set(o.id,o),this.events.emit(an.created,o)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Kr(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(an.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(an.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=at.generateChildLogger(r,this.name)}get context(){return at.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:xs(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(an.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(an.created,e=>{const r=an.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(an.updated,e=>{const r=an.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(an.deleted,e=>{const r=an.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(Di.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{ye.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}},e_=class extends ym{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new Ur.EventEmitter,this.name=R2,this.version=P2,this.cached=[],this.initialized=!1,this.storagePrefix=Pn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(Fr.created,{target:s,expiration:o})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Fr.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=at.generateChildLogger(r,this.name)}get context(){return at.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return vv(e);if(typeof e=="number")return wv(e);const{message:r}=de("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Fr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;ye.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Fr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Di.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Fr.created,e=>{const r=Fr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Fr.expired,e=>{const r=Fr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Fr.deleted,e=>{const r=Fr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}},t_=class extends vm{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=zc,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async n=>{if(this.verifyDisabled||jo()||!vs())return;const i=(n==null?void 0:n.verifyUrl)||Zo;this.verifyUrl!==i&&this.removeIframe(),this.verifyUrl=i;try{await this.createIframe()}catch(s){this.logger.warn(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.warn(s)}if(!this.initialized){this.removeIframe(),this.verifyUrl=lf;try{await this.createIframe()}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s),this.verifyDisabled=!0}}},this.register=async n=>{this.initialized?this.sendPost(n.attestationId):(this.addToQueue(n.attestationId),await this.init())},this.resolve=async n=>{if(this.isDevEnv)return"";const i=(n==null?void 0:n.verifyUrl)||Zo;let s="";try{s=await this.fetchAttestation(n.attestationId,i)}catch(o){this.logger.warn(`failed to resolve attestation: ${n.attestationId} from url: ${i}`),this.logger.warn(o),s=await this.fetchAttestation(n.attestationId,lf)}return s},this.fetchAttestation=async(n,i)=>{var s;this.logger.info(`resolving attestation: ${n} from url: ${i}`);const o=this.startAbortTimer(ye.ONE_SECOND*2),a=await fetch(`${i}/attestation/${n}`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?(s=await a.json())==null?void 0:s.origin:""},this.addToQueue=n=>{this.queue.push(n)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(n=>this.sendPost(n)),this.queue=[])},this.sendPost=n=>{var i;try{if(!this.iframe)return;(i=this.iframe.contentWindow)==null||i.postMessage(n,"*"),this.logger.info(`postMessage sent: ${n} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let n;const i=s=>{s.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",i),n())};await Promise.race([new Promise(s=>{if(document.getElementById(zc))return s();window.addEventListener("message",i);const o=document.createElement("iframe");o.id=zc,o.src=`${this.verifyUrl}/${this.projectId}`,o.style.display="none",document.body.append(o),this.iframe=o,n=s}),new Promise((s,o)=>setTimeout(()=>{window.removeEventListener("message",i),o("verify iframe load timeout")},ye.toMiliseconds(ye.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=at.generateChildLogger(r,this.name),this.verifyUrl=Zo,this.abortController=new AbortController,this.isDevEnv=Tc()&&process.env.IS_VITEST}get context(){return at.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ye.toMiliseconds(e))}};var r_=Object.defineProperty,yf=Object.getOwnPropertySymbols,n_=Object.prototype.hasOwnProperty,i_=Object.prototype.propertyIsEnumerable,vf=(t,e,r)=>e in t?r_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wf=(t,e)=>{for(var r in e||(e={}))n_.call(e,r)&&vf(t,r,e[r]);if(yf)for(var r of yf(e))i_.call(e,r)&&vf(t,r,e[r]);return t};const s_=class G0 extends um{constructor(e){super(e),this.protocol=nf,this.version=s2,this.name=qc,this.events=new Ur.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||af;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:at.pino(at.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||o2.logger}));this.logger=at.generateChildLogger(r,this.name),this.heartbeat=new Di.HeartBeat,this.crypto=new $2(this,this.logger,e==null?void 0:e.keychain),this.history=new X2(this,this.logger),this.expirer=new e_(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Ag(wf(wf({},a2),e==null?void 0:e.storageOptions)),this.relayer=new Z2({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new J2(this,this.logger),this.verify=new t_(this.projectId||"",this.logger)}static async init(e){const r=new G0(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(S2,n),r}get context(){return at.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}},bf="wc",_f=2,Ef="client",Vc=`${bf}@${_f}:${Ef}:`,Hc={name:Ef,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Sf="WALLETCONNECT_DEEPLINK_CHOICE",o_="proposal",a_="Proposal expired",c_="session",Qo=ye.SEVEN_DAYS,l_="engine",Is={wc_sessionPropose:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1115}}},Kc={min:ye.FIVE_MINUTES,max:ye.SEVEN_DAYS},wn={idle:"IDLE",active:"ACTIVE"},u_="request",d_=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var h_=Object.defineProperty,f_=Object.defineProperties,p_=Object.getOwnPropertyDescriptors,xf=Object.getOwnPropertySymbols,g_=Object.prototype.hasOwnProperty,m_=Object.prototype.propertyIsEnumerable,Cf=(t,e,r)=>e in t?h_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Dr=(t,e)=>{for(var r in e||(e={}))g_.call(e,r)&&Cf(t,r,e[r]);if(xf)for(var r of xf(e))m_.call(e,r)&&Cf(t,r,e[r]);return t},As=(t,e)=>f_(t,p_(e));class y_ extends bm{constructor(e){super(e),this.name=l_,this.events=new as,this.initialized=!1,this.ignoredPayloadTypes=[ii],this.requestQueue={state:wn.idle,queue:[]},this.sessionRequestQueue={state:wn.idle,queue:[]},this.requestQueueDelay=ye.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(Is)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ye.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const n=As(Dr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:c}=n;let u=i,d,f=!1;if(u&&(f=this.client.core.pairing.pairings.get(u).active),!u||!f){const{topic:C,uri:v}=await this.client.core.pairing.create();u=C,d=v}const p=await this.client.core.crypto.generateKeyPair(),y=Dr({requiredNamespaces:s,optionalNamespaces:o,relays:c??[{protocol:of}],proposer:{publicKey:p,metadata:this.client.metadata}},a&&{sessionProperties:a}),{reject:b,resolve:E,done:x}=Pi(ye.FIVE_MINUTES,a_);if(this.events.once(Ht("session_connect"),async({error:C,session:v})=>{if(C)b(C);else if(v){v.self.publicKey=p;const _=As(Dr({},v),{requiredNamespaces:v.requiredNamespaces,optionalNamespaces:v.optionalNamespaces});await this.client.session.set(v.topic,_),await this.setExpiry(v.topic,v.expiry),u&&await this.client.core.pairing.updateMetadata({topic:u,metadata:v.peer.metadata}),E(_)}}),!u){const{message:C}=de("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(C)}const I=await this.sendRequest({topic:u,method:"wc_sessionPropose",params:y}),w=Hr(ye.FIVE_MINUTES);return await this.setProposal(I,Dr({id:I,expiry:w},y)),{uri:d,approval:x}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:i,namespaces:s,sessionProperties:o}=r,a=this.client.proposal.get(n);let{pairingTopic:c,proposer:u,requiredNamespaces:d,optionalNamespaces:f}=a;c=c||"",Es(d)||(d=$v(s,"approve()"));const p=await this.client.core.crypto.generateKeyPair(),y=u.publicKey,b=await this.client.core.crypto.generateSharedKey(p,y);c&&n&&(await this.client.core.pairing.updateMetadata({topic:c,metadata:u.metadata}),await this.sendResult({id:n,topic:c,result:{relay:{protocol:i??"irn"},responderPublicKey:p}}),await this.client.proposal.delete(n,Xt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:c}));const E=Dr({relay:{protocol:i??"irn"},namespaces:s,requiredNamespaces:d,optionalNamespaces:f,pairingTopic:c,controller:{publicKey:p,metadata:this.client.metadata},expiry:Hr(Qo)},o&&{sessionProperties:o});await this.client.core.relayer.subscribe(b),await this.sendRequest({topic:b,method:"wc_sessionSettle",params:E,throwOnFailedPublish:!0});const x=As(Dr({},E),{topic:b,pairingTopic:c,acknowledged:!1,self:E.controller,peer:{publicKey:u.publicKey,metadata:u.metadata},controller:p});return await this.client.session.set(b,x),await this.setExpiry(b,Hr(Qo)),{topic:b,acknowledged:()=>new Promise(I=>setTimeout(()=>I(this.client.session.get(b)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:n,reason:i}=r,{pairingTopic:s}=this.client.proposal.get(n);s&&(await this.sendError(n,s,i),await this.client.proposal.delete(n,Xt("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:i}=r,s=await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i}}),{done:o,resolve:a,reject:c}=Pi();return this.events.once(Ht("session_update",s),({error:u})=>{u?c(u):a()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:o}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,i=await this.sendRequest({topic:n,method:"wc_sessionExtend",params:{}}),{done:s,resolve:o,reject:a}=Pi();return this.events.once(Ht("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,Hr(Qo)),{acknowledged:s}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:i,topic:s,expiry:o}=r,a=Lc(),{done:c,resolve:u,reject:d}=Pi(o);return this.events.once(Ht("session_request",a),({error:f,result:p})=>{f?d(f):u(p)}),await Promise.all([new Promise(async f=>{await this.sendRequest({clientRpcId:a,topic:s,method:"wc_sessionRequest",params:{request:i,chainId:n},expiry:o,throwOnFailedPublish:!0}).catch(p=>d(p)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:a}),f()}),new Promise(async f=>{const p=await this.client.core.storage.getItem(Sf);bv({id:a,topic:s,wcDeepLink:p}),f()}),c()]).then(f=>f[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i;yn(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0}):Kr(i)&&await this.sendError(s,n,i.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=await this.sendRequest({topic:n,method:"wc_sessionPing",params:{}}),{done:s,resolve:o,reject:a}=Pi();this.events.once(Ht("session_ping",i),({error:c})=>{c?a(c):o()}),await s()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r;await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;this.client.session.keys.includes(n)?(await this.sendRequest({topic:n,method:"wc_sessionDelete",params:Xt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>kv(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(r,n)=>{const{self:i}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,Xt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(i.publicKey)&&await this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r),this.client.core.storage.removeItem(Sf).catch(s=>this.client.logger.warn(s))},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,Xt("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=wn.idle)},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{const n=Is.wc_sessionRequest.req.ttl,{id:i,topic:s,params:o}=r;await this.client.pendingRequest.set(i,{id:i,topic:s,params:o}),n&&this.client.core.expirer.set(i,Hr(n))},this.sendRequest=async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u}=r,d=xs(i,s,c);if(vs()&&d_.includes(i)){const y=Ri(JSON.stringify(d));this.client.core.verify.register({attestationId:y})}const f=await this.client.core.crypto.encode(n,d),p=Is[i].req;return o&&(p.ttl=o),a&&(p.id=a),this.client.core.history.set(n,d),u?(p.internal=As(Dr({},p.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,f,p)):this.client.core.relayer.publish(n,f,p).catch(y=>this.client.logger.error(y)),d.id},this.sendResult=async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o}=r,a=Mc(n,s),c=await this.client.core.crypto.encode(i,a),u=await this.client.core.history.get(i,n),d=Is[u.request.method].res;o?(d.internal=As(Dr({},d.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,c,d)):this.client.core.relayer.publish(i,c,d).catch(f=>this.client.logger.error(f)),await this.client.core.history.resolve(a)},this.sendError=async(r,n,i)=>{const s=kc(r,i),o=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,r),c=Is[a.request.method].res;this.client.core.relayer.publish(n,o,c),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{Rn(i.expiry)&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Rn(i.expiry)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession(i)),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===wn.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=wn.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(n=>setTimeout(n,300))}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=wn.idle},this.processRequest=r=>{const{topic:n,payload:i}=r,s=i.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i}=r,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:i}=de("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.onSessionProposeRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidConnect(Dr({},n.params));const o=Hr(ye.FIVE_MINUTES),a=Dr({id:s,pairingTopic:r,expiry:o},i);await this.setProposal(s,a);const c=Ri(JSON.stringify(n)),u=await this.getVerifyContext(c,a.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:a,verifyContext:u})}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.onSessionProposeResponse=async(r,n)=>{const{id:i}=n;if(yn(n)){const{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const o=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const a=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});const c=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:c});const u=await this.client.core.crypto.generateSharedKey(a,c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:u});const d=await this.client.core.relayer.subscribe(u);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else Kr(n)&&(await this.client.proposal.delete(i,Xt("USER_DISCONNECTED")),this.events.emit(Ht("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:u,requiredNamespaces:d,optionalNamespaces:f,sessionProperties:p,pairingTopic:y}=n.params,b=Dr({topic:r,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:y,requiredNamespaces:d,optionalNamespaces:f,controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},p&&{sessionProperties:p});await this.sendResult({id:n.id,topic:r,result:!0}),this.events.emit(Ht("session_connect"),{session:b}),this.cleanupDuplicatePairings(b)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;yn(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Ht("session_approve",i),{})):Kr(n)&&(await this.client.session.delete(r,Xt("USER_DISCONNECTED")),this.events.emit(Ht("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=Wo.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidUpdate(Dr({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0}),this.client.events.emit("session_update",{id:s,topic:r,params:i}),Wo.set(o,s)}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.isRequestOutOfSync=(r,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n;yn(n)?this.events.emit(Ht("session_update",i),{}):Kr(n)&&this.events.emit(Ht("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Hr(Qo)),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n;yn(n)?this.events.emit(Ht("session_extend",i),{}):Kr(n)&&this.events.emit(Ht("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n;setTimeout(()=>{yn(n)?this.events.emit(Ht("session_ping",i),{}):Kr(n)&&this.events.emit(Ht("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(lr.publish,async()=>{s(await this.deleteSession(r))})}),this.sendResult({id:i,topic:r,result:!0})]),this.client.events.emit("session_delete",{id:i,topic:r})}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidRequest(Dr({topic:r},s)),await this.setPendingSessionRequest({id:i,topic:r,params:s}),this.addSessionRequestToSessionRequestQueue({id:i,topic:r,params:s}),await this.processSessionRequestQueue()}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n;yn(n)?this.events.emit(Ht("session_request",i),{result:n.result}):Kr(n)&&this.events.emit(Ht("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=Wo.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(Dr({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),Wo.set(o,i)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=wn.idle,this.processSessionRequestQueue()},ye.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=async()=>{if(this.sessionRequestQueue.state===wn.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{const{id:n,topic:i,params:s}=r,o=Ri(JSON.stringify(xs("wc_sessionRequest",s,n))),a=this.client.session.get(i),c=await this.getVerifyContext(o,a.peer.metadata);this.sessionRequestQueue.state=wn.active,this.client.events.emit("session_request",{id:n,topic:i,params:s,verifyContext:c})}catch(n){this.client.logger.error(n)}},this.isValidConnect=async r=>{if(!Or(r)){const{message:c}=de("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(c)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(wr(n)||await this.isValidPairingTopic(n),!Gv(a,!0)){const{message:c}=de("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(c)}!wr(i)&&Es(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!wr(s)&&Es(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),wr(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=Zv(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!Or(r))throw new Error(de("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o}=r;await this.isValidProposalId(n);const a=this.client.proposal.get(n),c=zo(i,"approve()");if(c)throw new Error(c.message);const u=Oh(a.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!er(s,!0)){const{message:d}=de("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}wr(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!Or(r)){const{message:s}=de("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(await this.isValidProposalId(n),!Yv(i)){const{message:s}=de("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!Or(r)){const{message:u}=de("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(u)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!xh(n)){const{message:u}=de("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=qv(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=zo(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Rn(o)){const{message:u}=de("EXPIRED","onSessionSettleRequest()");throw new Error(u)}},this.isValidUpdate=async r=>{if(!Or(r)){const{message:c}=de("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=zo(i,"update()");if(o)throw new Error(o.message);const a=Oh(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!Or(r)){const{message:i}=de("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!Or(r)){const{message:c}=de("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:i,chainId:s,expiry:o}=r;await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!Ch(a,s)){const{message:c}=de("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!Jv(i)){const{message:c}=de("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!tw(a,s,i.method)){const{message:c}=de("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!sw(o,Kc)){const{message:c}=de("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Kc.min} and ${Kc.max}`);throw new Error(c)}},this.isValidRespond=async r=>{if(!Or(r)){const{message:s}=de("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(s)}const{topic:n,response:i}=r;if(await this.isValidSessionTopic(n),!Xv(i)){const{message:s}=de("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidPing=async r=>{if(!Or(r)){const{message:i}=de("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!Or(r)){const{message:a}=de("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!Ch(o,s)){const{message:a}=de("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!ew(i)){const{message:a}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!rw(o,s,i.name)){const{message:a}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!Or(r)){const{message:i}=de("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(r,n)=>{const i={verified:{verifyUrl:n.verifyUrl||Zo,validation:"UNKNOWN",origin:n.url||""}};try{const s=await this.client.core.verify.resolve({attestationId:r,verifyUrl:n.verifyUrl});s&&(i.verified.origin=s,i.verified.validation=s===new URL(n.url).origin?"VALID":"INVALID")}catch(s){this.client.logger.error(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!er(i,!1)){const{message:s}=de("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}}async isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(lr.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(r,n);try{Uc(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):Vo(i)?(await this.client.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.client.core.history.delete(r,i.id)):this.onRelayEventUnknownPayload({topic:r,payload:i})}catch(s){this.client.logger.error(s)}})}registerExpirerEvents(){this.client.core.expirer.on(Fr.expired,async e=>{const{topic:r,id:n}=wh(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,de("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(e){if(!er(e,!1)){const{message:r}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Rn(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=de("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!er(e,!1)){const{message:r}=de("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=de("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Rn(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=de("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(er(e,!1)){const{message:r}=de("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=de("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!Qv(e)){const{message:r}=de("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=de("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Rn(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=de("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class v_ extends Go{constructor(e,r){super(e,r,o_,Vc),this.core=e,this.logger=r}}class w_ extends Go{constructor(e,r){super(e,r,c_,Vc),this.core=e,this.logger=r}}class b_ extends Go{constructor(e,r){super(e,r,u_,Vc,n=>n.id),this.core=e,this.logger=r}}let __=class Q0 extends wm{constructor(e){super(e),this.protocol=bf,this.version=_f,this.name=Hc.name,this.events=new Ur.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(e==null?void 0:e.name)||Hc.name,this.metadata=(e==null?void 0:e.metadata)||fv();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:at.pino(at.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Hc.logger}));this.core=(e==null?void 0:e.core)||new s_(e),this.logger=at.generateChildLogger(r,this.name),this.session=new w_(this.core,this.logger),this.proposal=new v_(this.core,this.logger),this.pendingRequest=new b_(this.core,this.logger),this.engine=new y_(this)}static async init(e){const r=new Q0(e);return await r.initialize(),r}get context(){return at.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var E_=Object.defineProperty,S_=Object.defineProperties,x_=Object.getOwnPropertyDescriptors,Of=Object.getOwnPropertySymbols,C_=Object.prototype.hasOwnProperty,O_=Object.prototype.propertyIsEnumerable,Df=(t,e,r)=>e in t?E_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,D_=(t,e)=>{for(var r in e||(e={}))C_.call(e,r)&&Df(t,r,e[r]);if(Of)for(var r of Of(e))O_.call(e,r)&&Df(t,r,e[r]);return t},I_=(t,e)=>S_(t,x_(e)),Zc=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},It=(t,e,r)=>(Zc(t,e,"read from private field"),r?r.call(t):e.get(t)),oi=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Yo=(t,e,r,n)=>(Zc(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),ur=(t,e,r)=>(Zc(t,e,"access private method"),r),ai,$i,Ts,tr,Gc,If,dr,br,Qc,Af;let A_=class{constructor(e){oi(this,Gc),oi(this,dr),oi(this,Qc),oi(this,ai,void 0),oi(this,$i,void 0),oi(this,Ts,void 0),oi(this,tr,void 0),Yo(this,ai,e),Yo(this,$i,ur(this,Gc,If).call(this)),ur(this,dr,br).call(this)}async connect(e){const{requiredNamespaces:r,optionalNamespaces:n}=e;return new Promise(async(i,s)=>{await ur(this,dr,br).call(this);const o=It(this,$i).subscribeModal(u=>{u.open||(o(),s(new Error("Modal closed")))}),{uri:a,approval:c}=await It(this,tr).connect(e);if(a){const u=new Set;r&&Object.values(r).forEach(({chains:d})=>{d&&d.forEach(f=>u.add(f))}),n&&Object.values(n).forEach(({chains:d})=>{d&&d.forEach(f=>u.add(f))}),await It(this,$i).openModal({uri:a,chains:Array.from(u)})}try{const u=await c();i(u)}catch(u){s(u)}finally{o(),It(this,$i).closeModal()}})}async disconnect(e){await ur(this,dr,br).call(this),await It(this,tr).disconnect(e)}async request(e){return await ur(this,dr,br).call(this),await It(this,tr).request(e)}async getSessions(){return await ur(this,dr,br).call(this),It(this,tr).session.getAll()}async getSession(){return await ur(this,dr,br).call(this),It(this,tr).session.getAll().at(-1)}async onSessionEvent(e){await ur(this,dr,br).call(this),It(this,tr).on("session_event",e)}async offSessionEvent(e){await ur(this,dr,br).call(this),It(this,tr).off("session_event",e)}async onSessionUpdate(e){await ur(this,dr,br).call(this),It(this,tr).on("session_update",e)}async offSessionUpdate(e){await ur(this,dr,br).call(this),It(this,tr).off("session_update",e)}async onSessionDelete(e){await ur(this,dr,br).call(this),It(this,tr).on("session_delete",e)}async offSessionDelete(e){await ur(this,dr,br).call(this),It(this,tr).off("session_delete",e)}async onSessionExpire(e){await ur(this,dr,br).call(this),It(this,tr).on("session_expire",e)}async offSessionExpire(e){await ur(this,dr,br).call(this),It(this,tr).off("session_expire",e)}};ai=new WeakMap,$i=new WeakMap,Ts=new WeakMap,tr=new WeakMap,Gc=new WeakSet,If=function(){const{modalOptions:t,projectId:e}=It(this,ai);return new wg(I_(D_({},t),{projectId:e}))},dr=new WeakSet,br=async function(){return It(this,tr)?!0:(!It(this,Ts)&&typeof window<"u"&&Yo(this,Ts,ur(this,Qc,Af).call(this)),It(this,Ts))},Qc=new WeakSet,Af=async function(){Yo(this,tr,await __.init({metadata:It(this,ai).metadata,projectId:It(this,ai).projectId,relayUrl:It(this,ai).relayUrl}));const t=await It(this,tr).core.crypto.getClientId();try{localStorage.setItem("WCM_WALLETCONNECT_CLIENT_ID",t)}catch{console.info("Unable to set client id")}};const Jo=["decrypt","disconnect","getSelectedAccount","getBalance","getRecords","requestCreateEvent","getEvent","getEvents","createSharedState","importSharedState","requestSignature"],Rs=["aleo:1"],Xo=["chainChanged","accountSelected","selectedAccountSynced","sharedAccountSynced"],Tf="f0aaeffe71b636da453fce042d79d723",Rf={standaloneChains:Rs,enableExplorer:!1,enableAccountView:!0,enableNetworkView:!0,enableStandaloneMode:!0,mobileWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"puzzleapp://",universal:""}}],desktopWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"",universal:"https://walletconnect.puzzle.online/"}}],walletImages:{puzzle:"https://i.imgur.com/p9tHaFC.png"}},T_={requiredNamespaces:{aleo:{methods:Jo,chains:Rs,events:Xo}}},ci=new as;let Ps;function Pf(t){Ps=new A_({projectId:Tf,metadata:{name:t.dAppName,description:t.dAppDescription,url:t.dAppUrl,icons:[t.dAppIconURL]},modalOptions:{...Rf}}),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")}async function St(){return new Promise(t=>{if(Ps)t(Ps);else{const e=setInterval(()=>{Ps&&(clearInterval(e),t(Ps))},200)}window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE")})}var ct;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=n,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(ct||(ct={}));var Yc;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Yc||(Yc={}));const pe=ct.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Nn=t=>{switch(typeof t){case"undefined":return pe.undefined;case"string":return pe.string;case"number":return isNaN(t)?pe.nan:pe.number;case"boolean":return pe.boolean;case"function":return pe.function;case"bigint":return pe.bigint;case"symbol":return pe.symbol;case"object":return Array.isArray(t)?pe.array:t===null?pe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?pe.promise:typeof Map<"u"&&t instanceof Map?pe.map:typeof Set<"u"&&t instanceof Set?pe.set:typeof Date<"u"&&t instanceof Date?pe.date:pe.object;default:return pe.unknown}},ae=ct.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),R_=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Zr extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(s){return s.message},n={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,ct.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Zr.create=t=>new Zr(t);const Ns=(t,e)=>{let r;switch(t.code){case ae.invalid_type:t.received===pe.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case ae.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,ct.jsonStringifyReplacer)}`;break;case ae.unrecognized_keys:r=`Unrecognized key(s) in object: ${ct.joinValues(t.keys,", ")}`;break;case ae.invalid_union:r="Invalid input";break;case ae.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ct.joinValues(t.options)}`;break;case ae.invalid_enum_value:r=`Invalid enum value. Expected ${ct.joinValues(t.options)}, received '${t.received}'`;break;case ae.invalid_arguments:r="Invalid function arguments";break;case ae.invalid_return_type:r="Invalid function return type";break;case ae.invalid_date:r="Invalid date";break;case ae.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:ct.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case ae.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case ae.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case ae.custom:r="Invalid input";break;case ae.invalid_intersection_types:r="Intersection results could not be merged";break;case ae.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case ae.not_finite:r="Number must be finite";break;default:r=e.defaultError,ct.assertNever(t)}return{message:r}};let Nf=Ns;function P_(t){Nf=t}function ea(){return Nf}const ta=t=>{const{data:e,path:r,errorMaps:n,issueData:i}=t,s=[...r,...i.path||[]],o={...i,path:s};let a="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...i,path:s,message:i.message||a}},N_=[];function ge(t,e){const r=ta({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ea(),Ns].filter(n=>!!n)});t.common.issues.push(r)}class hr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if(i.status==="aborted")return Re;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const i of r)n.push({key:await i.key,value:await i.value});return hr.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Re;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),(typeof o.value<"u"||i.alwaysSet)&&(n[s.value]=o.value)}return{status:e.value,value:n}}}const Re=Object.freeze({status:"aborted"}),$f=t=>({status:"dirty",value:t}),_r=t=>({status:"valid",value:t}),Jc=t=>t.status==="aborted",Xc=t=>t.status==="dirty",ra=t=>t.status==="valid",na=t=>typeof Promise<"u"&&t instanceof Promise;var be;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(be||(be={}));class cn{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Lf=(t,e)=>{if(ra(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Zr(t.common.issues);return this._error=r,this._error}}};function Fe(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:i}}class Ze{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Nn(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Nn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new hr,ctx:{common:e.parent.common,data:e.data,parsedType:Nn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(na(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Nn(e)},s=this._parseSync({data:e,path:i.path,parent:i});return Lf(i,s)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Nn(e)},i=this._parse({data:e,path:n.path,parent:n}),s=await(na(i)?i:Promise.resolve(i));return Lf(n,s)}refine(e,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:ae.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Yr({schema:this,typeName:Oe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return _n.create(this,this._def)}nullable(){return hi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Qr.create(this,this._def)}promise(){return Ui.create(this,this._def)}or(e){return ks.create([this,e],this._def)}and(e){return Us.create(this,e,this._def)}transform(e){return new Yr({...Fe(this._def),schema:this,typeName:Oe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new zs({...Fe(this._def),innerType:this,defaultValue:r,typeName:Oe.ZodDefault})}brand(){return new kf({typeName:Oe.ZodBranded,type:this,...Fe(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new la({...Fe(this._def),innerType:this,catchValue:r,typeName:Oe.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Ws.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const $_=/^c[^\s-]{8,}$/i,L_=/^[a-z][a-z0-9]*$/,M_=/[0-9A-HJKMNP-TV-Z]{26}/,k_=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,U_=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,F_=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,j_=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,B_=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,q_=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function z_(t,e){return!!((e==="v4"||!e)&&j_.test(t)||(e==="v6"||!e)&&B_.test(t))}class Gr extends Ze{constructor(){super(...arguments),this._regex=(e,r,n)=>this.refinement(i=>e.test(i),{validation:r,code:ae.invalid_string,...be.errToObj(n)}),this.nonempty=e=>this.min(1,be.errToObj(e)),this.trim=()=>new Gr({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Gr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Gr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==pe.string){const s=this._getOrReturnCtx(e);return ge(s,{code:ae.invalid_type,expected:pe.string,received:s.parsedType}),Re}const n=new hr;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?ge(i,{code:ae.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&ge(i,{code:ae.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")U_.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"email",code:ae.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")F_.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"emoji",code:ae.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")k_.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"uuid",code:ae.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")$_.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"cuid",code:ae.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")L_.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"cuid2",code:ae.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")M_.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"ulid",code:ae.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ge(i,{validation:"url",code:ae.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"regex",code:ae.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?q_(s).test(e.data)||(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="ip"?z_(e.data,s.version)||(i=this._getOrReturnCtx(e,i),ge(i,{validation:"ip",code:ae.invalid_string,message:s.message}),n.dirty()):ct.assertNever(s);return{status:n.value,value:e.data}}_addCheck(e){return new Gr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...be.errToObj(e)})}url(e){return this._addCheck({kind:"url",...be.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...be.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...be.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...be.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...be.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...be.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...be.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,...be.errToObj(e==null?void 0:e.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...be.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...be.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...be.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...be.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...be.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...be.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...be.errToObj(r)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Gr.create=t=>{var e;return new Gr({checks:[],typeName:Oe.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Fe(t)})};function W_(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class $n extends Ze{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==pe.number){const s=this._getOrReturnCtx(e);return ge(s,{code:ae.invalid_type,expected:pe.number,received:s.parsedType}),Re}let n;const i=new hr;for(const s of this._def.checks)s.kind==="int"?ct.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?W_(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.not_finite,message:s.message}),i.dirty()):ct.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,be.toString(r))}gt(e,r){return this.setLimit("min",e,!1,be.toString(r))}lte(e,r){return this.setLimit("max",e,!0,be.toString(r))}lt(e,r){return this.setLimit("max",e,!1,be.toString(r))}setLimit(e,r,n,i){return new $n({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:be.toString(i)}]})}_addCheck(e){return new $n({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:be.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:be.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:be.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:be.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:be.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:be.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:be.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:be.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:be.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ct.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}$n.create=t=>new $n({checks:[],typeName:Oe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Fe(t)});class Ln extends Ze{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==pe.bigint){const s=this._getOrReturnCtx(e);return ge(s,{code:ae.invalid_type,expected:pe.bigint,received:s.parsedType}),Re}let n;const i=new hr;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ge(n,{code:ae.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):ct.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,be.toString(r))}gt(e,r){return this.setLimit("min",e,!1,be.toString(r))}lte(e,r){return this.setLimit("max",e,!0,be.toString(r))}lt(e,r){return this.setLimit("max",e,!1,be.toString(r))}setLimit(e,r,n,i){return new Ln({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:be.toString(i)}]})}_addCheck(e){return new Ln({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:be.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:be.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:be.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:be.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:be.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Ln.create=t=>{var e;return new Ln({checks:[],typeName:Oe.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Fe(t)})};class $s extends Ze{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==pe.boolean){const n=this._getOrReturnCtx(e);return ge(n,{code:ae.invalid_type,expected:pe.boolean,received:n.parsedType}),Re}return _r(e.data)}}$s.create=t=>new $s({typeName:Oe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Fe(t)});class li extends Ze{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==pe.date){const s=this._getOrReturnCtx(e);return ge(s,{code:ae.invalid_type,expected:pe.date,received:s.parsedType}),Re}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return ge(s,{code:ae.invalid_date}),Re}const n=new hr;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),ge(i,{code:ae.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):ct.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new li({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:be.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:be.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}li.create=t=>new li({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Oe.ZodDate,...Fe(t)});class ia extends Ze{_parse(e){if(this._getType(e)!==pe.symbol){const n=this._getOrReturnCtx(e);return ge(n,{code:ae.invalid_type,expected:pe.symbol,received:n.parsedType}),Re}return _r(e.data)}}ia.create=t=>new ia({typeName:Oe.ZodSymbol,...Fe(t)});class Ls extends Ze{_parse(e){if(this._getType(e)!==pe.undefined){const n=this._getOrReturnCtx(e);return ge(n,{code:ae.invalid_type,expected:pe.undefined,received:n.parsedType}),Re}return _r(e.data)}}Ls.create=t=>new Ls({typeName:Oe.ZodUndefined,...Fe(t)});class Ms extends Ze{_parse(e){if(this._getType(e)!==pe.null){const n=this._getOrReturnCtx(e);return ge(n,{code:ae.invalid_type,expected:pe.null,received:n.parsedType}),Re}return _r(e.data)}}Ms.create=t=>new Ms({typeName:Oe.ZodNull,...Fe(t)});class Li extends Ze{constructor(){super(...arguments),this._any=!0}_parse(e){return _r(e.data)}}Li.create=t=>new Li({typeName:Oe.ZodAny,...Fe(t)});class ui extends Ze{constructor(){super(...arguments),this._unknown=!0}_parse(e){return _r(e.data)}}ui.create=t=>new ui({typeName:Oe.ZodUnknown,...Fe(t)});class bn extends Ze{_parse(e){const r=this._getOrReturnCtx(e);return ge(r,{code:ae.invalid_type,expected:pe.never,received:r.parsedType}),Re}}bn.create=t=>new bn({typeName:Oe.ZodNever,...Fe(t)});class sa extends Ze{_parse(e){if(this._getType(e)!==pe.undefined){const n=this._getOrReturnCtx(e);return ge(n,{code:ae.invalid_type,expected:pe.void,received:n.parsedType}),Re}return _r(e.data)}}sa.create=t=>new sa({typeName:Oe.ZodVoid,...Fe(t)});class Qr extends Ze{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==pe.array)return ge(r,{code:ae.invalid_type,expected:pe.array,received:r.parsedType}),Re;if(i.exactLength!==null){const o=r.data.length>i.exactLength.value,a=r.data.length<i.exactLength.value;(o||a)&&(ge(r,{code:o?ae.too_big:ae.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(ge(r,{code:ae.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(ge(r,{code:ae.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>i.type._parseAsync(new cn(r,o,r.path,a)))).then(o=>hr.mergeArray(n,o));const s=[...r.data].map((o,a)=>i.type._parseSync(new cn(r,o,r.path,a)));return hr.mergeArray(n,s)}get element(){return this._def.type}min(e,r){return new Qr({...this._def,minLength:{value:e,message:be.toString(r)}})}max(e,r){return new Qr({...this._def,maxLength:{value:e,message:be.toString(r)}})}length(e,r){return new Qr({...this._def,exactLength:{value:e,message:be.toString(r)}})}nonempty(e){return this.min(1,e)}}Qr.create=(t,e)=>new Qr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Oe.ZodArray,...Fe(e)});function Mi(t){if(t instanceof Lt){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=_n.create(Mi(n))}return new Lt({...t._def,shape:()=>e})}else return t instanceof Qr?new Qr({...t._def,type:Mi(t.element)}):t instanceof _n?_n.create(Mi(t.unwrap())):t instanceof hi?hi.create(Mi(t.unwrap())):t instanceof ln?ln.create(t.items.map(e=>Mi(e))):t}class Lt extends Ze{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=ct.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==pe.object){const u=this._getOrReturnCtx(e);return ge(u,{code:ae.invalid_type,expected:pe.object,received:u.parsedType}),Re}const{status:n,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof bn&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const d=s[u],f=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new cn(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof bn){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of a)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")a.length>0&&(ge(i,{code:ae.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of a){const f=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new cn(i,f,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key;u.push({key:f,value:await d.value,alwaysSet:d.alwaysSet})}return u}).then(u=>hr.mergeObjectSync(n,u)):hr.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return be.errToObj,new Lt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,s,o,a;const c=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=be.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Lt({...this._def,unknownKeys:"strip"})}passthrough(){return new Lt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Lt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Lt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Oe.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Lt({...this._def,catchall:e})}pick(e){const r={};return ct.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new Lt({...this._def,shape:()=>r})}omit(e){const r={};return ct.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new Lt({...this._def,shape:()=>r})}deepPartial(){return Mi(this)}partial(e){const r={};return ct.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new Lt({...this._def,shape:()=>r})}required(e){const r={};return ct.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof _n;)s=s._def.innerType;r[n]=s}}),new Lt({...this._def,shape:()=>r})}keyof(){return Mf(ct.objectKeys(this.shape))}}Lt.create=(t,e)=>new Lt({shape:()=>t,unknownKeys:"strip",catchall:bn.create(),typeName:Oe.ZodObject,...Fe(e)}),Lt.strictCreate=(t,e)=>new Lt({shape:()=>t,unknownKeys:"strict",catchall:bn.create(),typeName:Oe.ZodObject,...Fe(e)}),Lt.lazycreate=(t,e)=>new Lt({shape:t,unknownKeys:"strip",catchall:bn.create(),typeName:Oe.ZodObject,...Fe(e)});class ks extends Ze{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Zr(a.ctx.common.issues));return ge(r,{code:ae.invalid_union,unionErrors:o}),Re}if(r.common.async)return Promise.all(n.map(async s=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!s&&(s={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(c=>new Zr(c));return ge(r,{code:ae.invalid_union,unionErrors:a}),Re}}get options(){return this._def.options}}ks.create=(t,e)=>new ks({options:t,typeName:Oe.ZodUnion,...Fe(e)});const oa=t=>t instanceof js?oa(t.schema):t instanceof Yr?oa(t.innerType()):t instanceof Bs?[t.value]:t instanceof Mn?t.options:t instanceof qs?Object.keys(t.enum):t instanceof zs?oa(t._def.innerType):t instanceof Ls?[void 0]:t instanceof Ms?[null]:null;class aa extends Ze{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==pe.object)return ge(r,{code:ae.invalid_type,expected:pe.object,received:r.parsedType}),Re;const n=this.discriminator,i=r.data[n],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(ge(r,{code:ae.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Re)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const i=new Map;for(const s of r){const o=oa(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new aa({typeName:Oe.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Fe(n)})}}function el(t,e){const r=Nn(t),n=Nn(e);if(t===e)return{valid:!0,data:t};if(r===pe.object&&n===pe.object){const i=ct.objectKeys(e),s=ct.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const c=el(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===pe.array&&n===pe.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],c=el(o,a);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return r===pe.date&&n===pe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Us extends Ze{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=(s,o)=>{if(Jc(s)||Jc(o))return Re;const a=el(s.value,o.value);return a.valid?((Xc(s)||Xc(o))&&r.dirty(),{status:r.value,value:a.data}):(ge(n,{code:ae.invalid_intersection_types}),Re)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Us.create=(t,e,r)=>new Us({left:t,right:e,typeName:Oe.ZodIntersection,...Fe(r)});class ln extends Ze{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==pe.array)return ge(n,{code:ae.invalid_type,expected:pe.array,received:n.parsedType}),Re;if(n.data.length<this._def.items.length)return ge(n,{code:ae.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Re;!this._def.rest&&n.data.length>this._def.items.length&&(ge(n,{code:ae.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new cn(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(s).then(o=>hr.mergeArray(r,o)):hr.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new ln({...this._def,rest:e})}}ln.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ln({items:t,typeName:Oe.ZodTuple,rest:null,...Fe(e)})};class Fs extends Ze{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==pe.object)return ge(n,{code:ae.invalid_type,expected:pe.object,received:n.parsedType}),Re;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in n.data)i.push({key:s._parse(new cn(n,a,n.path,a)),value:o._parse(new cn(n,n.data[a],n.path,a))});return n.common.async?hr.mergeObjectAsync(r,i):hr.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Ze?new Fs({keyType:e,valueType:r,typeName:Oe.ZodRecord,...Fe(n)}):new Fs({keyType:Gr.create(),valueType:e,typeName:Oe.ZodRecord,...Fe(r)})}}class ca extends Ze{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==pe.map)return ge(n,{code:ae.invalid_type,expected:pe.map,received:n.parsedType}),Re;const i=this._def.keyType,s=this._def.valueType,o=[...n.data.entries()].map(([a,c],u)=>({key:i._parse(new cn(n,a,n.path,[u,"key"])),value:s._parse(new cn(n,c,n.path,[u,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Re;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),a.set(u.value,d.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Re;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),a.set(u.value,d.value)}return{status:r.value,value:a}}}}ca.create=(t,e,r)=>new ca({valueType:e,keyType:t,typeName:Oe.ZodMap,...Fe(r)});class di extends Ze{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==pe.set)return ge(n,{code:ae.invalid_type,expected:pe.set,received:n.parsedType}),Re;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(ge(n,{code:ae.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(ge(n,{code:ae.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const s=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return Re;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const a=[...n.data.values()].map((c,u)=>s._parse(new cn(n,c,n.path,u)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new di({...this._def,minSize:{value:e,message:be.toString(r)}})}max(e,r){return new di({...this._def,maxSize:{value:e,message:be.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}di.create=(t,e)=>new di({valueType:t,minSize:null,maxSize:null,typeName:Oe.ZodSet,...Fe(e)});class ki extends Ze{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==pe.function)return ge(r,{code:ae.invalid_type,expected:pe.function,received:r.parsedType}),Re;function n(a,c){return ta({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ea(),Ns].filter(u=>!!u),issueData:{code:ae.invalid_arguments,argumentsError:c}})}function i(a,c){return ta({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ea(),Ns].filter(u=>!!u),issueData:{code:ae.invalid_return_type,returnTypeError:c}})}const s={errorMap:r.common.contextualErrorMap},o=r.data;return this._def.returns instanceof Ui?_r(async(...a)=>{const c=new Zr([]),u=await this._def.args.parseAsync(a,s).catch(p=>{throw c.addIssue(n(a,p)),c}),d=await o(...u);return await this._def.returns._def.type.parseAsync(d,s).catch(p=>{throw c.addIssue(i(d,p)),c})}):_r((...a)=>{const c=this._def.args.safeParse(a,s);if(!c.success)throw new Zr([n(a,c.error)]);const u=o(...c.data),d=this._def.returns.safeParse(u,s);if(!d.success)throw new Zr([i(u,d.error)]);return d.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ki({...this._def,args:ln.create(e).rest(ui.create())})}returns(e){return new ki({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new ki({args:e||ln.create([]).rest(ui.create()),returns:r||ui.create(),typeName:Oe.ZodFunction,...Fe(n)})}}class js extends Ze{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}js.create=(t,e)=>new js({getter:t,typeName:Oe.ZodLazy,...Fe(e)});class Bs extends Ze{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return ge(r,{received:r.data,code:ae.invalid_literal,expected:this._def.value}),Re}return{status:"valid",value:e.data}}get value(){return this._def.value}}Bs.create=(t,e)=>new Bs({value:t,typeName:Oe.ZodLiteral,...Fe(e)});function Mf(t,e){return new Mn({values:t,typeName:Oe.ZodEnum,...Fe(e)})}class Mn extends Ze{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return ge(r,{expected:ct.joinValues(n),received:r.parsedType,code:ae.invalid_type}),Re}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return ge(r,{received:r.data,code:ae.invalid_enum_value,options:n}),Re}return _r(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return Mn.create(e)}exclude(e){return Mn.create(this.options.filter(r=>!e.includes(r)))}}Mn.create=Mf;class qs extends Ze{_parse(e){const r=ct.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==pe.string&&n.parsedType!==pe.number){const i=ct.objectValues(r);return ge(n,{expected:ct.joinValues(i),received:n.parsedType,code:ae.invalid_type}),Re}if(r.indexOf(e.data)===-1){const i=ct.objectValues(r);return ge(n,{received:n.data,code:ae.invalid_enum_value,options:i}),Re}return _r(e.data)}get enum(){return this._def.values}}qs.create=(t,e)=>new qs({values:t,typeName:Oe.ZodNativeEnum,...Fe(e)});class Ui extends Ze{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==pe.promise&&r.common.async===!1)return ge(r,{code:ae.invalid_type,expected:pe.promise,received:r.parsedType}),Re;const n=r.parsedType===pe.promise?r.data:Promise.resolve(r.data);return _r(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Ui.create=(t,e)=>new Ui({type:t,typeName:Oe.ZodPromise,...Fe(e)});class Yr extends Ze{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Oe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null;if(i.type==="preprocess"){const o=i.transform(n.data);return n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}const s={addIssue:o=>{ge(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="refinement"){const o=a=>{const c=i.refinement(a,s);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Re:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?Re:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(i.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ra(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>ra(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:r.value,value:a})):o);ct.assertNever(i)}}Yr.create=(t,e,r)=>new Yr({schema:t,typeName:Oe.ZodEffects,effect:e,...Fe(r)}),Yr.createWithPreprocess=(t,e,r)=>new Yr({schema:e,effect:{type:"preprocess",transform:t},typeName:Oe.ZodEffects,...Fe(r)});class _n extends Ze{_parse(e){return this._getType(e)===pe.undefined?_r(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}_n.create=(t,e)=>new _n({innerType:t,typeName:Oe.ZodOptional,...Fe(e)});class hi extends Ze{_parse(e){return this._getType(e)===pe.null?_r(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}hi.create=(t,e)=>new hi({innerType:t,typeName:Oe.ZodNullable,...Fe(e)});class zs extends Ze{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===pe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}zs.create=(t,e)=>new zs({innerType:t,typeName:Oe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Fe(e)});class la extends Ze{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return na(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Zr(n.common.issues)}})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Zr(n.common.issues)}})}}removeCatch(){return this._def.innerType}}la.create=(t,e)=>new la({innerType:t,typeName:Oe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Fe(e)});class ua extends Ze{_parse(e){if(this._getType(e)!==pe.nan){const n=this._getOrReturnCtx(e);return ge(n,{code:ae.invalid_type,expected:pe.nan,received:n.parsedType}),Re}return{status:"valid",value:e.data}}}ua.create=t=>new ua({typeName:Oe.ZodNaN,...Fe(t)});const V_=Symbol("zod_brand");class kf extends Ze{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Ws extends Ze{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Re:s.status==="dirty"?(r.dirty(),$f(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Re:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new Ws({in:e,out:r,typeName:Oe.ZodPipeline})}}const Uf=(t,e={},r)=>t?Li.create().superRefine((n,i)=>{var s,o;if(!t(n)){const a=typeof e=="function"?e(n):e,c=(o=(s=a.fatal)!==null&&s!==void 0?s:r)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...u,fatal:c})}}):Li.create(),H_={object:Lt.lazycreate};var Oe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(Oe||(Oe={}));const K_=(t,e={message:`Input not instance of ${t.name}`})=>Uf(r=>r instanceof t,e),Ff=Gr.create,jf=$n.create,Z_=ua.create,G_=Ln.create,Bf=$s.create,Q_=li.create,Y_=ia.create,J_=Ls.create,X_=Ms.create,e3=Li.create,t3=ui.create,r3=bn.create,n3=sa.create,i3=Qr.create,s3=Lt.create,o3=Lt.strictCreate,a3=ks.create,c3=aa.create,l3=Us.create,u3=ln.create,d3=Fs.create,h3=ca.create,f3=di.create,p3=ki.create,g3=js.create,m3=Bs.create,y3=Mn.create,v3=qs.create,w3=Ui.create,qf=Yr.create,b3=_n.create,_3=hi.create,E3=Yr.createWithPreprocess,S3=Ws.create;var Jr=Object.freeze({__proto__:null,defaultErrorMap:Ns,setErrorMap:P_,getErrorMap:ea,makeIssue:ta,EMPTY_PATH:N_,addIssueToContext:ge,ParseStatus:hr,INVALID:Re,DIRTY:$f,OK:_r,isAborted:Jc,isDirty:Xc,isValid:ra,isAsync:na,get util(){return ct},get objectUtil(){return Yc},ZodParsedType:pe,getParsedType:Nn,ZodType:Ze,ZodString:Gr,ZodNumber:$n,ZodBigInt:Ln,ZodBoolean:$s,ZodDate:li,ZodSymbol:ia,ZodUndefined:Ls,ZodNull:Ms,ZodAny:Li,ZodUnknown:ui,ZodNever:bn,ZodVoid:sa,ZodArray:Qr,ZodObject:Lt,ZodUnion:ks,ZodDiscriminatedUnion:aa,ZodIntersection:Us,ZodTuple:ln,ZodRecord:Fs,ZodMap:ca,ZodSet:di,ZodFunction:ki,ZodLazy:js,ZodLiteral:Bs,ZodEnum:Mn,ZodNativeEnum:qs,ZodPromise:Ui,ZodEffects:Yr,ZodTransformer:Yr,ZodOptional:_n,ZodNullable:hi,ZodDefault:zs,ZodCatch:la,ZodNaN:ua,BRAND:V_,ZodBranded:kf,ZodPipeline:Ws,custom:Uf,Schema:Ze,ZodSchema:Ze,late:H_,get ZodFirstPartyTypeKind(){return Oe},coerce:{string:t=>Gr.create({...t,coerce:!0}),number:t=>$n.create({...t,coerce:!0}),boolean:t=>$s.create({...t,coerce:!0}),bigint:t=>Ln.create({...t,coerce:!0}),date:t=>li.create({...t,coerce:!0})},any:e3,array:i3,bigint:G_,boolean:Bf,date:Q_,discriminatedUnion:c3,effect:qf,enum:y3,function:p3,instanceof:K_,intersection:l3,lazy:g3,literal:m3,map:h3,nan:Z_,nativeEnum:v3,never:r3,null:X_,nullable:_3,number:jf,object:s3,oboolean:()=>Bf().optional(),onumber:()=>jf().optional(),optional:b3,ostring:()=>Ff().optional(),pipeline:S3,preprocess:E3,promise:w3,record:d3,set:f3,strictObject:o3,string:Ff,symbol:Y_,transformer:qf,tuple:u3,undefined:J_,union:a3,unknown:t3,void:n3,NEVER:Re,ZodIssueCode:ae,quotelessJson:R_,ZodError:Zr});const zf=/^aleo1.{58}$/i,Wf=/^AViewKey1.{44}$/i,Vf=/^APrivateKey1.{47}$/i,Hf=/^at1.{60}$/i,Kf=/^\d+field$/,Zf=/^\d+u32$/,Gf=/^\d+u64$/,x3=Jr.string().regex(zf),C3=Jr.string().regex(Wf),O3=Jr.string().regex(Vf),D3=Jr.string().regex(Hf),I3=Jr.string().regex(Kf),A3=Jr.string().regex(Zf),T3=Jr.string().regex(Gf);J.EventType=void 0,function(t){t.Deploy="Deploy",t.Execute="Execute",t.Send="Send",t.Receive="Receive",t.Join="Join",t.Split="Split",t.Shield="Shield",t.Unshield="Unshield"}(J.EventType||(J.EventType={})),J.EventStatus=void 0,function(t){t.Creating="Creating",t.Pending="Pending",t.Settled="Settled",t.Failed="Failed"}(J.EventStatus||(J.EventStatus={})),J.Visibility=void 0,function(t){t.Private="Private",t.Public="Public"}(J.Visibility||(J.Visibility={})),J.Network=void 0,function(t){t.AleoTestnet="AleoTestnet",t.AleoMainnet="AleoMainnet"}(J.Network||(J.Network={})),J.AssetType=void 0,function(t){t[t.ALEO=0]="ALEO"}(J.AssetType||(J.AssetType={}));const R3=Jr.nativeEnum(J.EventType),P3=Jr.nativeEnum(J.EventStatus),N3=Jr.nativeEnum(J.Network),$3=Jr.nativeEnum(J.Visibility);let L3=class extends Pr{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},M3=class{constructor(e,r,n){this.core=e,this.logger=r}},k3=class extends Pr{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},U3=class{constructor(e,r){this.logger=e,this.core=r}},F3=class extends Pr{constructor(e,r){super(),this.relayer=e,this.logger=r}},j3=class extends Pr{constructor(e){super()}},B3=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},q3=class{constructor(){this.map=new Map}},z3=class extends Pr{constructor(e,r){super(),this.relayer=e,this.logger=r}},W3=class{constructor(e,r){this.core=e,this.logger=r}},V3=class extends Pr{constructor(e,r){super(),this.core=e,this.logger=r}},H3=class{constructor(e,r){this.logger=e,this.core=r}},K3=class{constructor(e,r){this.projectId=e,this.logger=r}},Z3=class extends as{constructor(){super()}},G3=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},Q3=class extends Ur.EventEmitter{constructor(){super()}},Y3=class{constructor(e){this.client=e}};function tl(t){vt.useEffect(()=>(St().then(e=>{e.onSessionDelete(t)}),()=>{St().then(e=>{e.offSessionDelete(t)})}),[t])}function Qf(t){vt.useEffect(()=>(St().then(e=>{e.onSessionExpire(t)}),()=>{St().then(e=>{e.offSessionExpire(t)})}),[t])}function rl(t){vt.useEffect(()=>(St().then(e=>{e.onSessionUpdate(t)}),()=>{St().then(e=>{e.offSessionUpdate(t)})}),[t])}function jr(){const[t,e]=vt.useState(void 0);return tl(r=>{r.topic===(t==null?void 0:t.topic)&&e(void 0)}),rl(r=>{if(t&&r.topic===(t==null?void 0:t.topic)){const{namespaces:n}=r.params,i={...t,namespaces:n};e(i)}}),Qf(r=>{t&&r.topic===(t==null?void 0:t.topic)&&e(void 0)}),vt.useEffect(()=>{async function r(){const i=await(await St()).getSession();e(i)}return r(),ci.on("session_change",r),()=>{ci.off("session_change",r)}},[]),t}function Fi(t){vt.useEffect(()=>(St().then(e=>{e.onSessionEvent(t)}),()=>{St().then(e=>{e.offSessionEvent(t)})}),[t])}const Yf=t=>{let e;const r=new Set,n=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const f=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),r.forEach(p=>p(e,f))}},i=()=>e,a={setState:n,getState:i,subscribe:c=>(r.add(c),()=>r.delete(c)),destroy:()=>{r.clear()}};return e=t(n,i,a),a},J3=t=>t?Yf(t):Yf;var nl={exports:{}},il={},da={exports:{}},sl={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jf;function X3(){if(Jf)return sl;Jf=1;var t=vt;function e(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(f,p){var y=p(),b=n({inst:{value:y,getSnapshot:p}}),E=b[0].inst,x=b[1];return s(function(){E.value=y,E.getSnapshot=p,c(E)&&x({inst:E})},[f,y,p]),i(function(){return c(E)&&x({inst:E}),f(function(){c(E)&&x({inst:E})})},[f]),o(y),y}function c(f){var p=f.getSnapshot;f=f.value;try{var y=p();return!r(f,y)}catch{return!0}}function u(f,p){return p()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return sl.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,sl}var ol={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xf;function eE(){return Xf||(Xf=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=vt,e=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function r(C){{for(var v=arguments.length,_=new Array(v>1?v-1:0),g=1;g<v;g++)_[g-1]=arguments[g];n("error",C,_)}}function n(C,v,_){{var g=e.ReactDebugCurrentFrame,l=g.getStackAddendum();l!==""&&(v+="%s",_=_.concat([l]));var m=_.map(function(P){return String(P)});m.unshift("Warning: "+v),Function.prototype.apply.call(console[C],console,m)}}function i(C,v){return C===v&&(C!==0||1/C===1/v)||C!==C&&v!==v}var s=typeof Object.is=="function"?Object.is:i,o=t.useState,a=t.useEffect,c=t.useLayoutEffect,u=t.useDebugValue,d=!1,f=!1;function p(C,v,_){d||t.startTransition!==void 0&&(d=!0,r("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var g=v();if(!f){var l=v();s(g,l)||(r("The result of getSnapshot should be cached to avoid an infinite loop"),f=!0)}var m=o({inst:{value:g,getSnapshot:v}}),P=m[0].inst,N=m[1];return c(function(){P.value=g,P.getSnapshot=v,y(P)&&N({inst:P})},[C,g,v]),a(function(){y(P)&&N({inst:P});var z=function(){y(P)&&N({inst:P})};return C(z)},[C]),u(g),g}function y(C){var v=C.getSnapshot,_=C.value;try{var g=v();return!s(_,g)}catch{return!0}}function b(C,v,_){return v()}var E=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",x=!E,I=x?b:p,w=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:I;ol.useSyncExternalStore=w,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),ol}var ep;function al(){return ep||(ep=1,process.env.NODE_ENV==="production"?da.exports=X3():da.exports=eE()),da.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp;function tE(){if(tp)return il;tp=1;var t=vt,e=al();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,c=t.useDebugValue;return il.useSyncExternalStoreWithSelector=function(u,d,f,p,y){var b=s(null);if(b.current===null){var E={hasValue:!1,value:null};b.current=E}else E=b.current;b=a(function(){function I(g){if(!w){if(w=!0,C=g,g=p(g),y!==void 0&&E.hasValue){var l=E.value;if(y(l,g))return v=l}return v=g}if(l=v,n(C,g))return l;var m=p(g);return y!==void 0&&y(l,m)?l:(C=g,v=m)}var w=!1,C,v,_=f===void 0?null:f;return[function(){return I(d())},_===null?void 0:function(){return I(_())}]},[d,f,p,y]);var x=i(u,b[0],b[1]);return o(function(){E.hasValue=!0,E.value=x},[x]),c(x),x},il}var cl={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rp;function rE(){return rp||(rp=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=vt,e=al();function r(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,c=t.useDebugValue;function u(d,f,p,y,b){var E=s(null),x;E.current===null?(x={hasValue:!1,value:null},E.current=x):x=E.current;var I=a(function(){var _=!1,g,l,m=function(W){if(!_){_=!0,g=W;var G=y(W);if(b!==void 0&&x.hasValue){var $=x.value;if(b($,G))return l=$,$}return l=G,G}var j=g,oe=l;if(n(j,W))return oe;var Y=y(W);return b!==void 0&&b(oe,Y)?oe:(g=W,l=Y,Y)},P=p===void 0?null:p,N=function(){return m(f())},z=P===null?void 0:function(){return m(P())};return[N,z]},[f,p,y,b]),w=I[0],C=I[1],v=i(d,w,C);return o(function(){x.hasValue=!0,x.value=v},[v]),c(v),v}cl.useSyncExternalStoreWithSelector=u,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),cl}process.env.NODE_ENV==="production"?nl.exports=tE():nl.exports=rE();var nE=nl.exports;const iE=Co(nE),{useDebugValue:sE}=vt,{useSyncExternalStoreWithSelector:oE}=iE;let S8=!1;function aE(t,e=t.getState,r){const n=oE(t.subscribe,t.getState,t.getServerState||t.getState,e,r);return sE(n),n}const np=t=>{const e=typeof t=="function"?J3(t):t,r=(n,i)=>aE(e,n,i);return Object.assign(r,e),r},cE=t=>t?np(t):np;function lE(t,e){let r;try{r=t()}catch{return}return{getItem:i=>{var s;const o=c=>c===null?null:JSON.parse(c,e==null?void 0:e.reviver),a=(s=r.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>r.setItem(i,JSON.stringify(s,e==null?void 0:e.replacer)),removeItem:i=>r.removeItem(i)}}const Vs=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return Vs(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return Vs(n)(r)}}}},uE=(t,e)=>(r,n,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:x=>x,version:0,merge:(x,I)=>({...I,...x}),...e},o=!1;const a=new Set,c=new Set;let u;try{u=s.getStorage()}catch{}if(!u)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...x)},n,i);const d=Vs(s.serialize),f=()=>{const x=s.partialize({...n()});let I;const w=d({state:x,version:s.version}).then(C=>u.setItem(s.name,C)).catch(C=>{I=C});if(I)throw I;return w},p=i.setState;i.setState=(x,I)=>{p(x,I),f()};const y=t((...x)=>{r(...x),f()},n,i);let b;const E=()=>{var x;if(!u)return;o=!1,a.forEach(w=>w(n()));const I=((x=s.onRehydrateStorage)==null?void 0:x.call(s,n()))||void 0;return Vs(u.getItem.bind(u))(s.name).then(w=>{if(w)return s.deserialize(w)}).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==s.version){if(s.migrate)return s.migrate(w.state,w.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return w.state}).then(w=>{var C;return b=s.merge(w,(C=n())!=null?C:y),r(b,!0),f()}).then(()=>{I==null||I(b,void 0),o=!0,c.forEach(w=>w(b))}).catch(w=>{I==null||I(void 0,w)})};return i.persist={setOptions:x=>{s={...s,...x},x.getStorage&&(u=x.getStorage())},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>E(),hasHydrated:()=>o,onHydrate:x=>(a.add(x),()=>{a.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},E(),b||y},dE=(t,e)=>(r,n,i)=>{let s={storage:lE(()=>localStorage),partialize:E=>E,version:0,merge:(E,x)=>({...x,...E}),...e},o=!1;const a=new Set,c=new Set;let u=s.storage;if(!u)return t((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...E)},n,i);const d=()=>{const E=s.partialize({...n()});return u.setItem(s.name,{state:E,version:s.version})},f=i.setState;i.setState=(E,x)=>{f(E,x),d()};const p=t((...E)=>{r(...E),d()},n,i);let y;const b=()=>{var E,x;if(!u)return;o=!1,a.forEach(w=>{var C;return w((C=n())!=null?C:p)});const I=((x=s.onRehydrateStorage)==null?void 0:x.call(s,(E=n())!=null?E:p))||void 0;return Vs(u.getItem.bind(u))(s.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==s.version){if(s.migrate)return s.migrate(w.state,w.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return w.state}).then(w=>{var C;return y=s.merge(w,(C=n())!=null?C:p),r(y,!0),d()}).then(()=>{I==null||I(y,void 0),y=n(),o=!0,c.forEach(w=>w(y))}).catch(w=>{I==null||I(void 0,w)})};return i.persist={setOptions:E=>{s={...s,...E},E.storage&&(u=E.storage)},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>b(),hasHydrated:()=>o,onHydrate:E=>(a.add(E),()=>{a.delete(E)}),onFinishHydration:E=>(c.add(E),()=>{c.delete(E)})},s.skipHydration||b(),y||p},hE=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?uE(t,e):dE(t,e),kn=cE()(hE((t,e)=>({account:void 0,chainId:"aleo:1",setAccount:r=>{t({account:r})},setChainId:r=>{t({chainId:r})},onDisconnect:()=>{t({account:void 0,chainId:void 0})}}),{name:"puzzle-wallet-store"}));class Hs{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const r={listener:e};return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const Ks=typeof window>"u"||"Deno"in window;function Br(){}function fE(t,e){return typeof t=="function"?t(e):t}function ll(t){return typeof t=="number"&&t>=0&&t!==1/0}function ip(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Zs(t,e,r){return ha(t)?typeof e=="function"?{...r,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function Un(t,e,r){return ha(t)?[{...e,queryKey:t},r]:[t||{},e]}function sp(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(ha(o)){if(n){if(e.queryHash!==ul(o,e.options))return!1}else if(!ji(e.queryKey,o))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||typeof i<"u"&&i!==e.state.fetchStatus||s&&!s(e))}function op(t,e){const{exact:r,fetching:n,predicate:i,mutationKey:s}=t;if(ha(s)){if(!e.options.mutationKey)return!1;if(r){if(fi(e.options.mutationKey)!==fi(s))return!1}else if(!ji(e.options.mutationKey,s))return!1}return!(typeof n=="boolean"&&e.state.status==="loading"!==n||i&&!i(e))}function ul(t,e){return((e==null?void 0:e.queryKeyHashFn)||fi)(t)}function fi(t){return JSON.stringify(t,(e,r)=>hl(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function ji(t,e){return ap(t,e)}function ap(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!ap(t[r],e[r])):!1}function cp(t,e){if(t===e)return t;const r=lp(t)&&lp(e);if(r||hl(t)&&hl(e)){const n=r?t.length:Object.keys(t).length,i=r?e:Object.keys(e),s=i.length,o=r?[]:{};let a=0;for(let c=0;c<s;c++){const u=r?c:i[c];o[u]=cp(t[u],e[u]),o[u]===t[u]&&a++}return n===s&&a===n?t:o}return e}function dl(t,e){if(t&&!e||e&&!t)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function lp(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function hl(t){if(!up(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const r=e.prototype;return!(!up(r)||!r.hasOwnProperty("isPrototypeOf"))}function up(t){return Object.prototype.toString.call(t)==="[object Object]"}function ha(t){return Array.isArray(t)}function dp(t){return new Promise(e=>{setTimeout(e,t)})}function hp(t){dp(0).then(t)}function pE(){if(typeof AbortController=="function")return new AbortController}function fl(t,e,r){return r.isDataEqual!=null&&r.isDataEqual(t,e)?t:typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?cp(t,e):e}class gE extends Hs{constructor(){super(),this.setup=e=>{if(!Ks&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),window.addEventListener("focus",r,!1),()=>{window.removeEventListener("visibilitychange",r),window.removeEventListener("focus",r)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var r;this.setup=e,(r=this.cleanup)==null||r.call(this),this.cleanup=e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const fa=new gE,fp=["online","offline"];class mE extends Hs{constructor(){super(),this.setup=e=>{if(!Ks&&window.addEventListener){const r=()=>e();return fp.forEach(n=>{window.addEventListener(n,r,!1)}),()=>{fp.forEach(n=>{window.removeEventListener(n,r)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var r;this.setup=e,(r=this.cleanup)==null||r.call(this),this.cleanup=e(n=>{typeof n=="boolean"?this.setOnline(n):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const pa=new mE;function yE(t){return Math.min(1e3*2**t,3e4)}function ga(t){return(t??"online")==="online"?pa.isOnline():!0}class pp{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function ma(t){return t instanceof pp}function gp(t){let e=!1,r=0,n=!1,i,s,o;const a=new Promise((x,I)=>{s=x,o=I}),c=x=>{n||(y(new pp(x)),t.abort==null||t.abort())},u=()=>{e=!0},d=()=>{e=!1},f=()=>!fa.isFocused()||t.networkMode!=="always"&&!pa.isOnline(),p=x=>{n||(n=!0,t.onSuccess==null||t.onSuccess(x),i==null||i(),s(x))},y=x=>{n||(n=!0,t.onError==null||t.onError(x),i==null||i(),o(x))},b=()=>new Promise(x=>{i=I=>{const w=n||!f();return w&&x(I),w},t.onPause==null||t.onPause()}).then(()=>{i=void 0,n||t.onContinue==null||t.onContinue()}),E=()=>{if(n)return;let x;try{x=t.fn()}catch(I){x=Promise.reject(I)}Promise.resolve(x).then(p).catch(I=>{var w,C;if(n)return;const v=(w=t.retry)!=null?w:3,_=(C=t.retryDelay)!=null?C:yE,g=typeof _=="function"?_(r,I):_,l=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,I);if(e||!l){y(I);return}r++,t.onFail==null||t.onFail(r,I),dp(g).then(()=>{if(f())return b()}).then(()=>{e?y(I):E()})})};return ga(t.networkMode)?E():b().then(E),{promise:a,cancel:c,continue:()=>(i==null?void 0:i())?a:Promise.resolve(),cancelRetry:u,continueRetry:d}}const pl=console;function vE(){let t=[],e=0,r=d=>{d()},n=d=>{d()};const i=d=>{let f;e++;try{f=d()}finally{e--,e||a()}return f},s=d=>{e?t.push(d):hp(()=>{r(d)})},o=d=>(...f)=>{s(()=>{d(...f)})},a=()=>{const d=t;t=[],d.length&&hp(()=>{n(()=>{d.forEach(f=>{r(f)})})})};return{batch:i,batchCalls:o,schedule:s,setNotifyFunction:d=>{r=d},setBatchNotifyFunction:d=>{n=d}}}const Kt=vE();class mp{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ll(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(Ks?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class wE extends mp{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||pl,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||bE(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,r){const n=fl(this.state.data,e,this.options);return this.dispatch({data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){this.dispatch({type:"setState",state:e,setStateOptions:r})}cancel(e){var r;const n=this.promise;return(r=this.retryer)==null||r.cancel(e),n?n.then(Br).catch(Br):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!ip(this.state.dataUpdatedAt,e)}onFocus(){var e;const r=this.observers.find(n=>n.shouldFetchOnWindowFocus());r&&r.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const r=this.observers.find(n=>n.shouldFetchOnReconnect());r&&r.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,r){var n,i;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&r!=null&&r.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var s;return(s=this.retryer)==null||s.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const y=this.observers.find(b=>b.options.queryFn);y&&this.setOptions(y.options)}process.env.NODE_ENV!=="production"&&(Array.isArray(this.options.queryKey)||this.logger.error("As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']"));const o=pE(),a={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},c=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>{if(o)return this.abortSignalConsumed=!0,o.signal}})};c(a);const u=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(a)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),d={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:u};if(c(d),(n=this.options.behavior)==null||n.onFetch(d),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((i=d.fetchOptions)==null?void 0:i.meta)){var f;this.dispatch({type:"fetch",meta:(f=d.fetchOptions)==null?void 0:f.meta})}const p=y=>{if(ma(y)&&y.silent||this.dispatch({type:"error",error:y}),!ma(y)){var b,E,x,I;(b=(E=this.cache.config).onError)==null||b.call(E,y,this),(x=(I=this.cache.config).onSettled)==null||x.call(I,this.state.data,y,this),process.env.NODE_ENV!=="production"&&this.logger.error(y)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=gp({fn:d.fetchFn,abort:o==null?void 0:o.abort.bind(o),onSuccess:y=>{var b,E,x,I;if(typeof y>"u"){process.env.NODE_ENV!=="production"&&this.logger.error("Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: "+this.queryHash),p(new Error(this.queryHash+" data is undefined"));return}this.setData(y),(b=(E=this.cache.config).onSuccess)==null||b.call(E,y,this),(x=(I=this.cache.config).onSettled)==null||x.call(I,y,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:p,onFail:(y,b)=>{this.dispatch({type:"failed",failureCount:y,error:b})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const r=n=>{var i,s;switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(i=e.meta)!=null?i:null,fetchStatus:ga(this.options.networkMode)?"fetching":"paused",...!n.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:(s=e.dataUpdatedAt)!=null?s:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return ma(o)&&o.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...n,error:o,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),Kt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function bE(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=typeof e<"u",n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"loading",fetchStatus:"idle"}}class _E extends Hs{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,r,n){var i;const s=r.queryKey,o=(i=r.queryHash)!=null?i:ul(s,r);let a=this.get(o);return a||(a=new wE({cache:this,logger:e.getLogger(),queryKey:s,queryHash:o,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const r=this.queriesMap[e.queryHash];r&&(e.destroy(),this.queries=this.queries.filter(n=>n!==e),r===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){Kt.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,r){const[n]=Un(e,r);return typeof n.exact>"u"&&(n.exact=!0),this.queries.find(i=>sp(n,i))}findAll(e,r){const[n]=Un(e,r);return Object.keys(n).length>0?this.queries.filter(i=>sp(n,i)):this.queries}notify(e){Kt.batch(()=>{this.listeners.forEach(({listener:r})=>{r(e)})})}onFocus(){Kt.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){Kt.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class EE extends mp{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||pl,this.observers=[],this.state=e.state||SE(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(r=>r!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,r;return(e=(r=this.retryer)==null?void 0:r.continue())!=null?e:this.execute()}async execute(){const e=()=>{var l;return this.retryer=gp({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(m,P)=>{this.dispatch({type:"failed",failureCount:m,error:P})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(l=this.options.retry)!=null?l:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},r=this.state.status==="loading";try{var n,i,s,o,a,c,u,d;if(!r){var f,p,y,b;this.dispatch({type:"loading",variables:this.options.variables}),await((f=(p=this.mutationCache.config).onMutate)==null?void 0:f.call(p,this.state.variables,this));const m=await((y=(b=this.options).onMutate)==null?void 0:y.call(b,this.state.variables));m!==this.state.context&&this.dispatch({type:"loading",context:m,variables:this.state.variables})}const l=await e();return await((n=(i=this.mutationCache.config).onSuccess)==null?void 0:n.call(i,l,this.state.variables,this.state.context,this)),await((s=(o=this.options).onSuccess)==null?void 0:s.call(o,l,this.state.variables,this.state.context)),await((a=(c=this.mutationCache.config).onSettled)==null?void 0:a.call(c,l,null,this.state.variables,this.state.context,this)),await((u=(d=this.options).onSettled)==null?void 0:u.call(d,l,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:l}),l}catch(l){try{var E,x,I,w,C,v,_,g;throw await((E=(x=this.mutationCache.config).onError)==null?void 0:E.call(x,l,this.state.variables,this.state.context,this)),process.env.NODE_ENV!=="production"&&this.logger.error(l),await((I=(w=this.options).onError)==null?void 0:I.call(w,l,this.state.variables,this.state.context)),await((C=(v=this.mutationCache.config).onSettled)==null?void 0:C.call(v,void 0,l,this.state.variables,this.state.context,this)),await((_=(g=this.options).onSettled)==null?void 0:_.call(g,void 0,l,this.state.variables,this.state.context)),l}finally{this.dispatch({type:"error",error:l})}}}dispatch(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"loading":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!ga(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...n,...e.state}}};this.state=r(this.state),Kt.batch(()=>{this.observers.forEach(n=>{n.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function SE(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class xE extends Hs{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,r,n){const i=new EE({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(r),state:n,defaultOptions:r.mutationKey?e.getMutationDefaults(r.mutationKey):void 0});return this.add(i),i}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(r=>r!==e),this.notify({type:"removed",mutation:e})}clear(){Kt.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(r=>op(e,r))}findAll(e){return this.mutations.filter(r=>op(e,r))}notify(e){Kt.batch(()=>{this.listeners.forEach(({listener:r})=>{r(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const r=this.mutations.filter(n=>n.state.isPaused);return Kt.batch(()=>r.reduce((n,i)=>n.then(()=>i.continue().catch(Br)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function CE(){return{onFetch:t=>{t.fetchFn=()=>{var e,r,n,i,s,o;const a=(e=t.fetchOptions)==null||(r=e.meta)==null?void 0:r.refetchPage,c=(n=t.fetchOptions)==null||(i=n.meta)==null?void 0:i.fetchMore,u=c==null?void 0:c.pageParam,d=(c==null?void 0:c.direction)==="forward",f=(c==null?void 0:c.direction)==="backward",p=((s=t.state.data)==null?void 0:s.pages)||[],y=((o=t.state.data)==null?void 0:o.pageParams)||[];let b=y,E=!1;const x=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>{var l;if((l=t.signal)!=null&&l.aborted)E=!0;else{var m;(m=t.signal)==null||m.addEventListener("abort",()=>{E=!0})}return t.signal}})},I=t.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+t.options.queryHash+"'")),w=(g,l,m,P)=>(b=P?[l,...b]:[...b,l],P?[m,...g]:[...g,m]),C=(g,l,m,P)=>{if(E)return Promise.reject("Cancelled");if(typeof m>"u"&&!l&&g.length)return Promise.resolve(g);const N={queryKey:t.queryKey,pageParam:m,meta:t.options.meta};x(N);const z=I(N);return Promise.resolve(z).then(G=>w(g,m,G,P))};let v;if(!p.length)v=C([]);else if(d){const g=typeof u<"u",l=g?u:yp(t.options,p);v=C(p,g,l)}else if(f){const g=typeof u<"u",l=g?u:OE(t.options,p);v=C(p,g,l,!0)}else{b=[];const g=typeof t.options.getNextPageParam>"u";v=(a&&p[0]?a(p[0],0,p):!0)?C([],g,y[0]):Promise.resolve(w([],y[0],p[0]));for(let m=1;m<p.length;m++)v=v.then(P=>{if(a&&p[m]?a(p[m],m,p):!0){const z=g?y[m]:yp(t.options,P);return C(P,g,z)}return Promise.resolve(w(P,y[m],p[m]))})}return v.then(g=>({pages:g,pageParams:b}))}}}}function yp(t,e){return t.getNextPageParam==null?void 0:t.getNextPageParam(e[e.length-1],e)}function OE(t,e){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(e[0],e)}class DE{constructor(e={}){this.queryCache=e.queryCache||new _E,this.mutationCache=e.mutationCache||new xE,this.logger=e.logger||pl,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0,process.env.NODE_ENV!=="production"&&e.logger&&this.logger.error("Passing a custom logger has been deprecated and will be removed in the next major version.")}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=fa.subscribe(()=>{fa.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=pa.subscribe(()=>{pa.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,r;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(r=this.unsubscribeOnline)==null||r.call(this),this.unsubscribeOnline=void 0)}isFetching(e,r){const[n]=Un(e,r);return n.fetchStatus="fetching",this.queryCache.findAll(n).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,r){var n;return(n=this.queryCache.find(e,r))==null?void 0:n.state.data}ensureQueryData(e,r,n){const i=Zs(e,r,n),s=this.getQueryData(i.queryKey);return s?Promise.resolve(s):this.fetchQuery(i)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:r,state:n})=>{const i=n.data;return[r,i]})}setQueryData(e,r,n){const i=this.queryCache.find(e),s=i==null?void 0:i.state.data,o=fE(r,s);if(typeof o>"u")return;const a=Zs(e),c=this.defaultQueryOptions(a);return this.queryCache.build(this,c).setData(o,{...n,manual:!0})}setQueriesData(e,r,n){return Kt.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,r,n)]))}getQueryState(e,r){var n;return(n=this.queryCache.find(e,r))==null?void 0:n.state}removeQueries(e,r){const[n]=Un(e,r),i=this.queryCache;Kt.batch(()=>{i.findAll(n).forEach(s=>{i.remove(s)})})}resetQueries(e,r,n){const[i,s]=Un(e,r,n),o=this.queryCache,a={type:"active",...i};return Kt.batch(()=>(o.findAll(i).forEach(c=>{c.reset()}),this.refetchQueries(a,s)))}cancelQueries(e,r,n){const[i,s={}]=Un(e,r,n);typeof s.revert>"u"&&(s.revert=!0);const o=Kt.batch(()=>this.queryCache.findAll(i).map(a=>a.cancel(s)));return Promise.all(o).then(Br).catch(Br)}invalidateQueries(e,r,n){const[i,s]=Un(e,r,n);return Kt.batch(()=>{var o,a;if(this.queryCache.findAll(i).forEach(u=>{u.invalidate()}),i.refetchType==="none")return Promise.resolve();const c={...i,type:(o=(a=i.refetchType)!=null?a:i.type)!=null?o:"active"};return this.refetchQueries(c,s)})}refetchQueries(e,r,n){const[i,s]=Un(e,r,n),o=Kt.batch(()=>this.queryCache.findAll(i).filter(c=>!c.isDisabled()).map(c=>{var u;return c.fetch(void 0,{...s,cancelRefetch:(u=s==null?void 0:s.cancelRefetch)!=null?u:!0,meta:{refetchPage:i.refetchPage}})}));let a=Promise.all(o).then(Br);return s!=null&&s.throwOnError||(a=a.catch(Br)),a}fetchQuery(e,r,n){const i=Zs(e,r,n),s=this.defaultQueryOptions(i);typeof s.retry>"u"&&(s.retry=!1);const o=this.queryCache.build(this,s);return o.isStaleByTime(s.staleTime)?o.fetch(s):Promise.resolve(o.state.data)}prefetchQuery(e,r,n){return this.fetchQuery(e,r,n).then(Br).catch(Br)}fetchInfiniteQuery(e,r,n){const i=Zs(e,r,n);return i.behavior=CE(),this.fetchQuery(i)}prefetchInfiniteQuery(e,r,n){return this.fetchInfiniteQuery(e,r,n).then(Br).catch(Br)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,r){const n=this.queryDefaults.find(i=>fi(e)===fi(i.queryKey));n?n.defaultOptions=r:this.queryDefaults.push({queryKey:e,defaultOptions:r})}getQueryDefaults(e){if(!e)return;const r=this.queryDefaults.find(n=>ji(e,n.queryKey));return process.env.NODE_ENV!=="production"&&this.queryDefaults.filter(i=>ji(e,i.queryKey)).length>1&&this.logger.error("[QueryClient] Several query defaults match with key '"+JSON.stringify(e)+"'. The first matching query defaults are used. Please check how query defaults are registered. Order does matter here. cf. https://react-query.tanstack.com/reference/QueryClient#queryclientsetquerydefaults."),r==null?void 0:r.defaultOptions}setMutationDefaults(e,r){const n=this.mutationDefaults.find(i=>fi(e)===fi(i.mutationKey));n?n.defaultOptions=r:this.mutationDefaults.push({mutationKey:e,defaultOptions:r})}getMutationDefaults(e){if(!e)return;const r=this.mutationDefaults.find(n=>ji(e,n.mutationKey));return process.env.NODE_ENV!=="production"&&this.mutationDefaults.filter(i=>ji(e,i.mutationKey)).length>1&&this.logger.error("[QueryClient] Several mutation defaults match with key '"+JSON.stringify(e)+"'. The first matching mutation defaults are used. Please check how mutation defaults are registered. Order does matter here. cf. https://react-query.tanstack.com/reference/QueryClient#queryclientsetmutationdefaults."),r==null?void 0:r.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const r={...this.defaultOptions.queries,...this.getQueryDefaults(e==null?void 0:e.queryKey),...e,_defaulted:!0};return!r.queryHash&&r.queryKey&&(r.queryHash=ul(r.queryKey,r)),typeof r.refetchOnReconnect>"u"&&(r.refetchOnReconnect=r.networkMode!=="always"),typeof r.useErrorBoundary>"u"&&(r.useErrorBoundary=!!r.suspense),r}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e==null?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class IE extends Hs{constructor(e,r){super(),this.client=e,this.options=r,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(r)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),vp(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return gl(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return gl(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,r){const n=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),process.env.NODE_ENV!=="production"&&typeof(e==null?void 0:e.isDataEqual)<"u"&&this.client.getLogger().error("The isDataEqual option has been deprecated and will be removed in the next major version. You can achieve the same functionality by passing a function as the structuralSharing option"),dl(n,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();const s=this.hasListeners();s&&wp(this.currentQuery,i,this.options,n)&&this.executeFetch(),this.updateResult(r),s&&(this.currentQuery!==i||this.options.enabled!==n.enabled||this.options.staleTime!==n.staleTime)&&this.updateStaleTimeout();const o=this.computeRefetchInterval();s&&(this.currentQuery!==i||this.options.enabled!==n.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)}getOptimisticResult(e){const r=this.client.getQueryCache().build(this.client,e),n=this.createResult(r,e);return TE(this,n,e)&&(this.currentResult=n,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),n}getCurrentResult(){return this.currentResult}trackResult(e){const r={};return Object.keys(e).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(n),e[n])})}),r}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...r}={}){return this.fetch({...r,meta:{refetchPage:e}})}fetchOptimistic(e){const r=this.client.defaultQueryOptions(e),n=this.client.getQueryCache().build(this.client,r);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,r))}fetch(e){var r;return this.executeFetch({...e,cancelRefetch:(r=e.cancelRefetch)!=null?r:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let r=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(Br)),r}updateStaleTimeout(){if(this.clearStaleTimeout(),Ks||this.currentResult.isStale||!ll(this.options.staleTime))return;const r=ip(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},r)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(Ks||this.options.enabled===!1||!ll(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||fa.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,r){const n=this.currentQuery,i=this.options,s=this.currentResult,o=this.currentResultState,a=this.currentResultOptions,c=e!==n,u=c?e.state:this.currentQueryInitialState,d=c?this.currentResult:this.previousQueryResult,{state:f}=e;let{dataUpdatedAt:p,error:y,errorUpdatedAt:b,fetchStatus:E,status:x}=f,I=!1,w=!1,C;if(r._optimisticResults){const m=this.hasListeners(),P=!m&&vp(e,r),N=m&&wp(e,n,r,i);(P||N)&&(E=ga(e.options.networkMode)?"fetching":"paused",p||(x="loading")),r._optimisticResults==="isRestoring"&&(E="idle")}if(r.keepPreviousData&&!f.dataUpdatedAt&&d!=null&&d.isSuccess&&x!=="error")C=d.data,p=d.dataUpdatedAt,x=d.status,I=!0;else if(r.select&&typeof f.data<"u")if(s&&f.data===(o==null?void 0:o.data)&&r.select===this.selectFn)C=this.selectResult;else try{this.selectFn=r.select,C=r.select(f.data),C=fl(s==null?void 0:s.data,C,r),this.selectResult=C,this.selectError=null}catch(m){process.env.NODE_ENV!=="production"&&this.client.getLogger().error(m),this.selectError=m}else C=f.data;if(typeof r.placeholderData<"u"&&typeof C>"u"&&x==="loading"){let m;if(s!=null&&s.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData))m=s.data;else if(m=typeof r.placeholderData=="function"?r.placeholderData():r.placeholderData,r.select&&typeof m<"u")try{m=r.select(m),this.selectError=null}catch(P){process.env.NODE_ENV!=="production"&&this.client.getLogger().error(P),this.selectError=P}typeof m<"u"&&(x="success",C=fl(s==null?void 0:s.data,m,r),w=!0)}this.selectError&&(y=this.selectError,C=this.selectResult,b=Date.now(),x="error");const v=E==="fetching",_=x==="loading",g=x==="error";return{status:x,fetchStatus:E,isLoading:_,isSuccess:x==="success",isError:g,isInitialLoading:_&&v,data:C,dataUpdatedAt:p,error:y,errorUpdatedAt:b,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:v,isRefetching:v&&!_,isLoadingError:g&&f.dataUpdatedAt===0,isPaused:E==="paused",isPlaceholderData:w,isPreviousData:I,isRefetchError:g&&f.dataUpdatedAt!==0,isStale:ml(e,r),refetch:this.refetch,remove:this.remove}}updateResult(e){const r=this.currentResult,n=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,dl(n,r))return;this.currentResult=n;const i={cache:!0},s=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!this.trackedProps.size)return!0;const c=new Set(a??this.trackedProps);return this.options.useErrorBoundary&&c.add("error"),Object.keys(this.currentResult).some(u=>{const d=u;return this.currentResult[d]!==r[d]&&c.has(d)})};(e==null?void 0:e.listeners)!==!1&&s()&&(i.listeners=!0),this.notify({...i,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const r=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const r={};e.type==="success"?r.onSuccess=!e.manual:e.type==="error"&&!ma(e.error)&&(r.onError=!0),this.updateResult(r),this.hasListeners()&&this.updateTimers()}notify(e){Kt.batch(()=>{if(e.onSuccess){var r,n,i,s;(r=(n=this.options).onSuccess)==null||r.call(n,this.currentResult.data),(i=(s=this.options).onSettled)==null||i.call(s,this.currentResult.data,null)}else if(e.onError){var o,a,c,u;(o=(a=this.options).onError)==null||o.call(a,this.currentResult.error),(c=(u=this.options).onSettled)==null||c.call(u,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:d})=>{d(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function AE(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function vp(t,e){return AE(t,e)||t.state.dataUpdatedAt>0&&gl(t,e,e.refetchOnMount)}function gl(t,e,r){if(e.enabled!==!1){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&ml(t,e)}return!1}function wp(t,e,r,n){return r.enabled!==!1&&(t!==e||n.enabled===!1)&&(!r.suspense||t.state.status!=="error")&&ml(t,r)}function ml(t,e){return t.isStaleByTime(e.staleTime)}function TE(t,e,r){return r.keepPreviousData?!1:r.placeholderData!==void 0?e.isPlaceholderData:!dl(t.getCurrentResult(),e)}var RE=al();const PE=RE.useSyncExternalStore,bp=gr.createContext(void 0),_p=gr.createContext(!1);function Ep(t,e){return t||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=bp),window.ReactQueryClientContext):bp)}const NE=({context:t}={})=>{const e=gr.useContext(Ep(t,gr.useContext(_p)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},$E=({client:t,children:e,context:r,contextSharing:n=!1})=>{gr.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),process.env.NODE_ENV!=="production"&&n&&t.getLogger().error("The contextSharing option has been deprecated and will be removed in the next major version");const i=Ep(r,n);return gr.createElement(_p.Provider,{value:!r&&n},gr.createElement(i.Provider,{value:t},e))},Sp=gr.createContext(!1),LE=()=>gr.useContext(Sp);Sp.Provider;function ME(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const kE=gr.createContext(ME()),UE=()=>gr.useContext(kE);function FE(t,e){return typeof t=="function"?t(...e):!!t}const jE=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},BE=t=>{gr.useEffect(()=>{t.clearReset()},[t])},qE=({result:t,errorResetBoundary:e,useErrorBoundary:r,query:n})=>t.isError&&!e.isReset()&&!t.isFetching&&FE(r,[t.error,n]),zE=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},WE=(t,e)=>t.isLoading&&t.isFetching&&!e,VE=(t,e,r)=>(t==null?void 0:t.suspense)&&WE(e,r),HE=(t,e,r)=>e.fetchOptimistic(t).then(({data:n})=>{t.onSuccess==null||t.onSuccess(n),t.onSettled==null||t.onSettled(n,null)}).catch(n=>{r.clearReset(),t.onError==null||t.onError(n),t.onSettled==null||t.onSettled(void 0,n)});function KE(t,e){const r=NE({context:t.context}),n=LE(),i=UE(),s=r.defaultQueryOptions(t);s._optimisticResults=n?"isRestoring":"optimistic",s.onError&&(s.onError=Kt.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=Kt.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=Kt.batchCalls(s.onSettled)),zE(s),jE(s,i),BE(i);const[o]=gr.useState(()=>new e(r,s)),a=o.getOptimisticResult(s);if(PE(gr.useCallback(c=>{const u=n?()=>{}:o.subscribe(Kt.batchCalls(c));return o.updateResult(),u},[o,n]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),gr.useEffect(()=>{o.setOptions(s,{listeners:!1})},[s,o]),VE(s,a,n))throw HE(s,o,i);if(qE({result:a,errorResetBoundary:i,useErrorBoundary:s.useErrorBoundary,query:o.getCurrentQuery()}))throw a.error;return s.notifyOnChangeProps?a:o.trackResult(a)}function ZE(t,e,r){const n=Zs(t,e,r);return KE(n,IE)}function yl(){const[t,e]=vt.useState(void 0),[r,n]=vt.useState(void 0),[i,s]=vt.useState(!1);return{data:t,error:r,loading:i,setData:e,setError:n,setLoading:s}}async function xp(t,e){const n=await(await St()).request(t);if(n===void 0&&e)throw console.error("Result is undefined, retrying..."),new Error("Result is undefined, retrying...");return n}function Gs({queryKey:t,wcParams:e,enabled:r,queryOptions:n}){return ZE(t,async()=>xp(e,t),n??{staleTime:t[0]==="getEvent"?7500:45e3,refetchInterval:t[0]==="getEvent"?5e3:3e4,refetchIntervalInBackground:!0,enabled:r,retry:!0})}function Qs(t){const{data:e,error:r,loading:n,setData:i,setError:s,setLoading:o}=yl();async function a(c){try{o(!0),s(void 0);const u=await xp(t??c);return i(u),u}catch(u){throw s(u),u}finally{o(!1)}}return{data:e,error:r,loading:n,request:a}}const vl=t=>t.length<5*2?t:`${t.slice(0,5+5)}...${t.slice(t.length-5,t.length)}`,GE=()=>{const t=jr(),e="aleo:1",[r,n,i]=kn(d=>[d.account,d.setAccount,d.onDisconnect]),{refetch:s,data:o,error:a,isLoading:c}=Gs({queryKey:["useAccount",t==null?void 0:t.topic],enabled:!!t,wcParams:{topic:t==null?void 0:t.topic,chainId:e,request:{jsonrpc:"2.0",method:"getSelectedAccount"}}});Fi(({params:d,topic:f})=>{if(d.event.name==="accountSelected"&&t&&t.topic===f){const y=d.event.address??d.event.data.address,b=d.chainId.split(":")[0],E=d.chainId.split(":")[1];n({network:b,chainId:E,address:y,shortenedAddress:vl(y)})}}),rl(({params:d,topic:f})=>{const p=d.event.address??d.event.data.address,y=d.chainId.split(":")[0],b=d.chainId.split(":")[1];n({network:y,chainId:b,address:p,shortenedAddress:vl(p)})}),tl(({params:d,topic:f})=>{i()}),vt.useEffect(()=>{t&&!c&&s()},[t==null?void 0:t.topic]),vt.useEffect(()=>{if(o){const d=o,f=d==null?void 0:d.account;f&&n(f)}},[o]);const u=a?a.message:o&&o.error;return{account:r,error:u,loading:c}},QE=({address:t,multisig:e})=>{const r=jr(),[n]=kn(p=>[p.account]),i="aleo:1",{refetch:s,data:o,error:a,isLoading:c}=Gs({queryKey:["useBalance",t,(n==null?void 0:n.address)??"",e,r==null?void 0:r.topic],enabled:!!r&&!!n&&(e?!!t:!0),wcParams:{topic:r==null?void 0:r.topic,chainId:i,request:{jsonrpc:"2.0",method:"getBalance",params:{assetId:void 0,address:t}}}});Fi(({params:p,topic:y})=>{const b=p.event.name,E=p.event.address??p.event.data.address;["accountSelected","selectedAccountSynced","sharedAccountSynced"].includes(b)&&r&&r.topic===y&&E===(n==null?void 0:n.address)&&!c&&s()}),vt.useEffect(()=>{r&&!c&&s()},[r==null?void 0:r.topic]);const u=a?a.message:o&&o.error,d=o;return{balances:d==null?void 0:d.balances,error:u,loading:c}};function YE(){const{data:t,error:e,loading:r,setData:n,setError:i,setLoading:s}=yl();async function o(){try{s(!0),i(void 0);const c=await(await St()).connect({requiredNamespaces:{aleo:{methods:Jo,chains:Rs,events:Xo}}});return n(c),ci.emit("session_change"),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE"),c}catch(a){throw i(a),a}finally{s(!1)}}return{data:t,error:e,loading:r,connect:o}}const JE=()=>{const t=jr(),{request:e,data:r,error:n,loading:i}=Qs({topic:(t==null?void 0:t.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"createSharedState",params:{}}}),s=n?n.message:r&&r.error,o=r;return{createSharedState:()=>{e()},data:o==null?void 0:o.data,loading:i,error:s}};var wl={exports:{}},bl,Cp;function XE(){if(Cp)return bl;Cp=1;var t=1e3,e=t*60,r=e*60,n=r*24,i=n*7,s=n*365.25;bl=function(d,f){f=f||{};var p=typeof d;if(p==="string"&&d.length>0)return o(d);if(p==="number"&&isFinite(d))return f.long?c(d):a(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function o(d){if(d=String(d),!(d.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(f){var p=parseFloat(f[1]),y=(f[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return p*s;case"weeks":case"week":case"w":return p*i;case"days":case"day":case"d":return p*n;case"hours":case"hour":case"hrs":case"hr":case"h":return p*r;case"minutes":case"minute":case"mins":case"min":case"m":return p*e;case"seconds":case"second":case"secs":case"sec":case"s":return p*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function a(d){var f=Math.abs(d);return f>=n?Math.round(d/n)+"d":f>=r?Math.round(d/r)+"h":f>=e?Math.round(d/e)+"m":f>=t?Math.round(d/t)+"s":d+"ms"}function c(d){var f=Math.abs(d);return f>=n?u(d,f,n,"day"):f>=r?u(d,f,r,"hour"):f>=e?u(d,f,e,"minute"):f>=t?u(d,f,t,"second"):d+" ms"}function u(d,f,p,y){var b=f>=p*1.5;return Math.round(d/p)+" "+y+(b?"s":"")}return bl}function e5(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=XE(),r.destroy=u,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let f=0;for(let p=0;p<d.length;p++)f=(f<<5)-f+d.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(d){let f,p=null,y,b;function E(...x){if(!E.enabled)return;const I=E,w=Number(new Date),C=w-(f||w);I.diff=C,I.prev=f,I.curr=w,f=w,x[0]=r.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let v=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(g,l)=>{if(g==="%%")return"%";v++;const m=r.formatters[l];if(typeof m=="function"){const P=x[v];g=m.call(I,P),x.splice(v,1),v--}return g}),r.formatArgs.call(I,x),(I.log||r.log).apply(I,x)}return E.namespace=d,E.useColors=r.useColors(),E.color=r.selectColor(d),E.extend=n,E.destroy=r.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(y!==r.namespaces&&(y=r.namespaces,b=r.enabled(d)),b),set:x=>{p=x}}),typeof r.init=="function"&&r.init(E),E}function n(d,f){const p=r(this.namespace+(typeof f>"u"?":":f)+d);return p.log=this.log,p}function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let f;const p=(typeof d=="string"?d:"").split(/[\s,]+/),y=p.length;for(f=0;f<y;f++)p[f]&&(d=p[f].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function s(){const d=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),d}function o(d){if(d[d.length-1]==="*")return!0;let f,p;for(f=0,p=r.skips.length;f<p;f++)if(r.skips[f].test(d))return!1;for(f=0,p=r.names.length;f<p;f++)if(r.names[f].test(d))return!0;return!1}function a(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function c(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var t5=e5;(function(t,e){e.formatArgs=n,e.save=i,e.load=s,e.useColors=r,e.storage=o(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let d=0,f=0;c[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(d++,p==="%c"&&(f=d))}),c.splice(f,0,u)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function s(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function o(){try{return localStorage}catch{}}t.exports=t5(e);const{formatters:a}=t.exports;a.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(wl,wl.exports);var r5=wl.exports;const _l=Co(r5)("wallet:sdk");_l.enabled=!0;const n5=t=>{_l("useDecrypt",t);const e=jr(),{request:r,data:n,error:i,loading:s}=Qs({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"decrypt",params:{ciphertexts:t}}}),o=i?i.message:n&&n.error,a=n;return{decrypt:()=>{t&&r()},plaintexts:a==null?void 0:a.plaintexts,loading:s,error:o}},i5={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function Op(t,e){const{message:r,code:n}=i5[t];return{message:e?`${r} ${e}`:r,code:n}}function s5(){const t=jr(),{error:e,loading:r,setError:n,setLoading:i}=yl();async function s(){try{i(!0),n(void 0),await(await St()).disconnect({topic:t==null?void 0:t.topic,reason:Op("USER_DISCONNECTED")}),ci.emit("session_change"),kn.setState({account:void 0})}catch(o){throw n(o),o}finally{i(!1)}}return{error:e,loading:r,disconnect:s}}const o5=({id:t,address:e,multisig:r=!1})=>{const n=jr(),[i]=kn(b=>[b.account]),{refetch:s,data:o,error:a,isLoading:c}=Gs({queryKey:["useEvent",i==null?void 0:i.address,e,r,t??"",n==null?void 0:n.topic],enabled:!!t&&!!n&&!!i&&(r?!!e:!0),wcParams:{topic:(n==null?void 0:n.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getEvent",params:{id:t,address:e}}}});Fi(({params:b,topic:E})=>{const x=b.event.name;(x==="selectedAccountSynced"&&!r||x==="sharedAccountSynced"&&r)&&s()});const u=!!n&&!!i;vt.useEffect(()=>{u&&!c&&s()},[u]);const d=()=>{!!n&&!!i&&!c&&s()},f=a?a.message:o&&o.error,p=o,y=p==null?void 0:p.event;return{fetchEvent:d,event:y,error:f,loading:c}},a5=({filter:t,page:e})=>{const r=jr(),[n]=kn(b=>[b.account]);(t==null?void 0:t.programId)===""&&(t.programId=void 0);const{refetch:i,data:s,error:o,isLoading:a}=Gs({queryKey:["useEvents",n==null?void 0:n.address,t,e,r==null?void 0:r.topic],enabled:!!r&&!!n,wcParams:{topic:(r==null?void 0:r.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"getEvents",params:{filter:t,page:e}}}});Fi(({id:b,params:E,topic:x})=>{const I=E.event.name,w=E.event.address??E.event.data.address;I==="selectedAccountSynced"&&r&&r.topic===x&&w===(n==null?void 0:n.address)&&!a&&i()});const c=!!r&&!!n;vt.useEffect(()=>{c&&!a&&i()},[c]);const u=()=>{!!r&&!!n&&!a&&i()},d=o?o.message:s&&s.error,f=s,p=f==null?void 0:f.events,y=(f==null?void 0:f.pageCount)??0;return{fetchPage:u,events:p,error:d,loading:a,page:e,pageCount:y}},c5=t=>{const e=jr(),{request:r,data:n,error:i,loading:s}=Qs({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"importSharedState",params:{seed:t}}}),o=i?i.message:n&&n.error,a=n;return{importSharedState:()=>{r()},data:a==null?void 0:a.data,loading:s,error:o}},l5=t=>{try{return JSON.stringify(t,null,2).replaceAll('"',"")??""}catch{return""}},u5=({address:t,multisig:e=!1,filter:r,page:n})=>{const i=jr(),[s,o]=kn(I=>[I.chainId,I.account]),{refetch:a,data:c,error:u,isLoading:d}=Gs({queryKey:["useRecords",o==null?void 0:o.address,t,e,r,n,i==null?void 0:i.topic],enabled:(e?!!t:!0)&&!!i&&!!o,wcParams:{topic:i==null?void 0:i.topic,chainId:s,request:{jsonrpc:"2.0",method:"getRecords",params:{address:t,filter:r,page:n}}}}),f=!!i&&!!o&&(e?!!t:!0);Fi(({params:I})=>{const w=I.event.name;(w==="selectedAccountSynced"&&!e||w==="sharedAccountSynced"&&e)&&a()});const p=()=>{f&&!d&&a()},y=u?u.message:c&&c.error,b=c,E=b==null?void 0:b.records,x=(b==null?void 0:b.pageCount)??0;return{fetchPage:p,records:E,error:y,loading:d,page:n,pageCount:x}},d5=(t,e)=>{const r=jr(),{request:n,data:i,error:s,loading:o}=Qs({topic:(r==null?void 0:r.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"requestSignature",params:{message:t,address:e}}}),a=s?s.message:i&&i.error;return{requestSignature:()=>{n()},response:i,loading:o,error:a}},h5=t=>{const e=jr(),r=t==null?void 0:t.inputs.map(d=>typeof d=="string"?d:d.plaintext),{request:n,data:i,error:s,loading:o}=Qs({topic:(e==null?void 0:e.topic)??"",chainId:"aleo:1",request:{jsonrpc:"2.0",method:"requestCreateEvent",params:{...t,inputs:r}}}),a=s?s.message:i&&i.error,c=i;return{createEvent:()=>{t&&(_l("useCreateEvent requesting...",t),n())},eventId:c==null?void 0:c.eventId,loading:o,error:a}},f5=async()=>{const t=await St(),e=await t.getSession(),r="aleo:1";if(!e||!r||!t)return{error:"no session, chainId, or connection"};try{const n=await t.request({topic:e==null?void 0:e.topic,chainId:r,request:{jsonrpc:"2.0",method:"getSelectedAccount"}});return kn.setState({account:n.account}),n}catch(n){const i=n.message;return console.error("getAccount error",i),{error:i}}},p5=async({address:t})=>{const e=await St(),r=await e.getSession(),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};try{return await e.request({topic:r==null?void 0:r.topic,chainId:n,request:{jsonrpc:"2.0",method:"getBalance",params:{assetId:void 0,address:t}}})}catch(i){const s=i.message;return console.error("getBalance error",s),{error:s}}},g5=async()=>{const t=await St();if(!t)throw new Error("call setConnection() first!");try{const e=await t.connect({requiredNamespaces:{aleo:{methods:Jo,chains:Rs,events:Xo}}});return ci.emit("session_change"),window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE"),e}catch(e){console.error("connect error",e.message)}},m5=async t=>{const e=await St(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};const i=t==null?void 0:t.inputs.map(s=>typeof s=="string"?s:s.plaintext);try{return await e.request({topic:r.topic,chainId:n,request:{jsonrpc:"2.0",method:"requestCreateEvent",params:{...t,inputs:i}}})}catch(s){const o=s.message;return console.error("createEvent error",o),{error:o}}},y5=async()=>{const t=await St(),e=await(t==null?void 0:t.getSession()),r="aleo:1";if(!e||!r||!t)return{error:"no session, chainId, or connection"};try{return await t.request({topic:e.topic,chainId:r,request:{jsonrpc:"2.0",method:"createSharedState",params:{}}})}catch(n){const i=n.message;return console.error("createSharedState error",i),{error:i}}},v5=async t=>{const e=await St(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};try{return await e.request({topic:r.topic,chainId:n,request:{jsonrpc:"2.0",method:"decrypt",params:{ciphertexts:t}}})}catch(i){return console.error("decrypt error",i.message),{error:i.message}}},w5=async()=>{const t=await St(),e=await(t==null?void 0:t.getSession());if(!e||!t)return{error:"no session, or connection"};try{return await t.disconnect({reason:Op("USER_DISCONNECTED"),topic:e.topic}),ci.emit("session_change"),kn.setState({account:void 0}),{}}catch(r){const n=r.message;return console.error("error disconnecting",n),{error:n}}},b5=async({id:t,address:e})=>{const r=await St(),n=await(r==null?void 0:r.getSession()),i="aleo:1";if(!n||!i||!r)return{event:void 0,error:"no session, chainId, or connection"};const s=async()=>await r.request({topic:(n==null?void 0:n.topic)??"",chainId:i,request:{jsonrpc:"2.0",method:"getEvent",params:{id:t,address:e}}});try{return await s()}catch(o){const a=o.message;return console.error("getEvents error",a),{error:a}}},_5=async t=>{const e=await St(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{events:void 0,error:"no session, chainId, or connection"};(t==null?void 0:t.programId)===""&&(t.programId=void 0);const i=async(s=0)=>await e.request({topic:(r==null?void 0:r.topic)??"",chainId:n,request:{jsonrpc:"2.0",method:"getEvents",params:{filter:t,page:s}}});try{return await i()}catch(s){const o=s.message;return console.error("getEvents error",o),{error:o}}},E5=async t=>{const e=await St(),r=await(e==null?void 0:e.getSession()),n="aleo:1";if(!r||!n||!e)return{error:"no session, chainId, or connection"};try{return await e.request({topic:(r==null?void 0:r.topic)??"",chainId:n,request:{jsonrpc:"2.0",method:"importSharedState",params:{seed:t}}})}catch(i){const s=i.message;return console.error("importSharedState error",s),{error:s}}},S5=async({address:t,filter:e,page:r=0})=>{const n=await St(),i=await(n==null?void 0:n.getSession()),s="aleo:1";if(!i||!s||!n)return{error:"no session, chainId, or connection"};const o=async(a=0)=>await n.request({topic:i.topic,chainId:s,request:{jsonrpc:"2.0",method:"getRecords",params:{address:t,filter:e,page:a}}});try{return await o()}catch(a){const c=a.message;return console.error("getRecords error",c),{error:c}}},x5=async({message:t,address:e})=>{const r=await St(),n=await(r==null?void 0:r.getSession()),i="aleo:1";if(!n||!i||!r)return{error:"no session, chainId, or connection"};try{return await r.request({topic:n.topic,chainId:i,request:{jsonrpc:"2.0",method:"requestSignature",params:{message:t,address:e}}})}catch(s){const o=s.message;return console.error("signature error",o),{error:o}}},C5=50;var El={exports:{}},Ys={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp;function O5(){if(Dp)return Ys;Dp=1;var t=vt,e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,c,u){var d,f={},p=null,y=null;u!==void 0&&(p=""+u),c.key!==void 0&&(p=""+c.key),c.ref!==void 0&&(y=c.ref);for(d in c)n.call(c,d)&&!s.hasOwnProperty(d)&&(f[d]=c[d]);if(a&&a.defaultProps)for(d in c=a.defaultProps,c)f[d]===void 0&&(f[d]=c[d]);return{$$typeof:e,type:a,key:p,ref:y,props:f,_owner:i.current}}return Ys.Fragment=r,Ys.jsx=o,Ys.jsxs=o,Ys}var Js={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ip;function D5(){return Ip||(Ip=1,process.env.NODE_ENV!=="production"&&function(){var t=vt,e=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),b=Symbol.iterator,E="@@iterator";function x(T){if(T===null||typeof T!="object")return null;var H=b&&T[b]||T[E];return typeof H=="function"?H:null}var I=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function w(T){{for(var H=arguments.length,ue=new Array(H>1?H-1:0),Ce=1;Ce<H;Ce++)ue[Ce-1]=arguments[Ce];C("error",T,ue)}}function C(T,H,ue){{var Ce=I.ReactDebugCurrentFrame,st=Ce.getStackAddendum();st!==""&&(H+="%s",ue=ue.concat([st]));var Ge=ue.map(function(Je){return String(Je)});Ge.unshift("Warning: "+H),Function.prototype.apply.call(console[T],console,Ge)}}var v=!1,_=!1,g=!1,l=!1,m=!1,P;P=Symbol.for("react.module.reference");function N(T){return!!(typeof T=="string"||typeof T=="function"||T===n||T===s||m||T===i||T===u||T===d||l||T===y||v||_||g||typeof T=="object"&&T!==null&&(T.$$typeof===p||T.$$typeof===f||T.$$typeof===o||T.$$typeof===a||T.$$typeof===c||T.$$typeof===P||T.getModuleId!==void 0))}function z(T,H,ue){var Ce=T.displayName;if(Ce)return Ce;var st=H.displayName||H.name||"";return st!==""?ue+"("+st+")":ue}function W(T){return T.displayName||"Context"}function G(T){if(T==null)return null;if(typeof T.tag=="number"&&w("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof T=="function")return T.displayName||T.name||null;if(typeof T=="string")return T;switch(T){case n:return"Fragment";case r:return"Portal";case s:return"Profiler";case i:return"StrictMode";case u:return"Suspense";case d:return"SuspenseList"}if(typeof T=="object")switch(T.$$typeof){case a:var H=T;return W(H)+".Consumer";case o:var ue=T;return W(ue._context)+".Provider";case c:return z(T,T.render,"ForwardRef");case f:var Ce=T.displayName||null;return Ce!==null?Ce:G(T.type)||"Memo";case p:{var st=T,Ge=st._payload,Je=st._init;try{return G(Je(Ge))}catch{return null}}}return null}var $=Object.assign,j=0,oe,Y,Z,X,K,ee,xe;function ne(){}ne.__reactDisabledLog=!0;function Ee(){{if(j===0){oe=console.log,Y=console.info,Z=console.warn,X=console.error,K=console.group,ee=console.groupCollapsed,xe=console.groupEnd;var T={configurable:!0,enumerable:!0,value:ne,writable:!0};Object.defineProperties(console,{info:T,log:T,warn:T,error:T,group:T,groupCollapsed:T,groupEnd:T})}j++}}function fe(){{if(j--,j===0){var T={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:$({},T,{value:oe}),info:$({},T,{value:Y}),warn:$({},T,{value:Z}),error:$({},T,{value:X}),group:$({},T,{value:K}),groupCollapsed:$({},T,{value:ee}),groupEnd:$({},T,{value:xe})})}j<0&&w("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var _e=I.ReactCurrentDispatcher,q;function B(T,H,ue){{if(q===void 0)try{throw Error()}catch(st){var Ce=st.stack.trim().match(/\n( *(at )?)/);q=Ce&&Ce[1]||""}return`
`+q+T}}var M=!1,h;{var R=typeof WeakMap=="function"?WeakMap:Map;h=new R}function ce(T,H){if(!T||M)return"";{var ue=h.get(T);if(ue!==void 0)return ue}var Ce;M=!0;var st=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Ge;Ge=_e.current,_e.current=null,Ee();try{if(H){var Je=function(){throw Error()};if(Object.defineProperty(Je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Je,[])}catch(sr){Ce=sr}Reflect.construct(T,[],Je)}else{try{Je.call()}catch(sr){Ce=sr}T.call(Je.prototype)}}else{try{throw Error()}catch(sr){Ce=sr}T()}}catch(sr){if(sr&&Ce&&typeof sr.stack=="string"){for(var Ke=sr.stack.split(`
`),Yt=Ce.stack.split(`
`),Ct=Ke.length-1,Nt=Yt.length-1;Ct>=1&&Nt>=0&&Ke[Ct]!==Yt[Nt];)Nt--;for(;Ct>=1&&Nt>=0;Ct--,Nt--)if(Ke[Ct]!==Yt[Nt]){if(Ct!==1||Nt!==1)do if(Ct--,Nt--,Nt<0||Ke[Ct]!==Yt[Nt]){var zt=`
`+Ke[Ct].replace(" at new "," at ");return T.displayName&&zt.includes("<anonymous>")&&(zt=zt.replace("<anonymous>",T.displayName)),typeof T=="function"&&h.set(T,zt),zt}while(Ct>=1&&Nt>=0);break}}}finally{M=!1,_e.current=Ge,fe(),Error.prepareStackTrace=st}var fn=T?T.displayName||T.name:"",Ei=fn?B(fn):"";return typeof T=="function"&&h.set(T,Ei),Ei}function he(T,H,ue){return ce(T,!1)}function We(T){var H=T.prototype;return!!(H&&H.isReactComponent)}function Ie(T,H,ue){if(T==null)return"";if(typeof T=="function")return ce(T,We(T));if(typeof T=="string")return B(T);switch(T){case u:return B("Suspense");case d:return B("SuspenseList")}if(typeof T=="object")switch(T.$$typeof){case c:return he(T.render);case f:return Ie(T.type,H,ue);case p:{var Ce=T,st=Ce._payload,Ge=Ce._init;try{return Ie(Ge(st),H,ue)}catch{}}}return""}var Me=Object.prototype.hasOwnProperty,Xe={},pt=I.ReactDebugCurrentFrame;function dt(T){if(T){var H=T._owner,ue=Ie(T.type,T._source,H?H.type:null);pt.setExtraStackFrame(ue)}else pt.setExtraStackFrame(null)}function Ve(T,H,ue,Ce,st){{var Ge=Function.call.bind(Me);for(var Je in T)if(Ge(T,Je)){var Ke=void 0;try{if(typeof T[Je]!="function"){var Yt=Error((Ce||"React class")+": "+ue+" type `"+Je+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof T[Je]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Yt.name="Invariant Violation",Yt}Ke=T[Je](H,Je,Ce,ue,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Ct){Ke=Ct}Ke&&!(Ke instanceof Error)&&(dt(st),w("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",Ce||"React class",ue,Je,typeof Ke),dt(null)),Ke instanceof Error&&!(Ke.message in Xe)&&(Xe[Ke.message]=!0,dt(st),w("Failed %s type: %s",ue,Ke.message),dt(null))}}}var Be=Array.isArray;function Ne(T){return Be(T)}function ke(T){{var H=typeof Symbol=="function"&&Symbol.toStringTag,ue=H&&T[Symbol.toStringTag]||T.constructor.name||"Object";return ue}}function $e(T){try{return Te(T),!1}catch{return!0}}function Te(T){return""+T}function Ae(T){if($e(T))return w("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",ke(T)),Te(T)}var Se=I.ReactCurrentOwner,Ue={key:!0,ref:!0,__self:!0,__source:!0},qe,De,He;He={};function et(T){if(Me.call(T,"ref")){var H=Object.getOwnPropertyDescriptor(T,"ref").get;if(H&&H.isReactWarning)return!1}return T.ref!==void 0}function nt(T){if(Me.call(T,"key")){var H=Object.getOwnPropertyDescriptor(T,"key").get;if(H&&H.isReactWarning)return!1}return T.key!==void 0}function tt(T,H){if(typeof T.ref=="string"&&Se.current&&H&&Se.current.stateNode!==H){var ue=G(Se.current.type);He[ue]||(w('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',G(Se.current.type),T.ref),He[ue]=!0)}}function it(T,H){{var ue=function(){qe||(qe=!0,w("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",H))};ue.isReactWarning=!0,Object.defineProperty(T,"key",{get:ue,configurable:!0})}}function Sr(T,H){{var ue=function(){De||(De=!0,w("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",H))};ue.isReactWarning=!0,Object.defineProperty(T,"ref",{get:ue,configurable:!0})}}var fr=function(T,H,ue,Ce,st,Ge,Je){var Ke={$$typeof:e,type:T,key:H,ref:ue,props:Je,_owner:Ge};return Ke._store={},Object.defineProperty(Ke._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Ke,"_self",{configurable:!1,enumerable:!1,writable:!1,value:Ce}),Object.defineProperty(Ke,"_source",{configurable:!1,enumerable:!1,writable:!1,value:st}),Object.freeze&&(Object.freeze(Ke.props),Object.freeze(Ke)),Ke};function Mr(T,H,ue,Ce,st){{var Ge,Je={},Ke=null,Yt=null;ue!==void 0&&(Ae(ue),Ke=""+ue),nt(H)&&(Ae(H.key),Ke=""+H.key),et(H)&&(Yt=H.ref,tt(H,st));for(Ge in H)Me.call(H,Ge)&&!Ue.hasOwnProperty(Ge)&&(Je[Ge]=H[Ge]);if(T&&T.defaultProps){var Ct=T.defaultProps;for(Ge in Ct)Je[Ge]===void 0&&(Je[Ge]=Ct[Ge])}if(Ke||Yt){var Nt=typeof T=="function"?T.displayName||T.name||"Unknown":T;Ke&&it(Je,Nt),Yt&&Sr(Je,Nt)}return fr(T,Ke,Yt,st,Ce,Se.current,Je)}}var Gt=I.ReactCurrentOwner,Qt=I.ReactDebugCurrentFrame;function Ar(T){if(T){var H=T._owner,ue=Ie(T.type,T._source,H?H.type:null);Qt.setExtraStackFrame(ue)}else Qt.setExtraStackFrame(null)}var hn;hn=!1;function wt(T){return typeof T=="object"&&T!==null&&T.$$typeof===e}function bt(){{if(Gt.current){var T=G(Gt.current.type);if(T)return`

Check the render method of \``+T+"`."}return""}}function At(T){{if(T!==void 0){var H=T.fileName.replace(/^.*[\\\/]/,""),ue=T.lineNumber;return`

Check your code at `+H+":"+ue+"."}return""}}var xt={};function Tt(T){{var H=bt();if(!H){var ue=typeof T=="string"?T:T.displayName||T.name;ue&&(H=`

Check the top-level render call using <`+ue+">.")}return H}}function _t(T,H){{if(!T._store||T._store.validated||T.key!=null)return;T._store.validated=!0;var ue=Tt(H);if(xt[ue])return;xt[ue]=!0;var Ce="";T&&T._owner&&T._owner!==Gt.current&&(Ce=" It was passed a child from "+G(T._owner.type)+"."),Ar(T),w('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',ue,Ce),Ar(null)}}function Mt(T,H){{if(typeof T!="object")return;if(Ne(T))for(var ue=0;ue<T.length;ue++){var Ce=T[ue];wt(Ce)&&_t(Ce,H)}else if(wt(T))T._store&&(T._store.validated=!0);else if(T){var st=x(T);if(typeof st=="function"&&st!==T.entries)for(var Ge=st.call(T),Je;!(Je=Ge.next()).done;)wt(Je.value)&&_t(Je.value,H)}}}function jt(T){{var H=T.type;if(H==null||typeof H=="string")return;var ue;if(typeof H=="function")ue=H.propTypes;else if(typeof H=="object"&&(H.$$typeof===c||H.$$typeof===f))ue=H.propTypes;else return;if(ue){var Ce=G(H);Ve(ue,T.props,"prop",Ce,T)}else if(H.PropTypes!==void 0&&!hn){hn=!0;var st=G(H);w("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",st||"Unknown")}typeof H.getDefaultProps=="function"&&!H.getDefaultProps.isReactClassApproved&&w("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Bt(T){{for(var H=Object.keys(T.props),ue=0;ue<H.length;ue++){var Ce=H[ue];if(Ce!=="children"&&Ce!=="key"){Ar(T),w("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",Ce),Ar(null);break}}T.ref!==null&&(Ar(T),w("Invalid attribute `ref` supplied to `React.Fragment`."),Ar(null))}}function kt(T,H,ue,Ce,st,Ge){{var Je=N(T);if(!Je){var Ke="";(T===void 0||typeof T=="object"&&T!==null&&Object.keys(T).length===0)&&(Ke+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Yt=At(st);Yt?Ke+=Yt:Ke+=bt();var Ct;T===null?Ct="null":Ne(T)?Ct="array":T!==void 0&&T.$$typeof===e?(Ct="<"+(G(T.type)||"Unknown")+" />",Ke=" Did you accidentally export a JSX literal instead of a component?"):Ct=typeof T,w("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Ct,Ke)}var Nt=Mr(T,H,ue,st,Ge);if(Nt==null)return Nt;if(Je){var zt=H.children;if(zt!==void 0)if(Ce)if(Ne(zt)){for(var fn=0;fn<zt.length;fn++)Mt(zt[fn],T);Object.freeze&&Object.freeze(zt)}else w("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Mt(zt,T)}return T===n?Bt(Nt):jt(Nt),Nt}}function qt(T,H,ue){return kt(T,H,ue,!0)}function Rt(T,H,ue){return kt(T,H,ue,!1)}var Pt=Rt,yt=qt;Js.Fragment=n,Js.jsx=Pt,Js.jsxs=yt}()),Js}process.env.NODE_ENV==="production"?El.exports=O5():El.exports=D5();var I5=El.exports;const Ap=new DE,A5=({dAppName:t,dAppDescription:e,dAppUrl:r,dAppIconURL:n,children:i})=>(vt.useEffect(()=>{Pf({dAppName:t,dAppDescription:e,dAppUrl:r,dAppIconURL:n}),as.defaultMaxListeners=100},[]),I5.jsx($E,{client:Ap,children:i})),T5=["wc@2:client:0.3//proposal","wc@2:core:0.3//subscription","wc@2:core:0.3//keychain","wc@2:core:0.3//messages","wc@2:core:0.3//history","wc@2:client:0.3//session","wc@2:core:0.3//expirer","WCM_WALLETCONNECT_CLIENT_ID","wc@2:core:0.3//pairing","debug"],Tp=J0.version;try{const t=localStorage.getItem("puzzle-sdk-version");Tp!==t&&(T5.forEach(e=>{localStorage.removeItem(e)}),localStorage.setItem("puzzle-sdk-version",Tp))}catch(t){console.error(t)}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ya=window,Sl=ya.ShadowRoot&&(ya.ShadyCSS===void 0||ya.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,xl=Symbol(),Rp=new WeakMap;let Pp=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==xl)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(Sl&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=Rp.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&Rp.set(r,e))}return e}toString(){return this.cssText}};const R5=t=>new Pp(typeof t=="string"?t:t+"",void 0,xl),ut=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,i,s)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new Pp(r,t,xl)},P5=(t,e)=>{Sl?t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet):e.forEach(r=>{const n=document.createElement("style"),i=ya.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)})},Np=Sl?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return R5(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Cl;const va=window,$p=va.trustedTypes,N5=$p?$p.emptyScript:"",Lp=va.reactiveElementPolyfillSupport,Ol={toAttribute(t,e){switch(e){case Boolean:t=t?N5:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},Mp=(t,e)=>e!==t&&(e==e||t==t),Dl={attribute:!0,type:String,converter:Ol,reflect:!1,hasChanged:Mp},Il="finalized";let Bi=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var r;this.finalize(),((r=this.h)!==null&&r!==void 0?r:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((r,n)=>{const i=this._$Ep(n,r);i!==void 0&&(this._$Ev.set(i,n),e.push(i))}),e}static createProperty(e,r=Dl){if(r.state&&(r.attribute=!1),this.finalize(),this.elementProperties.set(e,r),!r.noAccessor&&!this.prototype.hasOwnProperty(e)){const n=typeof e=="symbol"?Symbol():"__"+e,i=this.getPropertyDescriptor(e,n,r);i!==void 0&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){return{get(){return this[r]},set(i){const s=this[e];this[r]=i,this.requestUpdate(e,s,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||Dl}static finalize(){if(this.hasOwnProperty(Il))return!1;this[Il]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const r=this.properties,n=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(const i of n)this.createProperty(i,r[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const i of n)r.unshift(Np(i))}else e!==void 0&&r.push(Np(e));return r}static _$Ep(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(r=>r(this))}addController(e){var r,n;((r=this._$ES)!==null&&r!==void 0?r:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)===null||n===void 0||n.call(e))}removeController(e){var r;(r=this._$ES)===null||r===void 0||r.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,r)=>{this.hasOwnProperty(r)&&(this._$Ei.set(r,this[r]),delete this[r])})}createRenderRoot(){var e;const r=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return P5(r,this.constructor.elementStyles),r}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostConnected)===null||n===void 0?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostDisconnected)===null||n===void 0?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$EO(e,r,n=Dl){var i;const s=this.constructor._$Ep(e,n);if(s!==void 0&&n.reflect===!0){const o=(((i=n.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?n.converter:Ol).toAttribute(r,n.type);this._$El=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$El=null}}_$AK(e,r){var n;const i=this.constructor,s=i._$Ev.get(e);if(s!==void 0&&this._$El!==s){const o=i.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((n=o.converter)===null||n===void 0?void 0:n.fromAttribute)!==void 0?o.converter:Ol;this._$El=s,this[s]=a.fromAttribute(r,o.type),this._$El=null}}requestUpdate(e,r,n){let i=!0;e!==void 0&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||Mp)(this[e],r)?(this._$AL.has(e)||this._$AL.set(e,r),n.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,s)=>this[s]=i),this._$Ei=void 0);let r=!1;const n=this._$AL;try{r=this.shouldUpdate(n),r?(this.willUpdate(n),(e=this._$ES)===null||e===void 0||e.forEach(i=>{var s;return(s=i.hostUpdate)===null||s===void 0?void 0:s.call(i)}),this.update(n)):this._$Ek()}catch(i){throw r=!1,this._$Ek(),i}r&&this._$AE(n)}willUpdate(e){}_$AE(e){var r;(r=this._$ES)===null||r===void 0||r.forEach(n=>{var i;return(i=n.hostUpdated)===null||i===void 0?void 0:i.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((r,n)=>this._$EO(n,this[n],r)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};Bi[Il]=!0,Bi.elementProperties=new Map,Bi.elementStyles=[],Bi.shadowRootOptions={mode:"open"},Lp==null||Lp({ReactiveElement:Bi}),((Cl=va.reactiveElementVersions)!==null&&Cl!==void 0?Cl:va.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Al;const wa=window,qi=wa.trustedTypes,kp=qi?qi.createPolicy("lit-html",{createHTML:t=>t}):void 0,Tl="$lit$",Fn=`lit$${(Math.random()+"").slice(9)}$`,Up="?"+Fn,$5=`<${Up}>`,pi=document,Xs=()=>pi.createComment(""),eo=t=>t===null||typeof t!="object"&&typeof t!="function",Fp=Array.isArray,L5=t=>Fp(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Rl=`[ 	
\f\r]`,to=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,jp=/-->/g,Bp=/>/g,gi=RegExp(`>|${Rl}(?:([^\\s"'>=/]+)(${Rl}*=${Rl}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),qp=/'/g,zp=/"/g,Wp=/^(?:script|style|textarea|title)$/i,Vp=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),le=Vp(1),Ft=Vp(2),mi=Symbol.for("lit-noChange"),Zt=Symbol.for("lit-nothing"),Hp=new WeakMap,yi=pi.createTreeWalker(pi,129,null,!1);function Kp(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return kp!==void 0?kp.createHTML(e):e}const M5=(t,e)=>{const r=t.length-1,n=[];let i,s=e===2?"<svg>":"",o=to;for(let a=0;a<r;a++){const c=t[a];let u,d,f=-1,p=0;for(;p<c.length&&(o.lastIndex=p,d=o.exec(c),d!==null);)p=o.lastIndex,o===to?d[1]==="!--"?o=jp:d[1]!==void 0?o=Bp:d[2]!==void 0?(Wp.test(d[2])&&(i=RegExp("</"+d[2],"g")),o=gi):d[3]!==void 0&&(o=gi):o===gi?d[0]===">"?(o=i??to,f=-1):d[1]===void 0?f=-2:(f=o.lastIndex-d[2].length,u=d[1],o=d[3]===void 0?gi:d[3]==='"'?zp:qp):o===zp||o===qp?o=gi:o===jp||o===Bp?o=to:(o=gi,i=void 0);const y=o===gi&&t[a+1].startsWith("/>")?" ":"";s+=o===to?c+$5:f>=0?(n.push(u),c.slice(0,f)+Tl+c.slice(f)+Fn+y):c+Fn+(f===-2?(n.push(void 0),a):y)}return[Kp(t,s+(t[r]||"<?>")+(e===2?"</svg>":"")),n]};class ro{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[u,d]=M5(e,r);if(this.el=ro.createElement(u,n),yi.currentNode=this.el.content,r===2){const f=this.el.content,p=f.firstChild;p.remove(),f.append(...p.childNodes)}for(;(i=yi.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes()){const f=[];for(const p of i.getAttributeNames())if(p.endsWith(Tl)||p.startsWith(Fn)){const y=d[o++];if(f.push(p),y!==void 0){const b=i.getAttribute(y.toLowerCase()+Tl).split(Fn),E=/([.?@])?(.*)/.exec(y);c.push({type:1,index:s,name:E[2],strings:b,ctor:E[1]==="."?U5:E[1]==="?"?j5:E[1]==="@"?B5:ba})}else c.push({type:6,index:s})}for(const p of f)i.removeAttribute(p)}if(Wp.test(i.tagName)){const f=i.textContent.split(Fn),p=f.length-1;if(p>0){i.textContent=qi?qi.emptyScript:"";for(let y=0;y<p;y++)i.append(f[y],Xs()),yi.nextNode(),c.push({type:2,index:++s});i.append(f[p],Xs())}}}else if(i.nodeType===8)if(i.data===Up)c.push({type:2,index:s});else{let f=-1;for(;(f=i.data.indexOf(Fn,f+1))!==-1;)c.push({type:7,index:s}),f+=Fn.length-1}s++}}static createElement(e,r){const n=pi.createElement("template");return n.innerHTML=e,n}}function zi(t,e,r=t,n){var i,s,o,a;if(e===mi)return e;let c=n!==void 0?(i=r._$Co)===null||i===void 0?void 0:i[n]:r._$Cl;const u=eo(e)?void 0:e._$litDirective$;return(c==null?void 0:c.constructor)!==u&&((s=c==null?void 0:c._$AO)===null||s===void 0||s.call(c,!1),u===void 0?c=void 0:(c=new u(t),c._$AT(t,r,n)),n!==void 0?((o=(a=r)._$Co)!==null&&o!==void 0?o:a._$Co=[])[n]=c:r._$Cl=c),c!==void 0&&(e=zi(t,c._$AS(t,e.values),c,n)),e}class k5{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var r;const{el:{content:n},parts:i}=this._$AD,s=((r=e==null?void 0:e.creationScope)!==null&&r!==void 0?r:pi).importNode(n,!0);yi.currentNode=s;let o=yi.nextNode(),a=0,c=0,u=i[0];for(;u!==void 0;){if(a===u.index){let d;u.type===2?d=new no(o,o.nextSibling,this,e):u.type===1?d=new u.ctor(o,u.name,u.strings,this,e):u.type===6&&(d=new q5(o,this,e)),this._$AV.push(d),u=i[++c]}a!==(u==null?void 0:u.index)&&(o=yi.nextNode(),a++)}return yi.currentNode=pi,s}v(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class no{constructor(e,r,n,i){var s;this.type=2,this._$AH=Zt,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cp=(s=i==null?void 0:i.isConnected)===null||s===void 0||s}get _$AU(){var e,r;return(r=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&r!==void 0?r:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=zi(this,e,r),eo(e)?e===Zt||e==null||e===""?(this._$AH!==Zt&&this._$AR(),this._$AH=Zt):e!==this._$AH&&e!==mi&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):L5(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==Zt&&eo(this._$AH)?this._$AA.nextSibling.data=e:this.$(pi.createTextNode(e)),this._$AH=e}g(e){var r;const{values:n,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=ro.createElement(Kp(i.h,i.h[0]),this.options)),i);if(((r=this._$AH)===null||r===void 0?void 0:r._$AD)===s)this._$AH.v(n);else{const o=new k5(s,this),a=o.u(this.options);o.v(n),this.$(a),this._$AH=o}}_$AC(e){let r=Hp.get(e.strings);return r===void 0&&Hp.set(e.strings,r=new ro(e)),r}T(e){Fp(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const s of e)i===r.length?r.push(n=new no(this.k(Xs()),this.k(Xs()),this,this.options)):n=r[i],n._$AI(s),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,r);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var r;this._$AM===void 0&&(this._$Cp=e,(r=this._$AP)===null||r===void 0||r.call(this,e))}}class ba{constructor(e,r,n,i,s){this.type=1,this._$AH=Zt,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Zt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,r=this,n,i){const s=this.strings;let o=!1;if(s===void 0)e=zi(this,e,r,0),o=!eo(e)||e!==this._$AH&&e!==mi,o&&(this._$AH=e);else{const a=e;let c,u;for(e=s[0],c=0;c<s.length-1;c++)u=zi(this,a[n+c],r,c),u===mi&&(u=this._$AH[c]),o||(o=!eo(u)||u!==this._$AH[c]),u===Zt?e=Zt:e!==Zt&&(e+=(u??"")+s[c+1]),this._$AH[c]=u}o&&!i&&this.j(e)}j(e){e===Zt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class U5 extends ba{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Zt?void 0:e}}const F5=qi?qi.emptyScript:"";let j5=class extends ba{constructor(){super(...arguments),this.type=4}j(e){e&&e!==Zt?this.element.setAttribute(this.name,F5):this.element.removeAttribute(this.name)}};class B5 extends ba{constructor(e,r,n,i,s){super(e,r,n,i,s),this.type=5}_$AI(e,r=this){var n;if((e=(n=zi(this,e,r,0))!==null&&n!==void 0?n:Zt)===mi)return;const i=this._$AH,s=e===Zt&&i!==Zt||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,o=e!==Zt&&(i===Zt||s);s&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,n;typeof this._$AH=="function"?this._$AH.call((n=(r=this.options)===null||r===void 0?void 0:r.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}let q5=class{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){zi(this,e)}};const Zp=wa.litHtmlPolyfillSupport;Zp==null||Zp(ro,no),((Al=wa.litHtmlVersions)!==null&&Al!==void 0?Al:wa.litHtmlVersions=[]).push("2.8.0");const z5=(t,e,r)=>{var n,i;const s=(n=r==null?void 0:r.renderBefore)!==null&&n!==void 0?n:e;let o=s._$litPart$;if(o===void 0){const a=(i=r==null?void 0:r.renderBefore)!==null&&i!==void 0?i:null;s._$litPart$=o=new no(e.insertBefore(Xs(),a),a,void 0,r??{})}return o._$AI(t),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Pl,Nl;class Ye extends Bi{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,r;const n=super.createRenderRoot();return(e=(r=this.renderOptions).renderBefore)!==null&&e!==void 0||(r.renderBefore=n.firstChild),n}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=z5(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return mi}}Ye.finalized=!0,Ye._$litElement$=!0,(Pl=globalThis.litElementHydrateSupport)===null||Pl===void 0||Pl.call(globalThis,{LitElement:Ye});const Gp=globalThis.litElementPolyfillSupport;Gp==null||Gp({LitElement:Ye}),((Nl=globalThis.litElementVersions)!==null&&Nl!==void 0?Nl:globalThis.litElementVersions=[]).push("3.3.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ot=t=>e=>typeof e=="function"?((r,n)=>(customElements.define(r,n),n))(t,e):((r,n)=>{const{kind:i,elements:s}=n;return{kind:i,elements:s,finisher(o){customElements.define(r,o)}}})(t,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const W5=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(r){r.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}},V5=(t,e,r)=>{e.constructor.createProperty(r,t)};function je(t){return(e,r)=>r!==void 0?V5(t,e,r):W5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Ir(t){return je({...t,state:!0})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var $l;(($l=window.HTMLSlotElement)===null||$l===void 0?void 0:$l.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const H5={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},K5=t=>(...e)=>({_$litDirective$:t,values:e});class Z5{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,n){this._$Ct=e,this._$AM=r,this._$Ci=n}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const En=K5(class extends Z5{constructor(t){var e;if(super(t),t.type!==H5.ATTRIBUTE||t.name!=="class"||((e=t.strings)===null||e===void 0?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,n;if(this.it===void 0){this.it=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!(!((r=this.nt)===null||r===void 0)&&r.has(s))&&this.it.add(s);return this.render(e)}const i=t.element.classList;this.it.forEach(s=>{s in e||(i.remove(s),this.it.delete(s))});for(const s in e){const o=!!e[s];o===this.it.has(s)||!((n=this.nt)===null||n===void 0)&&n.has(s)||(o?(i.add(s),this.it.add(s)):(i.remove(s),this.it.delete(s)))}return mi}});function G5(t,e){t.indexOf(e)===-1&&t.push(e)}const Qp=(t,e,r)=>Math.min(Math.max(r,t),e),qr={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},_a=t=>typeof t=="number",Wi=t=>Array.isArray(t)&&!_a(t[0]),Q5=(t,e,r)=>{const n=e-t;return((r-t)%n+n)%n+t};function Y5(t,e){return Wi(t)?t[Q5(0,t.length,e)]:t}const Yp=(t,e,r)=>-r*t+r*e+t,Jp=()=>{},jn=t=>t,Ll=(t,e,r)=>e-t===0?1:(r-t)/(e-t);function Xp(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=Ll(0,e,n);t.push(Yp(r,1,i))}}function J5(t){const e=[0];return Xp(e,t-1),e}function X5(t,e=J5(t.length),r=jn){const n=t.length,i=n-e.length;return i>0&&Xp(e,i),s=>{let o=0;for(;o<n-2&&!(s<e[o+1]);o++);let a=Qp(0,1,Ll(e[o],e[o+1],s));return a=Y5(r,o)(a),Yp(t[o],t[o+1],a)}}const e0=t=>Array.isArray(t)&&_a(t[0]),Ml=t=>typeof t=="object"&&!!t.createAnimation,Vi=t=>typeof t=="function",e6=t=>typeof t=="string",io={ms:t=>t*1e3,s:t=>t/1e3},t0=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,t6=1e-7,r6=12;function n6(t,e,r,n,i){let s,o,a=0;do o=e+(r-e)/2,s=t0(o,n,i)-t,s>0?r=o:e=o;while(Math.abs(s)>t6&&++a<r6);return o}function so(t,e,r,n){if(t===e&&r===n)return jn;const i=s=>n6(s,0,1,t,r);return s=>s===0||s===1?s:t0(i(s),e,n)}const i6=(t,e="end")=>r=>{r=e==="end"?Math.min(r,.999):Math.max(r,.001);const n=r*t,i=e==="end"?Math.floor(n):Math.ceil(n);return Qp(0,1,i/t)},r0={ease:so(.25,.1,.25,1),"ease-in":so(.42,0,1,1),"ease-in-out":so(.42,0,.58,1),"ease-out":so(0,0,.58,1)},s6=/\((.*?)\)/;function n0(t){if(Vi(t))return t;if(e0(t))return so(...t);if(r0[t])return r0[t];if(t.startsWith("steps")){const e=s6.exec(t);if(e){const r=e[1].split(",");return i6(parseFloat(r[0]),r[1].trim())}}return jn}class i0{constructor(e,r=[0,1],{easing:n,duration:i=qr.duration,delay:s=qr.delay,endDelay:o=qr.endDelay,repeat:a=qr.repeat,offset:c,direction:u="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=jn,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((f,p)=>{this.resolve=f,this.reject=p}),n=n||qr.easing,Ml(n)){const f=n.createAnimation(r);n=f.easing,r=f.keyframes||r,i=f.duration||i}this.repeat=a,this.easing=Wi(n)?jn:n0(n),this.updateDuration(i);const d=X5(r,c,Wi(n)?n.map(n0):jn);this.tick=f=>{var p;s=s;let y=0;this.pauseTime!==void 0?y=this.pauseTime:y=(f-this.startTime)*this.rate,this.t=y,y/=1e3,y=Math.max(y-s,0),this.playState==="finished"&&this.pauseTime===void 0&&(y=this.totalDuration);const b=y/this.duration;let E=Math.floor(b),x=b%1;!x&&b>=1&&(x=1),x===1&&E--;const I=E%2;(u==="reverse"||u==="alternate"&&I||u==="alternate-reverse"&&!I)&&(x=1-x);const w=y>=this.totalDuration?1:Math.min(x,1),C=d(this.easing(w));e(C),this.pauseTime===void 0&&(this.playState==="finished"||y>=this.totalDuration+o)?(this.playState="finished",(p=this.resolve)===null||p===void 0||p.call(this,C)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const e=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(e=this.reject)===null||e===void 0||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){this.pauseTime!==void 0||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}var kl=function(){};process.env.NODE_ENV!=="production"&&(kl=function(t,e){if(!t)throw new Error(e)});class o6{setAnimation(e){this.animation=e,e==null||e.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const Ul=new WeakMap;function s0(t){return Ul.has(t)||Ul.set(t,{transforms:[],values:new Map}),Ul.get(t)}function a6(t,e){return t.has(e)||t.set(e,new o6),t.get(e)}const c6=["","X","Y","Z"],l6=["translate","scale","rotate","skew"],Ea={x:"translateX",y:"translateY",z:"translateZ"},o0={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},u6={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:o0,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:jn},skew:o0},oo=new Map,Fl=t=>`--motion-${t}`,Sa=["x","y","z"];l6.forEach(t=>{c6.forEach(e=>{Sa.push(t+e),oo.set(Fl(t+e),u6[t])})});const d6=(t,e)=>Sa.indexOf(t)-Sa.indexOf(e),h6=new Set(Sa),a0=t=>h6.has(t),f6=(t,e)=>{Ea[e]&&(e=Ea[e]);const{transforms:r}=s0(t);G5(r,e),t.style.transform=p6(r)},p6=t=>t.sort(d6).reduce(g6,"").trim(),g6=(t,e)=>`${t} ${e}(var(${Fl(e)}))`,jl=t=>t.startsWith("--"),c0=new Set;function m6(t){if(!c0.has(t)){c0.add(t);try{const{syntax:e,initialValue:r}=oo.has(t)?oo.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:r})}catch{}}}const Bl=(t,e)=>document.createElement("div").animate(t,e),l0={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{Bl({opacity:[1]})}catch{return!1}return!0},finished:()=>!!Bl({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{Bl({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},ql={},Hi={};for(const t in l0)Hi[t]=()=>(ql[t]===void 0&&(ql[t]=l0[t]()),ql[t]);const y6=.015,v6=(t,e)=>{let r="";const n=Math.round(e/y6);for(let i=0;i<n;i++)r+=t(Ll(0,n-1,i))+", ";return r.substring(0,r.length-2)},u0=(t,e)=>Vi(t)?Hi.linearEasing()?`linear(${v6(t,e)})`:qr.easing:e0(t)?w6(t):t,w6=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`;function b6(t,e){for(let r=0;r<t.length;r++)t[r]===null&&(t[r]=r?t[r-1]:e());return t}const _6=t=>Array.isArray(t)?t:[t];function zl(t){return Ea[t]&&(t=Ea[t]),a0(t)?Fl(t):t}const xa={get:(t,e)=>{e=zl(e);let r=jl(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!r&&r!==0){const n=oo.get(e);n&&(r=n.initialValue)}return r},set:(t,e,r)=>{e=zl(e),jl(e)?t.style.setProperty(e,r):t.style[e]=r}};function d0(t,e=!0){if(!(!t||t.playState==="finished"))try{t.stop?t.stop():(e&&t.commitStyles(),t.cancel())}catch{}}function E6(t,e){var r;let n=(e==null?void 0:e.toDefaultUnit)||jn;const i=t[t.length-1];if(e6(i)){const s=((r=i.match(/(-?[\d.]+)([a-z%]*)/))===null||r===void 0?void 0:r[2])||"";s&&(n=o=>o+s)}return n}function S6(){return window.__MOTION_DEV_TOOLS_RECORD}function x6(t,e,r,n={},i){const s=S6(),o=n.record!==!1&&s;let a,{duration:c=qr.duration,delay:u=qr.delay,endDelay:d=qr.endDelay,repeat:f=qr.repeat,easing:p=qr.easing,persist:y=!1,direction:b,offset:E,allowWebkitAcceleration:x=!1}=n;const I=s0(t),w=a0(e);let C=Hi.waapi();w&&f6(t,e);const v=zl(e),_=a6(I.values,v),g=oo.get(v);return d0(_.animation,!(Ml(p)&&_.generator)&&n.record!==!1),()=>{const l=()=>{var N,z;return(z=(N=xa.get(t,v))!==null&&N!==void 0?N:g==null?void 0:g.initialValue)!==null&&z!==void 0?z:0};let m=b6(_6(r),l);const P=E6(m,g);if(Ml(p)){const N=p.createAnimation(m,e!=="opacity",l,v,_);p=N.easing,m=N.keyframes||m,c=N.duration||c}if(jl(v)&&(Hi.cssRegisterProperty()?m6(v):C=!1),w&&!Hi.linearEasing()&&(Vi(p)||Wi(p)&&p.some(Vi))&&(C=!1),C){g&&(m=m.map(W=>_a(W)?g.toDefaultUnit(W):W)),m.length===1&&(!Hi.partialKeyframes()||o)&&m.unshift(l());const N={delay:io.ms(u),duration:io.ms(c),endDelay:io.ms(d),easing:Wi(p)?void 0:u0(p,c),direction:b,iterations:f+1,fill:"both"};a=t.animate({[v]:m,offset:E,easing:Wi(p)?p.map(W=>u0(W,c)):void 0},N),a.finished||(a.finished=new Promise((W,G)=>{a.onfinish=W,a.oncancel=G}));const z=m[m.length-1];a.finished.then(()=>{y||(xa.set(t,v,z),a.cancel())}).catch(Jp),x||(a.playbackRate=1.000001)}else if(i&&w)m=m.map(N=>typeof N=="string"?parseFloat(N):N),m.length===1&&m.unshift(parseFloat(l())),a=new i(N=>{xa.set(t,v,P?P(N):N)},m,Object.assign(Object.assign({},n),{duration:c,easing:p}));else{const N=m[m.length-1];xa.set(t,v,g&&_a(N)?g.toDefaultUnit(N):N)}return o&&s(t,e,m,{duration:c,delay:u,easing:p,repeat:f,offset:E},"motion-one"),_.setAnimation(a),a}}const C6=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);function O6(t,e){var r;return typeof t=="string"?e?((r=e[t])!==null&&r!==void 0||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t||[])}const D6=t=>t(),h0=(t,e,r=qr.duration)=>new Proxy({animations:t.map(D6).filter(Boolean),duration:r,options:e},A6),I6=t=>t.animations[0],A6={get:(t,e)=>{const r=I6(t);switch(e){case"duration":return t.duration;case"currentTime":return io.s((r==null?void 0:r[e])||0);case"playbackRate":case"playState":return r==null?void 0:r[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(T6)).catch(Jp)),t.finished;case"stop":return()=>{t.animations.forEach(n=>d0(n))};case"forEachNative":return n=>{t.animations.forEach(i=>n(i,t))};default:return typeof(r==null?void 0:r[e])>"u"?void 0:()=>t.animations.forEach(n=>n[e]())}},set:(t,e,r)=>{switch(e){case"currentTime":r=io.ms(r);case"playbackRate":for(let n=0;n<t.animations.length;n++)t.animations[n][e]=r;return!0}return!1}},T6=t=>t.finished;function R6(t,e,r){return Vi(t)?t(e,r):t}function P6(t){return function(r,n,i={}){r=O6(r);const s=r.length;kl(!!s,"No valid element provided."),kl(!!n,"No keyframes defined.");const o=[];for(let a=0;a<s;a++){const c=r[a];for(const u in n){const d=C6(i,u);d.delay=R6(d.delay,a,s);const f=x6(c,u,n[u],d,t);o.push(f)}}return h0(o,i,i.duration)}}const N6=P6(i0);function $6(t,e={}){return h0([()=>{const r=new i0(t,[0,1],e);return r.finished.catch(()=>{}),r}],e,e.duration)}function vi(t,e,r){return(Vi(t)?$6:N6)(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Er=t=>t??Zt;var ao={},L6=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},f0={},Lr={};let Wl;const M6=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Lr.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},Lr.getSymbolTotalCodewords=function(e){return M6[e]},Lr.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e},Lr.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Wl=e},Lr.isKanjiModeEnabled=function(){return typeof Wl<"u"},Lr.toSJIS=function(e){return Wl(e)};var Ca={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(Ca);function p0(){this.buffer=[],this.length=0}p0.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var k6=p0;function co(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}co.prototype.set=function(t,e,r,n){const i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)},co.prototype.get=function(t,e){return this.data[t*this.size+e]},co.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r},co.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var U6=co,g0={};(function(t){const e=Lr.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(n){const i=[],s=t.getRowColCoords(n),o=s.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||i.push([s[a],s[c]]);return i}})(g0);var m0={};const F6=Lr.getSymbolSize,y0=7;m0.getPositions=function(e){const r=F6(e);return[[0,0],[r-y0,0],[0,r-y0]]};var v0={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,c=0,u=null,d=null;for(let f=0;f<s;f++){a=c=0,u=d=null;for(let p=0;p<s;p++){let y=i.get(f,p);y===u?a++:(a>=5&&(o+=e.N1+(a-5)),u=y,a=1),y=i.get(p,f),y===d?c++:(c>=5&&(o+=e.N1+(c-5)),d=y,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let c=0;c<s-1;c++){const u=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(u===4||u===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,c=0;for(let u=0;u<s;u++){a=c=0;for(let d=0;d<s;d++)a=a<<1&2047|i.get(u,d),d>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|i.get(d,u),d>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(n,i,s){switch(n){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)s.isReserved(c,a)||s.xor(c,a,r(i,c,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let u=0;u<o;u++){s(u),t.applyMask(u,i);const d=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(u,i),d<c&&(c=d,a=u)}return a}})(v0);var Oa={};const Bn=Ca,Da=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ia=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Oa.getBlocksCount=function(e,r){switch(r){case Bn.L:return Da[(e-1)*4+0];case Bn.M:return Da[(e-1)*4+1];case Bn.Q:return Da[(e-1)*4+2];case Bn.H:return Da[(e-1)*4+3];default:return}},Oa.getTotalCodewordsCount=function(e,r){switch(r){case Bn.L:return Ia[(e-1)*4+0];case Bn.M:return Ia[(e-1)*4+1];case Bn.Q:return Ia[(e-1)*4+2];case Bn.H:return Ia[(e-1)*4+3];default:return}};var w0={},Aa={};const lo=new Uint8Array(512),Ta=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)lo[r]=e,Ta[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)lo[r]=lo[r-255]})(),Aa.log=function(e){if(e<1)throw new Error("log("+e+")");return Ta[e]},Aa.exp=function(e){return lo[e]},Aa.mul=function(e,r){return e===0||r===0?0:lo[Ta[e]+Ta[r]]},function(t){const e=Aa;t.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(n[o],i[a]);return s},t.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}}(w0);const b0=w0;function Vl(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Vl.prototype.initialize=function(e){this.degree=e,this.genPoly=b0.generateECPolynomial(this.degree)},Vl.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=b0.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(n,i),s}return n};var j6=Vl,_0={},qn={},Hl={};Hl.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var un={};const E0="[0-9]+",B6="[A-Z $%*+\\-./:]+";let uo="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";uo=uo.replace(/u/g,"\\u");const q6="(?:(?![A-Z0-9 $%*+\\-./:]|"+uo+`)(?:.|[\r
]))+`;un.KANJI=new RegExp(uo,"g"),un.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),un.BYTE=new RegExp(q6,"g"),un.NUMERIC=new RegExp(E0,"g"),un.ALPHANUMERIC=new RegExp(B6,"g");const z6=new RegExp("^"+uo+"$"),W6=new RegExp("^"+E0+"$"),V6=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");un.testKanji=function(e){return z6.test(e)},un.testNumeric=function(e){return W6.test(e)},un.testAlphanumeric=function(e){return V6.test(e)},function(t){const e=Hl,r=un;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return n(s)}catch{return o}}}(qn),function(t){const e=Lr,r=Oa,n=Ca,i=qn,s=Hl,o=7973,a=e.getBCHDigit(o);function c(p,y,b){for(let E=1;E<=40;E++)if(y<=t.getCapacity(E,b,p))return E}function u(p,y){return i.getCharCountIndicator(p,y)+4}function d(p,y){let b=0;return p.forEach(function(E){const x=u(E.mode,y);b+=x+E.getBitsLength()}),b}function f(p,y){for(let b=1;b<=40;b++)if(d(p,b)<=t.getCapacity(b,y,i.MIXED))return b}t.from=function(y,b){return s.isValid(y)?parseInt(y,10):b},t.getCapacity=function(y,b,E){if(!s.isValid(y))throw new Error("Invalid QR Code version");typeof E>"u"&&(E=i.BYTE);const x=e.getSymbolTotalCodewords(y),I=r.getTotalCodewordsCount(y,b),w=(x-I)*8;if(E===i.MIXED)return w;const C=w-u(E,y);switch(E){case i.NUMERIC:return Math.floor(C/10*3);case i.ALPHANUMERIC:return Math.floor(C/11*2);case i.KANJI:return Math.floor(C/13);case i.BYTE:default:return Math.floor(C/8)}},t.getBestVersionForData=function(y,b){let E;const x=n.from(b,n.M);if(Array.isArray(y)){if(y.length>1)return f(y,x);if(y.length===0)return 1;E=y[0]}else E=y;return c(E.mode,E.getLength(),x)},t.getEncodedBits=function(y){if(!s.isValid(y)||y<7)throw new Error("Invalid QR Code version");let b=y<<12;for(;e.getBCHDigit(b)-a>=0;)b^=o<<e.getBCHDigit(b)-a;return y<<12|b}}(_0);var S0={};const Kl=Lr,x0=1335,H6=21522,C0=Kl.getBCHDigit(x0);S0.getEncodedBits=function(e,r){const n=e.bit<<3|r;let i=n<<10;for(;Kl.getBCHDigit(i)-C0>=0;)i^=x0<<Kl.getBCHDigit(i)-C0;return(n<<10|i)^H6};var O0={};const K6=qn;function Ki(t){this.mode=K6.NUMERIC,this.data=t.toString()}Ki.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},Ki.prototype.getLength=function(){return this.data.length},Ki.prototype.getBitsLength=function(){return Ki.getBitsLength(this.data.length)},Ki.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);const s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};var Z6=Ki;const G6=qn,Zl=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Zi(t){this.mode=G6.ALPHANUMERIC,this.data=t}Zi.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},Zi.prototype.getLength=function(){return this.data.length},Zi.prototype.getBitsLength=function(){return Zi.getBitsLength(this.data.length)},Zi.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=Zl.indexOf(this.data[r])*45;n+=Zl.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(Zl.indexOf(this.data[r]),6)};var Q6=Zi,Y6=function(e){for(var r=[],n=e.length,i=0;i<n;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&n>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){r.push(s);continue}if(s<2048){r.push(s>>6|192),r.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128);continue}if(s>=65536&&s<=1114111){r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const J6=Y6,X6=qn;function Gi(t){this.mode=X6.BYTE,typeof t=="string"&&(t=J6(t)),this.data=new Uint8Array(t)}Gi.getBitsLength=function(e){return e*8},Gi.prototype.getLength=function(){return this.data.length},Gi.prototype.getBitsLength=function(){return Gi.getBitsLength(this.data.length)},Gi.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var eS=Gi;const tS=qn,rS=Lr;function Qi(t){this.mode=tS.KANJI,this.data=t}Qi.getBitsLength=function(e){return e*13},Qi.prototype.getLength=function(){return this.data.length},Qi.prototype.getBitsLength=function(){return Qi.getBitsLength(this.data.length)},Qi.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=rS.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var nS=Qi,D0={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,i){var s={},o={};o[n]=0;var a=e.PriorityQueue.make();a.push(n,0);for(var c,u,d,f,p,y,b,E,x;!a.empty();){c=a.pop(),u=c.value,f=c.cost,p=r[u]||{};for(d in p)p.hasOwnProperty(d)&&(y=p[d],b=f+y,E=o[d],x=typeof o[d]>"u",(x||E>b)&&(o[d]=b,a.push(d,b),s[d]=u))}if(typeof i<"u"&&typeof o[i]>"u"){var I=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(I)}return s},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],s=n;s;)i.push(s),r[s],s=r[s];return i.reverse(),i},find_path:function(r,n,i){var s=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},s;r=r||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(D0);var iS=D0.exports;(function(t){const e=qn,r=Z6,n=Q6,i=eS,s=nS,o=un,a=Lr,c=iS;function u(I){return unescape(encodeURIComponent(I)).length}function d(I,w,C){const v=[];let _;for(;(_=I.exec(C))!==null;)v.push({data:_[0],index:_.index,mode:w,length:_[0].length});return v}function f(I){const w=d(o.NUMERIC,e.NUMERIC,I),C=d(o.ALPHANUMERIC,e.ALPHANUMERIC,I);let v,_;return a.isKanjiModeEnabled()?(v=d(o.BYTE,e.BYTE,I),_=d(o.KANJI,e.KANJI,I)):(v=d(o.BYTE_KANJI,e.BYTE,I),_=[]),w.concat(C,v,_).sort(function(l,m){return l.index-m.index}).map(function(l){return{data:l.data,mode:l.mode,length:l.length}})}function p(I,w){switch(w){case e.NUMERIC:return r.getBitsLength(I);case e.ALPHANUMERIC:return n.getBitsLength(I);case e.KANJI:return s.getBitsLength(I);case e.BYTE:return i.getBitsLength(I)}}function y(I){return I.reduce(function(w,C){const v=w.length-1>=0?w[w.length-1]:null;return v&&v.mode===C.mode?(w[w.length-1].data+=C.data,w):(w.push(C),w)},[])}function b(I){const w=[];for(let C=0;C<I.length;C++){const v=I[C];switch(v.mode){case e.NUMERIC:w.push([v,{data:v.data,mode:e.ALPHANUMERIC,length:v.length},{data:v.data,mode:e.BYTE,length:v.length}]);break;case e.ALPHANUMERIC:w.push([v,{data:v.data,mode:e.BYTE,length:v.length}]);break;case e.KANJI:w.push([v,{data:v.data,mode:e.BYTE,length:u(v.data)}]);break;case e.BYTE:w.push([{data:v.data,mode:e.BYTE,length:u(v.data)}])}}return w}function E(I,w){const C={},v={start:{}};let _=["start"];for(let g=0;g<I.length;g++){const l=I[g],m=[];for(let P=0;P<l.length;P++){const N=l[P],z=""+g+P;m.push(z),C[z]={node:N,lastCount:0},v[z]={};for(let W=0;W<_.length;W++){const G=_[W];C[G]&&C[G].node.mode===N.mode?(v[G][z]=p(C[G].lastCount+N.length,N.mode)-p(C[G].lastCount,N.mode),C[G].lastCount+=N.length):(C[G]&&(C[G].lastCount=N.length),v[G][z]=p(N.length,N.mode)+4+e.getCharCountIndicator(N.mode,w))}}_=m}for(let g=0;g<_.length;g++)v[_[g]].end=0;return{map:v,table:C}}function x(I,w){let C;const v=e.getBestModeForData(I);if(C=e.from(w,v),C!==e.BYTE&&C.bit<v.bit)throw new Error('"'+I+'" cannot be encoded with mode '+e.toString(C)+`.
 Suggested mode is: `+e.toString(v));switch(C===e.KANJI&&!a.isKanjiModeEnabled()&&(C=e.BYTE),C){case e.NUMERIC:return new r(I);case e.ALPHANUMERIC:return new n(I);case e.KANJI:return new s(I);case e.BYTE:return new i(I)}}t.fromArray=function(w){return w.reduce(function(C,v){return typeof v=="string"?C.push(x(v,null)):v.data&&C.push(x(v.data,v.mode)),C},[])},t.fromString=function(w,C){const v=f(w,a.isKanjiModeEnabled()),_=b(v),g=E(_,C),l=c.find_path(g.map,"start","end"),m=[];for(let P=1;P<l.length-1;P++)m.push(g.table[l[P]].node);return t.fromArray(y(m))},t.rawSplit=function(w){return t.fromArray(f(w,a.isKanjiModeEnabled()))}})(O0);const Ra=Lr,Gl=Ca,sS=k6,oS=U6,aS=g0,cS=m0,Ql=v0,Yl=Oa,lS=j6,Pa=_0,uS=S0,dS=qn,Jl=O0;function hS(t,e){const r=t.size,n=cS.getPositions(e);for(let i=0;i<n.length;i++){const s=n[i][0],o=n[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||r<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(s+a,o+c,!0,!0):t.set(s+a,o+c,!1,!0))}}function fS(t){const e=t.size;for(let r=8;r<e-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function pS(t,e){const r=aS.getPositions(e);for(let n=0;n<r.length;n++){const i=r[n][0],s=r[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function gS(t,e){const r=t.size,n=Pa.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+r-8-3,o=(n>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function Xl(t,e,r){const n=t.size,i=uS.getEncodedBits(e,r);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(n-15+s,8,o,!0),s<8?t.set(8,n-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(n-8,8,1,!0)}function mS(t,e){const r=t.size;let n=-1,i=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,a-c)){let u=!1;o<e.length&&(u=(e[o]>>>s&1)===1),t.set(i,a-c,u),s--,s===-1&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function yS(t,e,r){const n=new sS;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),dS.getCharCountIndicator(c.mode,t)),c.write(n)});const i=Ra.getSymbolTotalCodewords(t),s=Yl.getTotalCodewordsCount(t,e),o=(i-s)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let c=0;c<a;c++)n.put(c%2?17:236,8);return vS(n,t,e)}function vS(t,e,r){const n=Ra.getSymbolTotalCodewords(e),i=Yl.getTotalCodewordsCount(e,r),s=n-i,o=Yl.getBlocksCount(e,r),a=n%o,c=o-a,u=Math.floor(n/o),d=Math.floor(s/o),f=d+1,p=u-d,y=new lS(p);let b=0;const E=new Array(o),x=new Array(o);let I=0;const w=new Uint8Array(t.buffer);for(let l=0;l<o;l++){const m=l<c?d:f;E[l]=w.slice(b,b+m),x[l]=y.encode(E[l]),b+=m,I=Math.max(I,m)}const C=new Uint8Array(n);let v=0,_,g;for(_=0;_<I;_++)for(g=0;g<o;g++)_<E[g].length&&(C[v++]=E[g][_]);for(_=0;_<p;_++)for(g=0;g<o;g++)C[v++]=x[g][_];return C}function wS(t,e,r,n){let i;if(Array.isArray(t))i=Jl.fromArray(t);else if(typeof t=="string"){let u=e;if(!u){const d=Jl.rawSplit(t);u=Pa.getBestVersionForData(d,r)}i=Jl.fromString(t,u||40)}else throw new Error("Invalid data");const s=Pa.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=yS(e,r,i),a=Ra.getSymbolSize(e),c=new oS(a);return hS(c,e),fS(c),pS(c,e),Xl(c,r,0),e>=7&&gS(c,e),mS(c,o),isNaN(n)&&(n=Ql.getBestMask(c,Xl.bind(null,c,r))),Ql.applyMask(n,c),Xl(c,r,n),{modules:c,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}f0.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=Gl.M,i,s;return typeof r<"u"&&(n=Gl.from(r.errorCorrectionLevel,Gl.M),i=Pa.from(r.version),s=Ql.from(r.maskPattern),r.toSJISFunc&&Ra.setToSJISFunction(r.toSJISFunc)),wS(e,i,n,s)};var I0={},eu={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const s=t.getScale(n,i);return Math.floor((n+i.margin*2)*s)},t.qrToImageData=function(n,i,s){const o=i.modules.size,a=i.modules.data,c=t.getScale(o,s),u=Math.floor((o+s.margin*2)*c),d=s.margin*c,f=[s.color.light,s.color.dark];for(let p=0;p<u;p++)for(let y=0;y<u;y++){let b=(p*u+y)*4,E=s.color.light;if(p>=d&&y>=d&&p<u-d&&y<u-d){const x=Math.floor((p-d)/c),I=Math.floor((y-d)/c);E=f[a[x*o+I]?1:0]}n[b++]=E.r,n[b++]=E.g,n[b++]=E.b,n[b]=E.a}}})(eu),function(t){const e=eu;function r(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let c=a,u=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(u=n()),c=e.getOptions(c);const d=e.getImageWidth(s.modules.size,c),f=u.getContext("2d"),p=f.createImageData(d,d);return e.qrToImageData(p.data,s,c),r(f,u,d),f.putImageData(p,0,0),u},t.renderToDataURL=function(s,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const u=t.render(s,o,c),d=c.type||"image/png",f=c.rendererOpts||{};return u.toDataURL(d,f.quality)}}(I0);var A0={};const bS=eu;function T0(t,e){const r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function tu(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function _S(t,e,r){let n="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),u=Math.floor(a/e);!c&&!s&&(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(n+=s?tu("M",c+r,.5+u+r):tu("m",i,0),i=0,s=!1),c+1<e&&t[a+1]||(n+=tu("h",o),o=0)):i++}return n}A0.render=function(e,r,n){const i=bS.getOptions(r),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,c=i.color.light.a?"<path "+T0(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",u="<path "+T0(i.color.dark,"stroke")+' d="'+_S(o,s,i.margin)+'"/>',d='viewBox="0 0 '+a+" "+a+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+u+`</svg>
`;return typeof n=="function"&&n(null,p),p};const ES=L6,ru=f0,R0=I0,SS=A0;function nu(t,e,r,n,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!ES())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(c,u){try{const d=ru.create(r,n);c(t(d,e,n))}catch(d){u(d)}})}try{const c=ru.create(r,n);i(null,t(c,e,n))}catch(c){i(c)}}ao.create=ru.create,ao.toCanvas=nu.bind(null,R0.render),ao.toDataURL=nu.bind(null,R0.renderToDataURL),ao.toString=nu.bind(null,function(t,e,r){return SS.render(t,r)});var xS=Object.defineProperty,P0=Object.getOwnPropertySymbols,CS=Object.prototype.hasOwnProperty,OS=Object.prototype.propertyIsEnumerable,N0=(t,e,r)=>e in t?xS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,iu=(t,e)=>{for(var r in e||(e={}))CS.call(e,r)&&N0(t,r,e[r]);if(P0)for(var r of P0(e))OS.call(e,r)&&N0(t,r,e[r]);return t};function DS(){var t;const e=(t=In.state.themeMode)!=null?t:"dark",r={light:{foreground:{1:"rgb(20,20,20)",2:"rgb(121,134,134)",3:"rgb(158,169,169)"},background:{1:"rgb(255,255,255)",2:"rgb(241,243,243)",3:"rgb(228,231,231)"},overlay:"rgba(0,0,0,0.1)"},dark:{foreground:{1:"rgb(228,231,231)",2:"rgb(148,158,158)",3:"rgb(110,119,119)"},background:{1:"rgb(20,20,20)",2:"rgb(39,42,42)",3:"rgb(59,64,64)"},overlay:"rgba(255,255,255,0.1)"}}[e];return{"--wcm-color-fg-1":r.foreground[1],"--wcm-color-fg-2":r.foreground[2],"--wcm-color-fg-3":r.foreground[3],"--wcm-color-bg-1":r.background[1],"--wcm-color-bg-2":r.background[2],"--wcm-color-bg-3":r.background[3],"--wcm-color-overlay":r.overlay}}function $0(){return{"--wcm-accent-color":"#3396FF","--wcm-accent-fill-color":"#FFFFFF","--wcm-z-index":"89","--wcm-background-color":"#3396FF","--wcm-background-border-radius":"8px","--wcm-container-border-radius":"30px","--wcm-wallet-icon-border-radius":"15px","--wcm-wallet-icon-large-border-radius":"30px","--wcm-wallet-icon-small-border-radius":"7px","--wcm-input-border-radius":"28px","--wcm-button-border-radius":"10px","--wcm-notification-border-radius":"36px","--wcm-secondary-button-border-radius":"28px","--wcm-icon-button-border-radius":"50%","--wcm-button-hover-highlight-border-radius":"10px","--wcm-text-big-bold-size":"20px","--wcm-text-big-bold-weight":"600","--wcm-text-big-bold-line-height":"24px","--wcm-text-big-bold-letter-spacing":"-0.03em","--wcm-text-big-bold-text-transform":"none","--wcm-text-xsmall-bold-size":"10px","--wcm-text-xsmall-bold-weight":"700","--wcm-text-xsmall-bold-line-height":"12px","--wcm-text-xsmall-bold-letter-spacing":"0.02em","--wcm-text-xsmall-bold-text-transform":"uppercase","--wcm-text-xsmall-regular-size":"12px","--wcm-text-xsmall-regular-weight":"600","--wcm-text-xsmall-regular-line-height":"14px","--wcm-text-xsmall-regular-letter-spacing":"-0.03em","--wcm-text-xsmall-regular-text-transform":"none","--wcm-text-small-thin-size":"14px","--wcm-text-small-thin-weight":"500","--wcm-text-small-thin-line-height":"16px","--wcm-text-small-thin-letter-spacing":"-0.03em","--wcm-text-small-thin-text-transform":"none","--wcm-text-small-regular-size":"14px","--wcm-text-small-regular-weight":"600","--wcm-text-small-regular-line-height":"16px","--wcm-text-small-regular-letter-spacing":"-0.03em","--wcm-text-small-regular-text-transform":"none","--wcm-text-medium-regular-size":"16px","--wcm-text-medium-regular-weight":"600","--wcm-text-medium-regular-line-height":"20px","--wcm-text-medium-regular-letter-spacing":"-0.03em","--wcm-text-medium-regular-text-transform":"none","--wcm-font-family":"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', sans-serif","--wcm-font-feature-settings":"'tnum' on, 'lnum' on, 'case' on","--wcm-success-color":"rgb(38,181,98)","--wcm-error-color":"rgb(242, 90, 103)","--wcm-overlay-background-color":"rgba(0, 0, 0, 0.3)","--wcm-overlay-backdrop-filter":"none"}}const rt={getPreset(t){return $0()[t]},setTheme(){const t=document.querySelector(":root"),{themeVariables:e}=In.state;if(t){const r=iu(iu(iu({},DS()),$0()),e);Object.entries(r).forEach(([n,i])=>t.style.setProperty(n,i))}},globalCss:ut`*,::after,::before{margin:0;padding:0;box-sizing:border-box;font-style:normal;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;backface-visibility:hidden}button{cursor:pointer;display:flex;justify-content:center;align-items:center;position:relative;border:none;background-color:transparent;transition:all .2s ease}@media (hover:hover) and (pointer:fine){button:active{transition:all .1s ease;transform:scale(.93)}}button::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;transition:background-color,.2s ease}button:disabled{cursor:not-allowed}button svg,button wcm-text{position:relative;z-index:1}input{border:none;outline:0;appearance:none}img{display:block}::selection{color:var(--wcm-accent-fill-color);background:var(--wcm-accent-color)}`},IS=ut`button{border-radius:var(--wcm-secondary-button-border-radius);height:28px;padding:0 10px;background-color:var(--wcm-accent-color)}button path{fill:var(--wcm-accent-fill-color)}button::after{border-radius:inherit;border:1px solid var(--wcm-color-overlay)}button:disabled::after{background-color:transparent}.wcm-icon-left svg{margin-right:5px}.wcm-icon-right svg{margin-left:5px}button:active::after{background-color:var(--wcm-color-overlay)}.wcm-ghost,.wcm-ghost:active::after,.wcm-outline{background-color:transparent}.wcm-ghost:active{opacity:.5}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}.wcm-ghost:hover::after{background-color:transparent}.wcm-ghost:hover{opacity:.5}}button:disabled{background-color:var(--wcm-color-bg-3);pointer-events:none}.wcm-ghost::after{border-color:transparent}.wcm-ghost path{fill:var(--wcm-color-fg-2)}.wcm-outline path{fill:var(--wcm-accent-color)}.wcm-outline:disabled{background-color:transparent;opacity:.5}`;var AS=Object.defineProperty,TS=Object.getOwnPropertyDescriptor,Yi=(t,e,r,n)=>{for(var i=n>1?void 0:n?TS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&AS(e,r,i),i};let zn=class extends Ye{constructor(){super(...arguments),this.disabled=!1,this.iconLeft=void 0,this.iconRight=void 0,this.onClick=()=>null,this.variant="default"}render(){const t={"wcm-icon-left":this.iconLeft!==void 0,"wcm-icon-right":this.iconRight!==void 0,"wcm-ghost":this.variant==="ghost","wcm-outline":this.variant==="outline"};let e="inverse";return this.variant==="ghost"&&(e="secondary"),this.variant==="outline"&&(e="accent"),le`<button class="${En(t)}" ?disabled="${this.disabled}" @click="${this.onClick}">${this.iconLeft}<wcm-text variant="small-regular" color="${e}"><slot></slot></wcm-text>${this.iconRight}</button>`}};zn.styles=[rt.globalCss,IS],Yi([je({type:Boolean})],zn.prototype,"disabled",2),Yi([je()],zn.prototype,"iconLeft",2),Yi([je()],zn.prototype,"iconRight",2),Yi([je()],zn.prototype,"onClick",2),Yi([je()],zn.prototype,"variant",2),zn=Yi([ot("wcm-button")],zn);const RS=ut`:host{display:inline-block}button{padding:0 15px 1px;height:40px;border-radius:var(--wcm-button-border-radius);color:var(--wcm-accent-fill-color);background-color:var(--wcm-accent-color)}button::after{content:'';top:0;bottom:0;left:0;right:0;position:absolute;background-color:transparent;border-radius:inherit;transition:background-color .2s ease;border:1px solid var(--wcm-color-overlay)}button:active::after{background-color:var(--wcm-color-overlay)}button:disabled{padding-bottom:0;background-color:var(--wcm-color-bg-3);color:var(--wcm-color-fg-3)}.wcm-secondary{color:var(--wcm-accent-color);background-color:transparent}.wcm-secondary::after{display:none}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}}`;var PS=Object.defineProperty,NS=Object.getOwnPropertyDescriptor,su=(t,e,r,n)=>{for(var i=n>1?void 0:n?NS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&PS(e,r,i),i};let ho=class extends Ye{constructor(){super(...arguments),this.disabled=!1,this.variant="primary"}render(){const t={"wcm-secondary":this.variant==="secondary"};return le`<button ?disabled="${this.disabled}" class="${En(t)}"><slot></slot></button>`}};ho.styles=[rt.globalCss,RS],su([je({type:Boolean})],ho.prototype,"disabled",2),su([je()],ho.prototype,"variant",2),ho=su([ot("wcm-button-big")],ho);const $S=ut`:host{background-color:var(--wcm-color-bg-2);border-top:1px solid var(--wcm-color-bg-3)}div{padding:10px 20px;display:inherit;flex-direction:inherit;align-items:inherit;width:inherit;justify-content:inherit}`;var LS=Object.defineProperty,MS=Object.getOwnPropertyDescriptor,kS=(t,e,r,n)=>{for(var i=n>1?void 0:n?MS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&LS(e,r,i),i};let ou=class extends Ye{render(){return le`<div><slot></slot></div>`}};ou.styles=[rt.globalCss,$S],ou=kS([ot("wcm-info-footer")],ou);const ht={CROSS_ICON:Ft`<svg width="12" height="12" viewBox="0 0 12 12"><path d="M9.94 11A.75.75 0 1 0 11 9.94L7.414 6.353a.5.5 0 0 1 0-.708L11 2.061A.75.75 0 1 0 9.94 1L6.353 4.586a.5.5 0 0 1-.708 0L2.061 1A.75.75 0 0 0 1 2.06l3.586 3.586a.5.5 0 0 1 0 .708L1 9.939A.75.75 0 1 0 2.06 11l3.586-3.586a.5.5 0 0 1 .708 0L9.939 11Z" fill="#fff"/></svg>`,WALLET_CONNECT_LOGO:Ft`<svg width="178" height="29" viewBox="0 0 178 29" id="wcm-wc-logo"><path d="M10.683 7.926c5.284-5.17 13.85-5.17 19.134 0l.636.623a.652.652 0 0 1 0 .936l-2.176 2.129a.343.343 0 0 1-.478 0l-.875-.857c-3.686-3.607-9.662-3.607-13.348 0l-.937.918a.343.343 0 0 1-.479 0l-2.175-2.13a.652.652 0 0 1 0-.936l.698-.683Zm23.633 4.403 1.935 1.895a.652.652 0 0 1 0 .936l-8.73 8.543a.687.687 0 0 1-.956 0L20.37 17.64a.172.172 0 0 0-.239 0l-6.195 6.063a.687.687 0 0 1-.957 0l-8.73-8.543a.652.652 0 0 1 0-.936l1.936-1.895a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .239 0l6.195-6.064a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .24 0l6.195-6.064a.687.687 0 0 1 .956 0ZM48.093 20.948l2.338-9.355c.139-.515.258-1.07.416-1.942.12.872.258 1.427.357 1.942l2.022 9.355h4.181l3.528-13.874h-3.21l-1.943 8.523a24.825 24.825 0 0 0-.456 2.457c-.158-.931-.317-1.625-.495-2.438l-1.883-8.542h-4.201l-2.042 8.542a41.204 41.204 0 0 0-.475 2.438 41.208 41.208 0 0 0-.476-2.438l-1.903-8.542h-3.349l3.508 13.874h4.083ZM63.33 21.304c1.585 0 2.596-.654 3.11-1.605-.059.297-.078.595-.078.892v.357h2.655V15.22c0-2.735-1.248-4.32-4.3-4.32-2.636 0-4.36 1.466-4.52 3.487h2.914c.1-.891.734-1.426 1.705-1.426.911 0 1.407.515 1.407 1.11 0 .435-.258.693-1.03.792l-1.388.159c-2.061.257-3.825 1.01-3.825 3.19 0 1.982 1.645 3.092 3.35 3.092Zm.891-2.041c-.773 0-1.348-.436-1.348-1.19 0-.733.655-1.09 1.645-1.268l.674-.119c.575-.118.892-.218 1.09-.396v.912c0 1.228-.892 2.06-2.06 2.06ZM70.398 7.074v13.874h2.874V7.074h-2.874ZM74.934 7.074v13.874h2.874V7.074h-2.874ZM84.08 21.304c2.735 0 4.5-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922H81.92ZM94.92 21.146c.633 0 1.248-.1 1.525-.179v-2.18c-.218.04-.475.06-.693.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.338v-2.24h-2.338V7.788H91.47v3.448H89.37v2.24h2.1v4.201c0 2.3 1.15 3.469 3.45 3.469ZM104.62 21.304c3.924 0 6.302-2.299 6.599-5.608h-3.111c-.238 1.803-1.506 3.032-3.369 3.032-2.2 0-3.746-1.784-3.746-4.796 0-2.953 1.605-4.638 3.805-4.638 1.883 0 2.953 1.15 3.171 2.834h3.191c-.317-3.448-2.854-5.41-6.342-5.41-3.984 0-7.036 2.695-7.036 7.214 0 4.677 2.676 7.372 6.838 7.372ZM117.449 21.304c2.993 0 5.114-1.882 5.114-5.172 0-3.23-2.121-5.233-5.114-5.233-2.972 0-5.093 2.002-5.093 5.233 0 3.29 2.101 5.172 5.093 5.172Zm0-2.22c-1.327 0-2.18-1.09-2.18-2.952 0-1.903.892-2.973 2.18-2.973 1.308 0 2.2 1.07 2.2 2.973 0 1.862-.872 2.953-2.2 2.953ZM126.569 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.229-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM137.464 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.228-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM149.949 21.304c2.735 0 4.499-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922h-3.984ZM160.876 21.304c3.013 0 4.658-1.645 4.975-4.201h-2.874c-.099 1.07-.713 1.982-2.001 1.982-1.309 0-2.2-1.21-2.2-2.993 0-1.942 1.03-2.933 2.259-2.933 1.209 0 1.803.872 1.883 1.882h2.873c-.218-2.358-1.823-4.142-4.776-4.142-2.874 0-5.153 1.903-5.153 5.193 0 3.25 1.923 5.212 5.014 5.212ZM172.067 21.146c.634 0 1.248-.1 1.526-.179v-2.18c-.218.04-.476.06-.694.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.339v-2.24h-2.339V7.788h-2.854v3.448h-2.1v2.24h2.1v4.201c0 2.3 1.15 3.469 3.449 3.469Z" fill="#fff"/></svg>`,WALLET_CONNECT_ICON:Ft`<svg width="28" height="20" viewBox="0 0 28 20"><g clip-path="url(#a)"><path d="M7.386 6.482c3.653-3.576 9.575-3.576 13.228 0l.44.43a.451.451 0 0 1 0 .648L19.55 9.033a.237.237 0 0 1-.33 0l-.606-.592c-2.548-2.496-6.68-2.496-9.228 0l-.648.634a.237.237 0 0 1-.33 0L6.902 7.602a.451.451 0 0 1 0-.647l.483-.473Zm16.338 3.046 1.339 1.31a.451.451 0 0 1 0 .648l-6.035 5.909a.475.475 0 0 1-.662 0L14.083 13.2a.119.119 0 0 0-.166 0l-4.283 4.194a.475.475 0 0 1-.662 0l-6.035-5.91a.451.451 0 0 1 0-.647l1.338-1.31a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0Z" fill="#000000"/></g><defs><clipPath id="a"><path fill="#ffffff" d="M0 0h28v20H0z"/></clipPath></defs></svg>`,WALLET_CONNECT_ICON_COLORED:Ft`<svg width="96" height="96" fill="none"><path fill="#fff" d="M25.322 33.597c12.525-12.263 32.83-12.263 45.355 0l1.507 1.476a1.547 1.547 0 0 1 0 2.22l-5.156 5.048a.814.814 0 0 1-1.134 0l-2.074-2.03c-8.737-8.555-22.903-8.555-31.64 0l-2.222 2.175a.814.814 0 0 1-1.134 0l-5.156-5.049a1.547 1.547 0 0 1 0-2.22l1.654-1.62Zm56.019 10.44 4.589 4.494a1.547 1.547 0 0 1 0 2.22l-20.693 20.26a1.628 1.628 0 0 1-2.267 0L48.283 56.632a.407.407 0 0 0-.567 0L33.03 71.012a1.628 1.628 0 0 1-2.268 0L10.07 50.75a1.547 1.547 0 0 1 0-2.22l4.59-4.494a1.628 1.628 0 0 1 2.267 0l14.687 14.38c.156.153.41.153.567 0l14.685-14.38a1.628 1.628 0 0 1 2.268 0l14.687 14.38c.156.153.41.153.567 0l14.686-14.38a1.628 1.628 0 0 1 2.268 0Z"/><path stroke="#000" d="M25.672 33.954c12.33-12.072 32.325-12.072 44.655 0l1.508 1.476a1.047 1.047 0 0 1 0 1.506l-5.157 5.048a.314.314 0 0 1-.434 0l-2.074-2.03c-8.932-8.746-23.409-8.746-32.34 0l-2.222 2.174a.314.314 0 0 1-.434 0l-5.157-5.048a1.047 1.047 0 0 1 0-1.506l1.655-1.62Zm55.319 10.44 4.59 4.494a1.047 1.047 0 0 1 0 1.506l-20.694 20.26a1.128 1.128 0 0 1-1.568 0l-14.686-14.38a.907.907 0 0 0-1.267 0L32.68 70.655a1.128 1.128 0 0 1-1.568 0L10.42 50.394a1.047 1.047 0 0 1 0-1.506l4.59-4.493a1.128 1.128 0 0 1 1.567 0l14.687 14.379a.907.907 0 0 0 1.266 0l-.35-.357.35.357 14.686-14.38a1.128 1.128 0 0 1 1.568 0l14.687 14.38a.907.907 0 0 0 1.267 0l14.686-14.38a1.128 1.128 0 0 1 1.568 0Z"/></svg>`,BACK_ICON:Ft`<svg width="10" height="18" viewBox="0 0 10 18"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.735.179a.75.75 0 0 1 .087 1.057L2.92 8.192a1.25 1.25 0 0 0 0 1.617l5.902 6.956a.75.75 0 1 1-1.144.97L1.776 10.78a2.75 2.75 0 0 1 0-3.559L7.678.265A.75.75 0 0 1 8.735.18Z" fill="#fff"/></svg>`,COPY_ICON:Ft`<svg width="24" height="24" fill="none"><path fill="#fff" fill-rule="evenodd" d="M7.01 7.01c.03-1.545.138-2.5.535-3.28A5 5 0 0 1 9.73 1.545C10.8 1 12.2 1 15 1c2.8 0 4.2 0 5.27.545a5 5 0 0 1 2.185 2.185C23 4.8 23 6.2 23 9c0 2.8 0 4.2-.545 5.27a5 5 0 0 1-2.185 2.185c-.78.397-1.735.505-3.28.534l-.001.01c-.03 1.54-.138 2.493-.534 3.27a5 5 0 0 1-2.185 2.186C13.2 23 11.8 23 9 23c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C1 19.2 1 17.8 1 15c0-2.8 0-4.2.545-5.27A5 5 0 0 1 3.73 7.545C4.508 7.149 5.46 7.04 7 7.01h.01ZM15 15.5c-1.425 0-2.403-.001-3.162-.063-.74-.06-1.139-.172-1.427-.319a3.5 3.5 0 0 1-1.53-1.529c-.146-.288-.257-.686-.318-1.427C8.501 11.403 8.5 10.425 8.5 9c0-1.425.001-2.403.063-3.162.06-.74.172-1.139.318-1.427a3.5 3.5 0 0 1 1.53-1.53c.288-.146.686-.257 1.427-.318.759-.062 1.737-.063 3.162-.063 1.425 0 2.403.001 3.162.063.74.06 1.139.172 1.427.318a3.5 3.5 0 0 1 1.53 1.53c.146.288.257.686.318 1.427.062.759.063 1.737.063 3.162 0 1.425-.001 2.403-.063 3.162-.06.74-.172 1.139-.319 1.427a3.5 3.5 0 0 1-1.529 1.53c-.288.146-.686.257-1.427.318-.759.062-1.737.063-3.162.063ZM7 8.511c-.444.009-.825.025-1.162.052-.74.06-1.139.172-1.427.318a3.5 3.5 0 0 0-1.53 1.53c-.146.288-.257.686-.318 1.427-.062.759-.063 1.737-.063 3.162 0 1.425.001 2.403.063 3.162.06.74.172 1.139.318 1.427a3.5 3.5 0 0 0 1.53 1.53c.288.146.686.257 1.427.318.759.062 1.737.063 3.162.063 1.425 0 2.403-.001 3.162-.063.74-.06 1.139-.172 1.427-.319a3.5 3.5 0 0 0 1.53-1.53c.146-.287.257-.685.318-1.426.027-.337.043-.718.052-1.162H15c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C7 13.2 7 11.8 7 9v-.489Z" clip-rule="evenodd"/></svg>`,RETRY_ICON:Ft`<svg width="15" height="16" viewBox="0 0 15 16"><path d="M6.464 2.03A.75.75 0 0 0 5.403.97L2.08 4.293a1 1 0 0 0 0 1.414L5.403 9.03a.75.75 0 0 0 1.06-1.06L4.672 6.177a.25.25 0 0 1 .177-.427h2.085a4 4 0 1 1-3.93 4.746c-.077-.407-.405-.746-.82-.746-.414 0-.755.338-.7.748a5.501 5.501 0 1 0 5.45-6.248H4.848a.25.25 0 0 1-.177-.427L6.464 2.03Z" fill="#fff"/></svg>`,DESKTOP_ICON:Ft`<svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C2.204 1 3.13 1 4.98 1h6.04c1.85 0 2.775 0 3.466.394a3 3 0 0 1 1.12 1.12C16 3.204 16 4.13 16 5.98v1.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C13.796 12 12.87 12 11.02 12H4.98c-1.85 0-2.775 0-3.466-.394a3 3 0 0 1-1.12-1.12C0 9.796 0 8.87 0 7.02V5.98ZM4.98 2.5h6.04c.953 0 1.568.001 2.034.043.446.04.608.108.69.154a1.5 1.5 0 0 1 .559.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033v1.04c0 .952-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.046-.243.114-.69.154-.466.042-1.08.043-2.033.043H4.98c-.952 0-1.568-.001-2.034-.043-.446-.04-.608-.108-.69-.154a1.5 1.5 0 0 1-.559-.56c-.046-.08-.114-.243-.154-.69-.042-.465-.043-1.08-.043-2.033V5.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.046.243-.114.69-.154.465-.042 1.08-.043 2.033-.043Z" fill="#fff"/><path d="M4 14.25a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,MOBILE_ICON:Ft`<svg width="16" height="16" viewBox="0 0 16 16"><path d="M6.75 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C5.204 0 6.136 0 8 0s2.795 0 3.486.394a3 3 0 0 1 1.12 1.12C13 2.204 13 3.13 13 4.98v6.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C10.796 16 9.864 16 8 16s-2.795 0-3.486-.394a3 3 0 0 1-1.12-1.12C3 13.796 3 12.87 3 11.02V4.98Zm8.5 0v6.04c0 .953-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.045-.242.113-.693.154-.47.042-1.091.043-2.05.043-.959 0-1.58-.001-2.05-.043-.45-.04-.613-.109-.693-.154a1.5 1.5 0 0 1-.56-.56c-.046-.08-.114-.243-.154-.69-.042-.466-.043-1.08-.043-2.033V4.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.045.243-.113.693-.154C6.42 1.501 7.041 1.5 8 1.5c.959 0 1.58.001 2.05.043.45.04.613.109.693.154a1.5 1.5 0 0 1 .56.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033Z" fill="#fff"/></svg>`,ARROW_DOWN_ICON:Ft`<svg width="14" height="14" viewBox="0 0 14 14"><path d="M2.28 7.47a.75.75 0 0 0-1.06 1.06l5.25 5.25a.75.75 0 0 0 1.06 0l5.25-5.25a.75.75 0 0 0-1.06-1.06l-3.544 3.543a.25.25 0 0 1-.426-.177V.75a.75.75 0 0 0-1.5 0v10.086a.25.25 0 0 1-.427.176L2.28 7.47Z" fill="#fff"/></svg>`,ARROW_UP_RIGHT_ICON:Ft`<svg width="15" height="14" fill="none"><path d="M4.5 1.75A.75.75 0 0 1 5.25 1H12a1.5 1.5 0 0 1 1.5 1.5v6.75a.75.75 0 0 1-1.5 0V4.164a.25.25 0 0 0-.427-.176L4.061 11.5A.75.75 0 0 1 3 10.44l7.513-7.513a.25.25 0 0 0-.177-.427H5.25a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,ARROW_RIGHT_ICON:Ft`<svg width="6" height="14" viewBox="0 0 6 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.181 1.099a.75.75 0 0 1 1.024.279l2.433 4.258a2.75 2.75 0 0 1 0 2.729l-2.433 4.257a.75.75 0 1 1-1.303-.744L4.335 7.62a1.25 1.25 0 0 0 0-1.24L1.902 2.122a.75.75 0 0 1 .28-1.023Z" fill="#fff"/></svg>`,QRCODE_ICON:Ft`<svg width="25" height="24" viewBox="0 0 25 24"><path d="M23.748 9a.748.748 0 0 0 .748-.752c-.018-2.596-.128-4.07-.784-5.22a6 6 0 0 0-2.24-2.24c-1.15-.656-2.624-.766-5.22-.784a.748.748 0 0 0-.752.748c0 .414.335.749.748.752 1.015.007 1.82.028 2.494.088.995.09 1.561.256 1.988.5.7.398 1.28.978 1.679 1.678.243.427.41.993.498 1.988.061.675.082 1.479.09 2.493a.753.753 0 0 0 .75.749ZM3.527.788C4.677.132 6.152.022 8.747.004A.748.748 0 0 1 9.5.752a.753.753 0 0 1-.749.752c-1.014.007-1.818.028-2.493.088-.995.09-1.561.256-1.988.5-.7.398-1.28.978-1.679 1.678-.243.427-.41.993-.499 1.988-.06.675-.081 1.479-.088 2.493A.753.753 0 0 1 1.252 9a.748.748 0 0 1-.748-.752c.018-2.596.128-4.07.784-5.22a6 6 0 0 1 2.24-2.24ZM1.252 15a.748.748 0 0 0-.748.752c.018 2.596.128 4.07.784 5.22a6 6 0 0 0 2.24 2.24c1.15.656 2.624.766 5.22.784a.748.748 0 0 0 .752-.748.753.753 0 0 0-.749-.752c-1.014-.007-1.818-.028-2.493-.089-.995-.089-1.561-.255-1.988-.498a4.5 4.5 0 0 1-1.679-1.68c-.243-.426-.41-.992-.499-1.987-.06-.675-.081-1.479-.088-2.493A.753.753 0 0 0 1.252 15ZM22.996 15.749a.753.753 0 0 1 .752-.749c.415 0 .751.338.748.752-.018 2.596-.128 4.07-.784 5.22a6 6 0 0 1-2.24 2.24c-1.15.656-2.624.766-5.22.784a.748.748 0 0 1-.752-.748c0-.414.335-.749.748-.752 1.015-.007 1.82-.028 2.494-.089.995-.089 1.561-.255 1.988-.498a4.5 4.5 0 0 0 1.679-1.68c.243-.426.41-.992.498-1.987.061-.675.082-1.479.09-2.493Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 4a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 11h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 4H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM13.5 6.5A2.5 2.5 0 0 1 16 4h2a2.5 2.5 0 0 1 2.5 2.5v2A2.5 2.5 0 0 1 18 11h-2a2.5 2.5 0 0 1-2.5-2.5v-2Zm2.5-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1ZM7 13a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 20h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 13H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Z" fill="#fff"/><path d="M13.5 15.5c0-.465 0-.697.038-.89a2 2 0 0 1 1.572-1.572C15.303 13 15.535 13 16 13v2.5h-2.5ZM18 13c.465 0 .697 0 .89.038a2 2 0 0 1 1.572 1.572c.038.193.038.425.038.89H18V13ZM18 17.5h2.5c0 .465 0 .697-.038.89a2 2 0 0 1-1.572 1.572C18.697 20 18.465 20 18 20v-2.5ZM13.5 17.5H16V20c-.465 0-.697 0-.89-.038a2 2 0 0 1-1.572-1.572c-.038-.193-.038-.425-.038-.89Z" fill="#fff"/></svg>`,SCAN_ICON:Ft`<svg width="16" height="16" fill="none"><path fill="#fff" d="M10 15.216c0 .422.347.763.768.74 1.202-.064 2.025-.222 2.71-.613a5.001 5.001 0 0 0 1.865-1.866c.39-.684.549-1.507.613-2.709a.735.735 0 0 0-.74-.768.768.768 0 0 0-.76.732c-.009.157-.02.306-.032.447-.073.812-.206 1.244-.384 1.555-.31.545-.761.996-1.306 1.306-.311.178-.743.311-1.555.384-.141.013-.29.023-.447.032a.768.768 0 0 0-.732.76ZM10 .784c0 .407.325.737.732.76.157.009.306.02.447.032.812.073 1.244.206 1.555.384a3.5 3.5 0 0 1 1.306 1.306c.178.311.311.743.384 1.555.013.142.023.29.032.447a.768.768 0 0 0 .76.732.734.734 0 0 0 .74-.768c-.064-1.202-.222-2.025-.613-2.71A5 5 0 0 0 13.477.658c-.684-.39-1.507-.549-2.709-.613a.735.735 0 0 0-.768.74ZM5.232.044A.735.735 0 0 1 6 .784a.768.768 0 0 1-.732.76c-.157.009-.305.02-.447.032-.812.073-1.244.206-1.555.384A3.5 3.5 0 0 0 1.96 3.266c-.178.311-.311.743-.384 1.555-.013.142-.023.29-.032.447A.768.768 0 0 1 .784 6a.735.735 0 0 1-.74-.768c.064-1.202.222-2.025.613-2.71A5 5 0 0 1 2.523.658C3.207.267 4.03.108 5.233.044ZM5.268 14.456a.768.768 0 0 1 .732.76.734.734 0 0 1-.768.74c-1.202-.064-2.025-.222-2.71-.613a5 5 0 0 1-1.865-1.866c-.39-.684-.549-1.507-.613-2.709A.735.735 0 0 1 .784 10c.407 0 .737.325.76.732.009.157.02.306.032.447.073.812.206 1.244.384 1.555a3.5 3.5 0 0 0 1.306 1.306c.311.178.743.311 1.555.384.142.013.29.023.447.032Z"/></svg>`,CHECKMARK_ICON:Ft`<svg width="13" height="12" viewBox="0 0 13 12"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.155.132a.75.75 0 0 1 .232 1.035L5.821 11.535a1 1 0 0 1-1.626.09L.665 7.21a.75.75 0 1 1 1.17-.937L4.71 9.867a.25.25 0 0 0 .406-.023L11.12.364a.75.75 0 0 1 1.035-.232Z" fill="#fff"/></svg>`,SEARCH_ICON:Ft`<svg width="20" height="21"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.432 13.992c-.354-.353-.91-.382-1.35-.146a5.5 5.5 0 1 1 2.265-2.265c-.237.441-.208.997.145 1.35l3.296 3.296a.75.75 0 1 1-1.06 1.061l-3.296-3.296Zm.06-5a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z" fill="#949E9E"/></svg>`,WALLET_PLACEHOLDER:Ft`<svg width="60" height="60" fill="none" viewBox="0 0 60 60"><g clip-path="url(#q)"><path id="wallet-placeholder-fill" fill="#fff" d="M0 24.9c0-9.251 0-13.877 1.97-17.332a15 15 0 0 1 5.598-5.597C11.023 0 15.648 0 24.9 0h10.2c9.252 0 13.877 0 17.332 1.97a15 15 0 0 1 5.597 5.598C60 11.023 60 15.648 60 24.9v10.2c0 9.252 0 13.877-1.97 17.332a15.001 15.001 0 0 1-5.598 5.597C48.977 60 44.352 60 35.1 60H24.9c-9.251 0-13.877 0-17.332-1.97a15 15 0 0 1-5.597-5.598C0 48.977 0 44.352 0 35.1V24.9Z"/><path id="wallet-placeholder-dash" stroke="#000" stroke-dasharray="4 4" stroke-width="1.5" d="M.04 41.708a231.598 231.598 0 0 1-.039-4.403l.75-.001L.75 35.1v-2.55H0v-5.1h.75V24.9l.001-2.204h-.75c.003-1.617.011-3.077.039-4.404l.75.016c.034-1.65.099-3.08.218-4.343l-.746-.07c.158-1.678.412-3.083.82-4.316l.713.236c.224-.679.497-1.296.827-1.875a14.25 14.25 0 0 1 1.05-1.585L3.076 5.9A15 15 0 0 1 5.9 3.076l.455.596a14.25 14.25 0 0 1 1.585-1.05c.579-.33 1.196-.603 1.875-.827l-.236-.712C10.812.674 12.217.42 13.895.262l.07.746C15.23.89 16.66.824 18.308.79l-.016-.75C19.62.012 21.08.004 22.695.001l.001.75L24.9.75h2.55V0h5.1v.75h2.55l2.204.001v-.75c1.617.003 3.077.011 4.404.039l-.016.75c1.65.034 3.08.099 4.343.218l.07-.746c1.678.158 3.083.412 4.316.82l-.236.713c.679.224 1.296.497 1.875.827a14.24 14.24 0 0 1 1.585 1.05l.455-.596A14.999 14.999 0 0 1 56.924 5.9l-.596.455c.384.502.735 1.032 1.05 1.585.33.579.602 1.196.827 1.875l.712-.236c.409 1.233.663 2.638.822 4.316l-.747.07c.119 1.264.184 2.694.218 4.343l.75-.016c.028 1.327.036 2.787.039 4.403l-.75.001.001 2.204v2.55H60v5.1h-.75v2.55l-.001 2.204h.75a231.431 231.431 0 0 1-.039 4.404l-.75-.016c-.034 1.65-.099 3.08-.218 4.343l.747.07c-.159 1.678-.413 3.083-.822 4.316l-.712-.236a10.255 10.255 0 0 1-.827 1.875 14.242 14.242 0 0 1-1.05 1.585l.596.455a14.997 14.997 0 0 1-2.824 2.824l-.455-.596c-.502.384-1.032.735-1.585 1.05-.579.33-1.196.602-1.875.827l.236.712c-1.233.409-2.638.663-4.316.822l-.07-.747c-1.264.119-2.694.184-4.343.218l.016.75c-1.327.028-2.787.036-4.403.039l-.001-.75-2.204.001h-2.55V60h-5.1v-.75H24.9l-2.204-.001v.75a231.431 231.431 0 0 1-4.404-.039l.016-.75c-1.65-.034-3.08-.099-4.343-.218l-.07.747c-1.678-.159-3.083-.413-4.316-.822l.236-.712a10.258 10.258 0 0 1-1.875-.827 14.252 14.252 0 0 1-1.585-1.05l-.455.596A14.999 14.999 0 0 1 3.076 54.1l.596-.455a14.24 14.24 0 0 1-1.05-1.585 10.259 10.259 0 0 1-.827-1.875l-.712.236C.674 49.188.42 47.783.262 46.105l.746-.07C.89 44.77.824 43.34.79 41.692l-.75.016Z"/><path fill="#fff" fill-rule="evenodd" d="M35.643 32.145c-.297-.743-.445-1.114-.401-1.275a.42.42 0 0 1 .182-.27c.134-.1.463-.1 1.123-.1.742 0 1.499.046 2.236-.05a6 6 0 0 0 5.166-5.166c.051-.39.051-.855.051-1.784 0-.928 0-1.393-.051-1.783a6 6 0 0 0-5.166-5.165c-.39-.052-.854-.052-1.783-.052h-7.72c-4.934 0-7.401 0-9.244 1.051a8 8 0 0 0-2.985 2.986C16.057 22.28 16.003 24.58 16 29 15.998 31.075 16 33.15 16 35.224A7.778 7.778 0 0 0 23.778 43H28.5c1.394 0 2.09 0 2.67-.116a6 6 0 0 0 4.715-4.714c.115-.58.115-1.301.115-2.744 0-1.31 0-1.964-.114-2.49a4.998 4.998 0 0 0-.243-.792Z" clip-rule="evenodd"/><path fill="#9EA9A9" fill-rule="evenodd" d="M37 18h-7.72c-2.494 0-4.266.002-5.647.126-1.361.122-2.197.354-2.854.728a6.5 6.5 0 0 0-2.425 2.426c-.375.657-.607 1.492-.729 2.853-.11 1.233-.123 2.777-.125 4.867 0 .7 0 1.05.097 1.181.096.13.182.181.343.2.163.02.518-.18 1.229-.581a6.195 6.195 0 0 1 3.053-.8H37c.977 0 1.32-.003 1.587-.038a4.5 4.5 0 0 0 3.874-3.874c.036-.268.039-.611.039-1.588 0-.976-.003-1.319-.038-1.587a4.5 4.5 0 0 0-3.875-3.874C38.32 18.004 37.977 18 37 18Zm-7.364 12.5h-7.414a4.722 4.722 0 0 0-4.722 4.723 6.278 6.278 0 0 0 6.278 6.278H28.5c1.466 0 1.98-.008 2.378-.087a4.5 4.5 0 0 0 3.535-3.536c.08-.397.087-.933.087-2.451 0-1.391-.009-1.843-.08-2.17a3.5 3.5 0 0 0-2.676-2.676c-.328-.072-.762-.08-2.108-.08Z" clip-rule="evenodd"/></g><defs><clipPath id="q"><path fill="#fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>`,GLOBE_ICON:Ft`<svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="#fff" fill-rule="evenodd" d="M15.5 8a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0Zm-2.113.75c.301 0 .535.264.47.558a6.01 6.01 0 0 1-2.867 3.896c-.203.116-.42-.103-.334-.32.409-1.018.691-2.274.797-3.657a.512.512 0 0 1 .507-.477h1.427Zm.47-2.058c.065.294-.169.558-.47.558H11.96a.512.512 0 0 1-.507-.477c-.106-1.383-.389-2.638-.797-3.656-.087-.217.13-.437.333-.32a6.01 6.01 0 0 1 2.868 3.895Zm-4.402.558c.286 0 .515-.24.49-.525-.121-1.361-.429-2.534-.83-3.393-.279-.6-.549-.93-.753-1.112a.535.535 0 0 0-.724 0c-.204.182-.474.513-.754 1.112-.4.859-.708 2.032-.828 3.393a.486.486 0 0 0 .49.525h2.909Zm-5.415 0c.267 0 .486-.21.507-.477.106-1.383.389-2.638.797-3.656.087-.217-.13-.437-.333-.32a6.01 6.01 0 0 0-2.868 3.895c-.065.294.169.558.47.558H4.04ZM2.143 9.308c-.065-.294.169-.558.47-.558H4.04c.267 0 .486.21.507.477.106 1.383.389 2.639.797 3.657.087.217-.13.436-.333.32a6.01 6.01 0 0 1-2.868-3.896Zm3.913-.033a.486.486 0 0 1 .49-.525h2.909c.286 0 .515.24.49.525-.121 1.361-.428 2.535-.83 3.394-.279.6-.549.93-.753 1.112a.535.535 0 0 1-.724 0c-.204-.182-.474-.513-.754-1.112-.4-.859-.708-2.033-.828-3.394Z" clip-rule="evenodd"/></svg>`},US=ut`.wcm-toolbar-placeholder{top:0;bottom:0;left:0;right:0;width:100%;position:absolute;display:block;pointer-events:none;height:100px;border-radius:calc(var(--wcm-background-border-radius) * .9);background-color:var(--wcm-background-color);background-position:center;background-size:cover}.wcm-toolbar{height:38px;display:flex;position:relative;margin:5px 15px 5px 5px;justify-content:space-between;align-items:center}.wcm-toolbar img,.wcm-toolbar svg{height:28px;object-position:left center;object-fit:contain}#wcm-wc-logo path{fill:var(--wcm-accent-fill-color)}button{width:28px;height:28px;border-radius:var(--wcm-icon-button-border-radius);border:0;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:var(--wcm-color-bg-1);box-shadow:0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-bg-2)}button svg{display:block;object-position:center}button path{fill:var(--wcm-color-fg-1)}.wcm-toolbar div{display:flex}@media(hover:hover){button:hover{background-color:var(--wcm-color-bg-2)}}`;var FS=Object.defineProperty,jS=Object.getOwnPropertyDescriptor,BS=(t,e,r,n)=>{for(var i=n>1?void 0:n?jS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&FS(e,r,i),i};let au=class extends Ye{render(){return le`<div class="wcm-toolbar-placeholder"></div><div class="wcm-toolbar">${ht.WALLET_CONNECT_LOGO} <button @click="${Yn.close}">${ht.CROSS_ICON}</button></div>`}};au.styles=[rt.globalCss,US],au=BS([ot("wcm-modal-backcard")],au);const qS=ut`main{padding:20px;padding-top:0;width:100%}`;var zS=Object.defineProperty,WS=Object.getOwnPropertyDescriptor,VS=(t,e,r,n)=>{for(var i=n>1?void 0:n?WS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&zS(e,r,i),i};let cu=class extends Ye{render(){return le`<main><slot></slot></main>`}};cu.styles=[rt.globalCss,qS],cu=VS([ot("wcm-modal-content")],cu);const HS=ut`footer{padding:10px;display:flex;flex-direction:column;align-items:inherit;justify-content:inherit;border-top:1px solid var(--wcm-color-bg-2)}`;var KS=Object.defineProperty,ZS=Object.getOwnPropertyDescriptor,GS=(t,e,r,n)=>{for(var i=n>1?void 0:n?ZS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&KS(e,r,i),i};let lu=class extends Ye{render(){return le`<footer><slot></slot></footer>`}};lu.styles=[rt.globalCss,HS],lu=GS([ot("wcm-modal-footer")],lu);const QS=ut`header{display:flex;justify-content:center;align-items:center;padding:20px;position:relative}.wcm-border{border-bottom:1px solid var(--wcm-color-bg-2);margin-bottom:20px}header button{padding:15px 20px}header button:active{opacity:.5}@media(hover:hover){header button:hover{opacity:.5}}.wcm-back-btn{position:absolute;left:0}.wcm-action-btn{position:absolute;right:0}path{fill:var(--wcm-accent-color)}`;var YS=Object.defineProperty,JS=Object.getOwnPropertyDescriptor,fo=(t,e,r,n)=>{for(var i=n>1?void 0:n?JS(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&YS(e,r,i),i};let wi=class extends Ye{constructor(){super(...arguments),this.title="",this.onAction=void 0,this.actionIcon=void 0,this.border=!1}backBtnTemplate(){return le`<button class="wcm-back-btn" @click="${$t.goBack}">${ht.BACK_ICON}</button>`}actionBtnTemplate(){return le`<button class="wcm-action-btn" @click="${this.onAction}">${this.actionIcon}</button>`}render(){const t={"wcm-border":this.border},e=$t.state.history.length>1,r=this.title?le`<wcm-text variant="big-bold">${this.title}</wcm-text>`:le`<slot></slot>`;return le`<header class="${En(t)}">${e?this.backBtnTemplate():null} ${r} ${this.onAction?this.actionBtnTemplate():null}</header>`}};wi.styles=[rt.globalCss,QS],fo([je()],wi.prototype,"title",2),fo([je()],wi.prototype,"onAction",2),fo([je()],wi.prototype,"actionIcon",2),fo([je({type:Boolean})],wi.prototype,"border",2),wi=fo([ot("wcm-modal-header")],wi);const Pe={MOBILE_BREAKPOINT:600,WCM_RECENT_WALLET_DATA:"WCM_RECENT_WALLET_DATA",EXPLORER_WALLET_URL:"https://explorer.walletconnect.com/?type=wallet",getShadowRootElement(t,e){const r=t.renderRoot.querySelector(e);if(!r)throw new Error(`${e} not found`);return r},getWalletIcon({id:t,image_id:e}){const{walletImages:r}=Rr.state;return r!=null&&r[t]?r[t]:e?xr.getWalletImageUrl(e):""},getWalletName(t,e=!1){return e&&t.length>8?`${t.substring(0,8)}..`:t},isMobileAnimation(){return window.innerWidth<=Pe.MOBILE_BREAKPOINT},async preloadImage(t){const e=new Promise((r,n)=>{const i=new Image;i.onload=r,i.onerror=n,i.crossOrigin="anonymous",i.src=t});return Promise.race([e,we.wait(3e3)])},getErrorMessage(t){return t instanceof Error?t.message:"Unknown Error"},debounce(t,e=500){let r;return(...n)=>{function i(){t(...n)}r&&clearTimeout(r),r=setTimeout(i,e)}},handleMobileLinking(t){const{walletConnectUri:e}=Vt.state,{mobile:r,name:n}=t,i=r==null?void 0:r.native,s=r==null?void 0:r.universal;Pe.setRecentWallet(t);function o(a){let c="";i?c=we.formatUniversalUrl(i,a,n):s&&(c=we.formatNativeUrl(s,a,n)),we.openHref(c,"_self")}e&&o(e)},handleAndroidLinking(){const{walletConnectUri:t}=Vt.state;t&&(we.setWalletConnectAndroidDeepLink(t),we.openHref(t,"_self"))},async handleUriCopy(){const{walletConnectUri:t}=Vt.state;if(t)try{await navigator.clipboard.writeText(t),An.openToast("Link copied","success")}catch{An.openToast("Failed to copy","error")}},getCustomImageUrls(){const{walletImages:t}=Rr.state,e=Object.values(t??{});return Object.values(e)},truncate(t,e=8){return t.length<=e?t:`${t.substring(0,4)}...${t.substring(t.length-4)}`},setRecentWallet(t){try{localStorage.setItem(Pe.WCM_RECENT_WALLET_DATA,JSON.stringify(t))}catch{console.info("Unable to set recent wallet")}},getRecentWallet(){try{const t=localStorage.getItem(Pe.WCM_RECENT_WALLET_DATA);return t?JSON.parse(t):void 0}catch{console.info("Unable to get recent wallet")}},caseSafeIncludes(t,e){return t.toUpperCase().includes(e.toUpperCase())},openWalletExplorerUrl(){we.openHref(Pe.EXPLORER_WALLET_URL,"_blank")},getCachedRouterWalletPlatforms(){const{desktop:t,mobile:e}=we.getWalletRouterData(),r=!!(t!=null&&t.native),n=!!(t!=null&&t.universal),i=!!(e!=null&&e.native)||!!(e!=null&&e.universal);return{isDesktop:r,isMobile:i,isWeb:n}},goToConnectingView(t){$t.setData({Wallet:t});const e=we.isMobile(),{isDesktop:r,isWeb:n,isMobile:i}=Pe.getCachedRouterWalletPlatforms();e?i?$t.push("MobileConnecting"):n?$t.push("WebConnecting"):$t.push("InstallWallet"):r?$t.push("DesktopConnecting"):n?$t.push("WebConnecting"):i?$t.push("MobileQrcodeConnecting"):$t.push("InstallWallet")}},XS=ut`.wcm-router{overflow:hidden;will-change:transform}.wcm-content{display:flex;flex-direction:column}`;var e4=Object.defineProperty,t4=Object.getOwnPropertyDescriptor,uu=(t,e,r,n)=>{for(var i=n>1?void 0:n?t4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&e4(e,r,i),i};let po=class extends Ye{constructor(){super(),this.view=$t.state.view,this.prevView=$t.state.view,this.unsubscribe=void 0,this.oldHeight="0px",this.resizeObserver=void 0,this.unsubscribe=$t.subscribe(t=>{this.view!==t.view&&this.onChangeRoute()})}firstUpdated(){this.resizeObserver=new ResizeObserver(([t])=>{const e=`${t.contentRect.height}px`;this.oldHeight!=="0px"&&vi(this.routerEl,{height:[this.oldHeight,e]},{duration:.2}),this.oldHeight=e}),this.resizeObserver.observe(this.contentEl)}disconnectedCallback(){var t,e;(t=this.unsubscribe)==null||t.call(this),(e=this.resizeObserver)==null||e.disconnect()}get routerEl(){return Pe.getShadowRootElement(this,".wcm-router")}get contentEl(){return Pe.getShadowRootElement(this,".wcm-content")}viewTemplate(){switch(this.view){case"ConnectWallet":return le`<wcm-connect-wallet-view></wcm-connect-wallet-view>`;case"DesktopConnecting":return le`<wcm-desktop-connecting-view></wcm-desktop-connecting-view>`;case"MobileConnecting":return le`<wcm-mobile-connecting-view></wcm-mobile-connecting-view>`;case"WebConnecting":return le`<wcm-web-connecting-view></wcm-web-connecting-view>`;case"MobileQrcodeConnecting":return le`<wcm-mobile-qr-connecting-view></wcm-mobile-qr-connecting-view>`;case"WalletExplorer":return le`<wcm-wallet-explorer-view></wcm-wallet-explorer-view>`;case"Qrcode":return le`<wcm-qrcode-view></wcm-qrcode-view>`;case"InstallWallet":return le`<wcm-install-wallet-view></wcm-install-wallet-view>`;default:return le`<div>Not Found</div>`}}async onChangeRoute(){await vi(this.routerEl,{opacity:[1,0],scale:[1,1.02]},{duration:.15,delay:.1}).finished,this.view=$t.state.view,vi(this.routerEl,{opacity:[0,1],scale:[.99,1]},{duration:.37,delay:.05})}render(){return le`<div class="wcm-router"><div class="wcm-content">${this.viewTemplate()}</div></div>`}};po.styles=[rt.globalCss,XS],uu([Ir()],po.prototype,"view",2),uu([Ir()],po.prototype,"prevView",2),po=uu([ot("wcm-modal-router")],po);const r4=ut`div{height:36px;width:max-content;display:flex;justify-content:center;align-items:center;padding:9px 15px 11px;position:absolute;top:12px;box-shadow:0 6px 14px -6px rgba(10,16,31,.3),0 10px 32px -4px rgba(10,16,31,.15);z-index:2;left:50%;transform:translateX(-50%);pointer-events:none;backdrop-filter:blur(20px) saturate(1.8);-webkit-backdrop-filter:blur(20px) saturate(1.8);border-radius:var(--wcm-notification-border-radius);border:1px solid var(--wcm-color-overlay);background-color:var(--wcm-color-overlay)}svg{margin-right:5px}@-moz-document url-prefix(){div{background-color:var(--wcm-color-bg-3)}}.wcm-success path{fill:var(--wcm-accent-color)}.wcm-error path{fill:var(--wcm-error-color)}`;var n4=Object.defineProperty,i4=Object.getOwnPropertyDescriptor,L0=(t,e,r,n)=>{for(var i=n>1?void 0:n?i4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&n4(e,r,i),i};let Na=class extends Ye{constructor(){super(),this.open=!1,this.unsubscribe=void 0,this.timeout=void 0,this.unsubscribe=An.subscribe(t=>{t.open?(this.open=!0,this.timeout=setTimeout(()=>An.closeToast(),2200)):(this.open=!1,clearTimeout(this.timeout))})}disconnectedCallback(){var t;(t=this.unsubscribe)==null||t.call(this),clearTimeout(this.timeout),An.closeToast()}render(){const{message:t,variant:e}=An.state,r={"wcm-success":e==="success","wcm-error":e==="error"};return this.open?le`<div class="${En(r)}">${e==="success"?ht.CHECKMARK_ICON:null} ${e==="error"?ht.CROSS_ICON:null}<wcm-text variant="small-regular">${t}</wcm-text></div>`:null}};Na.styles=[rt.globalCss,r4],L0([Ir()],Na.prototype,"open",2),Na=L0([ot("wcm-modal-toast")],Na);const s4=.1,M0=2.5,Sn=7;function du(t,e,r){return t===e?!1:(t-e<0?e-t:t-e)<=r+s4}function o4(t,e){const r=Array.prototype.slice.call(ao.create(t,{errorCorrectionLevel:e}).modules.data,0),n=Math.sqrt(r.length);return r.reduce((i,s,o)=>(o%n===0?i.push([s]):i[i.length-1].push(s))&&i,[])}const a4={generate(t,e,r){const n="#141414",i="#ffffff",s=[],o=o4(t,"Q"),a=e/o.length,c=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];c.forEach(({x:b,y:E})=>{const x=(o.length-Sn)*a*b,I=(o.length-Sn)*a*E,w=.45;for(let C=0;C<c.length;C+=1){const v=a*(Sn-C*2);s.push(Ft`<rect fill="${C%2===0?n:i}" height="${v}" rx="${v*w}" ry="${v*w}" width="${v}" x="${x+a*C}" y="${I+a*C}">`)}});const u=Math.floor((r+25)/a),d=o.length/2-u/2,f=o.length/2+u/2-1,p=[];o.forEach((b,E)=>{b.forEach((x,I)=>{if(o[E][I]&&!(E<Sn&&I<Sn||E>o.length-(Sn+1)&&I<Sn||E<Sn&&I>o.length-(Sn+1))&&!(E>d&&E<f&&I>d&&I<f)){const w=E*a+a/2,C=I*a+a/2;p.push([w,C])}})});const y={};return p.forEach(([b,E])=>{y[b]?y[b].push(E):y[b]=[E]}),Object.entries(y).map(([b,E])=>{const x=E.filter(I=>E.every(w=>!du(I,w,a)));return[Number(b),x]}).forEach(([b,E])=>{E.forEach(x=>{s.push(Ft`<circle cx="${b}" cy="${x}" fill="${n}" r="${a/M0}">`)})}),Object.entries(y).filter(([b,E])=>E.length>1).map(([b,E])=>{const x=E.filter(I=>E.some(w=>du(I,w,a)));return[Number(b),x]}).map(([b,E])=>{E.sort((I,w)=>I<w?-1:1);const x=[];for(const I of E){const w=x.find(C=>C.some(v=>du(I,v,a)));w?w.push(I):x.push([I])}return[b,x.map(I=>[I[0],I[I.length-1]])]}).forEach(([b,E])=>{E.forEach(([x,I])=>{s.push(Ft`<line x1="${b}" x2="${b}" y1="${x}" y2="${I}" stroke="${n}" stroke-width="${a/(M0/2)}" stroke-linecap="round">`)})}),s}},c4=ut`@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}div{position:relative;user-select:none;display:block;overflow:hidden;aspect-ratio:1/1;animation:fadeIn ease .2s}.wcm-dark{background-color:#fff;border-radius:var(--wcm-container-border-radius);padding:18px;box-shadow:0 2px 5px #000}svg:first-child,wcm-wallet-image{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{width:25%;height:25%;border-radius:var(--wcm-wallet-icon-border-radius)}svg:first-child{transform:translateY(-50%) translateX(-50%) scale(.9)}svg:first-child path:first-child{fill:var(--wcm-accent-color)}svg:first-child path:last-child{stroke:var(--wcm-color-overlay)}`;var l4=Object.defineProperty,u4=Object.getOwnPropertyDescriptor,Ji=(t,e,r,n)=>{for(var i=n>1?void 0:n?u4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&l4(e,r,i),i};let xn=class extends Ye{constructor(){super(...arguments),this.uri="",this.size=0,this.imageId=void 0,this.walletId=void 0,this.imageUrl=void 0}svgTemplate(){const t=In.state.themeMode==="light"?this.size:this.size-36;return Ft`<svg height="${t}" width="${t}">${a4.generate(this.uri,t,t/4)}</svg>`}render(){const t={"wcm-dark":In.state.themeMode==="dark"};return le`<div style="${`width: ${this.size}px`}" class="${En(t)}">${this.walletId||this.imageUrl?le`<wcm-wallet-image walletId="${Er(this.walletId)}" imageId="${Er(this.imageId)}" imageUrl="${Er(this.imageUrl)}"></wcm-wallet-image>`:ht.WALLET_CONNECT_ICON_COLORED} ${this.svgTemplate()}</div>`}};xn.styles=[rt.globalCss,c4],Ji([je()],xn.prototype,"uri",2),Ji([je({type:Number})],xn.prototype,"size",2),Ji([je()],xn.prototype,"imageId",2),Ji([je()],xn.prototype,"walletId",2),Ji([je()],xn.prototype,"imageUrl",2),xn=Ji([ot("wcm-qrcode")],xn);const d4=ut`:host{position:relative;height:28px;width:80%}input{width:100%;height:100%;line-height:28px!important;border-radius:var(--wcm-input-border-radius);font-style:normal;font-family:-apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,'Helvetica Neue',sans-serif;font-feature-settings:'case' on;font-weight:500;font-size:16px;letter-spacing:-.03em;padding:0 10px 0 34px;transition:.2s all ease;color:var(--wcm-color-fg-1);background-color:var(--wcm-color-bg-3);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay);caret-color:var(--wcm-accent-color)}input::placeholder{color:var(--wcm-color-fg-2)}svg{left:10px;top:4px;pointer-events:none;position:absolute;width:20px;height:20px}input:focus-within{box-shadow:inset 0 0 0 1px var(--wcm-accent-color)}path{fill:var(--wcm-color-fg-2)}`;var h4=Object.defineProperty,f4=Object.getOwnPropertyDescriptor,k0=(t,e,r,n)=>{for(var i=n>1?void 0:n?f4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&h4(e,r,i),i};let $a=class extends Ye{constructor(){super(...arguments),this.onChange=()=>null}render(){return le`<input type="text" @input="${this.onChange}" placeholder="Search wallets"> ${ht.SEARCH_ICON}`}};$a.styles=[rt.globalCss,d4],k0([je()],$a.prototype,"onChange",2),$a=k0([ot("wcm-search-input")],$a);const p4=ut`@keyframes rotate{100%{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}svg{animation:rotate 2s linear infinite;display:flex;justify-content:center;align-items:center}svg circle{stroke-linecap:round;animation:dash 1.5s ease infinite;stroke:var(--wcm-accent-color)}`;var g4=Object.defineProperty,m4=Object.getOwnPropertyDescriptor,y4=(t,e,r,n)=>{for(var i=n>1?void 0:n?m4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&g4(e,r,i),i};let hu=class extends Ye{render(){return le`<svg viewBox="0 0 50 50" width="24" height="24"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4" stroke="#fff"/></svg>`}};hu.styles=[rt.globalCss,p4],hu=y4([ot("wcm-spinner")],hu);const v4=ut`span{font-style:normal;font-family:var(--wcm-font-family);font-feature-settings:var(--wcm-font-feature-settings)}.wcm-xsmall-bold{font-family:var(--wcm-text-xsmall-bold-font-family);font-weight:var(--wcm-text-xsmall-bold-weight);font-size:var(--wcm-text-xsmall-bold-size);line-height:var(--wcm-text-xsmall-bold-line-height);letter-spacing:var(--wcm-text-xsmall-bold-letter-spacing);text-transform:var(--wcm-text-xsmall-bold-text-transform)}.wcm-xsmall-regular{font-family:var(--wcm-text-xsmall-regular-font-family);font-weight:var(--wcm-text-xsmall-regular-weight);font-size:var(--wcm-text-xsmall-regular-size);line-height:var(--wcm-text-xsmall-regular-line-height);letter-spacing:var(--wcm-text-xsmall-regular-letter-spacing);text-transform:var(--wcm-text-xsmall-regular-text-transform)}.wcm-small-thin{font-family:var(--wcm-text-small-thin-font-family);font-weight:var(--wcm-text-small-thin-weight);font-size:var(--wcm-text-small-thin-size);line-height:var(--wcm-text-small-thin-line-height);letter-spacing:var(--wcm-text-small-thin-letter-spacing);text-transform:var(--wcm-text-small-thin-text-transform)}.wcm-small-regular{font-family:var(--wcm-text-small-regular-font-family);font-weight:var(--wcm-text-small-regular-weight);font-size:var(--wcm-text-small-regular-size);line-height:var(--wcm-text-small-regular-line-height);letter-spacing:var(--wcm-text-small-regular-letter-spacing);text-transform:var(--wcm-text-small-regular-text-transform)}.wcm-medium-regular{font-family:var(--wcm-text-medium-regular-font-family);font-weight:var(--wcm-text-medium-regular-weight);font-size:var(--wcm-text-medium-regular-size);line-height:var(--wcm-text-medium-regular-line-height);letter-spacing:var(--wcm-text-medium-regular-letter-spacing);text-transform:var(--wcm-text-medium-regular-text-transform)}.wcm-big-bold{font-family:var(--wcm-text-big-bold-font-family);font-weight:var(--wcm-text-big-bold-weight);font-size:var(--wcm-text-big-bold-size);line-height:var(--wcm-text-big-bold-line-height);letter-spacing:var(--wcm-text-big-bold-letter-spacing);text-transform:var(--wcm-text-big-bold-text-transform)}:host(*){color:var(--wcm-color-fg-1)}.wcm-color-primary{color:var(--wcm-color-fg-1)}.wcm-color-secondary{color:var(--wcm-color-fg-2)}.wcm-color-tertiary{color:var(--wcm-color-fg-3)}.wcm-color-inverse{color:var(--wcm-accent-fill-color)}.wcm-color-accnt{color:var(--wcm-accent-color)}.wcm-color-error{color:var(--wcm-error-color)}`;var w4=Object.defineProperty,b4=Object.getOwnPropertyDescriptor,fu=(t,e,r,n)=>{for(var i=n>1?void 0:n?b4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&w4(e,r,i),i};let go=class extends Ye{constructor(){super(...arguments),this.variant="medium-regular",this.color="primary"}render(){const t={"wcm-big-bold":this.variant==="big-bold","wcm-medium-regular":this.variant==="medium-regular","wcm-small-regular":this.variant==="small-regular","wcm-small-thin":this.variant==="small-thin","wcm-xsmall-regular":this.variant==="xsmall-regular","wcm-xsmall-bold":this.variant==="xsmall-bold","wcm-color-primary":this.color==="primary","wcm-color-secondary":this.color==="secondary","wcm-color-tertiary":this.color==="tertiary","wcm-color-inverse":this.color==="inverse","wcm-color-accnt":this.color==="accent","wcm-color-error":this.color==="error"};return le`<span><slot class="${En(t)}"></slot></span>`}};go.styles=[rt.globalCss,v4],fu([je()],go.prototype,"variant",2),fu([je()],go.prototype,"color",2),go=fu([ot("wcm-text")],go);const _4=ut`button{width:100%;height:100%;border-radius:var(--wcm-button-hover-highlight-border-radius);display:flex;align-items:flex-start}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}button>div{width:80px;padding:5px 0;display:flex;flex-direction:column;align-items:center}wcm-text{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}wcm-wallet-image{height:60px;width:60px;transition:all .2s ease;border-radius:var(--wcm-wallet-icon-border-radius);margin-bottom:5px}.wcm-sublabel{margin-top:2px}`;var E4=Object.defineProperty,S4=Object.getOwnPropertyDescriptor,Wn=(t,e,r,n)=>{for(var i=n>1?void 0:n?S4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&E4(e,r,i),i};let dn=class extends Ye{constructor(){super(...arguments),this.onClick=()=>null,this.name="",this.walletId="",this.label=void 0,this.imageId=void 0,this.installed=!1,this.recent=!1}sublabelTemplate(){return this.recent?le`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">RECENT</wcm-text>`:this.installed?le`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">INSTALLED</wcm-text>`:null}handleClick(){$u.click({name:"WALLET_BUTTON",walletId:this.walletId}),this.onClick()}render(){var t;return le`<button @click="${this.handleClick.bind(this)}"><div><wcm-wallet-image walletId="${this.walletId}" imageId="${Er(this.imageId)}"></wcm-wallet-image><wcm-text variant="xsmall-regular">${(t=this.label)!=null?t:Pe.getWalletName(this.name,!0)}</wcm-text>${this.sublabelTemplate()}</div></button>`}};dn.styles=[rt.globalCss,_4],Wn([je()],dn.prototype,"onClick",2),Wn([je()],dn.prototype,"name",2),Wn([je()],dn.prototype,"walletId",2),Wn([je()],dn.prototype,"label",2),Wn([je()],dn.prototype,"imageId",2),Wn([je({type:Boolean})],dn.prototype,"installed",2),Wn([je({type:Boolean})],dn.prototype,"recent",2),dn=Wn([ot("wcm-wallet-button")],dn);const x4=ut`:host{display:block}div{overflow:hidden;position:relative;border-radius:inherit;width:100%;height:100%;background-color:var(--wcm-color-overlay)}svg{position:relative;width:100%;height:100%}div::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;border-radius:inherit;border:1px solid var(--wcm-color-overlay)}div img{width:100%;height:100%;object-fit:cover;object-position:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var C4=Object.defineProperty,O4=Object.getOwnPropertyDescriptor,La=(t,e,r,n)=>{for(var i=n>1?void 0:n?O4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&C4(e,r,i),i};let Xi=class extends Ye{constructor(){super(...arguments),this.walletId="",this.imageId=void 0,this.imageUrl=void 0}render(){var t;const e=(t=this.imageUrl)!=null&&t.length?this.imageUrl:Pe.getWalletIcon({id:this.walletId,image_id:this.imageId});return le`${e.length?le`<div><img crossorigin="anonymous" src="${e}" alt="${this.id}"></div>`:ht.WALLET_PLACEHOLDER}`}};Xi.styles=[rt.globalCss,x4],La([je()],Xi.prototype,"walletId",2),La([je()],Xi.prototype,"imageId",2),La([je()],Xi.prototype,"imageUrl",2),Xi=La([ot("wcm-wallet-image")],Xi);var D4=Object.defineProperty,I4=Object.getOwnPropertyDescriptor,U0=(t,e,r,n)=>{for(var i=n>1?void 0:n?I4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&D4(e,r,i),i};let pu=class extends Ye{constructor(){super(),this.preload=!0,this.preloadData()}async loadImages(t){try{t!=null&&t.length&&await Promise.all(t.map(async e=>Pe.preloadImage(e)))}catch{console.info("Unsuccessful attempt at preloading some images",t)}}async preloadListings(){if(Rr.state.enableExplorer){await xr.getRecomendedWallets(),Vt.setIsDataLoaded(!0);const{recomendedWallets:t}=xr.state,e=t.map(r=>Pe.getWalletIcon(r));await this.loadImages(e)}else Vt.setIsDataLoaded(!0)}async preloadCustomImages(){const t=Pe.getCustomImageUrls();await this.loadImages(t)}async preloadData(){try{this.preload&&(this.preload=!1,await Promise.all([this.preloadListings(),this.preloadCustomImages()]))}catch(t){console.error(t),An.openToast("Failed preloading","error")}}};U0([Ir()],pu.prototype,"preload",2),pu=U0([ot("wcm-explorer-context")],pu);var A4=Object.defineProperty,T4=Object.getOwnPropertyDescriptor,R4=(t,e,r,n)=>{for(var i=n>1?void 0:n?T4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&A4(e,r,i),i};let F0=class extends Ye{constructor(){super(),this.unsubscribeTheme=void 0,rt.setTheme(),this.unsubscribeTheme=In.subscribe(rt.setTheme)}disconnectedCallback(){var t;(t=this.unsubscribeTheme)==null||t.call(this)}};F0=R4([ot("wcm-theme-context")],F0);const P4=ut`@keyframes scroll{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(calc(-70px * 9),0,0)}}.wcm-slider{position:relative;overflow-x:hidden;padding:10px 0;margin:0 -20px;width:calc(100% + 40px)}.wcm-track{display:flex;width:calc(70px * 18);animation:scroll 20s linear infinite;opacity:.7}.wcm-track svg{margin:0 5px}wcm-wallet-image{width:60px;height:60px;margin:0 5px;border-radius:var(--wcm-wallet-icon-border-radius)}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-title{display:flex;align-items:center;margin-bottom:10px}.wcm-title svg{margin-right:6px}.wcm-title path{fill:var(--wcm-accent-color)}wcm-modal-footer .wcm-title{padding:0 10px}wcm-button-big{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);filter:drop-shadow(0 0 17px var(--wcm-color-bg-1))}wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-info-footer wcm-text{text-align:center;margin-bottom:15px}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var N4=Object.defineProperty,$4=Object.getOwnPropertyDescriptor,L4=(t,e,r,n)=>{for(var i=n>1?void 0:n?$4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&N4(e,r,i),i};let gu=class extends Ye{onGoToQrcode(){$t.push("Qrcode")}render(){const{recomendedWallets:t}=xr.state,e=[...t,...t],r=we.RECOMMENDED_WALLET_AMOUNT*2;return le`<wcm-modal-header title="Connect your wallet" .onAction="${this.onGoToQrcode}" .actionIcon="${ht.QRCODE_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-title">${ht.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">WalletConnect</wcm-text></div><div class="wcm-slider"><div class="wcm-track">${[...Array(r)].map((n,i)=>{const s=e[i%e.length];return s?le`<wcm-wallet-image walletId="${s.id}" imageId="${s.image_id}"></wcm-wallet-image>`:ht.WALLET_PLACEHOLDER})}</div><wcm-button-big @click="${Pe.handleAndroidLinking}"><wcm-text variant="medium-regular" color="inverse">Select Wallet</wcm-text></wcm-button-big></div></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">Choose WalletConnect to see supported apps on your device</wcm-text></wcm-info-footer>`}};gu.styles=[rt.globalCss,P4],gu=L4([ot("wcm-android-wallet-selection")],gu);const M4=ut`@keyframes loading{to{stroke-dashoffset:0}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(1px,0,0)}30%,50%,70%{transform:translate3d(-2px,0,0)}40%,60%{transform:translate3d(2px,0,0)}}:host{display:flex;flex-direction:column;align-items:center}div{position:relative;width:110px;height:110px;display:flex;justify-content:center;align-items:center;margin:40px 0 20px 0;transform:translate3d(0,0,0)}svg{position:absolute;width:110px;height:110px;fill:none;stroke:transparent;stroke-linecap:round;stroke-width:2px;top:0;left:0}use{stroke:var(--wcm-accent-color);animation:loading 1s linear infinite}wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:90px;height:90px}wcm-text{margin-bottom:40px}.wcm-error svg{stroke:var(--wcm-error-color)}.wcm-error use{display:none}.wcm-error{animation:shake .4s cubic-bezier(.36,.07,.19,.97) both}.wcm-stale svg,.wcm-stale use{display:none}`;var k4=Object.defineProperty,U4=Object.getOwnPropertyDescriptor,es=(t,e,r,n)=>{for(var i=n>1?void 0:n?U4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&k4(e,r,i),i};let Vn=class extends Ye{constructor(){super(...arguments),this.walletId=void 0,this.imageId=void 0,this.isError=!1,this.isStale=!1,this.label=""}svgLoaderTemplate(){var t,e;const r=(e=(t=In.state.themeVariables)==null?void 0:t["--wcm-wallet-icon-large-border-radius"])!=null?e:rt.getPreset("--wcm-wallet-icon-large-border-radius");let n=0;r.includes("%")?n=88/100*parseInt(r,10):n=parseInt(r,10),n*=1.17;const i=317-n*1.57,s=425-n*1.8;return le`<svg viewBox="0 0 110 110" width="110" height="110"><rect id="wcm-loader" x="2" y="2" width="106" height="106" rx="${n}"/><use xlink:href="#wcm-loader" stroke-dasharray="106 ${i}" stroke-dashoffset="${s}"></use></svg>`}render(){const t={"wcm-error":this.isError,"wcm-stale":this.isStale};return le`<div class="${En(t)}">${this.svgLoaderTemplate()}<wcm-wallet-image walletId="${Er(this.walletId)}" imageId="${Er(this.imageId)}"></wcm-wallet-image></div><wcm-text variant="medium-regular" color="${this.isError?"error":"primary"}">${this.isError?"Connection declined":this.label}</wcm-text>`}};Vn.styles=[rt.globalCss,M4],es([je()],Vn.prototype,"walletId",2),es([je()],Vn.prototype,"imageId",2),es([je({type:Boolean})],Vn.prototype,"isError",2),es([je({type:Boolean})],Vn.prototype,"isStale",2),es([je()],Vn.prototype,"label",2),Vn=es([ot("wcm-connector-waiting")],Vn);const ts={manualWallets(){var t,e;const{mobileWallets:r,desktopWallets:n}=Rr.state,i=(t=ts.recentWallet())==null?void 0:t.id,s=we.isMobile()?r:n,o=s==null?void 0:s.filter(a=>i!==a.id);return(e=we.isMobile()?o==null?void 0:o.map(({id:a,name:c,links:u})=>({id:a,name:c,mobile:u,links:u})):o==null?void 0:o.map(({id:a,name:c,links:u})=>({id:a,name:c,desktop:u,links:u})))!=null?e:[]},recentWallet(){return Pe.getRecentWallet()},recomendedWallets(t=!1){var e;const r=t||(e=ts.recentWallet())==null?void 0:e.id,{recomendedWallets:n}=xr.state;return n.filter(i=>r!==i.id)}},Hn={onConnecting(t){Pe.goToConnectingView(t)},manualWalletsTemplate(){return ts.manualWallets().map(t=>le`<wcm-wallet-button walletId="${t.id}" name="${t.name}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`)},recomendedWalletsTemplate(t=!1){return ts.recomendedWallets(t).map(e=>le`<wcm-wallet-button name="${e.name}" walletId="${e.id}" imageId="${e.image_id}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`)},recentWalletTemplate(){const t=ts.recentWallet();if(t)return le`<wcm-wallet-button name="${t.name}" walletId="${t.id}" imageId="${Er(t.image_id)}" .recent="${!0}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`}},F4=ut`.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-desktop-title,.wcm-mobile-title{display:flex;align-items:center}.wcm-mobile-title{justify-content:space-between;margin-bottom:20px;margin-top:-10px}.wcm-desktop-title{margin-bottom:10px;padding:0 10px}.wcm-subtitle{display:flex;align-items:center}.wcm-subtitle:last-child path{fill:var(--wcm-color-fg-3)}.wcm-desktop-title svg,.wcm-mobile-title svg{margin-right:6px}.wcm-desktop-title path,.wcm-mobile-title path{fill:var(--wcm-accent-color)}`;var j4=Object.defineProperty,B4=Object.getOwnPropertyDescriptor,q4=(t,e,r,n)=>{for(var i=n>1?void 0:n?B4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&j4(e,r,i),i};let mu=class extends Ye{render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Rr.state,r=t!=="ALL"&&e,n=Hn.manualWalletsTemplate(),i=Hn.recomendedWalletsTemplate();let s=[Hn.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>4||r;let a=[];o?a=s.slice(0,3):a=s;const c=!!a.length;return le`<wcm-modal-header .border="${!0}" title="Connect your wallet" .onAction="${Pe.handleUriCopy}" .actionIcon="${ht.COPY_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-mobile-title"><div class="wcm-subtitle">${ht.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">Mobile</wcm-text></div><div class="wcm-subtitle">${ht.SCAN_ICON}<wcm-text variant="small-regular" color="secondary">Scan with your wallet</wcm-text></div></div><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>${c?le`<wcm-modal-footer><div class="wcm-desktop-title">${ht.DESKTOP_ICON}<wcm-text variant="small-regular" color="accent">Desktop</wcm-text></div><div class="wcm-grid">${a} ${o?le`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-footer>`:null}`}};mu.styles=[rt.globalCss,F4],mu=q4([ot("wcm-desktop-wallet-selection")],mu);const z4=ut`div{background-color:var(--wcm-color-bg-2);padding:10px 20px 15px 20px;border-top:1px solid var(--wcm-color-bg-3);text-align:center}a{color:var(--wcm-accent-color);text-decoration:none;transition:opacity .2s ease-in-out;display:inline}a:active{opacity:.8}@media(hover:hover){a:hover{opacity:.8}}`;var W4=Object.defineProperty,V4=Object.getOwnPropertyDescriptor,H4=(t,e,r,n)=>{for(var i=n>1?void 0:n?V4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&W4(e,r,i),i};let yu=class extends Ye{render(){const{termsOfServiceUrl:t,privacyPolicyUrl:e}=Rr.state;return t??e?le`<div><wcm-text variant="small-regular" color="secondary">By connecting your wallet to this app, you agree to the app's ${t?le`<a href="${t}" target="_blank" rel="noopener noreferrer">Terms of Service</a>`:null} ${t&&e?"and":null} ${e?le`<a href="${e}" target="_blank" rel="noopener noreferrer">Privacy Policy</a>`:null}</wcm-text></div>`:null}};yu.styles=[rt.globalCss,z4],yu=H4([ot("wcm-legal-notice")],yu);const K4=ut`div{display:grid;grid-template-columns:repeat(4,80px);margin:0 -10px;justify-content:space-between;row-gap:10px}`;var Z4=Object.defineProperty,G4=Object.getOwnPropertyDescriptor,Q4=(t,e,r,n)=>{for(var i=n>1?void 0:n?G4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Z4(e,r,i),i};let vu=class extends Ye{onQrcode(){$t.push("Qrcode")}render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Rr.state,r=t!=="ALL"&&e,n=Hn.manualWalletsTemplate(),i=Hn.recomendedWalletsTemplate();let s=[Hn.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>8||r;let a=[];o?a=s.slice(0,7):a=s;const c=!!a.length;return le`<wcm-modal-header title="Connect your wallet" .onAction="${this.onQrcode}" .actionIcon="${ht.QRCODE_ICON}"></wcm-modal-header>${c?le`<wcm-modal-content><div>${a} ${o?le`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-content>`:null}`}};vu.styles=[rt.globalCss,K4],vu=Q4([ot("wcm-mobile-wallet-selection")],vu);const Y4=ut`:host{all:initial}.wcm-overlay{top:0;bottom:0;left:0;right:0;position:fixed;z-index:var(--wcm-z-index);overflow:hidden;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;background-color:var(--wcm-overlay-background-color);backdrop-filter:var(--wcm-overlay-backdrop-filter)}@media(max-height:720px) and (orientation:landscape){.wcm-overlay{overflow:scroll;align-items:flex-start;padding:20px 0}}.wcm-active{pointer-events:auto}.wcm-container{position:relative;max-width:360px;width:100%;outline:0;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) var(--wcm-container-border-radius) var(--wcm-container-border-radius);border:1px solid var(--wcm-color-overlay);overflow:hidden}.wcm-card{width:100%;position:relative;border-radius:var(--wcm-container-border-radius);overflow:hidden;box-shadow:0 6px 14px -6px rgba(10,16,31,.12),0 10px 32px -4px rgba(10,16,31,.1),0 0 0 1px var(--wcm-color-overlay);background-color:var(--wcm-color-bg-1);color:var(--wcm-color-fg-1)}@media(max-width:600px){.wcm-container{max-width:440px;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) 0 0}.wcm-card{border-radius:var(--wcm-container-border-radius) var(--wcm-container-border-radius) 0 0}.wcm-overlay{align-items:flex-end}}@media(max-width:440px){.wcm-container{border:0}}`;var J4=Object.defineProperty,X4=Object.getOwnPropertyDescriptor,wu=(t,e,r,n)=>{for(var i=n>1?void 0:n?X4(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&J4(e,r,i),i};let rs=class extends Ye{constructor(){super(),this.open=!1,this.active=!1,this.unsubscribeModal=void 0,this.abortController=void 0,this.unsubscribeModal=Yn.subscribe(t=>{t.open?this.onOpenModalEvent():this.onCloseModalEvent()})}disconnectedCallback(){var t;(t=this.unsubscribeModal)==null||t.call(this)}get overlayEl(){return Pe.getShadowRootElement(this,".wcm-overlay")}get containerEl(){return Pe.getShadowRootElement(this,".wcm-container")}toggleBodyScroll(t){if(document.querySelector("body"))if(t){const e=document.getElementById("wcm-styles");e==null||e.remove()}else document.head.insertAdjacentHTML("beforeend",'<style id="wcm-styles">html,body{touch-action:none;overflow:hidden;overscroll-behavior:contain;}</style>')}onCloseModal(t){t.target===t.currentTarget&&Yn.close()}onOpenModalEvent(){this.toggleBodyScroll(!1),this.addKeyboardEvents(),this.open=!0,setTimeout(async()=>{const t=Pe.isMobileAnimation()?{y:["50vh","0vh"]}:{scale:[.98,1]},e=.1,r=.2;await Promise.all([vi(this.overlayEl,{opacity:[0,1]},{delay:e,duration:r}).finished,vi(this.containerEl,t,{delay:e,duration:r}).finished]),this.active=!0},0)}async onCloseModalEvent(){this.toggleBodyScroll(!0),this.removeKeyboardEvents();const t=Pe.isMobileAnimation()?{y:["0vh","50vh"]}:{scale:[1,.98]},e=.2;await Promise.all([vi(this.overlayEl,{opacity:[1,0]},{duration:e}).finished,vi(this.containerEl,t,{duration:e}).finished]),this.containerEl.removeAttribute("style"),this.active=!1,this.open=!1}addKeyboardEvents(){this.abortController=new AbortController,window.addEventListener("keydown",t=>{var e;t.key==="Escape"?Yn.close():t.key==="Tab"&&((e=t.target)!=null&&e.tagName.includes("wcm-")||this.containerEl.focus())},this.abortController),this.containerEl.focus()}removeKeyboardEvents(){var t;(t=this.abortController)==null||t.abort(),this.abortController=void 0}render(){const t={"wcm-overlay":!0,"wcm-active":this.active};return le`<wcm-explorer-context></wcm-explorer-context><wcm-theme-context></wcm-theme-context><div id="wcm-modal" class="${En(t)}" @click="${this.onCloseModal}" role="alertdialog" aria-modal="true"><div class="wcm-container" tabindex="0">${this.open?le`<wcm-modal-backcard></wcm-modal-backcard><div class="wcm-card"><wcm-modal-router></wcm-modal-router><wcm-modal-toast></wcm-modal-toast></div>`:null}</div></div>`}};rs.styles=[rt.globalCss,Y4],wu([Ir()],rs.prototype,"open",2),wu([Ir()],rs.prototype,"active",2),rs=wu([ot("wcm-modal")],rs);const ex=ut`div{display:flex;margin-top:15px}slot{display:inline-block;margin:0 5px}wcm-button{margin:0 5px}`;var tx=Object.defineProperty,rx=Object.getOwnPropertyDescriptor,mo=(t,e,r,n)=>{for(var i=n>1?void 0:n?rx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&tx(e,r,i),i};let bi=class extends Ye{constructor(){super(...arguments),this.isMobile=!1,this.isDesktop=!1,this.isWeb=!1,this.isRetry=!1}onMobile(){we.isMobile()?$t.replace("MobileConnecting"):$t.replace("MobileQrcodeConnecting")}onDesktop(){$t.replace("DesktopConnecting")}onWeb(){$t.replace("WebConnecting")}render(){return le`<div>${this.isRetry?le`<slot></slot>`:null} ${this.isMobile?le`<wcm-button .onClick="${this.onMobile}" .iconLeft="${ht.MOBILE_ICON}" variant="outline">Mobile</wcm-button>`:null} ${this.isDesktop?le`<wcm-button .onClick="${this.onDesktop}" .iconLeft="${ht.DESKTOP_ICON}" variant="outline">Desktop</wcm-button>`:null} ${this.isWeb?le`<wcm-button .onClick="${this.onWeb}" .iconLeft="${ht.GLOBE_ICON}" variant="outline">Web</wcm-button>`:null}</div>`}};bi.styles=[rt.globalCss,ex],mo([je({type:Boolean})],bi.prototype,"isMobile",2),mo([je({type:Boolean})],bi.prototype,"isDesktop",2),mo([je({type:Boolean})],bi.prototype,"isWeb",2),mo([je({type:Boolean})],bi.prototype,"isRetry",2),bi=mo([ot("wcm-platform-selection")],bi);const nx=ut`button{display:flex;flex-direction:column;padding:5px 10px;border-radius:var(--wcm-button-hover-highlight-border-radius);height:100%;justify-content:flex-start}.wcm-icons{width:60px;height:60px;display:flex;flex-wrap:wrap;padding:7px;border-radius:var(--wcm-wallet-icon-border-radius);justify-content:space-between;align-items:center;margin-bottom:5px;background-color:var(--wcm-color-bg-2);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}.wcm-icons img{width:21px;height:21px;object-fit:cover;object-position:center;border-radius:calc(var(--wcm-wallet-icon-border-radius)/ 2);border:1px solid var(--wcm-color-overlay)}.wcm-icons svg{width:21px;height:21px}.wcm-icons img:nth-child(1),.wcm-icons img:nth-child(2),.wcm-icons svg:nth-child(1),.wcm-icons svg:nth-child(2){margin-bottom:4px}wcm-text{width:100%;text-align:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var ix=Object.defineProperty,sx=Object.getOwnPropertyDescriptor,ox=(t,e,r,n)=>{for(var i=n>1?void 0:n?sx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&ix(e,r,i),i};let bu=class extends Ye{onClick(){$t.push("WalletExplorer")}render(){const{recomendedWallets:t}=xr.state,e=ts.manualWallets(),r=[...t,...e].reverse().slice(0,4);return le`<button @click="${this.onClick}"><div class="wcm-icons">${r.map(n=>{const i=Pe.getWalletIcon(n);if(i)return le`<img crossorigin="anonymous" src="${i}">`;const s=Pe.getWalletIcon({id:n.id});return s?le`<img crossorigin="anonymous" src="${s}">`:ht.WALLET_PLACEHOLDER})} ${[...Array(4-r.length)].map(()=>ht.WALLET_PLACEHOLDER)}</div><wcm-text variant="xsmall-regular">View All</wcm-text></button>`}};bu.styles=[rt.globalCss,nx],bu=ox([ot("wcm-view-all-wallets-button")],bu);const ax=ut`.wcm-qr-container{width:100%;display:flex;justify-content:center;align-items:center;aspect-ratio:1/1}`;var cx=Object.defineProperty,lx=Object.getOwnPropertyDescriptor,Ma=(t,e,r,n)=>{for(var i=n>1?void 0:n?lx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&cx(e,r,i),i};let ns=class extends Ye{constructor(){super(),this.walletId="",this.imageId="",this.uri="",setTimeout(()=>{const{walletConnectUri:t}=Vt.state;this.uri=t},0)}get overlayEl(){return Pe.getShadowRootElement(this,".wcm-qr-container")}render(){return le`<div class="wcm-qr-container">${this.uri?le`<wcm-qrcode size="${this.overlayEl.offsetWidth}" uri="${this.uri}" walletId="${Er(this.walletId)}" imageId="${Er(this.imageId)}"></wcm-qrcode>`:le`<wcm-spinner></wcm-spinner>`}</div>`}};ns.styles=[rt.globalCss,ax],Ma([je()],ns.prototype,"walletId",2),Ma([je()],ns.prototype,"imageId",2),Ma([Ir()],ns.prototype,"uri",2),ns=Ma([ot("wcm-walletconnect-qr")],ns);var ux=Object.defineProperty,dx=Object.getOwnPropertyDescriptor,hx=(t,e,r,n)=>{for(var i=n>1?void 0:n?dx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&ux(e,r,i),i};let _u=class extends Ye{viewTemplate(){return we.isAndroid()?le`<wcm-android-wallet-selection></wcm-android-wallet-selection>`:we.isMobile()?le`<wcm-mobile-wallet-selection></wcm-mobile-wallet-selection>`:le`<wcm-desktop-wallet-selection></wcm-desktop-wallet-selection>`}render(){return le`${this.viewTemplate()}<wcm-legal-notice></wcm-legal-notice>`}};_u.styles=[rt.globalCss],_u=hx([ot("wcm-connect-wallet-view")],_u);const fx=ut`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var px=Object.defineProperty,gx=Object.getOwnPropertyDescriptor,j0=(t,e,r,n)=>{for(var i=n>1?void 0:n?gx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&px(e,r,i),i};let ka=class extends Ye{constructor(){super(),this.isError=!1,this.openDesktopApp()}onFormatAndRedirect(t){const{desktop:e,name:r}=we.getWalletRouterData(),n=e==null?void 0:e.native;if(n){const i=we.formatNativeUrl(n,t,r);we.openHref(i,"_self")}}openDesktopApp(){const{walletConnectUri:t}=Vt.state,e=we.getWalletRouterData();Pe.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=we.getWalletRouterData(),{isMobile:n,isWeb:i}=Pe.getCachedRouterWalletPlatforms();return le`<wcm-modal-header title="${t}" .onAction="${Pe.handleUriCopy}" .actionIcon="${ht.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Er(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Connection can continue loading if ${t} is not installed on your device`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isWeb="${i}" .isRetry="${!0}"><wcm-button .onClick="${this.openDesktopApp.bind(this)}" .iconRight="${ht.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};ka.styles=[rt.globalCss,fx],j0([Ir()],ka.prototype,"isError",2),ka=j0([ot("wcm-desktop-connecting-view")],ka);const mx=ut`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}wcm-button{margin-top:15px}`;var yx=Object.defineProperty,vx=Object.getOwnPropertyDescriptor,wx=(t,e,r,n)=>{for(var i=n>1?void 0:n?vx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&yx(e,r,i),i};let Eu=class extends Ye{onInstall(t){t&&we.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,homepage:n}=we.getWalletRouterData();return le`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Er(r)}" label="Not Detected" .isStale="${!0}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Download ${t} to continue. If multiple browser extensions are installed, disable non ${t} ones and try again`}</wcm-text><wcm-button .onClick="${()=>this.onInstall(n)}" .iconLeft="${ht.ARROW_DOWN_ICON}">Download</wcm-button></wcm-info-footer>`}};Eu.styles=[rt.globalCss,mx],Eu=wx([ot("wcm-install-wallet-view")],Eu);const bx=ut`wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:96px;height:96px;margin-bottom:20px}wcm-info-footer{display:flex;width:100%}.wcm-app-store{justify-content:space-between}.wcm-app-store wcm-wallet-image{margin-right:10px;margin-bottom:0;width:28px;height:28px;border-radius:var(--wcm-wallet-icon-small-border-radius)}.wcm-app-store div{display:flex;align-items:center}.wcm-app-store wcm-button{margin-right:-10px}.wcm-note{flex-direction:column;align-items:center;padding:5px 0}.wcm-note wcm-text{text-align:center}wcm-platform-selection{margin-top:-15px}.wcm-note wcm-text{margin-top:15px}.wcm-note wcm-text span{color:var(--wcm-accent-color)}`;var _x=Object.defineProperty,Ex=Object.getOwnPropertyDescriptor,B0=(t,e,r,n)=>{for(var i=n>1?void 0:n?Ex(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&_x(e,r,i),i};let Ua=class extends Ye{constructor(){super(),this.isError=!1,this.openMobileApp()}onFormatAndRedirect(t,e=!1){const{mobile:r,name:n}=we.getWalletRouterData(),i=r==null?void 0:r.native,s=r==null?void 0:r.universal;if(i&&!e){const o=we.formatNativeUrl(i,t,n);we.openHref(o,"_self")}else if(s){const o=we.formatUniversalUrl(s,t,n);we.openHref(o,"_self")}}openMobileApp(t=!1){const{walletConnectUri:e}=Vt.state,r=we.getWalletRouterData();Pe.setRecentWallet(r),e&&this.onFormatAndRedirect(e,t)}onGoToAppStore(t){t&&we.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,app:n,mobile:i}=we.getWalletRouterData(),{isWeb:s}=Pe.getCachedRouterWalletPlatforms(),o=n==null?void 0:n.ios,a=i==null?void 0:i.universal;return le`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Er(r)}" label="Tap 'Open' to continue…" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer class="wcm-note"><wcm-platform-selection .isWeb="${s}" .isRetry="${!0}"><wcm-button .onClick="${()=>this.openMobileApp(!1)}" .iconRight="${ht.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection>${a?le`<wcm-text color="secondary" variant="small-thin">Still doesn't work? <span tabindex="0" @click="${()=>this.openMobileApp(!0)}">Try this alternate link</span></wcm-text>`:null}</wcm-info-footer><wcm-info-footer class="wcm-app-store"><div><wcm-wallet-image walletId="${e}" imageId="${Er(r)}"></wcm-wallet-image><wcm-text>${`Get ${t}`}</wcm-text></div><wcm-button .iconRight="${ht.ARROW_RIGHT_ICON}" .onClick="${()=>this.onGoToAppStore(o)}" variant="ghost">App Store</wcm-button></wcm-info-footer>`}};Ua.styles=[rt.globalCss,bx],B0([Ir()],Ua.prototype,"isError",2),Ua=B0([ot("wcm-mobile-connecting-view")],Ua);const Sx=ut`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var xx=Object.defineProperty,Cx=Object.getOwnPropertyDescriptor,Ox=(t,e,r,n)=>{for(var i=n>1?void 0:n?Cx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&xx(e,r,i),i};let Su=class extends Ye{render(){const{name:t,id:e,image_id:r}=we.getWalletRouterData(),{isDesktop:n,isWeb:i}=Pe.getCachedRouterWalletPlatforms();return le`<wcm-modal-header title="${t}" .onAction="${Pe.handleUriCopy}" .actionIcon="${ht.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr walletId="${e}" imageId="${Er(r)}"></wcm-walletconnect-qr></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Scan this QR Code with your phone's camera or inside ${t} app`}</wcm-text><wcm-platform-selection .isDesktop="${n}" .isWeb="${i}"></wcm-platform-selection></wcm-info-footer>`}};Su.styles=[rt.globalCss,Sx],Su=Ox([ot("wcm-mobile-qr-connecting-view")],Su);var Dx=Object.defineProperty,Ix=Object.getOwnPropertyDescriptor,Ax=(t,e,r,n)=>{for(var i=n>1?void 0:n?Ix(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Dx(e,r,i),i};let xu=class extends Ye{render(){return le`<wcm-modal-header title="Scan the code" .onAction="${Pe.handleUriCopy}" .actionIcon="${ht.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>`}};xu.styles=[rt.globalCss],xu=Ax([ot("wcm-qrcode-view")],xu);const Tx=ut`wcm-modal-content{height:clamp(200px,60vh,600px);display:block;overflow:scroll;scrollbar-width:none;position:relative;margin-top:1px}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between;margin:-15px -10px;padding-top:20px}wcm-modal-content::after,wcm-modal-content::before{content:'';position:fixed;pointer-events:none;z-index:1;width:100%;height:20px;opacity:1}wcm-modal-content::before{box-shadow:0 -1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(var(--wcm-color-bg-1),rgba(255,255,255,0))}wcm-modal-content::after{box-shadow:0 1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(rgba(255,255,255,0),var(--wcm-color-bg-1));top:calc(100% - 20px)}wcm-modal-content::-webkit-scrollbar{display:none}.wcm-placeholder-block{display:flex;justify-content:center;align-items:center;height:100px;overflow:hidden}.wcm-empty,.wcm-loading{display:flex}.wcm-loading .wcm-placeholder-block{height:100%}.wcm-end-reached .wcm-placeholder-block{height:0;opacity:0}.wcm-empty .wcm-placeholder-block{opacity:1;height:100%}wcm-wallet-button{margin:calc((100% - 60px)/ 3) 0}`;var Rx=Object.defineProperty,Px=Object.getOwnPropertyDescriptor,yo=(t,e,r,n)=>{for(var i=n>1?void 0:n?Px(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Rx(e,r,i),i};const Cu=40;let _i=class extends Ye{constructor(){super(...arguments),this.loading=!xr.state.wallets.listings.length,this.firstFetch=!xr.state.wallets.listings.length,this.search="",this.endReached=!1,this.intersectionObserver=void 0,this.searchDebounce=Pe.debounce(t=>{t.length>=1?(this.firstFetch=!0,this.endReached=!1,this.search=t,xr.resetSearch(),this.fetchWallets()):this.search&&(this.search="",this.endReached=this.isLastPage(),xr.resetSearch())})}firstUpdated(){this.createPaginationObserver()}disconnectedCallback(){var t;(t=this.intersectionObserver)==null||t.disconnect()}get placeholderEl(){return Pe.getShadowRootElement(this,".wcm-placeholder-block")}createPaginationObserver(){this.intersectionObserver=new IntersectionObserver(([t])=>{t.isIntersecting&&!(this.search&&this.firstFetch)&&this.fetchWallets()}),this.intersectionObserver.observe(this.placeholderEl)}isLastPage(){const{wallets:t,search:e}=xr.state,{listings:r,total:n}=this.search?e:t;return n<=Cu||r.length>=n}async fetchWallets(){var t;const{wallets:e,search:r}=xr.state,{listings:n,total:i,page:s}=this.search?r:e;if(!this.endReached&&(this.firstFetch||i>Cu&&n.length<i))try{this.loading=!0;const o=(t=Vt.state.chains)==null?void 0:t.join(","),{listings:a}=await xr.getWallets({page:this.firstFetch?1:s+1,entries:Cu,search:this.search,version:2,chains:o}),c=a.map(u=>Pe.getWalletIcon(u));await Promise.all([...c.map(async u=>Pe.preloadImage(u)),we.wait(300)]),this.endReached=this.isLastPage()}catch(o){console.error(o),An.openToast(Pe.getErrorMessage(o),"error")}finally{this.loading=!1,this.firstFetch=!1}}onConnect(t){we.isAndroid()?Pe.handleMobileLinking(t):Pe.goToConnectingView(t)}onSearchChange(t){const{value:e}=t.target;this.searchDebounce(e)}render(){const{wallets:t,search:e}=xr.state,{listings:r}=this.search?e:t,n=this.loading&&!r.length,i=this.search.length>=3;let s=Hn.manualWalletsTemplate(),o=Hn.recomendedWalletsTemplate(!0);i&&(s=s.filter(({values:u})=>Pe.caseSafeIncludes(u[0],this.search)),o=o.filter(({values:u})=>Pe.caseSafeIncludes(u[0],this.search)));const a=!this.loading&&!r.length&&!o.length,c={"wcm-loading":n,"wcm-end-reached":this.endReached||!this.loading,"wcm-empty":a};return le`<wcm-modal-header><wcm-search-input .onChange="${this.onSearchChange.bind(this)}"></wcm-search-input></wcm-modal-header><wcm-modal-content class="${En(c)}"><div class="wcm-grid">${n?null:s} ${n?null:o} ${n?null:r.map(u=>le`${u?le`<wcm-wallet-button imageId="${u.image_id}" name="${u.name}" walletId="${u.id}" .onClick="${()=>this.onConnect(u)}"></wcm-wallet-button>`:null}`)}</div><div class="wcm-placeholder-block">${a?le`<wcm-text variant="big-bold" color="secondary">No results found</wcm-text>`:null} ${!a&&this.loading?le`<wcm-spinner></wcm-spinner>`:null}</div></wcm-modal-content>`}};_i.styles=[rt.globalCss,Tx],yo([Ir()],_i.prototype,"loading",2),yo([Ir()],_i.prototype,"firstFetch",2),yo([Ir()],_i.prototype,"search",2),yo([Ir()],_i.prototype,"endReached",2),_i=yo([ot("wcm-wallet-explorer-view")],_i);const Nx=ut`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var $x=Object.defineProperty,Lx=Object.getOwnPropertyDescriptor,q0=(t,e,r,n)=>{for(var i=n>1?void 0:n?Lx(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&$x(e,r,i),i};let Fa=class extends Ye{constructor(){super(),this.isError=!1,this.openWebWallet()}onFormatAndRedirect(t){const{desktop:e,name:r}=we.getWalletRouterData(),n=e==null?void 0:e.universal;if(n){const i=we.formatUniversalUrl(n,t,r);we.openHref(i,"_blank")}}openWebWallet(){const{walletConnectUri:t}=Vt.state,e=we.getWalletRouterData();Pe.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=we.getWalletRouterData(),{isMobile:n,isDesktop:i}=Pe.getCachedRouterWalletPlatforms(),s=we.isMobile();return le`<wcm-modal-header title="${t}" .onAction="${Pe.handleUriCopy}" .actionIcon="${ht.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Er(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`${t} web app has opened in a new tab. Go there, accept the connection, and come back`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isDesktop="${s?!1:i}" .isRetry="${!0}"><wcm-button .onClick="${this.openWebWallet.bind(this)}" .iconRight="${ht.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Fa.styles=[rt.globalCss,Nx],q0([Ir()],Fa.prototype,"isError",2),Fa=q0([ot("wcm-web-connecting-view")],Fa);const Mx=Object.freeze(Object.defineProperty({__proto__:null,get WcmModal(){return rs},get WcmQrCode(){return xn}},Symbol.toStringTag,{value:"Module"}));J.ICore=L3,J.ICrypto=M3,J.IEngine=Y3,J.IEngineEvents=Q3,J.IExpirer=V3,J.IJsonRpcHistory=k3,J.IKeyChain=W3,J.IMessageTracker=U3,J.IPairing=H3,J.IPublisher=F3,J.IRelayer=j3,J.ISignClient=G3,J.ISignClientEvents=Z3,J.IStore=B3,J.ISubscriber=z3,J.ISubscriberTopicMap=q3,J.IVerify=K3,J.PAGE_SIZE=C5,J.PuzzleWalletProvider=A5,J.aleoAddressRegex=zf,J.aleoFieldRegex=Kf,J.aleoPrivateKeyRegex=Vf,J.aleoTransactionIdRegex=Hf,J.aleoU32=Zf,J.aleoU64=Gf,J.aleoViewKeyRegex=Wf,J.configureConnection=Pf,J.connect=g5,J.createSharedState=y5,J.decrypt=v5,J.disconnect=w5,J.emitter=ci,J.getAccount=f5,J.getBalance=p5,J.getEvent=b5,J.getEvents=_5,J.getFormattedRecordPlaintext=l5,J.getRecords=S5,J.getWalletConnectModalSignClient=St,J.importSharedState=E5,J.projectId=Tf,J.queryClient=Ap,J.requestCreateEvent=m5,J.requestSignature=x5,J.shortenAddress=vl,J.signClient_puzzleProps=T_,J.useAccount=GE,J.useBalance=QE,J.useConnect=YE,J.useCreateSharedState=JE,J.useDecrypt=n5,J.useDisconnect=s5,J.useEvent=o5,J.useEvents=a5,J.useImportSharedState=c5,J.useOnSessionDelete=tl,J.useOnSessionEvent=Fi,J.useOnSessionExpire=Qf,J.useOnSessionUpdate=rl,J.useRecords=u5,J.useRequestCreateEvent=h5,J.useRequestSignature=d5,J.useSession=jr,J.wc_aleo_chains=Rs,J.wc_aleo_methods=Jo,J.wc_events=Xo,J.web3modal_puzzle_props=Rf,J.zodAddress=x3,J.zodEventStatus=P3,J.zodEventType=R3,J.zodField=I3,J.zodNetwork=N3,J.zodPrivateKey=O3,J.zodTransactionId=D3,J.zodU32=A3,J.zodU64=T3,J.zodViewKey=C3,J.zodVisibility=$3,Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})});
